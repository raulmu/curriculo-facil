"use strict";(self.webpackChunkcurriculo_facil=self.webpackChunkcurriculo_facil||[]).push([[179],{2011:(mt,ke,U)=>{U.d(ke,{Dh:()=>_e,GT:()=>be,cc:()=>Le,hO:()=>qe,on:()=>W,pX:()=>fe,xv:()=>Ce});var h=U(4650),j=U(127),O=U(5813);mt=U.hmd(mt);const ce=["ngOnDestroy"],fe=(ve,it,st,Ve={})=>new Proxy(ve,{get:(Oe,Ae)=>st.runOutsideAngular(()=>{var Ze;if(ve[Ae])return!(null===(Ze=Ve?.spy)||void 0===Ze)&&Ze.get&&Ve.spy.get(Ae,ve[Ae]),ve[Ae];if(ce.indexOf(Ae)>-1)return()=>{};const le=it.toPromise().then(pe=>{const Ee=pe&&pe[Ae];return"function"==typeof Ee?Ee.bind(pe):Ee&&Ee.then?Ee.then(te=>st.run(()=>te)):st.run(()=>Ee)});return new Proxy(()=>{},{get:(pe,Ee)=>le[Ee],apply:(pe,Ee,te)=>le.then(ie=>{var ye;const de=ie&&ie(...te);return!(null===(ye=Ve?.spy)||void 0===ye)&&ye.apply&&Ve.spy.apply(Ae,te,de),de})})})}),be=(ve,it)=>{it.forEach(st=>{Object.getOwnPropertyNames(st.prototype||st).forEach(Ve=>{Object.defineProperty(ve.prototype,Ve,Object.getOwnPropertyDescriptor(st.prototype||st,Ve))})})};class he{constructor(it){return it}}const _e=new h.OlP("angularfire2.app.options"),Ce=new h.OlP("angularfire2.app.name");function W(ve,it,st){const Oe="object"==typeof st&&st||{};Oe.name=Oe.name||"string"==typeof st&&st||"[DEFAULT]";const Ze=j.Z.apps.filter(le=>le&&le.name===Oe.name)[0]||it.runOutsideAngular(()=>j.Z.initializeApp(ve,Oe));try{JSON.stringify(ve)!==JSON.stringify(Ze.options)&&K("error",`${Ze.name} Firebase App already initialized with different options${mt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new he(Ze)}const K=(ve,...it)=>{(0,h.X6Q)()&&typeof console<"u"&&console[ve](...it)},ne={provide:he,useFactory:W,deps:[_e,h.R0b,[new h.FiY,Ce]]};let qe=(()=>{class ve{constructor(st){j.Z.registerVersion("angularfire",O.q4.full,"core"),j.Z.registerVersion("angularfire",O.q4.full,"app-compat"),j.Z.registerVersion("angular",h.q4F.full,st.toString())}static initializeApp(st,Ve){return{ngModule:ve,providers:[{provide:_e,useValue:st},{provide:Ce,useValue:Ve}]}}}return ve.\u0275fac=function(st){return new(st||ve)(h.LFG(h.Lbi))},ve.\u0275mod=h.oAB({type:ve}),ve.\u0275inj=h.cJS({providers:[ne]}),ve})();function Le(ve,it,st,Ve,Oe){const[,Ae,Ze]=globalThis.\u0275AngularfireInstanceCache.find(le=>le[0]===ve)||[];if(Ae)return function Se(ve,it){try{return ve.toString()===it.toString()}catch{return ve===it}}(Oe,Ze)||(Te("error",`${it} was already initialized on the ${st} Firebase App with different settings.${ct?" You may need to reload as Firebase is not HMR aware.":""}`),Te("warn",{is:Oe,was:Ze})),Ae;{const le=Ve();return globalThis.\u0275AngularfireInstanceCache.push([ve,le,Oe]),le}}const ct=!!mt.hot,Te=(ve,...it)=>{(0,h.X6Q)()&&typeof console<"u"&&console[ve](...it)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(mt,ke,U)=>{U.d(ke,{q4:()=>ri,iC:()=>Co,fc:()=>_d,HU:()=>ga,vb:()=>ic,JM:()=>tu});var h=U(4650),j=U(5867),O=U(5861),ce=U(9681),fe=U(2090),be=U(4859),he=U(1877),_e=U(8766);const Ce="@firebase/installations",W="0.5.12",ne=`w:${W}`,qe="FIS_v2",it=new fe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function st(T){return T instanceof fe.ZR&&T.code.includes("request-failed")}function Ve({projectId:T}){return`https://firebaseinstallations.googleapis.com/v1/projects/${T}/installations`}function Oe(T){return{token:T.token,requestStatus:2,expiresIn:ie(T.expiresIn),creationTime:Date.now()}}function Ae(T,S){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,O.Z)(function*(T,S){const H=(yield S.json()).error;return it.create("request-failed",{requestName:T,serverCode:H.code,serverMessage:H.message,serverStatus:H.status})})).apply(this,arguments)}function le({apiKey:T}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T})}function pe(T,{refreshToken:S}){const k=le(T);return k.append("Authorization",function ye(T){return`${qe} ${T}`}(S)),k}function Ee(T){return te.apply(this,arguments)}function te(){return(te=(0,O.Z)(function*(T){const S=yield T();return S.status>=500&&S.status<600?T():S})).apply(this,arguments)}function ie(T){return Number(T.replace("s","000"))}function de(T,S){return je.apply(this,arguments)}function je(){return(je=(0,O.Z)(function*({appConfig:T,heartbeatServiceProvider:S},{fid:k}){const H=Ve(T),re=le(T),ge=S.getImmediate({optional:!0});if(ge){const kt=yield ge.getHeartbeatsHeader();kt&&re.append("x-firebase-client",kt)}const Je={method:"POST",headers:re,body:JSON.stringify({fid:k,authVersion:qe,appId:T.appId,sdkVersion:ne})},Tt=yield Ee(()=>fetch(H,Je));if(Tt.ok){const kt=yield Tt.json();return{fid:kt.fid||k,registrationStatus:2,refreshToken:kt.refreshToken,authToken:Oe(kt.authToken)}}throw yield Ae("Create Installation",Tt)})).apply(this,arguments)}function $e(T){return new Promise(S=>{setTimeout(S,T)})}const tn=/^[cdef][\w-]{21}$/;function Qe(){try{const T=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(T),T[0]=112+T[0]%16;const k=function In(T){return function wt(T){return btoa(String.fromCharCode(...T)).replace(/\+/g,"-").replace(/\//g,"_")}(T).substr(0,22)}(T);return tn.test(k)?k:""}catch{return""}}function Bn(T){return`${T.appName}!${T.appId}`}const un=new Map;function nn(T,S){const k=Bn(T);Cr(k,S),function ro(T,S){const k=function Nn(){return!Ir&&"BroadcastChannel"in self&&(Ir=new BroadcastChannel("[Firebase] FID Change"),Ir.onmessage=T=>{Cr(T.data.key,T.data.fid)}),Ir}();k&&k.postMessage({key:T,fid:S}),function ls(){0===un.size&&Ir&&(Ir.close(),Ir=null)}()}(k,S)}function Cr(T,S){const k=un.get(T);if(k)for(const H of k)H(S)}let Ir=null;const Hn="firebase-installations-store";let Si=null;function qi(){return Si||(Si=(0,_e.X3)("firebase-installations-database",1,{upgrade:(T,S)=>{0===S&&T.createObjectStore(Hn)}})),Si}function ot(T,S){return gr.apply(this,arguments)}function gr(){return(gr=(0,O.Z)(function*(T,S){const k=Bn(T),re=(yield qi()).transaction(Hn,"readwrite"),ge=re.objectStore(Hn),Fe=yield ge.get(k);return yield ge.put(S,k),yield re.done,(!Fe||Fe.fid!==S.fid)&&nn(T,S.fid),S})).apply(this,arguments)}function jn(T){return yn.apply(this,arguments)}function yn(){return(yn=(0,O.Z)(function*(T){const S=Bn(T),H=(yield qi()).transaction(Hn,"readwrite");yield H.objectStore(Hn).delete(S),yield H.done})).apply(this,arguments)}function mr(T,S){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,O.Z)(function*(T,S){const k=Bn(T),re=(yield qi()).transaction(Hn,"readwrite"),ge=re.objectStore(Hn),Fe=yield ge.get(k),Je=S(Fe);return void 0===Je?yield ge.delete(k):yield ge.put(Je,k),yield re.done,Je&&(!Fe||Fe.fid!==Je.fid)&&nn(T,Je.fid),Je})).apply(this,arguments)}function An(T){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,O.Z)(function*(T){let S;const k=yield mr(T.appConfig,H=>{const re=Tn(H),ge=_t(T,re);return S=ge.registrationPromise,ge.installationEntry});return""===k.fid?{installationEntry:yield S}:{installationEntry:k,registrationPromise:S}})).apply(this,arguments)}function Tn(T){return xt(T||{fid:Qe(),registrationStatus:0})}function _t(T,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(it.create("app-offline"))};const k={fid:S.fid,registrationStatus:1,registrationTime:Date.now()},H=function yt(T,S){return Ft.apply(this,arguments)}(T,k);return{installationEntry:k,registrationPromise:H}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:$r(T)}:{installationEntry:S}}function Ft(){return(Ft=(0,O.Z)(function*(T,S){try{const k=yield de(T,S);return ot(T.appConfig,k)}catch(k){throw st(k)&&409===k.customData.serverCode?yield jn(T.appConfig):yield ot(T.appConfig,{fid:S.fid,registrationStatus:0}),k}})).apply(this,arguments)}function $r(T){return _r.apply(this,arguments)}function _r(){return(_r=(0,O.Z)(function*(T){let S=yield Tr(T.appConfig);for(;1===S.registrationStatus;)yield $e(100),S=yield Tr(T.appConfig);if(0===S.registrationStatus){const{installationEntry:k,registrationPromise:H}=yield An(T);return H||k}return S})).apply(this,arguments)}function Tr(T){return mr(T,S=>{if(!S)throw it.create("installation-not-found");return xt(S)})}function xt(T){return function Lr(T){return 1===T.registrationStatus&&T.registrationTime+1e4<Date.now()}(T)?{fid:T.fid,registrationStatus:0}:T}function Vt(T,S){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,O.Z)(function*({appConfig:T,heartbeatServiceProvider:S},k){const H=Yt(T,k),re=pe(T,k),ge=S.getImmediate({optional:!0});if(ge){const kt=yield ge.getHeartbeatsHeader();kt&&re.append("x-firebase-client",kt)}const Je={method:"POST",headers:re,body:JSON.stringify({installation:{sdkVersion:ne,appId:T.appId}})},Tt=yield Ee(()=>fetch(H,Je));if(Tt.ok)return Oe(yield Tt.json());throw yield Ae("Generate Auth Token",Tt)})).apply(this,arguments)}function Yt(T,{fid:S}){return`${Ve(T)}/${S}/authTokens:generate`}function ee(T){return z.apply(this,arguments)}function z(){return(z=(0,O.Z)(function*(T,S=!1){let k;const H=yield mr(T.appConfig,ge=>{if(!It(ge))throw it.create("not-registered");const Fe=ge.authToken;if(!S&&gn(Fe))return ge;if(1===Fe.requestStatus)return k=$(T,S),ge;{if(!navigator.onLine)throw it.create("app-offline");const Je=tr(ge);return k=xe(T,Je),Je}});return k?yield k:H.authToken})).apply(this,arguments)}function $(T,S){return Y.apply(this,arguments)}function Y(){return(Y=(0,O.Z)(function*(T,S){let k=yield Q(T.appConfig);for(;1===k.authToken.requestStatus;)yield $e(100),k=yield Q(T.appConfig);const H=k.authToken;return 0===H.requestStatus?ee(T,S):H})).apply(this,arguments)}function Q(T){return mr(T,S=>{if(!It(S))throw it.create("not-registered");return function se(T){return 1===T.requestStatus&&T.requestTime+1e4<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function xe(T,S){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,O.Z)(function*(T,S){try{const k=yield Vt(T,S),H=Object.assign(Object.assign({},S),{authToken:k});return yield ot(T.appConfig,H),k}catch(k){if(!st(k)||401!==k.customData.serverCode&&404!==k.customData.serverCode){const H=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield ot(T.appConfig,H)}else yield jn(T.appConfig);throw k}})).apply(this,arguments)}function It(T){return void 0!==T&&2===T.registrationStatus}function gn(T){return 2===T.requestStatus&&!function fn(T){const S=Date.now();return S<T.creationTime||T.creationTime+T.expiresIn<S+36e5}(T)}function tr(T){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},T),{authToken:S})}function q(){return(q=(0,O.Z)(function*(T){const S=T,{installationEntry:k,registrationPromise:H}=yield An(S);return H?H.catch(console.error):ee(S).catch(console.error),k.fid})).apply(this,arguments)}function Ye(){return(Ye=(0,O.Z)(function*(T,S=!1){const k=T;return yield Et(k),(yield ee(k,S)).token})).apply(this,arguments)}function Et(T){return At.apply(this,arguments)}function At(){return(At=(0,O.Z)(function*(T){const{registrationPromise:S}=yield An(T);S&&(yield S)})).apply(this,arguments)}function io(T){return it.create("missing-app-config-values",{valueName:T})}const so="installations",oo=T=>{const S=T.getProvider("app").getImmediate(),k=function Rn(T){if(!T||!T.options)throw io("App Configuration");if(!T.name)throw io("App Name");const S=["projectId","apiKey","appId"];for(const k of S)if(!T.options[k])throw io(k);return{appName:T.name,projectId:T.options.projectId,apiKey:T.options.apiKey,appId:T.options.appId}}(S);return{app:S,appConfig:k,heartbeatServiceProvider:(0,ce._getProvider)(S,"heartbeat"),_delete:()=>Promise.resolve()}},jo=T=>{const S=T.getProvider("app").getImmediate(),k=(0,ce._getProvider)(S,so).getImmediate();return{getId:()=>function G(T){return q.apply(this,arguments)}(k),getToken:re=>function Ie(T){return Ye.apply(this,arguments)}(k,re)}};(function Vl(){(0,ce._registerComponent)(new be.wA(so,oo,"PUBLIC")),(0,ce._registerComponent)(new be.wA("installations-internal",jo,"PRIVATE"))})(),(0,ce.registerVersion)(Ce,W),(0,ce.registerVersion)(Ce,W,"esm2017");const cs="@firebase/remote-config",Yn=new fe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Bu{constructor(S,k,H,re){this.client=S,this.storage=k,this.storageCache=H,this.logger=re}isCachedDataFresh(S,k){if(!k)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const H=Date.now()-k,re=H<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${H}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${re}.`),re}fetch(S){var k=this;return(0,O.Z)(function*(){const[H,re]=yield Promise.all([k.storage.getLastSuccessfulFetchTimestampMillis(),k.storage.getLastSuccessfulFetchResponse()]);if(re&&k.isCachedDataFresh(S.cacheMaxAgeMillis,H))return re;S.eTag=re&&re.eTag;const ge=yield k.client.fetch(S),Fe=[k.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ge.status&&Fe.push(k.storage.setLastSuccessfulFetchResponse(ge)),yield Promise.all(Fe),ge})()}}function Ga(T=navigator){return T.languages&&T.languages[0]||T.language}class fo{constructor(S,k,H,re,ge,Fe){this.firebaseInstallations=S,this.sdkVersion=k,this.namespace=H,this.projectId=re,this.apiKey=ge,this.appId=Fe}fetch(S){var k=this;return(0,O.Z)(function*(){var H,re,ge;const[Fe,Je]=yield Promise.all([k.firebaseInstallations.getId(),k.firebaseInstallations.getToken()]),kt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${k.projectId}/namespaces/${k.namespace}:fetch?key=${k.apiKey}`,$t={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},Dt={sdk_version:k.sdkVersion,app_instance_id:Fe,app_instance_id_token:Je,app_id:k.appId,language_code:Ga()},ar={method:"POST",headers:$t,body:JSON.stringify(Dt)},Mr=fetch(kt,ar),fl=new Promise((ml,ya)=>{S.signal.addEventListener(()=>{const oc=new Error("The operation was aborted.");oc.name="AbortError",ya(oc)})});let pl;try{yield Promise.race([Mr,fl]),pl=yield Mr}catch(ml){let ya="fetch-client-network";throw"AbortError"===(null===(H=ml)||void 0===H?void 0:H.name)&&(ya="fetch-timeout"),Yn.create(ya,{originalErrorMessage:null===(re=ml)||void 0===re?void 0:re.message})}let gl=pl.status;const _a=pl.headers.get("ETag")||void 0;let Gs,ru;if(200===pl.status){let ml;try{ml=yield pl.json()}catch(ya){throw Yn.create("fetch-client-parse",{originalErrorMessage:null===(ge=ya)||void 0===ge?void 0:ge.message})}Gs=ml.entries,ru=ml.state}if("INSTANCE_STATE_UNSPECIFIED"===ru?gl=500:"NO_CHANGE"===ru?gl=304:("NO_TEMPLATE"===ru||"EMPTY_CONFIG"===ru)&&(Gs={}),304!==gl&&200!==gl)throw Yn.create("fetch-status",{httpStatus:gl});return{status:gl,eTag:_a,config:Gs}})()}}class hs{constructor(S,k){this.client=S,this.storage=k}fetch(S){var k=this;return(0,O.Z)(function*(){const H=(yield k.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return k.attemptFetch(S,H)})()}attemptFetch(S,{throttleEndTimeMillis:k,backoffCount:H}){var re=this;return(0,O.Z)(function*(){yield function ci(T,S){return new Promise((k,H)=>{const re=Math.max(S-Date.now(),0),ge=setTimeout(k,re);T.addEventListener(()=>{clearTimeout(ge),H(Yn.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,k);try{const ge=yield re.client.fetch(S);return yield re.storage.deleteThrottleMetadata(),ge}catch(ge){if(!function Gp(T){if(!(T instanceof fe.ZR&&T.customData))return!1;const S=Number(T.customData.httpStatus);return 429===S||500===S||503===S||504===S}(ge))throw ge;const Fe={throttleEndTimeMillis:Date.now()+(0,fe.$s)(H),backoffCount:H+1};return yield re.storage.setThrottleMetadata(Fe),re.attemptFetch(S,Fe)}})()}}class qp{constructor(S,k,H,re,ge){this.app=S,this._client=k,this._storageCache=H,this._storage=re,this._logger=ge,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function za(T,S){var k;const H=T.target.error||void 0;return Yn.create(S,{originalErrorMessage:H&&(null===(k=H)||void 0===k?void 0:k.message)})}const $o="app_namespace_store";class qc{constructor(S,k,H,re=function Kp(){return new Promise((T,S)=>{var k;try{const H=indexedDB.open("firebase_remote_config",1);H.onerror=re=>{S(za(re,"storage-open"))},H.onsuccess=re=>{T(re.target.result)},H.onupgradeneeded=re=>{0===re.oldVersion&&re.target.result.createObjectStore($o,{keyPath:"compositeKey"})}}catch(H){S(Yn.create("storage-open",{originalErrorMessage:null===(k=H)||void 0===k?void 0:k.message}))}})}()){this.appId=S,this.appName=k,this.namespace=H,this.openDbPromise=re}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var k=this;return(0,O.Z)(function*(){const H=yield k.openDbPromise;return new Promise((re,ge)=>{var Fe;const Tt=H.transaction([$o],"readonly").objectStore($o),kt=k.createCompositeKey(S);try{const $t=Tt.get(kt);$t.onerror=Dt=>{ge(za(Dt,"storage-get"))},$t.onsuccess=Dt=>{const ar=Dt.target.result;re(ar?ar.value:void 0)}}catch($t){ge(Yn.create("storage-get",{originalErrorMessage:null===(Fe=$t)||void 0===Fe?void 0:Fe.message}))}})})()}set(S,k){var H=this;return(0,O.Z)(function*(){const re=yield H.openDbPromise;return new Promise((ge,Fe)=>{var Je;const kt=re.transaction([$o],"readwrite").objectStore($o),$t=H.createCompositeKey(S);try{const Dt=kt.put({compositeKey:$t,value:k});Dt.onerror=ar=>{Fe(za(ar,"storage-set"))},Dt.onsuccess=()=>{ge()}}catch(Dt){Fe(Yn.create("storage-set",{originalErrorMessage:null===(Je=Dt)||void 0===Je?void 0:Je.message}))}})})()}delete(S){var k=this;return(0,O.Z)(function*(){const H=yield k.openDbPromise;return new Promise((re,ge)=>{var Fe;const Tt=H.transaction([$o],"readwrite").objectStore($o),kt=k.createCompositeKey(S);try{const $t=Tt.delete(kt);$t.onerror=Dt=>{ge(za(Dt,"storage-delete"))},$t.onsuccess=()=>{re()}}catch($t){ge(Yn.create("storage-delete",{originalErrorMessage:null===(Fe=$t)||void 0===Fe?void 0:Fe.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class Go{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,O.Z)(function*(){const k=S.storage.getLastFetchStatus(),H=S.storage.getLastSuccessfulFetchTimestampMillis(),re=S.storage.getActiveConfig(),ge=yield k;ge&&(S.lastFetchStatus=ge);const Fe=yield H;Fe&&(S.lastSuccessfulFetchTimestampMillis=Fe);const Je=yield re;Je&&(S.activeConfig=Je)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function x_(){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,O.Z)(function*(){if(!(0,fe.hl)())return!1;try{return yield(0,fe.eu)()}catch{return!1}})).apply(this,arguments)}!function Wc(){(0,ce._registerComponent)(new be.wA("remote-config",function T(S,{instanceIdentifier:k}){const H=S.getProvider("app").getImmediate(),re=S.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Yn.create("registration-window");if(!(0,fe.hl)())throw Yn.create("indexed-db-unavailable");const{projectId:ge,apiKey:Fe,appId:Je}=H.options;if(!ge)throw Yn.create("registration-project-id");if(!Fe)throw Yn.create("registration-api-key");if(!Je)throw Yn.create("registration-app-id");const Tt=new qc(Je,H.name,k=k||"firebase"),kt=new Go(Tt),$t=new he.Yd(cs);$t.logLevel=he.in.ERROR;const Dt=new fo(re,ce.SDK_VERSION,k,ge,Fe,Je),ar=new hs(Dt,Tt),Mr=new Bu(ar,Tt,kt,$t),fl=new qp(H,Mr,kt,Tt,$t);return function $n(T){const S=(0,fe.m9)(T);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(fl),fl},"PUBLIC").setMultipleInstances(!0)),(0,ce.registerVersion)(cs,"0.3.11"),(0,ce.registerVersion)(cs,"0.3.11","esm2017")}();const Dr="/firebase-messaging-sw.js",qo="/firebase-cloud-messaging-push-scope",Ns="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",jl="google.c.a.c_id",Hu="google.c.a.c_l",Yc="google.c.a.ts",Wo="google.c.a.e";var di=(()=>{return(T=di||(di={})).PUSH_RECEIVED="push-received",T.NOTIFICATION_CLICKED="notification-clicked",di;var T})();function fs(T){const S=new Uint8Array(T);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ti(T){const k=(T+"=".repeat((4-T.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),H=atob(k),re=new Uint8Array(H.length);for(let ge=0;ge<H.length;++ge)re[ge]=H.charCodeAt(ge);return re}const po="fcm_token_details_db",Ko="fcm_token_object_Store";function Zp(T){return ju.apply(this,arguments)}function ju(){return ju=(0,O.Z)(function*(T){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ge=>ge.name).includes(po))return null;let S=null;return(yield(0,_e.X3)(po,5,{upgrade:(H=(0,O.Z)(function*(re,ge,Fe,Je){var Tt;if(ge<2||!re.objectStoreNames.contains(Ko))return;const kt=Je.objectStore(Ko),$t=yield kt.index("fcmSenderId").get(T);if(yield kt.clear(),$t)if(2===ge){const Dt=$t;if(!Dt.auth||!Dt.p256dh||!Dt.endpoint)return;S={token:Dt.fcmToken,createTime:null!==(Tt=Dt.createTime)&&void 0!==Tt?Tt:Date.now(),subscriptionOptions:{auth:Dt.auth,p256dh:Dt.p256dh,endpoint:Dt.endpoint,swScope:Dt.swScope,vapidKey:"string"==typeof Dt.vapidKey?Dt.vapidKey:fs(Dt.vapidKey)}}}else if(3===ge){const Dt=$t;S={token:Dt.fcmToken,createTime:Dt.createTime,subscriptionOptions:{auth:fs(Dt.auth),p256dh:fs(Dt.p256dh),endpoint:Dt.endpoint,swScope:Dt.swScope,vapidKey:fs(Dt.vapidKey)}}}else if(4===ge){const Dt=$t;S={token:Dt.fcmToken,createTime:Dt.createTime,subscriptionOptions:{auth:fs(Dt.auth),p256dh:fs(Dt.p256dh),endpoint:Dt.endpoint,swScope:Dt.swScope,vapidKey:fs(Dt.vapidKey)}}}}),function(ge,Fe,Je,Tt){return H.apply(this,arguments)})})).close(),yield(0,_e.Lj)(po),yield(0,_e.Lj)("fcm_vapid_details_db"),yield(0,_e.Lj)("undefined"),Ln(S)?S:null;var H}),ju.apply(this,arguments)}function Ln(T){if(!T||!T.subscriptionOptions)return!1;const{subscriptionOptions:S}=T;return"number"==typeof T.createTime&&T.createTime>0&&"string"==typeof T.token&&T.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}const Ai="firebase-messaging-store";let Sr=null;function $l(){return Sr||(Sr=(0,_e.X3)("firebase-messaging-database",1,{upgrade:(T,S)=>{0===S&&T.createObjectStore(Ai)}})),Sr}function go(T){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,O.Z)(function*(T){const S=fi(T),H=yield(yield $l()).transaction(Ai).objectStore(Ai).get(S);if(H)return H;{const re=yield Zp(T.appConfig.senderId);if(re)return yield cn(T,re),re}})).apply(this,arguments)}function cn(T,S){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,O.Z)(function*(T,S){const k=fi(T),re=(yield $l()).transaction(Ai,"readwrite");return yield re.objectStore(Ai).put(S,k),yield re.done,S})).apply(this,arguments)}function Os(T){return $u.apply(this,arguments)}function $u(){return($u=(0,O.Z)(function*(T){const S=fi(T),H=(yield $l()).transaction(Ai,"readwrite");yield H.objectStore(Ai).delete(S),yield H.done})).apply(this,arguments)}function fi({appConfig:T}){return T.appId}const Gn=new fe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Pt(T,S){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,O.Z)(function*(T,S){var k;const H=yield Ya(T),re=Pe(S),ge={method:"POST",headers:H,body:JSON.stringify(re)};let Fe;try{Fe=yield(yield fetch(mo(T.appConfig),ge)).json()}catch(Je){throw Gn.create("token-subscribe-failed",{errorInfo:null===(k=Je)||void 0===k?void 0:k.toString()})}if(Fe.error)throw Gn.create("token-subscribe-failed",{errorInfo:Fe.error.message});if(!Fe.token)throw Gn.create("token-subscribe-no-token");return Fe.token})).apply(this,arguments)}function Yp(T,S){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,O.Z)(function*(T,S){var k;const H=yield Ya(T),re=Pe(S.subscriptionOptions),ge={method:"PATCH",headers:H,body:JSON.stringify(re)};let Fe;try{Fe=yield(yield fetch(`${mo(T.appConfig)}/${S.token}`,ge)).json()}catch(Je){throw Gn.create("token-update-failed",{errorInfo:null===(k=Je)||void 0===k?void 0:k.toString()})}if(Fe.error)throw Gn.create("token-update-failed",{errorInfo:Fe.error.message});if(!Fe.token)throw Gn.create("token-update-no-token");return Fe.token})).apply(this,arguments)}function Jc(T,S){return Za.apply(this,arguments)}function Za(){return(Za=(0,O.Z)(function*(T,S){var k;const re={method:"DELETE",headers:yield Ya(T)};try{const Fe=yield(yield fetch(`${mo(T.appConfig)}/${S}`,re)).json();if(Fe.error)throw Gn.create("token-unsubscribe-failed",{errorInfo:Fe.error.message})}catch(ge){throw Gn.create("token-unsubscribe-failed",{errorInfo:null===(k=ge)||void 0===k?void 0:k.toString()})}})).apply(this,arguments)}function mo({projectId:T}){return`https://fcmregistrations.googleapis.com/v1/projects/${T}/registrations`}function Ya(T){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,O.Z)(function*({appConfig:T,installations:S}){const k=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T.apiKey,"x-goog-firebase-installations-auth":`FIS ${k}`})})).apply(this,arguments)}function Pe({p256dh:T,auth:S,endpoint:k,vapidKey:H}){const re={web:{endpoint:k,auth:S,p256dh:T}};return H!==Ns&&(re.web.applicationPubKey=H),re}const Qt=6048e5;function Fh(T){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,O.Z)(function*(T){const S=yield Lh(T.swRegistration,T.vapidKey),k={vapidKey:T.vapidKey,swScope:T.swRegistration.scope,endpoint:S.endpoint,auth:fs(S.getKey("auth")),p256dh:fs(S.getKey("p256dh"))},H=yield go(T.firebaseDependencies);if(H){if(Qp(H.subscriptionOptions,k))return Date.now()>=H.createTime+Qt?zl(T,{token:H.token,createTime:Date.now(),subscriptionOptions:k}):H.token;try{yield Jc(T.firebaseDependencies,H.token)}catch(re){console.warn(re)}return ql(T.firebaseDependencies,k)}return ql(T.firebaseDependencies,k)})).apply(this,arguments)}function rr(T){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,O.Z)(function*(T){const S=yield go(T.firebaseDependencies);S&&(yield Jc(T.firebaseDependencies,S.token),yield Os(T.firebaseDependencies));const k=yield T.swRegistration.pushManager.getSubscription();return!k||k.unsubscribe()})).apply(this,arguments)}function zl(T,S){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,O.Z)(function*(T,S){try{const k=yield Yp(T.firebaseDependencies,S),H=Object.assign(Object.assign({},S),{token:k,createTime:Date.now()});return yield cn(T.firebaseDependencies,H),k}catch(k){throw yield rr(T),k}})).apply(this,arguments)}function ql(T,S){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,O.Z)(function*(T,S){const H={token:yield Pt(T,S),createTime:Date.now(),subscriptionOptions:S};return yield cn(T,H),H.token})).apply(this,arguments)}function Lh(T,S){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,O.Z)(function*(T,S){return(yield T.pushManager.getSubscription())||T.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ti(S)})})).apply(this,arguments)}function Qp(T,S){return S.vapidKey===T.vapidKey&&S.endpoint===T.endpoint&&S.auth===T.auth&&S.p256dh===T.p256dh}function ps(T){const S={from:T.from,collapseKey:T.collapse_key,messageId:T.fcmMessageId};return function ir(T,S){if(!S.notification)return;T.notification={};const k=S.notification.title;k&&(T.notification.title=k);const H=S.notification.body;H&&(T.notification.body=H);const re=S.notification.image;re&&(T.notification.image=re)}(S,T),function Zi(T,S){!S.data||(T.data=S.data)}(S,T),function Ja(T,S){var k,H,re,ge,Fe;if(!(S.fcmOptions||null!==(k=S.notification)&&void 0!==k&&k.click_action))return;T.fcmOptions={};const Je=null!==(re=null===(H=S.fcmOptions)||void 0===H?void 0:H.link)&&void 0!==re?re:null===(ge=S.notification)||void 0===ge?void 0:ge.click_action;Je&&(T.fcmOptions.link=Je);const Tt=null===(Fe=S.fcmOptions)||void 0===Fe?void 0:Fe.analytics_label;Tt&&(T.fcmOptions.analyticsLabel=Tt)}(S,T),S}function Xa(T){return"object"==typeof T&&!!T&&jl in T}function gs(T,S){const k=[];for(let H=0;H<T.length;H++)k.push(T.charAt(H)),H<S.length&&k.push(S.charAt(H));return k.join("")}function Gu(T){return Gn.create("missing-app-config-values",{valueName:T})}gs("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),gs("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ed{constructor(S,k,H){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const re=function Xc(T){if(!T||!T.options)throw Gu("App Configuration Object");if(!T.name)throw Gu("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:k}=T;for(const H of S)if(!k[H])throw Gu(H);return{appName:T.name,projectId:k.projectId,apiKey:k.apiKey,appId:k.appId,senderId:k.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:re,installations:k,analyticsProvider:H}}_delete(){return Promise.resolve()}}function Vh(T){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,O.Z)(function*(T){var S;try{T.swRegistration=yield navigator.serviceWorker.register(Dr,{scope:qo}),T.swRegistration.update().catch(()=>{})}catch(k){throw Gn.create("failed-service-worker-registration",{browserErrorMessage:null===(S=k)||void 0===S?void 0:S.message})}})).apply(this,arguments)}function zu(T,S){return el.apply(this,arguments)}function el(){return(el=(0,O.Z)(function*(T,S){if(!S&&!T.swRegistration&&(yield Vh(T)),S||!T.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw Gn.create("invalid-sw-registration");T.swRegistration=S}})).apply(this,arguments)}function qu(T,S){return tl.apply(this,arguments)}function tl(){return(tl=(0,O.Z)(function*(T,S){S?T.vapidKey=S:T.vapidKey||(T.vapidKey=Ns)})).apply(this,arguments)}function ea(){return(ea=(0,O.Z)(function*(T,S){if(!navigator)throw Gn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Gn.create("permission-blocked");return yield qu(T,S?.vapidKey),yield zu(T,S?.serviceWorkerRegistration),Fh(T)})).apply(this,arguments)}function Uh(T,S,k){return nl.apply(this,arguments)}function nl(){return(nl=(0,O.Z)(function*(T,S,k){const H=Bh(S);(yield T.firebaseDependencies.analyticsProvider.get()).logEvent(H,{message_id:k[jl],message_name:k[Hu],message_time:k[Yc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Bh(T){switch(T){case di.NOTIFICATION_CLICKED:return"notification_open";case di.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ps(){return(Ps=(0,O.Z)(function*(T,S){const k=S.data;if(!k.isFirebaseMessaging)return;T.onMessageHandler&&k.messageType===di.PUSH_RECEIVED&&("function"==typeof T.onMessageHandler?T.onMessageHandler(ps(k)):T.onMessageHandler.next(ps(k)));const H=k.data;Xa(H)&&"1"===H[Wo]&&(yield Uh(T,k.messageType,H))})).apply(this,arguments)}const Fs="@firebase/messaging",Pn=T=>{const S=new ed(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),T.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",k=>function nd(T,S){return Ps.apply(this,arguments)}(S,k)),S},ms=T=>{const S=T.getProvider("messaging").getImmediate();return{getToken:H=>function td(T,S){return ea.apply(this,arguments)}(S,H)}};function id(){return Wu.apply(this,arguments)}function Wu(){return(Wu=(0,O.Z)(function*(){try{yield(0,fe.eu)()}catch{return!1}return typeof window<"u"&&(0,fe.hl)()&&(0,fe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Fn(){(0,ce._registerComponent)(new be.wA("messaging",Pn,"PUBLIC")),(0,ce._registerComponent)(new be.wA("messaging-internal",ms,"PRIVATE")),(0,ce.registerVersion)(Fs,"0.9.16"),(0,ce.registerVersion)(Fs,"0.9.16","esm2017")}();const ra="analytics",ad="firebase_id",Qu="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ld="https://www.googletagmanager.com/gtag/js",zn=new he.Yd("@firebase/analytics");function Wl(T){return Promise.all(T.map(S=>S.catch(k=>k)))}function Kl(T,S){const k=document.createElement("script");k.src=`${ld}?l=${T}&id=${S}`,k.async=!0,document.head.appendChild(k)}function jh(T,S,k,H,re,ge){return rl.apply(this,arguments)}function rl(){return(rl=(0,O.Z)(function*(T,S,k,H,re,ge){const Fe=H[re];try{if(Fe)yield S[Fe];else{const Tt=(yield Wl(k)).find(kt=>kt.measurementId===re);Tt&&(yield S[Tt.appId])}}catch(Je){zn.error(Je)}T("config",re,ge)})).apply(this,arguments)}function _s(T,S,k,H,re){return il.apply(this,arguments)}function il(){return(il=(0,O.Z)(function*(T,S,k,H,re){try{let ge=[];if(re&&re.send_to){let Fe=re.send_to;Array.isArray(Fe)||(Fe=[Fe]);const Je=yield Wl(k);for(const Tt of Fe){const kt=Je.find(Dt=>Dt.measurementId===Tt),$t=kt&&S[kt.appId];if(!$t){ge=[];break}ge.push($t)}}0===ge.length&&(ge=Object.values(S)),yield Promise.all(ge),T("event",H,re||{})}catch(ge){zn.error(ge)}})).apply(this,arguments)}function ud(){const T=window.document.getElementsByTagName("script");for(const S of Object.values(T))if(S.src&&S.src.includes(ld))return S;return null}const sr=new fe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ol=new class Xu{constructor(S={},k=1e3){this.throttleMetadata=S,this.intervalMillis=k}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,k){this.throttleMetadata[S]=k}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function ia(T){return new Headers({Accept:"application/json","x-goog-api-key":T})}function zh(T){return qn.apply(this,arguments)}function qn(){return(qn=(0,O.Z)(function*(T){var S;const{appId:k,apiKey:H}=T,re={method:"GET",headers:ia(H)},ge=Qu.replace("{app-id}",k),Fe=yield fetch(ge,re);if(200!==Fe.status&&304!==Fe.status){let Je="";try{const Tt=yield Fe.json();null!==(S=Tt.error)&&void 0!==S&&S.message&&(Je=Tt.error.message)}catch{}throw sr.create("config-fetch-failed",{httpStatus:Fe.status,responseMessage:Je})}return Fe.json()})).apply(this,arguments)}function cd(T){return ni.apply(this,arguments)}function ni(){return(ni=(0,O.Z)(function*(T,S=ol,k){const{appId:H,apiKey:re,measurementId:ge}=T.options;if(!H)throw sr.create("no-app-id");if(!re){if(ge)return{measurementId:ge,appId:H};throw sr.create("no-api-key")}const Fe=S.getThrottleMetadata(H)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Je=new al;return setTimeout((0,O.Z)(function*(){Je.abort()}),void 0!==k?k:6e4),dd({appId:H,apiKey:re,measurementId:ge},Fe,Je,S)})).apply(this,arguments)}function dd(T,S,k){return ys.apply(this,arguments)}function ys(){return(ys=(0,O.Z)(function*(T,{throttleEndTimeMillis:S,backoffCount:k},H,re=ol){var ge,Fe;const{appId:Je,measurementId:Tt}=T;try{yield ec(H,S)}catch(kt){if(Tt)return zn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Tt} provided in the "measurementId" field in the local Firebase config. [${null===(ge=kt)||void 0===ge?void 0:ge.message}]`),{appId:Je,measurementId:Tt};throw kt}try{const kt=yield zh(T);return re.deleteThrottleMetadata(Je),kt}catch(kt){const $t=kt;if(!Yl($t)){if(re.deleteThrottleMetadata(Je),Tt)return zn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Tt} provided in the "measurementId" field in the local Firebase config. [${$t?.message}]`),{appId:Je,measurementId:Tt};throw kt}const Dt=503===Number(null===(Fe=$t?.customData)||void 0===Fe?void 0:Fe.httpStatus)?(0,fe.$s)(k,re.intervalMillis,30):(0,fe.$s)(k,re.intervalMillis),ar={throttleEndTimeMillis:Date.now()+Dt,backoffCount:k+1};return re.setThrottleMetadata(Je,ar),zn.debug(`Calling attemptFetch again in ${Dt} millis`),dd(T,ar,H,re)}})).apply(this,arguments)}function ec(T,S){return new Promise((k,H)=>{const re=Math.max(S-Date.now(),0),ge=setTimeout(k,re);T.addEventListener(()=>{clearTimeout(ge),H(sr.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}function Yl(T){if(!(T instanceof fe.ZR&&T.customData))return!1;const S=Number(T.customData.httpStatus);return 429===S||500===S||503===S||504===S}class al{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}let _o,Jl;function sa(){return(sa=(0,O.Z)(function*(T,S,k,H,re){if(re&&re.global)T("event",k,H);else{const ge=yield S;T("event",k,Object.assign(Object.assign({},H),{send_to:ge}))}})).apply(this,arguments)}function la(T){Jl=T}function tc(T){_o=T}function Vs(){return ua.apply(this,arguments)}function ua(){return(ua=(0,O.Z)(function*(){var T;if(!(0,fe.hl)())return zn.warn(sr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,fe.eu)()}catch(S){return zn.warn(sr.create("indexeddb-unavailable",{errorInfo:null===(T=S)||void 0===T?void 0:T.toString()}).message),!1}return!0})).apply(this,arguments)}function ca(){return(ca=(0,O.Z)(function*(T,S,k,H,re,ge,Fe){var Je;const Tt=cd(T);Tt.then(Mr=>{k[Mr.measurementId]=Mr.appId,T.options.measurementId&&Mr.measurementId!==T.options.measurementId&&zn.warn(`The measurement ID in the local Firebase config (${T.options.measurementId}) does not match the measurement ID fetched from the server (${Mr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Mr=>zn.error(Mr)),S.push(Tt);const kt=Vs().then(Mr=>{if(Mr)return H.getId()}),[$t,Dt]=yield Promise.all([Tt,kt]);ud()||Kl(ge,$t.measurementId),Jl&&(re("consent","default",Jl),la(void 0)),re("js",new Date);const ar=null!==(Je=Fe?.config)&&void 0!==Je?Je:{};return ar.origin="firebase",ar.update=!0,null!=Dt&&(ar[ad]=Dt),re("config",$t.measurementId,ar),_o&&(re("set",_o),tc(void 0)),$t.measurementId})).apply(this,arguments)}class Xl{constructor(S){this.app=S}_delete(){return delete Vr[this.app.options.appId],Promise.resolve()}}let Vr={},da=[];const vo={};let fa,Qi,ha="dataLayer",fd=!1;function Kh(T,S,k){!function Jp(){const T=[];if((0,fe.ru)()&&T.push("This is a browser extension environment."),(0,fe.zI)()||T.push("Cookies are not available."),T.length>0){const S=T.map((H,re)=>`(${re+1}) ${H}`).join(" "),k=sr.create("invalid-analytics-context",{errorInfo:S});zn.warn(k.message)}}();const H=T.options.appId;if(!H)throw sr.create("no-app-id");if(!T.options.apiKey){if(!T.options.measurementId)throw sr.create("no-api-key");zn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${T.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Vr[H])throw sr.create("already-exists",{id:H});if(!fd){!function Zl(T){let S=[];Array.isArray(window[T])?S=window[T]:window[T]=S}(ha);const{wrappedGtag:ge,gtagCore:Fe}=function sl(T,S,k,H,re){let ge=function(...Fe){window[H].push(arguments)};return window[re]&&"function"==typeof window[re]&&(ge=window[re]),window[re]=function Ju(T,S,k,H){function ge(){return(ge=(0,O.Z)(function*(Fe,Je,Tt){try{"event"===Fe?yield _s(T,S,k,Je,Tt):"config"===Fe?yield jh(T,S,k,H,Je,Tt):"consent"===Fe?T("consent","update",Tt):T("set",Je)}catch(kt){zn.error(kt)}})).apply(this,arguments)}return function re(Fe,Je,Tt){return ge.apply(this,arguments)}}(ge,T,S,k),{gtagCore:ge,wrappedGtag:window[re]}}(Vr,da,vo,ha,"gtag");Qi=ge,fa=Fe,fd=!0}return Vr[H]=function Wh(T,S,k,H,re,ge,Fe){return ca.apply(this,arguments)}(T,da,vo,S,fa,ha,k),new Xl(T)}function k_(){return Zh.apply(this,arguments)}function Zh(){return(Zh=(0,O.Z)(function*(){if((0,fe.ru)()||!(0,fe.zI)()||!(0,fe.hl)())return!1;try{return yield(0,fe.eu)()}catch{return!1}})).apply(this,arguments)}const pd="@firebase/analytics";!function Ar(){(0,ce._registerComponent)(new be.wA(ra,(S,{options:k})=>Kh(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),k),"PUBLIC")),(0,ce._registerComponent)(new be.wA("analytics-internal",function T(S){try{const k=S.getProvider(ra).getImmediate();return{logEvent:(H,re,ge)=>function bo(T,S,k,H){T=(0,fe.m9)(T),function ll(T,S,k,H,re){return sa.apply(this,arguments)}(Qi,Vr[T.app.options.appId],S,k,H).catch(re=>zn.error(re))}(k,H,re,ge)}}catch(k){throw sr.create("interop-component-reg-failed",{reason:k})}},"PRIVATE")),(0,ce.registerVersion)(pd,"0.8.0"),(0,ce.registerVersion)(pd,"0.8.0","esm2017")}();var Ji=U(4408),Eo=U(7565);const cl=new class Xi extends Eo.v{}(class Bs extends Ji.o{constructor(S,k){super(S,k),this.scheduler=S,this.work=k}schedule(S,k=0){return k>0?super.schedule(S,k):(this.delay=k,this.state=S,this.scheduler.flush(this),this)}execute(S,k){return k>0||this.closed?super.execute(S,k):this._execute(S,k)}requestAsyncId(S,k,H=0){return null!=H&&H>0||null==H&&this.delay>0?super.requestAsyncId(S,k,H):S.flush(this)}});var eg=U(4986),dl=U(8505),hl=U(5363),gd=U(9468);const ri=new h.GfV("7.4.1"),eu="__angularfire_symbol__analyticsIsSupportedValue",zr="__angularfire_symbol__analyticsIsSupported",rc="__angularfire_symbol__remoteConfigIsSupportedValue",Qn="__angularfire_symbol__remoteConfigIsSupported",qr="__angularfire_symbol__messagingIsSupportedValue",xi="__angularfire_symbol__messagingIsSupported";function tu(T,S,k){if(S){if(1===S.length)return S[0];const ge=S.filter(Fe=>Fe.app===k);if(1===ge.length)return ge[0]}return k.container.getProvider(T).getImmediate({optional:!0})}globalThis[zr]||(globalThis[zr]=k_().then(T=>globalThis[eu]=T).catch(()=>globalThis[eu]=!1)),globalThis[xi]||(globalThis[xi]=id().then(T=>globalThis[qr]=T).catch(()=>globalThis[qr]=!1)),globalThis[Qn]||(globalThis[Qn]=x_().then(T=>globalThis[rc]=T).catch(()=>globalThis[rc]=!1));const ic=(T,S)=>{const k=S?[S]:(0,j.C6)(),H=[];return k.forEach(re=>{re.container.getProvider(T).instances.forEach(Fe=>{H.includes(Fe)||H.push(Fe)})}),H};function js(){}class pa{constructor(S,k=cl){this.zone=S,this.delegate=k}now(){return this.delegate.now()}schedule(S,k,H){const re=this.zone;return this.delegate.schedule(function(Fe){re.runGuarded(()=>{S.apply(this,[Fe])})},k,H)}}class sc{constructor(S){this.zone=S,this.task=null}call(S,k){const H=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",js,{},js,js)),k.pipe((0,dl.b)({next:H,complete:H,error:H})).subscribe(S).add(H)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ga=(()=>{class T{constructor(k){this.ngZone=k,this.outsideAngular=k.runOutsideAngular(()=>new pa(Zone.current)),this.insideAngular=k.run(()=>new pa(Zone.current,eg.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return T.\u0275fac=function(k){return new(k||T)(h.LFG(h.R0b))},T.\u0275prov=h.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function $s(){const T=globalThis.\u0275AngularFireScheduler;if(!T)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return T}function _d(T){return T.pipe((0,hl.Q)($s().outsideAngular))}function Co(T){return $s(),function tg(T){return function(k){return(k=k.lift(new sc(T.ngZone))).pipe((0,gd.R)(T.outsideAngular),(0,hl.Q)(T.insideAngular))}}($s())(T)}},8554:(mt,ke,U)=>{U.d(ke,{$:()=>mo,A:()=>K,B:()=>Le,G:()=>jo,H:()=>Xr,J:()=>hs,L:()=>gn,M:()=>Hl,N:()=>Zc,P:()=>eg,Q:()=>jl,R:()=>Xp,T:()=>Hu,U:()=>Ns,V:()=>di,W:()=>fs,X:()=>Zp,Y:()=>qa,Z:()=>Pt,_:()=>Yp,a:()=>Ls,a0:()=>Fh,a1:()=>rr,a2:()=>zl,a3:()=>ql,a4:()=>Lh,a5:()=>Qp,a6:()=>ir,a7:()=>Zi,a8:()=>Xa,a9:()=>gs,aA:()=>Mr,aB:()=>Tt,aC:()=>_d,aD:()=>ma,aE:()=>Ct,aI:()=>ia,aL:()=>Wo,aa:()=>Vh,ab:()=>zu,ac:()=>qu,af:()=>Uh,ag:()=>Bh,ah:()=>nd,ak:()=>Ai,al:()=>Ku,an:()=>ld,ao:()=>rl,ap:()=>Xt,aq:()=>Ee,ar:()=>lt,as:()=>Et,at:()=>st,au:()=>vd,av:()=>_a,aw:()=>Ve,ax:()=>le,ay:()=>ie,az:()=>fn,b:()=>sr,c:()=>qr,d:()=>O_,e:()=>pn,f:()=>tg,g:()=>H,h:()=>T,i:()=>ua,j:()=>Fe,k:()=>H_,l:()=>wo,m:()=>va,o:()=>_e,r:()=>Ji,s:()=>gi,u:()=>cl});var h=U(5861),j=U(2090),O=U(9681),ce=U(655),fe=U(1877),be=U(4859);const _e={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},K={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Le=function ne(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Se=function qe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ct=new j.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ve=new fe.Yd("@firebase/auth");function it(b,...m){ve.logLevel<=fe.in.ERROR&&ve.error(`Auth (${O.SDK_VERSION}): ${b}`,...m)}function st(b,...m){throw Ze(b,...m)}function Ve(b,...m){return Ze(b,...m)}function Oe(b,m,y){const C=Object.assign(Object.assign({},Se()),{[m]:y});return new j.LL("auth","Firebase",C).create(m,{appName:b.name})}function Ae(b,m,y){if(!(m instanceof y))throw y.name!==m.constructor.name&&st(b,"argument-error"),Oe(b,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ze(b,...m){if("string"!=typeof b){const y=m[0],C=[...m.slice(1)];return C[0]&&(C[0].appName=b.name),b._errorFactory.create(y,...C)}return ct.create(b,...m)}function le(b,m,...y){if(!b)throw Ze(m,...y)}function pe(b){const m="INTERNAL ASSERTION FAILED: "+b;throw it(m),new Error(m)}function Ee(b,m){b||pe(m)}const te=new Map;function ie(b){Ee(b instanceof Function,"Expected a class definition");let m=te.get(b);return m?(Ee(m instanceof b,"Instance stored in cache mismatched with class"),m):(m=new b,te.set(b,m),m)}function je(){var b;return typeof self<"u"&&(null===(b=self.location)||void 0===b?void 0:b.href)||""}function $e(){return"http:"===wt()||"https:"===wt()}function wt(){var b;return typeof self<"u"&&(null===(b=self.location)||void 0===b?void 0:b.protocol)||null}class Qe{constructor(m,y){this.shortDelay=m,this.longDelay=y,Ee(y>m,"Short delay should be less than long delay!"),this.isMobile=(0,j.uI)()||(0,j.b$)()}get(){return function tn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&($e()||(0,j.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function In(b,m){Ee(b.emulator,"Emulator should always be set here");const{url:y}=b.emulator;return m?`${y}${m.startsWith("/")?m.slice(1):m}`:y}class Bn{static initialize(m,y,C){this.fetchImpl=m,y&&(this.headersImpl=y),C&&(this.responseImpl=C)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void pe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void pe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void pe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const un={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},nn=new Qe(3e4,6e4);function Kt(b,m){return b.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:b.tenantId}):m}function jt(b,m,y,C){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,h.Z)(function*(b,m,y,C,R={}){return ro(b,R,(0,h.Z)(function*(){let V={},oe={};C&&("GET"===m?oe=C:V={body:JSON.stringify(C)});const Re=(0,j.xO)(Object.assign({key:b.config.apiKey},oe)).slice(1),tt=yield b._getAdditionalHeaders();return tt["Content-Type"]="application/json",b.languageCode&&(tt["X-Firebase-Locale"]=b.languageCode),Bn.fetch()(zi(b,b.config.apiHost,y,Re),Object.assign({method:m,headers:tt,referrerPolicy:"no-referrer"},V))}))})).apply(this,arguments)}function ro(b,m,y){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,h.Z)(function*(b,m,y){b._canInitEmulator=!1;const C=Object.assign(Object.assign({},un),m);try{const R=new Qr(b),V=yield Promise.race([y(),R.promise]);R.clearNetworkTimeout();const oe=yield V.json();if("needConfirmation"in oe)throw Hn(b,"account-exists-with-different-credential",oe);if(V.ok&&!("errorMessage"in oe))return oe;{const Re=V.ok?oe.errorMessage:oe.error.message,[tt,vt]=Re.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===tt)throw Hn(b,"credential-already-in-use",oe);if("EMAIL_EXISTS"===tt)throw Hn(b,"email-already-in-use",oe);if("USER_DISABLED"===tt)throw Hn(b,"user-disabled",oe);const Zt=C[tt]||tt.toLowerCase().replace(/[_\s]+/g,"-");if(vt)throw Oe(b,Zt,vt);st(b,Zt)}}catch(R){if(R instanceof j.ZR)throw R;st(b,"network-request-failed")}})).apply(this,arguments)}function Nn(b,m,y,C){return ls.apply(this,arguments)}function ls(){return(ls=(0,h.Z)(function*(b,m,y,C,R={}){const V=yield jt(b,m,y,C,R);return"mfaPendingCredential"in V&&st(b,"multi-factor-auth-required",{_serverResponse:V}),V})).apply(this,arguments)}function zi(b,m,y,C){const R=`${m}${y}?${C}`;return b.config.emulator?In(b.config,R):`${b.config.apiScheme}://${R}`}class Qr{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((y,C)=>{this.timer=setTimeout(()=>C(Ve(this.auth,"network-request-failed")),nn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Hn(b,m,y){const C={appName:b.name};y.email&&(C.email=y.email),y.phoneNumber&&(C.phoneNumber=y.phoneNumber);const R=Ve(b,m,C);return R.customData._tokenResponse=y,R}function qi(){return(qi=(0,h.Z)(function*(b,m){return jt(b,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function ot(b,m){return gr.apply(this,arguments)}function gr(){return(gr=(0,h.Z)(function*(b,m){return jt(b,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function jn(b,m){return yn.apply(this,arguments)}function yn(){return(yn=(0,h.Z)(function*(b,m){return jt(b,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function mr(b){if(b)try{const m=new Date(Number(b));if(!isNaN(m.getTime()))return m.toUTCString()}catch{}}function Mn(){return(Mn=(0,h.Z)(function*(b,m=!1){const y=(0,j.m9)(b),C=yield y.getIdToken(m),R=_t(C);le(R&&R.exp&&R.auth_time&&R.iat,y.auth,"internal-error");const V="object"==typeof R.firebase?R.firebase:void 0,oe=V?.sign_in_provider;return{claims:R,token:C,authTime:mr(Tn(R.auth_time)),issuedAtTime:mr(Tn(R.iat)),expirationTime:mr(Tn(R.exp)),signInProvider:oe||null,signInSecondFactor:V?.sign_in_second_factor||null}})).apply(this,arguments)}function Tn(b){return 1e3*Number(b)}function _t(b){var m;const[y,C,R]=b.split(".");if(void 0===y||void 0===C||void 0===R)return it("JWT malformed, contained fewer than 3 sections"),null;try{const V=(0,j.tV)(C);return V?JSON.parse(V):(it("Failed to decode base64 JWT payload"),null)}catch(V){return it("Caught error parsing JWT payload as JSON",null===(m=V)||void 0===m?void 0:m.toString()),null}}function Ft(b,m){return $r.apply(this,arguments)}function $r(){return($r=(0,h.Z)(function*(b,m,y=!1){if(y)return m;try{return yield m}catch(C){throw C instanceof j.ZR&&_r(C)&&b.auth.currentUser===b&&(yield b.auth.signOut()),C}})).apply(this,arguments)}function _r({code:b}){return"auth/user-disabled"===b||"auth/user-token-expired"===b}class Tr{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var y;if(m){const C=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),C}{this.errorBackoff=3e4;const R=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,R)}}schedule(m=!1){var y=this;if(!this.isRunning)return;const C=this.getInterval(m);this.timerId=setTimeout((0,h.Z)(function*(){yield y.iteration()}),C)}iteration(){var m=this;return(0,h.Z)(function*(){var y;try{yield m.user.getIdToken(!0)}catch(C){return void("auth/network-request-failed"===(null===(y=C)||void 0===y?void 0:y.code)&&m.schedule(!0))}m.schedule()})()}}class xt{constructor(m,y){this.createdAt=m,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=mr(this.lastLoginAt),this.creationTime=mr(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Lr(b){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,h.Z)(function*(b){var m;const y=b.auth,C=yield b.getIdToken(),R=yield Ft(b,jn(y,{idToken:C}));le(R?.users.length,y,"internal-error");const V=R.users[0];b._notifyReloadListener(V);const oe=null!==(m=V.providerUserInfo)&&void 0!==m&&m.length?z(V.providerUserInfo):[],Re=ee(b.providerData,oe),Zt=!!b.isAnonymous&&!(b.email&&V.passwordHash||Re?.length),Vn={uid:V.localId,displayName:V.displayName||null,photoURL:V.photoUrl||null,email:V.email||null,emailVerified:V.emailVerified||!1,phoneNumber:V.phoneNumber||null,tenantId:V.tenantId||null,providerData:Re,metadata:new xt(V.createdAt,V.lastLoginAt),isAnonymous:Zt};Object.assign(b,Vn)})).apply(this,arguments)}function Yt(){return(Yt=(0,h.Z)(function*(b){const m=(0,j.m9)(b);yield Lr(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function ee(b,m){return[...b.filter(C=>!m.some(R=>R.providerId===C.providerId)),...m]}function z(b){return b.map(m=>{var{providerId:y}=m,C=(0,ce._T)(m,["providerId"]);return{providerId:y,uid:C.rawId||"",displayName:C.displayName||null,email:C.email||null,phoneNumber:C.phoneNumber||null,photoURL:C.photoUrl||null}})}function Y(){return(Y=(0,h.Z)(function*(b,m){const y=yield ro(b,{},(0,h.Z)(function*(){const C=(0,j.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:R,apiKey:V}=b.config,oe=zi(b,R,"/v1/token",`key=${V}`),Re=yield b._getAdditionalHeaders();return Re["Content-Type"]="application/x-www-form-urlencoded",Bn.fetch()(oe,{method:"POST",headers:Re,body:C})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class Q{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){le(m.idToken,"internal-error"),le(typeof m.idToken<"u","internal-error"),le(typeof m.refreshToken<"u","internal-error");const y="expiresIn"in m&&typeof m.expiresIn<"u"?Number(m.expiresIn):function yt(b){const m=_t(b);return le(m,"internal-error"),le(typeof m.exp<"u","internal-error"),le(typeof m.iat<"u","internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,y)}getToken(m,y=!1){var C=this;return(0,h.Z)(function*(){return le(!C.accessToken||C.refreshToken,m,"user-token-expired"),y||!C.accessToken||C.isExpired?C.refreshToken?(yield C.refresh(m,C.refreshToken),C.accessToken):null:C.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,y){var C=this;return(0,h.Z)(function*(){const{accessToken:R,refreshToken:V,expiresIn:oe}=yield function $(b,m){return Y.apply(this,arguments)}(m,y);C.updateTokensAndExpiration(R,V,Number(oe))})()}updateTokensAndExpiration(m,y,C){this.refreshToken=y||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*C}static fromJSON(m,y){const{refreshToken:C,accessToken:R,expirationTime:V}=y,oe=new Q;return C&&(le("string"==typeof C,"internal-error",{appName:m}),oe.refreshToken=C),R&&(le("string"==typeof R,"internal-error",{appName:m}),oe.accessToken=R),V&&(le("number"==typeof V,"internal-error",{appName:m}),oe.expirationTime=V),oe}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new Q,this.toJSON())}_performRefresh(){return pe("not implemented")}}function xe(b,m){le("string"==typeof b||typeof b>"u","internal-error",{appName:m})}class Ke{constructor(m){var{uid:y,auth:C,stsTokenManager:R}=m,V=(0,ce._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Tr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=C,this.stsTokenManager=R,this.accessToken=R.accessToken,this.displayName=V.displayName||null,this.email=V.email||null,this.emailVerified=V.emailVerified||!1,this.phoneNumber=V.phoneNumber||null,this.photoURL=V.photoURL||null,this.isAnonymous=V.isAnonymous||!1,this.tenantId=V.tenantId||null,this.providerData=V.providerData?[...V.providerData]:[],this.metadata=new xt(V.createdAt||void 0,V.lastLoginAt||void 0)}getIdToken(m){var y=this;return(0,h.Z)(function*(){const C=yield Ft(y,y.stsTokenManager.getToken(y.auth,m));return le(C,y.auth,"internal-error"),y.accessToken!==C&&(y.accessToken=C,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),C})()}getIdTokenResult(m){return function An(b){return Mn.apply(this,arguments)}(this,m)}reload(){return function Jr(b){return Yt.apply(this,arguments)}(this)}_assign(m){this!==m&&(le(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(y=>Object.assign({},y)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){return new Ke(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(m){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,y=!1){var C=this;return(0,h.Z)(function*(){let R=!1;m.idToken&&m.idToken!==C.stsTokenManager.accessToken&&(C.stsTokenManager.updateFromServerResponse(m),R=!0),y&&(yield Lr(C)),yield C.auth._persistUserIfCurrent(C),R&&C.auth._notifyListenersIfCurrent(C)})()}delete(){var m=this;return(0,h.Z)(function*(){const y=yield m.getIdToken();return yield Ft(m,function Si(b,m){return qi.apply(this,arguments)}(m.auth,{idToken:y})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,y){var C,R,V,oe,Re,tt,vt,Zt;const Vn=null!==(C=y.displayName)&&void 0!==C?C:void 0,zs=null!==(R=y.email)&&void 0!==R?R:void 0,au=null!==(V=y.phoneNumber)&&void 0!==V?V:void 0,ag=null!==(oe=y.photoURL)&&void 0!==oe?oe:void 0,nE=null!==(Re=y.tenantId)&&void 0!==Re?Re:void 0,bd=null!==(tt=y._redirectEventId)&&void 0!==tt?tt:void 0,ef=null!==(vt=y.createdAt)&&void 0!==vt?vt:void 0,tf=null!==(Zt=y.lastLoginAt)&&void 0!==Zt?Zt:void 0,{uid:$_,emailVerified:rE,isAnonymous:lg,providerData:ug,stsTokenManager:G_}=y;le($_&&G_,m,"internal-error");const iE=Q.fromJSON(this.name,G_);le("string"==typeof $_,m,"internal-error"),xe(Vn,m.name),xe(zs,m.name),le("boolean"==typeof rE,m,"internal-error"),le("boolean"==typeof lg,m,"internal-error"),xe(au,m.name),xe(ag,m.name),xe(nE,m.name),xe(bd,m.name),xe(ef,m.name),xe(tf,m.name);const cg=new Ke({uid:$_,auth:m,email:zs,emailVerified:rE,displayName:Vn,isAnonymous:lg,photoURL:ag,phoneNumber:au,tenantId:nE,stsTokenManager:iE,createdAt:ef,lastLoginAt:tf});return ug&&Array.isArray(ug)&&(cg.providerData=ug.map(z_=>Object.assign({},z_))),bd&&(cg._redirectEventId=bd),cg}static _fromIdTokenResponse(m,y,C=!1){return(0,h.Z)(function*(){const R=new Q;R.updateFromServerResponse(y);const V=new Ke({uid:y.localId,auth:m,stsTokenManager:R,isAnonymous:C});return yield Lr(V),V})()}}const gn=(()=>{class b{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(y,C){var R=this;return(0,h.Z)(function*(){R.storage[y]=C})()}_get(y){var C=this;return(0,h.Z)(function*(){const R=C.storage[y];return void 0===R?null:R})()}_remove(y){var C=this;return(0,h.Z)(function*(){delete C.storage[y]})()}_addListener(y,C){}_removeListener(y,C){}}return b.type="NONE",b})();function fn(b,m,y){return`firebase:${b}:${m}:${y}`}class tr{constructor(m,y,C){this.persistence=m,this.auth=y,this.userKey=C;const{config:R,name:V}=this.auth;this.fullUserKey=fn(this.userKey,R.apiKey,V),this.fullPersistenceKey=fn("persistence",R.apiKey,V),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,h.Z)(function*(){const y=yield m.persistence._get(m.fullUserKey);return y?Ke._fromJSON(m.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var y=this;return(0,h.Z)(function*(){if(y.persistence===m)return;const C=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=m,C?y.setCurrentUser(C):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,y,C="authUser"){return(0,h.Z)(function*(){if(!y.length)return new tr(ie(gn),m,C);const R=(yield Promise.all(y.map(function(){var vt=(0,h.Z)(function*(Zt){if(yield Zt._isAvailable())return Zt});return function(Zt){return vt.apply(this,arguments)}}()))).filter(vt=>vt);let V=R[0]||ie(gn);const oe=fn(C,m.config.apiKey,m.name);let Re=null;for(const vt of y)try{const Zt=yield vt._get(oe);if(Zt){const Vn=Ke._fromJSON(m,Zt);vt!==V&&(Re=Vn),V=vt;break}}catch{}const tt=R.filter(vt=>vt._shouldAllowMigration);return V._shouldAllowMigration&&tt.length?(V=tt[0],Re&&(yield V._set(oe,Re.toJSON())),yield Promise.all(y.map(function(){var vt=(0,h.Z)(function*(Zt){if(Zt!==V)try{yield Zt._remove(oe)}catch{}});return function(Zt){return vt.apply(this,arguments)}}())),new tr(V,m,C)):new tr(V,m,C)})()}}function se(b){const m=b.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(Ye(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(G(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(At(m))return"Blackberry";if(Ue(m))return"Webos";if(q(m))return"Safari";if((m.includes("chrome/")||Ie(m))&&!m.includes("edge/"))return"Chrome";if(Et(m))return"Android";{const C=b.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===C?.length)return C[1]}return"Other"}function G(b=(0,j.z$)()){return/firefox\//i.test(b)}function q(b=(0,j.z$)()){const m=b.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function Ie(b=(0,j.z$)()){return/crios\//i.test(b)}function Ye(b=(0,j.z$)()){return/iemobile/i.test(b)}function Et(b=(0,j.z$)()){return/android/i.test(b)}function At(b=(0,j.z$)()){return/blackberry/i.test(b)}function Ue(b=(0,j.z$)()){return/webos/i.test(b)}function lt(b=(0,j.z$)()){return/iphone|ipad|ipod/i.test(b)||/macintosh/i.test(b)&&/mobile/i.test(b)}function Xt(b=(0,j.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(b)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(b)}function vn(b=(0,j.z$)()){return lt(b)||Et(b)||Ue(b)||At(b)||/windows phone/i.test(b)||Ye(b)}function Rn(b,m=[]){let y;switch(b){case"Browser":y=se((0,j.z$)());break;case"Worker":y=`${se((0,j.z$)())}-${b}`;break;default:y=b}const C=m.length?m.join(","):"FirebaseCore-web";return`${y}/JsCore/${O.SDK_VERSION}/${C}`}class io{constructor(m){this.auth=m,this.queue=[]}pushCallback(m,y){const C=V=>new Promise((oe,Re)=>{try{oe(m(V))}catch(tt){Re(tt)}});C.onAbort=y,this.queue.push(C);const R=this.queue.length-1;return()=>{this.queue[R]=()=>Promise.resolve()}}runMiddleware(m){var y=this;return(0,h.Z)(function*(){var C;if(y.auth.currentUser===m)return;const R=[];try{for(const V of y.queue)yield V(m),V.onAbort&&R.push(V.onAbort)}catch(V){R.reverse();for(const oe of R)try{oe()}catch{}throw y.auth._errorFactory.create("login-blocked",{originalMessage:null===(C=V)||void 0===C?void 0:C.message})}})()}}class so{constructor(m,y,C){this.app=m,this.heartbeatServiceProvider=y,this.config=C,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new oo(this),this.idTokenSubscription=new oo(this),this.beforeStateQueue=new io(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ct,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=C.sdkClientVersion}_initializeWithPersistence(m,y){var C=this;return y&&(this._popupRedirectResolver=ie(y)),this._initializationPromise=this.queue((0,h.Z)(function*(){var R,V;if(!C._deleted&&(C.persistenceManager=yield tr.create(C,m),!C._deleted)){if(null!==(R=C._popupRedirectResolver)&&void 0!==R&&R._shouldInitProactively)try{yield C._popupRedirectResolver._initialize(C)}catch{}yield C.initializeCurrentUser(y),C.lastNotifiedUid=(null===(V=C.currentUser)||void 0===V?void 0:V.uid)||null,!C._deleted&&(C._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,h.Z)(function*(){if(m._deleted)return;const y=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||y){if(m.currentUser&&y&&m.currentUser.uid===y.uid)return m._currentUser._assign(y),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(y,!0)}})()}initializeCurrentUser(m){var y=this;return(0,h.Z)(function*(){var C;const R=yield y.assertedPersistence.getCurrentUser();let V=R,oe=!1;if(m&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const Re=null===(C=y.redirectUser)||void 0===C?void 0:C._redirectEventId,tt=V?._redirectEventId,vt=yield y.tryRedirectSignIn(m);(!Re||Re===tt)&&vt?.user&&(V=vt.user,oe=!0)}if(!V)return y.directlySetCurrentUser(null);if(!V._redirectEventId){if(oe)try{yield y.beforeStateQueue.runMiddleware(V)}catch(Re){V=R,y._popupRedirectResolver._overrideRedirectResult(y,()=>Promise.reject(Re))}return V?y.reloadAndSetCurrentUserOrClear(V):y.directlySetCurrentUser(null)}return le(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===V._redirectEventId?y.directlySetCurrentUser(V):y.reloadAndSetCurrentUserOrClear(V)})()}tryRedirectSignIn(m){var y=this;return(0,h.Z)(function*(){let C=null;try{C=yield y._popupRedirectResolver._completeRedirectFn(y,m,!0)}catch{yield y._setRedirectUser(null)}return C})()}reloadAndSetCurrentUserOrClear(m){var y=this;return(0,h.Z)(function*(){var C;try{yield Lr(m)}catch(R){if("auth/network-request-failed"!==(null===(C=R)||void 0===C?void 0:C.code))return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function Wt(){if(typeof navigator>"u")return null;const b=navigator;return b.languages&&b.languages[0]||b.language||null}()}_delete(){var m=this;return(0,h.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var y=this;return(0,h.Z)(function*(){const C=m?(0,j.m9)(m):null;return C&&le(C.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(C&&C._clone(y))})()}_updateCurrentUser(m,y=!1){var C=this;return(0,h.Z)(function*(){if(!C._deleted)return m&&le(C.tenantId===m.tenantId,C,"tenant-id-mismatch"),y||(yield C.beforeStateQueue.runMiddleware(m)),C.queue((0,h.Z)(function*(){yield C.directlySetCurrentUser(m),C.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,h.Z)(function*(){return yield m.beforeStateQueue.runMiddleware(null),(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null,!0)})()}setPersistence(m){var y=this;return this.queue((0,h.Z)(function*(){yield y.assertedPersistence.setPersistence(ie(m))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new j.LL("auth","Firebase",m())}onAuthStateChanged(m,y,C){return this.registerStateListener(this.authStateSubscription,m,y,C)}beforeAuthStateChanged(m,y){return this.beforeStateQueue.pushCallback(m,y)}onIdTokenChanged(m,y,C){return this.registerStateListener(this.idTokenSubscription,m,y,C)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,y){var C=this;return(0,h.Z)(function*(){const R=yield C.getOrInitRedirectPersistenceManager(y);return null===m?R.removeCurrentUser():R.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var y=this;return(0,h.Z)(function*(){if(!y.redirectPersistenceManager){const C=m&&ie(m)||y._popupRedirectResolver;le(C,y,"argument-error"),y.redirectPersistenceManager=yield tr.create(y,[ie(C._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(m){var y=this;return(0,h.Z)(function*(){var C,R;return y._isInitialized&&(yield y.queue((0,h.Z)(function*(){}))),(null===(C=y._currentUser)||void 0===C?void 0:C._redirectEventId)===m?y._currentUser:(null===(R=y.redirectUser)||void 0===R?void 0:R._redirectEventId)===m?y.redirectUser:null})()}_persistUserIfCurrent(m){var y=this;return(0,h.Z)(function*(){if(m===y.currentUser)return y.queue((0,h.Z)(function*(){return y.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const C=null!==(y=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==C&&(this.lastNotifiedUid=C,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,y,C,R){if(this._deleted)return()=>{};const V="function"==typeof y?y:y.next.bind(y),oe=this._isInitialized?Promise.resolve():this._initializationPromise;return le(oe,this,"internal-error"),oe.then(()=>V(this.currentUser)),"function"==typeof y?m.addObserver(y,C,R):m.addObserver(y)}directlySetCurrentUser(m){var y=this;return(0,h.Z)(function*(){y.currentUser&&y.currentUser!==m&&y._currentUser._stopProactiveRefresh(),m&&y.isProactiveRefreshEnabled&&m._startProactiveRefresh(),y.currentUser=m,m?yield y.assertedPersistence.setCurrentUser(m):yield y.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=Rn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,h.Z)(function*(){var y;const C={"X-Client-Version":m.clientVersion};m.app.options.appId&&(C["X-Firebase-gmpid"]=m.app.options.appId);const R=yield null===(y=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();return R&&(C["X-Firebase-Client"]=R),C})()}}function Ct(b){return(0,j.m9)(b)}class oo{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,j.ne)(y=>this.observer=y)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function jo(b,m,y){const C=Ct(b);le(C._canInitEmulator,C,"emulator-config-failed"),le(/^https?:\/\//.test(m),C,"invalid-emulator-scheme");const R=!!y?.disableWarnings,V=Vl(m),{host:oe,port:Re}=function cs(b){const m=Vl(b),y=/(\/\/)?([^?#/]+)/.exec(b.substr(m.length));if(!y)return{host:"",port:null};const C=y[2].split("@").pop()||"",R=/^(\[[^\]]+\])(:|$)/.exec(C);if(R){const V=R[1];return{host:V,port:Zn(C.substr(V.length+1))}}{const[V,oe]=C.split(":");return{host:V,port:Zn(oe)}}}(m);C.config.emulator={url:`${V}//${oe}${null===Re?"":`:${Re}`}/`},C.settings.appVerificationDisabledForTesting=!0,C.emulatorConfig=Object.freeze({host:oe,port:Re,protocol:V.replace(":",""),options:Object.freeze({disableWarnings:R})}),R||function ao(){function b(){const m=document.createElement("p"),y=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",b):b())}()}function Vl(b){const m=b.indexOf(":");return m<0?"":b.substr(0,m+1)}function Zn(b){if(!b)return null;const m=Number(b);return isNaN(m)?null:m}class Xr{constructor(m,y){this.providerId=m,this.signInMethod=y}toJSON(){return pe("not implemented")}_getIdTokenResponse(m){return pe("not implemented")}_linkToIdToken(m,y){return pe("not implemented")}_getReauthenticationResolver(m){return pe("not implemented")}}function li(b,m){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,h.Z)(function*(b,m){return jt(b,"POST","/v1/accounts:resetPassword",Kt(b,m))})).apply(this,arguments)}function Ul(b,m){return bn.apply(this,arguments)}function bn(){return(bn=(0,h.Z)(function*(b,m){return jt(b,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function kh(b,m){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,h.Z)(function*(b,m){return jt(b,"POST","/v1/accounts:update",Kt(b,m))})).apply(this,arguments)}function lo(){return(lo=(0,h.Z)(function*(b,m){return Nn(b,"POST","/v1/accounts:signInWithPassword",Kt(b,m))})).apply(this,arguments)}function uo(b,m){return co.apply(this,arguments)}function co(){return(co=(0,h.Z)(function*(b,m){return jt(b,"POST","/v1/accounts:sendOobCode",Kt(b,m))})).apply(this,arguments)}function ds(b,m){return $n.apply(this,arguments)}function $n(){return($n=(0,h.Z)(function*(b,m){return uo(b,m)})).apply(this,arguments)}function Nh(b,m){return nr.apply(this,arguments)}function nr(){return(nr=(0,h.Z)(function*(b,m){return uo(b,m)})).apply(this,arguments)}function ui(b,m){return ho.apply(this,arguments)}function ho(){return(ho=(0,h.Z)(function*(b,m){return uo(b,m)})).apply(this,arguments)}function Bl(b,m){return $a.apply(this,arguments)}function $a(){return($a=(0,h.Z)(function*(b,m){return uo(b,m)})).apply(this,arguments)}function Uu(){return(Uu=(0,h.Z)(function*(b,m){return Nn(b,"POST","/v1/accounts:signInWithEmailLink",Kt(b,m))})).apply(this,arguments)}function Bu(){return(Bu=(0,h.Z)(function*(b,m){return Nn(b,"POST","/v1/accounts:signInWithEmailLink",Kt(b,m))})).apply(this,arguments)}class Ga extends Xr{constructor(m,y,C,R=null){super("password",C),this._email=m,this._password=y,this._tenantId=R}static _fromEmailAndPassword(m,y){return new Ga(m,y,"password")}static _fromEmailAndCode(m,y,C=null){return new Ga(m,y,"emailLink",C)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const y="string"==typeof m?JSON.parse(m):m;if(y?.email&&y?.password){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(m){var y=this;return(0,h.Z)(function*(){switch(y.signInMethod){case"password":return function ja(b,m){return lo.apply(this,arguments)}(m,{returnSecureToken:!0,email:y._email,password:y._password});case"emailLink":return function ei(b,m){return Uu.apply(this,arguments)}(m,{email:y._email,oobCode:y._password});default:st(m,"internal-error")}})()}_linkToIdToken(m,y){var C=this;return(0,h.Z)(function*(){switch(C.signInMethod){case"password":return Ul(m,{idToken:y,returnSecureToken:!0,email:C._email,password:C._password});case"emailLink":return function $p(b,m){return Bu.apply(this,arguments)}(m,{idToken:y,email:C._email,oobCode:C._password});default:st(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function fo(b,m){return ci.apply(this,arguments)}function ci(){return(ci=(0,h.Z)(function*(b,m){return Nn(b,"POST","/v1/accounts:signInWithIdp",Kt(b,m))})).apply(this,arguments)}class hs extends Xr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const y=new hs(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(y.idToken=m.idToken),m.accessToken&&(y.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(y.nonce=m.nonce),m.pendingToken&&(y.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(y.accessToken=m.oauthToken,y.secret=m.oauthTokenSecret):st("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const y="string"==typeof m?JSON.parse(m):m,{providerId:C,signInMethod:R}=y,V=(0,ce._T)(y,["providerId","signInMethod"]);if(!C||!R)return null;const oe=new hs(C,R);return oe.idToken=V.idToken||void 0,oe.accessToken=V.accessToken||void 0,oe.secret=V.secret,oe.nonce=V.nonce,oe.pendingToken=V.pendingToken||null,oe}_getIdTokenResponse(m){return fo(m,this.buildRequest())}_linkToIdToken(m,y){const C=this.buildRequest();return C.idToken=y,fo(m,C)}_getReauthenticationResolver(m){const y=this.buildRequest();return y.autoCreate=!1,fo(m,y)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),m.postBody=(0,j.xO)(y)}return m}}function zp(b,m){return Gc.apply(this,arguments)}function Gc(){return(Gc=(0,h.Z)(function*(b,m){return jt(b,"POST","/v1/accounts:sendVerificationCode",Kt(b,m))})).apply(this,arguments)}function za(){return(za=(0,h.Z)(function*(b,m){return Nn(b,"POST","/v1/accounts:signInWithPhoneNumber",Kt(b,m))})).apply(this,arguments)}function zc(){return(zc=(0,h.Z)(function*(b,m){const y=yield Nn(b,"POST","/v1/accounts:signInWithPhoneNumber",Kt(b,m));if(y.temporaryProof)throw Hn(b,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const Wp={USER_NOT_FOUND:"user-not-found"};function qc(){return(qc=(0,h.Z)(function*(b,m){return Nn(b,"POST","/v1/accounts:signInWithPhoneNumber",Kt(b,Object.assign(Object.assign({},m),{operation:"REAUTH"})),Wp)})).apply(this,arguments)}class Go extends Xr{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,y){return new Go({verificationId:m,verificationCode:y})}static _fromTokenResponse(m,y){return new Go({phoneNumber:m,temporaryProof:y})}_getIdTokenResponse(m){return function qp(b,m){return za.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,y){return function $o(b,m){return zc.apply(this,arguments)}(m,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function Kp(b,m){return qc.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:y,verificationId:C,verificationCode:R}=this.params;return m&&y?{temporaryProof:m,phoneNumber:y}:{sessionInfo:C,code:R}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:y,verificationCode:C,phoneNumber:R,temporaryProof:V}=m;return C||y||R||V?new Go({verificationId:y,verificationCode:C,phoneNumber:R,temporaryProof:V}):null}}class zo{constructor(m){var y,C,R,V,oe,Re;const tt=(0,j.zd)((0,j.pd)(m)),vt=null!==(y=tt.apiKey)&&void 0!==y?y:null,Zt=null!==(C=tt.oobCode)&&void 0!==C?C:null,Vn=function Wc(b){switch(b){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(R=tt.mode)&&void 0!==R?R:null);le(vt&&Zt&&Vn,"argument-error"),this.apiKey=vt,this.operation=Vn,this.code=Zt,this.continueUrl=null!==(V=tt.continueUrl)&&void 0!==V?V:null,this.languageCode=null!==(oe=tt.languageCode)&&void 0!==oe?oe:null,this.tenantId=null!==(Re=tt.tenantId)&&void 0!==Re?Re:null}static parseLink(m){const y=function Kc(b){const m=(0,j.zd)((0,j.pd)(b)).link,y=m?(0,j.zd)((0,j.pd)(m)).deep_link_id:null,C=(0,j.zd)((0,j.pd)(b)).deep_link_id;return(C?(0,j.zd)((0,j.pd)(C)).link:null)||C||y||m||b}(m);try{return new zo(y)}catch{return null}}}let Hl=(()=>{class b{constructor(){this.providerId=b.PROVIDER_ID}static credential(y,C){return Ga._fromEmailAndPassword(y,C)}static credentialWithLink(y,C){const R=zo.parseLink(C);return le(R,"argument-error"),Ga._fromEmailAndCode(y,R.code,R.tenantId)}}return b.PROVIDER_ID="password",b.EMAIL_PASSWORD_SIGN_IN_METHOD="password",b.EMAIL_LINK_SIGN_IN_METHOD="emailLink",b})();class Dr{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class qo extends Dr{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class Ns extends qo{static credentialFromJSON(m){const y="string"==typeof m?JSON.parse(m):m;return le("providerId"in y&&"signInMethod"in y,"argument-error"),hs._fromParams(y)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return le(m.idToken||m.accessToken,"argument-error"),hs._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return Ns.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return Ns.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:y,oauthAccessToken:C,oauthTokenSecret:R,pendingToken:V,nonce:oe,providerId:Re}=m;if(!C&&!R&&!y&&!V||!Re)return null;try{return new Ns(Re)._credential({idToken:y,accessToken:C,nonce:oe,pendingToken:V})}catch{return null}}}let Zc=(()=>{class b extends qo{constructor(){super("facebook.com")}static credential(y){return hs._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return b.credential(y.oauthAccessToken)}catch{return null}}}return b.FACEBOOK_SIGN_IN_METHOD="facebook.com",b.PROVIDER_ID="facebook.com",b})(),jl=(()=>{class b extends qo{constructor(){super("google.com"),this.addScope("profile")}static credential(y,C){return hs._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:C})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:C,oauthAccessToken:R}=y;if(!C&&!R)return null;try{return b.credential(C,R)}catch{return null}}}return b.GOOGLE_SIGN_IN_METHOD="google.com",b.PROVIDER_ID="google.com",b})(),Hu=(()=>{class b extends qo{constructor(){super("github.com")}static credential(y){return hs._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return b.credential(y.oauthAccessToken)}catch{return null}}}return b.GITHUB_SIGN_IN_METHOD="github.com",b.PROVIDER_ID="github.com",b})();class Wo extends Xr{constructor(m,y){super(m,m),this.pendingToken=y}_getIdTokenResponse(m){return fo(m,this.buildRequest())}_linkToIdToken(m,y){const C=this.buildRequest();return C.idToken=y,fo(m,C)}_getReauthenticationResolver(m){const y=this.buildRequest();return y.autoCreate=!1,fo(m,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const y="string"==typeof m?JSON.parse(m):m,{providerId:C,signInMethod:R,pendingToken:V}=y;return C&&R&&V&&C===R?new Wo(C,V):null}static _create(m,y){return new Wo(m,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class di extends Dr{constructor(m){le(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return di.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return di.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const y=Wo.fromJSON(m);return le(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:y,providerId:C}=m;if(!y||!C)return null;try{return Wo._create(C,y)}catch{return null}}}let fs=(()=>{class b extends qo{constructor(){super("twitter.com")}static credential(y,C){return hs._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:C})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:C,oauthTokenSecret:R}=y;if(!C||!R)return null;try{return b.credential(C,R)}catch{return null}}}return b.TWITTER_SIGN_IN_METHOD="twitter.com",b.PROVIDER_ID="twitter.com",b})();function ti(b,m){return po.apply(this,arguments)}function po(){return(po=(0,h.Z)(function*(b,m){return Nn(b,"POST","/v1/accounts:signUp",Kt(b,m))})).apply(this,arguments)}class hi{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,y,C,R=!1){return(0,h.Z)(function*(){const V=yield Ke._fromIdTokenResponse(m,C,R),oe=Ko(C);return new hi({user:V,providerId:oe,_tokenResponse:C,operationType:y})})()}static _forOperation(m,y,C){return(0,h.Z)(function*(){yield m._updateTokensIfNecessary(C,!0);const R=Ko(C);return new hi({user:m,providerId:R,_tokenResponse:C,operationType:y})})()}}function Ko(b){return b.providerId?b.providerId:"phoneNumber"in b?"phone":null}function Zp(b){return ju.apply(this,arguments)}function ju(){return(ju=(0,h.Z)(function*(b){var m;const y=Ct(b);if(yield y._initializationPromise,null!==(m=y.currentUser)&&void 0!==m&&m.isAnonymous)return new hi({user:y.currentUser,providerId:null,operationType:"signIn"});const C=yield ti(y,{returnSecureToken:!0}),R=yield hi._fromIdTokenResponse(y,"signIn",C,!0);return yield y._updateCurrentUser(R.user),R})).apply(this,arguments)}class Ln extends j.ZR{constructor(m,y,C,R){var V;super(y.code,y.message),this.operationType=C,this.user=R,Object.setPrototypeOf(this,Ln.prototype),this.customData={appName:m.name,tenantId:null!==(V=m.tenantId)&&void 0!==V?V:void 0,_serverResponse:y.customData._serverResponse,operationType:C}}static _fromErrorAndOperation(m,y,C,R){return new Ln(m,y,C,R)}}function Qc(b,m,y,C){return("reauthenticate"===m?y._getReauthenticationResolver(b):y._getIdTokenResponse(b)).catch(V=>{throw"auth/multi-factor-auth-required"===V.code?Ln._fromErrorAndOperation(b,V,m,C):V})}function Ph(b){return new Set(b.map(({providerId:m})=>m).filter(m=>!!m))}function Ai(b,m){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,h.Z)(function*(b,m){const y=(0,j.m9)(b);yield Ki(!0,y,m);const{providerUserInfo:C}=yield ot(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[m]}),R=Ph(C||[]);return y.providerData=y.providerData.filter(V=>R.has(V.providerId)),R.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y})).apply(this,arguments)}function $l(b,m){return go.apply(this,arguments)}function go(){return(go=(0,h.Z)(function*(b,m,y=!1){const C=yield Ft(b,m._linkToIdToken(b.auth,yield b.getIdToken()),y);return hi._forOperation(b,"link",C)})).apply(this,arguments)}function Ki(b,m,y){return cn.apply(this,arguments)}function cn(){return(cn=(0,h.Z)(function*(b,m,y){yield Lr(m);const R=!1===b?"provider-already-linked":"no-such-provider";le(Ph(m.providerData).has(y)===b,m.auth,R)})).apply(this,arguments)}function Gl(b,m){return Os.apply(this,arguments)}function Os(){return(Os=(0,h.Z)(function*(b,m,y=!1){var C;const{auth:R}=b,V="reauthenticate";try{const oe=yield Ft(b,Qc(R,V,m,b),y);le(oe.idToken,R,"internal-error");const Re=_t(oe.idToken);le(Re,R,"internal-error");const{sub:tt}=Re;return le(b.uid===tt,R,"user-mismatch"),hi._forOperation(b,V,oe)}catch(oe){throw"auth/user-not-found"===(null===(C=oe)||void 0===C?void 0:C.code)&&st(R,"user-mismatch"),oe}})).apply(this,arguments)}function $u(b,m){return fi.apply(this,arguments)}function fi(){return(fi=(0,h.Z)(function*(b,m,y=!1){const C="signIn",R=yield Qc(b,C,m),V=yield hi._fromIdTokenResponse(b,C,R);return y||(yield b._updateCurrentUser(V.user)),V})).apply(this,arguments)}function qa(b,m){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,h.Z)(function*(b,m){return $u(Ct(b),m)})).apply(this,arguments)}function Pt(b,m){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,h.Z)(function*(b,m){const y=(0,j.m9)(b);return yield Ki(!1,y,m.providerId),$l(y,m)})).apply(this,arguments)}function Yp(b,m){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,h.Z)(function*(b,m){return Gl((0,j.m9)(b),m)})).apply(this,arguments)}function Jc(b,m){return Za.apply(this,arguments)}function Za(){return(Za=(0,h.Z)(function*(b,m){return Nn(b,"POST","/v1/accounts:signInWithCustomToken",Kt(b,m))})).apply(this,arguments)}function mo(b,m){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,h.Z)(function*(b,m){const y=Ct(b),C=yield Jc(y,{token:m,returnSecureToken:!0}),R=yield hi._fromIdTokenResponse(y,"signIn",C);return yield y._updateCurrentUser(R.user),R})).apply(this,arguments)}class Zo{constructor(m,y){this.factorId=m,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(m,y){return"phoneInfo"in y?Pe._fromServerResponse(m,y):st(m,"internal-error")}}class Pe extends Zo{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,y){return new Pe(y)}}function Qt(b,m,y){var C;le((null===(C=y.url)||void 0===C?void 0:C.length)>0,b,"invalid-continue-uri"),le(typeof y.dynamicLinkDomain>"u"||y.dynamicLinkDomain.length>0,b,"invalid-dynamic-link-domain"),m.continueUrl=y.url,m.dynamicLinkDomain=y.dynamicLinkDomain,m.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(le(y.iOS.bundleId.length>0,b,"missing-ios-bundle-id"),m.iOSBundleId=y.iOS.bundleId),y.android&&(le(y.android.packageName.length>0,b,"missing-android-pkg-name"),m.androidInstallApp=y.android.installApp,m.androidMinimumVersionCode=y.android.minimumVersion,m.androidPackageName=y.android.packageName)}function Fh(b,m,y){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,h.Z)(function*(b,m,y){const C=(0,j.m9)(b),R={requestType:"PASSWORD_RESET",email:m};y&&Qt(C,R,y),yield Nh(C,R)})).apply(this,arguments)}function rr(b,m,y){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,h.Z)(function*(b,m,y){yield li((0,j.m9)(b),{oobCode:m,newPassword:y})})).apply(this,arguments)}function zl(b,m){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,h.Z)(function*(b,m){yield kh((0,j.m9)(b),{oobCode:m})})).apply(this,arguments)}function ql(b,m){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,h.Z)(function*(b,m){const y=(0,j.m9)(b),C=yield li(y,{oobCode:m}),R=C.requestType;switch(le(R,y,"internal-error"),R){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":le(C.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":le(C.mfaInfo,y,"internal-error");default:le(C.email,y,"internal-error")}let V=null;return C.mfaInfo&&(V=Zo._fromServerResponse(Ct(y),C.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.newEmail:C.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.email:C.newEmail)||null,multiFactorInfo:V},operation:R}})).apply(this,arguments)}function Lh(b,m){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,h.Z)(function*(b,m){const{data:y}=yield ql((0,j.m9)(b),m);return y.email})).apply(this,arguments)}function Qp(b,m,y){return ps.apply(this,arguments)}function ps(){return(ps=(0,h.Z)(function*(b,m,y){const C=Ct(b),R=yield ti(C,{returnSecureToken:!0,email:m,password:y}),V=yield hi._fromIdTokenResponse(C,"signIn",R);return yield C._updateCurrentUser(V.user),V})).apply(this,arguments)}function ir(b,m,y){return qa((0,j.m9)(b),Hl.credential(m,y))}function Zi(b,m,y){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,h.Z)(function*(b,m,y){const C=(0,j.m9)(b),R={requestType:"EMAIL_SIGNIN",email:m};le(y.handleCodeInApp,C,"argument-error"),y&&Qt(C,R,y),yield ui(C,R)})).apply(this,arguments)}function Xa(b,m){return"EMAIL_SIGNIN"===zo.parseLink(m)?.operation}function gs(b,m,y){return Xc.apply(this,arguments)}function Xc(){return(Xc=(0,h.Z)(function*(b,m,y){const C=(0,j.m9)(b),R=Hl.credentialWithLink(m,y||je());return le(R._tenantId===(C.tenantId||null),C,"tenant-id-mismatch"),qa(C,R)})).apply(this,arguments)}function Gu(b,m){return ed.apply(this,arguments)}function ed(){return(ed=(0,h.Z)(function*(b,m){return jt(b,"POST","/v1/accounts:createAuthUri",Kt(b,m))})).apply(this,arguments)}function Vh(b,m){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,h.Z)(function*(b,m){const C={identifier:m,continueUri:$e()?je():"http://localhost"},{signinMethods:R}=yield Gu((0,j.m9)(b),C);return R||[]})).apply(this,arguments)}function zu(b,m){return el.apply(this,arguments)}function el(){return(el=(0,h.Z)(function*(b,m){const y=(0,j.m9)(b),R={requestType:"VERIFY_EMAIL",idToken:yield b.getIdToken()};m&&Qt(y.auth,R,m);const{email:V}=yield ds(y.auth,R);V!==b.email&&(yield b.reload())})).apply(this,arguments)}function qu(b,m,y){return tl.apply(this,arguments)}function tl(){return(tl=(0,h.Z)(function*(b,m,y){const C=(0,j.m9)(b),V={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield b.getIdToken(),newEmail:m};y&&Qt(C.auth,V,y);const{email:oe}=yield Bl(C.auth,V);oe!==b.email&&(yield b.reload())})).apply(this,arguments)}function td(b,m){return ea.apply(this,arguments)}function ea(){return(ea=(0,h.Z)(function*(b,m){return jt(b,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Uh(b,m){return nl.apply(this,arguments)}function nl(){return(nl=(0,h.Z)(function*(b,{displayName:m,photoURL:y}){if(void 0===m&&void 0===y)return;const C=(0,j.m9)(b),V={idToken:yield C.getIdToken(),displayName:m,photoUrl:y,returnSecureToken:!0},oe=yield Ft(C,td(C.auth,V));C.displayName=oe.displayName||null,C.photoURL=oe.photoUrl||null;const Re=C.providerData.find(({providerId:tt})=>"password"===tt);Re&&(Re.displayName=C.displayName,Re.photoURL=C.photoURL),yield C._updateTokensIfNecessary(oe)})).apply(this,arguments)}function Bh(b,m){return Ps((0,j.m9)(b),m,null)}function nd(b,m){return Ps((0,j.m9)(b),null,m)}function Ps(b,m,y){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,h.Z)(function*(b,m,y){const{auth:C}=b,V={idToken:yield b.getIdToken(),returnSecureToken:!0};m&&(V.email=m),y&&(V.password=y);const oe=yield Ft(b,Ul(C,V));yield b._updateTokensIfNecessary(oe,!0)})).apply(this,arguments)}class Pn{constructor(m,y,C={}){this.isNewUser=m,this.providerId=y,this.profile=C}}class ms extends Pn{constructor(m,y,C,R){super(m,y,C),this.username=R}}class Fn extends Pn{constructor(m,y){super(m,"facebook.com",y)}}class id extends ms{constructor(m,y){super(m,"github.com",y,"string"==typeof y?.login?y?.login:null)}}class Wu extends Pn{constructor(m,y){super(m,"google.com",y)}}class Hh extends ms{constructor(m,y,C){super(m,"twitter.com",y,C)}}function Ku(b){const{user:m,_tokenResponse:y}=b;return m.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function rd(b){var m,y;if(!b)return null;const{providerId:C}=b,R=b.rawUserInfo?JSON.parse(b.rawUserInfo):{},V=b.isNewUser||"identitytoolkit#SignupNewUserResponse"===b.kind;if(!C&&b?.idToken){const oe=null===(y=null===(m=_t(b.idToken))||void 0===m?void 0:m.firebase)||void 0===y?void 0:y.sign_in_provider;if(oe)return new Pn(V,"anonymous"!==oe&&"custom"!==oe?oe:null)}if(!C)return null;switch(C){case"facebook.com":return new Fn(V,R);case"github.com":return new id(V,R);case"google.com":return new Wu(V,R);case"twitter.com":return new Hh(V,R,b.screenName||null);case"custom":case"anonymous":return new Pn(V,null);default:return new Pn(V,C,R)}}(y)}class pi{constructor(m,y){this.type=m,this.credential=y}static _fromIdtoken(m){return new pi("enroll",m)}static _fromMfaPendingCredential(m){return new pi("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var y,C;if(m?.multiFactorSession){if(null!==(y=m.multiFactorSession)&&void 0!==y&&y.pendingCredential)return pi._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null!==(C=m.multiFactorSession)&&void 0!==C&&C.idToken)return pi._fromIdtoken(m.multiFactorSession.idToken)}return null}}class Qu{constructor(m,y,C){this.session=m,this.hints=y,this.signInResolver=C}static _fromError(m,y){const C=Ct(m),R=y.customData._serverResponse,V=(R.mfaInfo||[]).map(Re=>Zo._fromServerResponse(C,Re));le(R.mfaPendingCredential,C,"internal-error");const oe=pi._fromMfaPendingCredential(R.mfaPendingCredential);return new Qu(oe,V,function(){var Re=(0,h.Z)(function*(tt){const vt=yield tt._process(C,oe);delete R.mfaInfo,delete R.mfaPendingCredential;const Zt=Object.assign(Object.assign({},R),{idToken:vt.idToken,refreshToken:vt.refreshToken});switch(y.operationType){case"signIn":const Vn=yield hi._fromIdTokenResponse(C,y.operationType,Zt);return yield C._updateCurrentUser(Vn.user),Vn;case"reauthenticate":return le(y.user,C,"internal-error"),hi._forOperation(y.user,y.operationType,Zt);default:st(C,"internal-error")}});return function(tt){return Re.apply(this,arguments)}}())}resolveSignIn(m){var y=this;return(0,h.Z)(function*(){return y.signInResolver(m)})()}}function ld(b,m){var y;const C=(0,j.m9)(b),R=m;return le(m.customData.operationType,C,"argument-error"),le(null===(y=R.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,C,"argument-error"),Qu._fromError(C,R)}function zn(b,m){return jt(b,"POST","/v2/accounts/mfaEnrollment:start",Kt(b,m))}class Zl{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(C=>Zo._fromServerResponse(m.auth,C)))})}static _fromUser(m){return new Zl(m)}getSession(){var m=this;return(0,h.Z)(function*(){return pi._fromIdtoken(yield m.user.getIdToken())})()}enroll(m,y){var C=this;return(0,h.Z)(function*(){const R=m,V=yield C.getSession(),oe=yield Ft(C.user,R._process(C.user.auth,V,y));return yield C.user._updateTokensIfNecessary(oe),C.user.reload()})()}unenroll(m){var y=this;return(0,h.Z)(function*(){var C;const R="string"==typeof m?m:m.uid,V=yield y.user.getIdToken(),oe=yield Ft(y.user,function Kl(b,m){return jt(b,"POST","/v2/accounts/mfaEnrollment:withdraw",Kt(b,m))}(y.user.auth,{idToken:V,mfaEnrollmentId:R}));y.enrolledFactors=y.enrolledFactors.filter(({uid:Re})=>Re!==R),yield y.user._updateTokensIfNecessary(oe);try{yield y.user.reload()}catch(Re){if("auth/user-token-expired"!==(null===(C=Re)||void 0===C?void 0:C.code))throw Re}})()}}const jh=new WeakMap;function rl(b){const m=(0,j.m9)(b);return jh.has(m)||jh.set(m,Zl._fromUser(m)),jh.get(m)}const _s="__sak";class il{constructor(m,y){this.storageRetriever=m,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(_s,"1"),this.storage.removeItem(_s),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(m,y){return this.storage.setItem(m,JSON.stringify(y)),Promise.resolve()}_get(m){const y=this.storage.getItem(m);return Promise.resolve(y?JSON.parse(y):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const sr=(()=>{class b extends il{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,C)=>this.onStorageEvent(y,C),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ju(){const b=(0,j.z$)();return q(b)||lt(b)}()&&function us(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=vn(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const C of Object.keys(this.listeners)){const R=this.storage.getItem(C),V=this.localCache[C];R!==V&&y(C,V,R)}}onStorageEvent(y,C=!1){if(!y.key)return void this.forAllChangedKeys((Re,tt,vt)=>{this.notifyListeners(Re,vt)});const R=y.key;if(C?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Re=this.storage.getItem(R);if(y.newValue!==Re)null!==y.newValue?this.storage.setItem(R,y.newValue):this.storage.removeItem(R);else if(this.localCache[R]===y.newValue&&!C)return}const V=()=>{const Re=this.storage.getItem(R);!C&&this.localCache[R]===Re||this.notifyListeners(R,Re)},oe=this.storage.getItem(R);!function Bt(){return(0,j.w1)()&&10===document.documentMode}()||oe===y.newValue||y.newValue===y.oldValue?V():setTimeout(V,10)}notifyListeners(y,C){this.localCache[y]=C;const R=this.listeners[y];if(R)for(const V of Array.from(R))V(C&&JSON.parse(C))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,C,R)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:C,newValue:R}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,C){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(C)}_removeListener(y,C){this.listeners[y]&&(this.listeners[y].delete(C),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,C){var R=()=>super._set,V=this;return(0,h.Z)(function*(){yield R().call(V,y,C),V.localCache[y]=JSON.stringify(C)})()}_get(y){var C=()=>super._get,R=this;return(0,h.Z)(function*(){const V=yield C().call(R,y);return R.localCache[y]=JSON.stringify(V),V})()}_remove(y){var C=()=>super._remove,R=this;return(0,h.Z)(function*(){yield C().call(R,y),delete R.localCache[y]})()}}return b.type="LOCAL",b})(),Ls=(()=>{class b extends il{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,C){}_removeListener(y,C){}}return b.type="SESSION",b})();let ol=(()=>{class b{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const C=this.receivers.find(V=>V.isListeningto(y));if(C)return C;const R=new b(y);return this.receivers.push(R),R}isListeningto(y){return this.eventTarget===y}handleEvent(y){var C=this;return(0,h.Z)(function*(){const R=y,{eventId:V,eventType:oe,data:Re}=R.data,tt=C.handlersMap[oe];if(!tt?.size)return;R.ports[0].postMessage({status:"ack",eventId:V,eventType:oe});const vt=Array.from(tt).map(function(){var Vn=(0,h.Z)(function*(zs){return zs(R.origin,Re)});return function(zs){return Vn.apply(this,arguments)}}()),Zt=yield function Xu(b){return Promise.all(b.map(function(){var m=(0,h.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(C){return{fulfilled:!1,reason:C}}});return function(y){return m.apply(this,arguments)}}()))}(vt);R.ports[0].postMessage({status:"done",eventId:V,eventType:oe,response:Zt})})()}_subscribe(y,C){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(C)}_unsubscribe(y,C){this.handlersMap[y]&&C&&this.handlersMap[y].delete(C),(!C||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return b.receivers=[],b})();function ia(b="",m=10){let y="";for(let C=0;C<m;C++)y+=Math.floor(10*Math.random());return b+y}class zh{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,y,C=50){var R=this;return(0,h.Z)(function*(){const V=typeof MessageChannel<"u"?new MessageChannel:null;if(!V)throw new Error("connection_unavailable");let oe,Re;return new Promise((tt,vt)=>{const Zt=ia("",20);V.port1.start();const Vn=setTimeout(()=>{vt(new Error("unsupported_event"))},C);Re={messageChannel:V,onMessage(zs){const au=zs;if(au.data.eventId===Zt)switch(au.data.status){case"ack":clearTimeout(Vn),oe=setTimeout(()=>{vt(new Error("timeout"))},3e3);break;case"done":clearTimeout(oe),tt(au.data.response);break;default:clearTimeout(Vn),clearTimeout(oe),vt(new Error("invalid_response"))}}},R.handlers.add(Re),V.port1.addEventListener("message",Re.onMessage),R.target.postMessage({eventType:m,eventId:Zt,data:y},[V.port2])}).finally(()=>{Re&&R.removeMessageHandler(Re)})})()}}function qn(){return window}function ni(){return typeof qn().WorkerGlobalScope<"u"&&"function"==typeof qn().importScripts}function ys(){return(ys=(0,h.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const al="firebaseLocalStorageDb",ll="firebaseLocalStorage",sa="fbase_key";class yo{constructor(m){this.request=m}toPromise(){return new Promise((m,y)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function oa(b,m){return b.transaction([ll],m?"readwrite":"readonly").objectStore(ll)}function Ql(){const b=indexedDB.open(al,1);return new Promise((m,y)=>{b.addEventListener("error",()=>{y(b.error)}),b.addEventListener("upgradeneeded",()=>{const C=b.result;try{C.createObjectStore(ll,{keyPath:sa})}catch(R){y(R)}}),b.addEventListener("success",(0,h.Z)(function*(){const C=b.result;C.objectStoreNames.contains(ll)?m(C):(C.close(),yield function hd(){const b=indexedDB.deleteDatabase(al);return new yo(b).toPromise()}(),m(yield Ql()))}))})}function ul(b,m,y){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,h.Z)(function*(b,m,y){const C=oa(b,!0).put({[sa]:m,value:y});return new yo(C).toPromise()})).apply(this,arguments)}function aa(){return(aa=(0,h.Z)(function*(b,m){const y=oa(b,!1).get(m),C=yield new yo(y).toPromise();return void 0===C?null:C.value})).apply(this,arguments)}function Jl(b,m){const y=oa(b,!0).delete(m);return new yo(y).toPromise()}const ua=(()=>{class b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,h.Z)(function*(){return y.db||(y.db=yield Ql()),y.db})()}_withRetries(y){var C=this;return(0,h.Z)(function*(){let R=0;for(;;)try{const V=yield C._openDb();return yield y(V)}catch(V){if(R++>3)throw V;C.db&&(C.db.close(),C.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,h.Z)(function*(){return ni()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,h.Z)(function*(){y.receiver=ol._getInstance(function Yl(){return ni()?self:null}()),y.receiver._subscribe("keyChanged",function(){var C=(0,h.Z)(function*(R,V){return{keyProcessed:(yield y._poll()).includes(V.key)}});return function(R,V){return C.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var C=(0,h.Z)(function*(R,V){return["keyChanged"]});return function(R,V){return C.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,h.Z)(function*(){var C,R;if(y.activeServiceWorker=yield function dd(){return ys.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new zh(y.activeServiceWorker);const V=yield y.sender._send("ping",{},800);!V||(null===(C=V[0])||void 0===C?void 0:C.fulfilled)&&(null===(R=V[0])||void 0===R?void 0:R.value.includes("keyChanged"))&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var C=this;return(0,h.Z)(function*(){if(C.sender&&C.activeServiceWorker&&function ec(){var b;return(null===(b=navigator?.serviceWorker)||void 0===b?void 0:b.controller)||null}()===C.activeServiceWorker)try{yield C.sender._send("keyChanged",{key:y},C.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const y=yield Ql();return yield ul(y,_s,"1"),yield Jl(y,_s),!0}catch{}return!1})()}_withPendingWrite(y){var C=this;return(0,h.Z)(function*(){C.pendingWrites++;try{yield y()}finally{C.pendingWrites--}})()}_set(y,C){var R=this;return(0,h.Z)(function*(){return R._withPendingWrite((0,h.Z)(function*(){return yield R._withRetries(V=>ul(V,y,C)),R.localCache[y]=C,R.notifyServiceWorker(y)}))})()}_get(y){var C=this;return(0,h.Z)(function*(){const R=yield C._withRetries(V=>function qh(b,m){return aa.apply(this,arguments)}(V,y));return C.localCache[y]=R,R})()}_remove(y){var C=this;return(0,h.Z)(function*(){return C._withPendingWrite((0,h.Z)(function*(){return yield C._withRetries(R=>Jl(R,y)),delete C.localCache[y],C.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,h.Z)(function*(){const C=yield y._withRetries(oe=>{const Re=oa(oe,!1).getAll();return new yo(Re).toPromise()});if(!C)return[];if(0!==y.pendingWrites)return[];const R=[],V=new Set;for(const{fbase_key:oe,value:Re}of C)V.add(oe),JSON.stringify(y.localCache[oe])!==JSON.stringify(Re)&&(y.notifyListeners(oe,Re),R.push(oe));for(const oe of Object.keys(y.localCache))y.localCache[oe]&&!V.has(oe)&&(y.notifyListeners(oe,null),R.push(oe));return R})()}notifyListeners(y,C){this.localCache[y]=C;const R=this.listeners[y];if(R)for(const V of Array.from(R))V(C)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,C){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(C)}_removeListener(y,C){this.listeners[y]&&(this.listeners[y].delete(C),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return b.type="LOCAL",b})();function Wh(b,m){return jt(b,"POST","/v2/accounts/mfaSignIn:start",Kt(b,m))}function Vr(){return(Vr=(0,h.Z)(function*(b){return(yield jt(b,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function vo(b){return new Promise((m,y)=>{const C=document.createElement("script");C.setAttribute("src",b),C.onload=m,C.onerror=R=>{const V=Ve("internal-error");V.customData=R,y(V)},C.type="text/javascript",C.charset="UTF-8",function da(){var b,m;return null!==(m=null===(b=document.getElementsByTagName("head"))||void 0===b?void 0:b[0])&&void 0!==m?m:document}().appendChild(C)})}function ha(b){return`__${b}${Math.floor(1e6*Math.random())}`}const Qi=1e12;class fd{constructor(m){this.auth=m,this.counter=Qi,this._widgets=new Map}render(m,y){const C=this.counter;return this._widgets.set(C,new xn(m,this.auth.name,y||{})),this.counter++,C}reset(m){var y;const C=m||Qi;null===(y=this._widgets.get(C))||void 0===y||y.delete(),this._widgets.delete(C)}getResponse(m){var y;return(null===(y=this._widgets.get(m||Qi))||void 0===y?void 0:y.getResponse())||""}execute(m){var y=this;return(0,h.Z)(function*(){var C;return null===(C=y._widgets.get(m||Qi))||void 0===C||C.execute(),""})()}}class xn{constructor(m,y,C){this.params=C,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const R="string"==typeof m?document.getElementById(m):m;le(R,"argument-error",{appName:y}),this.container=R,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Jp(b){const m=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let C=0;C<b;C++)m.push(y.charAt(Math.floor(Math.random()*y.length)));return m.join("")}(50);const{callback:m,"expired-callback":y}=this.params;if(m)try{m(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Kh=ha("rcb"),j0=new Qe(3e4,6e4);class k_{constructor(){var m;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(m=qn().grecaptcha)||void 0===m||!m.render)}load(m,y=""){return le(function Zh(b){return b.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(b)}(y),m,"argument-error"),this.shouldResolveImmediately(y)?Promise.resolve(qn().grecaptcha):new Promise((C,R)=>{const V=qn().setTimeout(()=>{R(Ve(m,"network-request-failed"))},j0.get());qn()[Kh]=()=>{qn().clearTimeout(V),delete qn()[Kh];const Re=qn().grecaptcha;if(!Re)return void R(Ve(m,"internal-error"));const tt=Re.render;Re.render=(vt,Zt)=>{const Vn=tt(vt,Zt);return this.counter++,Vn},this.hostLanguage=y,C(Re)},vo(`https://www.google.com/recaptcha/api.js??${(0,j.xO)({onload:Kh,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(V),R(Ve(m,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){var y;return!(null===(y=qn().grecaptcha)||void 0===y||!y.render)&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class $0{load(m){return(0,h.Z)(function*(){return new fd(m)})()}clearedOneInstance(){}}const Us="recaptcha",N_={theme:"light",type:"image"};class Xp{constructor(m,y=Object.assign({},N_),C){this.parameters=y,this.type=Us,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ct(C),this.isInvisible="invisible"===this.parameters.size,le(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const R="string"==typeof m?document.getElementById(m):m;le(R,this.auth,"argument-error"),this.container=R,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new $0:new k_,this.validateStartingState()}verify(){var m=this;return(0,h.Z)(function*(){m.assertNotDestroyed();const y=yield m.render(),C=m.getAssertedRecaptcha();return C.getResponse(y)||new Promise(V=>{const oe=Re=>{!Re||(m.tokenChangeListeners.delete(oe),V(Re))};m.tokenChangeListeners.add(oe),m.isInvisible&&C.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){le(!this.parameters.sitekey,this.auth,"argument-error"),le(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),le(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return y=>{if(this.tokenChangeListeners.forEach(C=>C(y)),"function"==typeof m)m(y);else if("string"==typeof m){const C=qn()[m];"function"==typeof C&&C(y)}}}assertNotDestroyed(){le(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,h.Z)(function*(){if(yield m.init(),!m.widgetId){let y=m.container;if(!m.isInvisible){const C=document.createElement("div");y.appendChild(C),y=C}m.widgetId=m.getAssertedRecaptcha().render(y,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,h.Z)(function*(){le($e()&&!ni(),m.auth,"internal-error"),yield function yr(){let b=null;return new Promise(m=>{"complete"!==document.readyState?(b=()=>m(),window.addEventListener("load",b)):m()}).catch(m=>{throw b&&window.removeEventListener("load",b),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const y=yield function Xl(b){return Vr.apply(this,arguments)}(m.auth);le(y,m.auth,"internal-error"),m.parameters.sitekey=y})()}getAssertedRecaptcha(){return le(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class bo{constructor(m,y){this.verificationId=m,this.onConfirmation=y}confirm(m){const y=Go._fromVerification(this.verificationId,m);return this.onConfirmation(y)}}function gi(b,m,y){return pd.apply(this,arguments)}function pd(){return(pd=(0,h.Z)(function*(b,m,y){const C=Ct(b),R=yield Eo(C,m,(0,j.m9)(y));return new bo(R,V=>qa(C,V))})).apply(this,arguments)}function wo(b,m,y){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,h.Z)(function*(b,m,y){const C=(0,j.m9)(b);yield Ki(!1,C,"phone");const R=yield Eo(C.auth,m,(0,j.m9)(y));return new bo(R,V=>Pt(C,V))})).apply(this,arguments)}function Ji(b,m,y){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,h.Z)(function*(b,m,y){const C=(0,j.m9)(b),R=yield Eo(C.auth,m,(0,j.m9)(y));return new bo(R,V=>Yp(C,V))})).apply(this,arguments)}function Eo(b,m,y){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,h.Z)(function*(b,m,y){var C;const R=yield y.verify();try{let V;if(le("string"==typeof R,b,"argument-error"),le(y.type===Us,b,"argument-error"),V="string"==typeof m?{phoneNumber:m}:m,"session"in V){const oe=V.session;if("phoneNumber"in V)return le("enroll"===oe.type,b,"internal-error"),(yield zn(b,{idToken:oe.credential,phoneEnrollmentInfo:{phoneNumber:V.phoneNumber,recaptchaToken:R}})).phoneSessionInfo.sessionInfo;{le("signin"===oe.type,b,"internal-error");const Re=(null===(C=V.multiFactorHint)||void 0===C?void 0:C.uid)||V.multiFactorUid;return le(Re,b,"missing-multi-factor-info"),(yield Wh(b,{mfaPendingCredential:oe.credential,mfaEnrollmentId:Re,phoneSignInInfo:{recaptchaToken:R}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:oe}=yield zp(b,{phoneNumber:V.phoneNumber,recaptchaToken:R});return oe}}finally{y._reset()}})).apply(this,arguments)}function cl(b,m){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,h.Z)(function*(b,m){yield $l((0,j.m9)(b),m)})).apply(this,arguments)}let eg=(()=>{class b{constructor(y){this.providerId=b.PROVIDER_ID,this.auth=Ct(y)}verifyPhoneNumber(y,C){return Eo(this.auth,y,(0,j.m9)(C))}static credential(y,C){return Go._fromVerification(y,C)}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:C,temporaryProof:R}=y;return C&&R?Go._fromTokenResponse(C,R):null}}return b.PROVIDER_ID="phone",b.PHONE_SIGN_IN_METHOD="phone",b})();function dl(b,m){return m?ie(m):(le(b._popupRedirectResolver,b,"argument-error"),b._popupRedirectResolver)}class hl extends Xr{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return fo(m,this._buildIdpRequest())}_linkToIdToken(m,y){return fo(m,this._buildIdpRequest(y))}_getReauthenticationResolver(m){return fo(m,this._buildIdpRequest())}_buildIdpRequest(m){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(y.idToken=m),y}}function gd(b){return $u(b.auth,new hl(b),b.bypassAuthState)}function ri(b){const{auth:m,user:y}=b;return le(y,m,"internal-error"),Gl(y,new hl(b),b.bypassAuthState)}function eu(b){return zr.apply(this,arguments)}function zr(){return(zr=(0,h.Z)(function*(b){const{auth:m,user:y}=b;return le(y,m,"internal-error"),$l(y,new hl(b),b.bypassAuthState)})).apply(this,arguments)}class rc{constructor(m,y,C,R,V=!1){this.auth=m,this.resolver=C,this.user=R,this.bypassAuthState=V,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var m=this;return new Promise(function(){var y=(0,h.Z)(function*(C,R){m.pendingPromise={resolve:C,reject:R};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(V){m.reject(V)}});return function(C,R){return y.apply(this,arguments)}}())}onAuthEvent(m){var y=this;return(0,h.Z)(function*(){const{urlResponse:C,sessionId:R,postBody:V,tenantId:oe,error:Re,type:tt}=m;if(Re)return void y.reject(Re);const vt={auth:y.auth,requestUri:C,sessionId:R,tenantId:oe||void 0,postBody:V||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(tt)(vt))}catch(Zt){y.reject(Zt)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return gd;case"linkViaPopup":case"linkViaRedirect":return eu;case"reauthViaPopup":case"reauthViaRedirect":return ri;default:st(this.auth,"internal-error")}}resolve(m){Ee(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){Ee(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Qn=new Qe(2e3,1e4);function qr(b,m,y){return xi.apply(this,arguments)}function xi(){return(xi=(0,h.Z)(function*(b,m,y){const C=Ct(b);Ae(b,m,Dr);const R=dl(C,y);return new tu(C,"signInViaPopup",m,R).executeNotNull()})).apply(this,arguments)}function pn(b,m,y){return ut.apply(this,arguments)}function ut(){return(ut=(0,h.Z)(function*(b,m,y){const C=(0,j.m9)(b);Ae(C.auth,m,Dr);const R=dl(C.auth,y);return new tu(C.auth,"reauthViaPopup",m,R,C).executeNotNull()})).apply(this,arguments)}function O_(b,m,y){return Yh.apply(this,arguments)}function Yh(){return(Yh=(0,h.Z)(function*(b,m,y){const C=(0,j.m9)(b);Ae(C.auth,m,Dr);const R=dl(C.auth,y);return new tu(C.auth,"linkViaPopup",m,R,C).executeNotNull()})).apply(this,arguments)}let tu=(()=>{class b extends rc{constructor(y,C,R,V,oe){super(y,C,V,oe),this.provider=R,this.authWindow=null,this.pollId=null,b.currentPopupAction&&b.currentPopupAction.cancel(),b.currentPopupAction=this}executeNotNull(){var y=this;return(0,h.Z)(function*(){const C=yield y.execute();return le(C,y.auth,"internal-error"),C})()}onExecution(){var y=this;return(0,h.Z)(function*(){Ee(1===y.filter.length,"Popup operations only handle one event");const C=ia();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],C),y.authWindow.associatedEvent=C,y.resolver._originValidation(y.auth).catch(R=>{y.reject(R)}),y.resolver._isIframeWebStorageSupported(y.auth,R=>{R||y.reject(Ve(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(Ve(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,b.currentPopupAction=null}pollUserCancellation(){const y=()=>{var C,R;this.pollId=null!==(R=null===(C=this.authWindow)||void 0===C?void 0:C.window)&&void 0!==R&&R.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ve(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(y,Qn.get())};y()}}return b.currentPopupAction=null,b})();const js=new Map;class pa extends rc{constructor(m,y,C=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,C),this.eventId=null}execute(){var m=()=>super.execute,y=this;return(0,h.Z)(function*(){let C=js.get(y.auth._key());if(!C){try{const V=(yield function sc(b,m){return ga.apply(this,arguments)}(y.resolver,y.auth))?yield m().call(y):null;C=()=>Promise.resolve(V)}catch(R){C=()=>Promise.reject(R)}js.set(y.auth._key(),C)}return y.bypassAuthState||js.set(y.auth._key(),()=>Promise.resolve(null)),C()})()}onAuthEvent(m){var y=()=>super.onAuthEvent,C=this;return(0,h.Z)(function*(){if("signInViaRedirect"===m.type)return y().call(C,m);if("unknown"!==m.type){if(m.eventId){const R=yield C.auth._redirectUserForId(m.eventId);if(R)return C.user=R,y().call(C,m);C.resolve(null)}}else C.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function ga(){return(ga=(0,h.Z)(function*(b,m){const y=Co(m),C=nu(b);if(!(yield C._isAvailable()))return!1;const R="true"===(yield C._get(y));return yield C._remove(y),R})).apply(this,arguments)}function $s(b,m){return md.apply(this,arguments)}function md(){return(md=(0,h.Z)(function*(b,m){return nu(b)._set(Co(m),"true")})).apply(this,arguments)}function ma(){js.clear()}function _d(b,m){js.set(b._key(),m)}function nu(b){return ie(b._redirectPersistence)}function Co(b){return fn("pendingRedirect",b.config.apiKey,b.name)}function tg(b,m,y){return function or(b,m,y){return yd.apply(this,arguments)}(b,m,y)}function yd(){return(yd=(0,h.Z)(function*(b,m,y){const C=Ct(b);Ae(b,m,Dr);const R=dl(C,y);return yield $s(R,C),R._openRedirect(C,m,"signInViaRedirect")})).apply(this,arguments)}function T(b,m,y){return function S(b,m,y){return k.apply(this,arguments)}(b,m,y)}function k(){return(k=(0,h.Z)(function*(b,m,y){const C=(0,j.m9)(b);Ae(C.auth,m,Dr);const R=dl(C.auth,y);yield $s(R,C.auth);const V=yield $t(C);return R._openRedirect(C.auth,m,"reauthViaRedirect",V)})).apply(this,arguments)}function H(b,m,y){return function re(b,m,y){return ge.apply(this,arguments)}(b,m,y)}function ge(){return(ge=(0,h.Z)(function*(b,m,y){const C=(0,j.m9)(b);Ae(C.auth,m,Dr);const R=dl(C.auth,y);yield Ki(!1,C,m.providerId),yield $s(R,C.auth);const V=yield $t(C);return R._openRedirect(C.auth,m,"linkViaRedirect",V)})).apply(this,arguments)}function Fe(b,m){return Je.apply(this,arguments)}function Je(){return(Je=(0,h.Z)(function*(b,m){return yield Ct(b)._initializationPromise,Tt(b,m,!1)})).apply(this,arguments)}function Tt(b,m){return kt.apply(this,arguments)}function kt(){return(kt=(0,h.Z)(function*(b,m,y=!1){const C=Ct(b),R=dl(C,m),oe=yield new pa(C,R,y).execute();return oe&&!y&&(delete oe.user._redirectEventId,yield C._persistUserIfCurrent(oe.user),yield C._setRedirectUser(null,m)),oe})).apply(this,arguments)}function $t(b){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,h.Z)(function*(b){const m=ia(`${b.uid}:::`);return b._redirectEventId=m,yield b.auth._setRedirectUser(b),yield b.auth._persistUserIfCurrent(b),m})).apply(this,arguments)}class Mr{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let y=!1;return this.consumers.forEach(C=>{this.isEventForConsumer(m,C)&&(y=!0,this.sendToConsumer(m,C),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function gl(b){switch(b.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pl(b);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=m,y=!0)),y}sendToConsumer(m,y){var C;if(m.error&&!pl(m)){const R=(null===(C=m.error.code)||void 0===C?void 0:C.split("auth/")[1])||"internal-error";y.onError(Ve(this.auth,R))}else y.onAuthEvent(m)}isEventForConsumer(m,y){const C=null===y.eventId||!!m.eventId&&m.eventId===y.eventId;return y.filter.includes(m.type)&&C}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(fl(m))}saveEventToCache(m){this.cachedEventUids.add(fl(m)),this.lastProcessedEventTime=Date.now()}}function fl(b){return[b.type,b.eventId,b.sessionId,b.tenantId].filter(m=>m).join("-")}function pl({type:b,error:m}){return"unknown"===b&&"auth/no-auth-event"===m?.code}function _a(b){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,h.Z)(function*(b,m={}){return jt(b,"GET","/v1/projects",m)})).apply(this,arguments)}const ru=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ml=/^https?/;function oc(){return(oc=(0,h.Z)(function*(b){if(b.config.emulator)return;const{authorizedDomains:m}=yield _a(b);for(const y of m)try{if(lA(y))return}catch{}st(b,"unauthorized-domain")})).apply(this,arguments)}function lA(b){const m=je(),{protocol:y,hostname:C}=new URL(m);if(b.startsWith("chrome-extension://")){const oe=new URL(b);return""===oe.hostname&&""===C?"chrome-extension:"===y&&b.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===y&&oe.hostname===C}if(!ml.test(y))return!1;if(ru.test(b))return C===b;const R=b.replace(/\./g,"\\.");return new RegExp("^(.+\\."+R+"|"+R+")$","i").test(C)}const G0=new Qe(3e4,6e4);function P_(){const b=qn().___jsl;if(b?.H)for(const m of Object.keys(b.H))if(b.H[m].r=b.H[m].r||[],b.H[m].L=b.H[m].L||[],b.H[m].r=[...b.H[m].L],b.CP)for(let y=0;y<b.CP.length;y++)b.CP[y]=null}let iu=null;function F_(b){return iu=iu||function z0(b){return new Promise((m,y)=>{var C,R,V;function oe(){P_(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{P_(),y(Ve(b,"network-request-failed"))},timeout:G0.get()})}if(null!==(R=null===(C=qn().gapi)||void 0===C?void 0:C.iframes)&&void 0!==R&&R.Iframe)m(gapi.iframes.getContext());else{if(null===(V=qn().gapi)||void 0===V||!V.load){const Re=ha("iframefcb");return qn()[Re]=()=>{gapi.load?oe():y(Ve(b,"network-request-failed"))},vo(`https://apis.google.com/js/api.js?onload=${Re}`).catch(tt=>y(tt))}oe()}}).catch(m=>{throw iu=null,m})}(b),iu}const q0=new Qe(5e3,15e3),V_={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ng(b){const m=b.config;le(m.authDomain,b,"auth-domain-config-required");const y=m.emulator?In(m,"emulator/auth/iframe"):`https://${b.config.authDomain}/__/auth/iframe`,C={apiKey:m.apiKey,appName:b.name,v:O.SDK_VERSION},R=cA.get(b.config.apiHost);R&&(C.eid=R);const V=b._getFrameworks();return V.length&&(C.fw=V.join(",")),`${y}?${(0,j.xO)(C).slice(1)}`}function Qh(){return Qh=(0,h.Z)(function*(b){const m=yield F_(b),y=qn().gapi;return le(y,b,"internal-error"),m.open({where:document.body,url:ng(b),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:V_,dontclear:!0},C=>new Promise(function(){var R=(0,h.Z)(function*(V,oe){yield C.restyle({setHideOnLeave:!1});const Re=Ve(b,"network-request-failed"),tt=qn().setTimeout(()=>{oe(Re)},q0.get());function vt(){qn().clearTimeout(tt),V(C)}C.ping(vt).then(vt,()=>{oe(Re)})});return function(V,oe){return R.apply(this,arguments)}}()))}),Qh.apply(this,arguments)}const Jh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Y0{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function vd(b,m,y,C,R,V){le(b.config.authDomain,b,"auth-domain-config-required"),le(b.config.apiKey,b,"invalid-api-key");const oe={apiKey:b.config.apiKey,appName:b.name,authType:y,redirectUrl:C,v:O.SDK_VERSION,eventId:R};if(m instanceof Dr){m.setDefaultLanguage(b.languageCode),oe.providerId=m.providerId||"",(0,j.xb)(m.getCustomParameters())||(oe.customParameters=JSON.stringify(m.getCustomParameters()));for(const[tt,vt]of Object.entries(V||{}))oe[tt]=vt}if(m instanceof qo){const tt=m.getScopes().filter(vt=>""!==vt);tt.length>0&&(oe.scopes=tt.join(","))}b.tenantId&&(oe.tid=b.tenantId);const Re=oe;for(const tt of Object.keys(Re))void 0===Re[tt]&&delete Re[tt];return`${function su({config:b}){return b.emulator?In(b,"emulator/auth/handler"):`https://${b.authDomain}/__/auth/handler`}(b)}?${(0,j.xO)(Re).slice(1)}`}const sg="webStorageSupport",H_=class Q0{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ls,this._completeRedirectFn=Tt,this._overrideRedirectResult=_d}_openPopup(m,y,C,R){var V=this;return(0,h.Z)(function*(){var oe;Ee(null===(oe=V.eventManagers[m._key()])||void 0===oe?void 0:oe.manager,"_initialize() not called before _openPopup()");const Re=vd(m,y,C,je(),R);return function Xh(b,m,y,C=500,R=600){const V=Math.max((window.screen.availHeight-R)/2,0).toString(),oe=Math.max((window.screen.availWidth-C)/2,0).toString();let Re="";const tt=Object.assign(Object.assign({},Jh),{width:C.toString(),height:R.toString(),top:V,left:oe}),vt=(0,j.z$)().toLowerCase();y&&(Re=Ie(vt)?"_blank":y),G(vt)&&(m=m||"http://localhost",tt.scrollbars="yes");const Zt=Object.entries(tt).reduce((zs,[au,ag])=>`${zs}${au}=${ag},`,"");if(function On(b=(0,j.z$)()){var m;return lt(b)&&!(null===(m=window.navigator)||void 0===m||!m.standalone)}(vt)&&"_self"!==Re)return function ig(b,m){const y=document.createElement("a");y.href=b,y.target=m;const C=document.createEvent("MouseEvent");C.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(C)}(m||"",Re),new Y0(null);const Vn=window.open(m||"",Re,Zt);le(Vn,b,"popup-blocked");try{Vn.focus()}catch{}return new Y0(Vn)}(m,Re,ia())})()}_openRedirect(m,y,C,R){var V=this;return(0,h.Z)(function*(){return yield V._originValidation(m),function cd(b){qn().location.href=b}(vd(m,y,C,je(),R)),new Promise(()=>{})})()}_initialize(m){const y=m._key();if(this.eventManagers[y]){const{manager:R,promise:V}=this.eventManagers[y];return R?Promise.resolve(R):(Ee(V,"If manager is not set, promise should be"),V)}const C=this.initAndGetManager(m);return this.eventManagers[y]={promise:C},C.catch(()=>{delete this.eventManagers[y]}),C}initAndGetManager(m){var y=this;return(0,h.Z)(function*(){const C=yield function W0(b){return Qh.apply(this,arguments)}(m),R=new Mr(m);return C.register("authEvent",V=>(le(V?.authEvent,m,"invalid-auth-event"),{status:R.onEvent(V.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[m._key()]={manager:R},y.iframes[m._key()]=C,R})()}_isIframeWebStorageSupported(m,y){this.iframes[m._key()].send(sg,{type:sg},R=>{var V;const oe=null===(V=R?.[0])||void 0===V?void 0:V[sg];void 0!==oe&&y(!!oe),st(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const y=m._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function ya(b){return oc.apply(this,arguments)}(m)),this.originValidationPromises[y]}get _shouldInitProactively(){return vn()||q()||lt()}};class og extends class J0{constructor(m){this.factorId=m}_process(m,y,C){switch(y.type){case"enroll":return this._finalizeEnroll(m,y.credential,C);case"signin":return this._finalizeSignIn(m,y.credential);default:return pe("unexpected MultiFactorSessionType")}}}{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new og(m)}_finalizeEnroll(m,y,C){return function Wl(b,m){return jt(b,"POST","/v2/accounts/mfaEnrollment:finalize",Kt(b,m))}(m,{idToken:y,displayName:C,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,y){return function ca(b,m){return jt(b,"POST","/v2/accounts/mfaSignIn:finalize",Kt(b,m))}(m,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let va=(()=>{class b{constructor(){}static assertion(y){return og._fromCredential(y)}}return b.FACTOR_ID="phone",b})();var ou="@firebase/auth";class X0{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var y=this;return(0,h.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const y=this.auth.onIdTokenChanged(C=>{var R;m((null===(R=C)||void 0===R?void 0:R.stsTokenManager.accessToken)||null)});this.internalListeners.set(m,y),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const y=this.internalListeners.get(m);!y||(this.internalListeners.delete(m),y(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}!function tE(b){(0,O._registerComponent)(new be.wA("auth",(m,{options:y})=>{const C=m.getProvider("app").getImmediate(),R=m.getProvider("heartbeat"),{apiKey:V,authDomain:oe}=C.options;return((Re,tt)=>{le(V&&!V.includes(":"),"invalid-api-key",{appName:Re.name}),le(!oe?.includes(":"),"argument-error",{appName:Re.name});const vt={apiKey:V,authDomain:oe,clientPlatform:b,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Rn(b)},Zt=new so(Re,tt,vt);return function de(b,m){const y=m?.persistence||[],C=(Array.isArray(y)?y:[y]).map(ie);m?.errorMap&&b._updateErrorMap(m.errorMap),b._initializeWithPersistence(C,m?.popupRedirectResolver)}(Zt,y),Zt})(C,R)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,y,C)=>{m.getProvider("auth-internal").initialize()})),(0,O._registerComponent)(new be.wA("auth-internal",m=>{const y=Ct(m.getProvider("auth").getImmediate());return new X0(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,O.registerVersion)(ou,"0.20.6",function eE(b){switch(b){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(b)),(0,O.registerVersion)(ou,"0.20.6","esm2017")}("Browser")},2090:(mt,ke,U)=>{U.d(ke,{$s:()=>Lr,BH:()=>qe,DV:()=>jt,Dv:()=>mr,G6:()=>le,GJ:()=>nn,L:()=>_e,LL:()=>je,Mn:()=>Ae,Pz:()=>Wt,Sg:()=>Le,UG:()=>Te,UI:()=>ro,US:()=>be,Wj:()=>Mn,Yr:()=>Ze,ZB:()=>K,ZR:()=>de,b$:()=>st,cI:()=>tn,d:()=>Ve,dS:()=>_t,eu:()=>Ee,g5:()=>O,gK:()=>Wi,gQ:()=>Si,h$:()=>he,hl:()=>pe,hu:()=>j,jU:()=>ve,lb:()=>Tn,m9:()=>Yt,ne:()=>qi,p$:()=>W,pd:()=>Hn,r3:()=>Kt,ru:()=>it,tV:()=>Ce,uI:()=>ct,ug:()=>yt,vZ:()=>Ir,w1:()=>Oe,w9:()=>un,xO:()=>zi,xb:()=>Cr,z$:()=>Se,zI:()=>te,zd:()=>Qr});const j=function(ee,z){if(!ee)throw O(z)},O=function(ee){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+ee)},ce=function(ee){const z=[];let $=0;for(let Y=0;Y<ee.length;Y++){let Q=ee.charCodeAt(Y);Q<128?z[$++]=Q:Q<2048?(z[$++]=Q>>6|192,z[$++]=63&Q|128):55296==(64512&Q)&&Y+1<ee.length&&56320==(64512&ee.charCodeAt(Y+1))?(Q=65536+((1023&Q)<<10)+(1023&ee.charCodeAt(++Y)),z[$++]=Q>>18|240,z[$++]=Q>>12&63|128,z[$++]=Q>>6&63|128,z[$++]=63&Q|128):(z[$++]=Q>>12|224,z[$++]=Q>>6&63|128,z[$++]=63&Q|128)}return z},be={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ee,z){if(!Array.isArray(ee))throw Error("encodeByteArray takes an array as a parameter");this.init_();const $=z?this.byteToCharMapWebSafe_:this.byteToCharMap_,Y=[];for(let Q=0;Q<ee.length;Q+=3){const xe=ee[Q],Ke=Q+1<ee.length,It=Ke?ee[Q+1]:0,gn=Q+2<ee.length,fn=gn?ee[Q+2]:0;let G=(15&It)<<2|fn>>6,q=63&fn;gn||(q=64,Ke||(G=64)),Y.push($[xe>>2],$[(3&xe)<<4|It>>4],$[G],$[q])}return Y.join("")},encodeString(ee,z){return this.HAS_NATIVE_SUPPORT&&!z?btoa(ee):this.encodeByteArray(ce(ee),z)},decodeString(ee,z){return this.HAS_NATIVE_SUPPORT&&!z?atob(ee):function(ee){const z=[];let $=0,Y=0;for(;$<ee.length;){const Q=ee[$++];if(Q<128)z[Y++]=String.fromCharCode(Q);else if(Q>191&&Q<224){const xe=ee[$++];z[Y++]=String.fromCharCode((31&Q)<<6|63&xe)}else if(Q>239&&Q<365){const gn=((7&Q)<<18|(63&ee[$++])<<12|(63&ee[$++])<<6|63&ee[$++])-65536;z[Y++]=String.fromCharCode(55296+(gn>>10)),z[Y++]=String.fromCharCode(56320+(1023&gn))}else{const xe=ee[$++],Ke=ee[$++];z[Y++]=String.fromCharCode((15&Q)<<12|(63&xe)<<6|63&Ke)}}return z.join("")}(this.decodeStringToByteArray(ee,z))},decodeStringToByteArray(ee,z){this.init_();const $=z?this.charToByteMapWebSafe_:this.charToByteMap_,Y=[];for(let Q=0;Q<ee.length;){const xe=$[ee.charAt(Q++)],It=Q<ee.length?$[ee.charAt(Q)]:0;++Q;const fn=Q<ee.length?$[ee.charAt(Q)]:64;++Q;const se=Q<ee.length?$[ee.charAt(Q)]:64;if(++Q,null==xe||null==It||null==fn||null==se)throw Error();Y.push(xe<<2|It>>4),64!==fn&&(Y.push(It<<4&240|fn>>2),64!==se&&Y.push(fn<<6&192|se))}return Y},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ee=0;ee<this.ENCODED_VALS.length;ee++)this.byteToCharMap_[ee]=this.ENCODED_VALS.charAt(ee),this.charToByteMap_[this.byteToCharMap_[ee]]=ee,this.byteToCharMapWebSafe_[ee]=this.ENCODED_VALS_WEBSAFE.charAt(ee),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ee]]=ee,ee>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ee)]=ee,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ee)]=ee)}}},he=function(ee){const z=ce(ee);return be.encodeByteArray(z,!0)},_e=function(ee){return he(ee).replace(/\./g,"")},Ce=function(ee){try{return be.decodeString(ee,!0)}catch(z){console.error("base64Decode failed: ",z)}return null};function W(ee){return K(void 0,ee)}function K(ee,z){if(!(z instanceof Object))return z;switch(z.constructor){case Date:return new Date(z.getTime());case Object:void 0===ee&&(ee={});break;case Array:ee=[];break;default:return z}for(const $ in z)!z.hasOwnProperty($)||!ne($)||(ee[$]=K(ee[$],z[$]));return ee}function ne(ee){return"__proto__"!==ee}class qe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((z,$)=>{this.resolve=z,this.reject=$})}wrapCallback(z){return($,Y)=>{$?this.reject($):this.resolve(Y),"function"==typeof z&&(this.promise.catch(()=>{}),1===z.length?z($):z($,Y))}}}function Le(ee,z){if(ee.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Y=z||"demo-project",Q=ee.iat||0,xe=ee.sub||ee.user_id;if(!xe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ke=Object.assign({iss:`https://securetoken.google.com/${Y}`,aud:Y,iat:Q,exp:Q+3600,auth_time:Q,sub:xe,user_id:xe,firebase:{sign_in_provider:"custom",identities:{}}},ee);return[_e(JSON.stringify({alg:"none",type:"JWT"})),_e(JSON.stringify(Ke)),""].join(".")}function Se(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ct(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Se())}function Te(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ve(){return"object"==typeof self&&self.self===self}function it(){const ee="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ee&&void 0!==ee.id}function st(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ve(){return Se().indexOf("Electron/")>=0}function Oe(){const ee=Se();return ee.indexOf("MSIE ")>=0||ee.indexOf("Trident/")>=0}function Ae(){return Se().indexOf("MSAppHost/")>=0}function Ze(){return!1}function le(){return!Te()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pe(){return"object"==typeof indexedDB}function Ee(){return new Promise((ee,z)=>{try{let $=!0;const Y="validate-browser-context-for-indexeddb-analytics-module",Q=self.indexedDB.open(Y);Q.onsuccess=()=>{Q.result.close(),$||self.indexedDB.deleteDatabase(Y),ee(!0)},Q.onupgradeneeded=()=>{$=!1},Q.onerror=()=>{var xe;z((null===(xe=Q.error)||void 0===xe?void 0:xe.message)||"")}}catch($){z($)}})}function te(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class de extends Error{constructor(z,$,Y){super($),this.code=z,this.customData=Y,this.name="FirebaseError",Object.setPrototypeOf(this,de.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,je.prototype.create)}}class je{constructor(z,$,Y){this.service=z,this.serviceName=$,this.errors=Y}create(z,...$){const Y=$[0]||{},Q=`${this.service}/${z}`,xe=this.errors[z],Ke=xe?function $e(ee,z){return ee.replace(wt,($,Y)=>{const Q=z[Y];return null!=Q?String(Q):`<${Y}?>`})}(xe,Y):"Error";return new de(Q,`${this.serviceName}: ${Ke} (${Q}).`,Y)}}const wt=/\{\$([^}]+)}/g;function tn(ee){return JSON.parse(ee)}function Wt(ee){return JSON.stringify(ee)}const Qe=function(ee){let z={},$={},Y={},Q="";try{const xe=ee.split(".");z=tn(Ce(xe[0])||""),$=tn(Ce(xe[1])||""),Q=xe[2],Y=$.d||{},delete $.d}catch{}return{header:z,claims:$,data:Y,signature:Q}},un=function(ee){const $=Qe(ee).claims;return!!$&&"object"==typeof $&&$.hasOwnProperty("iat")},nn=function(ee){const z=Qe(ee).claims;return"object"==typeof z&&!0===z.admin};function Kt(ee,z){return Object.prototype.hasOwnProperty.call(ee,z)}function jt(ee,z){if(Object.prototype.hasOwnProperty.call(ee,z))return ee[z]}function Cr(ee){for(const z in ee)if(Object.prototype.hasOwnProperty.call(ee,z))return!1;return!0}function ro(ee,z,$){const Y={};for(const Q in ee)Object.prototype.hasOwnProperty.call(ee,Q)&&(Y[Q]=z.call($,ee[Q],Q,ee));return Y}function Ir(ee,z){if(ee===z)return!0;const $=Object.keys(ee),Y=Object.keys(z);for(const Q of $){if(!Y.includes(Q))return!1;const xe=ee[Q],Ke=z[Q];if(Nn(xe)&&Nn(Ke)){if(!Ir(xe,Ke))return!1}else if(xe!==Ke)return!1}for(const Q of Y)if(!$.includes(Q))return!1;return!0}function Nn(ee){return null!==ee&&"object"==typeof ee}function zi(ee){const z=[];for(const[$,Y]of Object.entries(ee))Array.isArray(Y)?Y.forEach(Q=>{z.push(encodeURIComponent($)+"="+encodeURIComponent(Q))}):z.push(encodeURIComponent($)+"="+encodeURIComponent(Y));return z.length?"&"+z.join("&"):""}function Qr(ee){const z={};return ee.replace(/^\?/,"").split("&").forEach(Y=>{if(Y){const[Q,xe]=Y.split("=");z[decodeURIComponent(Q)]=decodeURIComponent(xe)}}),z}function Hn(ee){const z=ee.indexOf("?");if(!z)return"";const $=ee.indexOf("#",z);return ee.substring(z,$>0?$:void 0)}class Si{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let z=1;z<this.blockSize;++z)this.pad_[z]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(z,$){$||($=0);const Y=this.W_;if("string"==typeof z)for(let se=0;se<16;se++)Y[se]=z.charCodeAt($)<<24|z.charCodeAt($+1)<<16|z.charCodeAt($+2)<<8|z.charCodeAt($+3),$+=4;else for(let se=0;se<16;se++)Y[se]=z[$]<<24|z[$+1]<<16|z[$+2]<<8|z[$+3],$+=4;for(let se=16;se<80;se++){const G=Y[se-3]^Y[se-8]^Y[se-14]^Y[se-16];Y[se]=4294967295&(G<<1|G>>>31)}let fn,tr,Q=this.chain_[0],xe=this.chain_[1],Ke=this.chain_[2],It=this.chain_[3],gn=this.chain_[4];for(let se=0;se<80;se++){se<40?se<20?(fn=It^xe&(Ke^It),tr=1518500249):(fn=xe^Ke^It,tr=1859775393):se<60?(fn=xe&Ke|It&(xe|Ke),tr=2400959708):(fn=xe^Ke^It,tr=3395469782);const G=(Q<<5|Q>>>27)+fn+gn+tr+Y[se]&4294967295;gn=It,It=Ke,Ke=4294967295&(xe<<30|xe>>>2),xe=Q,Q=G}this.chain_[0]=this.chain_[0]+Q&4294967295,this.chain_[1]=this.chain_[1]+xe&4294967295,this.chain_[2]=this.chain_[2]+Ke&4294967295,this.chain_[3]=this.chain_[3]+It&4294967295,this.chain_[4]=this.chain_[4]+gn&4294967295}update(z,$){if(null==z)return;void 0===$&&($=z.length);const Y=$-this.blockSize;let Q=0;const xe=this.buf_;let Ke=this.inbuf_;for(;Q<$;){if(0===Ke)for(;Q<=Y;)this.compress_(z,Q),Q+=this.blockSize;if("string"==typeof z){for(;Q<$;)if(xe[Ke]=z.charCodeAt(Q),++Ke,++Q,Ke===this.blockSize){this.compress_(xe),Ke=0;break}}else for(;Q<$;)if(xe[Ke]=z[Q],++Ke,++Q,Ke===this.blockSize){this.compress_(xe),Ke=0;break}}this.inbuf_=Ke,this.total_+=$}digest(){const z=[];let $=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Q=this.blockSize-1;Q>=56;Q--)this.buf_[Q]=255&$,$/=256;this.compress_(this.buf_);let Y=0;for(let Q=0;Q<5;Q++)for(let xe=24;xe>=0;xe-=8)z[Y]=this.chain_[Q]>>xe&255,++Y;return z}}function qi(ee,z){const $=new ot(ee,z);return $.subscribe.bind($)}class ot{constructor(z,$){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=$,this.task.then(()=>{z(this)}).catch(Y=>{this.error(Y)})}next(z){this.forEachObserver($=>{$.next(z)})}error(z){this.forEachObserver($=>{$.error(z)}),this.close(z)}complete(){this.forEachObserver(z=>{z.complete()}),this.close()}subscribe(z,$,Y){let Q;if(void 0===z&&void 0===$&&void 0===Y)throw new Error("Missing Observer.");Q=function jn(ee,z){if("object"!=typeof ee||null===ee)return!1;for(const $ of z)if($ in ee&&"function"==typeof ee[$])return!0;return!1}(z,["next","error","complete"])?z:{next:z,error:$,complete:Y},void 0===Q.next&&(Q.next=yn),void 0===Q.error&&(Q.error=yn),void 0===Q.complete&&(Q.complete=yn);const xe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Q.error(this.finalError):Q.complete()}catch{}}),this.observers.push(Q),xe}unsubscribeOne(z){void 0===this.observers||void 0===this.observers[z]||(delete this.observers[z],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(z){if(!this.finalized)for(let $=0;$<this.observers.length;$++)this.sendOne($,z)}sendOne(z,$){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[z])try{$(this.observers[z])}catch(Y){typeof console<"u"&&console.error&&console.error(Y)}})}close(z){this.finalized||(this.finalized=!0,void 0!==z&&(this.finalError=z),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yn(){}const mr=function(ee,z,$,Y){let Q;if(Y<z?Q="at least "+z:Y>$&&(Q=0===$?"none":"no more than "+$),Q)throw new Error(ee+" failed: Was called with "+Y+(1===Y?" argument.":" arguments.")+" Expects "+Q+".")};function Wi(ee,z){return`${ee} failed: ${z} argument `}function Mn(ee,z,$,Y){if((!Y||$)&&"function"!=typeof $)throw new Error(Wi(ee,z)+"must be a valid function.")}function Tn(ee,z,$,Y){if((!Y||$)&&("object"!=typeof $||null===$))throw new Error(Wi(ee,z)+"must be a valid context object.")}const _t=function(ee){const z=[];let $=0;for(let Y=0;Y<ee.length;Y++){let Q=ee.charCodeAt(Y);if(Q>=55296&&Q<=56319){const xe=Q-55296;Y++,j(Y<ee.length,"Surrogate pair missing trail surrogate."),Q=65536+(xe<<10)+(ee.charCodeAt(Y)-56320)}Q<128?z[$++]=Q:Q<2048?(z[$++]=Q>>6|192,z[$++]=63&Q|128):Q<65536?(z[$++]=Q>>12|224,z[$++]=Q>>6&63|128,z[$++]=63&Q|128):(z[$++]=Q>>18|240,z[$++]=Q>>12&63|128,z[$++]=Q>>6&63|128,z[$++]=63&Q|128)}return z},yt=function(ee){let z=0;for(let $=0;$<ee.length;$++){const Y=ee.charCodeAt($);Y<128?z++:Y<2048?z+=2:Y>=55296&&Y<=56319?(z+=4,$++):z+=3}return z};function Lr(ee,z=1e3,$=2){const Y=z*Math.pow($,ee),Q=Math.round(.5*Y*(Math.random()-.5)*2);return Math.min(144e5,Y+Q)}function Yt(ee){return ee&&ee._delegate?ee._delegate:ee}},9589:(mt,ke,U)=>{var h=U(4650);let j=null;function O(){return j}const he=new h.OlP("DocumentToken");let _e=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Ce(){return(0,h.LFG)(K)}()},providedIn:"platform"}),n})();const W=new h.OlP("Location Initialized");let K=(()=>{class n extends _e{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){ne()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){ne()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(he))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function qe(){return new K((0,h.LFG)(he))}()},providedIn:"platform"}),n})();function ne(){return!!window.history.pushState}function Le(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Se(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ct(n){return n&&"?"!==n[0]?"?"+n:n}let Te=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(it)},providedIn:"root"}),n})();const ve=new h.OlP("appBaseHref");let it=(()=>{class n extends Te{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,h.f3M)(he).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Le(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ct(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){const u=this.prepareExternalUrl(i+ct(o));this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,o){const u=this.prepareExternalUrl(i+ct(o));this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(_e),h.LFG(ve,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),st=(()=>{class n extends Te{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Le(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let u=this.prepareExternalUrl(i+ct(o));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,o){let u=this.prepareExternalUrl(i+ct(o));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(_e),h.LFG(ve,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Ve=(()=>{class n{constructor(t){this._subject=new h.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=Se(Ze(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ct(r))}normalize(t){return n.stripTrailingSlash(function Ae(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ze(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ct(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ct(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=ct,n.joinWithSlash=Le,n.stripTrailingSlash=Se,n.\u0275fac=function(t){return new(t||n)(h.LFG(Te))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Oe(){return new Ve((0,h.LFG)(Te))}()},providedIn:"root"}),n})();function Ze(n){return n.replace(/\/index.html$/,"")}function Ul(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}let $n=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Nh,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){nr("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){nr("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Nh{constructor(){this.$implicit=null,this.ngIf=null}}function nr(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.AaK)(e)}'.`)}class ui{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let ho=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const r=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let r=0;r<this._defaultViews.length;r++)this._defaultViews[r].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),n})(),Bl=(()=>{class n{constructor(t,r,i){this.ngSwitch=i,i._addCase(),this._view=new ui(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(ho,9))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),n})(),Oh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const di="browser";function Ko(n){return"server"===n}let Qc=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new Ph((0,h.LFG)(he),window)}),n})();class Ph{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Sr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const u=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(u)return u}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ai(this.window.history)||Ai(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ai(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class go{}class Ps extends class nd extends class be{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function fe(n){j||(j=n)}(new Ps)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function rd(){return Fs=Fs||document.querySelector("base"),Fs?Fs.getAttribute("href"):null}();return null==t?null:function ms(n){Pn=Pn||document.createElement("a"),Pn.setAttribute("href",n);const e=Pn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Fs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Ul(document.cookie,e)}}let Pn,Fs=null;const Fn=new h.OlP("TRANSITION_ID"),Wu=[{provide:h.ip1,useFactory:function id(n,e,t){return()=>{t.get(h.CZH).donePromise.then(()=>{const r=O(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[Fn,he,h.zs3],multi:!0}];let Ku=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Zu=new h.OlP("EventManagerPlugins");let sd=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const u=i[o];if(u.supports(t))return this._eventNameToPlugin.set(t,u),u}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Zu),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Yu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=O().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let ta=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),na=(()=>{class n extends ta{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(o=>{const u=this._doc.createElement("style");u.textContent=o,i.push(r.appendChild(u))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(od),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(od))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(he))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function od(n){O().remove(n)}const ra={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ad=/%COMP%/g;function Kl(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Kl(n,i,t):(i=i.replace(ad,n),t.push(i))}return t}function Zl(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let rl=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new _s(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case h.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new ud(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case h.ifc.ShadowDom:return new $h(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Kl(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(sd),h.LFG(na),h.LFG(h.AFp))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class _s{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ra[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(sl(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(sl(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const o=ra[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=ra[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,i&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Zl(r)):this.eventManager.addEventListener(e,t,Zl(r))}}function sl(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class ud extends _s{constructor(e,t,r,i){super(e),this.component=r;const o=Kl(i+"-"+r.id,r.styles,[]);t.addStyles(o),this.contentAttr=function zn(n){return"_ngcontent-%COMP%".replace(ad,n)}(i+"-"+r.id),this.hostAttr=function Wl(n){return"_nghost-%COMP%".replace(ad,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class $h extends _s{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=Kl(i.id,i.styles,[]);for(let u=0;u<o.length;u++){const d=document.createElement("style");d.textContent=o[u],this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let sr=(()=>{class n extends Yu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(he))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Gh=["alt","control","meta","shift"],Ls={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Xu={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ol=(()=>{class n extends Yu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const o=n.parseEventName(r),u=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,o.domEventName,u))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=n._normalizeKey(r.pop());let u="",d=r.indexOf("code");if(d>-1&&(r.splice(d,1),u="code."),Gh.forEach(_=>{const E=r.indexOf(_);E>-1&&(r.splice(E,1),u+=_+".")}),u+=o,0!=r.length||0===o.length)return null;const p={};return p.domEventName=i,p.fullKey=u,p}static matchEventFullKeyCode(t,r){let i=Ls[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Gh.forEach(u=>{u!==i&&(0,Xu[u])(t)&&(o+=u+".")}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(he))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const al=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:di},{provide:h.g9A,useValue:function dd(){Ps.makeCurrent()},multi:!0},{provide:he,useFactory:function ec(){return(0,h.RDi)(document),document},deps:[]}]),_o=new h.OlP(""),ll=[{provide:h.rWj,useClass:class Hh{addToWindow(e){h.dqk.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const i=h.dqk.getAllAngularTestabilities();let o=i.length,u=!1;const d=function(p){u=u||p,o--,0==o&&r(u)};i.forEach(function(p){p.whenStable(d)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:h.lri,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]}],sa=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function ys(){return new h.qLn},deps:[]},{provide:Zu,useClass:sr,multi:!0,deps:[he,h.R0b,h.Lbi]},{provide:Zu,useClass:ol,multi:!0,deps:[he]},{provide:rl,useClass:rl,deps:[sd,na,h.AFp]},{provide:h.FYo,useExisting:rl},{provide:ta,useExisting:na},{provide:na,useClass:na,deps:[he]},{provide:sd,useClass:sd,deps:[Zu,h.R0b]},{provide:go,useClass:Ku,deps:[]},[]];let yo=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId},{provide:Fn,useExisting:h.AFp},Wu]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(_o,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[...sa,...ll],imports:[Oh,h.hGG]}),n})(),Yi=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(he))},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function ul(){return new Yi((0,h.LFG)(he))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;let bo,Us=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):h.LFG(Xp),r},providedIn:"root"}),n})(),Xp=(()=>{class n extends Us{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case h.q3G.NONE:return r;case h.q3G.HTML:return(0,h.qzn)(r,"HTML")?(0,h.z3N)(r):(0,h.EiD)(this._doc,String(r)).toString();case h.q3G.STYLE:return(0,h.qzn)(r,"Style")?(0,h.z3N)(r):r;case h.q3G.SCRIPT:if((0,h.qzn)(r,"Script"))return(0,h.z3N)(r);throw new Error("unsafe value used in a script context");case h.q3G.URL:return(0,h.qzn)(r,"URL")?(0,h.z3N)(r):(0,h.mCW)(String(r));case h.q3G.RESOURCE_URL:if((0,h.qzn)(r,"ResourceURL"))return(0,h.z3N)(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,h.JVY)(t)}bypassSecurityTrustStyle(t){return(0,h.L6k)(t)}bypassSecurityTrustScript(t){return(0,h.eBb)(t)}bypassSecurityTrustUrl(t){return(0,h.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,h.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(he))},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function N_(n){return new Xp(n.get(he))}(h.LFG(h.zs3)),r},providedIn:"root"}),n})();try{bo=typeof Intl<"u"&&Intl.v8BreakIterator}catch{bo=!1}let wo,gi=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function hi(n){return n===di}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!bo)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.Lbi))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ar=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function Ji(){if(wo)return wo;if("object"!=typeof document||!document)return wo=new Set(Ar),wo;let n=document.createElement("input");return wo=new Set(Ar.filter(e=>(n.setAttribute("type",e),n.type===e))),wo}let Bs,hl;function Xi(n){return function Eo(){if(null==Bs&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Bs=!0}))}finally{Bs=Bs||!1}return Bs}()?n:!!n.capture}function zr(n){return n.composedPath?n.composedPath()[0]:n.target}var Qn=U(7579);class qr extends Qn.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var xi=U(7669),pn=U(8996);function ut(...n){const e=(0,xi.yG)(n);return(0,pn.D)(n,e)}var Wr=U(4482),Wn=U(5403);function Ri(n,e){return(0,Wr.e)((t,r)=>{let i=0;t.subscribe((0,Wn.x)(r,o=>n.call(e,o,i++)&&r.next(o)))})}function W_(n){return Ri((e,t)=>n<=t)}var lc=U(4671);function dg(n,e=lc.y){return n=n??gA,(0,Wr.e)((t,r)=>{let i,o=!0;t.subscribe((0,Wn.x)(r,u=>{const d=e(u);(o||!n(i,d))&&(o=!1,i=d,r.next(u))}))})}function gA(n,e){return n===e}var lu=U(8421),K_=U(5032);function uc(n){return(0,Wr.e)((e,t)=>{(0,lu.Xf)(n).subscribe((0,Wn.x)(t,()=>t.complete(),K_.Z)),!t.closed&&e.subscribe(t)})}function cc(n){return null!=n&&"false"!=`${n}`}function Y_(n){return Array.isArray(n)?n:[n]}function es(n){return n instanceof h.SBq?n.nativeElement:n}var ii=U(9751);const{isArray:hg}=Array,{getPrototypeOf:yA,prototype:Q_,keys:fg}=Object;function uu(n){if(1===n.length){const e=n[0];if(hg(e))return{args:e,keys:null};if(function aE(n){return n&&"object"==typeof n&&yA(n)===Q_}(e)){const t=fg(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var ht=U(4004);const{isArray:vA}=Array;function pg(n){return(0,ht.U)(e=>function bA(n,e){return vA(e)?n(...e):n(e)}(n,e))}function dc(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var wA=U(9672);function J_(...n){const e=(0,xi.yG)(n),t=(0,xi.jO)(n),{args:r,keys:i}=uu(n);if(0===r.length)return(0,pn.D)([],e);const o=new ii.y(function EA(n,e,t=lc.y){return r=>{lE(e,()=>{const{length:i}=n,o=new Array(i);let u=i,d=i;for(let p=0;p<i;p++)lE(e,()=>{const _=(0,pn.D)(n[p],e);let E=!1;_.subscribe((0,Wn.x)(r,D=>{o[p]=D,E||(E=!0,d--),d||r.next(t(o.slice()))},()=>{--u||r.complete()}))},r)},r)}}(r,e,i?u=>dc(i,u):lc.y));return t?o.pipe(pg(t)):o}function lE(n,e,t){n?(0,wA.f)(t,n,e):e()}var hc=U(8189);function nf(...n){return function CA(){return(0,hc.J)(1)}()((0,pn.D)(n,(0,xi.yG)(n)))}var cu=U(515);function _l(n){return n<=0?()=>cu.E:(0,Wr.e)((e,t)=>{let r=0;e.subscribe((0,Wn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}var uE=U(4986);function X_(n,e=uE.z){return(0,Wr.e)((t,r)=>{let i=null,o=null,u=null;const d=()=>{if(i){i.unsubscribe(),i=null;const _=o;o=null,r.next(_)}};function p(){const _=u+n,E=e.now();if(E<_)return i=this.schedule(void 0,_-E),void r.add(i);d()}t.subscribe((0,Wn.x)(r,_=>{o=_,u=e.now(),i||(i=e.schedule(p,n),r.add(i))},()=>{d(),r.complete()},void 0,()=>{o=i=null}))})}function qs(...n){const e=(0,xi.yG)(n);return(0,Wr.e)((t,r)=>{(e?nf(n,t,e):nf(n,t)).subscribe(r)})}const fc=new Set;let ba,IA=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):cE}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function sF(n){if(!fc.has(n))try{ba||(ba=document.createElement("style"),ba.setAttribute("type","text/css"),document.head.appendChild(ba)),ba.sheet&&(ba.sheet.insertRule(`@media ${n} {body{ }}`,0),fc.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(gi))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function cE(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let TA=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new Qn.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return dE(Y_(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let o=J_(dE(Y_(t)).map(u=>this._registerQuery(u).observable));return o=nf(o.pipe(_l(1)),o.pipe(W_(1),X_(0))),o.pipe((0,ht.U)(u=>{const d={matches:!1,breakpoints:{}};return u.forEach(({matches:p,query:_})=>{d.matches=d.matches||p,d.breakpoints[_]=p}),d}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),o={observable:new ii.y(u=>{const d=p=>this._zone.run(()=>u.next(p));return r.addListener(d),()=>{r.removeListener(d)}}).pipe(qs(r),(0,ht.U)(({matches:u})=>({query:t,matches:u})),uc(this._destroySubject)),mql:r};return this._queries.set(t,o),o}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(IA),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function dE(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function iy(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function vE(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const RA=new h.OlP("cdk-input-modality-detector-options"),ki={ignoreKeys:[18,17,224,91,16]},pc=Xi({passive:!0,capture:!0});let sy=(()=>{class n{constructor(t,r,i,o){this._platform=t,this._mostRecentTarget=null,this._modality=new qr(null),this._lastTouchMs=0,this._onKeydown=u=>{this._options?.ignoreKeys?.some(d=>d===u.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=zr(u))},this._onMousedown=u=>{Date.now()-this._lastTouchMs<650||(this._modality.next(iy(u)?"keyboard":"mouse"),this._mostRecentTarget=zr(u))},this._onTouchstart=u=>{vE(u)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=zr(u))},this._options={...ki,...o},this.modalityDetected=this._modality.pipe(W_(1)),this.modalityChanged=this.modalityDetected.pipe(dg()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,pc),i.addEventListener("mousedown",this._onMousedown,pc),i.addEventListener("touchstart",this._onTouchstart,pc)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,pc),document.removeEventListener("mousedown",this._onMousedown,pc),document.removeEventListener("touchstart",this._onTouchstart,pc))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(gi),h.LFG(h.R0b),h.LFG(he),h.LFG(RA,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const wE=new h.OlP("cdk-focus-monitor-default-options"),mg=Xi({passive:!0,capture:!0});let EE=(()=>{class n{constructor(t,r,i,o,u){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Qn.x,this._rootNodeFocusAndBlurListener=d=>{for(let _=zr(d);_;_=_.parentElement)"focus"===d.type?this._onFocus(d,_):this._onBlur(d,_)},this._document=o,this._detectionMode=u?.detectionMode||0}monitor(t,r=!1){const i=es(t);if(!this._platform.isBrowser||1!==i.nodeType)return ut(null);const o=function ri(n){if(function gd(){if(null==hl){const n=typeof document<"u"?document.head:null;hl=!(!n||!n.createShadowRoot&&!n.attachShadow)}return hl}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(i)||this._getDocument(),u=this._elementInfo.get(i);if(u)return r&&(u.checkChildren=!0),u.subject;const d={checkChildren:r,subject:new Qn.x,rootNode:o};return this._elementInfo.set(i,d),this._registerGlobalListeners(d),d.subject}stopMonitoring(t){const r=es(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const o=es(t);o===this._getDocument().activeElement?this._getClosestElementsInfo(o).forEach(([d,p])=>this._originChanged(d,r,p)):(this._setOrigin(r),"function"==typeof o.focus&&o.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),o=zr(t);!i||!i.checkChildren&&r!==o||this._originChanged(r,this._getFocusOrigin(o),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,mg),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,mg)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(uc(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,mg),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,mg),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,o)=>{(o===t||i.checkChildren&&o.contains(t))&&r.push([o,i])}),r}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:r,mostRecentModality:i}=this._inputModalityDetector;if("mouse"!==i||!r||r===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const o=t.labels;if(o)for(let u=0;u<o.length;u++)if(o[u].contains(r))return!0;return!1}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.R0b),h.LFG(gi),h.LFG(sy),h.LFG(he,8),h.LFG(wE,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const oy="cdk-high-contrast-black-on-white",CE="cdk-high-contrast-white-on-black",ay="cdk-high-contrast-active";let kA=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=(0,h.f3M)(TA).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,o=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),o){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(ay,oy,CE),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(ay,oy):2===r&&t.add(ay,CE)}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(gi),h.LFG(he))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const NA=new h.OlP("cdk-dir-doc",{providedIn:"root",factory:function Ed(){return(0,h.f3M)(he)}}),yl=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let PA=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new h.vpe,t){const i=t.documentElement?t.documentElement.dir:null;this.value=function OA(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?yl.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||i||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(NA,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),FA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const VA=new h.OlP("mat-sanity-checks",{providedIn:"root",factory:function LA(){return!0}});let vs=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!function rc(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(kA),h.LFG(VA,8),h.LFG(he))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[FA,FA]}),n})();function Cd(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=cc(e)}}}function Id(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}function SE(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=cc(e)}}}function cy(n){return class extends n{constructor(...e){super(...e),this.errorState=!1}updateErrorState(){const e=this.errorState,o=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);o!==e&&(this.errorState=o,this.stateChanges.next())}}}let dy=(()=>{class n{isErrorState(t,r){return!!(t&&t.invalid&&(t.touched||r&&r.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class zA{constructor(e,t,r,i=!1){this._renderer=e,this.element=t,this.config=r,this._animationForciblyDisabledThroughCss=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const qA={enterDuration:225,exitDuration:150},hy=Xi({passive:!0}),fy=["mousedown","touchstart"],py=["mouseup","mouseleave","touchend","touchcancel"];class xE{constructor(e,t,r,i){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=es(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o={...qA,...r.animation};r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const u=r.radius||function gy(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),d=e-i.left,p=t-i.top,_=o.enterDuration,E=document.createElement("div");E.classList.add("mat-ripple-element"),E.style.left=d-u+"px",E.style.top=p-u+"px",E.style.height=2*u+"px",E.style.width=2*u+"px",null!=r.color&&(E.style.backgroundColor=r.color),E.style.transitionDuration=`${_}ms`,this._containerElement.appendChild(E);const D=window.getComputedStyle(E),P=D.transitionDuration,L="none"===D.transitionProperty||"0s"===P||"0s, 0s"===P,J=new zA(this,E,r,L);E.style.transform="scale3d(1, 1, 1)",J.state=0,r.persistent||(this._mostRecentTransientRipple=J);let ue=null;return!L&&(_||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const Ne=()=>this._finishRippleTransition(J),We=()=>this._destroyRipple(J);E.addEventListener("transitionend",Ne),E.addEventListener("transitioncancel",We),ue={onTransitionEnd:Ne,onTransitionCancel:We}}),this._activeRipples.set(J,ue),(L||!_)&&this._finishRippleTransition(J),J}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,r={...qA,...e.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=es(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(fy))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(py),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=1,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=iy(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!vE(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,hy)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&(fy.forEach(e=>{this._triggerElement.removeEventListener(e,this,hy)}),this._pointerUpEventsRegistered&&py.forEach(e=>{this._triggerElement.removeEventListener(e,this,hy)}))}}const RE=new h.OlP("mat-ripple-global-options");let sf=(()=>{class n{constructor(t,r,i,o,u){this._elementRef=t,this._animationMode=u,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new xE(this,r,t,i)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,{...this.rippleConfig,...i}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(h.R0b),h.Y36(gi),h.Y36(RE,8),h.Y36(h.QbO,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,r){2&t&&h.ekj("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),vg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[vs,vs]}),n})();const PE=["*",[["mat-toolbar-row"]]],XA=["*","mat-toolbar-row"],eM=Id(class{constructor(n){this._elementRef=n}});let Io=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),tM=(()=>{class n extends eM{constructor(t,r,i){super(t),this._platform=r,this._document=i}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(gi),h.Y36(he))},n.\u0275cmp=h.Xpm({type:n,selectors:[["mat-toolbar"]],contentQueries:function(t,r,i){if(1&t&&h.Suo(i,Io,5),2&t){let o;h.iGM(o=h.CRH())&&(r._toolbarRows=o)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,r){2&t&&h.ekj("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",0===r._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[h.qOj],ngContentSelectors:XA,decls:2,vars:0,template:function(t,r){1&t&&(h.F$t(PE),h.Hsn(0),h.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),n})(),rM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[vs,vs]}),n})();const iM=["mat-button",""],sM=["*"],oM=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],aM=Id(Cd(SE(class{constructor(n){this._elementRef=n}})));let Sd=(()=>{class n extends aM{constructor(t,r,i){super(t),this._focusMonitor=r,this._animationMode=i,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const o of oM)this._hasHostAttributes(o)&&this._getHostElement().classList.add(o);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,r){t?this._focusMonitor.focusVia(this._getHostElement(),t,r):this._getHostElement().focus(r)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(r=>this._getHostElement().hasAttribute(r))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(EE),h.Y36(h.QbO,8))},n.\u0275cmp=h.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,r){if(1&t&&h.Gf(sf,5),2&t){let i;h.iGM(i=h.CRH())&&(r.ripple=i.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,r){2&t&&(h.uIk("disabled",r.disabled||null),h.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-button-disabled",r.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[h.qOj],attrs:iM,ngContentSelectors:sM,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,r){1&t&&(h.F$t(),h.TgZ(0,"span",0),h.Hsn(1),h.qZA(),h._UZ(2,"span",1)(3,"span",2)),2&t&&(h.xp6(2),h.ekj("mat-button-ripple-round",r.isRoundButton||r.isIconButton),h.Q6J("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",r.isIconButton)("matRippleTrigger",r._getHostElement()))},dependencies:[sf],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}.mat-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.mat-flat-button::before,.mat-raised-button::before,.mat-fab::before,.mat-mini-fab::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-stroked-button::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px) * -1)}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}"],encapsulation:2,changeDetection:0}),n})(),LE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[vg,vs,vs]}),n})();class my{}const bl="*";function lM(n,e){return{type:7,name:n,definitions:e,options:{}}}function UE(n,e=null){return{type:4,styles:e,timings:n}}function _y(n,e=null){return{type:2,steps:n,options:e}}function wg(n){return{type:6,styles:n,offset:null}}function uM(n,e,t){return{type:0,name:n,styles:e,options:t}}function BE(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function $E(n){Promise.resolve(null).then(n)}class Eg{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){$E(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class dM{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const o=this.players.length;0==o?$E(()=>this._onFinish()):this.players.forEach(u=>{u.onDone(()=>{++t==o&&this._onFinish()}),u.onDestroy(()=>{++r==o&&this._onDestroy()}),u.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((u,d)=>Math.max(u,d.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function yy(n){return new h.vHH(3e3,!1)}function WF(){return typeof window<"u"&&typeof window.document<"u"}function Rd(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Do(n){switch(n.length){case 0:return new Eg;case 1:return n[0];default:return new dM(n)}}function Tg(n,e,t,r,i=new Map,o=new Map){const u=[],d=[];let p=-1,_=null;if(r.forEach(E=>{const D=E.get("offset"),x=D==p,P=x&&_||new Map;E.forEach((L,J)=>{let ue=J,Ne=L;if("offset"!==J)switch(ue=e.normalizePropertyName(ue,u),Ne){case"!":Ne=i.get(J);break;case bl:Ne=o.get(J);break;default:Ne=e.normalizeStyleValue(J,ue,Ne,u)}P.set(ue,Ne)}),x||d.push(P),_=P,p=D}),u.length)throw function YE(n){return new h.vHH(3502,!1)}();return d}function af(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&lf(t,"start",n)));break;case"done":n.onDone(()=>r(t&&lf(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&lf(t,"destroy",n)))}}function lf(n,e,t){const o=nC(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),u=n._data;return null!=u&&(o._data=u),o}function nC(n,e,t,r,i="",o=0,u){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:o,disabled:!!u}}function bs(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function rC(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let Cy=(n,e)=>!1,iC=(n,e,t)=>[],Iy=null;function sC(n){const e=n.parentNode||n.host;return e===Iy?null:e}(Rd()||typeof Element<"u")&&(WF()?(Iy=(()=>document.documentElement)(),Cy=(n,e)=>{for(;e;){if(e===n)return!0;e=sC(e)}return!1}):Cy=(n,e)=>n.contains(e),iC=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let du=null,Ty=!1;const CM=Cy,IM=iC;let TM=(()=>{class n{validateStyleProperty(t){return function EM(n){du||(du=function YF(){return typeof document<"u"?document.body:null}()||{},Ty=!!du.style&&"WebkitAppearance"in du.style);let e=!0;return du.style&&!function ZF(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in du.style,!e&&Ty&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in du.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return CM(t,r)}getParentElement(t){return sC(t)}query(t,r,i){return IM(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,o,u,d=[],p){return new Eg(i,o)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),aC=(()=>{class n{}return n.NOOP=new TM,n})();const lC="ng-enter",So="ng-leave",kd="ng-trigger",Dg=".ng-trigger",Dy="ng-animating",uf=".ng-animating";function El(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:cf(parseFloat(e[1]),e[2])}function cf(n,e){return"s"===e?1e3*n:n}function Sg(n,e,t){return n.hasOwnProperty("duration")?n:function hu(n,e,t){let i,o=0,u="";if("string"==typeof n){const d=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===d)return e.push(yy()),{duration:0,delay:0,easing:""};i=cf(parseFloat(d[1]),d[2]);const p=d[3];null!=p&&(o=cf(parseFloat(p),d[4]));const _=d[5];_&&(u=_)}else i=n;if(!t){let d=!1,p=e.length;i<0&&(e.push(function jF(){return new h.vHH(3100,!1)}()),d=!0),o<0&&(e.push(function hM(){return new h.vHH(3101,!1)}()),d=!0),d&&e.splice(p,0,yy())}return{duration:i,delay:o,easing:u}}(n,e,t)}function Nd(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function uC(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function fu(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function cC(n,e,t){return t?e+":"+t+";":""}function df(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=cC(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=cC(0,hC(t),n.style[t]));n.setAttribute("style",e)}function Oi(n,e,t){n.style&&(e.forEach((r,i)=>{const o=pf(i);t&&!t.has(i)&&t.set(i,n.style[o]),n.style[o]=r}),Rd()&&df(n))}function Cl(n,e){n.style&&(e.forEach((t,r)=>{const i=pf(r);n.style[i]=""}),Rd()&&df(n))}function wa(n){return Array.isArray(n)?1==n.length?n[0]:_y(n):n}const gc=new RegExp("{{\\s*(.+?)\\s*}}","g");function dC(n){let e=[];if("string"==typeof n){let t;for(;t=gc.exec(n);)e.push(t[1]);gc.lastIndex=0}return e}function hf(n,e,t){const r=n.toString(),i=r.replace(gc,(o,u)=>{let d=e[u];return null==d&&(t.push(function fM(n){return new h.vHH(3003,!1)}()),d=""),d.toString()});return i==r?n:i}function ff(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const Ay=/-+([a-z0-9])/g;function pf(n){return n.replace(Ay,(...e)=>e[1].toUpperCase())}function hC(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Ws(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function zE(n){return new h.vHH(3004,!1)}()}}function fC(n,e){return window.getComputedStyle(n)[e]}function XF(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function RM(n,e,t){if(":"==n[0]){const p=function xy(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function by(n){return new h.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof p)return void e.push(p);n=p}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function GF(n){return new h.vHH(3015,!1)}()),e;const i=r[1],o=r[2],u=r[3];e.push(mC(i,u));"<"==o[0]&&!("*"==i&&"*"==u)&&e.push(mC(u,i))}(r,t,e)):t.push(n),t}const mf=new Set(["true","1"]),Rg=new Set(["false","0"]);function mC(n,e){const t=mf.has(n)||Rg.has(n),r=mf.has(e)||Rg.has(e);return(i,o)=>{let u="*"==n||n==i,d="*"==e||e==o;return!u&&t&&"boolean"==typeof i&&(u=i?mf.has(n):Rg.has(n)),!d&&r&&"boolean"==typeof o&&(d=o?mf.has(e):Rg.has(e)),u&&d}}const yC=new RegExp("s*:selfs*,?","g");function Ry(n,e,t,r){return new kM(n).build(e,t,r)}class kM{constructor(e){this._driver=e}build(e,t,r){const i=new bC(t);return this._resetContextStyleTimingState(i),Ws(this,wa(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const o=[],u=[];return"@"==e.name.charAt(0)&&t.errors.push(function pM(){return new h.vHH(3006,!1)}()),e.definitions.forEach(d=>{if(this._resetContextStyleTimingState(t),0==d.type){const p=d,_=p.name;_.toString().split(/\s*,\s*/).forEach(E=>{p.name=E,o.push(this.visitState(p,t))}),p.name=_}else if(1==d.type){const p=this.visitTransition(d,t);r+=p.queryCount,i+=p.depCount,u.push(p)}else t.errors.push(function qE(){return new h.vHH(3007,!1)}())}),{type:7,name:e.name,states:o,transitions:u,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const o=new Set,u=i||{};r.styles.forEach(d=>{d instanceof Map&&d.forEach(p=>{dC(p).forEach(_=>{u.hasOwnProperty(_)||o.add(_)})})}),o.size&&(ff(o.values()),t.errors.push(function gM(n,e){return new h.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Ws(this,wa(e.animation),t);return{type:1,matchers:XF(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Il(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Ws(this,r,t)),options:Il(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const o=e.steps.map(u=>{t.currentTime=r;const d=Ws(this,u,t);return i=Math.max(i,t.currentTime),d});return t.currentTime=i,{type:3,steps:o,options:Il(e.options)}}visitAnimate(e,t){const r=function Ea(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return Ny(Sg(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=Ny(0,0,"");return o.dynamic=!0,o.strValue=t,o}const i=Sg(t,e);return Ny(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,o=e.styles?e.styles:wg({});if(5==o.type)i=this.visitKeyframes(o,t);else{let u=e.styles,d=!1;if(!u){d=!0;const _={};r.easing&&(_.easing=r.easing),u=wg(_)}t.currentTime+=r.duration+r.delay;const p=this.visitStyle(u,t);p.isEmptyStep=d,i=p}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let d of i)"string"==typeof d?d===bl?r.push(d):t.errors.push(new h.vHH(3002,!1)):r.push(uC(d));let o=!1,u=null;return r.forEach(d=>{if(d instanceof Map&&(d.has("easing")&&(u=d.get("easing"),d.delete("easing")),!o))for(let p of d.values())if(p.toString().indexOf("{{")>=0){o=!0;break}}),{type:6,styles:r,easing:u,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,o=t.currentTime;r&&o>0&&(o-=r.duration+r.delay),e.styles.forEach(u=>{"string"!=typeof u&&u.forEach((d,p)=>{const _=t.collectedStyles.get(t.currentQuerySelector),E=_.get(p);let D=!0;E&&(o!=i&&o>=E.startTime&&i<=E.endTime&&(t.errors.push(function _M(n,e,t,r,i){return new h.vHH(3010,!1)}()),D=!1),o=E.startTime),D&&_.set(p,{startTime:o,endTime:i}),t.options&&function Ag(n,e,t){const r=e.params||{},i=dC(n);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||t.push(function Md(n){return new h.vHH(3001,!1)}())})}(d,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function yM(){return new h.vHH(3011,!1)}()),r;let o=0;const u=[];let d=!1,p=!1,_=0;const E=e.steps.map(Ne=>{const We=this._makeStyleAst(Ne,t);let et=null!=We.offset?We.offset:function OM(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(We.styles),Xe=0;return null!=et&&(o++,Xe=We.offset=et),p=p||Xe<0||Xe>1,d=d||Xe<_,_=Xe,u.push(Xe),We});p&&t.errors.push(function WE(){return new h.vHH(3012,!1)}()),d&&t.errors.push(function vM(){return new h.vHH(3200,!1)}());const D=e.steps.length;let x=0;o>0&&o<D?t.errors.push(function KE(){return new h.vHH(3202,!1)}()):0==o&&(x=1/(D-1));const P=D-1,L=t.currentTime,J=t.currentAnimateTimings,ue=J.duration;return E.forEach((Ne,We)=>{const et=x>0?We==P?1:x*We:u[We],Xe=et*ue;t.currentTime=L+J.delay+Xe,J.duration=Xe,this._validateStyleAst(Ne,t),Ne.offset=et,r.styles.push(Ne)}),r}visitReference(e,t){return{type:8,animation:Ws(this,wa(e.animation),t),options:Il(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Il(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Il(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[o,u]=function NM(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(yC,"")),n=n.replace(/@\*/g,Dg).replace(/@\w+/g,t=>Dg+"-"+t.slice(1)).replace(/:animating/g,uf),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+o:o,bs(t.collectedStyles,t.currentQuerySelector,new Map);const d=Ws(this,wa(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:u,animation:d,originalSelector:e.selector,options:Il(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function ZE(){return new h.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:Sg(e.timings,t.errors,!0);return{type:12,animation:Ws(this,wa(e.animation),t),timings:r,options:null}}}class bC{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Il(n){return n?(n=Nd(n)).params&&(n.params=function vC(n){return n?Nd(n):null}(n.params)):n={},n}function Ny(n,e,t){return{duration:n,delay:e,easing:t}}function Oy(n,e,t,r,i,o,u=null,d=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:u,subTimeline:d}}class Py{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const FM=new RegExp(":enter","g"),Fy=new RegExp(":leave","g");function Ly(n,e,t,r,i,o=new Map,u=new Map,d,p,_=[]){return(new VM).buildKeyframes(n,e,t,r,i,o,u,d,p,_)}class VM{buildKeyframes(e,t,r,i,o,u,d,p,_,E=[]){_=_||new Py;const D=new _f(e,t,_,i,o,E,[]);D.options=p;const x=p.delay?El(p.delay):0;D.currentTimeline.delayNextStep(x),D.currentTimeline.setStyles([u],null,D.errors,p),Ws(this,r,D);const P=D.timelines.filter(L=>L.containsAnimation());if(P.length&&d.size){let L;for(let J=P.length-1;J>=0;J--){const ue=P[J];if(ue.element===t){L=ue;break}}L&&!L.allowOnlyTimelineStyles()&&L.setStyles([d],null,D.errors,p)}return P.length?P.map(L=>L.buildKeyframes()):[Oy(t,[],[],[],0,x,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),o=t.currentTimeline.currentTime,u=this._visitSubInstructions(r,i,i.options);o!=u&&t.transformIntoNewTimeline(u)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let o=t.currentTimeline.currentTime;const u=null!=r.duration?El(r.duration):null,d=null!=r.delay?El(r.delay):null;return 0!==u&&e.forEach(p=>{const _=t.appendInstructionToTimeline(p,u,d);o=Math.max(o,_.duration+_.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),Ws(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const o=e.options;if(o&&(o.params||o.delay)&&(i=t.createSubContext(o),i.transformIntoNewTimeline(),null!=o.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=mc);const u=El(o.delay);i.delayNextStep(u)}e.steps.length&&(e.steps.forEach(u=>Ws(this,u,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const o=e.options&&e.options.delay?El(e.options.delay):0;e.steps.forEach(u=>{const d=t.createSubContext(e.options);o&&d.delayNextStep(o),Ws(this,u,d),i=Math.max(i,d.currentTimeline.currentTime),r.push(d.currentTimeline)}),r.forEach(u=>t.currentTimeline.mergeTimelineCollectedStyles(u)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return Sg(t.params?hf(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const o=e.style;5==o.type?this.visitKeyframes(o,t):(t.incrementTime(r.duration),this.visitStyle(o,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const o=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(o):r.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,o=r.duration,d=t.createSubContext().currentTimeline;d.easing=r.easing,e.styles.forEach(p=>{d.forwardTime((p.offset||0)*o),d.setStyles(p.styles,p.easing,t.errors,t.options),d.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(d),t.transformIntoNewTimeline(i+o),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},o=i.delay?El(i.delay):0;o&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=mc);let u=r;const d=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=d.length;let p=null;d.forEach((_,E)=>{t.currentQueryIndex=E;const D=t.createSubContext(e.options,_);o&&D.delayNextStep(o),_===t.element&&(p=D.currentTimeline),Ws(this,e.animation,D),D.currentTimeline.applyStylesToKeyframe(),u=Math.max(u,D.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(u),p&&(t.currentTimeline.mergeTimelineCollectedStyles(p),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,o=e.timings,u=Math.abs(o.duration),d=u*(t.currentQueryTotal-1);let p=u*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":p=d-p;break;case"full":p=r.currentStaggerTime}const E=t.currentTimeline;p&&E.delayNextStep(p);const D=E.currentTime;Ws(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-D+(i.startTime-r.currentTimeline.startTime)}}const mc={};class _f{constructor(e,t,r,i,o,u,d,p){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=u,this.timelines=d,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=mc,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=p||new kg(this._driver,t,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=El(r.duration)),null!=r.delay&&(i.delay=El(r.delay));const o=r.params;if(o){let u=i.params;u||(u=this.options.params={}),Object.keys(o).forEach(d=>{(!t||!u.hasOwnProperty(d))&&(u[d]=hf(o[d],u,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,o=new _f(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=mc,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},o=new Vy(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,o,u){let d=[];if(i&&d.push(this.element),e.length>0){e=(e=e.replace(FM,"."+this._enterClassName)).replace(Fy,"."+this._leaveClassName);let _=this._driver.query(this.element,e,1!=r);0!==r&&(_=r<0?_.slice(_.length+r,_.length):_.slice(0,r)),d.push(..._)}return!o&&0==d.length&&u.push(function vy(n){return new h.vHH(3014,!1)}()),d}}class kg{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new kg(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||bl),this._currentKeyframe.set(t,bl);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const o=i&&i.params||{},u=function eL(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let o of r)t.set(o,bl)}else fu(i,t)}),t}(e,this._globalTimelineStyles);for(let[d,p]of u){const _=hf(p,o,r);this._pendingStyles.set(d,_),this._localTimelineStyles.has(d)||this._backFill.set(d,this._globalTimelineStyles.get(d)??bl),this._updateStyle(d,_)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((d,p)=>{const _=fu(d,new Map,this._backFill);_.forEach((E,D)=>{"!"===E?e.add(D):E===bl&&t.add(D)}),r||_.set("offset",p/this.duration),i.push(_)});const o=e.size?ff(e.values()):[],u=t.size?ff(t.values()):[];if(r){const d=i[0],p=new Map(d);d.set("offset",0),p.set("offset",1),i=[d,p]}return Oy(this.element,i,o,u,this.duration,this.startTime,this.easing,!1)}}class Vy extends kg{constructor(e,t,r,i,o,u,d=!1){super(e,t,u.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=d,this.timings={duration:u.duration,delay:u.delay,easing:u.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const o=[],u=r+t,d=t/u,p=fu(e[0]);p.set("offset",0),o.push(p);const _=fu(e[0]);_.set("offset",Uy(d)),o.push(_);const E=e.length-1;for(let D=1;D<=E;D++){let x=fu(e[D]);const P=x.get("offset");x.set("offset",Uy((t+P*r)/u)),o.push(x)}r=u,t=0,i="",e=o}return Oy(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function Uy(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class yf{}const EC=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class CC extends yf{normalizePropertyName(e,t){return pf(e)}normalizeStyleValue(e,t,r,i){let o="";const u=r.toString().trim();if(EC.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)o="px";else{const d=r.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&0==d[1].length&&i.push(function Cg(n,e){return new h.vHH(3005,!1)}())}return u+o}}function By(n,e,t,r,i,o,u,d,p,_,E,D,x){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:o,toState:r,toStyles:u,timelines:d,queriedElements:p,preStyleProps:_,postStyleProps:E,totalTime:D,errors:x}}const Ng={};class Og{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function Pg(n,e,t,r,i){return n.some(o=>o(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,o,u,d,p,_,E){const D=[],x=this.ast.options&&this.ast.options.params||Ng,L=this.buildStyles(r,d&&d.params||Ng,D),J=p&&p.params||Ng,ue=this.buildStyles(i,J,D),Ne=new Set,We=new Map,et=new Map,Xe="void"===i,St={params:Fg(J,x),delay:this.ast.options?.delay},Mt=E?[]:Ly(e,t,this.ast.animation,o,u,L,ue,St,_,D);let ln=0;if(Mt.forEach(Bo=>{ln=Math.max(Bo.duration+Bo.delay,ln)}),D.length)return By(t,this._triggerName,r,i,Xe,L,ue,[],[],We,et,ln,D);Mt.forEach(Bo=>{const $c=Bo.element,Zz=bs(We,$c,new Set);Bo.preStyleProps.forEach(Hp=>Zz.add(Hp));const H0=bs(et,$c,new Set);Bo.postStyleProps.forEach(Hp=>H0.add(Hp)),$c!==t&&Ne.add($c)});const jr=ff(Ne.values());return By(t,this._triggerName,r,i,Xe,L,ue,Mt,jr,We,et,ln)}}function Fg(n,e){const t=Nd(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class vf{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=Nd(this.defaultParams);return Object.keys(e).forEach(o=>{const u=e[o];null!==u&&(i[o]=u)}),this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((u,d)=>{u&&(u=hf(u,i,t));const p=this.normalizer.normalizePropertyName(d,t);u=this.normalizer.normalizeStyleValue(d,p,u,t),r.set(p,u)})}),r}}class Hy{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new vf(i.style,i.options&&i.options.params||{},r))}),TC(this.states,"true","1"),TC(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new Og(e,i,this.states))}),this.fallbackTransition=function IC(n,e,t){return new Og(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(u,d)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(u=>u.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function TC(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const BM=new Py;class bf{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],o=Ry(this._driver,t,r,[]);if(r.length)throw function QE(n){return new h.vHH(3503,!1)}();this._animations.set(e,o)}_buildPlayer(e,t,r){const i=e.element,o=Tg(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],o=this._animations.get(e);let u;const d=new Map;if(o?(u=Ly(this._driver,t,o,lC,So,new Map,new Map,r,BM,i),u.forEach(E=>{const D=bs(d,E.element,new Map);E.postStyleProps.forEach(x=>D.set(x,null))})):(i.push(function Ig(){return new h.vHH(3300,!1)}()),u=[]),i.length)throw function To(n){return new h.vHH(3504,!1)}();d.forEach((E,D)=>{E.forEach((x,P)=>{E.set(P,this._driver.computeStyle(D,P,bl))})});const _=Do(u.map(E=>{const D=d.get(E.element);return this._buildPlayer(E,new Map,D)}));return this._playersById.set(e,_),_.onDestroy(()=>this.destroy(e)),this.players.push(_),_}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function JE(n){return new h.vHH(3301,!1)}();return t}listen(e,t,r,i){const o=nC(t,"","","");return af(this._getPlayer(e),r,o,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const o=this._getPlayer(e);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const DC="ng-animate-queued",jy="ng-animate-disabled",$M=[],SC={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},AC={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ts="__ng_removed";class $y{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function WM(n){return n??null}(r?e.value:e),r){const o=Nd(e);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const _c="void",Gy=new $y(_c);class GM{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Zs(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function wM(n,e){return new h.vHH(3302,!1)}();if(null==r||0==r.length)throw function wy(n){return new h.vHH(3303,!1)}();if(!function vc(n){return"start"==n||"done"==n}(r))throw function wl(n,e){return new h.vHH(3400,!1)}();const o=bs(this._elementListeners,e,[]),u={name:t,phase:r,callback:i};o.push(u);const d=bs(this._engine.statesByElement,e,new Map);return d.has(t)||(Zs(e,kd),Zs(e,kd+"-"+t),d.set(t,Gy)),()=>{this._engine.afterFlush(()=>{const p=o.indexOf(u);p>=0&&o.splice(p,1),this._triggers.has(t)||d.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function Ey(n){return new h.vHH(3401,!1)}();return t}trigger(e,t,r,i=!0){const o=this._getTrigger(t),u=new zy(this.id,t,e);let d=this._engine.statesByElement.get(e);d||(Zs(e,kd),Zs(e,kd+"-"+t),this._engine.statesByElement.set(e,d=new Map));let p=d.get(t);const _=new $y(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&p&&_.absorbOptions(p.options),d.set(t,_),p||(p=Gy),_.value!==_c&&p.value===_.value){if(!function mi(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const o=t[i];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}(p.params,_.params)){const J=[],ue=o.matchStyles(p.value,p.params,J),Ne=o.matchStyles(_.value,_.params,J);J.length?this._engine.reportError(J):this._engine.afterFlush(()=>{Cl(e,ue),Oi(e,Ne)})}return}const x=bs(this._engine.playersByElement,e,[]);x.forEach(J=>{J.namespaceId==this.id&&J.triggerName==t&&J.queued&&J.destroy()});let P=o.matchTransition(p.value,_.value,e,_.params),L=!1;if(!P){if(!i)return;P=o.fallbackTransition,L=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:P,fromState:p,toState:_,player:u,isFallbackTransition:L}),L||(Zs(e,DC),u.onStart(()=>{gu(e,DC)})),u.onDone(()=>{let J=this.players.indexOf(u);J>=0&&this.players.splice(J,1);const ue=this._engine.playersByElement.get(e);if(ue){let Ne=ue.indexOf(u);Ne>=0&&ue.splice(Ne,1)}}),this.players.push(u),x.push(u),u}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,Dg,!0);r.forEach(i=>{if(i[ts])return;const o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(u=>u.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const o=this._engine.statesByElement.get(e),u=new Map;if(o){const d=[];if(o.forEach((p,_)=>{if(u.set(_,p.value),this._triggers.has(_)){const E=this.trigger(e,_,_c,i);E&&d.push(E)}}),d.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,u),r&&Do(d).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(o=>{const u=o.name;if(i.has(u))return;i.add(u);const p=this._triggers.get(u).fallbackTransition,_=r.get(u)||Gy,E=new $y(_c),D=new zy(this.id,u,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:u,transition:p,fromState:_,toState:E,player:D,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const o=r.players.length?r.playersByQueriedElement.get(e):[];if(o&&o.length)i=!0;else{let u=e;for(;u=u.parentNode;)if(r.statesByElement.get(u)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const o=e[ts];(!o||o===SC)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Zs(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const o=r.element,u=this._elementListeners.get(o);u&&u.forEach(d=>{if(d.name==r.triggerName){const p=nC(o,r.triggerName,r.fromState.value,r.toState.value);p._data=e,af(r.player,d.phase,p,d.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const o=r.transition.ast.depCount,u=i.transition.ast.depCount;return 0==o||0==u?o-u:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class zM{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,o)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new GM(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let u=!1,d=this.driver.getParentElement(t);for(;d;){const p=i.get(d);if(p){const _=r.indexOf(p);r.splice(_+1,0,e),u=!0;break}d=this.driver.getParentElement(d)}u||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const o=this._fetchNamespace(i.namespaceId);o&&t.add(o)}return t}trigger(e,t,r,i){if(yc(t)){const o=this._fetchNamespace(e);if(o)return o.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!yc(t))return;const o=t[ts];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const u=this.collectedLeaveElements.indexOf(t);u>=0&&this.collectedLeaveElements.splice(u,1)}if(e){const u=this._fetchNamespace(e);u&&u.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Zs(e,jy)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),gu(e,jy))}removeNode(e,t,r,i){if(yc(t)){const o=e?this._fetchNamespace(e):null;if(o?o.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const u=this.namespacesByHostElement.get(t);u&&u.id!==e&&u.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,o){this.collectedLeaveElements.push(t),t[ts]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,r,i,o){return yc(t)?this._fetchNamespace(e).listen(t,r,i,o):()=>{}}_buildInstruction(e,t,r,i,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,Dg,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,uf,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Do(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[ts];if(t&&t.setForRemoval){if(e[ts]=SC,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(jy)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Zs(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Do(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function XE(n){return new h.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new Py,i=[],o=new Map,u=[],d=new Map,p=new Map,_=new Map,E=new Set;this.disabledNodes.forEach(bt=>{E.add(bt);const Ot=this.driver.query(bt,".ng-animate-queued",!0);for(let Ut=0;Ut<Ot.length;Ut++)E.add(Ot[Ut])});const D=this.bodyNode,x=Array.from(this.statesByElement.keys()),P=MC(x,this.collectedEnterElements),L=new Map;let J=0;P.forEach((bt,Ot)=>{const Ut=lC+J++;L.set(Ot,Ut),bt.forEach(Dn=>Zs(Dn,Ut))});const ue=[],Ne=new Set,We=new Set;for(let bt=0;bt<this.collectedLeaveElements.length;bt++){const Ot=this.collectedLeaveElements[bt],Ut=Ot[ts];Ut&&Ut.setForRemoval&&(ue.push(Ot),Ne.add(Ot),Ut.hasAnimation?this.driver.query(Ot,".ng-star-inserted",!0).forEach(Dn=>Ne.add(Dn)):We.add(Ot))}const et=new Map,Xe=MC(x,Array.from(Ne));Xe.forEach((bt,Ot)=>{const Ut=So+J++;et.set(Ot,Ut),bt.forEach(Dn=>Zs(Dn,Ut))}),e.push(()=>{P.forEach((bt,Ot)=>{const Ut=L.get(Ot);bt.forEach(Dn=>gu(Dn,Ut))}),Xe.forEach((bt,Ot)=>{const Ut=et.get(Ot);bt.forEach(Dn=>gu(Dn,Ut))}),ue.forEach(bt=>{this.processLeaveNode(bt)})});const St=[],Mt=[];for(let bt=this._namespaceList.length-1;bt>=0;bt--)this._namespaceList[bt].drainQueuedTransitions(t).forEach(Ut=>{const Dn=Ut.player,Di=Ut.element;if(St.push(Dn),this.collectedEnterElements.length){const as=Di[ts];if(as&&as.setForMove){if(as.previousTriggersValues&&as.previousTriggersValues.has(Ut.triggerName)){const jp=as.previousTriggersValues.get(Ut.triggerName),Ba=this.statesByElement.get(Ut.element);if(Ba&&Ba.has(Ut.triggerName)){const aA=Ba.get(Ut.triggerName);aA.value=jp,Ba.set(Ut.triggerName,aA)}}return void Dn.destroy()}}const Vu=!D||!this.driver.containsElement(D,Di),Ho=et.get(Di),Rh=L.get(Di),Er=this._buildInstruction(Ut,r,Rh,Ho,Vu);if(Er.errors&&Er.errors.length)return void Mt.push(Er);if(Vu)return Dn.onStart(()=>Cl(Di,Er.fromStyles)),Dn.onDestroy(()=>Oi(Di,Er.toStyles)),void i.push(Dn);if(Ut.isFallbackTransition)return Dn.onStart(()=>Cl(Di,Er.fromStyles)),Dn.onDestroy(()=>Oi(Di,Er.toStyles)),void i.push(Dn);const Jz=[];Er.timelines.forEach(as=>{as.stretchStartingKeyframe=!0,this.disabledNodes.has(as.element)||Jz.push(as)}),Er.timelines=Jz,r.append(Di,Er.timelines),u.push({instruction:Er,player:Dn,element:Di}),Er.queriedElements.forEach(as=>bs(d,as,[]).push(Dn)),Er.preStyleProps.forEach((as,jp)=>{if(as.size){let Ba=p.get(jp);Ba||p.set(jp,Ba=new Set),as.forEach((aA,Z1)=>Ba.add(Z1))}}),Er.postStyleProps.forEach((as,jp)=>{let Ba=_.get(jp);Ba||_.set(jp,Ba=new Set),as.forEach((aA,Z1)=>Ba.add(Z1))})});if(Mt.length){const bt=[];Mt.forEach(Ot=>{bt.push(function qF(n,e){return new h.vHH(3505,!1)}())}),St.forEach(Ot=>Ot.destroy()),this.reportError(bt)}const ln=new Map,jr=new Map;u.forEach(bt=>{const Ot=bt.element;r.has(Ot)&&(jr.set(Ot,Ot),this._beforeAnimationBuild(bt.player.namespaceId,bt.instruction,ln))}),i.forEach(bt=>{const Ot=bt.element;this._getPreviousPlayers(Ot,!1,bt.namespaceId,bt.triggerName,null).forEach(Dn=>{bs(ln,Ot,[]).push(Dn),Dn.destroy()})});const Bo=ue.filter(bt=>mu(bt,p,_)),$c=new Map;Od($c,this.driver,We,_,bl).forEach(bt=>{mu(bt,p,_)&&Bo.push(bt)});const H0=new Map;P.forEach((bt,Ot)=>{Od(H0,this.driver,new Set(bt),p,"!")}),Bo.forEach(bt=>{const Ot=$c.get(bt),Ut=H0.get(bt);$c.set(bt,new Map([...Array.from(Ot?.entries()??[]),...Array.from(Ut?.entries()??[])]))});const Hp=[],Yz=[],Qz={};u.forEach(bt=>{const{element:Ot,player:Ut,instruction:Dn}=bt;if(r.has(Ot)){if(E.has(Ot))return Ut.onDestroy(()=>Oi(Ot,Dn.toStyles)),Ut.disabled=!0,Ut.overrideTotalTime(Dn.totalTime),void i.push(Ut);let Di=Qz;if(jr.size>1){let Ho=Ot;const Rh=[];for(;Ho=Ho.parentNode;){const Er=jr.get(Ho);if(Er){Di=Er;break}Rh.push(Ho)}Rh.forEach(Er=>jr.set(Er,Di))}const Vu=this._buildAnimation(Ut.namespaceId,Dn,ln,o,H0,$c);if(Ut.setRealPlayer(Vu),Di===Qz)Hp.push(Ut);else{const Ho=this.playersByElement.get(Di);Ho&&Ho.length&&(Ut.parentPlayer=Do(Ho)),i.push(Ut)}}else Cl(Ot,Dn.fromStyles),Ut.onDestroy(()=>Oi(Ot,Dn.toStyles)),Yz.push(Ut),E.has(Ot)&&i.push(Ut)}),Yz.forEach(bt=>{const Ot=o.get(bt.element);if(Ot&&Ot.length){const Ut=Do(Ot);bt.setRealPlayer(Ut)}}),i.forEach(bt=>{bt.parentPlayer?bt.syncPlayerEvents(bt.parentPlayer):bt.destroy()});for(let bt=0;bt<ue.length;bt++){const Ot=ue[bt],Ut=Ot[ts];if(gu(Ot,So),Ut&&Ut.hasAnimation)continue;let Dn=[];if(d.size){let Vu=d.get(Ot);Vu&&Vu.length&&Dn.push(...Vu);let Ho=this.driver.query(Ot,uf,!0);for(let Rh=0;Rh<Ho.length;Rh++){let Er=d.get(Ho[Rh]);Er&&Er.length&&Dn.push(...Er)}}const Di=Dn.filter(Vu=>!Vu.destroyed);Di.length?ZM(this,Ot,Di):this.processLeaveNode(Ot)}return ue.length=0,Hp.forEach(bt=>{this.players.push(bt),bt.onDone(()=>{bt.destroy();const Ot=this.players.indexOf(bt);this.players.splice(Ot,1)}),bt.play()}),Hp}elementContainsData(e,t){let r=!1;const i=t[ts];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,o){let u=[];if(t){const d=this.playersByQueriedElement.get(e);d&&(u=d)}else{const d=this.playersByElement.get(e);if(d){const p=!o||o==_c;d.forEach(_=>{_.queued||!p&&_.triggerName!=i||u.push(_)})}}return(r||i)&&(u=u.filter(d=>!(r&&r!=d.namespaceId||i&&i!=d.triggerName))),u}_beforeAnimationBuild(e,t,r){const o=t.element,u=t.isRemovalTransition?void 0:e,d=t.isRemovalTransition?void 0:t.triggerName;for(const p of t.timelines){const _=p.element,E=_!==o,D=bs(r,_,[]);this._getPreviousPlayers(_,E,u,d,t.toState).forEach(P=>{const L=P.getRealPlayer();L.beforeDestroy&&L.beforeDestroy(),P.destroy(),D.push(P)})}Cl(o,t.fromStyles)}_buildAnimation(e,t,r,i,o,u){const d=t.triggerName,p=t.element,_=[],E=new Set,D=new Set,x=t.timelines.map(L=>{const J=L.element;E.add(J);const ue=J[ts];if(ue&&ue.removedBeforeQueried)return new Eg(L.duration,L.delay);const Ne=J!==p,We=function Ca(n){const e=[];return Pd(n,e),e}((r.get(J)||$M).map(ln=>ln.getRealPlayer())).filter(ln=>!!ln.element&&ln.element===J),et=o.get(J),Xe=u.get(J),St=Tg(0,this._normalizer,0,L.keyframes,et,Xe),Mt=this._buildPlayer(L,St,We);if(L.subTimeline&&i&&D.add(J),Ne){const ln=new zy(e,d,J);ln.setRealPlayer(Mt),_.push(ln)}return Mt});_.forEach(L=>{bs(this.playersByQueriedElement,L.element,[]).push(L),L.onDone(()=>function qM(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,L.element,L))}),E.forEach(L=>Zs(L,Dy));const P=Do(x);return P.onDestroy(()=>{E.forEach(L=>gu(L,Dy)),Oi(p,t.toStyles)}),D.forEach(L=>{bs(i,L,[]).push(P)}),P}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Eg(e.duration,e.delay)}}class zy{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Eg,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>af(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){bs(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function yc(n){return n&&1===n.nodeType}function KM(n,e){const t=n.style.display;return n.style.display=e??"none",t}function Od(n,e,t,r,i){const o=[];t.forEach(p=>o.push(KM(p)));const u=[];r.forEach((p,_)=>{const E=new Map;p.forEach(D=>{const x=e.computeStyle(_,D,i);E.set(D,x),(!x||0==x.length)&&(_[ts]=AC,u.push(_))}),n.set(_,E)});let d=0;return t.forEach(p=>KM(p,o[d++])),u}function MC(n,e){const t=new Map;if(n.forEach(d=>t.set(d,[])),0==e.length)return t;const i=new Set(e),o=new Map;function u(d){if(!d)return 1;let p=o.get(d);if(p)return p;const _=d.parentNode;return p=t.has(_)?_:i.has(_)?1:u(_),o.set(d,p),p}return e.forEach(d=>{const p=u(d);1!==p&&t.get(p).push(d)}),t}function Zs(n,e){n.classList?.add(e)}function gu(n,e){n.classList?.remove(e)}function ZM(n,e,t){Do(t).onDone(()=>n.processLeaveNode(e))}function Pd(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof dM?Pd(r.players,e):e.push(r)}}function mu(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(o=>i.add(o)):e.set(n,r),t.delete(n),!0}class bc{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,o)=>{},this._transitionEngine=new zM(e,t,r),this._timelineEngine=new bf(e,t,r),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(e,t,r,i,o){const u=e+"-"+i;let d=this._triggerCache[u];if(!d){const p=[],E=Ry(this._driver,o,p,[]);if(p.length)throw function xd(n,e){return new h.vHH(3404,!1)}();d=function UM(n,e,t){return new Hy(n,e,t)}(i,E,this._normalizer),this._triggerCache[u]=d}this._transitionEngine.registerTrigger(t,i,d)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[o,u]=rC(r);this._timelineEngine.command(o,t,u,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,o){if("@"==r.charAt(0)){const[u,d]=rC(r);return this._timelineEngine.listen(u,t,d,o)}return this._transitionEngine.listen(e,t,r,i,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let qy=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let o=n.initialStylesByElement.get(t);o||n.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&Oi(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Oi(this._element,this._initialStyles),this._endStyles&&(Oi(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Cl(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Cl(this._element,this._endStyles),this._endStyles=null),Oi(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function _u(n){let e=null;return n.forEach((t,r)=>{(function Fd(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class wc{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:fC(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Ld{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return CM(e,t)}getParentElement(e){return sC(e)}query(e,t,r){return IM(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,o,u=[]){const p={duration:r,delay:i,fill:0==i?"both":"forwards"};o&&(p.easing=o);const _=new Map,E=u.filter(P=>P instanceof wc);(function My(n,e){return 0===n||0===e})(r,i)&&E.forEach(P=>{P.currentSnapshot.forEach((L,J)=>_.set(J,L))});let D=function SM(n){return n.length?n[0]instanceof Map?n:n.map(e=>uC(e)):[]}(t).map(P=>fu(P));D=function AM(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((o,u)=>{r.has(u)||i.push(u),r.set(u,o)}),i.length)for(let o=1;o<e.length;o++){let u=e[o];i.forEach(d=>u.set(d,fC(n,d)))}}return e}(e,D,_);const x=function Ys(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=_u(e[0]),e.length>1&&(r=_u(e[e.length-1]))):e instanceof Map&&(t=_u(e)),t||r?new qy(n,t,r):null}(e,D);return new wc(e,D,p,x)}}let Vd=(()=>{class n extends my{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:h.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?_y(t):t;return Ec(this._renderer,null,r,"register",[i]),new Ud(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.FYo),h.LFG(he))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Ud extends class VE{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Bd(this._id,e,t||{},this._renderer)}}class Bd{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return Ec(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function Ec(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const Wy="@.disabled";let xC=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(o,u)=>{const d=u?.parentNode(o);d&&u.removeChild(d,o)}}createRenderer(t,r){const o=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let E=this._rendererCache.get(o);return E||(E=new Ky("",o,this.engine),this._rendererCache.set(o,E)),E}const u=r.id,d=r.id+"-"+this._currentId;this._currentId++,this.engine.register(d,t);const p=E=>{Array.isArray(E)?E.forEach(p):this.engine.registerTrigger(u,d,t,E.name,E)};return r.data.animation.forEach(p),new RC(this,d,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[u,d]=o;u(d)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.FYo),h.LFG(bc),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Ky{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==Wy?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class RC extends Ky{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==Wy?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function kC(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let o=t.slice(1),u="";return"@"!=o.charAt(0)&&([o,u]=function NC(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(o)),this.engine.listen(this.namespaceId,i,o,u,d=>{this.factory.scheduleListenerCallback(d._data||-1,r,d)})}return this.delegate.listen(e,t,r)}}let OC=(()=>{class n extends bc{constructor(t,r,i,o){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(he),h.LFG(aC),h.LFG(yf),h.LFG(h.z2F))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const LC=[{provide:my,useClass:Vd},{provide:yf,useFactory:function PC(){return new CC}},{provide:bc,useClass:OC},{provide:h.FYo,useFactory:function FC(n,e,t){return new xC(n,e,t)},deps:[rl,bc,h.R0b]}],Zy=[{provide:aC,useFactory:()=>new Ld},{provide:h.QbO,useValue:"BrowserAnimations"},...LC],Yy=[{provide:aC,useClass:TM},{provide:h.QbO,useValue:"NoopAnimations"},...LC];let YM=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?Yy:Zy}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:Zy,imports:[yo]}),n})();const BC=Xi({passive:!0});let Lg=(()=>{class n{constructor(t,r){this._platform=t,this._ngZone=r,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return cu.E;const r=es(t),i=this._monitoredElements.get(r);if(i)return i.subject;const o=new Qn.x,u="cdk-text-field-autofilled",d=p=>{"cdk-text-field-autofill-start"!==p.animationName||r.classList.contains(u)?"cdk-text-field-autofill-end"===p.animationName&&r.classList.contains(u)&&(r.classList.remove(u),this._ngZone.run(()=>o.next({target:p.target,isAutofilled:!1}))):(r.classList.add(u),this._ngZone.run(()=>o.next({target:p.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{r.addEventListener("animationstart",d,BC),r.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(r,{subject:o,unlisten:()=>{r.removeEventListener("animationstart",d,BC)}}),o}stopMonitoring(t){const r=es(t),i=this._monitoredElements.get(r);i&&(i.unlisten(),i.subject.complete(),r.classList.remove("cdk-text-field-autofill-monitored"),r.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(r))}ngOnDestroy(){this._monitoredElements.forEach((t,r)=>this.stopMonitoring(r))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(gi),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),jC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function wf(...n){const e=(0,xi.jO)(n),{args:t,keys:r}=uu(n),i=new ii.y(o=>{const{length:u}=t;if(!u)return void o.complete();const d=new Array(u);let p=u,_=u;for(let E=0;E<u;E++){let D=!1;(0,lu.Xf)(t[E]).subscribe((0,Wn.x)(o,x=>{D||(D=!0,_--),d[E]=x},()=>p--,void 0,()=>{(!p||!D)&&(_||o.next(r?dc(r,d):d),o.complete())}))}});return e?i.pipe(pg(e)):i}function Dl(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function nv(n){return null!=n&&"number"==typeof n.length}const si=new h.OlP("NgValidators"),vu=new h.OlP("NgAsyncValidators"),qC=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class WC{static min(e){return function rv(n){return e=>{if(Dl(e.value)||Dl(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function Vg(n){return e=>{if(Dl(e.value)||Dl(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function iv(n){return Dl(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function sv(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function ov(n){return Dl(n.value)||qC.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function av(n){return e=>Dl(e.value)||!nv(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function lv(n){return e=>nv(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function uv(n){if(!n)return Cf;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Dl(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return Rr(e)}static composeAsync(e){return JC(e)}}function Cf(n){return null}function cv(n){return null!=n}function JM(n){return(0,h.QGY)(n)?(0,pn.D)(n):n}function KC(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function ZC(n,e){return e.map(t=>t(n))}function QC(n){return n.map(e=>function YC(n){return!n.validate}(e)?e:t=>e.validate(t))}function Rr(n){if(!n)return null;const e=n.filter(cv);return 0==e.length?null:function(t){return KC(ZC(t,e))}}function Ug(n){return null!=n?Rr(QC(n)):null}function JC(n){if(!n)return null;const e=n.filter(cv);return 0==e.length?null:function(t){return wf(ZC(t,e).map(JM)).pipe((0,ht.U)(KC))}}function dv(n){return null!=n?JC(QC(n)):null}function hv(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function XC(n){return n._rawValidators}function fv(n){return n._rawAsyncValidators}function Bg(n){return n?Array.isArray(n)?n:[n]:[]}function Sl(n,e){return Array.isArray(n)?n.includes(e):n===e}function eI(n,e){const t=Bg(e);return Bg(n).forEach(i=>{Sl(t,i)||t.push(i)}),t}function tI(n,e){return Bg(e).filter(t=>!Sl(n,t))}class pv{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Ug(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=dv(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Pi extends pv{get formDirective(){return null}get path(){return null}}class Ia extends pv{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}const If="VALID",Tf="INVALID",Cc="PENDING",Ic="DISABLED";function Df(n){return(Sf(n)?n.validators:n)||null}function _v(n){return Array.isArray(n)?Ug(n):n||null}function jg(n,e){return(Sf(e)?e.asyncValidators:n)||null}function yv(n){return Array.isArray(n)?dv(n):n||null}function Sf(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class wv{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=_v(this._rawValidators),this._composedAsyncValidatorFn=yv(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===If}get invalid(){return this.status===Tf}get pending(){return this.status==Cc}get disabled(){return this.status===Ic}get enabled(){return this.status!==Ic}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=_v(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=yv(e)}addValidators(e){this.setValidators(eI(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(eI(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(tI(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(tI(e,this._rawAsyncValidators))}hasValidator(e){return Sl(this._rawValidators,e)}hasAsyncValidator(e){return Sl(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Cc,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ic,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=If,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===If||this.status===Cc)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ic:If}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Cc,this._hasOwnPendingAsyncValidator=!0;const t=JM(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?Ic:this.errors?Tf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Cc)?Cc:this._anyControlsHaveStatus(Tf)?Tf:If}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Sf(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class $g extends wv{constructor(e,t,r){super(Df(t),jg(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function bv(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new h.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function vv(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new h.vHH(1e3,"");if(!r[t])throw new h.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function Af(n,e){Ev(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function ax(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&aI(n,e)})}(n,e),function ux(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function lx(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&aI(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function ox(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function zg(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Wg(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function qg(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Ev(n,e){const t=XC(n);null!==e.validator?n.setValidators(hv(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=fv(n);null!==e.asyncValidator?n.setAsyncValidators(hv(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();qg(e._rawValidators,i),qg(e._rawAsyncValidators,i)}function Wg(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=XC(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(u=>u!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(null!==e.asyncValidator){const i=fv(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(u=>u!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}const r=()=>{};return qg(e._rawValidators,r),qg(e._rawAsyncValidators,r),t}function aI(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function lI(n,e){Ev(n,e)}function Iv(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}const Tv={provide:Pi,useExisting:(0,h.Gpc)(()=>Da)},jd=(()=>Promise.resolve(null))();let Da=(()=>{class n extends Pi{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new h.vpe,this.form=new $g({},Ug(t),dv(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){jd.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Af(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){jd.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){jd.then(()=>{const r=this._findContainer(t.path),i=new $g({});lI(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){jd.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){jd.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,Iv(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(si,10),h.Y36(vu,10))},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([Tv]),h.qOj]}),n})();function hI(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function fI(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Tc=class extends wv{constructor(e=null,t,r){super(Df(t),jg(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Sf(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=fI(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){hI(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){hI(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){fI(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},wx={provide:Pi,useExisting:(0,h.Gpc)(()=>bu)};let bu=(()=>{class n extends Pi{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new h.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Wg(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Af(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){zg(t.control||null,t,!1),function dI(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,Iv(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(zg(r||null,t),(n=>n instanceof Tc)(i)&&(Af(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);lI(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function cx(n,e){return Wg(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ev(this.form,this),this._oldForm&&Wg(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(si,10),h.Y36(vu,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([wx]),h.qOj,h.TTD]}),n})(),xI=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Vx=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,r)=>this._cleanupObserver(r))}observe(t){const r=es(t);return new ii.y(i=>{const u=this._observeElement(r).subscribe(i);return()=>{u.unsubscribe(),this._unobserveElement(r)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const r=new Qn.x,i=this._mutationObserverFactory.create(o=>r.next(o));i&&i.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:i,stream:r,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:r,stream:i}=this._observedElements.get(t);r&&r.disconnect(),i.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(xI))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Uv=(()=>{class n{constructor(t,r,i){this._contentObserver=t,this._elementRef=r,this._ngZone=i,this.event=new h.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=cc(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=function mA(n,e=0){return function Z_(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(X_(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Vx),h.Y36(h.SBq),h.Y36(h.R0b))},n.\u0275dir=h.lG2({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),Ux=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[xI]}),n})();var kf=U(6451),_i=U(5577),Bx=U(1144),Sa=U(576);const Hx=["addListener","removeListener"],jx=["addEventListener","removeEventListener"],$x=["on","off"];function Bv(n,e,t,r){if((0,Sa.m)(t)&&(r=t,t=void 0),r)return Bv(n,e,t).pipe(pg(r));const[i,o]=function Gx(n){return(0,Sa.m)(n.addEventListener)&&(0,Sa.m)(n.removeEventListener)}(n)?jx.map(u=>d=>n[u](e,d,t)):function kI(n){return(0,Sa.m)(n.addListener)&&(0,Sa.m)(n.removeListener)}(n)?Hx.map(RI(n,e)):function NI(n){return(0,Sa.m)(n.on)&&(0,Sa.m)(n.off)}(n)?$x.map(RI(n,e)):[];if(!i&&(0,Bx.z)(n))return(0,_i.z)(u=>Bv(u,e,t))((0,lu.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new ii.y(u=>{const d=(...p)=>u.next(1<p.length?p:p[0]);return i(d),()=>o(d)})}function RI(n,e){return t=>r=>n[t](e,r)}const zx=["connectionContainer"],OI=["inputContainer"],qx=["label"];function Wx(n,e){1&n&&(h.ynx(0),h.TgZ(1,"div",14),h._UZ(2,"div",15)(3,"div",16)(4,"div",17),h.qZA(),h.TgZ(5,"div",18),h._UZ(6,"div",15)(7,"div",16)(8,"div",17),h.qZA(),h.BQk())}function Kx(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",19),h.NdJ("cdkObserveContent",function(){h.CHM(t);const i=h.oxw();return h.KtG(i.updateOutlineGap())}),h.Hsn(1,1),h.qZA()}if(2&n){const t=h.oxw();h.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)}}function Hv(n,e){if(1&n&&(h.ynx(0),h.Hsn(1,2),h.TgZ(2,"span"),h._uU(3),h.qZA(),h.BQk()),2&n){const t=h.oxw(2);h.xp6(3),h.Oqu(t._control.placeholder)}}function jv(n,e){1&n&&h.Hsn(0,3,["*ngSwitchCase","true"])}function PI(n,e){1&n&&(h.TgZ(0,"span",23),h._uU(1," *"),h.qZA())}function $v(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"label",20,21),h.NdJ("cdkObserveContent",function(){h.CHM(t);const i=h.oxw();return h.KtG(i.updateOutlineGap())}),h.YNc(2,Hv,4,1,"ng-container",12),h.YNc(3,jv,1,0,"ng-content",12),h.YNc(4,PI,2,0,"span",22),h.qZA()}if(2&n){const t=h.oxw();h.ekj("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),h.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),h.uIk("for",t._control.id)("aria-owns",t._control.id),h.xp6(2),h.Q6J("ngSwitchCase",!1),h.xp6(1),h.Q6J("ngSwitchCase",!0),h.xp6(1),h.Q6J("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function Zx(n,e){1&n&&(h.TgZ(0,"div",24),h.Hsn(1,4),h.qZA())}function Yx(n,e){if(1&n&&(h.TgZ(0,"div",25),h._UZ(1,"span",26),h.qZA()),2&n){const t=h.oxw();h.xp6(1),h.ekj("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function Gv(n,e){if(1&n&&(h.TgZ(0,"div"),h.Hsn(1,5),h.qZA()),2&n){const t=h.oxw();h.Q6J("@transitionMessages",t._subscriptAnimationState)}}function Qx(n,e){if(1&n&&(h.TgZ(0,"div",30),h._uU(1),h.qZA()),2&n){const t=h.oxw(2);h.Q6J("id",t._hintLabelId),h.xp6(1),h.Oqu(t.hintLabel)}}function FI(n,e){if(1&n&&(h.TgZ(0,"div",27),h.YNc(1,Qx,2,2,"div",28),h.Hsn(2,6),h._UZ(3,"div",29),h.Hsn(4,7),h.qZA()),2&n){const t=h.oxw();h.Q6J("@transitionMessages",t._subscriptAnimationState),h.xp6(1),h.Q6J("ngIf",t.hintLabel)}}const qd=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],LI=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],wL=new h.OlP("MatError"),zv={transitionMessages:lM("transitionMessages",[uM("enter",wg({opacity:1,transform:"translateY(0%)"})),BE("void => enter",[wg({opacity:0,transform:"translateY(-5px)"}),UE("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let qv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n}),n})();const BI=new h.OlP("MatHint");let Wd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["mat-label"]]}),n})(),HI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["mat-placeholder"]]}),n})();const tR=new h.OlP("MatPrefix"),nR=new h.OlP("MatSuffix");let Wv=0;const rR=Id(class{constructor(n){this._elementRef=n}},"primary"),iR=new h.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),sR=new h.OlP("MatFormField");let jI=(()=>{class n extends rR{constructor(t,r,i,o,u,d,p){super(t),this._changeDetectorRef=r,this._dir=i,this._defaults=o,this._platform=u,this._ngZone=d,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new Qn.x,this._hideRequiredMarker=!1,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+Wv++,this._labelId="mat-form-field-label-"+Wv++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==p,this.appearance=o?.appearance||"legacy",o&&(this._hideRequiredMarker=Boolean(o.hideRequiredMarker),o.color&&(this.color=this.defaultColor=o.color))}get appearance(){return this._appearance}set appearance(t){const r=this._appearance;this._appearance=t||this._defaults?.appearance||"legacy","outline"===this._appearance&&r!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=cc(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(qs(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(uc(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(uc(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,kf.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(qs(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(qs(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(uc(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const r=this._control?this._control.ngControl:null;return r&&r[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,Bv(this._label.nativeElement,"transitionend").pipe(_l(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const r=this._hintChildren?this._hintChildren.find(o=>"start"===o.align):null,i=this._hintChildren?this._hintChildren.find(o=>"end"===o.align):null;r?t.push(r.id):this._hintLabel&&t.push(this._hintLabelId),i&&t.push(i.id)}else this._errorChildren&&t.push(...this._errorChildren.map(r=>r.id));this._control.setDescribedByIds(t)}}_validateControlChild(){}updateOutlineGap(){const t=this._label?this._label.nativeElement:null,r=this._connectionContainerRef.nativeElement,i=".mat-form-field-outline-start",o=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!t||!t.children.length||!t.textContent.trim()){const E=r.querySelectorAll(`${i}, ${o}`);for(let D=0;D<E.length;D++)E[D].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let u=0,d=0;const p=r.querySelectorAll(i),_=r.querySelectorAll(o);if(this._label&&this._label.nativeElement.children.length){const E=r.getBoundingClientRect();if(0===E.width&&0===E.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const D=this._getStartEnd(E),x=t.children,P=this._getStartEnd(x[0].getBoundingClientRect());let L=0;for(let J=0;J<x.length;J++)L+=x[J].offsetWidth;u=Math.abs(P-D)-5,d=L>0?.75*L+10:0}for(let E=0;E<p.length;E++)p[E].style.width=`${u}px`;for(let E=0;E<_.length;E++)_[E].style.width=`${d}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const r=t.getRootNode();return r&&r!==t}return document.documentElement.contains(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(h.sBO),h.Y36(PA,8),h.Y36(iR,8),h.Y36(gi),h.Y36(h.R0b),h.Y36(h.QbO,8))},n.\u0275cmp=h.Xpm({type:n,selectors:[["mat-form-field"]],contentQueries:function(t,r,i){if(1&t&&(h.Suo(i,qv,5),h.Suo(i,qv,7),h.Suo(i,Wd,5),h.Suo(i,Wd,7),h.Suo(i,HI,5),h.Suo(i,wL,5),h.Suo(i,BI,5),h.Suo(i,tR,5),h.Suo(i,nR,5)),2&t){let o;h.iGM(o=h.CRH())&&(r._controlNonStatic=o.first),h.iGM(o=h.CRH())&&(r._controlStatic=o.first),h.iGM(o=h.CRH())&&(r._labelChildNonStatic=o.first),h.iGM(o=h.CRH())&&(r._labelChildStatic=o.first),h.iGM(o=h.CRH())&&(r._placeholderChild=o.first),h.iGM(o=h.CRH())&&(r._errorChildren=o),h.iGM(o=h.CRH())&&(r._hintChildren=o),h.iGM(o=h.CRH())&&(r._prefixChildren=o),h.iGM(o=h.CRH())&&(r._suffixChildren=o)}},viewQuery:function(t,r){if(1&t&&(h.Gf(zx,7),h.Gf(OI,5),h.Gf(qx,5)),2&t){let i;h.iGM(i=h.CRH())&&(r._connectionContainerRef=i.first),h.iGM(i=h.CRH())&&(r._inputContainerRef=i.first),h.iGM(i=h.CRH())&&(r._label=i.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(t,r){2&t&&h.ekj("mat-form-field-appearance-standard","standard"==r.appearance)("mat-form-field-appearance-fill","fill"==r.appearance)("mat-form-field-appearance-outline","outline"==r.appearance)("mat-form-field-appearance-legacy","legacy"==r.appearance)("mat-form-field-invalid",r._control.errorState)("mat-form-field-can-float",r._canLabelFloat())("mat-form-field-should-float",r._shouldLabelFloat())("mat-form-field-has-label",r._hasFloatingLabel())("mat-form-field-hide-placeholder",r._hideControlPlaceholder())("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-focused",r._control.focused)("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))("_mat-animation-noopable",!r._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[h._Bn([{provide:sR,useExisting:n}]),h.qOj],ngContentSelectors:LI,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,r){1&t&&(h.F$t(qd),h.TgZ(0,"div",0)(1,"div",1,2),h.NdJ("click",function(o){return r._control.onContainerClick&&r._control.onContainerClick(o)}),h.YNc(3,Wx,9,0,"ng-container",3),h.YNc(4,Kx,2,1,"div",4),h.TgZ(5,"div",5,6),h.Hsn(7),h.TgZ(8,"span",7),h.YNc(9,$v,5,16,"label",8),h.qZA()(),h.YNc(10,Zx,2,0,"div",9),h.qZA(),h.YNc(11,Yx,2,4,"div",10),h.TgZ(12,"div",11),h.YNc(13,Gv,2,1,"div",12),h.YNc(14,FI,5,2,"div",13),h.qZA()()),2&t&&(h.xp6(3),h.Q6J("ngIf","outline"==r.appearance),h.xp6(1),h.Q6J("ngIf",r._prefixChildren.length),h.xp6(5),h.Q6J("ngIf",r._hasFloatingLabel()),h.xp6(1),h.Q6J("ngIf",r._suffixChildren.length),h.xp6(1),h.Q6J("ngIf","outline"!=r.appearance),h.xp6(1),h.Q6J("ngSwitch",r._getDisplayedMessages()),h.xp6(1),h.Q6J("ngSwitchCase","error"),h.xp6(1),h.Q6J("ngSwitchCase","hint"))},dependencies:[$n,ho,Bl,Uv],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}','.mat-input-element{font:inherit;background:rgba(0,0,0,0);color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}._mat-animation-noopable .mat-input-element::placeholder{transition:none}._mat-animation-noopable .mat-input-element::-moz-placeholder{transition:none}._mat-animation-noopable .mat-input-element::-webkit-input-placeholder{transition:none}._mat-animation-noopable .mat-input-element:-ms-input-placeholder{transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:rgba(0,0,0,0)}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}"],encapsulation:2,data:{animation:[zv.transitionMessages]},changeDetection:0}),n})(),$I=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Oh,vs,Ux,vs]}),n})();const oR=new h.OlP("MAT_INPUT_VALUE_ACCESSOR"),aR=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let lR=0;const uR=cy(class{constructor(n,e,t,r){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=r,this.stateChanges=new Qn.x}});let Zv=(()=>{class n extends uR{constructor(t,r,i,o,u,d,p,_,E,D){super(d,o,u,i),this._elementRef=t,this._platform=r,this._autofillMonitor=_,this._formField=D,this._uid="mat-input-"+lR++,this.focused=!1,this.stateChanges=new Qn.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(L=>Ji().has(L)),this._iOSKeyupListener=L=>{const J=L.target;!J.value&&0===J.selectionStart&&0===J.selectionEnd&&(J.setSelectionRange(1,1),J.setSelectionRange(0,0))};const x=this._elementRef.nativeElement,P=x.nodeName.toLowerCase();this._inputValueAccessor=p||x,this._previousNativeValue=this.value,this.id=this.id,r.IOS&&E.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===P,this._isTextarea="textarea"===P,this._isInFormField=!!D,this._isNativeSelect&&(this.controlType=x.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=cc(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(WC.required)??!1}set required(t){this._required=cc(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&Ji().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=cc(t)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){const t=this._formField,r=t&&"legacy"===t.appearance&&!t._hasLabel?.()?null:this.placeholder;if(r!==this._previousPlaceholder){const i=this._elementRef.nativeElement;this._previousPlaceholder=r,r?i.setAttribute("placeholder",r):i.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){aR.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,r=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&r&&r.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(gi),h.Y36(Ia,10),h.Y36(Da,8),h.Y36(bu,8),h.Y36(dy),h.Y36(oR,10),h.Y36(Lg),h.Y36(h.R0b),h.Y36(sR,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(t,r){1&t&&h.NdJ("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),2&t&&(h.Ikx("disabled",r.disabled)("required",r.required),h.uIk("id",r.id)("data-placeholder",r.placeholder)("name",r.name||null)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required),h.ekj("mat-input-server",r._isServer)("mat-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[h._Bn([{provide:qv,useExisting:n}]),h.qOj,h.TTD]}),n})(),cR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[dy],imports:[jC,$I,vs,jC,$I]}),n})();function Kd(n,e){const t=(0,Sa.m)(n)?n:()=>n,r=i=>i.error(t());return new ii.y(e?i=>e.schedule(r,0,i):r)}var Yv=U(727),Ur=U(8505);function Al(n){return(0,Wr.e)((e,t)=>{let o,r=null,i=!1;r=e.subscribe((0,Wn.x)(t,void 0,void 0,u=>{o=(0,lu.Xf)(n(u,Al(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function wu(n){return(0,Wr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}var Xg=U(3099);function Ml(n,e){return(0,Sa.m)(e)?(0,_i.z)(n,e,1):(0,_i.z)(n,1)}class Qv{}class Jv{}class Aa{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),o=i.toLowerCase(),u=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(u):this.headers.set(o,[u])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Aa?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Aa;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Aa?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const o=e.value;if(o){let u=this.headers.get(t);if(!u)return;u=u.filter(d=>-1===o.indexOf(d)),0===u.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,u)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class dR{encodeKey(e){return GI(e)}encodeValue(e){return GI(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const hR=/%(\d[a-f0-9])/gi,fR={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function GI(n){return encodeURIComponent(n).replace(hR,(e,t)=>fR[t]??e)}function em(n){return`${n}`}class Eu{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new dR,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function AL(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const o=i.indexOf("="),[u,d]=-1==o?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],p=t.get(u)||[];p.push(d),t.set(u,p)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(em):[em(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Eu({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(em(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(em(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class pR{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function xo(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function zI(n){return typeof Blob<"u"&&n instanceof Blob}function nm(n){return typeof FormData<"u"&&n instanceof FormData}class Of{constructor(e,t,r,i){let o;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function Xv(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new Aa),this.context||(this.context=new pR),this.params){const u=this.params.toString();if(0===u.length)this.urlWithParams=t;else{const d=t.indexOf("?");this.urlWithParams=t+(-1===d?"?":d<t.length-1?"&":"")+u}}else this.params=new Eu,this.urlWithParams=t}serializeBody(){return null===this.body?null:xo(this.body)||zI(this.body)||nm(this.body)||function Nf(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Eu?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||nm(this.body)?null:zI(this.body)?this.body.type||null:xo(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Eu?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,u=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,d=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let p=e.headers||this.headers,_=e.params||this.params;const E=e.context??this.context;return void 0!==e.setHeaders&&(p=Object.keys(e.setHeaders).reduce((D,x)=>D.set(x,e.setHeaders[x]),p)),e.setParams&&(_=Object.keys(e.setParams).reduce((D,x)=>D.set(x,e.setParams[x]),_)),new Of(t,r,o,{params:_,headers:p,context:E,reportProgress:d,responseType:i,withCredentials:u})}}var kr=(()=>((kr=kr||{})[kr.Sent=0]="Sent",kr[kr.UploadProgress=1]="UploadProgress",kr[kr.ResponseHeader=2]="ResponseHeader",kr[kr.DownloadProgress=3]="DownloadProgress",kr[kr.Response=4]="Response",kr[kr.User=5]="User",kr))();class eb{constructor(e,t=200,r="OK"){this.headers=e.headers||new Aa,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Zd extends eb{constructor(e={}){super(e),this.type=kr.ResponseHeader}clone(e={}){return new Zd({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Sc extends eb{constructor(e={}){super(e),this.type=kr.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Sc({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class qI extends eb{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function tb(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let rm=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof Of)o=t;else{let p,_;p=i.headers instanceof Aa?i.headers:new Aa(i.headers),i.params&&(_=i.params instanceof Eu?i.params:new Eu({fromObject:i.params})),o=new Of(t,r,void 0!==i.body?i.body:null,{headers:p,context:i.context,params:_,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const u=ut(o).pipe(Ml(p=>this.handler.handle(p)));if(t instanceof Of||"events"===i.observe)return u;const d=u.pipe(Ri(p=>p instanceof Sc));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return d.pipe((0,ht.U)(p=>{if(null!==p.body&&!(p.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return p.body}));case"blob":return d.pipe((0,ht.U)(p=>{if(null!==p.body&&!(p.body instanceof Blob))throw new Error("Response is not a Blob.");return p.body}));case"text":return d.pipe((0,ht.U)(p=>{if(null!==p.body&&"string"!=typeof p.body)throw new Error("Response is not a string.");return p.body}));default:return d.pipe((0,ht.U)(p=>p.body))}case"response":return d;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Eu).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,tb(i,r))}post(t,r,i={}){return this.request("POST",t,tb(i,r))}put(t,r,i={}){return this.request("PUT",t,tb(i,r))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Qv))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class nb{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const im=new h.OlP("HTTP_INTERCEPTORS");let WI=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const mR=/^\)\]\}',?\n/;let JI=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new ii.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((P,L)=>i.setRequestHeader(P,L.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const P=t.detectContentTypeHeader();null!==P&&i.setRequestHeader("Content-Type",P)}if(t.responseType){const P=t.responseType.toLowerCase();i.responseType="json"!==P?P:"text"}const o=t.serializeBody();let u=null;const d=()=>{if(null!==u)return u;const P=i.statusText||"OK",L=new Aa(i.getAllResponseHeaders()),J=function _R(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return u=new Zd({headers:L,status:i.status,statusText:P,url:J}),u},p=()=>{let{headers:P,status:L,statusText:J,url:ue}=d(),Ne=null;204!==L&&(Ne=typeof i.response>"u"?i.responseText:i.response),0===L&&(L=Ne?200:0);let We=L>=200&&L<300;if("json"===t.responseType&&"string"==typeof Ne){const et=Ne;Ne=Ne.replace(mR,"");try{Ne=""!==Ne?JSON.parse(Ne):null}catch(Xe){Ne=et,We&&(We=!1,Ne={error:Xe,text:Ne})}}We?(r.next(new Sc({body:Ne,headers:P,status:L,statusText:J,url:ue||void 0})),r.complete()):r.error(new qI({error:Ne,headers:P,status:L,statusText:J,url:ue||void 0}))},_=P=>{const{url:L}=d(),J=new qI({error:P,status:i.status||0,statusText:i.statusText||"Unknown Error",url:L||void 0});r.error(J)};let E=!1;const D=P=>{E||(r.next(d()),E=!0);let L={type:kr.DownloadProgress,loaded:P.loaded};P.lengthComputable&&(L.total=P.total),"text"===t.responseType&&!!i.responseText&&(L.partialText=i.responseText),r.next(L)},x=P=>{let L={type:kr.UploadProgress,loaded:P.loaded};P.lengthComputable&&(L.total=P.total),r.next(L)};return i.addEventListener("load",p),i.addEventListener("error",_),i.addEventListener("timeout",_),i.addEventListener("abort",_),t.reportProgress&&(i.addEventListener("progress",D),null!==o&&i.upload&&i.upload.addEventListener("progress",x)),i.send(o),r.next({type:kr.Sent}),()=>{i.removeEventListener("error",_),i.removeEventListener("abort",_),i.removeEventListener("load",p),i.removeEventListener("timeout",_),t.reportProgress&&(i.removeEventListener("progress",D),null!==o&&i.upload&&i.upload.removeEventListener("progress",x)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(go))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const sm=new h.OlP("XSRF_COOKIE_NAME"),Pf=new h.OlP("XSRF_HEADER_NAME");class rb{}let XI=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Ul(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(he),h.LFG(h.Lbi),h.LFG(sm))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),om=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const o=this.tokenService.getToken();return null!==o&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,o)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(rb),h.LFG(Pf))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),eT=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(im,[]);this.chain=r.reduceRight((i,o)=>new nb(i,o),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Jv),h.LFG(h.zs3))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),tT=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:om,useClass:WI}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:sm,useValue:t.cookieName}:[],t.headerName?{provide:Pf,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[om,{provide:im,useExisting:om,multi:!0},{provide:rb,useClass:XI},{provide:sm,useValue:"XSRF-TOKEN"},{provide:Pf,useValue:"X-XSRF-TOKEN"}]}),n})(),vR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[rm,{provide:Qv,useClass:eT},JI,{provide:Jv,useExisting:JI}],imports:[tT.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})();const Fi=["*"];let xl;function Ff(n){return function wR(){if(void 0===xl&&(xl=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(xl=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return xl}()?.createHTML(n)||n}function ER(n){return Error(`Unable to find icon with the name "${n}"`)}function ib(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function sb(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class Ro{constructor(e,t,r){this.url=e,this.svgText=t,this.options=r}}let Lf=(()=>{class n{constructor(t,r,i,o){this._httpClient=t,this._sanitizer=r,this._errorHandler=o,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=i}addSvgIcon(t,r,i){return this.addSvgIconInNamespace("",t,r,i)}addSvgIconLiteral(t,r,i){return this.addSvgIconLiteralInNamespace("",t,r,i)}addSvgIconInNamespace(t,r,i,o){return this._addSvgIconConfig(t,r,new Ro(i,null,o))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,i,o){const u=this._sanitizer.sanitize(h.q3G.HTML,i);if(!u)throw sb(i);const d=Ff(u);return this._addSvgIconConfig(t,r,new Ro("",d,o))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,i){return this._addSvgIconSetConfig(t,new Ro(r,null,i))}addSvgIconSetLiteralInNamespace(t,r,i){const o=this._sanitizer.sanitize(h.q3G.HTML,r);if(!o)throw sb(r);const u=Ff(o);return this._addSvgIconSetConfig(t,new Ro("",u,i))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const r=this._sanitizer.sanitize(h.q3G.RESOURCE_URL,t);if(!r)throw ib(t);const i=this._cachedIconsByUrl.get(r);return i?ut(Vf(i)):this._loadSvgIconFromConfig(new Ro(t,null)).pipe((0,Ur.b)(o=>this._cachedIconsByUrl.set(r,o)),(0,ht.U)(o=>Vf(o)))}getNamedSvgIcon(t,r=""){const i=nT(r,t);let o=this._svgIconConfigs.get(i);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(r,t),o)return this._svgIconConfigs.set(i,o),this._getSvgFromConfig(o);const u=this._iconSetConfigs.get(r);return u?this._getSvgFromIconSetConfigs(t,u):Kd(ER(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?ut(Vf(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe((0,ht.U)(r=>Vf(r)))}_getSvgFromIconSetConfigs(t,r){const i=this._extractIconWithNameFromAnySet(t,r);return i?ut(i):wf(r.filter(u=>!u.svgText).map(u=>this._loadSvgIconSetFromConfig(u).pipe(Al(d=>{const _=`Loading icon set URL: ${this._sanitizer.sanitize(h.q3G.RESOURCE_URL,u.url)} failed: ${d.message}`;return this._errorHandler.handleError(new Error(_)),ut(null)})))).pipe((0,ht.U)(()=>{const u=this._extractIconWithNameFromAnySet(t,r);if(!u)throw ER(t);return u}))}_extractIconWithNameFromAnySet(t,r){for(let i=r.length-1;i>=0;i--){const o=r[i];if(o.svgText&&o.svgText.toString().indexOf(t)>-1){const u=this._svgElementFromConfig(o),d=this._extractSvgIconFromSet(u,t,o.options);if(d)return d}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe((0,Ur.b)(r=>t.svgText=r),(0,ht.U)(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?ut(null):this._fetchIcon(t).pipe((0,Ur.b)(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,i){const o=t.querySelector(`[id="${r}"]`);if(!o)return null;const u=o.cloneNode(!0);if(u.removeAttribute("id"),"svg"===u.nodeName.toLowerCase())return this._setSvgAttributes(u,i);if("symbol"===u.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(u),i);const d=this._svgElementFromString(Ff("<svg></svg>"));return d.appendChild(u),this._setSvgAttributes(d,i)}_svgElementFromString(t){const r=this._document.createElement("DIV");r.innerHTML=t;const i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(t){const r=this._svgElementFromString(Ff("<svg></svg>")),i=t.attributes;for(let o=0;o<i.length;o++){const{name:u,value:d}=i[o];"id"!==u&&r.setAttribute(u,d)}for(let o=0;o<t.childNodes.length;o++)t.childNodes[o].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[o].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){const{url:r,options:i}=t,o=i?.withCredentials??!1;if(!this._httpClient)throw function OL(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const u=this._sanitizer.sanitize(h.q3G.RESOURCE_URL,r);if(!u)throw ib(r);const d=this._inProgressUrlFetches.get(u);if(d)return d;const p=this._httpClient.get(u,{responseType:"text",withCredentials:o}).pipe((0,ht.U)(_=>Ff(_)),wu(()=>this._inProgressUrlFetches.delete(u)),(0,Xg.B)());return this._inProgressUrlFetches.set(u,p),p}_addSvgIconConfig(t,r,i){return this._svgIconConfigs.set(nT(t,r),i),this}_addSvgIconSetConfig(t,r){const i=this._iconSetConfigs.get(t);return i?i.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){const r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let i=0;i<this._resolvers.length;i++){const o=this._resolvers[i](r,t);if(o)return CR(o)?new Ro(o.url,null,o.options):new Ro(o,null)}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(rm,8),h.LFG(Us),h.LFG(he,8),h.LFG(h.qLn))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Vf(n){return n.cloneNode(!0)}function nT(n,e){return n+":"+e}function CR(n){return!(!n.url||!n.options)}const IR=Id(class{constructor(n){this._elementRef=n}}),ab=new h.OlP("MAT_ICON_DEFAULT_OPTIONS"),rT=new h.OlP("mat-icon-location",{providedIn:"root",factory:function iT(){const n=(0,h.f3M)(he),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),Uf=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],lb=Uf.map(n=>`[${n}]`).join(", "),FL=/^url\(['"]?#(.*?)['"]?\)$/;let am=(()=>{class n extends IR{constructor(t,r,i,o,u,d){super(t),this._iconRegistry=r,this._location=o,this._errorHandler=u,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=Yv.w0.EMPTY,d&&(d.color&&(this.color=this.defaultColor=d.color),d.fontSet&&(this.fontSet=d.fontSet)),i||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=cc(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const i=t.childNodes[r];(1!==i.nodeType||"svg"===i.nodeName.toLowerCase())&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(i=>i.length>0);this._previousFontSetClass.forEach(i=>t.classList.remove(i)),r.forEach(i=>t.classList.add(i)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const r=this._elementsWithExternalReferences;r&&r.forEach((i,o)=>{i.forEach(u=>{o.setAttribute(u.name,`url('${t}#${u.value}')`)})})}_cacheChildrenWithExternalReferences(t){const r=t.querySelectorAll(lb),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<r.length;o++)Uf.forEach(u=>{const d=r[o],p=d.getAttribute(u),_=p?p.match(FL):null;if(_){let E=i.get(d);E||(E=[],i.set(d,E)),E.push({name:u,value:_[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[r,i]=this._splitIconName(t);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe(_l(1)).subscribe(o=>this._setSvgElement(o),o=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${i}! ${o.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(Lf),h.$8M("aria-hidden"),h.Y36(rT),h.Y36(h.qLn),h.Y36(ab,8))},n.\u0275cmp=h.Xpm({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,r){2&t&&(h.uIk("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet),h.ekj("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[h.qOj],ngContentSelectors:Fi,decls:1,vars:0,template:function(t,r){1&t&&(h.F$t(),h.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),n})(),TR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[vs,vs]}),n})();var Nr=U(2011),Rl=U(5363);function vr(n,e){return(0,Wr.e)((t,r)=>{let i=null,o=0,u=!1;const d=()=>u&&!i&&r.complete();t.subscribe((0,Wn.x)(r,p=>{i?.unsubscribe();let _=0;const E=o++;(0,lu.Xf)(n(p,E)).subscribe(i=(0,Wn.x)(r,D=>r.next(e?e(p,D,E,_++):D),()=>{i=null,d()}))},()=>{u=!0,d()}))})}var sT=U(6063);class ub extends Qn.x{constructor(e=1/0,t=1/0,r=sT.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:u}=this;t||(r.push(e),!i&&r.push(o.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let u=0;u<o.length&&!e.closed;u+=r?1:2)e.next(o[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){const u=t.now();let d=0;for(let p=1;p<r.length&&r[p]<=u;p+=2)d=p;d&&r.splice(0,d+1)}}}function DR(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,Xg.B)({connector:()=>new ub(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const cb=(0,U(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function lm(n){return(0,Wr.e)((e,t)=>{let r=!1;e.subscribe((0,Wn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function oT(n=AR){return(0,Wr.e)((e,t)=>{let r=!1;e.subscribe((0,Wn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function AR(){return new cb}function Ma(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ri((i,o)=>n(i,o,r)):lc.y,_l(1),t?lm(e):oT(()=>new cb))}function db(n,e){return(0,Sa.m)(e)?vr(()=>n,e):vr(()=>n)}var hb=U(9468),mn=U(5813);U(5867);var De=U(5861),ns=U(9681),xa=U(4859),F=U(2090),Ra=U(1877);const pb=new Map,dm={activated:!1,tokenObservers:[]},lT={initialized:!1,enabled:!1};function Br(n){return pb.get(n)||dm}function ka(n,e){pb.set(n,e)}function Yd(){return lT}class VR{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,De.Z)(function*(){t.stop();try{t.pending=new F.BH,yield function fm(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new F.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const rs=new F.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function BR(n){if(!Br(n).activated)throw rs.create("use-before-activation",{appName:n.name})}function _b(n,e){return dT.apply(this,arguments)}function dT(){return(dT=(0,De.Z)(function*({url:n,body:e},t){var r,i;const o={"Content-Type":"application/json"},u=t.getImmediate({optional:!0});if(u){const P=yield u.getHeartbeatsHeader();P&&(o["X-Firebase-Client"]=P)}const d={method:"POST",body:JSON.stringify(e),headers:o};let p,_;try{p=yield fetch(n,d)}catch(P){throw rs.create("fetch-network-error",{originalErrorMessage:null===(r=P)||void 0===r?void 0:r.message})}if(200!==p.status)throw rs.create("fetch-status-error",{httpStatus:p.status});try{_=yield p.json()}catch(P){throw rs.create("fetch-parse-error",{originalErrorMessage:null===(i=P)||void 0===i?void 0:i.message})}const E=_.ttl.match(/^([\d.]+)(s)$/);if(!E||!E[2]||isNaN(Number(E[1])))throw rs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${_.ttl}`});const D=1e3*Number(E[1]),x=Date.now();return{token:_.token,expireTimeMillis:x+D,issuedAtTimeMillis:x}})).apply(this,arguments)}function fT(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Bf="firebase-app-check-store";let mm=null;function Cs(){return mm||(mm=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var o;e(rs.create("storage-open",{originalErrorMessage:null===(o=i.target.error)||void 0===o?void 0:o.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(Bf,{keyPath:"compositeKey"})}}catch(r){e(rs.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),mm)}function ym(){return(ym=(0,De.Z)(function*(n,e){const r=(yield Cs()).transaction(Bf,"readwrite"),o=r.objectStore(Bf).put({compositeKey:n,value:e});return new Promise((u,d)=>{o.onsuccess=p=>{u()},r.onerror=p=>{var _;d(rs.create("storage-set",{originalErrorMessage:null===(_=p.target.error)||void 0===_?void 0:_.message}))}})})).apply(this,arguments)}const Qd=new Ra.Yd("@firebase/app-check");function pT(n,e){return(0,F.hl)()?function yb(n,e){return function _m(n,e){return ym.apply(this,arguments)}(function wb(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Qd.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Cb(){return Yd().enabled}function bm(){return No.apply(this,arguments)}function No(){return(No=(0,De.Z)(function*(){const n=Yd();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const BL={error:"UNKNOWN_ERROR"};function WR(n){return F.US.encodeString(JSON.stringify(n),!1)}function wm(n){return Ib.apply(this,arguments)}function Ib(){return(Ib=(0,De.Z)(function*(n,e=!1){const t=n.app;BR(t);const r=Br(t);let o,i=r.token;if(!i){const p=yield r.cachedTokenPromise;p&&Hf(p)&&(i=p)}if(!e&&i&&Hf(i))return{token:i.token};let d,u=!1;if(Cb()){r.exchangeTokenPromise||(r.exchangeTokenPromise=_b(fT(t,yield bm()),n.heartbeatServiceProvider).then(_=>(r.exchangeTokenPromise=void 0,_)),u=!0);const p=yield r.exchangeTokenPromise;return yield pT(t,p),ka(t,Object.assign(Object.assign({},r),{token:p})),{token:p.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(p=>(r.exchangeTokenPromise=void 0,p)),u=!0),i=yield r.exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?Qd.warn(p.message):Qd.error(p),o=p}return i?(d={token:i.token},ka(t,Object.assign(Object.assign({},r),{token:i})),yield pT(t,i)):d=HL(o),u&&mT(t,d),d})).apply(this,arguments)}function Em(n,e){const t=Br(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),ka(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function KR(n){const{app:e}=n,t=Br(e);let r=t.tokenRefresher;r||(r=function gT(n){const{app:e}=n;return new VR((0,De.Z)(function*(){let r;if(r=Br(e).token?yield wm(n,!0):yield wm(n),r.error)throw r.error}),()=>!0,()=>{const t=Br(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),ka(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function mT(n,e){const t=Br(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function Hf(n){return n.expireTimeMillis-Date.now()>0}function HL(n){return{token:WR(BL),error:n}}class Db{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Br(this.app);for(const t of e)Em(this.app,t.next);return Promise.resolve()}}const DT="app-check-internal";!function ST(){(0,ns._registerComponent)(new xa.wA("app-check",n=>function _T(n,e){return new Db(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(DT).initialize()})),(0,ns._registerComponent)(new xa.wA(DT,n=>function yT(n){return{getToken:e=>wm(n,e),addTokenListener:e=>function Tb(n,e,t,r){const{app:i}=n,o=Br(i),u={next:t,error:r,type:e};if(ka(i,Object.assign(Object.assign({},o),{tokenObservers:[...o.tokenObservers,u]})),o.token&&Hf(o.token)){const d=o.token;Promise.resolve().then(()=>{t({token:d.token}),KR(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>KR(n))}(n,"INTERNAL",e),removeTokenListener:e=>Em(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ns.registerVersion)("@firebase/app-check","0.5.12")}();class Ac{constructor(){return(0,mn.vb)("app-check")}}typeof window<"u"&&window;var jf=U(127);const Fb=new h.OlP("angularfire2.auth.use-emulator"),Lb=new h.OlP("angularfire2.auth.settings"),Sm=new h.OlP("angularfire2.auth.tenant-id"),$f=new h.OlP("angularfire2.auth.langugage-code"),kT=new h.OlP("angularfire2.auth.use-device-language"),Am=new h.OlP("angularfire.auth.persistence"),Gf=(n,e,t,r,i,o,u,d)=>(0,Nr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=e.runOutsideAngular(()=>n.auth());if(t&&p.useEmulator(...t),r&&(p.tenantId=r),p.languageCode=i,o&&p.useDeviceLanguage(),u)for(const[_,E]of Object.entries(u))p.settings[_]=E;return d&&p.setPersistence(d),p},[t,r,i,o,u,d]);let zf=(()=>{class n{constructor(t,r,i,o,u,d,p,_,E,D,x,P){const L=new Qn.x,J=ut(void 0).pipe((0,Rl.Q)(u.outsideAngular),vr(()=>o.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,5881)))),(0,ht.U)(()=>(0,Nr.on)(t,o,r)),(0,ht.U)(ue=>Gf(ue,o,d,_,E,D,p,x)),DR({bufferSize:1,refCount:!1}));if(Ko(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ut(null);else{J.pipe(Ma()).subscribe();const Ne=J.pipe(vr(Xe=>Xe.getRedirectResult().then(St=>St,()=>null)),mn.iC,DR({bufferSize:1,refCount:!1})),We=J.pipe(vr(Xe=>new ii.y(St=>({unsubscribe:o.runOutsideAngular(()=>Xe.onAuthStateChanged(Mt=>St.next(Mt),Mt=>St.error(Mt),()=>St.complete()))})))),et=J.pipe(vr(Xe=>new ii.y(St=>({unsubscribe:o.runOutsideAngular(()=>Xe.onIdTokenChanged(Mt=>St.next(Mt),Mt=>St.error(Mt),()=>St.complete()))}))));this.authState=Ne.pipe(db(We),(0,hb.R)(u.outsideAngular),(0,Rl.Q)(u.insideAngular)),this.user=Ne.pipe(db(et),(0,hb.R)(u.outsideAngular),(0,Rl.Q)(u.insideAngular)),this.idToken=this.user.pipe(vr(Xe=>Xe?(0,pn.D)(Xe.getIdToken()):ut(null))),this.idTokenResult=this.user.pipe(vr(Xe=>Xe?(0,pn.D)(Xe.getIdTokenResult()):ut(null))),this.credential=(0,kf.T)(Ne,L,this.authState.pipe(Ri(Xe=>!Xe))).pipe((0,ht.U)(Xe=>Xe?.user?Xe:null),(0,hb.R)(u.outsideAngular),(0,Rl.Q)(u.insideAngular))}return(0,Nr.pX)(this,J,o,{spy:{apply:(ue,Ne,We)=>{(ue.startsWith("signIn")||ue.startsWith("createUser"))&&We.then(et=>L.next(et))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Nr.Dh),h.LFG(Nr.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(mn.HU),h.LFG(Fb,8),h.LFG(Lb,8),h.LFG(Sm,8),h.LFG($f,8),h.LFG(kT,8),h.LFG(Am,8),h.LFG(Ac,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),XR=(()=>{class n{constructor(){jf.Z.registerVersion("angularfire",mn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[zf]}),n})();var NT=U(3942);const ek="firebasestorage.googleapis.com",OT="storageBucket";class br extends F.ZR{constructor(e,t){super(PT(e),`Firebase Storage: ${t} (${PT(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,br.prototype)}_codeEquals(e){return PT(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function PT(n){return"storage/"+n}function FT(){return new br("unknown","An unknown error occurred, please check the error payload for server response.")}function ik(){return new br("canceled","User canceled the upload/download.")}function a(){return new br("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function f(n){return new br("invalid-argument",n)}function g(){return new br("app-deleted","The Firebase app was deleted.")}function v(n){return new br("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function w(n,e){return new br("invalid-format","String does not match format '"+n+"': "+e)}function I(n){throw new br("internal-error","Internal error: "+n)}class M{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=M.makeFromUrl(e,t)}catch{return new M(e,"")}if(""===r.path)return r;throw function rV(n){return new br("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+i+"(/(.*))?$","i");function _(Xe){Xe.path_=decodeURIComponent(Xe.path)}const D=t.replace(/[.]/g,"\\."),et=[{regex:d,indices:{bucket:1,path:3},postModify:function o(Xe){"/"===Xe.path.charAt(Xe.path.length-1)&&(Xe.path_=Xe.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${D}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:_},{regex:new RegExp(`^https?://${t===ek?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:_}];for(let Xe=0;Xe<et.length;Xe++){const St=et[Xe],Mt=St.regex.exec(e);if(Mt){let jr=Mt[St.indices.path];jr||(jr=""),r=new M(Mt[St.indices.bucket],jr),St.postModify(r);break}}if(null==r)throw function nV(n){return new br("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class N{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function nt(n){return"string"==typeof n||n instanceof String}function dt(n){return Rt()&&n instanceof Blob}function Rt(){return typeof Blob<"u"}function Be(n,e,t,r){if(r<e)throw f(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw f(`Invalid value for '${n}'. Expected ${t} or less.`)}function pt(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function rn(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var wn=(()=>{return(n=wn||(wn={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",wn;var n})();class Mc{constructor(e,t,r,i,o,u,d,p,_,E,D){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=u,this.callback_=d,this.errorCallback_=p,this.timeout_=_,this.progressCallback_=E,this.connectionFactory_=D,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,P)=>{this.resolve_=x,this.reject_=P,this.start_()})}start_(){const t=(r,i)=>{const o=this.resolve_,u=this.reject_,d=i.connection;if(i.wasSuccessCode)try{const p=this.callback_(d,d.getResponse());!function ae(n){return void 0!==n}(p)?o():o(p)}catch(p){u(p)}else if(null!==d){const p=FT();p.serverResponse=d.getErrorText(),u(this.errorCallback_?this.errorCallback_(d,p):p)}else u(i.canceled?this.appDelete_?g():ik():function tV(){return new br("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new Jd(!1,null,!0)):this.backoffId_=function B(n,e,t){let r=1,i=null,o=null,u=!1,d=0;function p(){return 2===d}let _=!1;function E(...ue){_||(_=!0,e.apply(null,ue))}function D(ue){i=setTimeout(()=>{i=null,n(P,p())},ue)}function x(){o&&clearTimeout(o)}function P(ue,...Ne){if(_)return void x();if(ue)return x(),void E.call(null,ue,...Ne);if(p()||u)return x(),void E.call(null,ue,...Ne);let et;r<64&&(r*=2),1===d?(d=2,et=0):et=1e3*(r+Math.random()),D(et)}let L=!1;function J(ue){L||(L=!0,x(),!_&&(null!==i?(ue||(d=2),clearTimeout(i),D(0)):ue||(d=1)))}return D(0),o=setTimeout(()=>{u=!0,J(!0)},t),J}((r,i)=>{if(i)return void r(!1,new Jd(!1,null,!0));const o=this.connectionFactory_();this.pendingConnection_=o;const u=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&o.addUploadProgressListener(u),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&o.removeUploadProgressListener(u),this.pendingConnection_=null;const d=o.getErrorCode()===wn.NO_ERROR,p=o.getStatus();if(!d||this.isRetryStatusCode_(p)){const E=o.getErrorCode()===wn.ABORT;return void r(!1,new Jd(!1,null,E))}const _=-1!==this.successCodes_.indexOf(p);r(!0,new Jd(_,o))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function X(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),o=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||o}}class Jd{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function Gb(...n){const e=function $b(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(Rt())return new Blob(n);throw new br("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Oo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class sk{constructor(e,t){this.data=e,this.contentType=t||null}}function ok(n,e){switch(n){case Oo.RAW:return new sk(iV(e));case Oo.BASE64:case Oo.BASE64URL:return new sk(sV(n,e));case Oo.DATA_URL:return new sk(function R3(n){const e=new oV(n);return e.base64?sV(Oo.BASE64,e.rest):function x3(n){let e;try{e=decodeURIComponent(n)}catch{throw w(Oo.DATA_URL,"Malformed data URL.")}return iV(e)}(e.rest)}(e),function k3(n){return new oV(n).contentType}(e))}throw FT()}function iV(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function sV(n,e){switch(n){case Oo.BASE64:{const i=-1!==e.indexOf("-"),o=-1!==e.indexOf("_");if(i||o)throw w(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Oo.BASE64URL:{const i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw w(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function M3(n){return atob(n)}(e)}catch{throw w(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class oV{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw w(Oo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function N3(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Iu{constructor(e,t){let r=0,i="";dt(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(dt(this.data_)){const i=function zb(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Iu(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Iu(r,!0)}}static getBlob(...e){if(Rt()){const t=e.map(r=>r instanceof Iu?r.data_:r);return new Iu(Gb.apply(null,t))}{const t=e.map(u=>nt(u)?ok(Oo.RAW,u).data:u.data_);let r=0;t.forEach(u=>{r+=u.byteLength});const i=new Uint8Array(r);let o=0;return t.forEach(u=>{for(let d=0;d<u.length;d++)i[o++]=u[d]}),new Iu(i,!0)}}uploadData(){return this.data_}}function ak(n){let e;try{e=JSON.parse(n)}catch{return null}return function Ge(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function aV(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function F3(n,e){return e}class Is{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||F3}}let LT=null;function qb(){if(LT)return LT;const n=[];n.push(new Is("bucket")),n.push(new Is("generation")),n.push(new Is("metageneration")),n.push(new Is("name","fullPath",!0));const t=new Is("name");t.xform=function e(o,u){return function L3(n){return!nt(n)||n.length<2?n:aV(n)}(u)},n.push(t);const i=new Is("size");return i.xform=function r(o,u){return void 0!==u?Number(u):u},n.push(i),n.push(new Is("timeCreated")),n.push(new Is("updated")),n.push(new Is("md5Hash",null,!0)),n.push(new Is("cacheControl",null,!0)),n.push(new Is("contentDisposition",null,!0)),n.push(new Is("contentEncoding",null,!0)),n.push(new Is("contentLanguage",null,!0)),n.push(new Is("contentType",null,!0)),n.push(new Is("metadata","customMetadata",!0)),LT=n,LT}function lV(n,e,t){const r=ak(e);return null===r?null:function U3(n,e,t){const r={type:"file"},i=t.length;for(let o=0;o<i;o++){const u=t[o];r[u.local]=u.xform(r,e[u.server])}return function V3(n,e){Object.defineProperty(n,"ref",{get:function t(){const o=new M(n.bucket,n.fullPath);return e._makeStorageReference(o)}})}(r,n),r}(n,r,t)}function lk(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}const uV="prefixes";class Tu{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Du(n){if(!n)throw FT()}function VT(n,e){return function t(r,i){const o=lV(n,i,e);return Du(null!==o),o}}function Mm(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function XL(){return new br("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function rk(){return new br("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function JL(n){return new br("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function eV(n){return new br("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function Wb(n){const e=Mm(n);return function t(r,i){let o=e(r,i);return 404===r.getStatus()&&(o=function QL(n){return new br("object-not-found","Object '"+n+"' does not exist.")}(n.path)),o.serverResponse=i.serverResponse,o}}function dV(n,e,t){const i=pt(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,d=new Tu(i,"GET",VT(n,t),u);return d.errorHandler=Wb(e),d}function z3(n,e,t,r,i){const o={};o.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(o.delimiter=t),r&&(o.pageToken=r),i&&(o.maxResults=i);const d=pt(e.bucketOnlyServerUrl(),n.host,n._protocol),_=n.maxOperationRetryTime,E=new Tu(d,"GET",function $3(n,e){return function t(r,i){const o=function j3(n,e,t){const r=ak(t);return null===r?null:function H3(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[uV])for(const i of t[uV]){const o=i.replace(/\/$/,""),u=n._makeStorageReference(new M(e,o));r.prefixes.push(u)}if(t.items)for(const i of t.items){const o=n._makeStorageReference(new M(e,i.name));r.items.push(o)}return r}(n,e,r)}(n,e,i);return Du(null!==o),o}}(n,e.bucket),_);return E.urlParams=o,E.errorHandler=Mm(e),E}function fV(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function Z3(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class UT{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function uk(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Du(!1)}return Du(!!t&&-1!==(e||["active"]).indexOf(t)),t}const X3={STATE_CHANGED:"state_changed"},Ts={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function ck(n){switch(n){case"running":case"pausing":case"canceling":return Ts.RUNNING;case"paused":return Ts.PAUSED;case"success":return Ts.SUCCESS;case"canceled":return Ts.CANCELED;default:return Ts.ERROR}}class eq{constructor(e,t,r){if(function Me(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}}function xm(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class nq extends class tq{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=wn.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=wn.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=wn.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw I("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw I("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw I("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw I("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw I("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function kl(){return new nq}class _V{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=qb(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function Y3(n,e,t,r,i){const o=e.bucketOnlyServerUrl(),u=fV(e,r,i),d={name:u.fullPath},p=pt(o,n.host,n._protocol),E={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":u.contentType,"Content-Type":"application/json; charset=utf-8"},D=lk(u,t),L=new Tu(p,"POST",function P(J){let ue;uk(J);try{ue=J.getResponseHeader("X-Goog-Upload-URL")}catch{Du(!1)}return Du(nt(ue)),ue},n.maxUploadRetryTime);return L.urlParams=d,L.headers=E,L.body=D,L.errorHandler=Mm(e),L}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,kl,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function Q3(n,e,t,r){const p=new Tu(t,"POST",function o(_){const E=uk(_,["active","final"]);let D=null;try{D=_.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Du(!1)}D||Du(!1);const x=Number(D);return Du(!isNaN(x)),new UT(x,r.size(),"final"===E)},n.maxUploadRetryTime);return p.headers={"X-Goog-Upload-Command":"query"},p.errorHandler=Mm(e),p}(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(i,kl,t,r);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._updateProgress(u.current),this._needToFetchStatus=!1,u.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new UT(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,o)=>{let u;try{u=function J3(n,e,t,r,i,o,u,d){const p=new UT(0,0);if(u?(p.current=u.current,p.total=u.total):(p.current=0,p.total=r.size()),r.size()!==p.total)throw function l(){return new br("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const _=p.total-p.current;let E=_;i>0&&(E=Math.min(E,i));const D=p.current,L={"X-Goog-Upload-Command":E===_?"upload, finalize":"upload","X-Goog-Upload-Offset":`${p.current}`},J=r.slice(D,D+E);if(null===J)throw a();const et=new Tu(t,"POST",function ue(Xe,St){const Mt=uk(Xe,["active","final"]),ln=p.current+E,jr=r.size();let Bo;return Bo="final"===Mt?VT(e,o)(Xe,St):null,new UT(ln,jr,"final"===Mt,Bo)},e.maxUploadRetryTime);return et.headers=L,et.body=J.uploadData(),et.progressCallback=d||null,et.errorHandler=Mm(n),et}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(p){return this._error=p,void this._transition("error")}const d=this._ref.storage._makeRequest(u,kl,i,o);this._request=d,d.getPromise().then(p=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(p.current),p.finalized?(this._metadata=p.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=dV(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,kl,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function pV(n,e,t,r,i){const o=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"},p=function d(){let et="";for(let Xe=0;Xe<2;Xe++)et+=Math.random().toString().slice(2);return et}();u["Content-Type"]="multipart/related; boundary="+p;const _=fV(e,r,i),E=lk(_,t),P=Iu.getBlob("--"+p+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+E+"\r\n--"+p+"\r\nContent-Type: "+_.contentType+"\r\n\r\n",r,"\r\n--"+p+"--");if(null===P)throw a();const L={name:_.fullPath},J=pt(o,n.host,n._protocol),Ne=n.maxUploadRetryTime,We=new Tu(J,"POST",VT(n,t),Ne);return We.urlParams=L,We.headers=u,We.body=P.uploadData(),We.errorHandler=Mm(e),We}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,kl,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=ik(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=ck(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const o=new eq(t||void 0,r||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(ck(this._state)){case Ts.SUCCESS:xm(this._resolve.bind(null,this.snapshot))();break;case Ts.CANCELED:case Ts.ERROR:xm(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(ck(this._state)){case Ts.RUNNING:case Ts.PAUSED:e.next&&xm(e.next.bind(e,this.snapshot))();break;case Ts.SUCCESS:e.complete&&xm(e.complete.bind(e))();break;default:e.error&&xm(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class qf{constructor(e,t){this._service=e,this._location=t instanceof M?t:M.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new qf(e,t)}get root(){const e=new M(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return aV(this._location.path)}get storage(){return this._service}get parent(){const e=function O3(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new M(this._location.bucket,e);return new qf(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw v(e)}}function vV(n,e,t){return dk.apply(this,arguments)}function dk(){return(dk=(0,De.Z)(function*(n,e,t){const i=yield bV(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield vV(n,e,i.nextPageToken))})).apply(this,arguments)}function bV(n,e){null!=e&&"number"==typeof e.maxResults&&Be("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=z3(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,kl)}function pq(n){n._throwIfRoot("getDownloadURL");const e=function q3(n,e,t){const i=pt(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,d=new Tu(i,"GET",function G3(n,e){return function t(r,i){const o=lV(n,i,e);return Du(null!==o),function B3(n,e,t,r){const i=ak(e);if(null===i||!nt(i.downloadTokens))return null;const o=i.downloadTokens;if(0===o.length)return null;const u=encodeURIComponent;return o.split(",").map(_=>{const D=n.fullPath;return pt("/b/"+u(n.bucket)+"/o/"+u(D),t,r)+rn({alt:"media",token:_})})[0]}(o,i,n.host,n._protocol)}}(n,t),u);return d.errorHandler=Wb(e),d}(n.storage,n._location,qb());return n.storage.makeRequestWithTokens(e,kl).then(t=>{if(null===t)throw function c(){return new br("no-download-url","The given file does not have any download URLs.")}();return t})}function wV(n,e){const t=function P3(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new M(n._location.bucket,t);return new qf(n.storage,r)}function EV(n,e){if(n instanceof hk){const t=n;if(null==t._bucket)throw function s(){return new br("no-default-bucket","No default bucket found. Did you set the '"+OT+"' property when initializing the app?")}();const r=new qf(t,t._bucket);return null!=e?EV(r,e):r}return void 0!==e?wV(n,e):n}function yq(n,e){if(e&&function mq(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof hk)return function _q(n,e){return new qf(n,e)}(n,e);throw f("To use ref(service, url), the first argument must be a Storage instance.")}return EV(n,e)}function CV(n,e){const t=e?.[OT];return null==t?null:M.makeFromBucketSpec(t,n)}class hk{constructor(e,t,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=ek,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?M.makeFromBucketSpec(i,this._host):CV(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?M.makeFromBucketSpec(this._url,e):CV(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Be("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Be("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,De.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,De.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new qf(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new N(g());{const o=function jb(n,e,t,r,i,o){const u=rn(n.urlParams),d=n.url+u,p=Object.assign({},n.headers);return function Bb(n,e){e&&(n["X-Firebase-GMPID"]=e)}(p,e),function Vb(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(p,t),function Ub(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(p,o),function Hb(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(p,r),new Mc(d,n.method,p,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){var r=this;return(0,De.Z)(function*(){const[i,o]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,o).getPromise()})()}}const IV="@firebase/storage";function SV(n,e){return yq(n=(0,F.m9)(n),e)}function Mq(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new hk(t,r,i,e,ns.SDK_VERSION)}!function xq(){(0,ns._registerComponent)(new xa.wA("storage",Mq,"PUBLIC").setMultipleInstances(!0)),(0,ns.registerVersion)(IV,"0.9.9",""),(0,ns.registerVersion)(IV,"0.9.9","esm2017")}();class BT{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class AV{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new BT(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new BT(r,this,this._ref))},t)}on(e,t,r,i){let o;return t&&(o="function"==typeof t?u=>t(new BT(u,this,this._ref)):{next:t.next?u=>t.next(new BT(u,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,o,r||void 0,i||void 0)}}class MV{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new xc(e,this._service))}get items(){return this._delegate.items.map(e=>new xc(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class xc{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function Sq(n,e){return wV(n,e)}(this._delegate,e);return new xc(t,this.storage)}get root(){return new xc(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new xc(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new AV(function bq(n,e,t){return function uq(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new _V(n,new Iu(e),t)}(n=(0,F.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Oo.RAW,r){this._throwIfRoot("putString");const i=ok(t,e),o=Object.assign({},r);return null==o.contentType&&null!=i.contentType&&(o.contentType=i.contentType),new AV(new _V(this._delegate,new Iu(i.data,!0),o),this)}listAll(){return function Iq(n){return function dq(n){const e={prefixes:[],items:[]};return vV(n,e).then(()=>e)}(n=(0,F.m9)(n))}(this._delegate).then(e=>new MV(e,this.storage))}list(e){return function Cq(n,e){return bV(n=(0,F.m9)(n),e)}(this._delegate,e||void 0).then(t=>new MV(t,this.storage))}getMetadata(){return function wq(n){return function hq(n){n._throwIfRoot("getMetadata");const e=dV(n.storage,n._location,qb());return n.storage.makeRequestWithTokens(e,kl)}(n=(0,F.m9)(n))}(this._delegate)}updateMetadata(e){return function Eq(n,e){return function fq(n,e){n._throwIfRoot("updateMetadata");const t=function W3(n,e,t,r){const o=pt(e.fullServerUrl(),n.host,n._protocol),d=lk(t,r),_=n.maxOperationRetryTime,E=new Tu(o,"PATCH",VT(n,r),_);return E.headers={"Content-Type":"application/json; charset=utf-8"},E.body=d,E.errorHandler=Wb(e),E}(n.storage,n._location,e,qb());return n.storage.makeRequestWithTokens(t,kl)}(n=(0,F.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function Tq(n){return pq(n=(0,F.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Dq(n){return function gq(n){n._throwIfRoot("deleteObject");const e=function K3(n,e){const r=pt(e.fullServerUrl(),n.host,n._protocol),d=new Tu(r,"DELETE",function u(p,_){},n.maxOperationRetryTime);return d.successCodes=[200,204],d.errorHandler=Wb(e),d}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,kl)}(n=(0,F.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw v(e)}}class xV{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(RV(e))throw f("ref() expected a child path but got a URL, use refFromURL instead.");return new xc(SV(this._delegate,e),this)}refFromURL(e){if(!RV(e))throw f("refFromURL() expected a full URL but got a child path, use ref() instead.");try{M.makeFromUrl(e,this._delegate.host)}catch{throw f("refFromUrl() expected a valid full URL but got an invalid one.")}return new xc(SV(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function Aq(n,e,t,r={}){!function vq(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,F.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function RV(n){return/^[A-Za-z]+:\/\//.test(n)}function Oq(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new xV(t,r)}function kV(n){const e=function Fq(n){return new ii.y(e=>{const t=u=>e.next(u);t(n.snapshot);const o=n.on("state_changed",t);return n.then(u=>{t(u),e.complete()},u=>{t(n.snapshot),(u=>{e.error(u)})(u)}),function(){o()}}).pipe(X_(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,ht.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function HT(n){return{getDownloadURL:()=>ut(void 0).pipe(mn.fc,vr(()=>n.getDownloadURL()),mn.iC),getMetadata:()=>ut(void 0).pipe(mn.fc,vr(()=>n.getMetadata()),mn.iC),delete:()=>(0,pn.D)(n.delete()),child:e=>HT(n.child(e)),updateMetadata:e=>(0,pn.D)(n.updateMetadata(e)),put:(e,t)=>kV(n.put(e,t)),putString:(e,t,r)=>kV(n.putString(e,t,r)),list:e=>(0,pn.D)(n.list(e)),listAll:()=>(0,pn.D)(n.listAll())}}!function Pq(n){const e={TaskState:Ts,TaskEvent:X3,StringFormat:Oo,Storage:xV,Reference:xc};n.INTERNAL.registerComponent(new xa.wA("storage-compat",Oq,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.17")}(NT.Z);const Lq=new h.OlP("angularfire2.storageBucket"),Vq=new h.OlP("angularfire2.storage.maxUploadRetryTime"),Uq=new h.OlP("angularfire2.storage.maxOperationRetryTime"),Bq=new h.OlP("angularfire2.storage.use-emulator");let Hq=(()=>{class n{constructor(t,r,i,o,u,d,p,_,E,D){const x=(0,Nr.on)(t,u,r);this.storage=(0,Nr.cc)(`${x.name}.storage.${i}`,"AngularFireStorage",x.name,()=>{const P=u.runOutsideAngular(()=>x.storage(i||void 0)),L=E;return L&&P.useEmulator(...L),p&&P.setMaxUploadRetryTime(p),_&&P.setMaxOperationRetryTime(_),P},[p,_])}ref(t){return HT(this.storage.ref(t))}refFromURL(t){return HT(this.storage.refFromURL(t))}upload(t,r,i){return HT(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Nr.Dh),h.LFG(Nr.xv,8),h.LFG(Lq,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(mn.HU),h.LFG(Vq,8),h.LFG(Uq,8),h.LFG(Bq,8),h.LFG(Ac,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),jq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),$q=(()=>{class n{constructor(){jf.Z.registerVersion("angularfire",mn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[Hq],imports:[jq]}),n})();function fk(){return(0,Wr.e)((n,e)=>{let t,r=!1;n.subscribe((0,Wn.x)(e,i=>{const o=t;t=i,r&&e.next([o,i]),r=!0}))})}function Gq(n,e,t,r,i){return(o,u)=>{let d=t,p=e,_=0;o.subscribe((0,Wn.x)(u,E=>{const D=_++;p=d?n(p,E,D):(d=!0,E),r&&u.next(p)},i&&(()=>{d&&u.next(p),u.complete()})))}}function Wf(n,e){return(0,Wr.e)(Gq(n,e,arguments.length>=2,!0))}U(5881);var ft,zq=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Rc={},pk=pk||{},zt=zq||self;function jT(){}function gk(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Kb(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var mk="closure_uid_"+(1e9*Math.random()>>>0),Wq=0;function Kq(n,e,t){return n.call.apply(n.bind,arguments)}function Zq(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Li(n,e,t){return(Li=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Kq:Zq).apply(null,arguments)}function $T(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Vi(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,o){for(var u=Array(arguments.length-2),d=2;d<arguments.length;d++)u[d-2]=arguments[d];return e.prototype[i].apply(r,u)}}function Xd(){this.s=this.s,this.o=this.o}var Qq={};Xd.prototype.s=!1,Xd.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function qq(n){return Object.prototype.hasOwnProperty.call(n,mk)&&n[mk]||(n[mk]=++Wq)}(this);delete Qq[n]}},Xd.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const NV=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},OV=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let o=0;o<r;o++)o in i&&e.call(t,i[o],o,n)};function PV(n){return Array.prototype.concat.apply([],arguments)}function _k(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function GT(n){return/^[\s\xa0]*$/.test(n)}var Ss,FV=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Ds(n,e){return-1!=n.indexOf(e)}function yk(n,e){return n<e?-1:n>e?1:0}e:{var LV=zt.navigator;if(LV){var VV=LV.userAgent;if(VV){Ss=VV;break e}}Ss=""}function vk(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function UV(n){const e={};for(const t in n)e[t]=n[t];return e}var BV="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function HV(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let o=0;o<BV.length;o++)t=BV[o],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function bk(n){return bk[" "](n),n}bk[" "]=jT;var zT,n,eW=Ds(Ss,"Opera"),Rm=Ds(Ss,"Trident")||Ds(Ss,"MSIE"),jV=Ds(Ss,"Edge"),wk=jV||Rm,$V=Ds(Ss,"Gecko")&&!(Ds(Ss.toLowerCase(),"webkit")&&!Ds(Ss,"Edge"))&&!(Ds(Ss,"Trident")||Ds(Ss,"MSIE"))&&!Ds(Ss,"Edge"),tW=Ds(Ss.toLowerCase(),"webkit")&&!Ds(Ss,"Edge");function GV(){var n=zt.document;return n?n.documentMode:void 0}e:{var Ek="",Ck=(n=Ss,$V?/rv:([^\);]+)(\)|;)/.exec(n):jV?/Edge\/([\d\.]+)/.exec(n):Rm?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):tW?/WebKit\/(\S+)/.exec(n):eW?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Ck&&(Ek=Ck?Ck[1]:""),Rm){var Ik=GV();if(null!=Ik&&Ik>parseFloat(Ek)){zT=String(Ik);break e}}zT=Ek}var nW={};var iW=zt.document&&Rm&&(GV()||parseInt(zT,10))||void 0,sW=function(){if(!zt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{zt.addEventListener("test",jT,e),zt.removeEventListener("test",jT,e)}catch{}return n}();function is(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Zb(n,e){if(is.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if($V){e:{try{bk(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:oW[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Zb.Z.h.call(this)}}is.prototype.h=function(){this.defaultPrevented=!0},Vi(Zb,is);var oW={2:"touch",3:"pen",4:"mouse"};Zb.prototype.h=function(){Zb.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Yb="closure_listenable_"+(1e6*Math.random()|0),aW=0;function lW(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++aW,this.ca=this.fa=!1}function qT(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function WT(n){this.src=n,this.g={},this.h=0}function Dk(n,e){var t=e.type;if(t in n.g){var o,r=n.g[t],i=NV(r,e);(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(qT(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Sk(n,e,t,r){for(var i=0;i<n.length;++i){var o=n[i];if(!o.ca&&o.listener==e&&o.capture==!!t&&o.ia==r)return i}return-1}WT.prototype.add=function(n,e,t,r,i){var o=n.toString();(n=this.g[o])||(n=this.g[o]=[],this.h++);var u=Sk(n,e,r,i);return-1<u?(e=n[u],t||(e.fa=!1)):((e=new lW(e,this.src,o,!!r,i)).fa=t,n.push(e)),e};var Ak="closure_lm_"+(1e6*Math.random()|0),Mk={};function qV(n,e,t,r,i){if(r&&r.once)return KV(n,e,t,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)qV(n,e[o],t,r,i);return null}return t=Nk(t),n&&n[Yb]?n.N(e,t,Kb(r)?!!r.capture:!!r,i):WV(n,e,t,!1,r,i)}function WV(n,e,t,r,i,o){if(!e)throw Error("Invalid event type");var u=Kb(i)?!!i.capture:!!i,d=Rk(n);if(d||(n[Ak]=d=new WT(n)),(t=d.add(e,t,r,u,o)).proxy)return t;if(r=function uW(){var e=cW;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)sW||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(YV(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function KV(n,e,t,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)KV(n,e[o],t,r,i);return null}return t=Nk(t),n&&n[Yb]?n.O(e,t,Kb(r)?!!r.capture:!!r,i):WV(n,e,t,!0,r,i)}function ZV(n,e,t,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)ZV(n,e[o],t,r,i);else r=Kb(r)?!!r.capture:!!r,t=Nk(t),n&&n[Yb]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Sk(o=n.g[e],t,r,i))&&(qT(o[t]),Array.prototype.splice.call(o,t,1),0==o.length&&(delete n.g[e],n.h--))):n&&(n=Rk(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Sk(e,t,r,i)),(t=-1<n?e[n]:null)&&xk(t))}function xk(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Yb])Dk(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(YV(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Rk(e))?(Dk(t,n),0==t.h&&(t.src=null,e[Ak]=null)):qT(n)}}}function YV(n){return n in Mk?Mk[n]:Mk[n]="on"+n}function cW(n,e){if(n.ca)n=!0;else{e=new Zb(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&xk(n),n=t.call(r,e)}return n}function Rk(n){return(n=n[Ak])instanceof WT?n:null}var kk="__closure_events_fn_"+(1e9*Math.random()>>>0);function Nk(n){return"function"==typeof n?n:(n[kk]||(n[kk]=function(e){return n.handleEvent(e)}),n[kk])}function yi(){Xd.call(this),this.i=new WT(this),this.P=this,this.I=null}function Ui(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new is(e,n);else if(e instanceof is)e.target=e.target||n;else{var i=e;HV(e=new is(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var u=e.g=t[o];i=KT(u,r,!0,e)&&i}if(i=KT(u=e.g=n,r,!0,e)&&i,i=KT(u,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=KT(u=e.g=t[o],r,!1,e)&&i}function KT(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var u=e[o];if(u&&!u.ca&&u.capture==t){var d=u.listener,p=u.ia||u.src;u.fa&&Dk(n.i,u),i=!1!==d.call(p,r)&&i}}return i&&!r.defaultPrevented}Vi(yi,Xd),yi.prototype[Yb]=!0,yi.prototype.removeEventListener=function(n,e,t,r){ZV(this,n,e,t,r)},yi.prototype.M=function(){if(yi.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)qT(t[r]);delete n.g[e],n.h--}}this.I=null},yi.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},yi.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Ok=zt.JSON.stringify;function dW(){var n=JV;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Fk,QV=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new fW,n=>n.reset());class fW{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function pW(n){zt.setTimeout(()=>{throw n},0)}function Pk(n,e){Fk||function gW(){var n=zt.Promise.resolve(void 0);Fk=function(){n.then(mW)}}(),Lk||(Fk(),Lk=!0),JV.add(n,e)}var Lk=!1,JV=new class hW{constructor(){this.h=this.g=null}add(e,t){const r=QV.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function mW(){for(var n;n=dW();){try{n.h.call(n.g)}catch(t){pW(t)}var e=QV;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Lk=!1}function ZT(n,e){yi.call(this),this.h=n||1,this.g=e||zt,this.j=Li(this.kb,this),this.l=Date.now()}function Vk(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Uk(n,e,t){if("function"==typeof n)t&&(n=Li(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Li(n.handleEvent,n)}return 2147483647<Number(e)?-1:zt.setTimeout(n,e||0)}function XV(n){n.g=Uk(()=>{n.g=null,n.i&&(n.i=!1,XV(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Vi(ZT,yi),(ft=ZT.prototype).da=!1,ft.S=null,ft.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Ui(this,"tick"),this.da&&(Vk(this),this.start()))}},ft.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ft.M=function(){ZT.Z.M.call(this),Vk(this),delete this.g};class _W extends Xd{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:XV(this)}M(){super.M(),this.g&&(zt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qb(n){Xd.call(this),this.h=n,this.g={}}Vi(Qb,Xd);var eU=[];function tU(n,e,t,r){Array.isArray(t)||(t&&(eU[0]=t.toString()),t=eU);for(var i=0;i<t.length;i++){var o=qV(e,t[i],r||n.handleEvent,!1,n.h||n);if(!o)break;n.g[o.key]=o}}function nU(n){vk(n.g,function(e,t){this.g.hasOwnProperty(t)&&xk(e)},n),n.g={}}function YT(){this.g=!0}function km(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function wW(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var u=1;u<i.length;u++)i[u]=""}}}return Ok(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Qb.prototype.M=function(){Qb.Z.M.call(this),nU(this)},Qb.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},YT.prototype.Aa=function(){this.g=!1},YT.prototype.info=function(){};var Kf={},rU=null;function QT(){return rU=rU||new yi}function iU(n){is.call(this,Kf.Ma,n)}function Jb(n){const e=QT();Ui(e,new iU(e,n))}function sU(n,e){is.call(this,Kf.STAT_EVENT,n),this.stat=e}function As(n){const e=QT();Ui(e,new sU(e,n))}function oU(n,e){is.call(this,Kf.Na,n),this.size=e}function Xb(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return zt.setTimeout(function(){n()},e)}Kf.Ma="serverreachability",Vi(iU,is),Kf.STAT_EVENT="statevent",Vi(sU,is),Kf.Na="timingevent",Vi(oU,is);var JT={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},aU={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Bk(){}function uU(){}Bk.prototype.h=null;var $k,ew={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Hk(){is.call(this,"d")}function jk(){is.call(this,"c")}function XT(){}function tw(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Qb(this),this.P=EW,this.W=new ZT(n=wk?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new cU}function cU(){this.i=null,this.g="",this.h=!1}Vi(Hk,is),Vi(jk,is),Vi(XT,Bk),XT.prototype.g=function(){return new XMLHttpRequest},XT.prototype.i=function(){return{}},$k=new XT;var EW=45e3,Gk={},eD={};function zk(n,e,t){n.K=1,n.v=sD(kc(e)),n.s=t,n.U=!0,dU(n,null)}function dU(n,e){n.F=Date.now(),nw(n),n.A=kc(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),bU(t.h,"t",r),n.C=0,t=n.l.H,n.h=new cU,n.g=$U(n.l,t?e:null,!n.s),0<n.O&&(n.L=new _W(Li(n.Ia,n,n.g),n.O)),tU(n.V,n.g,"readystatechange",n.gb),e=n.H?UV(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Jb(1),function yW(n,e,t,r,i,o){n.info(function(){if(n.g)if(o)for(var u="",d=o.split("&"),p=0;p<d.length;p++){var _=d[p].split("=");if(1<_.length){var E=_[0];_=_[1];var D=E.split("_");u=2<=D.length&&"type"==D[1]?u+(E+"=")+_+"&":u+(E+"=redacted&")}}else u=null;else u=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.X,n.s)}function hU(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function fU(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=CW(n,t),i==eD){4==e&&(n.o=4,As(14),r=!1),km(n.j,n.m,null,"[Incomplete Response]");break}if(i==Gk){n.o=4,As(15),km(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}km(n.j,n.m,i,null),qk(n,i)}hU(n)&&i!=eD&&i!=Gk&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,As(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),rN(e),e.L=!0,As(11))):(km(n.j,n.m,t,"[Invalid Chunked Response]"),Zf(n),rw(n))}function CW(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?eD:(t=Number(e.substring(t,r)),isNaN(t)?Gk:(r+=1)+t>e.length?eD:(e=e.substr(r,t),n.C=r+t,e))}function nw(n){n.Y=Date.now()+n.P,pU(n,n.P)}function pU(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Xb(Li(n.eb,n),e)}function tD(n){n.B&&(zt.clearTimeout(n.B),n.B=null)}function rw(n){0==n.l.G||n.I||UU(n.l,n)}function Zf(n){tD(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Vk(n.W),nU(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function qk(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Zk(t.i,n)))if(t.I=n.N,!n.J&&Zk(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;dD(t),uD(t)}nN(t),As(18)}}else t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=Xb(Li(t.ab,t),6e3));if(1>=CU(t.i)&&t.ka){try{t.ka()}catch{}t.ka=void 0}}else Jf(t,11)}else if((n.J||t.g==n)&&dD(t),!GT(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let _=i[e];if(t.U=_[0],_=_[1],2==t.G)if("c"==_[0]){t.J=_[1],t.la=_[2];const E=_[3];null!=E&&(t.ma=E,t.h.info("VER="+t.ma));const D=_[4];null!=D&&(t.za=D,t.h.info("SVER="+t.za));const x=_[5];null!=x&&"number"==typeof x&&0<x&&(t.K=r=1.5*x,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const P=n.g;if(P){const L=P.g?P.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(L){var o=r.i;!o.g&&(Ds(L,"spdy")||Ds(L,"quic")||Ds(L,"h2"))&&(o.j=o.l,o.g=new Set,o.h&&(Yk(o,o.h),o.h=null))}if(r.D){const J=P.g?P.g.getResponseHeader("X-HTTP-Session-Id"):null;J&&(r.sa=J,cr(r.F,r.D,J))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var u=n;if((r=t).oa=jU(r,r.H?r.la:null,r.W),u.J){IU(r.i,u);var d=u,p=r.K;p&&d.setTimeout(p),d.B&&(tD(d),nw(d)),r.g=u}else LU(r);0<t.l.length&&cD(t)}else"stop"!=_[0]&&"close"!=_[0]||Jf(t,7);else 3==t.G&&("stop"==_[0]||"close"==_[0]?"stop"==_[0]?Jf(t,7):eN(t):"noop"!=_[0]&&t.j&&t.j.wa(_),t.A=0)}Jb(4)}catch{}}function Wk(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(gk(n)||"string"==typeof n)OV(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(gk(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function IW(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(gk(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var o=0;o<i;o++)e.call(void 0,r[o],t&&t[o],n)}}function Nm(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Nm)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Kk(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Yf(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)Yf(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function Yf(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(ft=tw.prototype).setTimeout=function(n){this.P=n},ft.gb=function(n){n=n.target;const e=this.L;e&&3==Nc(n)?e.l():this.Ia(n)},ft.Ia=function(n){try{if(n==this.g)e:{const E=Nc(this.g);var e=this.g.Da();const D=this.g.ba();if(!(3>E)&&(3!=E||wk||this.g&&(this.h.h||this.g.ga()||kU(this.g)))){this.I||4!=E||7==e||Jb(8==e||0>=D?3:2),tD(this);var t=this.g.ba();this.N=t;t:if(hU(this)){var r=kU(this.g);n="";var i=r.length,o=4==Nc(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Zf(this),rw(this);var u="";break t}this.h.i=new zt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==t,function vW(n,e,t,r,i,o,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+o+" "+u})}(this.j,this.u,this.A,this.m,this.X,E,t),this.i){if(this.$&&!this.J){t:{if(this.g){var d,p=this.g;if((d=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!GT(d)){var _=d;break t}}_=null}if(!(t=_)){this.i=!1,this.o=3,As(12),Zf(this),rw(this);break e}km(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,qk(this,t)}this.U?(fU(this,E,u),wk&&this.i&&3==E&&(tU(this.V,this.W,"tick",this.fb),this.W.start())):(km(this.j,this.m,u,null),qk(this,u)),4==E&&Zf(this),this.i&&!this.I&&(4==E?UU(this.l,this):(this.i=!1,nw(this)))}else 400==t&&0<u.indexOf("Unknown SID")?(this.o=3,As(12)):(this.o=0,As(13)),Zf(this),rw(this)}}}catch{}},ft.fb=function(){if(this.g){var n=Nc(this.g),e=this.g.ga();this.C<e.length&&(tD(this),fU(this,n,e),this.i&&4!=n&&nw(this))}},ft.cancel=function(){this.I=!0,Zf(this)},ft.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function bW(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Jb(3),As(17)),Zf(this),this.o=2,rw(this)):pU(this,this.Y-n)},(ft=Nm.prototype).R=function(){Kk(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},ft.T=function(){return Kk(this),this.g.concat()},ft.get=function(n,e){return Yf(this.h,n)?this.h[n]:e},ft.set=function(n,e){Yf(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},ft.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],o=this.get(i);n.call(e,o,i,this)}};var gU=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Qf(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Qf){this.g=void 0!==e?e:n.g,nD(this,n.j),this.s=n.s,rD(this,n.i),iD(this,n.m),this.l=n.l,e=n.h;var t=new ow;t.i=e.i,e.g&&(t.g=new Nm(e.g),t.h=e.h),mU(this,t),this.o=n.o}else n&&(t=String(n).match(gU))?(this.g=!!e,nD(this,t[1]||"",!0),this.s=iw(t[2]||""),rD(this,t[3]||"",!0),iD(this,t[4]),this.l=iw(t[5]||"",!0),mU(this,t[6]||"",!0),this.o=iw(t[7]||"")):(this.g=!!e,this.h=new ow(null,this.g))}function kc(n){return new Qf(n)}function nD(n,e,t){n.j=t?iw(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function rD(n,e,t){n.i=t?iw(e,!0):e}function iD(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function mU(n,e,t){e instanceof ow?(n.h=e,function NW(n,e){e&&!n.j&&(eh(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(yU(this,r),bU(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=sw(e,RW)),n.h=new ow(e,n.g))}function cr(n,e,t){n.h.set(e,t)}function sD(n){return cr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function iw(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function sw(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,AW),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function AW(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Qf.prototype.toString=function(){var n=[],e=this.j;e&&n.push(sw(e,_U,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(sw(e,_U,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(sw(t,"/"==t.charAt(0)?xW:MW,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",sw(t,kW)),n.join("")};var _U=/[#\/\?@]/g,MW=/[#\?:]/g,xW=/[#\?]/g,RW=/[#\?@]/g,kW=/#/g;function ow(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function eh(n){n.g||(n.g=new Nm,n.h=0,n.i&&function TW(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var o=n[t].substring(0,r);i=n[t].substring(r+1)}else o=n[t];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function yU(n,e){eh(n),e=Om(n,e),Yf(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Yf((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Kk(n)))}function vU(n,e){return eh(n),e=Om(n,e),Yf(n.g.h,e)}function bU(n,e,t){yU(n,e),0<t.length&&(n.i=null,n.g.set(Om(n,e),_k(t)),n.h+=t.length)}function Om(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function wU(n){this.l=n||PW,n=zt.PerformanceNavigationTiming?0<(n=zt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(zt.g&&zt.g.Ea&&zt.g.Ea()&&zt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ft=ow.prototype).add=function(n,e){eh(this),this.i=null,n=Om(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ft.forEach=function(n,e){eh(this),this.g.forEach(function(t,r){OV(t,function(i){n.call(e,i,r,this)},this)},this)},ft.T=function(){eh(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],o=0;o<i.length;o++)t.push(e[r]);return t},ft.R=function(n){eh(this);var e=[];if("string"==typeof n)vU(this,n)&&(e=PV(e,this.g.get(Om(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=PV(e,n[t])}return e},ft.set=function(n,e){return eh(this),this.i=null,vU(this,n=Om(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ft.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},ft.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var u=i;""!==r[o]&&(u+="="+encodeURIComponent(String(r[o]))),n.push(u)}}return this.i=n.join("&")};var PW=10;function EU(n){return!!n.h||!!n.g&&n.g.size>=n.j}function CU(n){return n.h?1:n.g?n.g.size:0}function Zk(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Yk(n,e){n.g?n.g.add(e):n.h=e}function IU(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function TU(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return _k(n.i)}function Qk(){}function FW(){this.g=new Qk}function LW(n,e,t){const r=t||"";try{Wk(n,function(i,o){let u=i;Kb(i)&&(u=Ok(i)),e.push(r+o+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function oD(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function aw(n){this.l=n.$b||null,this.j=n.ib||!1}function aD(n,e){yi.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Jk,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}wU.prototype.cancel=function(){if(this.i=TU(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Qk.prototype.stringify=function(n){return zt.JSON.stringify(n,void 0)},Qk.prototype.parse=function(n){return zt.JSON.parse(n,void 0)},Vi(aw,Bk),aw.prototype.g=function(){return new aD(this.l,this.j)},aw.prototype.i=function(n){return function(){return n}}({}),Vi(aD,yi);var Jk=0;function DU(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function lw(n){n.readyState=4,n.l=null,n.j=null,n.A=null,uw(n)}function uw(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ft=aD.prototype).open=function(n,e){if(this.readyState!=Jk)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,uw(this)},ft.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||zt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},ft.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,lw(this)),this.readyState=Jk},ft.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,uw(this)),this.g&&(this.readyState=3,uw(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof zt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;DU(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},ft.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?lw(this):uw(this),3==this.readyState&&DU(this)}},ft.Ua=function(n){this.g&&(this.response=this.responseText=n,lw(this))},ft.Ta=function(n){this.g&&(this.response=n,lw(this))},ft.ha=function(){this.g&&lw(this)},ft.setRequestHeader=function(n,e){this.v.append(n,e)},ft.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ft.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(aD.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var UW=zt.JSON.parse;function Kr(n){yi.call(this),this.headers=new Nm,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=SU,this.K=this.L=!1}Vi(Kr,yi);var SU="",BW=/^https?$/i,HW=["POST","PUT"];function $W(n){return"content-type"==n.toLowerCase()}function AU(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,MU(n),lD(n)}function MU(n){n.D||(n.D=!0,Ui(n,"complete"),Ui(n,"error"))}function xU(n){if(n.h&&typeof pk<"u"&&(!n.C[1]||4!=Nc(n)||2!=n.ba()))if(n.v&&4==Nc(n))Uk(n.Fa,0,n);else if(Ui(n,"readystatechange"),4==Nc(n)){n.h=!1;try{const d=n.ba();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===d){var i=String(n.H).match(gU)[1]||null;if(!i&&zt.self&&zt.self.location){var o=zt.self.location.protocol;i=o.substr(0,o.length-1)}r=!BW.test(i?i.toLowerCase():"")}t=r}if(t)Ui(n,"complete"),Ui(n,"success");else{n.m=6;try{var u=2<Nc(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.ba()+"]",MU(n)}}finally{lD(n)}}}function lD(n,e){if(n.g){RU(n);const t=n.g,r=n.C[0]?jT:null;n.g=null,n.C=null,e||Ui(n,"ready");try{t.onreadystatechange=r}catch{}}}function RU(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(zt.clearTimeout(n.A),n.A=null)}function Nc(n){return n.g?n.g.readyState:0}function kU(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case SU:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Xk(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function GW(n){let e="";return vk(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):cr(n,e,t))}function cw(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function NU(n){this.za=0,this.l=[],this.h=new YT,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=cw("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=cw("baseRetryDelayMs",5e3,n),this.$a=cw("retryDelaySeedMs",1e4,n),this.Ya=cw("forwardChannelMaxRetries",2,n),this.ra=cw("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new wU(n&&n.concurrentRequestLimit),this.Ca=new FW,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function eN(n){if(OU(n),3==n.G){var e=n.V++,t=kc(n.F);cr(t,"SID",n.J),cr(t,"RID",e),cr(t,"TYPE","terminate"),dw(n,t),(e=new tw(n,n.h,e,void 0)).K=2,e.v=sD(kc(t)),t=!1,zt.navigator&&zt.navigator.sendBeacon&&(t=zt.navigator.sendBeacon(e.v.toString(),"")),!t&&zt.Image&&((new Image).src=e.v,t=!0),t||(e.g=$U(e.l,null),e.g.ea(e.v)),e.F=Date.now(),nw(e)}HU(n)}function uD(n){n.g&&(rN(n),n.g.cancel(),n.g=null)}function OU(n){uD(n),n.u&&(zt.clearTimeout(n.u),n.u=null),dD(n),n.i.cancel(),n.m&&("number"==typeof n.m&&zt.clearTimeout(n.m),n.m=null)}function tN(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&cD(n)}function cD(n){EU(n.i)||n.m||(n.m=!0,Pk(n.Ha,n),n.C=0)}function PU(n,e){var t;t=e?e.m:n.V++;const r=kc(n.F);cr(r,"SID",n.J),cr(r,"RID",t),cr(r,"AID",n.U),dw(n,r),n.o&&n.s&&Xk(r,n.o,n.s),t=new tw(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=FU(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Yk(n.i,t),zk(t,r,e)}function dw(n,e){n.j&&Wk({},function(t,r){cr(e,r,t)})}function FU(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Li(n.j.Oa,n.j,n):null;e:{var i=n.l;let o=-1;for(;;){const u=["count="+t];-1==o?0<t?(o=i[0].h,u.push("ofs="+o)):o=0:u.push("ofs="+o);let d=!0;for(let p=0;p<t;p++){let _=i[p].h;const E=i[p].g;if(_-=o,0>_)o=Math.max(0,i[p].h-100),d=!1;else try{LW(E,u,"req"+_+"_")}catch{r&&r(E)}}if(d){r=u.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function LU(n){n.g||n.u||(n.Y=1,Pk(n.Ga,n),n.A=0)}function nN(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Xb(Li(n.Ga,n),BU(n,n.A)),n.A++,0))}function rN(n){null!=n.B&&(zt.clearTimeout(n.B),n.B=null)}function VU(n){n.g=new tw(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=kc(n.oa);cr(e,"RID","rpc"),cr(e,"SID",n.J),cr(e,"CI",n.N?"0":"1"),cr(e,"AID",n.U),dw(n,e),cr(e,"TYPE","xmlhttp"),n.o&&n.s&&Xk(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=sD(kc(e)),t.s=null,t.U=!0,dU(t,n)}function dD(n){null!=n.v&&(zt.clearTimeout(n.v),n.v=null)}function UU(n,e){var t=null;if(n.g==e){dD(n),rN(n),n.g=null;var r=2}else{if(!Zk(n.i,e))return;t=e.D,IU(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Ui(r=QT(),new oU(r,t,e,i)),cD(n)}else LU(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function zW(n,e){return!(CU(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Xb(Li(n.Ha,n,e),BU(n,n.C)),n.C++,0)))}(n,e)||2==r&&nN(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Jf(n,5);break;case 4:Jf(n,10);break;case 3:Jf(n,6);break;default:Jf(n,2)}}function BU(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Jf(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Li(n.jb,n);t||(t=new Qf("//www.google.com/images/cleardot.gif"),zt.location&&"http"==zt.location.protocol||nD(t,"https"),sD(t)),function VW(n,e){const t=new YT;if(zt.Image){const r=new Image;r.onload=$T(oD,t,r,"TestLoadImage: loaded",!0,e),r.onerror=$T(oD,t,r,"TestLoadImage: error",!1,e),r.onabort=$T(oD,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=$T(oD,t,r,"TestLoadImage: timeout",!1,e),zt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else As(2);n.G=0,n.j&&n.j.va(e),HU(n),OU(n)}function HU(n){n.G=0,n.I=-1,n.j&&((0!=TU(n.i).length||0!=n.l.length)&&(n.i.i.length=0,_k(n.l),n.l.length=0),n.j.ua())}function jU(n,e,t){let r=function DW(n){return n instanceof Qf?kc(n):new Qf(n,void 0)}(t);if(""!=r.i)e&&rD(r,e+"."+r.i),iD(r,r.m);else{const i=zt.location;r=function SW(n,e,t,r){var i=new Qf(null,void 0);return n&&nD(i,n),e&&rD(i,e),t&&iD(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&vk(n.aa,function(i,o){cr(r,o,i)}),t=n.sa,(e=n.D)&&t&&cr(r,e,t),cr(r,"VER",n.ma),dw(n,r),r}function $U(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Kr(t&&n.Ba&&!n.qa?new aw({ib:!0}):n.qa)).L=n.H,e}function GU(){}function hD(){if(Rm&&!(10<=Number(iW)))throw Error("Environmental error: no available transport.")}function Po(n,e){yi.call(this),this.g=new NU(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!GT(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!GT(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Pm(this)}function zU(n){Hk.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function qU(){jk.call(this),this.status=1}function Pm(n){this.g=n}(ft=Kr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():$k.g(),this.C=function lU(n){return n.h||(n.h=n.i())}(this.u?this.u:$k),this.g.onreadystatechange=Li(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(o){return void AU(this,o)}n=t||"";const i=new Nm(this.headers);r&&Wk(r,function(o,u){i.set(u,o)}),r=function Jq(n){e:{var e=$W;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=zt.FormData&&n instanceof zt.FormData,!(0<=NV(HW,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(o,u){this.g.setRequestHeader(u,o)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{RU(this),0<this.B&&((this.K=function jW(n){return Rm&&function rW(){return function Xq(n){var e=nW;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=FV(String(zT)).split("."),t=FV("9").split("."),r=Math.max(e.length,t.length);for(let u=0;0==n&&u<r;u++){var i=e[u]||"",o=t[u]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==i[0].length&&0==o[0].length)break;n=yk(0==i[1].length?0:parseInt(i[1],10),0==o[1].length?0:parseInt(o[1],10))||yk(0==i[2].length,0==o[2].length)||yk(i[2],o[2]),i=i[3],o=o[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Li(this.pa,this)):this.A=Uk(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(o){AU(this,o)}},ft.pa=function(){typeof pk<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ui(this,"timeout"),this.abort(8))},ft.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ui(this,"complete"),Ui(this,"abort"),lD(this))},ft.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),lD(this,!0)),Kr.Z.M.call(this)},ft.Fa=function(){this.s||(this.F||this.v||this.l?xU(this):this.cb())},ft.cb=function(){xU(this)},ft.ba=function(){try{return 2<Nc(this)?this.g.status:-1}catch{return-1}},ft.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},ft.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),UW(e)}},ft.Da=function(){return this.m},ft.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ft=NU.prototype).ma=8,ft.G=1,ft.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch{}},ft.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new tw(this,this.h,n,void 0);let o=this.s;if(this.P&&(o?(o=UV(o),HV(o,this.P)):o=this.P),null===this.o&&(i.H=o),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=FU(this,i,e),cr(t=kc(this.F),"RID",n),cr(t,"CVER",22),this.D&&cr(t,"X-HTTP-Session-Id",this.D),dw(this,t),this.o&&o&&Xk(t,this.o,o),Yk(this.i,i),this.Ra&&cr(t,"TYPE","init"),this.ja?(cr(t,"$req",e),cr(t,"SID","null"),i.$=!0,zk(i,t,null)):zk(i,t,e),this.G=2}}else 3==this.G&&(n?PU(this,n):0==this.l.length||EU(this.i)||PU(this))},ft.Ga=function(){if(this.u=null,VU(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Xb(Li(this.bb,this),n)}},ft.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,As(10),uD(this),VU(this))},ft.ab=function(){null!=this.v&&(this.v=null,uD(this),nN(this),As(19))},ft.jb=function(n){n?(this.h.info("Successfully pinged google.com"),As(2)):(this.h.info("Failed to ping google.com"),As(1))},(ft=GU.prototype).xa=function(){},ft.wa=function(){},ft.va=function(){},ft.ua=function(){},ft.Oa=function(){},hD.prototype.g=function(n,e){return new Po(n,e)},Vi(Po,yi),Po.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Pk(Li(n.hb,n,e))),As(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=jU(n,null,n.W),cD(n)},Po.prototype.close=function(){eN(this.g)},Po.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,tN(this.g,e)}else this.v?((e={}).__data__=Ok(n),tN(this.g,e)):tN(this.g,n)},Po.prototype.M=function(){this.g.j=null,delete this.j,eN(this.g),delete this.g,Po.Z.M.call(this)},Vi(zU,Hk),Vi(qU,jk),Vi(Pm,GU),Pm.prototype.xa=function(){Ui(this.g,"a")},Pm.prototype.wa=function(n){Ui(this.g,new zU(n))},Pm.prototype.va=function(n){Ui(this.g,new qU(n))},Pm.prototype.ua=function(){Ui(this.g,"b")},hD.prototype.createWebChannel=hD.prototype.g,Po.prototype.send=Po.prototype.u,Po.prototype.open=Po.prototype.m,Po.prototype.close=Po.prototype.close,JT.NO_ERROR=0,JT.TIMEOUT=8,JT.HTTP_ERROR=6,aU.COMPLETE="complete",uU.EventType=ew,ew.OPEN="a",ew.CLOSE="b",ew.ERROR="c",ew.MESSAGE="d",yi.prototype.listen=yi.prototype.N,Kr.prototype.listenOnce=Kr.prototype.O,Kr.prototype.getLastError=Kr.prototype.La,Kr.prototype.getLastErrorCode=Kr.prototype.Da,Kr.prototype.getStatus=Kr.prototype.ba,Kr.prototype.getResponseJson=Kr.prototype.Qa,Kr.prototype.getResponseText=Kr.prototype.ga,Kr.prototype.send=Kr.prototype.ea;var qW=Rc.createWebChannelTransport=function(){return new hD},WW=Rc.getStatEventTarget=function(){return QT()},iN=Rc.ErrorCode=JT,KW=Rc.EventType=aU,ZW=Rc.Event=Kf,WU=Rc.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},YW=Rc.FetchXmlHttpFactory=aw,fD=Rc.WebChannel=uU,QW=Rc.XhrIo=Kr;const KU="@firebase/firestore";class vi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vi.UNAUTHENTICATED=new vi(null),vi.GOOGLE_CREDENTIALS=new vi("google-credentials-uid"),vi.FIRST_PARTY=new vi("first-party-uid"),vi.MOCK_USER=new vi("mock-user");let Fm="9.9.4";const th=new Ra.Yd("@firebase/firestore");function sN(){return th.logLevel}function ze(n,...e){if(th.logLevel<=Ra.in.DEBUG){const t=e.map(oN);th.debug(`Firestore (${Fm}): ${n}`,...t)}}function Hr(n,...e){if(th.logLevel<=Ra.in.ERROR){const t=e.map(oN);th.error(`Firestore (${Fm}): ${n}`,...t)}}function Xf(n,...e){if(th.logLevel<=Ra.in.WARN){const t=e.map(oN);th.warn(`Firestore (${Fm}): ${n}`,...t)}}function oN(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function gt(n="Unexpected state"){const e=`FIRESTORE (${Fm}) INTERNAL ASSERTION FAILED: `+n;throw Hr(e),new Error(e)}function Ht(n,e){n||gt()}function at(n,e){return n}const we={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class He extends F.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class bi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class ZU{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class e6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(vi.UNAUTHENTICATED))}shutdown(){}}class t6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class n6{constructor(e){this.t=e,this.currentUser=vi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const o=_=>this.i!==i?(i=this.i,t(_)):Promise.resolve();let u=new bi;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new bi,e.enqueueRetryable(()=>o(this.currentUser))};const d=()=>{const _=u;e.enqueueRetryable((0,De.Z)(function*(){yield _.promise,yield o(r.currentUser)}))},p=_=>{ze("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(_=>p(_)),setTimeout(()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?p(_):(ze("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new bi)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ze("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ht("string"==typeof r.accessToken),new ZU(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ht(null===e||"string"==typeof e),new vi(e)}}class r6{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=vi.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Ht(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class i6{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new r6(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(vi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class YU{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class s6{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=o=>{null!=o.error&&ze("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const u=o.token!==this.A;return this.A=o.token,ze("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{ze("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.T.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.T.getImmediate({optional:!0});o?i(o):ze("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ht("string"==typeof t.token),this.A=t.token,new YU(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function o6(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class QU{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=o6(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}}function qt(n,e){return n<e?-1:n>e?1:0}function Lm(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function JU(n){return n+"\0"}class dr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new He(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new He(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new He(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new He(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return dr.fromMillis(Date.now())}static fromDate(e){return dr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new dr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?qt(this.nanoseconds,e.nanoseconds):qt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Lt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Lt(e)}static min(){return new Lt(new dr(0,0))}static max(){return new Lt(new dr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class hw{constructor(e,t,r){void 0===t?t=0:t>e.length&&gt(),void 0===r?r=e.length-t:r>e.length-t&&gt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===hw.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof hw?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=e.get(i),u=t.get(i);if(o<u)return-1;if(o>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class En extends hw{construct(e,t,r){return new En(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new He(we.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new En(t)}static emptyPath(){return new En([])}}const a6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Or extends hw{construct(e,t,r){return new Or(e,t,r)}static isValidIdentifier(e){return a6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Or.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Or(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(0===r.length)throw new He(we.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const d=e[i];if("\\"===d){if(i+1===e.length)throw new He(we.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[i+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new He(we.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,i+=2}else"`"===d?(u=!u,i++):"."!==d||u?(r+=d,i++):(o(),i++)}if(o(),u)throw new He(we.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Or(t)}static emptyPath(){return new Or([])}}class rt{constructor(e){this.path=e}static fromPath(e){return new rt(En.fromString(e))}static fromName(e){return new rt(En.fromString(e).popFirst(5))}static empty(){return new rt(En.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===En.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return En.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new rt(new En(e.slice()))}}class pD{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function aN(n){return n.fields.find(e=>2===e.kind)}function ep(n){return n.fields.filter(e=>2!==e.kind)}pD.UNKNOWN_ID=-1;class gD{constructor(e,t){this.fieldPath=e,this.kind=t}}class fw{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new fw(0,Fo.min())}}function XU(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Lt.fromTimestamp(1e9===r?new dr(t+1,0):new dr(t,r));return new Fo(i,rt.empty(),e)}function eB(n){return new Fo(n.readTime,n.key,-1)}class Fo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Fo(Lt.min(),rt.empty(),-1)}static max(){return new Fo(Lt.max(),rt.empty(),-1)}}function lN(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=rt.comparator(n.documentKey,e.documentKey),0!==t?t:qt(n.largestBatchId,e.largestBatchId))}const tB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nB{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function nh(n){return uN.apply(this,arguments)}function uN(){return uN=(0,De.Z)(function*(n){if(n.code!==we.FAILED_PRECONDITION||n.message!==tB)throw n;ze("LocalStore","Unexpectedly lost primary lease")}),uN.apply(this,arguments)}class me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&gt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new me((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof me?t:me.resolve(t)}catch(t){return me.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):me.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):me.reject(t)}static resolve(e){return new me((t,r)=>{t(e)})}static reject(e){return new me((t,r)=>{r(e)})}static waitFor(e){return new me((t,r)=>{let i=0,o=0,u=!1;e.forEach(d=>{++i,d.next(()=>{++o,u&&o===i&&t()},p=>r(p))}),u=!0,o===i&&t()})}static or(e){let t=me.resolve(!1);for(const r of e)t=t.next(i=>i?me.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new me((r,i)=>{const o=e.length,u=new Array(o);let d=0;for(let p=0;p<o;p++){const _=p;t(e[_]).next(E=>{u[_]=E,++d,d===o&&r(u)},E=>i(E))}})}static doWhile(e,t){return new me((r,i)=>{const o=()=>{!0===e()?t().next(()=>{o()},i):r()};o()})}}class mD{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new bi,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new pw(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=cN(r.target.error);this.P.reject(new pw(e,i))}}static open(e,t,r,i){try{return new mD(t,e.transaction(i,r))}catch(o){throw new pw(t,o)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(ze("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new d6(t)}}class Nl{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Nl.D((0,F.z$)())&&Hr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ze("SimpleDb","Removing database:",e),tp(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,F.hl)())return!1;if(Nl.N())return!0;const e=(0,F.z$)(),t=Nl.D(e),r=0<t&&t<10,i=Nl.k(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.M)}static O(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,De.Z)(function*(){return t.db||(ze("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const o=indexedDB.open(t.name,t.version);o.onsuccess=u=>{r(u.target.result)},o.onblocked=()=>{i(new pw(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=u=>{const d=u.target.error;i("VersionError"===d.name?new He(we.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new He(we.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new pw(e,d))},o.onupgradeneeded=u=>{ze("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.S.$(u.target.result,o.transaction,u.oldVersion,t.version).next(()=>{ze("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var o=this;return(0,De.Z)(function*(){const u="readonly"===t;let d=0;for(;;){++d;try{o.db=yield o.F(e);const p=mD.open(o.db,e,u?"readonly":"readwrite",r),_=i(p).next(E=>(p.V(),E)).catch(E=>(p.abort(E),me.reject(E))).toPromise();return _.catch(()=>{}),yield p.v,_}catch(p){const _=p,E="FirebaseError"!==_.name&&d<3;if(ze("SimpleDb","Transaction failed with error:",_.message,"Retrying:",E),o.close(),!E)return Promise.reject(_)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class c6{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return tp(this.U.delete())}}class pw extends He{constructor(e,t){super(we.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function rh(n){return"IndexedDbTransactionError"===n.name}class d6{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ze("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ze("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),tp(r)}add(e){return ze("SimpleDb","ADD",this.store.name,e,e),tp(this.store.add(e))}get(e){return tp(this.store.get(e)).next(t=>(void 0===t&&(t=null),ze("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ze("SimpleDb","DELETE",this.store.name,e),tp(this.store.delete(e))}count(){return ze("SimpleDb","COUNT",this.store.name),tp(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),o=[];return this.H(i,(u,d)=>{o.push(d)}).next(()=>o)}{const i=this.store.getAll(r.range);return new me((o,u)=>{i.onerror=d=>{u(d.target.error)},i.onsuccess=d=>{o(d.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new me((i,o)=>{r.onerror=u=>{o(u.target.error)},r.onsuccess=u=>{i(u.target.result)}})}Y(e,t){ze("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(o,u,d)=>d.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new me((r,i)=>{t.onerror=o=>{const u=cN(o.target.error);i(u)},t.onsuccess=o=>{const u=o.target.result;u?e(u.primaryKey,u.value).next(d=>{d?u.continue():r()}):r()}})}H(e,t){const r=[];return new me((i,o)=>{e.onerror=u=>{o(u.target.error)},e.onsuccess=u=>{const d=u.target.result;if(!d)return void i();const p=new c6(d),_=t(d.primaryKey,d.value,p);if(_ instanceof me){const E=_.catch(D=>(p.done(),me.reject(D)));r.push(E)}p.isDone?i():null===p.G?d.continue():d.continue(p.G)}}).next(()=>me.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function tp(n){return new me((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=cN(r.target.error);t(i)}})}let rB=!1;function cN(n){const e=Nl.D((0,F.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new He("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return rB||(rB=!0,setTimeout(()=>{throw r},0)),r}}return n}class h6{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;ze("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,De.Z)(function*(){t.task=null;try{ze("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){rh(r)?ze("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield nh(r)}yield t.nt(1)}))}}class f6{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,De.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,o=!0;return me.doWhile(()=>!0===o&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(u=>{if(null!==u&&!r.has(u))return ze("IndexBackiller",`Processing collection: ${u}`),this.rt(e,u,i).next(d=>{i-=d,r.add(u)});o=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{const u=o.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next(()=>this.ot(i,o)).next(d=>(ze("IndexBackiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d))).next(()=>u.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,o)=>{const u=eB(o);lN(u,r)>0&&(r=u)}),new Fo(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Qs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function iB(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function np(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function sB(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Qs.at=-1;class Pr{constructor(e,t){this.comparator=e,this.root=t||Bi.EMPTY}insert(e,t){return new Pr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Bi.BLACK,null,null))}remove(e){return new Pr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _D(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _D(this.root,e,this.comparator,!1)}getReverseIterator(){return new _D(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _D(this.root,e,this.comparator,!0)}}class _D{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Bi{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??Bi.RED,this.left=i??Bi.EMPTY,this.right=o??Bi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new Bi(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===o?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Bi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Bi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw gt();const e=this.left.check();if(e!==this.right.check())throw gt();return e+(this.isRed()?0:1)}}Bi.EMPTY=null,Bi.RED=!0,Bi.BLACK=!1,Bi.EMPTY=new class{constructor(){this.size=0}get key(){throw gt()}get value(){throw gt()}get color(){throw gt()}get left(){throw gt()}get right(){throw gt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Bi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Un{constructor(e){this.comparator=e,this.data=new Pr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new oB(this.data.getIterator())}getIteratorFrom(e){return new oB(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Un)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Un(this.comparator);return t.data=e,t}}class oB{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Vm(n){return n.hasNext()?n.getNext():void 0}class Lo{constructor(e){this.fields=e,e.sort(Or.comparator)}static empty(){return new Lo([])}unionWith(e){let t=new Un(Or.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Lo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Lm(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class oi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new oi(t)}static fromUint8Array(e){const t=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new oi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}oi.EMPTY_BYTE_STRING=new oi("");const g6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ih(n){if(Ht(!!n),"string"==typeof n){let e=0;const t=g6.exec(n);if(Ht(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Fr(n.seconds),nanos:Fr(n.nanos)}}function Fr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function rp(n){return"string"==typeof n?oi.fromBase64String(n):oi.fromUint8Array(n)}function dN(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function aB(n){const e=n.mapValue.fields.__previous_value__;return dN(e)?aB(e):e}function gw(n){const e=ih(n.mapValue.fields.__local_write_time__.timestampValue);return new dr(e.seconds,e.nanos)}class m6{constructor(e,t,r,i,o,u,d,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.useFetchStreams=p}}class sh{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new sh("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof sh&&e.projectId===this.projectId&&e.database===this.database}}function mw(n){return null==n}function _w(n){return 0===n&&1/n==-1/0}function lB(n){return"number"==typeof n&&Number.isInteger(n)&&!_w(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const oh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},yD={nullValue:"NULL_VALUE"};function ip(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?dN(n)?4:hB(n)?9007199254740991:10:gt()}function Su(n,e){if(n===e)return!0;const t=ip(n);if(t!==ip(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return gw(n).isEqual(gw(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=ih(r.timestampValue),u=ih(i.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,rp(n.bytesValue).isEqual(rp(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Fr(r.geoPointValue.latitude)===Fr(i.geoPointValue.latitude)&&Fr(r.geoPointValue.longitude)===Fr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Fr(r.integerValue)===Fr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=Fr(r.doubleValue),u=Fr(i.doubleValue);return o===u?_w(o)===_w(u):isNaN(o)&&isNaN(u)}return!1}(n,e);case 9:return Lm(n.arrayValue.values||[],e.arrayValue.values||[],Su);case 10:return function(r,i){const o=r.mapValue.fields||{},u=i.mapValue.fields||{};if(iB(o)!==iB(u))return!1;for(const d in o)if(o.hasOwnProperty(d)&&(void 0===u[d]||!Su(o[d],u[d])))return!1;return!0}(n,e);default:return gt()}var i}function yw(n,e){return void 0!==(n.values||[]).find(t=>Su(t,e))}function ah(n,e){if(n===e)return 0;const t=ip(n),r=ip(e);if(t!==r)return qt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return qt(n.booleanValue,e.booleanValue);case 2:return function(i,o){const u=Fr(i.integerValue||i.doubleValue),d=Fr(o.integerValue||o.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1}(n,e);case 3:return uB(n.timestampValue,e.timestampValue);case 4:return uB(gw(n),gw(e));case 5:return qt(n.stringValue,e.stringValue);case 6:return function(i,o){const u=rp(i),d=rp(o);return u.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(i,o){const u=i.split("/"),d=o.split("/");for(let p=0;p<u.length&&p<d.length;p++){const _=qt(u[p],d[p]);if(0!==_)return _}return qt(u.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,o){const u=qt(Fr(i.latitude),Fr(o.latitude));return 0!==u?u:qt(Fr(i.longitude),Fr(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,o){const u=i.values||[],d=o.values||[];for(let p=0;p<u.length&&p<d.length;++p){const _=ah(u[p],d[p]);if(_)return _}return qt(u.length,d.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===oh.mapValue&&o===oh.mapValue)return 0;if(i===oh.mapValue)return 1;if(o===oh.mapValue)return-1;const u=i.fields||{},d=Object.keys(u),p=o.fields||{},_=Object.keys(p);d.sort(),_.sort();for(let E=0;E<d.length&&E<_.length;++E){const D=qt(d[E],_[E]);if(0!==D)return D;const x=ah(u[d[E]],p[_[E]]);if(0!==x)return x}return qt(d.length,_.length)}(n.mapValue,e.mapValue);default:throw gt()}}function uB(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return qt(n,e);const t=ih(n),r=ih(e),i=qt(t.seconds,r.seconds);return 0!==i?i:qt(t.nanos,r.nanos)}function Um(n){return hN(n)}function hN(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=ih(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?rp(n.bytesValue).toBase64():"referenceValue"in n?rt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",o=!0;for(const u of r.values||[])o?o=!1:i+=",",i+=hN(u);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let o="{",u=!0;for(const d of i)u?u=!1:o+=",",o+=`${d}:${hN(r.fields[d])}`;return o+"}"}(n.mapValue):gt();var e}function sp(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function fN(n){return!!n&&"integerValue"in n}function vw(n){return!!n&&"arrayValue"in n}function cB(n){return!!n&&"nullValue"in n}function dB(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function vD(n){return!!n&&"mapValue"in n}function bw(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return np(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=bw(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=bw(n.arrayValue.values[t]);return e}return Object.assign({},n)}function hB(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function _6(n){return"nullValue"in n?yD:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?sp(sh.empty(),rt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:gt()}function y6(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?sp(sh.empty(),rt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?oh:gt()}function fB(n,e){const t=ah(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function pB(n,e){const t=ah(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Hi{constructor(e){this.value=e}static empty(){return new Hi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!vD(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=bw(t)}setAll(e){let t=Or.emptyPath(),r={},i=[];e.forEach((u,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,r,i),r={},i=[],t=d.popLast()}u?r[d.lastSegment()]=bw(u):i.push(d.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());vD(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Su(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];vD(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){np(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Hi(bw(this.value))}}function gB(n){const e=[];return np(n.fields,(t,r)=>{const i=new Or([t]);if(vD(r)){const o=gB(r.mapValue).fields;if(0===o.length)e.push(i);else for(const u of o)e.push(i.child(u))}else e.push(i)}),new Lo(e)}class Jn{constructor(e,t,r,i,o,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=o,this.documentState=u}static newInvalidDocument(e){return new Jn(e,0,Lt.min(),Lt.min(),Hi.empty(),0)}static newFoundDocument(e,t,r){return new Jn(e,1,t,Lt.min(),r,0)}static newNoDocument(e,t){return new Jn(e,2,t,Lt.min(),Hi.empty(),0)}static newUnknownDocument(e,t){return new Jn(e,3,t,Lt.min(),Hi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Lt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Jn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Jn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class v6{constructor(e,t=null,r=[],i=[],o=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=u,this.endAt=d,this.ht=null}}function mB(n,e=null,t=[],r=[],i=null,o=null,u=null){return new v6(n,e,t,r,i,o,u)}function op(n){const e=at(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Um(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),mw(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Um(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Um(r)).join(",")),e.ht=t}return e.ht}function ww(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!A6(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Su(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!wB(n.startAt,e.startAt)&&wB(n.endAt,e.endAt)}function bD(n){return rt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function wD(n,e){return n.filters.filter(t=>t instanceof ji&&t.field.isEqual(e))}function _B(n,e,t){let r=yD,i=!0;for(const o of wD(n,e)){let u=yD,d=!0;switch(o.op){case"<":case"<=":u=_6(o.value);break;case"==":case"in":case">=":u=o.value;break;case">":u=o.value,d=!1;break;case"!=":case"not-in":u=yD}fB({value:r,inclusive:i},{value:u,inclusive:d})<0&&(r=u,i=d)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const u=t.position[o];fB({value:r,inclusive:i},{value:u,inclusive:t.inclusive})<0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}function yB(n,e,t){let r=oh,i=!0;for(const o of wD(n,e)){let u=oh,d=!0;switch(o.op){case">=":case">":u=y6(o.value),d=!1;break;case"==":case"in":case"<=":u=o.value;break;case"<":u=o.value,d=!1;break;case"!=":case"not-in":u=oh}pB({value:r,inclusive:i},{value:u,inclusive:d})>0&&(r=u,i=d)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const u=t.position[o];pB({value:r,inclusive:i},{value:u,inclusive:t.inclusive})>0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}class ji extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new w6(e,t,r):"array-contains"===t?new I6(e,r):"in"===t?new T6(e,r):"not-in"===t?new D6(e,r):"array-contains-any"===t?new S6(e,r):new ji(e,t,r)}static lt(e,t,r){return"in"===t?new E6(e,r):new C6(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(ah(t,this.value)):null!==t&&ip(this.value)===ip(t)&&this.ft(ah(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return gt()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class w6 extends ji{constructor(e,t,r){super(e,t,r),this.key=rt.fromName(r.referenceValue)}matches(e){const t=rt.comparator(e.key,this.key);return this.ft(t)}}class E6 extends ji{constructor(e,t){super(e,"in",t),this.keys=vB(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class C6 extends ji{constructor(e,t){super(e,"not-in",t),this.keys=vB(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function vB(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>rt.fromName(r.referenceValue))}class I6 extends ji{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return vw(t)&&yw(t.arrayValue,this.value)}}class T6 extends ji{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&yw(this.value.arrayValue,t)}}class D6 extends ji{constructor(e,t){super(e,"not-in",t)}matches(e){if(yw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!yw(this.value.arrayValue,t)}}class S6 extends ji{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!vw(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>yw(this.value.arrayValue,r))}}class lh{constructor(e,t){this.position=e,this.inclusive=t}}class Bm{constructor(e,t="asc"){this.field=e,this.dir=t}}function A6(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function bB(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],u=n.position[i];if(r=o.field.isKeyField()?rt.comparator(rt.fromName(u.referenceValue),t.key):ah(u,t.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function wB(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Su(n.position[t],e.position[t]))return!1;return!0}class Oc{constructor(e,t=null,r=[],i=[],o=null,u="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=u,this.startAt=d,this.endAt=p,this._t=null,this.wt=null}}function EB(n,e,t,r,i,o,u,d){return new Oc(n,e,t,r,i,o,u,d)}function Hm(n){return new Oc(n)}function CB(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function pN(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function gN(n){for(const e of n.filters)if(e.dt())return e.field;return null}function mN(n){return null!==n.collectionGroup}function jm(n){const e=at(n);if(null===e._t){e._t=[];const t=gN(e),r=pN(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new Bm(t)),e._t.push(new Bm(Or.keyField(),"asc"));else{let i=!1;for(const o of e.explicitOrderBy)e._t.push(o),o.field.isKeyField()&&(i=!0);if(!i){const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Bm(Or.keyField(),o))}}}return e._t}function Js(n){const e=at(n);if(!e.wt)if("F"===e.limitType)e.wt=mB(e.path,e.collectionGroup,jm(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const o of jm(e))t.push(new Bm(o.field,"desc"===o.dir?"asc":"desc"));const r=e.endAt?new lh(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new lh(e.startAt.position,e.startAt.inclusive):null;e.wt=mB(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function ED(n,e,t){return new Oc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ew(n,e){return ww(Js(n),Js(e))&&n.limitType===e.limitType}function IB(n){return`${op(Js(n))}|lt:${n.limitType}`}function _N(n){return`Query(target=${function b6(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Um(r.value)}`;var r}).join(", ")}]`),mw(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Um(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Um(t)).join(",")),`Target(${e})`}(Js(n))}; limitType=${n.limitType})`}function yN(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):rt.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,o,u){const d=bB(i,o,u);return i.inclusive?d<=0:d<0}(t.startAt,jm(t),r)||t.endAt&&!function(i,o,u){const d=bB(i,o,u);return i.inclusive?d>=0:d>0}(t.endAt,jm(t),r)));var t,r}function TB(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function DB(n){return(e,t)=>{let r=!1;for(const i of jm(n)){const o=M6(i,e,t);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function M6(n,e,t){const r=n.field.isKeyField()?rt.comparator(e.key,t.key):function(i,o,u){const d=o.data.field(i),p=u.data.field(i);return null!==d&&null!==p?ah(d,p):gt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return gt()}}function SB(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_w(e)?"-0":e}}function AB(n){return{integerValue:""+n}}function MB(n,e){return lB(e)?AB(e):SB(n,e)}class CD{constructor(){this._=void 0}}function x6(n,e,t){return n instanceof $m?function(r,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(o.fields.__previous_value__=i),{mapValue:o}}(t,e):n instanceof ap?RB(n,e):n instanceof lp?kB(n,e):function(r,i){const o=xB(r,i),u=NB(o)+NB(r.yt);return fN(o)&&fN(r.yt)?AB(u):SB(r.It,u)}(n,e)}function R6(n,e,t){return n instanceof ap?RB(n,e):n instanceof lp?kB(n,e):t}function xB(n,e){return n instanceof Gm?fN(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class $m extends CD{}class ap extends CD{constructor(e){super(),this.elements=e}}function RB(n,e){const t=OB(e);for(const r of n.elements)t.some(i=>Su(i,r))||t.push(r);return{arrayValue:{values:t}}}class lp extends CD{constructor(e){super(),this.elements=e}}function kB(n,e){let t=OB(e);for(const r of n.elements)t=t.filter(i=>!Su(i,r));return{arrayValue:{values:t}}}class Gm extends CD{constructor(e,t){super(),this.It=e,this.yt=t}}function NB(n){return Fr(n.integerValue||n.doubleValue)}function OB(n){return vw(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Cw{constructor(e,t){this.field=e,this.transform=t}}class N6{constructor(e,t){this.version=e,this.transformResults=t}}class hr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new hr}static exists(e){return new hr(void 0,e)}static updateTime(e){return new hr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ID(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class TD{}function PB(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new qm(n.key,hr.none()):new zm(n.key,n.data,hr.none());{const t=n.data,r=Hi.empty();let i=new Un(Or.comparator);for(let o of e.fields)if(!i.has(o)){let u=t.field(o);null===u&&o.length>1&&(o=o.popLast(),u=t.field(o)),null===u?r.delete(o):r.set(o,u),i=i.add(o)}return new Pc(n.key,r,new Lo(i.toArray()),hr.none())}}function O6(n,e,t){n instanceof zm?function(r,i,o){const u=r.value.clone(),d=VB(r.fieldTransforms,i,o.transformResults);u.setAll(d),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,e,t):n instanceof Pc?function(r,i,o){if(!ID(r.precondition,i))return void i.convertToUnknownDocument(o.version);const u=VB(r.fieldTransforms,i,o.transformResults),d=i.data;d.setAll(LB(r)),d.setAll(u),i.convertToFoundDocument(o.version,d).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Iw(n,e,t,r){return n instanceof zm?function(i,o,u,d){if(!ID(i.precondition,o))return u;const p=i.value.clone(),_=UB(i.fieldTransforms,d,o);return p.setAll(_),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),null}(n,e,t,r):n instanceof Pc?function(i,o,u,d){if(!ID(i.precondition,o))return u;const p=UB(i.fieldTransforms,d,o),_=o.data;return _.setAll(LB(i)),_.setAll(p),o.convertToFoundDocument(o.version,_).setHasLocalMutations(),null===u?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(E=>E.field))}(n,e,t,r):(u=t,ID(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u);var o,u}function P6(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=xB(r.transform,i||null);null!=o&&(null===t&&(t=Hi.empty()),t.set(r.field,o))}return t||null}function FB(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Lm(t,r,(i,o)=>function k6(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof ap&&r instanceof ap||t instanceof lp&&r instanceof lp?Lm(t.elements,r.elements,Su):t instanceof Gm&&r instanceof Gm?Su(t.yt,r.yt):t instanceof $m&&r instanceof $m);var t,r}(i,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class zm extends TD{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Pc extends TD{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function LB(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function VB(n,e,t){const r=new Map;Ht(n.length===t.length);for(let i=0;i<t.length;i++){const o=n[i],u=o.transform,d=e.data.field(o.field);r.set(o.field,R6(u,d,t[i]))}return r}function UB(n,e,t){const r=new Map;for(const i of n){const o=i.transform,u=t.data.field(i.field);r.set(i.field,x6(o,u,e))}return r}class qm extends TD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vN extends TD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class F6{constructor(e){this.count=e}}var Zr,Cn;function BB(n){switch(n){default:return gt();case we.CANCELLED:case we.UNKNOWN:case we.DEADLINE_EXCEEDED:case we.RESOURCE_EXHAUSTED:case we.INTERNAL:case we.UNAVAILABLE:case we.UNAUTHENTICATED:return!1;case we.INVALID_ARGUMENT:case we.NOT_FOUND:case we.ALREADY_EXISTS:case we.PERMISSION_DENIED:case we.FAILED_PRECONDITION:case we.ABORTED:case we.OUT_OF_RANGE:case we.UNIMPLEMENTED:case we.DATA_LOSS:return!0}}function HB(n){if(void 0===n)return Hr("GRPC error has no .code"),we.UNKNOWN;switch(n){case Zr.OK:return we.OK;case Zr.CANCELLED:return we.CANCELLED;case Zr.UNKNOWN:return we.UNKNOWN;case Zr.DEADLINE_EXCEEDED:return we.DEADLINE_EXCEEDED;case Zr.RESOURCE_EXHAUSTED:return we.RESOURCE_EXHAUSTED;case Zr.INTERNAL:return we.INTERNAL;case Zr.UNAVAILABLE:return we.UNAVAILABLE;case Zr.UNAUTHENTICATED:return we.UNAUTHENTICATED;case Zr.INVALID_ARGUMENT:return we.INVALID_ARGUMENT;case Zr.NOT_FOUND:return we.NOT_FOUND;case Zr.ALREADY_EXISTS:return we.ALREADY_EXISTS;case Zr.PERMISSION_DENIED:return we.PERMISSION_DENIED;case Zr.FAILED_PRECONDITION:return we.FAILED_PRECONDITION;case Zr.ABORTED:return we.ABORTED;case Zr.OUT_OF_RANGE:return we.OUT_OF_RANGE;case Zr.UNIMPLEMENTED:return we.UNIMPLEMENTED;case Zr.DATA_LOSS:return we.DATA_LOSS;default:return gt()}}(Cn=Zr||(Zr={}))[Cn.OK=0]="OK",Cn[Cn.CANCELLED=1]="CANCELLED",Cn[Cn.UNKNOWN=2]="UNKNOWN",Cn[Cn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Cn[Cn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Cn[Cn.NOT_FOUND=5]="NOT_FOUND",Cn[Cn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Cn[Cn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Cn[Cn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Cn[Cn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Cn[Cn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Cn[Cn.ABORTED=10]="ABORTED",Cn[Cn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Cn[Cn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Cn[Cn.INTERNAL=13]="INTERNAL",Cn[Cn.UNAVAILABLE=14]="UNAVAILABLE",Cn[Cn.DATA_LOSS=15]="DATA_LOSS";class uh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){np(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return sB(this.inner)}size(){return this.innerSize}}const L6=new Pr(rt.comparator);function Xs(){return L6}const jB=new Pr(rt.comparator);function Tw(...n){let e=jB;for(const t of n)e=e.insert(t.key,t);return e}function $B(n){let e=jB;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Au(){return Dw()}function GB(){return Dw()}function Dw(){return new uh(n=>n.toString(),(n,e)=>n.isEqual(e))}const V6=new Pr(rt.comparator),U6=new Un(rt.comparator);function en(...n){let e=U6;for(const t of n)e=e.add(t);return e}const B6=new Un(qt);function DD(){return B6}class Sw{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Aw.createSynthesizedTargetChangeForCurrentChange(e,t)),new Sw(Lt.min(),r,DD(),Xs(),en())}}class Aw{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Aw(oi.EMPTY_BYTE_STRING,t,en(),en(),en())}}class SD{constructor(e,t,r,i){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=i}}class zB{constructor(e,t){this.targetId=e,this.At=t}}class qB{constructor(e,t,r=oi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class WB{constructor(){this.Rt=0,this.bt=ZB(),this.Pt=oi.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=en(),t=en(),r=en();return this.bt.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:gt()}}),new Aw(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=ZB()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Mt(e){this.Vt=!0,this.bt=this.bt.remove(e)}Ot(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class H6{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Xs(),this.qt=KB(),this.Kt=new Un(qt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:gt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,i)=>{this.Ht(i)&&t(i)})}Yt(e){const t=e.targetId,r=e.At.count,i=this.Xt(t);if(i){const o=i.target;if(bD(o))if(0===r){const u=new rt(o.path);this.jt(t,u,Jn.newNoDocument(u,Lt.min()))}else Ht(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((o,u)=>{const d=this.Xt(u);if(d){if(o.current&&bD(d.target)){const p=new rt(d.target.path);null!==this.Ut.get(p)||this.ee(u,p)||this.jt(u,p,Jn.newNoDocument(p,e))}o.Dt&&(t.set(u,o.xt()),o.Nt())}});let r=en();this.qt.forEach((o,u)=>{let d=!0;u.forEachWhile(p=>{const _=this.Xt(p);return!_||2===_.purpose||(d=!1,!1)}),d&&(r=r.add(o))}),this.Ut.forEach((o,u)=>u.setReadTime(e));const i=new Sw(e,t,this.Kt,this.Ut,r);return this.Ut=Xs(),this.qt=KB(),this.Kt=new Un(qt),i}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const i=this.zt(e);this.ee(e,t)?i.kt(t,1):i.Mt(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.zt(e).Ot()}zt(e){let t=this.Lt.get(e);return t||(t=new WB,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new Un(qt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||ze("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new WB),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function KB(){return new Pr(rt.comparator)}function ZB(){return new Pr(rt.comparator)}const j6={asc:"ASCENDING",desc:"DESCENDING"},$6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class G6{constructor(e,t){this.databaseId=e,this.gt=t}}function Mw(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function YB(n,e){return n.gt?e.toBase64():e.toUint8Array()}function z6(n,e){return Mw(n,e.toTimestamp())}function wi(n){return Ht(!!n),Lt.fromTimestamp(function(e){const t=ih(e);return new dr(t.seconds,t.nanos)}(n))}function bN(n,e){return(t=n,new En(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function QB(n){const e=En.fromString(n);return Ht(a2(e)),e}function xw(n,e){return bN(n.databaseId,e.path)}function Mu(n,e){const t=QB(e);if(t.get(1)!==n.databaseId.projectId)throw new He(we.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new He(we.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new rt(XB(t))}function wN(n,e){return bN(n.databaseId,e)}function JB(n){const e=QB(n);return 4===e.length?En.emptyPath():XB(e)}function Rw(n){return new En(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function XB(n){return Ht(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function e2(n,e,t){return{name:xw(n,e),fields:t.value.mapValue.fields}}function t2(n,e,t){const r=Mu(n,e.name),i=wi(e.updateTime),o=new Hi({mapValue:{fields:e.fields}}),u=Jn.newFoundDocument(r,i,o);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function kw(n,e){let t;if(e instanceof zm)t={update:e2(n,e.key,e.value)};else if(e instanceof qm)t={delete:xw(n,e.key)};else if(e instanceof Pc)t={update:e2(n,e.key,e.data),updateMask:e4(e.fieldMask)};else{if(!(e instanceof vN))return gt();t={verify:xw(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const u=o.transform;if(u instanceof $m)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof ap)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof lp)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Gm)return{fieldPath:o.field.canonicalString(),increment:u.yt};throw gt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:z6(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:gt()),t;var i}function EN(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?hr.updateTime(wi(i.updateTime)):void 0!==i.exists?hr.exists(i.exists):hr.none():hr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,u){let d=null;"setToServerValue"in u?(Ht("REQUEST_TIME"===u.setToServerValue),d=new $m):"appendMissingElements"in u?d=new ap(u.appendMissingElements.values||[]):"removeAllFromArray"in u?d=new lp(u.removeAllFromArray.values||[]):"increment"in u?d=new Gm(o,u.increment):gt();const p=Or.fromServerFormat(u.fieldPath);return new Cw(p,d)}(n,i)):[];var i;if(e.update){const i=Mu(n,e.update.name),o=new Hi({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new Lo((e.updateMask.fieldPaths||[]).map(_=>Or.fromServerFormat(_)));return new Pc(i,o,u,t,r)}return new zm(i,o,t,r)}if(e.delete){const i=Mu(n,e.delete);return new qm(i,t)}if(e.verify){const i=Mu(n,e.verify);return new vN(i,t)}return gt()}function n2(n,e){return{documents:[wN(n,e.path)]}}function r2(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=wN(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=wN(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(p){if(0===p.length)return;const _=p.map(E=>function(D){if("=="===D.op){if(dB(D.value))return{unaryFilter:{field:Wm(D.field),op:"IS_NAN"}};if(cB(D.value))return{unaryFilter:{field:Wm(D.field),op:"IS_NULL"}}}else if("!="===D.op){if(dB(D.value))return{unaryFilter:{field:Wm(D.field),op:"IS_NOT_NAN"}};if(cB(D.value))return{unaryFilter:{field:Wm(D.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wm(D.field),op:Q6(D.op),value:D.value}}}(E));return 1===_.length?_[0]:{compositeFilter:{op:"AND",filters:_}}}(e.filters);i&&(t.structuredQuery.where=i);const o=function(p){if(0!==p.length)return p.map(_=>{return{field:Wm((E=_).field),direction:Y6(E.dir)};var E})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const u=(_=e.limit,n.gt||mw(_)?_:{value:_});var _,d,p;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(t.structuredQuery.endAt={before:!(p=e.endAt).inclusive,values:p.position}),t}function s2(n){let e=JB(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ht(1===r);const E=t.from[0];E.allDescendants?i=E.collectionId:e=e.child(E.collectionId)}let o=[];t.where&&(o=o2(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(E=>{return new Bm(Km((D=E).field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction));var D}));let d=null;t.limit&&(d=function(E){let D;return D="object"==typeof E?E.value:E,mw(D)?null:D}(t.limit));let p=null;var E;t.startAt&&(p=new lh((E=t.startAt).values||[],!!E.before));let _=null;return t.endAt&&(_=function(E){return new lh(E.values||[],!E.before)}(t.endAt)),EB(e,i,u,o,d,"F",p,_)}function o2(n){return n?void 0!==n.unaryFilter?[X6(n)]:void 0!==n.fieldFilter?[J6(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>o2(e)).reduce((e,t)=>e.concat(t)):gt():[]}function Y6(n){return j6[n]}function Q6(n){return $6[n]}function Wm(n){return{fieldPath:n.canonicalString()}}function Km(n){return Or.fromServerFormat(n.fieldPath)}function J6(n){return ji.create(Km(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return gt()}}(n.fieldFilter.op),n.fieldFilter.value)}function X6(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Km(n.unaryFilter.field);return ji.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Km(n.unaryFilter.field);return ji.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Km(n.unaryFilter.field);return ji.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Km(n.unaryFilter.field);return ji.create(i,"!=",{nullValue:"NULL_VALUE"});default:return gt()}}function e4(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function a2(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ms(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=l2(e)),e=t4(n.get(t),e);return l2(e)}function t4(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=o}}return t}function l2(n){return n+"\x01\x01"}function xu(n){const e=n.length;if(Ht(e>=2),2===e)return Ht("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),En.emptyPath();const t=e-2,r=[];let i="";for(let o=0;o<e;){const u=n.indexOf("\x01",o);switch((u<0||u>t)&&gt(),n.charAt(u+1)){case"\x01":const d=n.substring(o,u);let p;0===i.length?p=d:(i+=d,p=i,i=""),r.push(p);break;case"\x10":i+=n.substring(o,u),i+="\0";break;case"\x11":i+=n.substring(o,u+1);break;default:gt()}o=u+2}return new En(r)}const u2=["userId","batchId"];function AD(n,e){return[n,Ms(e)]}function c2(n,e,t){return[n,Ms(e),t]}const n4={},r4=["prefixPath","collectionGroup","readTime","documentId"],i4=["prefixPath","collectionGroup","documentId"],s4=["collectionGroup","readTime","prefixPath","documentId"],o4=["canonicalId","targetId"],a4=["targetId","path"],l4=["path","targetId"],u4=["collectionId","parent"],c4=["indexId","uid"],d4=["uid","sequenceNumber"],h4=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],f4=["indexId","uid","orderedDocumentKey"],p4=["userId","collectionPath","documentId"],g4=["userId","collectionPath","largestBatchId"],m4=["userId","collectionGroup","largestBatchId"],d2=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],_4=[...d2,"documentOverlays"],h2=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],f2=h2,y4=[...f2,"indexConfiguration","indexState","indexEntries"];class CN extends nB{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Ei(n,e){const t=at(n);return Nl.O(t.ie,e)}class IN{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&O6(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Iw(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Iw(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=GB();return this.mutations.forEach(i=>{const o=e.get(i.key),u=o.overlayedDocument;let d=this.applyToLocalView(u,o.mutatedFields);d=t.has(i.key)?null:d;const p=PB(u,d);null!==p&&r.set(i.key,p),u.isValidDocument()||u.convertToNoDocument(Lt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),en())}isEqual(e){return this.batchId===e.batchId&&Lm(this.mutations,e.mutations,(t,r)=>FB(t,r))&&Lm(this.baseMutations,e.baseMutations,(t,r)=>FB(t,r))}}class TN{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ht(e.mutations.length===r.length);let i=V6;const o=e.mutations;for(let u=0;u<o.length;u++)i=i.insert(o[u].key,r[u].version);return new TN(e,t,r,i)}}class DN{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ch{constructor(e,t,r,i,o=Lt.min(),u=Lt.min(),d=oi.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d}withSequenceNumber(e){return new ch(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new ch(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ch(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class p2{constructor(e){this.re=e}}function g2(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:MD(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:xw(i=n.re,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:Mw(i,o.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:up(e.version)};else{if(!e.isUnknownDocument())return gt();r.unknownDocument={path:t.path.toArray(),version:up(e.version)}}var i,o;return r}function MD(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function up(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function cp(n){const e=new dr(n.seconds,n.nanoseconds);return Lt.fromTimestamp(e)}function dp(n,e){const t=(e.baseMutations||[]).map(o=>EN(n.re,o));for(let o=0;o<e.mutations.length-1;++o){const u=e.mutations[o];o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(u.updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o)}const r=e.mutations.map(o=>EN(n.re,o)),i=dr.fromMillis(e.localWriteTimeMs);return new IN(e.batchId,i,t,r)}function Nw(n){const e=cp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?cp(n.lastLimboFreeSnapshotVersion):Lt.min();let r;var i;return void 0!==n.query.documents?(Ht(1===(i=n.query).documents.length),r=Js(Hm(JB(i.documents[0])))):r=Js(s2(n.query)),new ch(r,n.targetId,0,n.lastListenSequenceNumber,e,t,oi.fromBase64String(n.resumeToken))}function m2(n,e){const t=up(e.snapshotVersion),r=up(e.lastLimboFreeSnapshotVersion);let i;i=bD(e.target)?n2(n.re,e.target):r2(n.re,e.target);const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:op(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function SN(n){const e=s2({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?ED(e,e.limit,"L"):e}function AN(n,e){return new DN(e.largestBatchId,EN(n.re,e.overlayMutation))}function _2(n,e){const t=e.path.lastSegment();return[n,Ms(e.path.popLast()),t]}function y2(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:up(r.readTime),documentKey:Ms(r.documentKey.path),largestBatchId:r.largestBatchId}}class b4{getBundleMetadata(e,t){return v2(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:cp(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return v2(e).put({bundleId:(r=t).id,createTime:up(wi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return b2(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:SN(i.bundledQuery),readTime:cp(i.readTime)};var i})}saveNamedQuery(e,t){return b2(e).put({name:(r=t).name,readTime:up(wi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function v2(n){return Ei(n,"bundles")}function b2(n){return Ei(n,"namedQueries")}class xD{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new xD(e,t.uid||"")}getOverlay(e,t){return Ow(e).get(_2(this.userId,t)).next(r=>r?AN(this.It,r):null)}getOverlays(e,t){const r=Au();return me.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((o,u)=>{const d=new DN(t,u);i.push(this.ue(e,d))}),me.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(u=>i.add(Ms(u.getCollectionPath())));const o=[];return i.forEach(u=>{const d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);o.push(Ow(e).Y("collectionPathOverlayIndex",d))}),me.waitFor(o)}getOverlaysForCollection(e,t,r){const i=Au(),o=Ms(t),u=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Ow(e).W("collectionPathOverlayIndex",u).next(d=>{for(const p of d){const _=AN(this.It,p);i.set(_.getKey(),_)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const o=Au();let u;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ow(e).Z({index:"collectionGroupOverlayIndex",range:d},(p,_,E)=>{const D=AN(this.It,_);o.size()<i||D.largestBatchId===u?(o.set(D.getKey(),D),u=D.largestBatchId):E.done()}).next(()=>o)}ue(e,t){return Ow(e).put(function(r,i,o){const[u,d,p]=_2(i,o.mutation.key);return{userId:i,collectionPath:d,documentId:p,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:kw(r.re,o.mutation)}}(this.It,this.userId,t))}}function Ow(n){return Ei(n,"documentOverlays")}class hp{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Fr(e.integerValue));else if("doubleValue"in e){const r=Fr(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),_w(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(rp(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?hB(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):gt()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const i of Object.keys(r))this._e(i,t),this.ae(r[i],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const i of r)this.ae(i,t)}ge(e,t){this.le(t,37),rt.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function w4(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function w2(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const o=w4(255&t[i]);if(r+=o,8!==o)break}return r}(n);return Math.ceil(e/8)}hp.Te=new hp;class E4{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=t.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.ve()}De(e){const t=this.Ce(e),r=w2(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ne(e){const t=this.Ce(e),r=w2(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}ke(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Me(0),this.Me(1)}ve(){this.Fe(0),this.Fe(1)}Me(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class C4{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class I4{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Oe()}}class Pw{constructor(){this.Be=new E4,this.Le=new C4(this.Be),this.Ue=new I4(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class fp{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new fp(this.indexId,this.documentKey,this.arrayValue,r)}}function pp(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=E2(n.arrayValue,e.arrayValue),0!==t?t:(t=E2(n.directionalValue,e.directionalValue),0!==t?t:rt.comparator(n.documentKey,e.documentKey)))}function E2(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class T4{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=aN(e);if(void 0!==t&&!this.ze(t))return!1;const r=ep(e);let i=0,o=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.je){const u=r[i];if(!this.He(this.je,u)||!this.Je(this.Ge[o++],u))return!1;++i}for(;i<r.length;++i){const u=r[i];if(o>=this.Ge.length||!this.Je(this.Ge[o++],u))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class D4{constructor(){this.Ye=new MN}addToCollectionParentIndex(e,t){return this.Ye.add(t),me.resolve()}getCollectionParents(e,t){return me.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return me.resolve()}deleteFieldIndex(e,t){return me.resolve()}getDocumentsMatchingTarget(e,t){return me.resolve(null)}getIndexType(e,t){return me.resolve(0)}getFieldIndexes(e,t){return me.resolve([])}getNextCollectionGroupToUpdate(e){return me.resolve(null)}getMinOffset(e,t){return me.resolve(Fo.min())}getMinOffsetFromCollectionGroup(e,t){return me.resolve(Fo.min())}updateCollectionGroup(e,t,r){return me.resolve()}updateIndexEntries(e,t){return me.resolve()}}class MN{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Un(En.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Un(En.comparator)).toArray()}}const RD=new Uint8Array(0);class S4{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new MN,this.Ze=new uh(r=>op(r),(r,i)=>ww(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const o={collectionId:r,parent:Ms(i)};return C2(e).put(o)}return me.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[JU(t),""],!1,!0);return C2(e).W(i).next(o=>{for(const u of o){if(u.collectionId!==t)break;r.push(xu(u.parent))}return r})}addFieldIndex(e,t){const r=kD(e),i={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var u;delete i.indexId;const o=r.add(i);if(t.indexState){const u=Lw(e);return o.next(d=>{u.put(y2(d,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){const r=kD(e),i=Lw(e),o=Fw(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Fw(e);let i=!0;const o=new Map;return me.forEach(this.tn(t),u=>this.en(e,u).next(d=>{i&&(i=!!d),o.set(u,d)})).next(()=>{if(i){let u=en();const d=[];return me.forEach(o,(p,_)=>{var E;ze("IndexedDbIndexManager",`Using index ${E=p,`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map(et=>`${et.fieldPath}:${et.kind}`).join(",")}`} to execute ${op(t)}`);const D=function(et,Xe){const St=aN(Xe);if(void 0===St)return null;for(const Mt of wD(et,St.fieldPath))switch(Mt.op){case"array-contains-any":return Mt.value.arrayValue.values||[];case"array-contains":return[Mt.value]}return null}(_,p),x=function(et,Xe){const St=new Map;for(const Mt of ep(Xe))for(const ln of wD(et,Mt.fieldPath))switch(ln.op){case"==":case"in":St.set(Mt.fieldPath.canonicalString(),ln.value);break;case"not-in":case"!=":return St.set(Mt.fieldPath.canonicalString(),ln.value),Array.from(St.values())}return null}(_,p),P=function(et,Xe){const St=[];let Mt=!0;for(const ln of ep(Xe)){const jr=0===ln.kind?_B(et,ln.fieldPath,et.startAt):yB(et,ln.fieldPath,et.startAt);St.push(jr.value),Mt&&(Mt=jr.inclusive)}return new lh(St,Mt)}(_,p),L=function(et,Xe){const St=[];let Mt=!0;for(const ln of ep(Xe)){const jr=0===ln.kind?yB(et,ln.fieldPath,et.endAt):_B(et,ln.fieldPath,et.endAt);St.push(jr.value),Mt&&(Mt=jr.inclusive)}return new lh(St,Mt)}(_,p),J=this.nn(p,_,P),ue=this.nn(p,_,L),Ne=this.sn(p,_,x),We=this.rn(p.indexId,D,J,P.inclusive,ue,L.inclusive,Ne);return me.forEach(We,et=>r.J(et,t.limit).next(Xe=>{Xe.forEach(St=>{const Mt=rt.fromSegments(St.documentKey);u.has(Mt)||(u=u.add(Mt),d.push(Mt))})}))}).next(()=>d)}return me.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,i,o,u,d){const p=(null!=t?t.length:1)*Math.max(r.length,o.length),_=p/(null!=t?t.length:1),E=[];for(let D=0;D<p;++D){const x=t?this.on(t[D/_]):RD,P=this.un(e,x,r[D%_],i),L=this.cn(e,x,o[D%_],u),J=d.map(ue=>this.un(e,x,ue,!0));E.push(...this.createRange(P,L,J))}return E}un(e,t,r,i){const o=new fp(e,rt.empty(),t,r);return i?o:o.Ke()}cn(e,t,r,i){const o=new fp(e,rt.empty(),t,r);return i?o.Ke():o}en(e,t){const r=new T4(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let u=null;for(const d of o)r.We(d)&&(!u||d.fields.length>u.fields.length)&&(u=d);return u})}getIndexType(e,t){let r=2;return me.forEach(this.tn(t),i=>this.en(e,i).next(o=>{o?0!==r&&o.fields.length<function(u){let d=new Un(Or.comparator),p=!1;for(const _ of u.filters){const E=_;E.field.isKeyField()||("array-contains"===E.op||"array-contains-any"===E.op?p=!0:d=d.add(E.field))}for(const _ of u.orderBy)_.field.isKeyField()||(d=d.add(_.field));return d.size+(p?1:0)}(i)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new Pw;for(const i of ep(e)){const o=t.data.field(i.fieldPath);if(null==o)return null;const u=r.qe(i.kind);hp.Te.ce(o,u)}return r.$e()}on(e){const t=new Pw;return hp.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new Pw;return hp.Te.ce(sp(this.databaseId,t),r.qe(function(i){const o=ep(i);return 0===o.length?0:o[o.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let i=[];i.push(new Pw);let o=0;for(const u of ep(e)){const d=r[o++];for(const p of i)if(this.ln(t,u.fieldPath)&&vw(d))i=this.fn(i,u,d);else{const _=p.qe(u.kind);hp.Te.ce(d,_)}}return this.dn(i)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const i=[...e],o=[];for(const u of r.arrayValue.values||[])for(const d of i){const p=new Pw;p.seed(d.$e()),hp.Te.ce(u,p.qe(t.kind)),o.push(p)}return o}ln(e,t){return!!e.filters.find(r=>r instanceof ji&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=kD(e),i=Lw(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(o=>{const u=[];return me.forEach(o,d=>i.get([d.indexId,this.uid]).next(p=>{u.push(function(_,E){const D=E?new fw(E.sequenceNumber,new Fo(cp(E.readTime),new rt(xu(E.documentKey)),E.largestBatchId)):fw.empty(),x=_.fields.map(([P,L])=>new gD(Or.fromServerFormat(P),L));return new pD(_.indexId,_.collectionGroup,x,D)}(d,p))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==o?o:qt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=kD(e),o=Lw(e);return this._n(e).next(u=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(d=>me.forEach(d,p=>o.put(y2(p.indexId,this.user,u,r)))))}updateIndexEntries(e,t){const r=new Map;return me.forEach(t,(i,o)=>{const u=r.get(i.collectionGroup);return(u?me.resolve(u):this.getFieldIndexes(e,i.collectionGroup)).next(d=>(r.set(i.collectionGroup,d),me.forEach(d,p=>this.wn(e,i,p).next(_=>{const E=this.mn(o,p);return _.isEqual(E)?me.resolve():this.gn(e,o,p,_,E)}))))})}yn(e,t,r,i){return Fw(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,i){return Fw(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=Fw(e);let o=new Un(pp);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(u,d)=>{o=o.add(new fp(r.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>o)}mn(e,t){let r=new Un(pp);const i=this.an(t,e);if(null==i)return r;const o=aN(t);if(null!=o){const u=e.data.field(o.fieldPath);if(vw(u))for(const d of u.arrayValue.values||[])r=r.add(new fp(t.indexId,e.key,this.on(d),i))}else r=r.add(new fp(t.indexId,e.key,RD,i));return r}gn(e,t,r,i,o){ze("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(d,p,_,E,D){const x=d.getIterator(),P=p.getIterator();let L=Vm(x),J=Vm(P);for(;L||J;){let ue=!1,Ne=!1;if(L&&J){const We=_(L,J);We<0?Ne=!0:We>0&&(ue=!0)}else null!=L?Ne=!0:ue=!0;ue?(E(J),J=Vm(P)):Ne?(D(L),L=Vm(x)):(L=Vm(x),J=Vm(P))}}(i,o,pp,d=>{u.push(this.yn(e,t,r,d))},d=>{u.push(this.pn(e,t,r,d))}),me.waitFor(u)}_n(e){let t=1;return Lw(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,d)=>pp(u,d)).filter((u,d,p)=>!d||0!==pp(u,p[d-1]));const i=[];i.push(e);for(const u of r){const d=pp(u,e),p=pp(u,t);if(0===d)i[0]=e.Ke();else if(d>0&&p<0)i.push(u),i.push(u.Ke());else if(p>0)break}i.push(t);const o=[];for(let u=0;u<i.length;u+=2)o.push(IDBKeyRange.bound([i[u].indexId,this.uid,i[u].arrayValue,i[u].directionalValue,RD,[]],[i[u+1].indexId,this.uid,i[u+1].arrayValue,i[u+1].directionalValue,RD,[]]));return o}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(I2)}getMinOffset(e,t){return me.mapArray(this.tn(t),r=>this.en(e,r).next(i=>i||gt())).next(I2)}}function C2(n){return Ei(n,"collectionParents")}function Fw(n){return Ei(n,"indexEntries")}function kD(n){return Ei(n,"indexConfiguration")}function Lw(n){return Ei(n,"indexState")}function I2(n){Ht(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;lN(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Fo(e.readTime,e.documentKey,t)}const T2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class eo{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new eo(e,eo.DEFAULT_COLLECTION_PERCENTILE,eo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function D2(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),o=[],u=IDBKeyRange.only(t.batchId);let d=0;const p=r.Z({range:u},(E,D,x)=>(d++,x.delete()));o.push(p.next(()=>{Ht(1===d)}));const _=[];for(const E of t.mutations){const D=c2(e,E.key.path,t.batchId);o.push(i.delete(D)),_.push(E.key)}return me.waitFor(o).next(()=>_)}function ND(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw gt();e=n.noDocument}return JSON.stringify(e).length}eo.DEFAULT_COLLECTION_PERCENTILE=10,eo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,eo.DEFAULT=new eo(41943040,eo.DEFAULT_COLLECTION_PERCENTILE,eo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),eo.DISABLED=new eo(-1,0,0);class OD{constructor(e,t,r,i){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static oe(e,t,r,i){Ht(""!==e.uid);const o=e.isAuthenticated()?e.uid:"";return new OD(o,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return dh(e).Z({index:"userMutationsIndex",range:r},(i,o,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const o=Zm(e),u=dh(e);return u.add({}).next(d=>{Ht("number"==typeof d);const p=new IN(d,t,r,i),_=function(x,P,L){const J=L.baseMutations.map(Ne=>kw(x.re,Ne)),ue=L.mutations.map(Ne=>kw(x.re,Ne));return{userId:P,batchId:L.batchId,localWriteTimeMs:L.localWriteTime.toMillis(),baseMutations:J,mutations:ue}}(this.It,this.userId,p),E=[];let D=new Un((x,P)=>qt(x.canonicalString(),P.canonicalString()));for(const x of i){const P=c2(this.userId,x.key.path,d);D=D.add(x.key.path.popLast()),E.push(u.put(_)),E.push(o.put(P,n4))}return D.forEach(x=>{E.push(this.indexManager.addToCollectionParentIndex(e,x))}),e.addOnCommittedListener(()=>{this.In[d]=p.keys()}),me.waitFor(E).next(()=>p)})}lookupMutationBatch(e,t){return dh(e).get(t).next(r=>r?(Ht(r.userId===this.userId),dp(this.It,r)):null)}Tn(e,t){return this.In[t]?me.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return dh(e).Z({index:"userMutationsIndex",range:i},(u,d,p)=>{d.userId===this.userId&&(Ht(d.batchId>=r),o=dp(this.It,d)),p.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return dh(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,o,u)=>{r=o.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return dh(e).W("userMutationsIndex",t).next(r=>r.map(i=>dp(this.It,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=AD(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Zm(e).Z({range:i},(u,d,p)=>{const[_,E,D]=u,x=xu(E);if(_===this.userId&&t.path.isEqual(x))return dh(e).get(D).next(P=>{if(!P)throw gt();Ht(P.userId===this.userId),o.push(dp(this.It,P))});p.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Un(qt);const i=[];return t.forEach(o=>{const u=AD(this.userId,o.path),d=IDBKeyRange.lowerBound(u),p=Zm(e).Z({range:d},(_,E,D)=>{const[x,P,L]=_,J=xu(P);x===this.userId&&o.path.isEqual(J)?r=r.add(L):D.done()});i.push(p)}),me.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,o=AD(this.userId,r),u=IDBKeyRange.lowerBound(o);let d=new Un(qt);return Zm(e).Z({range:u},(p,_,E)=>{const[D,x,P]=p,L=xu(x);D===this.userId&&r.isPrefixOf(L)?L.length===i&&(d=d.add(P)):E.done()}).next(()=>this.En(e,d))}En(e,t){const r=[],i=[];return t.forEach(o=>{i.push(dh(e).get(o).next(u=>{if(null===u)throw gt();Ht(u.userId===this.userId),r.push(dp(this.It,u))}))}),me.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return D2(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),me.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return me.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Zm(e).Z({range:r},(o,u,d)=>{if(o[0]===this.userId){const p=xu(o[1]);i.push(p)}else d.done()}).next(()=>{Ht(0===i.length)})})}containsKey(e,t){return S2(e,this.userId,t)}Rn(e){return A2(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function S2(n,e,t){const r=AD(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r);let u=!1;return Zm(n).Z({range:o,X:!0},(d,p,_)=>{const[E,D,x]=d;E===e&&D===i&&(u=!0),_.done()}).next(()=>u)}function dh(n){return Ei(n,"mutations")}function Zm(n){return Ei(n,"documentMutations")}function A2(n){return Ei(n,"mutationQueues")}class gp{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new gp(0)}static vn(){return new gp(-1)}}class A4{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new gp(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Lt.fromTimestamp(new dr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ym(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Ht(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const o=[];return Ym(e).Z((u,d)=>{const p=Nw(d);p.sequenceNumber<=t&&null===r.get(p.targetId)&&(i++,o.push(this.removeTargetData(e,p)))}).next(()=>me.waitFor(o)).next(()=>i)}forEachTarget(e,t){return Ym(e).Z((r,i)=>{const o=Nw(i);t(o)})}Vn(e){return M2(e).get("targetGlobalKey").next(t=>(Ht(null!==t),t))}Sn(e,t){return M2(e).put("targetGlobalKey",t)}Dn(e,t){return Ym(e).put(m2(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=op(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return Ym(e).Z({range:i,index:"queryTargetsIndex"},(u,d,p)=>{const _=Nw(d);ww(t,_.target)&&(o=_,p.done())}).next(()=>o)}addMatchingKeys(e,t,r){const i=[],o=hh(e);return t.forEach(u=>{const d=Ms(u.path);i.push(o.put({targetId:r,path:d})),i.push(this.referenceDelegate.addReference(e,r,u))}),me.waitFor(i)}removeMatchingKeys(e,t,r){const i=hh(e);return me.forEach(t,o=>{const u=Ms(o.path);return me.waitFor([i.delete([r,u]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){const r=hh(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=hh(e);let o=en();return i.Z({range:r,X:!0},(u,d,p)=>{const _=xu(u[1]),E=new rt(_);o=o.add(E)}).next(()=>o)}containsKey(e,t){const r=Ms(t.path),i=IDBKeyRange.bound([r],[JU(r)],!1,!0);let o=0;return hh(e).Z({index:"documentTargetsIndex",X:!0,range:i},([u,d],p,_)=>{0!==u&&(o++,_.done())}).next(()=>o>0)}se(e,t){return Ym(e).get(t).next(r=>r?Nw(r):null)}}function Ym(n){return Ei(n,"targets")}function M2(n){return Ei(n,"targetGlobal")}function hh(n){return Ei(n,"targetDocuments")}function x2([n,e],[t,r]){const i=qt(n,t);return 0===i?qt(e,r):i}class M4{constructor(e){this.xn=e,this.buffer=new Un(x2),this.Nn=0}kn(){return++this.Nn}Mn(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();x2(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class x4{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}Fn(e){var t=this;ze("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,De.Z)(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){rh(r)?ze("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield nh(r)}yield t.Fn(3e5)}))}}class R4{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return me.resolve(Qs.at);const r=new M4(t);return this.$n.forEachTarget(e,i=>r.Mn(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.Mn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ze("LruGarbageCollector","Garbage collection skipped; disabled"),me.resolve(T2)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ze("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),T2):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,i,o,u,d,p,_;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(D=>(D>this.params.maximumSequenceNumbersToCollect?(ze("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${D}`),i=this.params.maximumSequenceNumbersToCollect):i=D,u=Date.now(),this.nthSequenceNumber(e,i))).next(D=>(r=D,d=Date.now(),this.removeTargets(e,r,t))).next(D=>(o=D,p=Date.now(),this.removeOrphanedDocuments(e,r))).next(D=>(_=Date.now(),sN()<=Ra.in.DEBUG&&ze("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-E}ms\n\tDetermined least recently used ${i} in `+(d-u)+`ms\n\tRemoved ${o} targets in `+(p-d)+`ms\n\tRemoved ${D} documents in `+(_-p)+`ms\nTotal Duration: ${_-E}ms`),me.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:D})))}}class k4{constructor(e,t){this.db=e,this.garbageCollector=new R4(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return PD(e,r)}removeReference(e,t,r){return PD(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return PD(e,t)}Gn(e,t){return function(r,i){let o=!1;return A2(r).tt(u=>S2(r,u,i).next(d=>(d&&(o=!0),me.resolve(!d)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Kn(e,(u,d)=>{if(d<=t){const p=this.Gn(e,u).next(_=>{if(!_)return o++,r.getEntry(e,u).next(()=>(r.removeEntry(u,Lt.min()),hh(e).delete([0,Ms(u.path)])))});i.push(p)}}).next(()=>me.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return PD(e,t)}Kn(e,t){const r=hh(e);let i,o=Qs.at;return r.Z({index:"documentTargetsIndex"},([u,d],{path:p,sequenceNumber:_})=>{0===u?(o!==Qs.at&&t(new rt(xu(i)),o),o=_,i=p):o=Qs.at}).next(()=>{o!==Qs.at&&t(new rt(xu(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function PD(n,e){return hh(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ms(e.path),sequenceNumber:r}));var r}class R2{constructor(){this.changes=new uh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Jn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?me.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class N4{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return mp(e).put(r)}removeEntry(e,t,r){return mp(e).delete(function(i,o){const u=i.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],MD(o),u[u.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Jn.newInvalidDocument(t);return mp(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Vw(t))},(i,o)=>{r=this.jn(t,o)}).next(()=>r)}Wn(e,t){let r={size:0,document:Jn.newInvalidDocument(t)};return mp(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Vw(t))},(i,o)=>{r={document:this.jn(t,o),size:ND(o)}}).next(()=>r)}getEntries(e,t){let r=Xs();return this.zn(e,t,(i,o)=>{const u=this.jn(i,o);r=r.insert(i,u)}).next(()=>r)}Hn(e,t){let r=Xs(),i=new Pr(rt.comparator);return this.zn(e,t,(o,u)=>{const d=this.jn(o,u);r=r.insert(o,d),i=i.insert(o,ND(u))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return me.resolve();let i=new Un(P2);t.forEach(p=>i=i.add(p));const o=IDBKeyRange.bound(Vw(i.first()),Vw(i.last())),u=i.getIterator();let d=u.getNext();return mp(e).Z({index:"documentKeyIndex",range:o},(p,_,E)=>{const D=rt.fromSegments([..._.prefixPath,_.collectionGroup,_.documentId]);for(;d&&P2(d,D)<0;)r(d,null),d=u.getNext();d&&d.isEqual(D)&&(r(d,_),d=u.hasNext()?u.getNext():null),d?E.j(Vw(d)):E.done()}).next(()=>{for(;d;)r(d,null),d=u.hasNext()?u.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),MD(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],o=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return mp(e).W(IDBKeyRange.bound(i,o,!0)).next(u=>{let d=Xs();for(const p of u){const _=this.jn(rt.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);d=d.insert(_.key,_)}return d})}getAllFromCollectionGroup(e,t,r,i){let o=Xs();const u=O2(t,r),d=O2(t,Fo.max());return mp(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,d,!0)},(p,_,E)=>{const D=this.jn(rt.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);o=o.insert(D.key,D),o.size===i&&E.done()}).next(()=>o)}newChangeBuffer(e){return new O4(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return N2(e).get("remoteDocumentGlobalKey").next(t=>(Ht(!!t),t))}Qn(e,t){return N2(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function v4(n,e){let t;if(e.document)t=t2(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=rt.fromSegments(e.noDocument.path),i=cp(e.noDocument.readTime);t=Jn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return gt();{const r=rt.fromSegments(e.unknownDocument.path),i=cp(e.unknownDocument.version);t=Jn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new dr(r[0],r[1]);return Lt.fromTimestamp(i)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(Lt.min()))return r}return Jn.newInvalidDocument(e)}}function k2(n){return new N4(n)}class O4 extends R2{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new uh(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Un((o,u)=>qt(o.canonicalString(),u.canonicalString()));return this.changes.forEach((o,u)=>{const d=this.Xn.get(o);if(t.push(this.Yn.removeEntry(e,o,d.readTime)),u.isValidDocument()){const p=g2(this.Yn.It,u);i=i.add(o.path.popLast()),r+=ND(p)-d.size,t.push(this.Yn.addEntry(e,o,p))}else if(r-=d.size,this.trackRemovals){const p=g2(this.Yn.It,u.convertToNoDocument(Lt.min()));t.push(this.Yn.addEntry(e,o,p))}}),i.forEach(o=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.Yn.updateMetadata(e,r)),me.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((o,u)=>{this.Xn.set(o,{size:u,readTime:r.get(o).readTime})}),r))}}function N2(n){return Ei(n,"remoteDocumentGlobal")}function mp(n){return Ei(n,"remoteDocumentsV14")}function Vw(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function O2(n,e){const t=e.documentKey.path.toArray();return[n,MD(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function P2(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=qt(t[o],r[o]),i)return i;return i=qt(t.length,r.length),i||(i=qt(t[t.length-2],r[r.length-2]),i||qt(t[t.length-1],r[r.length-1]))}class P4{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class F2{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&Iw(r.mutation,i,Lo.empty(),dr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,en()).next(()=>r))}getLocalViewOfDocuments(e,t,r=en()){const i=Au();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let u=Tw();return o.forEach((d,p)=>{u=u.insert(d,p.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=Au();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,en()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((u,d)=>{t.set(u,d)})})}computeViews(e,t,r,i){let o=Xs();const u=Dw(),d=Dw();return t.forEach((p,_)=>{const E=r.get(_.key);i.has(_.key)&&(void 0===E||E.mutation instanceof Pc)?o=o.insert(_.key,_):void 0!==E&&(u.set(_.key,E.mutation.getFieldMask()),Iw(E.mutation,_,E.mutation.getFieldMask(),dr.now()))}),this.recalculateAndSaveOverlays(e,o).next(p=>(p.forEach((_,E)=>u.set(_,E)),t.forEach((_,E)=>{var D;return d.set(_,new P4(E,null!==(D=u.get(_))&&void 0!==D?D:null))}),d))}recalculateAndSaveOverlays(e,t){const r=Dw();let i=new Pr((u,d)=>u-d),o=en();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const d of u)d.keys().forEach(p=>{const _=t.get(p);if(null===_)return;let E=r.get(p)||Lo.empty();E=d.applyToLocalView(_,E),r.set(p,E);const D=(i.get(d.batchId)||en()).add(p);i=i.insert(d.batchId,D)})}).next(()=>{const u=[],d=i.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),_=p.key,E=p.value,D=GB();E.forEach(x=>{if(!o.has(x)){const P=PB(t.get(x),r.get(x));null!==P&&D.set(x,P),o=o.add(x)}}),u.push(this.documentOverlayCache.saveOverlays(e,_,D))}return me.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return rt.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):mN(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const u=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):me.resolve(Au());let d=-1,p=o;return u.next(_=>me.forEach(_,(E,D)=>(d<D.largestBatchId&&(d=D.largestBatchId),o.get(E)?me.resolve():this.getBaseDocument(e,E,D).next(x=>{p=p.insert(E,x)}))).next(()=>this.populateOverlays(e,_,o)).next(()=>this.computeViews(e,p,_,en())).next(E=>({batchId:d,changes:$B(E)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new rt(t)).next(r=>{let i=Tw();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let o=Tw();return this.indexManager.getCollectionParents(e,i).next(u=>me.forEach(u,d=>{const p=(_=t,E=d.child(i),new Oc(E,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt));var _,E;return this.getDocumentsMatchingCollectionQuery(e,p,r).next(_=>{_.forEach((E,D)=>{o=o.insert(E,D)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(o=>(i=o,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(o=>{o.forEach((d,p)=>{const _=p.getKey();null===i.get(_)&&(i=i.insert(_,Jn.newInvalidDocument(_)))});let u=Tw();return i.forEach((d,p)=>{const _=o.get(d);void 0!==_&&Iw(_.mutation,p,Lo.empty(),dr.now()),yN(t,p)&&(u=u.insert(d,p))}),u})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):me.resolve(Jn.newInvalidDocument(t))}}class F4{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return me.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:wi(r.createTime)}),me.resolve()}getNamedQuery(e,t){return me.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:SN(r.bundledQuery),readTime:wi(r.readTime)}),me.resolve();var r}}class L4{constructor(){this.overlays=new Pr(rt.comparator),this.es=new Map}getOverlay(e,t){return me.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Au();return me.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ue(e,t,o)}),me.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.es.delete(r)),me.resolve()}getOverlaysForCollection(e,t,r){const i=Au(),o=t.length+1,u=new rt(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const p=d.getNext().value,_=p.getKey();if(!t.isPrefixOf(_.path))break;_.path.length===o&&p.largestBatchId>r&&i.set(p.getKey(),p)}return me.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Pr((_,E)=>_-E);const u=this.overlays.getIterator();for(;u.hasNext();){const _=u.getNext().value;if(_.getKey().getCollectionGroup()===t&&_.largestBatchId>r){let E=o.get(_.largestBatchId);null===E&&(E=Au(),o=o.insert(_.largestBatchId,E)),E.set(_.getKey(),_)}}const d=Au(),p=o.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((_,E)=>d.set(_,E)),!(d.size()>=i)););return me.resolve(d)}ue(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const u=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new DN(t,r));let o=this.es.get(t);void 0===o&&(o=en(),this.es.set(t,o)),this.es.set(t,o.add(r.key))}}class xN{constructor(){this.ns=new Un(Ci.ss),this.rs=new Un(Ci.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new Ci(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new Ci(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new rt(new En([])),r=new Ci(t,e),i=new Ci(t,e+1),o=[];return this.rs.forEachInRange([r,i],u=>{this.cs(u),o.push(u.key)}),o}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new rt(new En([])),r=new Ci(t,e),i=new Ci(t,e+1);let o=en();return this.rs.forEachInRange([r,i],u=>{o=o.add(u.key)}),o}containsKey(e){const t=new Ci(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ci{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return rt.comparator(e.key,t.key)||qt(e._s,t._s)}static os(e,t){return qt(e._s,t._s)||rt.comparator(e.key,t.key)}}class V4{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Un(Ci.ss)}checkEmpty(e){return me.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const o=this.ws;this.ws++;const u=new IN(o,t,r,i);this.mutationQueue.push(u);for(const d of i)this.gs=this.gs.add(new Ci(d.key,o)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return me.resolve(u)}lookupMutationBatch(e,t){return me.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),o=i<0?0:i;return me.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return me.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return me.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ci(t,0),i=new Ci(t,Number.POSITIVE_INFINITY),o=[];return this.gs.forEachInRange([r,i],u=>{const d=this.ys(u._s);o.push(d)}),me.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Un(qt);return t.forEach(i=>{const o=new Ci(i,0),u=new Ci(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([o,u],d=>{r=r.add(d._s)})}),me.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;rt.isDocumentKey(o)||(o=o.child(""));const u=new Ci(new rt(o),0);let d=new Un(qt);return this.gs.forEachWhile(p=>{const _=p.key.path;return!!r.isPrefixOf(_)&&(_.length===i&&(d=d.add(p._s)),!0)},u),me.resolve(this.Is(d))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ht(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return me.forEach(t.mutations,i=>{const o=new Ci(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new Ci(t,0),i=this.gs.firstAfterOrEqual(r);return me.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return me.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class U4{constructor(e){this.Es=e,this.docs=new Pr(rt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,u=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return me.resolve(r?r.document.mutableCopy():Jn.newInvalidDocument(t))}getEntries(e,t){let r=Xs();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Jn.newInvalidDocument(i))}),me.resolve(r)}getAllFromCollection(e,t,r){let i=Xs();const o=new rt(t.child("")),u=this.docs.getIteratorFrom(o);for(;u.hasNext();){const{key:d,value:{document:p}}=u.getNext();if(!t.isPrefixOf(d.path))break;d.path.length>t.length+1||lN(eB(p),r)<=0||(i=i.insert(p.key,p.mutableCopy()))}return me.resolve(i)}getAllFromCollectionGroup(e,t,r,i){gt()}As(e,t){return me.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new B4(this)}getSize(e){return me.resolve(this.size)}}class B4 extends R2{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),me.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class H4{constructor(e){this.persistence=e,this.Rs=new uh(t=>op(t),ww),this.lastRemoteSnapshotVersion=Lt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new xN,this.targetCount=0,this.vs=gp.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),me.resolve()}getLastRemoteSnapshotVersion(e){return me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return me.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),me.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),me.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new gp(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,me.resolve()}updateTargetData(e,t){return this.Dn(t),me.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,me.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.Rs.forEach((u,d)=>{d.sequenceNumber<=t&&null===r.get(d.targetId)&&(this.Rs.delete(u),o.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)}),me.waitFor(o).next(()=>i)}getTargetCount(e){return me.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return me.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),me.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(u=>{o.push(i.markPotentiallyOrphaned(e,u))}),me.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),me.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return me.resolve(r)}containsKey(e,t){return me.resolve(this.Ps.containsKey(t))}}class L2{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Qs(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new H4(this),this.indexManager=new D4,this.remoteDocumentCache=new U4(r=>this.referenceDelegate.xs(r)),this.It=new p2(t),this.Ns=new F4(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new L4,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new V4(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){ze("MemoryPersistence","Starting transaction:",e);const i=new j4(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(o=>this.referenceDelegate.Ms(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Os(e,t){return me.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class j4 extends nB{constructor(e){super(),this.currentSequenceNumber=e}}class FD{constructor(e){this.persistence=e,this.Fs=new xN,this.$s=null}static Bs(e){return new FD(e)}get Ls(){if(this.$s)return this.$s;throw gt()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),me.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),me.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),me.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Ls.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Ms(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return me.forEach(this.Ls,r=>{const i=rt.fromPath(r);return this.Us(e,i).next(o=>{o||t.removeEntry(i,Lt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return me.or([()=>me.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class $4{constructor(e){this.It=e}$(e,t,r,i){const o=new mD("createOrUpgrade",t);var d;r<1&&i>=1&&(e.createObjectStore("owner"),(d=e).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",u2,{unique:!0}),d.createObjectStore("documentMutations"),V2(e),function(d){d.createObjectStore("remoteDocuments")}(e));let u=me.resolve();return r<3&&i>=3&&(0!==r&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(e),V2(e)),u=u.next(()=>function(d){const p=d.store("targetGlobal"),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Lt.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",_)}(o))),r<4&&i>=4&&(0!==r&&(u=u.next(()=>function(d,p){return p.store("mutations").W().next(_=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",u2,{unique:!0});const E=p.store("mutations"),D=_.map(x=>E.put(x));return me.waitFor(D)})}(e,o))),u=u.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(u=u.next(()=>this.qs(o))),r<6&&i>=6&&(u=u.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(o)))),r<7&&i>=7&&(u=u.next(()=>this.Gs(o))),r<8&&i>=8&&(u=u.next(()=>this.Qs(e,o))),r<9&&i>=9&&(u=u.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(u=u.next(()=>this.js(o))),r<11&&i>=11&&(u=u.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(u=u.next(()=>{!function(d){const p=d.createObjectStore("documentOverlays",{keyPath:p4});p.createIndex("collectionPathOverlayIndex",g4,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",m4,{unique:!1})}(e)})),r<13&&i>=13&&(u=u.next(()=>function(d){const p=d.createObjectStore("remoteDocumentsV14",{keyPath:r4});p.createIndex("documentKeyIndex",i4),p.createIndex("collectionGroupIndex",s4)}(e)).next(()=>this.Ws(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(u=u.next(()=>this.zs(e,o))),r<15&&i>=15&&(u=u.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:c4}).createIndex("sequenceNumberIndex",d4,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:h4}).createIndex("documentKeyIndex",f4,{unique:!1})}(e))),u}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=ND(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>me.forEach(i,o=>{const u=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",u).next(d=>me.forEach(d,p=>{Ht(p.userId===o.userId);const _=dp(this.It,p);return D2(e,o.userId,_).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const o=[];return r.Z((u,d)=>{const p=new En(u),_=[0,Ms(p)];o.push(t.get(_).next(E=>E?me.resolve():t.put({targetId:0,path:Ms(p),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>me.waitFor(o))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:u4});const r=t.store("collectionParents"),i=new MN,o=u=>{if(i.add(u)){const d=u.lastSegment(),p=u.popLast();return r.put({collectionId:d,parent:Ms(p)})}};return t.store("remoteDocuments").Z({X:!0},(u,d)=>{const p=new En(u);return o(p.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([u,d,p],_)=>{const E=xu(d);return o(E.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const o=Nw(i),u=m2(this.It,o);return t.put(u)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((o,u)=>{const d=t.store("remoteDocumentsV14"),p=(_=u,_.document?new rt(En.fromString(_.document.name).popFirst(5)):_.noDocument?rt.fromSegments(_.noDocument.path):_.unknownDocument?rt.fromSegments(_.unknownDocument.path):gt()).path.toArray();var _;const E={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};i.push(d.put(E))}).next(()=>me.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=k2(this.It),o=new L2(FD.Bs,this.It.re);return r.W().next(u=>{const d=new Map;return u.forEach(p=>{var _;let E=null!==(_=d.get(p.userId))&&void 0!==_?_:en();dp(this.It,p).keys().forEach(D=>E=E.add(D)),d.set(p.userId,E)}),me.forEach(d,(p,_)=>{const E=new vi(_),D=xD.oe(this.It,E),x=o.getIndexManager(E),P=OD.oe(E,this.It,x,o.referenceDelegate);return new F2(i,P,D,x).recalculateAndSaveOverlaysForDocumentKeys(new CN(t,Qs.at),p).next()})})}}function V2(n){n.createObjectStore("targetDocuments",{keyPath:a4}).createIndex("documentTargetsIndex",l4,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",o4,{unique:!0}),n.createObjectStore("targetGlobal")}const RN="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class kN{constructor(e,t,r,i,o,u,d,p,_,E,D=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=o,this.window=u,this.document=d,this.Js=_,this.Ys=E,this.Xs=D,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=x=>Promise.resolve(),!kN.C())throw new He(we.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new k4(this,i),this.ii=t+"main",this.It=new p2(p),this.ri=new Nl(this.ii,this.Xs,new $4(this.It)),this.Cs=new A4(this.referenceDelegate,this.It),this.remoteDocumentCache=k2(this.It),this.Ns=new b4,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===E&&Hr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new He(we.FAILED_PRECONDITION,RN);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Qs(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,De.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,De.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,De.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>LD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(rh(e))return ze("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ze("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Uw(e).get("owner").next(t=>me.resolve(this.mi(t)))}gi(e){return LD(e).delete(this.clientId)}yi(){var e=this;return(0,De.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Ei(r,"clientMetadata");return i.W().next(o=>{const u=e.Ii(o,18e5),d=o.filter(p=>-1===u.indexOf(p));return me.forEach(d,p=>i.delete(p.clientId)).next(()=>d)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?me.resolve(!0):Uw(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new He(we.FAILED_PRECONDITION,RN);return!1}}return!(!this.networkEnabled||!this.inForeground)||LD(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const u=!this.inForeground&&i.inForeground,d=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||u&&d)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&ze("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,De.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new CN(t,Qs.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>LD(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return OD.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new S4(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return xD.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){ze("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",o=15===(u=this.Xs)?y4:14===u?f2:13===u?h2:12===u?_4:11===u?d2:void gt();var u;let d;return this.ri.runTransaction(e,i,o,p=>(d=new CN(p,this.Ss?this.Ss.next():Qs.at),"readwrite-primary"===t?this.fi(d).next(_=>!!_||this.di(d)).next(_=>{if(!_)throw Hr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new He(we.FAILED_PRECONDITION,tB);return r(d)}).next(_=>this.wi(d).next(()=>_)):this.Vi(d).next(()=>r(d)))).then(p=>(d.raiseOnCommittedEvent(),p))}Vi(e){return Uw(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new He(we.FAILED_PRECONDITION,RN)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Uw(e).put("owner",t)}static C(){return Nl.C()}_i(e){const t=Uw(e);return t.get("owner").next(r=>this.mi(r)?(ze("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):me.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Hr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,F.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return ze("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Hr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Hr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Uw(n){return Ei(n,"owner")}function LD(n){return Ei(n,"clientMetadata")}function NN(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class ON{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=en(),i=en();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new ON(e,t.fromCache,r,i)}}class U2{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(o=>o||this.Mi(e,t,i,r)).next(o=>o||this.Oi(e,t))}ki(e,t){if(CB(t))return me.resolve(null);let r=Js(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=ED(t,null,"F"),r=Js(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const u=en(...o);return this.Ni.getDocuments(e,u).next(d=>this.indexManager.getMinOffset(e,r).next(p=>{const _=this.Fi(t,d);return this.$i(t,_,u,p.readTime)?this.ki(e,ED(t,null,"F")):this.Bi(e,_,t,p)}))})))}Mi(e,t,r,i){return CB(t)||i.isEqual(Lt.min())?this.Oi(e,t):this.Ni.getDocuments(e,r).next(o=>{const u=this.Fi(t,o);return this.$i(t,u,r,i)?this.Oi(e,t):(sN()<=Ra.in.DEBUG&&ze("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),_N(t)),this.Bi(e,u,t,XU(i,-1)))})}Fi(e,t){let r=new Un(DB(e));return t.forEach((i,o)=>{yN(e,o)&&(r=r.add(o))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const o="F"===e.limitType?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Oi(e,t){return sN()<=Ra.in.DEBUG&&ze("QueryEngine","Using full collection scan to execute query:",_N(t)),this.Ni.getDocumentsMatchingQuery(e,t,Fo.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(u=>{o=o.insert(u.key,u)}),o))}}class G4{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.It=i,this.Ui=new Pr(qt),this.qi=new uh(o=>op(o),ww),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new F2(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function B2(n,e,t,r){return new G4(n,e,t,r)}function H2(n,e){return PN.apply(this,arguments)}function PN(){return PN=(0,De.Z)(function*(n,e){const t=at(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const u=[],d=[];let p=en();for(const _ of i){u.push(_.batchId);for(const E of _.mutations)p=p.add(E.key)}for(const _ of o){d.push(_.batchId);for(const E of _.mutations)p=p.add(E.key)}return t.localDocuments.getDocuments(r,p).next(_=>({ji:_,removedBatchIds:u,addedBatchIds:d}))})})}),PN.apply(this,arguments)}function z4(n,e){const t=at(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.Gi.newChangeBuffer({trackRemovals:!0});return function(u,d,p,_){const E=p.batch,D=E.keys();let x=me.resolve();return D.forEach(P=>{x=x.next(()=>_.getEntry(d,P)).next(L=>{const J=p.docVersions.get(P);Ht(null!==J),L.version.compareTo(J)<0&&(E.applyToRemoteDocument(L,p),L.isValidDocument()&&(L.setReadTime(p.commitVersion),_.addEntry(L)))})}),x.next(()=>u.mutationQueue.removeMutationBatch(d,E))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let d=en();for(let p=0;p<u.mutationResults.length;++p)u.mutationResults[p].transformResults.length>0&&(d=d.add(u.batch.mutations[p].key));return d}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function j2(n){const e=at(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function q4(n,e){const t=at(n),r=e.snapshotVersion;let i=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const u=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.Ui;const d=[];e.targetChanges.forEach((E,D)=>{const x=i.get(D);if(!x)return;d.push(t.Cs.removeMatchingKeys(o,E.removedDocuments,D).next(()=>t.Cs.addMatchingKeys(o,E.addedDocuments,D)));let P=x.withSequenceNumber(o.currentSequenceNumber);var L,J,ue;e.targetMismatches.has(D)?P=P.withResumeToken(oi.EMPTY_BYTE_STRING,Lt.min()).withLastLimboFreeSnapshotVersion(Lt.min()):E.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(E.resumeToken,r)),i=i.insert(D,P),J=P,ue=E,(0===(L=x).resumeToken.approximateByteSize()||J.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=3e8||ue.addedDocuments.size+ue.modifiedDocuments.size+ue.removedDocuments.size>0)&&d.push(t.Cs.updateTargetData(o,P))});let p=Xs(),_=en();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(o,E))}),d.push($2(o,u,e.documentUpdates).next(E=>{p=E.Wi,_=E.zi})),!r.isEqual(Lt.min())){const E=t.Cs.getLastRemoteSnapshotVersion(o).next(D=>t.Cs.setTargetsMetadata(o,o.currentSequenceNumber,r));d.push(E)}return me.waitFor(d).next(()=>u.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,p,_)).next(()=>p)}).then(o=>(t.Ui=i,o))}function $2(n,e,t){let r=en(),i=en();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let u=Xs();return t.forEach((d,p)=>{const _=o.get(d);p.isFoundDocument()!==_.isFoundDocument()&&(i=i.add(d)),p.isNoDocument()&&p.version.isEqual(Lt.min())?(e.removeEntry(d,p.readTime),u=u.insert(d,p)):!_.isValidDocument()||p.version.compareTo(_.version)>0||0===p.version.compareTo(_.version)&&_.hasPendingWrites?(e.addEntry(p),u=u.insert(d,p)):ze("LocalStore","Ignoring outdated watch update for ",d,". Current version:",_.version," Watch version:",p.version)}),{Wi:u,zi:i}})}function W4(n,e){const t=at(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Qm(n,e){const t=at(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(o=>o?(i=o,me.resolve(i)):t.Cs.allocateTargetId(r).next(u=>(i=new ch(e,u,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function Jm(n,e,t){return FN.apply(this,arguments)}function FN(){return FN=(0,De.Z)(function*(n,e,t){const r=at(n),i=r.Ui.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!rh(u))throw u;ze("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ui=r.Ui.remove(e),r.qi.delete(i.target)}),FN.apply(this,arguments)}function VD(n,e,t){const r=at(n);let i=Lt.min(),o=en();return r.persistence.runTransaction("Execute query","readonly",u=>function(d,p,_){const E=at(d),D=E.qi.get(_);return void 0!==D?me.resolve(E.Ui.get(D)):E.Cs.getTargetData(p,_)}(r,u,Js(e)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(u,d.targetId).next(p=>{o=p})}).next(()=>r.Li.getDocumentsMatchingQuery(u,e,t?i:Lt.min(),t?o:en())).next(d=>(q2(r,TB(e),d),{documents:d,Hi:o})))}function G2(n,e){const t=at(n),r=at(t.Cs),i=t.Ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.se(o,e).next(u=>u?u.target:null))}function z2(n,e){const t=at(n),r=t.Ki.get(e)||Lt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,XU(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(q2(t,e,i),i))}function q2(n,e,t){let r=Lt.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Ki.set(e,r)}function LN(){return LN=(0,De.Z)(function*(n,e,t,r){const i=at(n);let o=en(),u=Xs();for(const _ of t){const E=e.Ji(_.metadata.name);_.document&&(o=o.add(E));const D=e.Yi(_);D.setReadTime(e.Xi(_.metadata.readTime)),u=u.insert(E,D)}const d=i.Gi.newChangeBuffer({trackRemovals:!0}),p=yield Qm(i,(_=r,Js(Hm(En.fromString(`__bundle__/docs/${_}`)))));var _;return i.persistence.runTransaction("Apply bundle documents","readwrite",_=>$2(_,d,u).next(E=>(d.apply(_),E)).next(E=>i.Cs.removeMatchingKeysForTargetId(_,p.targetId).next(()=>i.Cs.addMatchingKeys(_,o,p.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(_,E.Wi,E.zi)).next(()=>E.Wi)))}),LN.apply(this,arguments)}function Z4(n,e){return VN.apply(this,arguments)}function VN(){return VN=(0,De.Z)(function*(n,e,t=en()){const r=yield Qm(n,Js(SN(e.bundledQuery))),i=at(n);return i.persistence.runTransaction("Save named query","readwrite",o=>{const u=wi(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return i.Ns.saveNamedQuery(o,e);const d=r.withResumeToken(oi.EMPTY_BYTE_STRING,u);return i.Ui=i.Ui.insert(d.targetId,d),i.Cs.updateTargetData(o,d).next(()=>i.Cs.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>i.Cs.addMatchingKeys(o,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(o,e))})}),VN.apply(this,arguments)}function W2(n,e){return`firestore_clients_${n}_${e}`}function K2(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function UN(n,e){return`firestore_targets_${n}_${e}`}class UD{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let o,u="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return u&&i.error&&(u="string"==typeof i.error.message&&"string"==typeof i.error.code,u&&(o=new He(i.error.code,i.error.message))),u?new UD(e,t,i.state,o):(Hr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Bw{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,o="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new He(r.error.code,r.error.message))),o?new Bw(e,r.state,i):(Hr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class BD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,o=DD();for(let u=0;i&&u<r.activeTargetIds.length;++u)i=lB(r.activeTargetIds[u]),o=o.add(r.activeTargetIds[u]);return i?new BD(e,o):(Hr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class BN{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new BN(t.clientId,t.onlineState):(Hr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class HN{constructor(){this.activeTargetIds=DD()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jN{constructor(e,t,r,i,o){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Pr(qt),this.started=!1,this.cr=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ar=W2(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new HN),this.lr=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,De.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const o=e.getItem(W2(e.persistenceKey,i));if(o){const u=BD.Zi(i,o);u&&(e.ur=e.ur.insert(u.clientId,u))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(UN(this.persistenceKey,e));if(r){const i=Bw.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(UN(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ze("SharedClientState","READ",e,t),t}setItem(e,t){ze("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ze("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ze("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void Hr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,De.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(o){let u=Qs.at;if(null!=o)try{const d=JSON.parse(o);Ht("number"==typeof d),u=d}catch(d){Hr("SharedClientState","Failed to read sequence number from WebStorage",d)}return u}(r.newValue);i!==Qs.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Mr(r.newValue);yield Promise.all(i.map(o=>t.syncEngine.Or(o)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new UD(this.currentUser,e,t,r),o=K2(this.persistenceKey,this.currentUser,e);this.setItem(o,i.tr())}Er(e){const t=K2(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=UN(this.persistenceKey,e),o=new Bw(e,t,r);this.setItem(i,o.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return BD.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return UD.Zi(new vi(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return Bw.Zi(i,t)}yr(e){return BN.Zi(e)}Mr(e){return JSON.parse(e)}Cr(e){var t=this;return(0,De.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);ze("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),o=this.Ir(r),u=[],d=[];return o.forEach(p=>{i.has(p)||u.push(p)}),i.forEach(p=>{o.has(p)||d.push(p)}),this.syncEngine.Br(u,d).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=DD();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class Z2{constructor(){this.Lr=new HN,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new HN,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Y4{qr(e){}shutdown(){}}class Y2{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){ze("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){ze("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Q4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class J4{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class X4 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,i,o){const u=this.ao(e,t);ze("RestConnection","Sending: ",u,r);const d={};return this.ho(d,i,o),this.lo(e,u,d,r).then(p=>(ze("RestConnection","Received: ",p),p),p=>{throw Xf("RestConnection",`${e} failed with error: `,p,"url: ",u,"request:",r),p})}fo(e,t,r,i,o,u){return this.co(e,t,r,i,o)}ho(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Fm,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}ao(e,t){return`${this.oo}/v1/${t}:${Q4[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,r,i){return new Promise((o,u)=>{const d=new QW;d.listenOnce(KW.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case iN.NO_ERROR:const _=d.getResponseJson();ze("Connection","XHR received:",JSON.stringify(_)),o(_);break;case iN.TIMEOUT:ze("Connection",'RPC "'+e+'" timed out'),u(new He(we.DEADLINE_EXCEEDED,"Request time out"));break;case iN.HTTP_ERROR:const E=d.getStatus();if(ze("Connection",'RPC "'+e+'" failed with status:',E,"response text:",d.getResponseText()),E>0){const D=d.getResponseJson().error;if(D&&D.status&&D.message){const x=function(P){const L=P.toLowerCase().replace(/_/g,"-");return Object.values(we).indexOf(L)>=0?L:we.UNKNOWN}(D.status);u(new He(x,D.message))}else u(new He(we.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new He(we.UNAVAILABLE,"Connection failed."));break;default:gt()}}finally{ze("Connection",'RPC "'+e+'" completed.')}});const p=JSON.stringify(i);d.send(t,"POST",p,r,15)})}_o(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=qW(),u=WW(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(d.xmlHttpFactory=new YW({})),this.ho(d.initMessageHeaders,t,r),(0,F.uI)()||(0,F.b$)()||(0,F.d)()||(0,F.w1)()||(0,F.Mn)()||(0,F.ru)()||(d.httpHeadersOverwriteParam="$httpHeaders");const p=i.join("");ze("Connection","Creating WebChannel: "+p,d);const _=o.createWebChannel(p,d);let E=!1,D=!1;const x=new J4({Hr:L=>{D?ze("Connection","Not sending because WebChannel is closed:",L):(E||(ze("Connection","Opening WebChannel transport."),_.open(),E=!0),ze("Connection","WebChannel sending:",L),_.send(L))},Jr:()=>_.close()}),P=(L,J,ue)=>{L.listen(J,Ne=>{try{ue(Ne)}catch(We){setTimeout(()=>{throw We},0)}})};return P(_,fD.EventType.OPEN,()=>{D||ze("Connection","WebChannel transport opened.")}),P(_,fD.EventType.CLOSE,()=>{D||(D=!0,ze("Connection","WebChannel transport closed"),x.io())}),P(_,fD.EventType.ERROR,L=>{D||(D=!0,Xf("Connection","WebChannel transport errored:",L),x.io(new He(we.UNAVAILABLE,"The operation could not be completed")))}),P(_,fD.EventType.MESSAGE,L=>{var J;if(!D){const ue=L.data[0];Ht(!!ue);const Ne=ue,We=Ne.error||(null===(J=Ne[0])||void 0===J?void 0:J.error);if(We){ze("Connection","WebChannel received error:",We);const et=We.status;let Xe=function(Mt){const ln=Zr[Mt];if(void 0!==ln)return HB(ln)}(et),St=We.message;void 0===Xe&&(Xe=we.INTERNAL,St="Unknown error status: "+et+" with message "+We.message),D=!0,x.io(new He(Xe,St)),_.close()}else ze("Connection","WebChannel received:",ue),x.ro(ue)}}),P(u,ZW.STAT_EVENT,L=>{L.stat===WU.PROXY?ze("Connection","Detected buffering proxy"):L.stat===WU.NOPROXY&&ze("Connection","Detected no buffering proxy")}),setTimeout(()=>{x.so()},0),x}}function Q2(){return typeof window<"u"?window:null}function HD(){return typeof document<"u"?document:null}function Hw(n){return new G6(n,!0)}class $N{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Hs=e,this.timerId=t,this.wo=r,this.mo=i,this.yo=o,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),i=Math.max(0,t-r);i>0&&ze("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Io=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}bo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class J2{constructor(e,t,r,i,o,u,d,p){this.Hs=e,this.Po=r,this.vo=i,this.Vo=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new $N(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,De.Z)(function*(){e.No()&&(yield e.close(0))})()}Oo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,De.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,De.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===we.RESOURCE_EXHAUSTED?(Hr(t.toString()),Hr("Using maximum backoff delay to prevent overloading the backend."),r.xo.Eo()):t&&t.code===we.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new He(we.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Mo(){var e=this;this.state=5,this.xo.Ao((0,De.Z)(function*(){e.state=0,e.start()}))}Qo(e){return ze("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(ze("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class eK extends J2{constructor(e,t,r,i,o,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.It=o}jo(e,t){return this.Vo._o("Listen",e,t)}onMessage(e){this.xo.reset();const t=function W6(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(p=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:gt(),i=e.targetChange.targetIds||[],o=function(p,_){return p.gt?(Ht(void 0===_||"string"==typeof _),oi.fromBase64String(_||"")):(Ht(void 0===_||_ instanceof Uint8Array),oi.fromUint8Array(_||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&function(p){const _=void 0===p.code?we.UNKNOWN:HB(p.code);return new He(_,p.message||"")}(u);t=new qB(r,i,o,d||null)}else if("documentChange"in e){const r=e.documentChange,i=Mu(n,r.document.name),o=wi(r.document.updateTime),u=new Hi({mapValue:{fields:r.document.fields}}),d=Jn.newFoundDocument(i,o,u);t=new SD(r.targetIds||[],r.removedTargetIds||[],d.key,d)}else if("documentDelete"in e){const r=e.documentDelete,i=Mu(n,r.document),o=r.readTime?wi(r.readTime):Lt.min(),u=Jn.newNoDocument(i,o);t=new SD([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=Mu(n,r.document);t=new SD([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return gt();{const r=e.filter,o=new F6(r.count||0);t=new zB(r.targetId,o)}}var p;return t}(this.It,e),r=function(i){if(!("targetChange"in i))return Lt.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Lt.min():o.readTime?wi(o.readTime):Lt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=Rw(this.It),t.addTarget=function(i,o){let u;const d=o.target;return u=bD(d)?{documents:n2(i,d)}:{query:r2(i,d)},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0?u.resumeToken=YB(i,o.resumeToken):o.snapshotVersion.compareTo(Lt.min())>0&&(u.readTime=Mw(i,o.snapshotVersion.toTimestamp())),u}(this.It,e);const r=function Z6(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return gt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=Rw(this.It),t.removeTarget=e,this.Bo(t)}}class tK extends J2{constructor(e,t,r,i,o,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.It=o,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.Vo._o("Write",e,t)}onMessage(e){if(Ht(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function K6(n,e){return n&&n.length>0?(Ht(void 0!==e),n.map(t=>function(r,i){let o=wi(r.updateTime?r.updateTime:i);return o.isEqual(Lt.min())&&(o=wi(i)),new N6(o,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=wi(e.commitTime);return this.listener.Zo(r,t)}return Ht(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Rw(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>kw(this.It,r))};this.Bo(t)}}class nK extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.Vo=r,this.It=i,this.nu=!1}su(){if(this.nu)throw new He(we.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.Vo.co(e,t,r,i,o)).catch(i=>{throw"FirebaseError"===i.name?(i.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new He(we.UNKNOWN,i.toString())})}fo(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.Vo.fo(e,t,r,o,u,i)).catch(o=>{throw"FirebaseError"===o.name?(o.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new He(we.UNKNOWN,o.toString())})}terminate(){this.nu=!0}}class rK{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Hr(t),this.ou=!1):ze("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class iK{constructor(e,t,r,i,o){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=o,this.mu.qr(d=>{r.enqueueAndForget((0,De.Z)(function*(){var p;fh(u)&&(ze("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,De.Z)(function*(_){const E=at(_);E._u.add(4),yield Xm(E),E.gu.set("Unknown"),E._u.delete(4),yield jw(E)}),function(_){return p.apply(this,arguments)})(u))}))}),this.gu=new rK(r,i)}}function jw(n){return GN.apply(this,arguments)}function GN(){return GN=(0,De.Z)(function*(n){if(fh(n))for(const e of n.wu)yield e(!0)}),GN.apply(this,arguments)}function Xm(n){return zN.apply(this,arguments)}function zN(){return zN=(0,De.Z)(function*(n){for(const e of n.wu)yield e(!1)}),zN.apply(this,arguments)}function jD(n,e){const t=at(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),KN(t)?WN(t):t_(t).ko()&&qN(t,e))}function $w(n,e){const t=at(n),r=t_(t);t.du.delete(e),r.ko()&&X2(t,e),0===t.du.size&&(r.ko()?r.Fo():fh(t)&&t.gu.set("Unknown"))}function qN(n,e){n.yu.Ot(e.targetId),t_(n).zo(e)}function X2(n,e){n.yu.Ot(e),t_(n).Ho(e)}function WN(n){n.yu=new H6({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),t_(n).start(),n.gu.uu()}function KN(n){return fh(n)&&!t_(n).No()&&n.du.size>0}function fh(n){return 0===at(n)._u.size}function eH(n){n.yu=void 0}function sK(n){return ZN.apply(this,arguments)}function ZN(){return ZN=(0,De.Z)(function*(n){n.du.forEach((e,t)=>{qN(n,e)})}),ZN.apply(this,arguments)}function oK(n,e){return YN.apply(this,arguments)}function YN(){return YN=(0,De.Z)(function*(n,e){eH(n),KN(n)?(n.gu.hu(e),WN(n)):n.gu.set("Unknown")}),YN.apply(this,arguments)}function aK(n,e,t){return QN.apply(this,arguments)}function QN(){return QN=(0,De.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof qB&&2===e.state&&e.cause)try{yield(r=(0,De.Z)(function*(i,o){const u=o.cause;for(const d of o.targetIds)i.du.has(d)&&(yield i.remoteSyncer.rejectListen(d,u),i.du.delete(d),i.yu.removeTarget(d))}),function(i,o){return r.apply(this,arguments)})(n,e)}catch(r){ze("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield $D(n,r)}else if(e instanceof SD?n.yu.Gt(e):e instanceof zB?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(Lt.min()))try{const r=yield j2(n.localStore);t.compareTo(r)>=0&&(yield function(i,o){const u=i.yu.te(o);return u.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const _=i.du.get(p);_&&i.du.set(p,_.withResumeToken(d.resumeToken,o))}}),u.targetMismatches.forEach(d=>{const p=i.du.get(d);if(!p)return;i.du.set(d,p.withResumeToken(oi.EMPTY_BYTE_STRING,p.snapshotVersion)),X2(i,d);const _=new ch(p.target,d,1,p.sequenceNumber);qN(i,_)}),i.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){ze("RemoteStore","Failed to raise snapshot:",r),yield $D(n,r)}var r}),QN.apply(this,arguments)}function $D(n,e,t){return JN.apply(this,arguments)}function JN(){return JN=(0,De.Z)(function*(n,e,t){if(!rh(e))throw e;n._u.add(1),yield Xm(n),n.gu.set("Offline"),t||(t=()=>j2(n.localStore)),n.asyncQueue.enqueueRetryable((0,De.Z)(function*(){ze("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield jw(n)}))}),JN.apply(this,arguments)}function tH(n,e){return e().catch(t=>$D(n,t,e))}function e_(n){return XN.apply(this,arguments)}function XN(){return XN=(0,De.Z)(function*(n){const e=at(n),t=ph(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;lK(e);)try{const i=yield W4(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,uK(e,i)}catch(i){yield $D(e,i)}nH(e)&&rH(e)}),XN.apply(this,arguments)}function lK(n){return fh(n)&&n.fu.length<10}function uK(n,e){n.fu.push(e);const t=ph(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function nH(n){return fh(n)&&!ph(n).No()&&n.fu.length>0}function rH(n){ph(n).start()}function cK(n){return eO.apply(this,arguments)}function eO(){return eO=(0,De.Z)(function*(n){ph(n).eu()}),eO.apply(this,arguments)}function dK(n){return tO.apply(this,arguments)}function tO(){return tO=(0,De.Z)(function*(n){const e=ph(n);for(const t of n.fu)e.Xo(t.mutations)}),tO.apply(this,arguments)}function hK(n,e,t){return nO.apply(this,arguments)}function nO(){return nO=(0,De.Z)(function*(n,e,t){const r=n.fu.shift(),i=TN.from(r,e,t);yield tH(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield e_(n)}),nO.apply(this,arguments)}function fK(n,e){return rO.apply(this,arguments)}function rO(){return rO=(0,De.Z)(function*(n,e){var t;e&&ph(n).Yo&&(yield(t=(0,De.Z)(function*(r,i){if(BB(o=i.code)&&o!==we.ABORTED){const u=r.fu.shift();ph(r).Oo(),yield tH(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,i)),yield e_(r)}var o}),function(r,i){return t.apply(this,arguments)})(n,e)),nH(n)&&rH(n)}),rO.apply(this,arguments)}function iH(n,e){return iO.apply(this,arguments)}function iO(){return iO=(0,De.Z)(function*(n,e){const t=at(n);t.asyncQueue.verifyOperationInProgress(),ze("RemoteStore","RemoteStore received new credentials");const r=fh(t);t._u.add(3),yield Xm(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield jw(t)}),iO.apply(this,arguments)}function sO(n,e){return oO.apply(this,arguments)}function oO(){return oO=(0,De.Z)(function*(n,e){const t=at(n);e?(t._u.delete(2),yield jw(t)):e||(t._u.add(2),yield Xm(t),t.gu.set("Unknown"))}),oO.apply(this,arguments)}function t_(n){return n.pu||(n.pu=function(e,t,r){const i=at(e);return i.su(),new eK(t,i.Vo,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:sK.bind(null,n),Zr:oK.bind(null,n),Wo:aK.bind(null,n)}),n.wu.push(function(){var e=(0,De.Z)(function*(t){t?(n.pu.Oo(),KN(n)?WN(n):n.gu.set("Unknown")):(yield n.pu.stop(),eH(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function ph(n){return n.Iu||(n.Iu=function(e,t,r){const i=at(e);return i.su(),new tK(t,i.Vo,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:cK.bind(null,n),Zr:fK.bind(null,n),tu:dK.bind(null,n),Zo:hK.bind(null,n)}),n.wu.push(function(){var e=(0,De.Z)(function*(t){t?(n.Iu.Oo(),yield e_(n)):(yield n.Iu.stop(),n.fu.length>0&&(ze("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class aO{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new bi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,o){const u=Date.now()+r,d=new aO(e,t,u,i,o);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new He(we.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function n_(n,e){if(Hr("AsyncQueue",`${e}: ${n}`),rh(n))return new He(we.UNAVAILABLE,`${e}: ${n}`);throw n}class r_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||rt.comparator(t.key,r.key):(t,r)=>rt.comparator(t.key,r.key),this.keyedMap=Tw(),this.sortedSet=new Pr(this.comparator)}static emptySet(e){return new r_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof r_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new r_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class sH{constructor(){this.Tu=new Pr(rt.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):gt():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class i_{constructor(e,t,r,i,o,u,d,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=p}static fromInitialDocuments(e,t,r,i){const o=[];return t.forEach(u=>{o.push({type:0,doc:u})}),new i_(e,t,r_.emptySet(t),o,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ew(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class pK{constructor(){this.Au=void 0,this.listeners=[]}}class gK{constructor(){this.queries=new uh(e=>IB(e),Ew),this.onlineState="Unknown",this.Ru=new Set}}function lO(n,e){return uO.apply(this,arguments)}function uO(){return uO=(0,De.Z)(function*(n,e){const t=at(n),r=e.query;let i=!1,o=t.queries.get(r);if(o||(i=!0,o=new pK),i)try{o.Au=yield t.onListen(r)}catch(u){const d=n_(u,`Initialization of query '${_N(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,o),o.listeners.push(e),e.bu(t.onlineState),o.Au&&e.Pu(o.Au)&&hO(t)}),uO.apply(this,arguments)}function cO(n,e){return dO.apply(this,arguments)}function dO(){return dO=(0,De.Z)(function*(n,e){const t=at(n),r=e.query;let i=!1;const o=t.queries.get(r);if(o){const u=o.listeners.indexOf(e);u>=0&&(o.listeners.splice(u,1),i=0===o.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),dO.apply(this,arguments)}function mK(n,e){const t=at(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const d of u.listeners)d.Pu(i)&&(r=!0);u.Au=i}}r&&hO(t)}function _K(n,e,t){const r=at(n),i=r.queries.get(e);if(i)for(const o of i.listeners)o.onError(t);r.queries.delete(e)}function hO(n){n.Ru.forEach(e=>{e.next()})}class fO{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new i_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||!(this.options.Nu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=i_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Vu=!0,this.vu.next(e)}}class yK{constructor(e,t){this.payload=e,this.byteLength=t}ku(){return"metadata"in this.payload}}class oH{constructor(e){this.It=e}Ji(e){return Mu(this.It,e)}Yi(e){return e.metadata.exists?t2(this.It,e.document,!1):Jn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return wi(e)}}class vK{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=aH(e)}Ou(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=En.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Fu(e){const t=new Map,r=new oH(this.It);for(const i of e)if(i.metadata.queries){const o=r.Ji(i.metadata.name);for(const u of i.metadata.queries){const d=(t.get(u)||en()).add(o);t.set(u,d)}}return t}complete(){var e=this;return(0,De.Z)(function*(){const t=yield function K4(n,e,t,r){return LN.apply(this,arguments)}(e.localStore,new oH(e.It),e.documents,e.Mu.id),r=e.Fu(e.documents);for(const i of e.queries)yield Z4(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,$u:e.collectionGroups,Bu:t}})()}}function aH(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class lH{constructor(e){this.key=e}}class uH{constructor(e){this.key=e}}class cH{constructor(e,t){this.query=e,this.Lu=t,this.Uu=null,this.current=!1,this.qu=en(),this.mutatedKeys=en(),this.Ku=DB(e),this.Gu=new r_(this.Ku)}get Qu(){return this.Lu}ju(e,t){const r=t?t.Wu:new sH,i=t?t.Gu:this.Gu;let o=t?t.mutatedKeys:this.mutatedKeys,u=i,d=!1;const p="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,_="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((E,D)=>{const x=i.get(E),P=yN(this.query,D)?D:null,L=!!x&&this.mutatedKeys.has(x.key),J=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let ue=!1;x&&P?x.data.isEqual(P.data)?L!==J&&(r.track({type:3,doc:P}),ue=!0):this.zu(x,P)||(r.track({type:2,doc:P}),ue=!0,(p&&this.Ku(P,p)>0||_&&this.Ku(P,_)<0)&&(d=!0)):!x&&P?(r.track({type:0,doc:P}),ue=!0):x&&!P&&(r.track({type:1,doc:x}),ue=!0,(p||_)&&(d=!0)),ue&&(P?(u=u.add(P),o=J?o.add(E):o.delete(E)):(u=u.delete(E),o=o.delete(E)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const E="F"===this.query.limitType?u.last():u.first();u=u.delete(E.key),o=o.delete(E.key),r.track({type:1,doc:E})}return{Gu:u,Wu:r,$i:d,mutatedKeys:o}}zu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const o=e.Wu.Eu();o.sort((_,E)=>function(D,x){const P=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gt()}};return P(D)-P(x)}(_.type,E.type)||this.Ku(_.doc,E.doc)),this.Hu(r);const u=t?this.Ju():[],d=0===this.qu.size&&this.current?1:0,p=d!==this.Uu;return this.Uu=d,0!==o.length||p?{snapshot:new i_(this.query,e.Gu,i,o,e.mutatedKeys,0===d,p,!1),Yu:u}:{Yu:u}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new sH,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}Xu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.qu;this.qu=en(),this.Gu.forEach(r=>{this.Xu(r.key)&&(this.qu=this.qu.add(r.key))});const t=[];return e.forEach(r=>{this.qu.has(r)||t.push(new uH(r))}),this.qu.forEach(r=>{e.has(r)||t.push(new lH(r))}),t}Zu(e){this.Lu=e.Hi,this.qu=en();const t=this.ju(e.documents);return this.applyChanges(t,!0)}tc(){return i_.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.Uu)}}class bK{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class wK{constructor(e){this.key=e,this.ec=!1}}class EK{constructor(e,t,r,i,o,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.nc={},this.sc=new uh(d=>IB(d),Ew),this.ic=new Map,this.rc=new Set,this.oc=new Pr(rt.comparator),this.uc=new Map,this.cc=new xN,this.ac={},this.hc=new Map,this.lc=gp.vn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function CK(n,e){return pO.apply(this,arguments)}function pO(){return pO=(0,De.Z)(function*(n,e){const t=LO(n);let r,i;const o=t.sc.get(e);if(o)r=o.targetId,t.sharedClientState.addLocalQueryTarget(r),i=o.view.tc();else{const u=yield Qm(t.localStore,Js(e));t.isPrimaryClient&&jD(t.remoteStore,u);const d=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield gO(t,e,r,"current"===d)}return i}),pO.apply(this,arguments)}function gO(n,e,t,r){return mO.apply(this,arguments)}function mO(){return mO=(0,De.Z)(function*(n,e,t,r){n.dc=(E,D,x)=>{return(P=(0,De.Z)(function*(L,J,ue,Ne){let We=J.view.ju(ue);We.$i&&(We=yield VD(L.localStore,J.query,!1).then(({documents:St})=>J.view.ju(St,We)));const et=Ne&&Ne.targetChanges.get(J.targetId),Xe=J.view.applyChanges(We,L.isPrimaryClient,et);return DO(L,J.targetId,Xe.Yu),Xe.snapshot}),function(L,J,ue,Ne){return P.apply(this,arguments)})(n,E,D,x);var P};const i=yield VD(n.localStore,e,!0),o=new cH(e,i.Hi),u=o.ju(i.documents),d=Aw.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),p=o.applyChanges(u,n.isPrimaryClient,d);DO(n,t,p.Yu);const _=new bK(e,t,o);return n.sc.set(e,_),n.ic.has(t)?n.ic.get(t).push(e):n.ic.set(t,[e]),p.snapshot}),mO.apply(this,arguments)}function IK(n,e){return _O.apply(this,arguments)}function _O(){return _O=(0,De.Z)(function*(n,e){const t=at(n),r=t.sc.get(e),i=t.ic.get(r.targetId);if(i.length>1)return t.ic.set(r.targetId,i.filter(o=>!Ew(o,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Jm(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),$w(t.remoteStore,r.targetId),s_(t,r.targetId)}).catch(nh))):(s_(t,r.targetId),yield Jm(t.localStore,r.targetId,!0))}),_O.apply(this,arguments)}function yO(){return yO=(0,De.Z)(function*(n,e,t){const r=VO(n);try{const i=yield function(o,u){const d=at(o),p=dr.now(),_=u.reduce((x,P)=>x.add(P.key),en());let E,D;return d.persistence.runTransaction("Locally write mutations","readwrite",x=>{let P=Xs(),L=en();return d.Gi.getEntries(x,_).next(J=>{P=J,P.forEach((ue,Ne)=>{Ne.isValidDocument()||(L=L.add(ue))})}).next(()=>d.localDocuments.getOverlayedDocuments(x,P)).next(J=>{E=J;const ue=[];for(const Ne of u){const We=P6(Ne,E.get(Ne.key).overlayedDocument);null!=We&&ue.push(new Pc(Ne.key,We,gB(We.value.mapValue),hr.exists(!0)))}return d.mutationQueue.addMutationBatch(x,p,ue,u)}).next(J=>{D=J;const ue=J.applyToLocalDocumentSet(E,L);return d.documentOverlayCache.saveOverlays(x,J.batchId,ue)})}).then(()=>({batchId:D.batchId,changes:$B(E)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,u,d){let p=o.ac[o.currentUser.toKey()];p||(p=new Pr(qt)),p=p.insert(u,d),o.ac[o.currentUser.toKey()]=p}(r,i.batchId,t),yield Fc(r,i.changes),yield e_(r.remoteStore)}catch(i){const o=n_(i,"Failed to persist write");t.reject(o)}}),yO.apply(this,arguments)}function dH(n,e){return vO.apply(this,arguments)}function vO(){return vO=(0,De.Z)(function*(n,e){const t=at(n);try{const r=yield q4(t.localStore,e);e.targetChanges.forEach((i,o)=>{const u=t.uc.get(o);u&&(Ht(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.ec=!0:i.modifiedDocuments.size>0?Ht(u.ec):i.removedDocuments.size>0&&(Ht(u.ec),u.ec=!1))}),yield Fc(t,r,e)}catch(r){yield nh(r)}}),vO.apply(this,arguments)}function hH(n,e,t){const r=at(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.sc.forEach((o,u)=>{const d=u.view.bu(e);d.snapshot&&i.push(d.snapshot)}),function(o,u){const d=at(o);d.onlineState=u;let p=!1;d.queries.forEach((_,E)=>{for(const D of E.listeners)D.bu(u)&&(p=!0)}),p&&hO(d)}(r.eventManager,e),i.length&&r.nc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function DK(n,e,t){return bO.apply(this,arguments)}function bO(){return bO=(0,De.Z)(function*(n,e,t){const r=at(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.uc.get(e),o=i&&i.key;if(o){let u=new Pr(rt.comparator);u=u.insert(o,Jn.newNoDocument(o,Lt.min()));const d=en().add(o),p=new Sw(Lt.min(),new Map,new Un(qt),u,d);yield dH(r,p),r.oc=r.oc.remove(o),r.uc.delete(e),SO(r)}else yield Jm(r.localStore,e,!1).then(()=>s_(r,e,t)).catch(nh)}),bO.apply(this,arguments)}function SK(n,e){return wO.apply(this,arguments)}function wO(){return wO=(0,De.Z)(function*(n,e){const t=at(n),r=e.batch.batchId;try{const i=yield z4(t.localStore,e);TO(t,r,null),IO(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Fc(t,i)}catch(i){yield nh(i)}}),wO.apply(this,arguments)}function AK(n,e,t){return EO.apply(this,arguments)}function EO(){return EO=(0,De.Z)(function*(n,e,t){const r=at(n);try{const i=yield function(o,u){const d=at(o);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let _;return d.mutationQueue.lookupMutationBatch(p,u).next(E=>(Ht(null!==E),_=E.keys(),d.mutationQueue.removeMutationBatch(p,E))).next(()=>d.mutationQueue.performConsistencyCheck(p)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(p,_,u)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_)).next(()=>d.localDocuments.getDocuments(p,_))})}(r.localStore,e);TO(r,e,t),IO(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Fc(r,i)}catch(i){yield nh(i)}}),EO.apply(this,arguments)}function CO(){return CO=(0,De.Z)(function*(n,e){const t=at(n);fh(t.remoteStore)||ze("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const u=at(o);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>u.mutationQueue.getHighestUnacknowledgedBatchId(d))}(t.localStore);if(-1===r)return void e.resolve();const i=t.hc.get(r)||[];i.push(e),t.hc.set(r,i)}catch(r){const i=n_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),CO.apply(this,arguments)}function IO(n,e){(n.hc.get(e)||[]).forEach(t=>{t.resolve()}),n.hc.delete(e)}function TO(n,e,t){const r=at(n);let i=r.ac[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.ac[r.currentUser.toKey()]=i}}function s_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ic.get(e))n.sc.delete(r),t&&n.nc._c(r,t);n.ic.delete(e),n.isPrimaryClient&&n.cc.ls(e).forEach(r=>{n.cc.containsKey(r)||fH(n,r)})}function fH(n,e){n.rc.delete(e.path.canonicalString());const t=n.oc.get(e);null!==t&&($w(n.remoteStore,t),n.oc=n.oc.remove(e),n.uc.delete(t),SO(n))}function DO(n,e,t){for(const r of t)r instanceof lH?(n.cc.addReference(r.key,e),xK(n,r)):r instanceof uH?(ze("SyncEngine","Document no longer in limbo: "+r.key),n.cc.removeReference(r.key,e),n.cc.containsKey(r.key)||fH(n,r.key)):gt()}function xK(n,e){const t=e.key,r=t.path.canonicalString();n.oc.get(t)||n.rc.has(r)||(ze("SyncEngine","New document in limbo: "+t),n.rc.add(r),SO(n))}function SO(n){for(;n.rc.size>0&&n.oc.size<n.maxConcurrentLimboResolutions;){const e=n.rc.values().next().value;n.rc.delete(e);const t=new rt(En.fromString(e)),r=n.lc.next();n.uc.set(r,new wK(t)),n.oc=n.oc.insert(t,r),jD(n.remoteStore,new ch(Js(Hm(t.path)),r,2,Qs.at))}}function Fc(n,e,t){return AO.apply(this,arguments)}function AO(){return AO=(0,De.Z)(function*(n,e,t){const r=at(n),i=[],o=[],u=[];var d;r.sc.isEmpty()||(r.sc.forEach((d,p)=>{u.push(r.dc(p,e,t).then(_=>{if(_){r.isPrimaryClient&&r.sharedClientState.updateQueryState(p.targetId,_.fromCache?"not-current":"current"),i.push(_);const E=ON.Ci(p.targetId,_);o.push(E)}}))}),yield Promise.all(u),r.nc.Wo(i),yield(d=(0,De.Z)(function*(p,_){const E=at(p);try{yield E.persistence.runTransaction("notifyLocalViewChanges","readwrite",D=>me.forEach(_,x=>me.forEach(x.Si,P=>E.persistence.referenceDelegate.addReference(D,x.targetId,P)).next(()=>me.forEach(x.Di,P=>E.persistence.referenceDelegate.removeReference(D,x.targetId,P)))))}catch(D){if(!rh(D))throw D;ze("LocalStore","Failed to update sequence numbers: "+D)}for(const D of _){const x=D.targetId;if(!D.fromCache){const P=E.Ui.get(x),J=P.withLastLimboFreeSnapshotVersion(P.snapshotVersion);E.Ui=E.Ui.insert(x,J)}}}),function(p,_){return d.apply(this,arguments)})(r.localStore,o))}),AO.apply(this,arguments)}function RK(n,e){return MO.apply(this,arguments)}function MO(){return MO=(0,De.Z)(function*(n,e){const t=at(n);if(!t.currentUser.isEqual(e)){ze("SyncEngine","User change. New user:",e.toKey());const r=yield H2(t.localStore,e);t.currentUser=e,(i=t).hc.forEach(u=>{u.forEach(d=>{d.reject(new He(we.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.hc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Fc(t,r.ji)}var i}),MO.apply(this,arguments)}function kK(n,e){const t=at(n),r=t.uc.get(e);if(r&&r.ec)return en().add(r.key);{let i=en();const o=t.ic.get(e);if(!o)return i;for(const u of o){const d=t.sc.get(u);i=i.unionWith(d.view.Qu)}return i}}function NK(n,e){return xO.apply(this,arguments)}function xO(){return xO=(0,De.Z)(function*(n,e){const t=at(n),r=yield VD(t.localStore,e.query,!0),i=e.view.Zu(r);return t.isPrimaryClient&&DO(t,e.targetId,i.Yu),i}),xO.apply(this,arguments)}function OK(n,e){return RO.apply(this,arguments)}function RO(){return RO=(0,De.Z)(function*(n,e){const t=at(n);return z2(t.localStore,e).then(r=>Fc(t,r))}),RO.apply(this,arguments)}function PK(n,e,t,r){return kO.apply(this,arguments)}function kO(){return kO=(0,De.Z)(function*(n,e,t,r){const i=at(n),o=yield function(u,d){const p=at(u),_=at(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",E=>_.Tn(E,d).next(D=>D?p.localDocuments.getDocuments(E,D):me.resolve(null)))}(i.localStore,e);var d;null!==o?("pending"===t?yield e_(i.remoteStore):"acknowledged"===t||"rejected"===t?(TO(i,e,r||null),IO(i,e),d=e,at(at(i.localStore).mutationQueue).An(d)):gt(),yield Fc(i,o)):ze("SyncEngine","Cannot apply mutation batch with id: "+e)}),kO.apply(this,arguments)}function NO(){return NO=(0,De.Z)(function*(n,e){const t=at(n);if(LO(t),VO(t),!0===e&&!0!==t.fc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield pH(t,r.toArray());t.fc=!0,yield sO(t.remoteStore,!0);for(const o of i)jD(t.remoteStore,o)}else if(!1===e&&!1!==t.fc){const r=[];let i=Promise.resolve();t.ic.forEach((o,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):i=i.then(()=>(s_(t,u),Jm(t.localStore,u,!0))),$w(t.remoteStore,u)}),yield i,yield pH(t,r),function(o){const u=at(o);u.uc.forEach((d,p)=>{$w(u.remoteStore,p)}),u.cc.fs(),u.uc=new Map,u.oc=new Pr(rt.comparator)}(t),t.fc=!1,yield sO(t.remoteStore,!1)}}),NO.apply(this,arguments)}function pH(n,e,t){return OO.apply(this,arguments)}function OO(){return OO=(0,De.Z)(function*(n,e,t){const r=at(n),i=[],o=[];for(const u of e){let d;const p=r.ic.get(u);if(p&&0!==p.length){d=yield Qm(r.localStore,Js(p[0]));for(const _ of p){const E=r.sc.get(_),D=yield NK(r,E);D.snapshot&&o.push(D.snapshot)}}else{const _=yield G2(r.localStore,u);d=yield Qm(r.localStore,_),yield gO(r,gH(_),u,!1)}i.push(d)}return r.nc.Wo(o),i}),OO.apply(this,arguments)}function gH(n){return EB(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function LK(n){const e=at(n);return at(at(e.localStore).persistence).vi()}function VK(n,e,t,r){return PO.apply(this,arguments)}function PO(){return PO=(0,De.Z)(function*(n,e,t,r){const i=at(n);if(i.fc)return void ze("SyncEngine","Ignoring unexpected query state notification.");const o=i.ic.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const u=yield z2(i.localStore,TB(o[0])),d=Sw.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Fc(i,u,d);break}case"rejected":yield Jm(i.localStore,e,!0),s_(i,e,r);break;default:gt()}}),PO.apply(this,arguments)}function UK(n,e,t){return FO.apply(this,arguments)}function FO(){return FO=(0,De.Z)(function*(n,e,t){const r=LO(n);if(r.fc){for(const i of e){if(r.ic.has(i)){ze("SyncEngine","Adding an already active target "+i);continue}const o=yield G2(r.localStore,i),u=yield Qm(r.localStore,o);yield gO(r,gH(o),u.targetId,!1),jD(r.remoteStore,u)}for(const i of t)r.ic.has(i)&&(yield Jm(r.localStore,i,!1).then(()=>{$w(r.remoteStore,i),s_(r,i)}).catch(nh))}}),FO.apply(this,arguments)}function LO(n){const e=at(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=dH.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kK.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=DK.bind(null,e),e.nc.Wo=mK.bind(null,e.eventManager),e.nc._c=_K.bind(null,e.eventManager),e}function VO(n){const e=at(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=SK.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=AK.bind(null,e),e}class mH{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,De.Z)(function*(){t.It=Hw(e.databaseInfo.databaseId),t.sharedClientState=t.mc(e),t.persistence=t.gc(e),yield t.persistence.start(),t.localStore=t.yc(e),t.gcScheduler=t.Ic(e,t.localStore),t.indexBackfillerScheduler=t.Tc(e,t.localStore)})()}Ic(e,t){return null}Tc(e,t){return null}yc(e){return B2(this.persistence,new U2,e.initialUser,this.It)}gc(e){return new L2(FD.Bs,this.It)}mc(e){return new Z2}terminate(){var e=this;return(0,De.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class _H extends mH{constructor(e,t,r){super(),this.Ec=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,De.Z)(function*(){yield t().call(r,e),yield r.Ec.initialize(r,e),yield VO(r.Ec.syncEngine),yield e_(r.Ec.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}yc(e){return B2(this.persistence,new U2,e.initialUser,this.It)}Ic(e,t){return new x4(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Tc(e,t){const r=new f6(t,this.persistence);return new h6(e.asyncQueue,r)}gc(e){const t=NN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?eo.withCacheSize(this.cacheSizeBytes):eo.DEFAULT;return new kN(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Q2(),HD(),this.It,this.sharedClientState,!!this.forceOwnership)}mc(e){return new Z2}}class HK extends _H{constructor(e,t){super(e,t,!1),this.Ec=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,De.Z)(function*(){yield t().call(r,e);const i=r.Ec.syncEngine;r.sharedClientState instanceof jN&&(r.sharedClientState.syncEngine={Fr:PK.bind(null,i),$r:VK.bind(null,i),Br:UK.bind(null,i),vi:LK.bind(null,i),Or:OK.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var o=(0,De.Z)(function*(u){yield function FK(n,e){return NO.apply(this,arguments)}(r.Ec.syncEngine,u),r.gcScheduler&&(u&&!r.gcScheduler.started?r.gcScheduler.start():u||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(u&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():u||r.indexBackfillerScheduler.stop())});return function(u){return o.apply(this,arguments)}}())})()}mc(e){const t=Q2();if(!jN.C(t))throw new He(we.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=NN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new jN(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class UO{initialize(e,t){var r=this;return(0,De.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>hH(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=RK.bind(null,r.syncEngine),yield sO(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new gK}createDatastore(e){const t=Hw(e.databaseInfo.databaseId),r=new X4(e.databaseInfo);return new nK(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,o=d=>hH(this.syncEngine,d,0),u=Y2.C()?new Y2:new Y4,new iK(t,r,i,o,u);var t,r,i,o,u}createSyncEngine(e,t){return function(r,i,o,u,d,p,_){const E=new EK(r,i,o,u,d,p);return _&&(E.fc=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,De.Z)(function*(t){const r=at(t);ze("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield Xm(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function yH(n,e=10240){let t=0;return{read:()=>(0,De.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,De.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class GD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ac(this.observer.next,e)}error(e){this.observer.error?this.Ac(this.observer.error,e):Hr("Uncaught Error in snapshot listener:",e)}Rc(){this.muted=!0}Ac(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class jK{constructor(e,t){this.bc=e,this.It=t,this.metadata=new bi,this.buffer=new Uint8Array,this.Pc=new TextDecoder("utf-8"),this.vc().then(r=>{r&&r.ku()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.bc.cancel()}getMetadata(){var e=this;return(0,De.Z)(function*(){return e.metadata.promise})()}wc(){var e=this;return(0,De.Z)(function*(){return yield e.getMetadata(),e.vc()})()}vc(){var e=this;return(0,De.Z)(function*(){const t=yield e.Vc();if(null===t)return null;const r=e.Pc.decode(t),i=Number(r);isNaN(i)&&e.Sc(`length string (${r}) is not valid number`);const o=yield e.Dc(i);return new yK(JSON.parse(o),t.length+i)})()}Cc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Vc(){var e=this;return(0,De.Z)(function*(){for(;e.Cc()<0&&!(yield e.xc()););if(0===e.buffer.length)return null;const t=e.Cc();t<0&&e.Sc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Dc(e){var t=this;return(0,De.Z)(function*(){for(;t.buffer.length<e;)(yield t.xc())&&t.Sc("Reached the end of bundle when more is expected.");const r=t.Pc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Sc(e){throw this.bc.cancel(),new Error(`Invalid bundle format: ${e}`)}xc(){var e=this;return(0,De.Z)(function*(){const t=yield e.bc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class $K{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,De.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new He(we.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,De.Z)(function*(o,u){const d=at(o),p=Rw(d.It)+"/documents",_={documents:u.map(P=>xw(d.It,P))},E=yield d.fo("BatchGetDocuments",p,_,u.length),D=new Map;E.forEach(P=>{const L=function q6(n,e){return"found"in e?function(t,r){Ht(!!r.found);const i=Mu(t,r.found.name),o=wi(r.found.updateTime),u=new Hi({mapValue:{fields:r.found.fields}});return Jn.newFoundDocument(i,o,u)}(n,e):"missing"in e?function(t,r){Ht(!!r.missing),Ht(!!r.readTime);const i=Mu(t,r.missing),o=wi(r.readTime);return Jn.newNoDocument(i,o)}(n,e):gt()}(d.It,P);D.set(L.key.toString(),L)});const x=[];return u.forEach(P=>{const L=D.get(P.toString());Ht(!!L),x.push(L)}),x}),function(o,u){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new qm(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,De.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const o=rt.fromPath(i);e.mutations.push(new vN(o,e.precondition(o)))}),yield(r=(0,De.Z)(function*(i,o){const u=at(i),d=Rw(u.It)+"/documents",p={writes:o.map(_=>kw(u.It,_))};yield u.co("Commit",d,p)}),function(i,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw gt();t=Lt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new He(we.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Lt.min())?hr.exists(!1):hr.updateTime(t):hr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Lt.min()))throw new He(we.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return hr.updateTime(t)}return hr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class GK{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.Nc=r.maxAttempts,this.xo=new $N(this.asyncQueue,"transaction_retry")}run(){this.Nc-=1,this.kc()}kc(){var e=this;this.xo.Ao((0,De.Z)(function*(){const t=new $K(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(o=>{e.Oc(o)}))}).catch(i=>{e.Oc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!mw(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Oc(e){this.Nc>0&&this.Fc(e)?(this.Nc-=1,this.asyncQueue.enqueueAndForget(()=>(this.kc(),Promise.resolve()))):this.deferred.reject(e)}Fc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!BB(t)}return!1}}class zK{constructor(e,t,r,i){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=vi.UNAUTHENTICATED,this.clientId=QU.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,De.Z)(function*(d){ze("FirestoreClient","Received user=",d.uid),yield o.authCredentialListener(d),o.user=d});return function(d){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>(ze("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,De.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new He(we.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new bi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,De.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=n_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function vH(n,e){return BO.apply(this,arguments)}function BO(){return BO=(0,De.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ze("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,De.Z)(function*(o){r.isEqual(o)||(yield H2(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),BO.apply(this,arguments)}function bH(n,e){return HO.apply(this,arguments)}function HO(){return HO=(0,De.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield jO(n);ze("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>iH(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,o)=>iH(e.remoteStore,o)),n.onlineComponents=e}),HO.apply(this,arguments)}function jO(n){return $O.apply(this,arguments)}function $O(){return $O=(0,De.Z)(function*(n){return n.offlineComponents||(ze("FirestoreClient","Using default OfflineComponentProvider"),yield vH(n,new mH)),n.offlineComponents}),$O.apply(this,arguments)}function zD(n){return GO.apply(this,arguments)}function GO(){return GO=(0,De.Z)(function*(n){return n.onlineComponents||(ze("FirestoreClient","Using default OnlineComponentProvider"),yield bH(n,new UO)),n.onlineComponents}),GO.apply(this,arguments)}function wH(n){return jO(n).then(e=>e.persistence)}function qD(n){return jO(n).then(e=>e.localStore)}function EH(n){return zD(n).then(e=>e.remoteStore)}function zO(n){return zD(n).then(e=>e.syncEngine)}function o_(n){return qO.apply(this,arguments)}function qO(){return qO=(0,De.Z)(function*(n){const e=yield zD(n),t=e.eventManager;return t.onListen=CK.bind(null,e.syncEngine),t.onUnlisten=IK.bind(null,e.syncEngine),t}),qO.apply(this,arguments)}function CH(n,e,t={}){const r=new bi;return n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return function(i,o,u,d,p){const _=new GD({next:D=>{o.enqueueAndForget(()=>cO(i,E));const x=D.docs.has(u);!x&&D.fromCache?p.reject(new He(we.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&D.fromCache&&d&&"server"===d.source?p.reject(new He(we.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(D)},error:D=>p.reject(D)}),E=new fO(Hm(u.path),_,{includeMetadataChanges:!0,Nu:!0});return lO(i,E)}(yield o_(n),n.asyncQueue,e,t,r)})),r.promise}function IH(n,e,t={}){const r=new bi;return n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return function(i,o,u,d,p){const _=new GD({next:D=>{o.enqueueAndForget(()=>cO(i,E)),D.fromCache&&"server"===d.source?p.reject(new He(we.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(D)},error:D=>p.reject(D)}),E=new fO(u,_,{includeMetadataChanges:!0,Nu:!0});return lO(i,E)}(yield o_(n),n.asyncQueue,e,t,r)})),r.promise}const TH=new Map;function WO(n,e,t){if(!t)throw new He(we.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function DH(n,e,t,r){if(!0===e&&!0===r)throw new He(we.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function SH(n){if(!rt.isDocumentKey(n))throw new He(we.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function AH(n){if(rt.isDocumentKey(n))throw new He(we.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function WD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":gt()}function _n(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new He(we.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=WD(n);throw new He(we.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function MH(n,e){if(e<=0)throw new He(we.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class xH{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new He(we.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new He(we.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,DH("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gw{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xH({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new He(we.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new He(we.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xH(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new e6;switch(t.type){case"gapi":return new i6(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new He(we.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=TH.get(e);t&&(ze("ComponentProvider","Removing Datastore"),TH.delete(e),t.terminate())}(this),Promise.resolve()}}class ur{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ru(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ur(this.firestore,e,this._key)}}class ss{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ss(this.firestore,e,this._query)}}class Ru extends ss{constructor(e,t,r){super(e,t,Hm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ur(this.firestore,null,new rt(e))}withConverter(e){return new Ru(this.firestore,e,this._path)}}function RH(n,e,...t){if(n=(0,F.m9)(n),WO("collection","path",e),n instanceof Gw){const r=En.fromString(e,...t);return AH(r),new Ru(n,null,r)}{if(!(n instanceof ur||n instanceof Ru))throw new He(we.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(En.fromString(e,...t));return AH(r),new Ru(n.firestore,null,r)}}function KD(n,e,...t){if(n=(0,F.m9)(n),1===arguments.length&&(e=QU.R()),WO("doc","path",e),n instanceof Gw){const r=En.fromString(e,...t);return SH(r),new ur(n,null,new rt(r))}{if(!(n instanceof ur||n instanceof Ru))throw new He(we.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(En.fromString(e,...t));return SH(r),new ur(n.firestore,n instanceof Ru?n.converter:null,new rt(r))}}function kH(n,e){return n=(0,F.m9)(n),e=(0,F.m9)(e),(n instanceof ur||n instanceof Ru)&&(e instanceof ur||e instanceof Ru)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function NH(n,e){return n=(0,F.m9)(n),e=(0,F.m9)(e),n instanceof ss&&e instanceof ss&&n.firestore===e.firestore&&Ew(n._query,e._query)&&n.converter===e.converter}class n8{constructor(){this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new $N(this,"async_queue_retry"),this.jc=()=>{const t=HD();t&&ze("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.bo()};const e=HD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.jc)}get isShuttingDown(){return this.Lc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Wc(),this.zc(e)}enterRestrictedMode(e){if(!this.Lc){this.Lc=!0,this.Gc=e||!1;const t=HD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.jc)}}enqueue(e){if(this.Wc(),this.Lc)return new Promise(()=>{});const t=new bi;return this.zc(()=>this.Lc&&this.Gc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Bc.push(e),this.Hc()))}Hc(){var e=this;return(0,De.Z)(function*(){if(0!==e.Bc.length){try{yield e.Bc[0](),e.Bc.shift(),e.xo.reset()}catch(t){if(!rh(t))throw t;ze("AsyncQueue","Operation failed with retryable error: "+t)}e.Bc.length>0&&e.xo.Ao(()=>e.Hc())}})()}zc(e){const t=this.$c.then(()=>(this.Kc=!0,e().catch(r=>{throw this.qc=r,this.Kc=!1,Hr("INTERNAL UNHANDLED ERROR: ",function(o){let u=o.message||"";return o.stack&&(u=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),u}(r)),r}).then(r=>(this.Kc=!1,r))));return this.$c=t,t}enqueueAfterDelay(e,t,r){this.Wc(),this.Qc.indexOf(e)>-1&&(t=0);const i=aO.createAndSchedule(this,e,t,r,o=>this.Jc(o));return this.Uc.push(i),i}Wc(){this.qc&&gt()}verifyOperationInProgress(){}Yc(){var e=this;return(0,De.Z)(function*(){let t;do{t=e.$c,yield t}while(t!==e.$c)})()}Xc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}Zc(e){return this.Yc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Yc()})}ta(e){this.Qc.push(e)}Jc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function KO(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class r8{constructor(){this._progressObserver={},this._taskCompletionResolver=new bi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class fr extends Gw{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new n8,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||OH(this),this._firestoreClient.terminate()}}function Yr(n){return n._firestoreClient||OH(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function OH(n){var e;const t=n._freezeSettings(),r=(o=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new m6(n._databaseId,o,n._persistenceKey,(d=t).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,d.useFetchStreams));var o,d;n._firestoreClient=new zK(n._authCredentials,n._appCheckCredentials,n._queue,r)}function PH(n,e,t){const r=new bi;return n.asyncQueue.enqueue((0,De.Z)(function*(){try{yield vH(n,t),yield bH(n,e),r.resolve()}catch(i){const o=i;if(!("FirebaseError"===(u=o).name?u.code===we.FAILED_PRECONDITION||u.code===we.UNIMPLEMENTED:!(typeof DOMException<"u"&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw o;Xf("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var u})).then(()=>r.promise)}function FH(n){if(n._initialized||n._terminated)throw new He(we.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Lc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new He(we.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Or(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ku{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ku(oi.fromBase64String(e))}catch(t){throw new He(we.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ku(oi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class _p{constructor(e){this._methodName=e}}class ZD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new He(we.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new He(we.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return qt(this._lat,e._lat)||qt(this._long,e._long)}}const f8=/^__.*__$/;class p8{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Pc(e,this.data,this.fieldMask,t,this.fieldTransforms):new zm(e,this.data,t,this.fieldTransforms)}}class LH{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Pc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function VH(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gt()}}class YD{constructor(e,t,r,i,o,u){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=i,void 0===o&&this.ea(),this.fieldTransforms=o||[],this.fieldMask=u||[]}get path(){return this.settings.path}get na(){return this.settings.na}sa(e){return new YD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.sa({path:r,ra:!1});return i.oa(e),i}ua(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.sa({path:r,ra:!1});return i.ea(),i}ca(e){return this.sa({path:void 0,ra:!0})}aa(e){return XD(e,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ea(){if(this.path)for(let e=0;e<this.path.length;e++)this.oa(this.path.get(e))}oa(e){if(0===e.length)throw this.aa("Document fields must not be empty");if(VH(this.na)&&f8.test(e))throw this.aa('Document fields cannot begin and end with "__"')}}class g8{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||Hw(e)}fa(e,t,r,i=!1){return new YD({na:e,methodName:t,la:r,path:Or.emptyPath(),ra:!1,ha:i},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function yp(n){const e=n._freezeSettings(),t=Hw(n._databaseId);return new g8(n._databaseId,!!e.ignoreUndefinedProperties,t)}function QD(n,e,t,r,i,o={}){const u=n.fa(o.merge||o.mergeFields?2:0,e,t,i);JO("Data must be an object, but it was:",u,r);const d=HH(r,u);let p,_;if(o.merge)p=new Lo(u.fieldMask),_=u.fieldTransforms;else if(o.mergeFields){const E=[];for(const D of o.mergeFields){const x=XO(e,D,t);if(!u.contains(x))throw new He(we.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);$H(E,x)||E.push(x)}p=new Lo(E),_=u.fieldTransforms.filter(D=>p.covers(D.field))}else p=null,_=u.fieldTransforms;return new p8(new Hi(d),p,_)}class zw extends _p{_toFieldTransform(e){if(2!==e.na)throw e.aa(1===e.na?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zw}}function UH(n,e,t){return new YD({na:3,la:e.settings.la,methodName:n._methodName,ra:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class ZO extends _p{_toFieldTransform(e){return new Cw(e.path,new $m)}isEqual(e){return e instanceof ZO}}class m8 extends _p{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=UH(this,e,!0),r=this.da.map(o=>vp(o,t)),i=new ap(r);return new Cw(e.path,i)}isEqual(e){return this===e}}class _8 extends _p{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=UH(this,e,!0),r=this.da.map(o=>vp(o,t)),i=new lp(r);return new Cw(e.path,i)}isEqual(e){return this===e}}class y8 extends _p{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=new Gm(e.It,MB(e.It,this._a));return new Cw(e.path,t)}isEqual(e){return this===e}}function YO(n,e,t,r){const i=n.fa(1,e,t);JO("Data must be an object, but it was:",i,r);const o=[],u=Hi.empty();np(r,(p,_)=>{const E=JD(e,p,t);_=(0,F.m9)(_);const D=i.ua(E);if(_ instanceof zw)o.push(E);else{const x=vp(_,D);null!=x&&(o.push(E),u.set(E,x))}});const d=new Lo(o);return new LH(u,d,i.fieldTransforms)}function QO(n,e,t,r,i,o){const u=n.fa(1,e,t),d=[XO(e,r,t)],p=[i];if(o.length%2!=0)throw new He(we.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<o.length;x+=2)d.push(XO(e,o[x])),p.push(o[x+1]);const _=[],E=Hi.empty();for(let x=d.length-1;x>=0;--x)if(!$H(_,d[x])){const P=d[x];let L=p[x];L=(0,F.m9)(L);const J=u.ua(P);if(L instanceof zw)_.push(P);else{const ue=vp(L,J);null!=ue&&(_.push(P),E.set(P,ue))}}const D=new Lo(_);return new LH(E,D,u.fieldTransforms)}function BH(n,e,t,r=!1){return vp(t,n.fa(r?4:3,e))}function vp(n,e){if(jH(n=(0,F.m9)(n)))return JO("Unsupported field value:",e,n),HH(n,e);if(n instanceof _p)return function(t,r){if(!VH(r.na))throw r.aa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.aa(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ra&&4!==e.na)throw e.aa("Nested arrays are not supported");return function(t,r){const i=[];let o=0;for(const u of t){let d=vp(u,r.ca(o));null==d&&(d={nullValue:"NULL_VALUE"}),i.push(d),o++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,F.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return MB(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=dr.fromDate(t);return{timestampValue:Mw(r.It,i)}}if(t instanceof dr){const i=new dr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Mw(r.It,i)}}if(t instanceof ZD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ku)return{bytesValue:YB(r.It,t._byteString)};if(t instanceof ur){const i=r.databaseId,o=t.firestore._databaseId;if(!o.isEqual(i))throw r.aa(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:bN(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.aa(`Unsupported field value: ${WD(t)}`)}(n,e)}function HH(n,e){const t={};return sB(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):np(n,(r,i)=>{const o=vp(i,e.ia(r));null!=o&&(t[r]=o)}),{mapValue:{fields:t}}}function jH(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof dr||n instanceof ZD||n instanceof ku||n instanceof ur||n instanceof _p)}function JO(n,e,t){if(!jH(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=WD(t);throw e.aa("an object"===r?n+" a custom object":n+" "+r)}var r}function XO(n,e,t){if((e=(0,F.m9)(e))instanceof Lc)return e._internalPath;if("string"==typeof e)return JD(n,e);throw XD("Field path arguments must be of type string or ",n,!1,void 0,t)}const v8=new RegExp("[~\\*/\\[\\]]");function JD(n,e,t){if(e.search(v8)>=0)throw XD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Lc(...e.split("."))._internalPath}catch{throw XD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function XD(n,e,t,r,i){const o=r&&!r.isEmpty(),u=void 0!==i;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(o||u)&&(p+=" (found",o&&(p+=` in field ${r}`),u&&(p+=` in document ${i}`),p+=")"),new He(we.INVALID_ARGUMENT,d+n+p)}function $H(n,e){return n.some(t=>t.isEqual(e))}class qw{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ur(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new b8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(eS("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class b8 extends qw{data(){return super.data()}}function eS(n,e){return"string"==typeof e?JD(n,e):e instanceof Lc?e._internalPath:e._delegate._internalPath}class bp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Vc extends qw{constructor(e,t,r,i,o,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ww(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(eS("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Ww extends Vc{data(e={}){return super.data(e)}}class gh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new bp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ww(this._firestore,this._userDataWriter,r.key,r,new bp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new He(we.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new Ww(r._firestore,r._userDataWriter,u.doc.key,u.doc,new bp(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:o++}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||3!==u.type).map(u=>{const d=new Ww(r._firestore,r._userDataWriter,u.doc.key,u.doc,new bp(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,_=-1;return 0!==u.type&&(p=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),1!==u.type&&(o=o.add(u.doc),_=o.indexOf(u.doc.key)),{type:w8(u.type),doc:d,oldIndex:p,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function w8(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gt()}}function GH(n,e){return n instanceof Vc&&e instanceof Vc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof gh&&e instanceof gh&&n._firestore===e._firestore&&NH(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function zH(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new He(we.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Kw{}function mh(n,...e){for(const t of e)n=t._apply(n);return n}class E8 extends Kw{constructor(e,t,r){super(),this.wa=e,this.ma=t,this.ga=r,this.type="where"}_apply(e){const t=yp(e.firestore),r=function(i,o,u,d,p,_,E){let D;if(p.isKeyField()){if("array-contains"===_||"array-contains-any"===_)throw new He(we.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if("in"===_||"not-in"===_){QH(E,_);const P=[];for(const L of E)P.push(YH(d,i,L));D={arrayValue:{values:P}}}else D=YH(d,i,E)}else"in"!==_&&"not-in"!==_&&"array-contains-any"!==_||QH(E,_),D=BH(u,"where",E,"in"===_||"not-in"===_);const x=ji.create(p,_,D);return function(P,L){if(L.dt()){const ue=gN(P);if(null!==ue&&!ue.isEqual(L.field))throw new He(we.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ue.toString()}' and '${L.field.toString()}'`);const Ne=pN(P);null!==Ne&&JH(0,L.field,Ne)}const J=function(ue,Ne){for(const We of ue.filters)if(Ne.indexOf(We.op)>=0)return We.op;return null}(P,function(ue){switch(ue){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(L.op));if(null!==J)throw new He(we.INVALID_ARGUMENT,J===L.op?`Invalid query. You cannot use more than one '${L.op.toString()}' filter.`:`Invalid query. You cannot use '${L.op.toString()}' filters with '${J.toString()}' filters.`)}(i,x),x}(e._query,0,t,e.firestore._databaseId,this.wa,this.ma,this.ga);return new ss(e.firestore,e.converter,function(i,o){const u=i.filters.concat([o]);return new Oc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),u,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class I8 extends Kw{constructor(e,t){super(),this.wa=e,this.ya=t,this.type="orderBy"}_apply(e){const t=function(r,i,o){if(null!==r.startAt)throw new He(we.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new He(we.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new Bm(i,o);return function(d,p){if(null===pN(d)){const _=gN(d);null!==_&&JH(0,_,p.field)}}(r,u),u}(e._query,this.wa,this.ya);return new ss(e.firestore,e.converter,function(r,i){const o=r.explicitOrderBy.concat([i]);return new Oc(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class qH extends Kw{constructor(e,t,r){super(),this.type=e,this.pa=t,this.Ia=r}_apply(e){return new ss(e.firestore,e.converter,ED(e._query,this.pa,this.Ia))}}class WH extends Kw{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=ZH(e,this.type,this.Ta,this.Ea);return new ss(e.firestore,e.converter,(i=t,new Oc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class KH extends Kw{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=ZH(e,this.type,this.Ta,this.Ea);return new ss(e.firestore,e.converter,(i=t,new Oc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function ZH(n,e,t,r){if(t[0]=(0,F.m9)(t[0]),t[0]instanceof qw)return function(i,o,u,d,p){if(!d)throw new He(we.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const _=[];for(const E of jm(i))if(E.field.isKeyField())_.push(sp(o,d.key));else{const D=d.data.field(E.field);if(dN(D))throw new He(we.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+E.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===D){const x=E.field.canonicalString();throw new He(we.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${x}' (used as the orderBy) does not exist.`)}_.push(D)}return new lh(_,p)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=yp(n.firestore);return function(o,u,d,p,_,E){const D=o.explicitOrderBy;if(_.length>D.length)throw new He(we.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const x=[];for(let P=0;P<_.length;P++){const L=_[P];if(D[P].field.isKeyField()){if("string"!=typeof L)throw new He(we.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof L}`);if(!mN(o)&&-1!==L.indexOf("/"))throw new He(we.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${L}' contains a slash.`);const J=o.path.child(En.fromString(L));if(!rt.isDocumentKey(J))throw new He(we.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${J}' is not because it contains an odd number of segments.`);const ue=new rt(J);x.push(sp(u,ue))}else{const J=BH(d,p,L);x.push(J)}}return new lh(x,E)}(n._query,n.firestore._databaseId,i,e,t,r)}}function YH(n,e,t){if("string"==typeof(t=(0,F.m9)(t))){if(""===t)throw new He(we.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mN(e)&&-1!==t.indexOf("/"))throw new He(we.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(En.fromString(t));if(!rt.isDocumentKey(r))throw new He(we.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return sp(n,new rt(r))}if(t instanceof ur)return sp(n,t._key);throw new He(we.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${WD(t)}.`)}function QH(n,e){if(!Array.isArray(n)||0===n.length)throw new He(we.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new He(we.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function JH(n,e,t){if(!t.isEqual(e))throw new He(we.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const k8={maxAttempts:5};class eP{convertValue(e,t="none"){switch(ip(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(rp(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw gt()}}convertObject(e,t){const r={};return np(e.fields,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertGeoPoint(e){return new ZD(Fr(e.latitude),Fr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=aB(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(gw(e));default:return null}}convertTimestamp(e){const t=ih(e);return new dr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=En.fromString(e);Ht(a2(r));const i=new sh(r.get(1),r.get(3)),o=new rt(r.popFirst(5));return i.isEqual(t)||Hr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function tS(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class N8 extends eP{constructor(e){super(),this.firestore=e}convertBytes(e){return new ku(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ur(this.firestore,null,t)}}class XH{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=yp(e)}set(e,t,r){this._verifyNotCommitted();const i=_h(e,this._firestore),o=tS(i.converter,t,r),u=QD(this._dataReader,"WriteBatch.set",i._key,o,null!==i.converter,r);return this._mutations.push(u.toMutation(i._key,hr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const o=_h(e,this._firestore);let u;return u="string"==typeof(t=(0,F.m9)(t))||t instanceof Lc?QO(this._dataReader,"WriteBatch.update",o._key,t,r,i):YO(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(u.toMutation(o._key,hr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=_h(e,this._firestore);return this._mutations=this._mutations.concat(new qm(t._key,hr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new He(we.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function _h(n,e){if((n=(0,F.m9)(n)).firestore!==e)throw new He(we.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class wp extends eP{constructor(e){super(),this.firestore=e}convertBytes(e){return new ku(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ur(this.firestore,null,t)}}function ej(n,e,t){n=_n(n,ur);const r=_n(n.firestore,fr),i=tS(n.converter,e,t);return a_(r,[QD(yp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,hr.none())])}function tj(n,e,t,...r){n=_n(n,ur);const i=_n(n.firestore,fr),o=yp(i);let u;return u="string"==typeof(e=(0,F.m9)(e))||e instanceof Lc?QO(o,"updateDoc",n._key,e,t,r):YO(o,"updateDoc",n._key,e),a_(i,[u.toMutation(n._key,hr.exists(!0))])}function nj(n,...e){var t,r,i;n=(0,F.m9)(n);let o={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||KO(e[u])||(o=e[u],u++);const d={includeMetadataChanges:o.includeMetadataChanges};if(KO(e[u])){const D=e[u];e[u]=null===(t=D.next)||void 0===t?void 0:t.bind(D),e[u+1]=null===(r=D.error)||void 0===r?void 0:r.bind(D),e[u+2]=null===(i=D.complete)||void 0===i?void 0:i.bind(D)}let p,_,E;if(n instanceof ur)_=_n(n.firestore,fr),E=Hm(n._key.path),p={next:D=>{e[u]&&e[u](tP(_,n,D))},error:e[u+1],complete:e[u+2]};else{const D=_n(n,ss);_=_n(D.firestore,fr),E=D._query;const x=new wp(_);p={next:P=>{e[u]&&e[u](new gh(_,x,D,P))},error:e[u+1],complete:e[u+2]},zH(n._query)}return function(D,x,P,L){const J=new GD(L),ue=new fO(x,J,P);return D.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return lO(yield o_(D),ue)})),()=>{J.Rc(),D.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return cO(yield o_(D),ue)}))}}(Yr(_),E,d,p)}function a_(n,e){return function(t,r){const i=new bi;return t.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return function TK(n,e,t){return yO.apply(this,arguments)}(yield zO(t),r,i)})),i.promise}(Yr(n),e)}function tP(n,e,t){const r=t.docs.get(e._key),i=new wp(n);return new Vc(n,i,e._key,r,new bp(t.hasPendingWrites,t.fromCache),e.converter)}class $8 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=yp(e)}get(e){const t=_h(e,this._firestore),r=new N8(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return gt();const o=i[0];if(o.isFoundDocument())return new qw(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new qw(this._firestore,r,t._key,null,t.converter);throw gt()})}set(e,t,r){const i=_h(e,this._firestore),o=tS(i.converter,t,r),u=QD(this._dataReader,"Transaction.set",i._key,o,null!==i.converter,r);return this._transaction.set(i._key,u),this}update(e,t,r,...i){const o=_h(e,this._firestore);let u;return u="string"==typeof(t=(0,F.m9)(t))||t instanceof Lc?QO(this._dataReader,"Transaction.update",o._key,t,r,i):YO(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,u),this}delete(e){const t=_h(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=_h(e,this._firestore),r=new wp(this._firestore);return super.get(e).then(i=>new Vc(this._firestore,r,t._key,i._document,new bp(!1,!1),t.converter))}}function nP(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new He("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function ij(){if(typeof Uint8Array>"u")throw new He("unimplemented","Uint8Arrays are not available in this environment.")}function sj(){if(!function p6(){return typeof atob<"u"}())throw new He("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Fm=ns.SDK_VERSION,(0,ns._registerComponent)(new xa.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const o=t.getProvider("app").getImmediate(),u=new fr(new n6(t.getProvider("auth-internal")),new s6(t.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new He(we.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sh(d.options.projectId,p)}(o,r),o);return i=Object.assign({useFetchStreams:e},i),u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),(0,ns.registerVersion)(KU,"3.4.15",n),(0,ns.registerVersion)(KU,"3.4.15","esm2017")}();class Zw{constructor(e){this._delegate=e}static fromBase64String(e){return sj(),new Zw(ku.fromBase64String(e))}static fromUint8Array(e){return ij(),new Zw(ku.fromUint8Array(e))}toBase64(){return sj(),this._delegate.toBase64()}toUint8Array(){return ij(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function rP(n){return function J8(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class X8{enableIndexedDbPersistence(e,t){return function s8(n,e){FH(n=_n(n,fr));const t=Yr(n),r=n._freezeSettings(),i=new UO;return PH(t,i,new _H(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function o8(n){FH(n=_n(n,fr));const e=Yr(n),t=n._freezeSettings(),r=new UO;return PH(e,r,new HK(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function a8(n){if(n._initialized&&!n._terminated)throw new He(we.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new bi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,De.Z)(function*(){try{yield(t=(0,De.Z)(function*(r){if(!Nl.C())return Promise.resolve();const i=r+"main";yield Nl.delete(i)}),function(r){return t.apply(this,arguments)})(NN(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class oj{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof sh||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Xf("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function e8(n,e,t,r={}){var i;const o=(n=_n(n,Gw))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==e&&Xf("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},o),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let u,d;if("string"==typeof r.mockUserToken)u=r.mockUserToken,d=vi.MOCK_USER;else{u=(0,F.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new He(we.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new vi(p)}n._authCredentials=new t6(new ZU(u,d))}}(this._delegate,e,t,r)}enableNetwork(){return function u8(n){return function qK(n){return n.asyncQueue.enqueue((0,De.Z)(function*(){const e=yield wH(n),t=yield EH(n);return e.setNetworkEnabled(!0),function(r){const i=at(r);return i._u.delete(0),jw(i)}(t)}))}(Yr(n=_n(n,fr)))}(this._delegate)}disableNetwork(){return function c8(n){return function WK(n){return n.asyncQueue.enqueue((0,De.Z)(function*(){const e=yield wH(n),t=yield EH(n);return e.setNetworkEnabled(!1),(r=(0,De.Z)(function*(i){const o=at(i);o._u.add(0),yield Xm(o),o.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Yr(n=_n(n,fr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,DH("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function l8(n){return function(e){const t=new bi;return e.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return function MK(n,e){return CO.apply(this,arguments)}(yield zO(e),t)})),t.promise}(Yr(n=_n(n,fr)))}(this._delegate)}onSnapshotsInSync(e){return function j8(n,e){return function YK(n,e){const t=new GD(e);return n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return r=yield o_(n),i=t,at(r).Ru.add(i),void i.next();var r,i})),()=>{t.Rc(),n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return r=yield o_(n),i=t,void at(r).Ru.delete(i);var r,i}))}}(Yr(n=_n(n,fr)),KO(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new He("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new l_(this,RH(this._delegate,e))}catch(t){throw xs(t,"collection()","Firestore.collection()")}}doc(e){try{return new Oa(this,KD(this._delegate,e))}catch(t){throw xs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Rs(this,function t8(n,e){if(n=_n(n,Gw),WO("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new He(we.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ss(n,null,(t=e,new Oc(En.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw xs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function G8(n,e,t){n=_n(n,fr);const r=Object.assign(Object.assign({},k8),t);return function(i){if(i.maxAttempts<1)throw new He(we.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function QK(n,e,t){const r=new bi;return n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){const i=yield(o=n,zD(o).then(u=>u.datastore));var o;new GK(n.asyncQueue,i,t,e,r).run()})),r.promise}(Yr(n),i=>e(new $8(n,i)),r)}(this._delegate,t=>e(new aj(this,t)))}batch(){return Yr(this._delegate),new lj(new XH(this._delegate,e=>a_(this._delegate,e)))}loadBundle(e){return function d8(n,e){const t=Yr(n=_n(n,fr)),r=new r8;return function JK(n,e,t,r){const i=function(o,u){let d;return d="string"==typeof o?(new TextEncoder).encode(o):o,p=function(p,_){if(p instanceof Uint8Array)return yH(p,_);if(p instanceof ArrayBuffer)return yH(new Uint8Array(p),_);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new jK(p,u);var p}(t,Hw(e));n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){!function BK(n,e,t){const r=at(n);var i;(i=(0,De.Z)(function*(o,u,d){try{const p=yield u.getMetadata();if(yield function(x,P){const L=at(x),J=wi(P.createTime);return L.persistence.runTransaction("hasNewerBundle","readonly",ue=>L.Ns.getBundleMetadata(ue,P.id)).then(ue=>!!ue&&ue.createTime.compareTo(J)>=0)}(o.localStore,p))return yield u.close(),d._completeWith({taskState:"Success",documentsLoaded:(x=p).totalDocuments,bytesLoaded:x.totalBytes,totalDocuments:x.totalDocuments,totalBytes:x.totalBytes}),Promise.resolve(new Set);d._updateProgress(aH(p));const _=new vK(p,o.localStore,u.It);let E=yield u.wc();for(;E;){const x=yield _.Ou(E);x&&d._updateProgress(x),E=yield u.wc()}const D=yield _.complete();return yield Fc(o,D.Bu,void 0),yield function(x,P){const L=at(x);return L.persistence.runTransaction("Save bundle","readwrite",J=>L.Ns.saveBundleMetadata(J,P))}(o.localStore,p),d._completeWith(D.progress),Promise.resolve(D.$u)}catch(p){return Xf("SyncEngine",`Loading bundle failed with ${p}`),d._failWith(p),Promise.resolve(new Set)}var x}),function(o,u,d){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield zO(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function h8(n,e){return function XK(n,e){return n.asyncQueue.enqueue((0,De.Z)(function*(){return function(t,r){const i=at(t);return i.persistence.runTransaction("Get named query","readonly",o=>i.Ns.getNamedQuery(o,r))}(yield qD(n),e)}))}(Yr(n=_n(n,fr)),e).then(t=>t?new ss(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Rs(this,t):null)}}class nS extends eP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zw(new ku(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Oa.forKey(t,this.firestore,null)}}class aj{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new nS(e)}get(e){const t=Cp(e);return this._delegate.get(t).then(r=>new Yw(this._firestore,new Vc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Cp(e);return r?(nP("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=Cp(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=Cp(e);return this._delegate.delete(t),this}}class lj{constructor(e){this._delegate=e}set(e,t,r){const i=Cp(e);return r?(nP("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=Cp(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=Cp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Ep{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Ww(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Qw(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Ep.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new Ep(e,new nS(e),t),i.set(t,o)),o}}Ep.INSTANCES=new WeakMap;class Oa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new nS(e)}static forPath(e,t,r){if(e.length%2!=0)throw new He("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Oa(t,new ur(t._delegate,r,new rt(e)))}static forKey(e,t,r){return new Oa(t,new ur(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new l_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new l_(this.firestore,RH(this._delegate,e))}catch(t){throw xs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,F.m9)(e))instanceof ur&&kH(this._delegate,e)}set(e,t){t=nP("DocumentReference.set",t);try{return t?ej(this._delegate,e,t):ej(this._delegate,e)}catch(r){throw xs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?tj(this._delegate,e):tj(this._delegate,e,t,...r)}catch(i){throw xs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function B8(n){return a_(_n(n.firestore,fr),[new qm(n._key,hr.none())])}(this._delegate)}onSnapshot(...e){const t=uj(e),r=cj(e,i=>new Yw(this.firestore,new Vc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return nj(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function P8(n){n=_n(n,ur);const e=_n(n.firestore,fr),t=Yr(e),r=new wp(e);return function KK(n,e){const t=new bi;return n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return(r=(0,De.Z)(function*(i,o,u){try{const d=yield function(p,_){const E=at(p);return E.persistence.runTransaction("read document","readonly",D=>E.localDocuments.getDocument(D,_))}(i,o);d.isFoundDocument()?u.resolve(d):d.isNoDocument()?u.resolve(null):u.reject(new He(we.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const p=n_(d,`Failed to get document '${o} from cache`);u.reject(p)}}),function(i,o,u){return r.apply(this,arguments)})(yield qD(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Vc(e,r,n._key,i,new bp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function F8(n){n=_n(n,ur);const e=_n(n.firestore,fr);return CH(Yr(e),n._key,{source:"server"}).then(t=>tP(e,n,t))}(this._delegate):function O8(n){n=_n(n,ur);const e=_n(n.firestore,fr);return CH(Yr(e),n._key).then(t=>tP(e,n,t))}(this._delegate),t.then(r=>new Yw(this.firestore,new Vc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Oa(this.firestore,this._delegate.withConverter(e?Ep.getInstance(this.firestore,e):null))}}function xs(n,e,t){return n.message=n.message.replace(e,t),n}function uj(n){for(const e of n)if("object"==typeof e&&!rP(e))return e;return{}}function cj(n,e){var t,r;let i;return i=rP(n[0])?n[0]:rP(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Yw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Oa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return GH(this._delegate,e._delegate)}}class Qw extends Yw{data(e){const t=this._delegate.data(e);return function XW(n,e){n||gt()}(void 0!==t),t}}class Rs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new nS(e)}where(e,t,r){try{return new Rs(this.firestore,mh(this._delegate,function C8(n,e,t){const r=e,i=eS("where",n);return new E8(i,r,t)}(e,t,r)))}catch(i){throw xs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Rs(this.firestore,mh(this._delegate,function T8(n,e="asc"){const t=e,r=eS("orderBy",n);return new I8(r,t)}(e,t)))}catch(r){throw xs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Rs(this.firestore,mh(this._delegate,function D8(n){return MH("limit",n),new qH("limit",n,"F")}(e)))}catch(t){throw xs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Rs(this.firestore,mh(this._delegate,function S8(n){return MH("limitToLast",n),new qH("limitToLast",n,"L")}(e)))}catch(t){throw xs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Rs(this.firestore,mh(this._delegate,function A8(...n){return new WH("startAt",n,!0)}(...e)))}catch(t){throw xs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Rs(this.firestore,mh(this._delegate,function M8(...n){return new WH("startAfter",n,!1)}(...e)))}catch(t){throw xs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Rs(this.firestore,mh(this._delegate,function x8(...n){return new KH("endBefore",n,!1)}(...e)))}catch(t){throw xs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Rs(this.firestore,mh(this._delegate,function R8(...n){return new KH("endAt",n,!0)}(...e)))}catch(t){throw xs(t,"endAt()","Query.endAt()")}}isEqual(e){return NH(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function V8(n){n=_n(n,ss);const e=_n(n.firestore,fr),t=Yr(e),r=new wp(e);return function ZK(n,e){const t=new bi;return n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return(r=(0,De.Z)(function*(i,o,u){try{const d=yield VD(i,o,!0),p=new cH(o,d.Hi),_=p.ju(d.documents),E=p.applyChanges(_,!1);u.resolve(E.snapshot)}catch(d){const p=n_(d,`Failed to execute query '${o} against cache`);u.reject(p)}}),function(i,o,u){return r.apply(this,arguments)})(yield qD(n),e,t);var r})),t.promise}(t,n._query).then(i=>new gh(e,r,n,i))}(this._delegate):"server"===e?.source?function U8(n){n=_n(n,ss);const e=_n(n.firestore,fr),t=Yr(e),r=new wp(e);return IH(t,n._query,{source:"server"}).then(i=>new gh(e,r,n,i))}(this._delegate):function L8(n){n=_n(n,ss);const e=_n(n.firestore,fr),t=Yr(e),r=new wp(e);return zH(n._query),IH(t,n._query).then(i=>new gh(e,r,n,i))}(this._delegate),t.then(r=>new iP(this.firestore,new gh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=uj(e),r=cj(e,i=>new iP(this.firestore,new gh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return nj(this._delegate,t,r)}withConverter(e){return new Rs(this.firestore,this._delegate.withConverter(e?Ep.getInstance(this.firestore,e):null))}}class t5{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Qw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class iP{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Rs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Qw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new t5(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Qw(this._firestore,r))})}isEqual(e){return GH(this._delegate,e._delegate)}}class l_ extends Rs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Oa(this.firestore,e):null}doc(e){try{return new Oa(this.firestore,void 0===e?KD(this._delegate):KD(this._delegate,e))}catch(t){throw xs(t,"doc()","CollectionReference.doc()")}}add(e){return function H8(n,e){const t=_n(n.firestore,fr),r=KD(n),i=tS(n.converter,e);return a_(t,[QD(yp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,hr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Oa(this.firestore,t))}isEqual(e){return kH(this._delegate,e._delegate)}withConverter(e){return new l_(this.firestore,this._delegate.withConverter(e?Ep.getInstance(this.firestore,e):null))}}function Cp(n){return _n(n,ur)}class sP{constructor(...e){this._delegate=new Lc(...e)}static documentId(){return new sP(Or.keyField().canonicalString())}isEqual(e){return(e=(0,F.m9)(e))instanceof Lc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Ip{constructor(e){this._delegate=e}static serverTimestamp(){const e=function q8(){return new ZO("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Ip(e)}static delete(){const e=function z8(){return new zw("deleteField")}();return e._methodName="FieldValue.delete",new Ip(e)}static arrayUnion(...e){const t=function W8(...n){return new m8("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Ip(t)}static arrayRemove(...e){const t=function K8(...n){return new _8("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Ip(t)}static increment(e){const t=function Z8(n){return new y8("increment",n)}(e);return t._methodName="FieldValue.increment",new Ip(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const n5={Firestore:oj,GeoPoint:ZD,Timestamp:dr,Blob:Zw,Transaction:aj,WriteBatch:lj,DocumentReference:Oa,DocumentSnapshot:Yw,Query:Rs,QueryDocumentSnapshot:Qw,QuerySnapshot:iP,CollectionReference:l_,FieldPath:sP,FieldValue:Ip,setLogLevel:function e5(n){!function JW(n){th.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function dj(n,e){return function s5(n,e=uE.z){return new ii.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function oP(n,e){return dj(n,e).pipe((0,ht.U)(t=>({payload:t,type:"query"})))}function rS(n,e){return oP(n,e).pipe(qs(void 0),fk(),(0,ht.U)(([t,r])=>{const i=r.payload.docChanges(),o=i.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((u,d)=>{const p=i.find(E=>E.doc.ref.isEqual(u.ref)),_=t?.payload.docs.find(E=>E.ref.isEqual(u.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(u.metadata)||!p&&_&&JSON.stringify(_.metadata)===JSON.stringify(u.metadata)||o.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:u}})}),o}))}function hj(n,e,t){return rS(n,t).pipe(Wf((r,i)=>function a5(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function l5(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return aP(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return aP(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return aP(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(o=>o.payload),e),[]),dg(),(0,ht.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function aP(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function fj(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function i5(n){(function r5(n,e){n.INTERNAL.registerComponent(new xa.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},n5)))})(n,(e,t)=>new oj(e,t,new X8)),n.registerVersion("@firebase/firestore-compat","0.1.24")}(NT.Z);class pj{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=rS(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ht.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(qs(void 0),fk(),Ri(([r,i])=>i.length>0||!r),(0,ht.U)(([r,i])=>i),mn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Wf((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=fj(e);return hj(this.query,t,this.afs.schedulers.outsideAngular).pipe(mn.iC)}valueChanges(e={}){return oP(this.query,this.afs.schedulers.outsideAngular).pipe((0,ht.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),mn.iC)}get(e){return(0,pn.D)(this.query.get(e)).pipe(mn.iC)}add(e){return this.ref.add(e)}doc(e){return new gj(this.ref.doc(e),this.afs)}}class gj{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:o}=yj(r,t);return new pj(i,o,this.afs)}snapshotChanges(){return function o5(n,e){return dj(n,e).pipe(qs(void 0),fk(),(0,ht.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(mn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ht.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,pn.D)(this.ref.get(e)).pipe(mn.iC)}}class u5{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?rS(this.query,this.afs.schedulers.outsideAngular).pipe((0,ht.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ri(t=>t.length>0),mn.iC):rS(this.query,this.afs.schedulers.outsideAngular).pipe(mn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Wf((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=fj(e);return hj(this.query,t,this.afs.schedulers.outsideAngular).pipe(mn.iC)}valueChanges(e={}){return oP(this.query,this.afs.schedulers.outsideAngular).pipe((0,ht.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),mn.iC)}get(e){return(0,pn.D)(this.query.get(e)).pipe(mn.iC)}}const mj=new h.OlP("angularfire2.enableFirestorePersistence"),_j=new h.OlP("angularfire2.firestore.persistenceSettings"),c5=new h.OlP("angularfire2.firestore.settings"),d5=new h.OlP("angularfire2.firestore.use-emulator");function yj(n,e=(t=>t)){return{query:e(n),ref:n}}let vj=(()=>{class n{constructor(t,r,i,o,u,d,p,_,E,D,x,P,L,J,ue,Ne,We){this.schedulers=p;const et=(0,Nr.on)(t,d,r),Xe=E;D&&Gf(et,d,x,L,J,ue,P,Ne),[this.firestore,this.persistenceEnabled$]=(0,Nr.cc)(`${et.name}.firestore`,"AngularFirestore",et.name,()=>{const St=d.runOutsideAngular(()=>et.firestore());if(o&&St.settings(o),Xe&&St.useEmulator(...Xe),i&&!Ko(u)){const Mt=()=>{try{return(0,pn.D)(St.enablePersistence(_||void 0).then(()=>!0,()=>!1))}catch(ln){return typeof console<"u"&&console.warn(ln),ut(!1)}};return[St,d.runOutsideAngular(Mt)]}return[St,ut(!1)]},[o,Xe,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:o,query:u}=yj(i,r),d=this.schedulers.ngZone.run(()=>o);return new pj(d,u,this)}collectionGroup(t,r){const i=r||(u=>u),o=this.firestore.collectionGroup(t);return new u5(i(o),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new gj(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Nr.Dh),h.LFG(Nr.xv,8),h.LFG(mj,8),h.LFG(c5,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(mn.HU),h.LFG(_j,8),h.LFG(d5,8),h.LFG(zf,8),h.LFG(Fb,8),h.LFG(Lb,8),h.LFG(Sm,8),h.LFG($f,8),h.LFG(kT,8),h.LFG(Am,8),h.LFG(Ac,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),h5=(()=>{class n{constructor(){jf.Z.registerVersion("angularfire",mn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:mj,useValue:!0},{provide:_j,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[vj]}),n})();const bj="@firebase/database";let lP="";function Ej(n){lP=n}class g5{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,F.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,F.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class m5{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,F.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Cj=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new g5(e)}}catch{}return new m5},Tp=Cj("localStorage"),uP=Cj("sessionStorage"),u_=new Ra.Yd("@firebase/database"),Ij=function(){let n=1;return function(){return n++}}(),Tj=function(n){const e=(0,F.dS)(n),t=new F.gQ;t.update(e);const r=t.digest();return F.US.encodeByteArray(r)},Jw=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Jw.apply(null,r):e+="object"==typeof r?(0,F.Pz)(r):r,e+=" "}return e};let Dp=null,Dj=!0;const Sj=function(n,e){(0,F.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(u_.logLevel=Ra.in.VERBOSE,Dp=u_.log.bind(u_),e&&uP.set("logging_enabled",!0)):"function"==typeof n?Dp=n:(Dp=null,uP.remove("logging_enabled"))},Ii=function(...n){if(!0===Dj&&(Dj=!1,null===Dp&&!0===uP.get("logging_enabled")&&Sj(!0)),Dp){const e=Jw.apply(null,n);Dp(e)}},Xw=function(n){return function(...e){Ii(n,...e)}},cP=function(...n){const e="FIREBASE INTERNAL ERROR: "+Jw(...n);u_.error(e)},Nu=function(...n){const e=`FIREBASE FATAL ERROR: ${Jw(...n)}`;throw u_.error(e),new Error(e)},os=function(...n){const e="FIREBASE WARNING: "+Jw(...n);u_.warn(e)},iS=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Uc="[MIN_NAME]",Ou="[MAX_NAME]",Sp=function(n,e){if(n===e)return 0;if(n===Uc||e===Ou)return-1;if(e===Uc||n===Ou)return 1;{const t=sS(n),r=sS(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},v5=function(n,e){return n===e?0:n<e?-1:1},e0=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,F.Pz)(e))},dP=function(n){if("object"!=typeof n||null===n)return(0,F.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,F.Pz)(e[r]),t+=":",t+=dP(n[e[r]]);return t+="}",t},Aj=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Ti(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const Mj=function(n){(0,F.hu)(!iS(n),"Invalid JSON number");const r=1023;let i,o,u,d,p;0===n?(o=0,u=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=d+r,u=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(o=0,u=Math.round(n/Math.pow(2,-1074))));const _=[];for(p=52;p;p-=1)_.push(u%2?1:0),u=Math.floor(u/2);for(p=11;p;p-=1)_.push(o%2?1:0),o=Math.floor(o/2);_.push(i?1:0),_.reverse();const E=_.join("");let D="";for(p=0;p<64;p+=8){let x=parseInt(E.substr(p,8),2).toString(16);1===x.length&&(x="0"+x),D+=x}return D.toLowerCase()},C5=new RegExp("^-?(0*)\\d{1,10}$"),xj=-2147483648,hP=2147483647,sS=function(n){if(C5.test(n)){const e=Number(n);if(e>=xj&&e<=hP)return e}return null},c_=function(n){try{n()}catch(e){setTimeout(()=>{throw os("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},t0=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class T5{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){os(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class D5{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Ii("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',os(e)}}let n0=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const Pj=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Vj="websocket",Uj="long_polling";class pP{constructor(e,t,r,i,o=!1,u="",d=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=u,this.includeNamespaceInQueryParams=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Tp.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Tp.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Bj(n,e,t){let r;if((0,F.hu)("string"==typeof e,"typeof type must == string"),(0,F.hu)("object"==typeof t,"typeof params must == object"),e===Vj)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==Uj)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function S5(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Ti(t,(o,u)=>{i.push(o+"="+u)}),r+i.join("&")}class A5{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,F.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,F.p$)(this.counters_)}}const gP={},mP={};function _P(n){const e=n.toString();return gP[e]||(gP[e]=new A5),gP[e]}class x5{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&c_(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class yh{constructor(e,t,r,i,o,u,d){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=u,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Xw(e),this.stats_=_P(t),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),Bj(t,Uj,p))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new x5(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,F.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new yP((...o)=>{const[u,d,p,_,E]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=d,this.password=p;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[u,d]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(u,d)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Pj.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){yh.forceAllow_=!0}static forceDisallow(){yh.forceDisallow_=!0}static isAvailable(){return!((0,F.Yr)()||!yh.forceAllow_&&(yh.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,F.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,F.h$)(t),i=Aj(r,1840);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,F.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,F.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class yP{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,F.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Ij(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=yP.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(d){Ii("frame writing exception"),d.stack&&Ii(d.stack),Ii(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ii("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const u=this.pendingSegs.shift();r=r+"&seg"+i+"="+u.seg+"&ts"+i+"="+u.ts+"&d"+i+"="+u.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,F.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Ii("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let aS=null;typeof MozWebSocket<"u"?aS=MozWebSocket:typeof WebSocket<"u"&&(aS=WebSocket);let d_=(()=>{class n{constructor(t,r,i,o,u,d,p){this.connId=t,this.applicationId=i,this.appCheckToken=o,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Xw(this.connId),this.stats_=_P(r),this.connURL=n.connectionURL_(r,d,p,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,o,u){const d={v:"5"};return!(0,F.Yr)()&&typeof location<"u"&&location.hostname&&Pj.test(location.hostname)&&(d.r="f"),r&&(d.s=r),i&&(d.ls=i),o&&(d.ac=o),u&&(d.p=u),Bj(t,Vj,d)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Tp.set("previous_websocket_failure",!0);try{let i;if((0,F.Yr)()){i={headers:{"User-Agent":`Firebase/5/${lP}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const u=process.env,d=0===this.connURL.indexOf("wss://")?u.HTTPS_PROXY||u.https_proxy:u.HTTP_PROXY||u.http_proxy;d&&(i.proxy={origin:d})}this.mySock=new aS(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const o=i.message||i.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==aS&&!n.forceDisallow_}static previouslyFailed(){return Tp.isInMemoryStorage||!0===Tp.get("previous_websocket_failure")}markConnectionHealthy(){Tp.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,F.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,F.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,F.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=Aj(r,16384);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),Wj=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[yh,d_]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=d_&&d_.isAvailable();let i=r&&!d_.previouslyFailed();if(t.webSocketOnly&&(r||os("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[d_];else{const o=this.transports_=[];for(const u of n.ALL_TRANSPORTS)u&&u.isAvailable()&&o.push(u);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class e${constructor(e,t,r,i,o,u,d,p,_,E){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=u,this.onReady_=d,this.onDisconnect_=p,this.onKill_=_,this.lastSessionId=E,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Xw("c:"+this.id+":"),this.transportManager_=new Wj(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=t0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=e0("t",e),r=e0("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=e0("t",e),r=e0("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=e0("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?cP("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):cP("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&os("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),t0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):t0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Tp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class t${put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class n${constructor(e){this.allowedEvents_=e,this.listeners_={},(0,F.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===t&&(!r||r===i[o].context))return void i.splice(o,1)}validateEventType_(e){(0,F.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class lS extends n${constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,F.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new lS}getInitialEvent(e){return(0,F.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class kn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Sn(){return new kn("")}function sn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function vh(n){return n.pieces_.length-n.pieceNum_}function Kn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new kn(n.pieces_,e)}function bP(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function r0(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function s$(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new kn(e,0)}function pr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof kn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new kn(t,0)}function on(n){return n.pieceNum_>=n.pieces_.length}function ks(n,e){const t=sn(n),r=sn(e);if(null===t)return e;if(t===r)return ks(Kn(n),Kn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function J5(n,e){const t=r0(n,0),r=r0(e,0);for(let i=0;i<t.length&&i<r.length;i++){const o=Sp(t[i],r[i]);if(0!==o)return o}return t.length===r.length?0:t.length<r.length?-1:1}function wP(n,e){if(vh(n)!==vh(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Pa(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(vh(n)>vh(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class X5{constructor(e,t){this.errorPrefix_=t,this.parts_=r0(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,F.ug)(this.parts_[r]);o$(this)}}function o$(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Ap(n))}function Ap(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class EP extends n${constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new EP}getInitialEvent(e){return(0,F.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const s0=1e3;let cS,Mp=(()=>{class n extends t${constructor(t,r,i,o,u,d,p,_){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=u,this.authTokenProvider_=d,this.appCheckTokenProvider_=p,this.authOverride_=_,this.id=n.nextPersistentConnectionId_++,this.log_=Xw("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=s0,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,_&&!(0,F.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");EP.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&lS.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const o=++this.requestNumber_,u={r:o,a:t,b:r};this.log_((0,F.Pz)(u)),(0,F.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),i&&(this.requestCBHash_[o]=i)}get(t){this.initConnection_();const r=new F.BH,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:d=>{const p=d.d;"ok"===d.s?r.resolve(p):r.reject(p)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,o){this.initConnection_();const u=t._queryIdentifier,d=t._path.toString();this.log_("Listen called for "+d+" "+u),this.listens.has(d)||this.listens.set(d,new Map),(0,F.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,F.hu)(!this.listens.get(d).has(u),"listen() called twice for same path/queryId.");const p={onComplete:o,hashFn:r,query:t,tag:i};this.listens.get(d).set(u,p),this.connected_&&this.sendListen_(p)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);const u={p:i};t.tag&&(u.q=r._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest("q",u,p=>{const _=p.d,E=p.s;n.warnOnListenWarnings_(_,r),(this.listens.get(i)&&this.listens.get(i).get(o))===t&&(this.log_("listen response",p),"ok"!==E&&this.removeListen_(i,o),t.onComplete&&t.onComplete(E,_))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,F.r3)(t,"w")){const i=(0,F.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',u=r._path.toString();os(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,F.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,F.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{const u=o.s,d=o.d||"error";this.authToken_===t&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),(0,F.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,t._queryObject,r)}sendUnlisten_(t,r,i,o){this.log_("Unlisten on "+t+" for "+r);const u={p:t};o&&(u.q=i,u.t=o),this.sendRequest("n",u)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,o){const u={p:r,d:i};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,d=>{o&&setTimeout(()=>{o(d.s,d.d)},Math.floor(0))})}put(t,r,i,o){this.putInternal("p",t,r,i,o)}merge(t,r,i,o){this.putInternal("m",t,r,i,o)}putInternal(t,r,i,o,u){this.initConnection_();const d={p:r,d:i};void 0!==u&&(d.h=u),this.outstandingPuts_.push({action:t,request:d,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,u=>{this.log_(r+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(u.s,u.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,F.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):cP("Unrecognized action received from server: "+(0,F.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,F.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=s0,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=s0,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=s0),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,De.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),o=t.onRealtimeDisconnect_.bind(t),u=t.id+":"+n.nextConnectionId_++,d=t.lastSessionId;let p=!1,_=null;const E=function(){_?_.close():(p=!0,o())};t.realtime_={close:E,sendRequest:function(P){(0,F.hu)(_,"sendRequest call when we're not connected not allowed."),_.sendRequest(P)}};const x=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[P,L]=yield Promise.all([t.authTokenProvider_.getToken(x),t.appCheckTokenProvider_.getToken(x)]);p?Ii("getToken() completed but was canceled"):(Ii("getToken() completed. Creating connection."),t.authToken_=P&&P.accessToken,t.appCheckToken_=L&&L.token,_=new e$(u,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,o,J=>{os(J+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},d))}catch(P){t.log_("Failed to get token: "+P),p||(t.repoInfo_.nodeAdmin&&os(P),E())}}})()}interrupt(t){Ii("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ii("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,F.xb)(this.interruptReasons_)&&(this.reconnectDelay_=s0,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(u=>dP(u)).join("$"):"default";const o=this.removeListen_(t,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,r){const i=new kn(t).toString();let o;if(this.listens.has(i)){const u=this.listens.get(i);o=u.get(r),u.delete(r),0===u.size&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(t,r){Ii("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Ii("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,F.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+lP.replace(/\./g,"-")]=1,(0,F.uI)()?t["framework.cordova"]=1:(0,F.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=lS.getInstance().currentlyOnline();return(0,F.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class dn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new dn(e,t)}}class uS{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new dn(Uc,e),i=new dn(Uc,t);return 0!==this.compare(r,i)}minPost(){return dn.MIN}}class u$ extends uS{static get __EMPTY_NODE(){return cS}static set __EMPTY_NODE(e){cS=e}compare(e,t){return Sp(e.name,t.name)}isDefinedOn(e){throw(0,F.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return dn.MIN}maxPost(){return new dn(Ou,cS)}makePost(e,t){return(0,F.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new dn(e,cS)}toString(){return".key"}}const Pu=new u$;class dS{constructor(e,t,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,i&&(u*=-1),u<0)e=this.isReverse_?e.left:e.right;else{if(0===u){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let IP,Ol=(()=>{class n{constructor(t,r,i,o,u){this.key=t,this.value=r,this.color=i??n.RED,this.left=o??to.EMPTY_NODE,this.right=u??to.EMPTY_NODE}copy(t,r,i,o,u){return new n(t??this.key,r??this.value,i??this.color,o??this.left,u??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let o=this;const u=i(t,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(t,r,i),null):0===u?o.copy(null,r,null,null,null):o.copy(null,null,null,null,o.right.insert(t,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return to.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,o;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return to.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class to{constructor(e,t=to.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new to(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ol.BLACK,null,null))}remove(e){return new to(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ol.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new dS(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new dS(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new dS(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new dS(this.root_,null,this.comparator_,!0,e)}}function aZ(n,e){return Sp(n.name,e.name)}function CP(n,e){return Sp(n,e)}to.EMPTY_NODE=new class oZ{copy(e,t,r,i,o){return this}insert(e,t,r){return new Ol(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const c$=function(n){return"number"==typeof n?"number:"+Mj(n):"string:"+n},d$=function(n){if(n.isLeafNode()){const e=n.val();(0,F.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,F.r3)(e,".sv"),"Priority must be a string or number.")}else(0,F.hu)(n===IP||n.isEmpty(),"priority of unexpected type.");(0,F.hu)(n===IP||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let h$,f$,p$,h_=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,F.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),d$(this.priorityNode_)}static set __childrenNodeConstructor(t){h$=t}static get __childrenNodeConstructor(){return h$}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return on(t)?this:".priority"===sn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=sn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,F.hu)(".priority"!==i||1===vh(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Kn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+c$(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?Mj(this.value_):this.value_,this.lazyHash_=Tj(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,F.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(r),u=n.VALUE_TYPE_ORDER.indexOf(i);return(0,F.hu)(o>=0,"Unknown leaf type: "+r),(0,F.hu)(u>=0,"Unknown leaf type: "+i),o===u?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-o}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Xn=new class dZ extends uS{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),o=r.compareTo(i);return 0===o?Sp(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return dn.MIN}maxPost(){return new dn(Ou,new h_("[PRIORITY-POST]",p$))}makePost(e,t){const r=f$(e);return new dn(t,new h_("[PRIORITY-POST]",r))}toString(){return".priority"}},hZ=Math.log(2);class fZ{constructor(e){this.count=parseInt(Math.log(e+1)/hZ,10),this.current_=this.count-1;const i=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const hS=function(n,e,t,r){n.sort(e);const i=function(p,_){const E=_-p;let D,x;if(0===E)return null;if(1===E)return D=n[p],x=t?t(D):D,new Ol(x,D.node,Ol.BLACK,null,null);{const P=parseInt(E/2,10)+p,L=i(p,P),J=i(P+1,_);return D=n[P],x=t?t(D):D,new Ol(x,D.node,Ol.BLACK,L,J)}},d=function(p){let _=null,E=null,D=n.length;const x=function(L,J){const ue=D-L,Ne=D;D-=L;const We=i(ue+1,Ne),et=n[ue],Xe=t?t(et):et;P(new Ol(Xe,et.node,J,null,We))},P=function(L){_?(_.left=L,_=L):(E=L,_=L)};for(let L=0;L<p.count;++L){const J=p.nextBitIsOne(),ue=Math.pow(2,p.count-(L+1));J?x(ue,Ol.BLACK):(x(ue,Ol.BLACK),x(ue,Ol.RED))}return E}(new fZ(n.length));return new to(r||e,d)};let TP;const f_={};class Bc{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,F.hu)(f_&&Xn,"ChildrenNode.ts has not been loaded"),TP=TP||new Bc({".priority":f_},{".priority":Xn}),TP}get(e){const t=(0,F.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof to?t:null}hasIndex(e){return(0,F.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,F.hu)(e!==Pu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const o=t.getIterator(dn.Wrap);let d,u=o.getNext();for(;u;)i=i||e.isDefinedOn(u.node),r.push(u),u=o.getNext();d=i?hS(r,e.getCompare()):f_;const p=e.toString(),_=Object.assign({},this.indexSet_);_[p]=e;const E=Object.assign({},this.indexes_);return E[p]=d,new Bc(E,_)}addToIndexes(e,t){const r=(0,F.UI)(this.indexes_,(i,o)=>{const u=(0,F.DV)(this.indexSet_,o);if((0,F.hu)(u,"Missing index implementation for "+o),i===f_){if(u.isDefinedOn(e.node)){const d=[],p=t.getIterator(dn.Wrap);let _=p.getNext();for(;_;)_.name!==e.name&&d.push(_),_=p.getNext();return d.push(e),hS(d,u.getCompare())}return f_}{const d=t.get(e.name);let p=i;return d&&(p=p.remove(new dn(e.name,d))),p.insert(e,e.node)}});return new Bc(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,F.UI)(this.indexes_,i=>{if(i===f_)return i;{const o=t.get(e.name);return o?i.remove(new dn(e.name,o)):i}});return new Bc(r,this.indexSet_)}}let o0,Jt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&d$(this.priorityNode_),this.children_.isEmpty()&&(0,F.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return o0||(o0=new n(new to(CP),null,Bc.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||o0}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?o0:r}}getChild(t){const r=sn(t);return null===r?this:this.getImmediateChild(r).getChild(Kn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,F.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new dn(t,r);let o,u;r.isEmpty()?(o=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(t,r),u=this.indexMap_.addToIndexes(i,this.children_));const d=o.isEmpty()?o0:this.priorityNode_;return new n(o,d,u)}}updateChild(t,r){const i=sn(t);if(null===i)return r;{(0,F.hu)(".priority"!==sn(t)||1===vh(t),".priority must be the last token in a path");const o=this.getImmediateChild(i).updateChild(Kn(t),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,o=0,u=!0;if(this.forEachChild(Xn,(d,p)=>{r[d]=p.val(t),i++,u&&n.INTEGER_REGEXP_.test(d)?o=Math.max(o,Number(d)):u=!1}),!t&&u&&o<2*i){const d=[];for(const p in r)d[p]=r[p];return d}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+c$(this.getPriority().val())+":"),this.forEachChild(Xn,(r,i)=>{const o=i.hash();""!==o&&(t+=":"+r+":"+o)}),this.lazyHash_=""===t?"":Tj(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const o=this.resolveIndex_(i);if(o){const u=o.getPredecessorKey(new dn(t,r));return u?u.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new dn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new dn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,o=>o);{const o=this.children_.getIteratorFrom(t.name,dn.Wrap);let u=o.peek();for(;null!=u&&r.compare(u,t)<0;)o.getNext(),u=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,o=>o);{const o=this.children_.getReverseIteratorFrom(t.name,dn.Wrap);let u=o.peek();for(;null!=u&&r.compare(u,t)>0;)o.getNext(),u=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===a0?-1:0}withIndex(t){if(t===Pu||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Pu||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Xn),o=r.getIterator(Xn);let u=i.getNext(),d=o.getNext();for(;u&&d;){if(u.name!==d.name||!u.node.equals(d.node))return!1;u=i.getNext(),d=o.getNext()}return null===u&&null===d}return!1}return!1}}resolveIndex_(t){return t===Pu?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const a0=new class pZ extends Jt{constructor(){super(new to(CP),Jt.EMPTY_NODE,Bc.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Jt.EMPTY_NODE}isEmpty(){return!1}};function wr(n,e=null){if(null===n)return Jt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,F.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new h_(n,wr(e));if(n instanceof Array){let t=Jt.EMPTY_NODE;return Ti(n,(r,i)=>{if((0,F.r3)(n,r)&&"."!==r.substring(0,1)){const o=wr(i);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(wr(e))}{const t=[];let r=!1;if(Ti(n,(u,d)=>{if("."!==u.substring(0,1)){const p=wr(d);p.isEmpty()||(r=r||!p.getPriority().isEmpty(),t.push(new dn(u,p)))}}),0===t.length)return Jt.EMPTY_NODE;const o=hS(t,aZ,u=>u.name,CP);if(r){const u=hS(t,Xn.getCompare());return new Jt(o,wr(e),new Bc({".priority":u},{".priority":Xn}))}return new Jt(o,wr(e),Bc.Default)}}Object.defineProperties(dn,{MIN:{value:new dn(Uc,Jt.EMPTY_NODE)},MAX:{value:new dn(Ou,a0)}}),u$.__EMPTY_NODE=Jt.EMPTY_NODE,h_.__childrenNodeConstructor=Jt,function lZ(n){IP=n}(a0),function cZ(n){p$=n}(a0),function uZ(n){f$=n}(wr);class DP extends uS{constructor(e){super(),this.indexPath_=e,(0,F.hu)(!on(e)&&".priority"!==sn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),o=r.compareTo(i);return 0===o?Sp(e.name,t.name):o}makePost(e,t){const r=wr(e),i=Jt.EMPTY_NODE.updateChild(this.indexPath_,r);return new dn(t,i)}maxPost(){const e=Jt.EMPTY_NODE.updateChild(this.indexPath_,a0);return new dn(Ou,e)}toString(){return r0(this.indexPath_,0).join("/")}}const SP=new class mZ extends uS{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Sp(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return dn.MIN}maxPost(){return dn.MAX}makePost(e,t){const r=wr(e);return new dn(t,r)}toString(){return".value"}},p_="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",_Z=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const o=new Array(8);for(i=7;i>=0;i--)o[i]=p_.charAt(t%64),t=Math.floor(t/64);(0,F.hu)(0===t,"Cannot push at time == 0");let u=o.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)u+=p_.charAt(e[i]);return(0,F.hu)(20===u.length,"nextPushId: Length should be 20."),u}}(),_$=function(n){if(n===""+hP)return"-";const e=sS(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let u=0;u<t.length;u++)t[u]=n.charAt(u);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Ou;const o=p_.charAt(p_.indexOf(t[r])+1);return t[r]=o,t.slice(0,r+1).join("")},y$=function(n){if(n===""+xj)return Uc;const e=sS(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+hP:(delete t[t.length-1],t.join("")):(t[t.length-1]=p_.charAt(p_.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function v$(n){return{type:"value",snapshotNode:n}}function g_(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function l0(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function u0(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class MP{constructor(e){this.index_=e}updateChild(e,t,r,i,o,u){(0,F.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=e.getImmediateChild(t);return d.getChild(i).equals(r.getChild(i))&&d.isEmpty()===r.isEmpty()||(null!=u&&(r.isEmpty()?e.hasChild(t)?u.trackChildChange(l0(t,d)):(0,F.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?u.trackChildChange(g_(t,r)):u.trackChildChange(u0(t,r,d))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Xn,(i,o)=>{t.hasChild(i)||r.trackChildChange(l0(i,o))}),t.isLeafNode()||t.forEachChild(Xn,(i,o)=>{if(e.hasChild(i)){const u=e.getImmediateChild(i);u.equals(o)||r.trackChildChange(u0(i,o,u))}else r.trackChildChange(g_(i,o))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Jt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class c0{constructor(e){this.indexedFilter_=new MP(e.getIndex()),this.index_=e.getIndex(),this.startPost_=c0.getStartPost_(e),this.endPost_=c0.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,o,u){return this.matches(new dn(t,r))||(r=Jt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,o,u)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Jt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Jt.EMPTY_NODE);const o=this;return t.forEachChild(Xn,(u,d)=>{o.matches(new dn(u,d))||(i=i.updateImmediateChild(u,Jt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class vZ{constructor(e){this.rangedFilter_=new c0(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,o,u){return this.rangedFilter_.matches(new dn(t,r))||(r=Jt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,o,u):this.fullLimitUpdateChild_(e,t,r,o,u)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Jt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let o;i=Jt.EMPTY_NODE.withIndex(this.index_),o=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;o.hasNext()&&u<this.limit_;){const d=o.getNext();let p;if(p=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),d)<=0:this.index_.compare(d,this.rangedFilter_.getEndPost())<=0,!p)break;i=i.updateImmediateChild(d.name,d.node),u++}}else{let o,u,d,p;if(i=t.withIndex(this.index_),i=i.updatePriority(Jt.EMPTY_NODE),this.reverse_){p=i.getReverseIterator(this.index_),o=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();const D=this.index_.getCompare();d=(x,P)=>D(P,x)}else p=i.getIterator(this.index_),o=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),d=this.index_.getCompare();let _=0,E=!1;for(;p.hasNext();){const D=p.getNext();!E&&d(o,D)<=0&&(E=!0),E&&_<this.limit_&&d(D,u)<=0?_++:i=i.updateImmediateChild(D.name,Jt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,o){let u;if(this.reverse_){const D=this.index_.getCompare();u=(x,P)=>D(P,x)}else u=this.index_.getCompare();const d=e;(0,F.hu)(d.numChildren()===this.limit_,"");const p=new dn(t,r),_=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),E=this.rangedFilter_.matches(p);if(d.hasChild(t)){const D=d.getImmediateChild(t);let x=i.getChildAfterChild(this.index_,_,this.reverse_);for(;null!=x&&(x.name===t||d.hasChild(x.name));)x=i.getChildAfterChild(this.index_,x,this.reverse_);const P=null==x?1:u(x,p);if(E&&!r.isEmpty()&&P>=0)return o?.trackChildChange(u0(t,r,D)),d.updateImmediateChild(t,r);{o?.trackChildChange(l0(t,D));const J=d.updateImmediateChild(t,Jt.EMPTY_NODE);return null!=x&&this.rangedFilter_.matches(x)?(o?.trackChildChange(g_(x.name,x.node)),J.updateImmediateChild(x.name,x.node)):J}}return r.isEmpty()?e:E&&u(_,p)>=0?(null!=o&&(o.trackChildChange(l0(_.name,_.node)),o.trackChildChange(g_(t,r))),d.updateImmediateChild(t,r).updateImmediateChild(_.name,Jt.EMPTY_NODE)):e}}class fS{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Xn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,F.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,F.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Uc}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,F.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,F.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ou}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,F.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Xn}copy(){const e=new fS;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function xP(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function RP(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function pS(n,e){const t=n.copy();return t.index_=e,t}function b$(n){const e={};if(n.isDefault())return e;let t;return n.index_===Xn?t="$priority":n.index_===SP?t="$value":n.index_===Pu?t="$key":((0,F.hu)(n.index_ instanceof DP,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,F.Pz)(t),n.startSet_&&(e.startAt=(0,F.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,F.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,F.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,F.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function w$(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Xn&&(e.i=n.index_.toString()),e}class gS extends t${constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Xw("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,F.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const u=gS.getListenId_(e,r),d={};this.listens_[u]=d;const p=b$(e._queryParams);this.restRequest_(o+".json",p,(_,E)=>{let D=E;if(404===_&&(D=null,_=null),null===_&&this.onDataUpdate_(o,D,!1,r),(0,F.DV)(this.listens_,u)===d){let x;x=_?401===_?"permission_denied":"rest_error:"+_:"ok",i(x,null)}})}unlisten(e,t){const r=gS.getListenId_(e,t);delete this.listens_[r]}get(e){const t=b$(e._queryParams),r=e._path.toString(),i=new F.BH;return this.restRequest_(r+".json",t,(o,u)=>{let d=u;404===o&&(d=null,o=null),null===o?(this.onDataUpdate_(r,d,!1,null),i.resolve(d)):i.reject(new Error(d))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,F.xO)(t);this.log_("Sending REST request for "+u);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(r&&4===d.readyState){this.log_("REST Response for "+u+" received. status:",d.status,"response:",d.responseText);let p=null;if(d.status>=200&&d.status<300){try{p=(0,F.cI)(d.responseText)}catch{os("Failed to parse JSON response for "+u+": "+d.responseText)}r(null,p)}else 401!==d.status&&404!==d.status&&os("Got unsuccessful REST response for "+u+" Status: "+d.status),r(d.status);r=null}},d.open("GET",u,!0),d.send()})}}class TZ{constructor(){this.rootNode_=Jt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function mS(){return{value:null,children:new Map}}function m_(n,e,t){if(on(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=sn(e);n.children.has(r)||n.children.set(r,mS()),m_(n.children.get(r),e=Kn(e),t)}}function kP(n,e){if(on(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Xn,(r,i)=>{m_(n,new kn(r),i)}),kP(n,e)}}if(n.children.size>0){const t=sn(e);return e=Kn(e),n.children.has(t)&&kP(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function NP(n,e,t){null!==n.value?t(e,n.value):function DZ(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{NP(i,new kn(e.toString()+"/"+r),t)})}class SZ{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Ti(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class xZ{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new SZ(e);const r=1e4+2e4*Math.random();t0(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Ti(e,(i,o)=>{o>0&&(0,F.r3)(this.statsToReport_,i)&&(t[i]=o,r=!0)}),r&&this.server_.reportStats(t),t0(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Fa=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Fa||(Fa={})),Fa))();function FP(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class _S{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Fa.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(on(this.path)){if(null!=this.affectedTree.value)return(0,F.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new kn(e));return new _S(Sn(),t,this.revert)}}return(0,F.hu)(sn(this.path)===e,"operationForChild called for unrelated child."),new _S(Kn(this.path),this.affectedTree,this.revert)}}class d0{constructor(e,t){this.source=e,this.path=t,this.type=Fa.LISTEN_COMPLETE}operationForChild(e){return on(this.path)?new d0(this.source,Sn()):new d0(this.source,Kn(this.path))}}class xp{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Fa.OVERWRITE}operationForChild(e){return on(this.path)?new xp(this.source,Sn(),this.snap.getImmediateChild(e)):new xp(this.source,Kn(this.path),this.snap)}}class __{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Fa.MERGE}operationForChild(e){if(on(this.path)){const t=this.children.subtree(new kn(e));return t.isEmpty()?null:t.value?new xp(this.source,Sn(),t.value):new __(this.source,Sn(),t)}return(0,F.hu)(sn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new __(this.source,Kn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class bh{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(on(e))return this.isFullyInitialized()&&!this.filtered_;const t=sn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class RZ{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function h0(n,e,t,r,i,o){const u=r.filter(d=>d.type===t);u.sort((d,p)=>function OZ(n,e,t){if(null==e.childName||null==t.childName)throw(0,F.g5)("Should only compare child_ events.");const r=new dn(e.childName,e.snapshotNode),i=new dn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,d,p)),u.forEach(d=>{const p=function NZ(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,d,o);i.forEach(_=>{_.respondsTo(d.type)&&e.push(_.createEvent(p,n.query_))})})}function yS(n,e){return{eventCache:n,serverCache:e}}function f0(n,e,t,r){return yS(new bh(e,t,r),n.serverCache)}function C$(n,e,t,r){return yS(n.eventCache,new bh(e,t,r))}function vS(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Rp(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let LP;class er{constructor(e,t=(()=>(LP||(LP=new to(v5)),LP))()){this.value=e,this.children=t}static fromObject(e){let t=new er(null);return Ti(e,(r,i)=>{t=t.set(new kn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Sn(),value:this.value};if(on(e))return null;{const r=sn(e),i=this.children.get(r);if(null!==i){const o=i.findRootMostMatchingPathAndValue(Kn(e),t);return null!=o?{path:pr(new kn(r),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(on(e))return this;{const t=sn(e),r=this.children.get(t);return null!==r?r.subtree(Kn(e)):new er(null)}}set(e,t){if(on(e))return new er(t,this.children);{const r=sn(e),o=(this.children.get(r)||new er(null)).set(Kn(e),t),u=this.children.insert(r,o);return new er(this.value,u)}}remove(e){if(on(e))return this.children.isEmpty()?new er(null):new er(null,this.children);{const t=sn(e),r=this.children.get(t);if(r){const i=r.remove(Kn(e));let o;return o=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&o.isEmpty()?new er(null):new er(this.value,o)}return this}}get(e){if(on(e))return this.value;{const t=sn(e),r=this.children.get(t);return r?r.get(Kn(e)):null}}setTree(e,t){if(on(e))return t;{const r=sn(e),o=(this.children.get(r)||new er(null)).setTree(Kn(e),t);let u;return u=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new er(this.value,u)}}fold(e){return this.fold_(Sn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(pr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Sn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(on(e))return null;{const o=sn(e),u=this.children.get(o);return u?u.findOnPath_(Kn(e),pr(t,o),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Sn(),t)}foreachOnPath_(e,t,r){if(on(e))return this;{this.value&&r(t,this.value);const i=sn(e),o=this.children.get(i);return o?o.foreachOnPath_(Kn(e),pr(t,i),r):new er(null)}}foreach(e){this.foreach_(Sn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(pr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Pl{constructor(e){this.writeTree_=e}static empty(){return new Pl(new er(null))}}function p0(n,e,t){if(on(e))return new Pl(new er(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let o=r.value;const u=ks(i,e);return o=o.updateChild(u,t),new Pl(n.writeTree_.set(i,o))}{const i=new er(t),o=n.writeTree_.setTree(e,i);return new Pl(o)}}}function VP(n,e,t){let r=n;return Ti(t,(i,o)=>{r=p0(r,pr(e,i),o)}),r}function I$(n,e){if(on(e))return Pl.empty();{const t=n.writeTree_.setTree(e,new er(null));return new Pl(t)}}function UP(n,e){return null!=kp(n,e)}function kp(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(ks(t.path,e)):null}function T$(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Xn,(r,i)=>{e.push(new dn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new dn(r,i.value))}),e}function wh(n,e){if(on(e))return n;{const t=kp(n,e);return new Pl(null!=t?new er(t):n.writeTree_.subtree(e))}}function BP(n){return n.writeTree_.isEmpty()}function y_(n,e){return D$(Sn(),n.writeTree_,e)}function D$(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{".priority"===i?((0,F.hu)(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):t=D$(pr(n,i),o,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(pr(n,".priority"),r)),t}}function bS(n,e){return R$(e,n)}function BZ(n,e){if(n.snap)return Pa(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Pa(pr(n.path,t),e))return!0;return!1}function jZ(n){return n.visible}function S$(n,e,t){let r=Pl.empty();for(let i=0;i<n.length;++i){const o=n[i];if(e(o)){const u=o.path;let d;if(o.snap)Pa(t,u)?(d=ks(t,u),r=p0(r,d,o.snap)):Pa(u,t)&&(d=ks(u,t),r=p0(r,Sn(),o.snap.getChild(d)));else{if(!o.children)throw(0,F.g5)("WriteRecord should have .snap or .children");if(Pa(t,u))d=ks(t,u),r=VP(r,d,o.children);else if(Pa(u,t))if(d=ks(u,t),on(d))r=VP(r,Sn(),o.children);else{const p=(0,F.DV)(o.children,sn(d));if(p){const _=p.getChild(Kn(d));r=p0(r,Sn(),_)}}}}}return r}function A$(n,e,t,r,i){if(r||i){const o=wh(n.visibleWrites,e);return!i&&BP(o)?t:i||null!=t||UP(o,Sn())?y_(S$(n.allWrites,function(_){return(_.visible||i)&&(!r||!~r.indexOf(_.writeId))&&(Pa(_.path,e)||Pa(e,_.path))},e),t||Jt.EMPTY_NODE):null}{const o=kp(n.visibleWrites,e);if(null!=o)return o;{const u=wh(n.visibleWrites,e);return BP(u)?t:null!=t||UP(u,Sn())?y_(u,t||Jt.EMPTY_NODE):null}}}function wS(n,e,t,r){return A$(n.writeTree,n.treePath,e,t,r)}function HP(n,e){return function $Z(n,e,t){let r=Jt.EMPTY_NODE;const i=kp(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Xn,(o,u)=>{r=r.updateImmediateChild(o,u)}),r;if(t){const o=wh(n.visibleWrites,e);return t.forEachChild(Xn,(u,d)=>{const p=y_(wh(o,new kn(u)),d);r=r.updateImmediateChild(u,p)}),T$(o).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}return T$(wh(n.visibleWrites,e)).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}(n.writeTree,n.treePath,e)}function M$(n,e,t,r){return function GZ(n,e,t,r,i){(0,F.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=pr(e,t);if(UP(n.visibleWrites,o))return null;{const u=wh(n.visibleWrites,o);return BP(u)?i.getChild(t):y_(u,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function ES(n,e){return function qZ(n,e){return kp(n.visibleWrites,e)}(n.writeTree,pr(n.treePath,e))}function jP(n,e,t){return function zZ(n,e,t,r){const i=pr(e,t),o=kp(n.visibleWrites,i);return null!=o?o:r.isCompleteForChild(t)?y_(wh(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function x$(n,e){return R$(pr(n.treePath,e),n.writeTree)}function R$(n,e){return{treePath:n,writeTree:e}}class YZ{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,F.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,F.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const o=i.type;if("child_added"===t&&"child_removed"===o)this.changeMap.set(r,u0(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===o)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===o)this.changeMap.set(r,l0(r,i.oldSnap));else if("child_changed"===t&&"child_added"===o)this.changeMap.set(r,g_(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==o)throw(0,F.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,u0(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const k$=new class QZ{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class $P{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new bh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return jP(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Rp(this.viewCache_),o=function ZZ(n,e,t,r,i,o){return function WZ(n,e,t,r,i,o,u){let d;const p=wh(n.visibleWrites,e),_=kp(p,Sn());if(null!=_)d=_;else{if(null==t)return[];d=y_(p,t)}if(d=d.withIndex(u),d.isEmpty()||d.isLeafNode())return[];{const E=[],D=u.getCompare(),x=o?d.getReverseIteratorFrom(r,u):d.getIteratorFrom(r,u);let P=x.getNext();for(;P&&E.length<i;)0!==D(P,r)&&E.push(P),P=x.getNext();return E}}(n.writeTree,n.treePath,e,t,r,i,o)}(this.writes_,i,t,1,r,e);return 0===o.length?null:o[0]}}function N$(n,e,t,r,i,o){const u=e.eventCache;if(null!=ES(r,t))return e;{let d,p;if(on(t))if((0,F.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const _=Rp(e),D=HP(r,_ instanceof Jt?_:Jt.EMPTY_NODE);d=n.filter.updateFullNode(e.eventCache.getNode(),D,o)}else{const _=wS(r,Rp(e));d=n.filter.updateFullNode(e.eventCache.getNode(),_,o)}else{const _=sn(t);if(".priority"===_){(0,F.hu)(1===vh(t),"Can't have a priority with additional path components");const E=u.getNode();p=e.serverCache.getNode();const D=M$(r,t,E,p);d=null!=D?n.filter.updatePriority(E,D):u.getNode()}else{const E=Kn(t);let D;if(u.isCompleteForChild(_)){p=e.serverCache.getNode();const x=M$(r,t,u.getNode(),p);D=null!=x?u.getNode().getImmediateChild(_).updateChild(E,x):u.getNode().getImmediateChild(_)}else D=jP(r,_,e.serverCache);d=null!=D?n.filter.updateChild(u.getNode(),_,D,E,i,o):u.getNode()}}return f0(e,d,u.isFullyInitialized()||on(t),n.filter.filtersNodes())}}function CS(n,e,t,r,i,o,u,d){const p=e.serverCache;let _;const E=u?n.filter:n.filter.getIndexedFilter();if(on(t))_=E.updateFullNode(p.getNode(),r,null);else if(E.filtersNodes()&&!p.isFiltered()){const P=p.getNode().updateChild(t,r);_=E.updateFullNode(p.getNode(),P,null)}else{const P=sn(t);if(!p.isCompleteForPath(t)&&vh(t)>1)return e;const L=Kn(t),ue=p.getNode().getImmediateChild(P).updateChild(L,r);_=".priority"===P?E.updatePriority(p.getNode(),ue):E.updateChild(p.getNode(),P,ue,L,k$,null)}const D=C$(e,_,p.isFullyInitialized()||on(t),E.filtersNodes());return N$(n,D,t,i,new $P(i,D,o),d)}function GP(n,e,t,r,i,o,u){const d=e.eventCache;let p,_;const E=new $P(i,e,o);if(on(t))_=n.filter.updateFullNode(e.eventCache.getNode(),r,u),p=f0(e,_,!0,n.filter.filtersNodes());else{const D=sn(t);if(".priority"===D)_=n.filter.updatePriority(e.eventCache.getNode(),r),p=f0(e,_,d.isFullyInitialized(),d.isFiltered());else{const x=Kn(t),P=d.getNode().getImmediateChild(D);let L;if(on(x))L=r;else{const J=E.getCompleteChild(D);L=null!=J?".priority"===bP(x)&&J.getChild(s$(x)).isEmpty()?J:J.updateChild(x,r):Jt.EMPTY_NODE}p=P.equals(L)?e:f0(e,n.filter.updateChild(d.getNode(),D,L,x,E,u),d.isFullyInitialized(),n.filter.filtersNodes())}}return p}function O$(n,e){return n.eventCache.isCompleteForChild(e)}function P$(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function zP(n,e,t,r,i,o,u,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let _,p=e;_=on(t)?r:new er(null).setTree(t,r);const E=e.serverCache.getNode();return _.children.inorderTraversal((D,x)=>{if(E.hasChild(D)){const L=P$(0,e.serverCache.getNode().getImmediateChild(D),x);p=CS(n,p,new kn(D),L,i,o,u,d)}}),_.children.inorderTraversal((D,x)=>{const P=!e.serverCache.isCompleteForChild(D)&&null===x.value;if(!E.hasChild(D)&&!P){const J=P$(0,e.serverCache.getNode().getImmediateChild(D),x);p=CS(n,p,new kn(D),J,i,o,u,d)}}),p}class o7{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new MP(r.getIndex()),o=function bZ(n){return n.loadsAllData()?new MP(n.getIndex()):n.hasLimit()?new vZ(n):new c0(n)}(r);this.processor_=function JZ(n){return{filter:n}}(o);const u=t.serverCache,d=t.eventCache,p=i.updateFullNode(Jt.EMPTY_NODE,u.getNode(),null),_=o.updateFullNode(Jt.EMPTY_NODE,d.getNode(),null),E=new bh(p,u.isFullyInitialized(),i.filtersNodes()),D=new bh(_,d.isFullyInitialized(),o.filtersNodes());this.viewCache_=yS(D,E),this.eventGenerator_=new RZ(this.query_)}get query(){return this.query_}}function u7(n,e){const t=Rp(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!on(e)&&!t.getImmediateChild(sn(e)).isEmpty())?t.getChild(e):null}function F$(n){return 0===n.eventRegistrations_.length}function L$(n,e,t){const r=[];if(t){(0,F.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(o=>{const u=o.createCancelEvent(t,i);u&&r.push(u)})}if(e){let i=[];for(let o=0;o<n.eventRegistrations_.length;++o){const u=n.eventRegistrations_[o];if(u.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(o+1));break}}else i.push(u)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function V$(n,e,t,r){e.type===Fa.MERGE&&null!==e.source.queryId&&((0,F.hu)(Rp(n.viewCache_),"We should always have a full cache before handling merges"),(0,F.hu)(vS(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,o=function e7(n,e,t,r,i){const o=new YZ;let u,d;if(t.type===Fa.OVERWRITE){const _=t;_.source.fromUser?u=GP(n,e,_.path,_.snap,r,i,o):((0,F.hu)(_.source.fromServer,"Unknown source."),d=_.source.tagged||e.serverCache.isFiltered()&&!on(_.path),u=CS(n,e,_.path,_.snap,r,i,d,o))}else if(t.type===Fa.MERGE){const _=t;_.source.fromUser?u=function n7(n,e,t,r,i,o,u){let d=e;return r.foreach((p,_)=>{const E=pr(t,p);O$(e,sn(E))&&(d=GP(n,d,E,_,i,o,u))}),r.foreach((p,_)=>{const E=pr(t,p);O$(e,sn(E))||(d=GP(n,d,E,_,i,o,u))}),d}(n,e,_.path,_.children,r,i,o):((0,F.hu)(_.source.fromServer,"Unknown source."),d=_.source.tagged||e.serverCache.isFiltered(),u=zP(n,e,_.path,_.children,r,i,d,o))}else if(t.type===Fa.ACK_USER_WRITE){const _=t;u=_.revert?function s7(n,e,t,r,i,o){let u;if(null!=ES(r,t))return e;{const d=new $P(r,e,i),p=e.eventCache.getNode();let _;if(on(t)||".priority"===sn(t)){let E;if(e.serverCache.isFullyInitialized())E=wS(r,Rp(e));else{const D=e.serverCache.getNode();(0,F.hu)(D instanceof Jt,"serverChildren would be complete if leaf node"),E=HP(r,D)}_=n.filter.updateFullNode(p,E,o)}else{const E=sn(t);let D=jP(r,E,e.serverCache);null==D&&e.serverCache.isCompleteForChild(E)&&(D=p.getImmediateChild(E)),_=null!=D?n.filter.updateChild(p,E,D,Kn(t),d,o):e.eventCache.getNode().hasChild(E)?n.filter.updateChild(p,E,Jt.EMPTY_NODE,Kn(t),d,o):p,_.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=wS(r,Rp(e)),u.isLeafNode()&&(_=n.filter.updateFullNode(_,u,o)))}return u=e.serverCache.isFullyInitialized()||null!=ES(r,Sn()),f0(e,_,u,n.filter.filtersNodes())}}(n,e,_.path,r,i,o):function r7(n,e,t,r,i,o,u){if(null!=ES(i,t))return e;const d=e.serverCache.isFiltered(),p=e.serverCache;if(null!=r.value){if(on(t)&&p.isFullyInitialized()||p.isCompleteForPath(t))return CS(n,e,t,p.getNode().getChild(t),i,o,d,u);if(on(t)){let _=new er(null);return p.getNode().forEachChild(Pu,(E,D)=>{_=_.set(new kn(E),D)}),zP(n,e,t,_,i,o,d,u)}return e}{let _=new er(null);return r.foreach((E,D)=>{const x=pr(t,E);p.isCompleteForPath(x)&&(_=_.set(E,p.getNode().getChild(x)))}),zP(n,e,t,_,i,o,d,u)}}(n,e,_.path,_.affectedTree,r,i,o)}else{if(t.type!==Fa.LISTEN_COMPLETE)throw(0,F.g5)("Unknown operation type: "+t.type);u=function i7(n,e,t,r,i){const o=e.serverCache;return N$(n,C$(e,o.getNode(),o.isFullyInitialized()||on(t),o.isFiltered()),t,r,k$,i)}(n,e,t.path,r,o)}const p=o.getChanges();return function t7(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=vS(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(v$(vS(e)))}}(e,u,p),{viewCache:u,changes:p}}(n.processor_,i,e,t,r);return function XZ(n,e){(0,F.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,F.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,o.viewCache),(0,F.hu)(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,U$(n,o.changes,o.viewCache.eventCache.getNode(),null)}function U$(n,e,t,r){return function kZ(n,e,t,r){const i=[],o=[];return e.forEach(u=>{"child_changed"===u.type&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&o.push(function yZ(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(u.childName,u.snapshotNode))}),h0(n,i,"child_removed",e,r,t),h0(n,i,"child_added",e,r,t),h0(n,i,"child_moved",o,r,t),h0(n,i,"child_changed",e,r,t),h0(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let IS,DS;class B${constructor(){this.views=new Map}}function qP(n,e,t,r){const i=e.source.queryId;if(null!==i){const o=n.views.get(i);return(0,F.hu)(null!=o,"SyncTree gave us an op for an invalid query."),V$(o,e,t,r)}{let o=[];for(const u of n.views.values())o=o.concat(V$(u,e,t,r));return o}}function H$(n,e,t,r,i){const u=n.views.get(e._queryIdentifier);if(!u){let d=wS(t,i?r:null),p=!1;d?p=!0:r instanceof Jt?(d=HP(t,r),p=!1):(d=Jt.EMPTY_NODE,p=!1);const _=yS(new bh(d,p,!1),new bh(r,i,!1));return new o7(e,_)}return u}function j$(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Eh(n,e){let t=null;for(const r of n.views.values())t=t||u7(r,e);return t}function $$(n,e){return e._queryParams.loadsAllData()?TS(n):n.views.get(e._queryIdentifier)}function G$(n,e){return null!=$$(n,e)}function Ch(n){return null!=TS(n)}function TS(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let v7=1;class z${constructor(e){this.listenProvider_=e,this.syncPointTree_=new er(null),this.pendingWriteTree_=function KZ(){return{visibleWrites:Pl.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function WP(n,e,t,r,i){return function FZ(n,e,t,r,i){(0,F.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=p0(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?v_(n,new xp({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Ih(n,e,t=!1){const r=function VZ(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function UZ(n,e){const t=n.allWrites.findIndex(d=>d.writeId===e);(0,F.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,o=!1,u=n.allWrites.length-1;for(;i&&u>=0;){const d=n.allWrites[u];d.visible&&(u>=t&&BZ(d,r.path)?i=!1:Pa(r.path,d.path)&&(o=!0)),u--}return!!i&&(o?(function HZ(n){n.visibleWrites=S$(n.allWrites,jZ,Sn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=I$(n.visibleWrites,r.path):Ti(r.children,p=>{n.visibleWrites=I$(n.visibleWrites,pr(r.path,p))}),!0))}(n.pendingWriteTree_,e)){let o=new er(null);return null!=r.snap?o=o.set(Sn(),!0):Ti(r.children,u=>{o=o.set(new kn(u),!0)}),v_(n,new _S(r.path,o,t))}return[]}function g0(n,e,t){return v_(n,new xp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function SS(n,e,t,r,i=!1){const o=e._path,u=n.syncPointTree_.get(o);let d=[];if(u&&("default"===e._queryIdentifier||G$(u,e))){const p=function m7(n,e,t,r){const i=e._queryIdentifier,o=[];let u=[];const d=Ch(n);if("default"===i)for(const[p,_]of n.views.entries())u=u.concat(L$(_,t,r)),F$(_)&&(n.views.delete(p),_.query._queryParams.loadsAllData()||o.push(_.query));else{const p=n.views.get(i);p&&(u=u.concat(L$(p,t,r)),F$(p)&&(n.views.delete(i),p.query._queryParams.loadsAllData()||o.push(p.query)))}return d&&!Ch(n)&&o.push(new(function f7(){return(0,F.hu)(IS,"Reference.ts has not been loaded"),IS}())(e._repo,e._path)),{removed:o,events:u}}(u,e,t,r);(function p7(n){return 0===n.views.size})(u)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const _=p.removed;if(d=p.events,!i){const E=-1!==_.findIndex(x=>x._queryParams.loadsAllData()),D=n.syncPointTree_.findOnPath(o,(x,P)=>Ch(P));if(E&&!D){const x=n.syncPointTree_.subtree(o);if(!x.isEmpty()){const P=function D7(n){return n.fold((e,t,r)=>{if(t&&Ch(t))return[TS(t)];{let i=[];return t&&(i=j$(t)),Ti(r,(o,u)=>{i=i.concat(u)}),i}})}(x);for(let L=0;L<P.length;++L){const J=P[L],ue=J.query,Ne=Z$(n,J);n.listenProvider_.startListening(_0(ue),m0(n,ue),Ne.hashFn,Ne.onComplete)}}}!D&&_.length>0&&!r&&(E?n.listenProvider_.stopListening(_0(e),null):_.forEach(x=>{const P=n.queryToTagMap.get(MS(x));n.listenProvider_.stopListening(_0(x),P)}))}!function S7(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=MS(r),o=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(o)}}}(n,_)}return d}function q$(n,e,t,r){const i=ZP(n,r);if(null!=i){const o=YP(i),u=o.path,d=o.queryId,p=ks(u,e);return QP(n,u,new xp(FP(d),p,t))}return[]}function KP(n,e,t,r=!1){const i=e._path;let o=null,u=!1;n.syncPointTree_.foreachOnPath(i,(x,P)=>{const L=ks(x,i);o=o||Eh(P,L),u=u||Ch(P)});let p,d=n.syncPointTree_.get(i);d?(u=u||Ch(d),o=o||Eh(d,Sn())):(d=new B$,n.syncPointTree_=n.syncPointTree_.set(i,d)),null!=o?p=!0:(p=!1,o=Jt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((P,L)=>{const J=Eh(L,Sn());J&&(o=o.updateImmediateChild(P,J))}));const _=G$(d,e);if(!_&&!e._queryParams.loadsAllData()){const x=MS(e);(0,F.hu)(!n.queryToTagMap.has(x),"View does not exist, but we have a tag");const P=function A7(){return v7++}();n.queryToTagMap.set(x,P),n.tagToQueryMap.set(P,x)}let D=function g7(n,e,t,r,i,o){const u=H$(n,e,r,i,o);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,u),function c7(n,e){n.eventRegistrations_.push(e)}(u,t),function d7(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Xn,(o,u)=>{r.push(g_(o,u))}),t.isFullyInitialized()&&r.push(v$(t.getNode())),U$(n,r,t.getNode(),e)}(u,t)}(d,e,t,bS(n.pendingWriteTree_,i),o,p);if(!_&&!u&&!r){const x=$$(d,e);D=D.concat(function M7(n,e,t){const r=e._path,i=m0(n,e),o=Z$(n,t),u=n.listenProvider_.startListening(_0(e),i,o.hashFn,o.onComplete),d=n.syncPointTree_.subtree(r);if(i)(0,F.hu)(!Ch(d.value),"If we're adding a query, it shouldn't be shadowed");else{const p=d.fold((_,E,D)=>{if(!on(_)&&E&&Ch(E))return[TS(E).query];{let x=[];return E&&(x=x.concat(j$(E).map(P=>P.query))),Ti(D,(P,L)=>{x=x.concat(L)}),x}});for(let _=0;_<p.length;++_){const E=p[_];n.listenProvider_.stopListening(_0(E),m0(n,E))}}return u}(n,e,x))}return D}function AS(n,e,t){const i=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(u,d)=>{const _=Eh(d,ks(u,e));if(_)return _});return A$(i,e,o,t,!0)}function v_(n,e){return W$(e,n.syncPointTree_,null,bS(n.pendingWriteTree_,Sn()))}function W$(n,e,t,r){if(on(n.path))return K$(n,e,t,r);{const i=e.get(Sn());null==t&&null!=i&&(t=Eh(i,Sn()));let o=[];const u=sn(n.path),d=n.operationForChild(u),p=e.children.get(u);if(p&&d){const _=t?t.getImmediateChild(u):null,E=x$(r,u);o=o.concat(W$(d,p,_,E))}return i&&(o=o.concat(qP(i,n,r,t))),o}}function K$(n,e,t,r){const i=e.get(Sn());null==t&&null!=i&&(t=Eh(i,Sn()));let o=[];return e.children.inorderTraversal((u,d)=>{const p=t?t.getImmediateChild(u):null,_=x$(r,u),E=n.operationForChild(u);E&&(o=o.concat(K$(E,d,p,_)))}),i&&(o=o.concat(qP(i,n,r,t))),o}function Z$(n,e){const t=e.query,r=m0(n,t);return{hashFn:()=>(function a7(n){return n.viewCache_.serverCache.getNode()}(e)||Jt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function C7(n,e,t){const r=ZP(n,t);if(r){const i=YP(r),o=i.path,u=i.queryId,d=ks(o,e);return QP(n,o,new d0(FP(u),d))}return[]}(n,t._path,r):function E7(n,e){return v_(n,new d0({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const o=function E5(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return SS(n,t,null,o)}}}}function m0(n,e){const t=MS(e);return n.queryToTagMap.get(t)}function MS(n){return n._path.toString()+"$"+n._queryIdentifier}function ZP(n,e){return n.tagToQueryMap.get(e)}function YP(n){const e=n.indexOf("$");return(0,F.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new kn(n.substr(0,e))}}function QP(n,e,t){const r=n.syncPointTree_.get(e);return(0,F.hu)(r,"Missing sync point for query tag that we're tracking"),qP(r,t,bS(n.pendingWriteTree_,e),null)}function _0(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function y7(){return(0,F.hu)(DS,"Reference.ts has not been loaded"),DS}())(n._repo,n._path):n}class JP{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new JP(t)}node(){return this.node_}}class XP{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=pr(this.path_,e);return new XP(this.syncTree_,t)}node(){return AS(this.syncTree_,this.path_)}}const Y$=function(n,e,t){return n&&"object"==typeof n?((0,F.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?R7(n[".sv"],e,t):"object"==typeof n[".sv"]?k7(n[".sv"],e):void(0,F.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},R7=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,F.hu)(!1,"Unexpected server value: "+n)},k7=function(n,e,t){n.hasOwnProperty("increment")||(0,F.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,F.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,F.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const u=i.getValue();return"number"!=typeof u?r:u+r},Q$=function(n,e,t,r){return t1(e,new XP(t,n),r)},e1=function(n,e,t){return t1(n,new JP(e),t)};function t1(n,e,t){const r=n.getPriority().val(),i=Y$(r,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const u=n,d=Y$(u.getValue(),e,t);return d!==u.getValue()||i!==u.getPriority().val()?new h_(d,wr(i)):n}{const u=n;return o=u,i!==u.getPriority().val()&&(o=o.updatePriority(new h_(i))),u.forEachChild(Xn,(d,p)=>{const _=t1(p,e.getImmediateChild(d),t);_!==p&&(o=o.updateImmediateChild(d,_))}),o}}class n1{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function xS(n,e){let t=e instanceof kn?e:new kn(e),r=n,i=sn(t);for(;null!==i;){const o=(0,F.DV)(r.node.children,i)||{children:{},childCount:0};r=new n1(i,r,o),t=Kn(t),i=sn(t)}return r}function Np(n){return n.node.value}function r1(n,e){n.node.value=e,s1(n)}function J$(n){return n.node.childCount>0}function RS(n,e){Ti(n.node.children,(t,r)=>{e(new n1(t,n,r))})}function X$(n,e,t,r){t&&!r&&e(n),RS(n,i=>{X$(i,e,!0,r)}),t&&r&&e(n)}function y0(n){return new kn(null===n.parent?n.name:y0(n.parent)+"/"+n.name)}function s1(n){null!==n.parent&&function P7(n,e,t){const r=function N7(n){return void 0===Np(n)&&!J$(n)}(t),i=(0,F.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,s1(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,s1(n))}(n.parent,n.name,n)}const F7=/[\[\].#$\/\u0000-\u001F\u007F]/,L7=/[\[\].#$\u0000-\u001F\u007F]/,o1=10485760,kS=function(n){return"string"==typeof n&&0!==n.length&&!F7.test(n)},eG=function(n){return"string"==typeof n&&0!==n.length&&!L7.test(n)},v0=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!iS(n)||n&&"object"==typeof n&&(0,F.r3)(n,".sv")},Fu=function(n,e,t,r){r&&void 0===e||b0((0,F.gK)(n,"value"),e,t)},b0=function(n,e,t){const r=t instanceof kn?new X5(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Ap(r));if("function"==typeof e)throw new Error(n+"contains a function "+Ap(r)+" with contents = "+e.toString());if(iS(e))throw new Error(n+"contains "+e.toString()+" "+Ap(r));if("string"==typeof e&&e.length>o1/3&&(0,F.ug)(e)>o1)throw new Error(n+"contains a string greater than "+o1+" utf8 bytes "+Ap(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,o=!1;if(Ti(e,(u,d)=>{if(".value"===u)i=!0;else if(".priority"!==u&&".sv"!==u&&(o=!0,!kS(u)))throw new Error(n+" contains an invalid key ("+u+") "+Ap(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function eZ(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,F.ug)(e),o$(n)})(r,u),b0(n,d,r),function tZ(n){const e=n.parts_.pop();n.byteLength_-=(0,F.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&o)throw new Error(n+' contains ".value" child '+Ap(r)+" in addition to actual children.")}},tG=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,F.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const o=[];Ti(e,(u,d)=>{const p=new kn(u);if(b0(i,d,pr(t,p)),".priority"===bP(p)&&!v0(d))throw new Error(i+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(p)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const o=r0(r);for(let u=0;u<o.length;u++)if((".priority"!==o[u]||u!==o.length-1)&&!kS(o[u]))throw new Error(n+"contains an invalid key ("+o[u]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(J5);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Pa(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,o)},a1=function(n,e,t){if(!t||void 0!==e){if(iS(e))throw new Error((0,F.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!v0(e))throw new Error((0,F.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},w0=function(n,e,t,r){if(!(r&&void 0===t||kS(t)))throw new Error((0,F.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},E0=function(n,e,t,r){if(!(r&&void 0===t||eG(t)))throw new Error((0,F.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},La=function(n,e){if(".info"===sn(e))throw new Error(n+" failed = Can't modify data under /.info/")},nG=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!kS(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),eG(n)}(t))throw new Error((0,F.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class H7{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function NS(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],o=i.getPath();null!==t&&!wP(o,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:o}),t.events.push(i)}t&&n.eventLists_.push(t)}function rG(n,e,t){NS(n,t),iG(n,r=>wP(r,e))}function Vo(n,e,t){NS(n,t),iG(n,r=>Pa(r,e)||Pa(e,r))}function iG(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(j7(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function j7(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Dp&&Ii("event: "+t.toString()),c_(r)}}}const sG="repo_interrupt";class G7{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new H7,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=mS(),this.transactionQueueTree_=new n1,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function oG(n){const t=n.infoData_.getNode(new kn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function C0(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:oG(n)})}function aG(n,e,t,r,i){n.dataUpdateCount++;const o=new kn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(i)if(r){const p=(0,F.UI)(t,_=>wr(_));u=function I7(n,e,t,r){const i=ZP(n,r);if(i){const o=YP(i),u=o.path,d=o.queryId,p=ks(u,e),_=er.fromObject(t);return QP(n,u,new __(FP(d),p,_))}return[]}(n.serverSyncTree_,o,p,i)}else{const p=wr(t);u=q$(n.serverSyncTree_,o,p,i)}else if(r){const p=(0,F.UI)(t,_=>wr(_));u=function w7(n,e,t){const r=er.fromObject(t);return v_(n,new __({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,o,p)}else{const p=wr(t);u=g0(n.serverSyncTree_,o,p)}let d=o;u.length>0&&(d=w_(n,o)),Vo(n.eventQueue_,d,u)}function lG(n,e){l1(n,"connected",e),!1===e&&function Z7(n){b_(n,"onDisconnectEvents");const e=C0(n),t=mS();NP(n.onDisconnect_,Sn(),(i,o)=>{const u=Q$(i,o,n.serverSyncTree_,e);m_(t,i,u)});let r=[];NP(t,Sn(),(i,o)=>{r=r.concat(g0(n.serverSyncTree_,i,o));const u=h1(n,i);w_(n,u)}),n.onDisconnect_=mS(),Vo(n.eventQueue_,Sn(),r)}(n)}function l1(n,e,t){const r=new kn("/.info/"+e),i=wr(t);n.infoData_.updateSnapshot(r,i);const o=g0(n.infoSyncTree_,r,i);Vo(n.eventQueue_,r,o)}function OS(n){return n.nextWriteId_++}function u1(n,e,t,r,i){b_(n,"set",{path:e.toString(),value:t,priority:r});const o=C0(n),u=wr(t,r),d=AS(n.serverSyncTree_,e),p=e1(u,d,o),_=OS(n),E=WP(n.serverSyncTree_,e,p,_,!0);NS(n.eventQueue_,E),n.server_.put(e.toString(),u.val(!0),(x,P)=>{const L="ok"===x;L||os("set at "+e+" failed: "+x);const J=Ih(n.serverSyncTree_,_,!L);Vo(n.eventQueue_,e,J),Th(0,i,x,P)});const D=h1(n,e);w_(n,D),Vo(n.eventQueue_,D,[])}function Y7(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&kP(n.onDisconnect_,e),Th(0,t,r,i)})}function uG(n,e,t,r){const i=wr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(o,u)=>{"ok"===o&&m_(n.onDisconnect_,e,i),Th(0,r,o,u)})}function c1(n,e,t){let r;r=".info"===sn(e._path)?SS(n.infoSyncTree_,e,t):SS(n.serverSyncTree_,e,t),rG(n.eventQueue_,e._path,r)}function cG(n){n.persistentConnection_&&n.persistentConnection_.interrupt(sG)}function b_(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Ii(t,...e)}function Th(n,e,t,r){e&&c_(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let o=i;r&&(o+=": "+r);const u=new Error(o);u.code=i,e(u)}})}function d1(n,e,t){return AS(n.serverSyncTree_,e,t)||Jt.EMPTY_NODE}function PS(n,e=n.transactionQueueTree_){if(e||FS(n,e),Np(e)){const t=hG(n,e);(0,F.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function nY(n,e,t){const r=t.map(_=>_.currentWriteId),i=d1(n,e,r);let o=i;const u=i.hash();for(let _=0;_<t.length;_++){const E=t[_];(0,F.hu)(0===E.status,"tryToSendTransactionQueue_: items in queue should all be run."),E.status=1,E.retryCount++;const D=ks(e,E.path);o=o.updateChild(D,E.currentOutputSnapshotRaw)}const d=o.val(!0),p=e;n.server_.put(p.toString(),d,_=>{b_(n,"transaction put response",{path:p.toString(),status:_});let E=[];if("ok"===_){const D=[];for(let x=0;x<t.length;x++)t[x].status=2,E=E.concat(Ih(n.serverSyncTree_,t[x].currentWriteId)),t[x].onComplete&&D.push(()=>t[x].onComplete(null,!0,t[x].currentOutputSnapshotResolved)),t[x].unwatcher();FS(n,xS(n.transactionQueueTree_,e)),PS(n,n.transactionQueueTree_),Vo(n.eventQueue_,e,E);for(let x=0;x<D.length;x++)c_(D[x])}else{if("datastale"===_)for(let D=0;D<t.length;D++)t[D].status=3===t[D].status?4:0;else{os("transaction at "+p.toString()+" failed: "+_);for(let D=0;D<t.length;D++)t[D].status=4,t[D].abortReason=_}w_(n,e)}},u)}(n,y0(e),t)}else J$(e)&&RS(e,t=>{PS(n,t)})}function w_(n,e){const t=dG(n,e),r=y0(t);return function rY(n,e,t){if(0===e.length)return;const r=[];let i=[];const u=e.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const p=e[d],_=ks(t,p.path);let D,E=!1;if((0,F.hu)(null!==_,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)E=!0,D=p.abortReason,i=i.concat(Ih(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=25)E=!0,D="maxretry",i=i.concat(Ih(n.serverSyncTree_,p.currentWriteId,!0));else{const x=d1(n,p.path,u);p.currentInputSnapshot=x;const P=e[d].update(x.val());if(void 0!==P){b0("transaction failed: Data returned ",P,p.path);let L=wr(P);"object"==typeof P&&null!=P&&(0,F.r3)(P,".priority")||(L=L.updatePriority(x.getPriority()));const ue=p.currentWriteId,Ne=C0(n),We=e1(L,x,Ne);p.currentOutputSnapshotRaw=L,p.currentOutputSnapshotResolved=We,p.currentWriteId=OS(n),u.splice(u.indexOf(ue),1),i=i.concat(WP(n.serverSyncTree_,p.path,We,p.currentWriteId,p.applyLocally)),i=i.concat(Ih(n.serverSyncTree_,ue,!0))}else E=!0,D="nodata",i=i.concat(Ih(n.serverSyncTree_,p.currentWriteId,!0))}Vo(n.eventQueue_,t,i),i=[],E&&(e[d].status=2,setTimeout(e[d].unwatcher,Math.floor(0)),e[d].onComplete&&r.push("nodata"===D?()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot):()=>e[d].onComplete(new Error(D),!1,null)))}FS(n,n.transactionQueueTree_);for(let d=0;d<r.length;d++)c_(r[d]);PS(n,n.transactionQueueTree_)}(n,hG(n,t),r),r}function dG(n,e){let t,r=n.transactionQueueTree_;for(t=sn(e);null!==t&&void 0===Np(r);)r=xS(r,t),t=sn(e=Kn(e));return r}function hG(n,e){const t=[];return fG(n,e,t),t.sort((r,i)=>r.order-i.order),t}function fG(n,e,t){const r=Np(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);RS(e,i=>{fG(n,i,t)})}function FS(n,e){const t=Np(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,r1(e,t.length>0?t:void 0)}RS(e,r=>{FS(n,r)})}function h1(n,e){const t=y0(dG(n,e)),r=xS(n.transactionQueueTree_,e);return function O7(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{f1(n,i)}),f1(n,r),X$(r,i=>{f1(n,i)}),t}function f1(n,e){const t=Np(e);if(t){const r=[];let i=[],o=-1;for(let u=0;u<t.length;u++)3===t[u].status||(1===t[u].status?((0,F.hu)(o===u-1,"All SENT items should be at beginning of queue."),o=u,t[u].status=3,t[u].abortReason="set"):((0,F.hu)(0===t[u].status,"Unexpected transaction status in abort"),t[u].unwatcher(),i=i.concat(Ih(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&r.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));-1===o?r1(e,void 0):t.length=o+1,Vo(n.eventQueue_,y0(e),i);for(let u=0;u<r.length;u++)c_(r[u])}}const p1=function(n,e){const t=oY(n),r=t.namespace;return"firebase.com"===t.domain&&Nu(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Nu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&os("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new pP(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new kn(t.pathString)}},oY=function(n){let e="",t="",r="",i="",o="",u=!0,d="https",p=443;if("string"==typeof n){let _=n.indexOf("//");_>=0&&(d=n.substring(0,_-1),n=n.substring(_+2));let E=n.indexOf("/");-1===E&&(E=n.length);let D=n.indexOf("?");-1===D&&(D=n.length),e=n.substring(0,Math.min(E,D)),E<D&&(i=function iY(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(E,D)));const x=function sY(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):os(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,D)));_=e.indexOf(":"),_>=0?(u="https"===d||"wss"===d,p=parseInt(e.substring(_+1),10)):_=e.length;const P=e.slice(0,_);if("localhost"===P.toLowerCase())t="localhost";else if(P.split(".").length<=2)t=P;else{const L=e.indexOf(".");r=e.substring(0,L).toLowerCase(),t=e.substring(L+1),o=r}"ns"in x&&(o=x.ns)}return{host:e,port:p,domain:t,subdomain:r,secure:u,scheme:d,pathString:i,namespace:o}};class pG{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,F.Pz)(this.snapshot.exportVal())}}class gG{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class g1{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,F.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class mG{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new F.BH;return Y7(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){La("OnDisconnect.remove",this._path);const e=new F.BH;return uG(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){La("OnDisconnect.set",this._path),Fu("OnDisconnect.set",e,this._path,!1);const t=new F.BH;return uG(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){La("OnDisconnect.setWithPriority",this._path),Fu("OnDisconnect.setWithPriority",e,this._path,!1),a1("OnDisconnect.setWithPriority",t,!1);const r=new F.BH;return function Q7(n,e,t,r,i){const o=wr(t,r);n.server_.onDisconnectPut(e.toString(),o.val(!0),(u,d)=>{"ok"===u&&m_(n.onDisconnect_,e,o),Th(0,i,u,d)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){La("OnDisconnect.update",this._path),tG("OnDisconnect.update",e,this._path,!1);const t=new F.BH;return function J7(n,e,t,r){if((0,F.xb)(t))return Ii("onDisconnect().update() called with empty data.  Don't do anything."),void Th(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,o)=>{"ok"===i&&Ti(t,(u,d)=>{const p=wr(d);m_(n.onDisconnect_,pr(e,u),p)}),Th(0,r,i,o)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class no{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return on(this._path)?null:bP(this._path)}get ref(){return new Va(this._repo,this._path)}get _queryIdentifier(){const e=w$(this._queryParams),t=dP(e);return"{}"===t?"default":t}get _queryObject(){return w$(this._queryParams)}isEqual(e){if(!((e=(0,F.m9)(e))instanceof no))return!1;const t=this._repo===e._repo,r=wP(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Q5(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function LS(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Dh(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Pu){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Uc)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Ou)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Xn){if(null!=e&&!v0(e)||null!=t&&!v0(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,F.hu)(n.getIndex()instanceof DP||n.getIndex()===SP,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function VS(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Va extends no{constructor(e,t){super(e,t,new fS,!1)}get parent(){const e=s$(this._path);return null===e?null:new Va(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Op{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new kn(e),r=Pp(this.ref,e);return new Op(this._node.getChild(t),r,Xn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Op(i,Pp(this.ref,r),Xn)))}hasChild(e){const t=new kn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function _G(n,e){return(n=(0,F.m9)(n))._checkNotDeleted("ref"),void 0!==e?Pp(n._root,e):n._root}function yG(n,e){(n=(0,F.m9)(n))._checkNotDeleted("refFromURL");const t=p1(e,n._repo.repoInfo_.nodeAdmin);nG("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Nu("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),_G(n,t.path.toString())}function Pp(n,e){return null===sn((n=(0,F.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),E0("child","path",t,!1)):E0("child","path",e,!1),new Va(n._repo,pr(n._path,e));var t}function m1(n,e){n=(0,F.m9)(n),La("set",n._path),Fu("set",e,n._path,!1);const t=new F.BH;return u1(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function dY(n,e){tG("update",e,n._path,!1);const t=new F.BH;return function K7(n,e,t,r){b_(n,"update",{path:e.toString(),value:t});let i=!0;const o=C0(n),u={};if(Ti(t,(d,p)=>{i=!1,u[d]=Q$(pr(e,d),wr(p),n.serverSyncTree_,o)}),i)Ii("update() called with empty data.  Don't do anything."),Th(0,r,"ok",void 0);else{const d=OS(n),p=function b7(n,e,t,r){!function LZ(n,e,t,r){(0,F.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=VP(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=er.fromObject(t);return v_(n,new __({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,u,d);NS(n.eventQueue_,p),n.server_.merge(e.toString(),t,(_,E)=>{const D="ok"===_;D||os("update at "+e+" failed: "+_);const x=Ih(n.serverSyncTree_,d,!D),P=x.length>0?w_(n,e):e;Vo(n.eventQueue_,P,x),Th(0,r,_,E)}),Ti(t,_=>{const E=h1(n,pr(e,_));w_(n,E)}),Vo(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function hY(n){n=(0,F.m9)(n);const e=new g1(()=>{}),t=new I0(e);return function W7(n,e,t){const r=function T7(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(_,E)=>{const D=ks(_,t);r=r||Eh(E,D)});let i=n.syncPointTree_.get(t);i?r=r||Eh(i,Sn()):(i=new B$,n.syncPointTree_=n.syncPointTree_.set(t,i));const o=null!=r,u=o?new bh(r,!0,!1):null;return function l7(n){return vS(n.viewCache_)}(H$(i,e,bS(n.pendingWriteTree_,e._path),o?u.getNode():Jt.EMPTY_NODE,o))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const o=wr(i).withIndex(e._queryParams.getIndex());let u;if(KP(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())u=g0(n.serverSyncTree_,e._path,o);else{const d=m0(n.serverSyncTree_,e);u=q$(n.serverSyncTree_,e._path,o,d)}return Vo(n.eventQueue_,e._path,u),SS(n.serverSyncTree_,e,t,null,!0),o},i=>(b_(n,"get for query "+(0,F.Pz)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Op(r,new Va(n._repo,n._path),n._queryParams.getIndex()))}class I0{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new pG("value",this,new Op(e.snapshotNode,new Va(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new gG(this,e,t):null}matches(e){return e instanceof I0&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class US{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new gG(this,e,t):null}createEvent(e,t){(0,F.hu)(null!=e.childName,"Child events should have a childName.");const r=Pp(new Va(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new pG(e.type,this,new Op(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof US&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function T0(n,e,t,r,i){let o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){const p=t,_=(E,D)=>{c1(n._repo,n,d),p(E,D)};_.userCallback=t.userCallback,_.context=t.context,t=_}const u=new g1(t,o||void 0),d="value"===e?new I0(u):new US(e,u);return function X7(n,e,t){let r;r=".info"===sn(e._path)?KP(n.infoSyncTree_,e,t):KP(n.serverSyncTree_,e,t),rG(n.eventQueue_,e._path,r)}(n._repo,n,d),()=>c1(n._repo,n,d)}function _1(n,e,t,r){return T0(n,"value",e,t,r)}function vG(n,e,t,r){return T0(n,"child_added",e,t,r)}function bG(n,e,t,r){return T0(n,"child_changed",e,t,r)}function wG(n,e,t,r){return T0(n,"child_moved",e,t,r)}function EG(n,e,t,r){return T0(n,"child_removed",e,t,r)}function CG(n,e,t){let r=null;const i=t?new g1(t):null;"value"===e?r=new I0(i):e&&(r=new US(e,i)),c1(n._repo,n,r)}class Fl{}class IG extends Fl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Fu("endAt",this._value,e._path,!0);const t=RP(e._queryParams,this._value,this._key);if(VS(t),Dh(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new no(e._repo,e._path,t,e._orderByCalled)}}class pY extends Fl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Fu("endBefore",this._value,e._path,!1);const t=function IZ(n,e,t){let r,i;return n.index_===Pu?("string"==typeof e&&(e=y$(e)),i=RP(n,e,t)):(r=null==t?Uc:y$(t),i=RP(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(VS(t),Dh(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new no(e._repo,e._path,t,e._orderByCalled)}}class TG extends Fl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Fu("startAt",this._value,e._path,!0);const t=xP(e._queryParams,this._value,this._key);if(VS(t),Dh(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new no(e._repo,e._path,t,e._orderByCalled)}}class _Y extends Fl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Fu("startAfter",this._value,e._path,!1);const t=function CZ(n,e,t){let r;if(n.index_===Pu)"string"==typeof e&&(e=_$(e)),r=xP(n,e,t);else{let i;i=null==t?Ou:_$(t),r=xP(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(VS(t),Dh(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new no(e._repo,e._path,t,e._orderByCalled)}}class vY extends Fl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new no(e._repo,e._path,function wZ(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class wY extends Fl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new no(e._repo,e._path,function EZ(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class CY extends Fl{constructor(e){super(),this._path=e}_apply(e){LS(e,"orderByChild");const t=new kn(this._path);if(on(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new DP(t),i=pS(e._queryParams,r);return Dh(i),new no(e._repo,e._path,i,!0)}}class TY extends Fl{_apply(e){LS(e,"orderByKey");const t=pS(e._queryParams,Pu);return Dh(t),new no(e._repo,e._path,t,!0)}}class SY extends Fl{_apply(e){LS(e,"orderByPriority");const t=pS(e._queryParams,Xn);return Dh(t),new no(e._repo,e._path,t,!0)}}class MY extends Fl{_apply(e){LS(e,"orderByValue");const t=pS(e._queryParams,SP);return Dh(t),new no(e._repo,e._path,t,!0)}}class RY extends Fl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Fu("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new IG(this._value,this._key)._apply(new TG(this._value,this._key)._apply(e))}}function Ll(n,...e){let t=(0,F.m9)(n);for(const r of e)t=r._apply(t);return t}(function h7(n){(0,F.hu)(!IS,"__referenceConstructor has already been defined"),IS=n})(Va),function _7(n){(0,F.hu)(!DS,"__referenceConstructor has already been defined"),DS=n}(Va);const y1={};function SG(n,e,t,r,i){let o=r||n.options.databaseURL;void 0===o&&(n.options.projectId||Nu("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ii("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,_,u=p1(o,i),d=u.repoInfo;typeof process<"u"&&process.env&&(_=process.env.FIREBASE_DATABASE_EMULATOR_HOST),_?(p=!0,o=`http://${_}?ns=${d.namespace}`,u=p1(o,i),d=u.repoInfo):p=!u.repoInfo.secure;const E=i&&p?new n0(n0.OWNER):new D5(n.name,n.options,e);nG("Invalid Firebase Database URL",u),on(u.path)||Nu("Database URL must point to the root of a Firebase Database (not including a child path).");const D=function FY(n,e,t,r){let i=y1[e.name];i||(i={},y1[e.name]=i);let o=i[n.toURLString()];return o&&Nu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new G7(n,false,t,r),i[n.toURLString()]=o,o}(d,n,E,new T5(n.name,t));return new VY(D,n)}class VY{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function z7(n,e,t){if(n.stats_=_P(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new gS(n.repoInfo_,(r,i,o,u)=>{aG(n,r,i,o,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>lG(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,F.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Mp(n.repoInfo_,e,(r,i,o,u)=>{aG(n,r,i,o,u)},r=>{lG(n,r)},r=>{!function q7(n,e){Ti(e,(t,r)=>{l1(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function M5(n,e){const t=n.toString();return mP[t]||(mP[t]=e()),mP[t]}(n.repoInfo_,()=>new xZ(n.stats_,n.server_)),n.infoData_=new TZ,n.infoSyncTree_=new z$({startListening:(r,i,o,u)=>{let d=[];const p=n.infoData_.getNode(r._path);return p.isEmpty()||(d=g0(n.infoSyncTree_,r._path,p),setTimeout(()=>{u("ok")},0)),d},stopListening:()=>{}}),l1(n,"connected",!1),n.serverSyncTree_=new z$({startListening:(r,i,o,u)=>(n.server_.listen(r,o,i,(d,p)=>{const _=u(d,p);Vo(n.eventQueue_,r._path,_)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Va(this._repo,Sn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function PY(n,e){const t=y1[e];(!t||t[n.key]!==n)&&Nu(`Database ${e}(${n.repoInfo_}) has already been deleted.`),cG(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Nu("Cannot call "+e+" on a deleted database.")}}function AG(){Wj.IS_TRANSPORT_INITIALIZED&&os("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function UY(){AG(),yh.forceDisallow()}function BY(){AG(),d_.forceDisallow(),yh.forceAllow()}function GY(n,e){Sj(n,e)}const qY={".sv":"timestamp"};class ZY{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Mp.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Mp.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function zY(n){Ej(ns.SDK_VERSION),(0,ns._registerComponent)(new xa.wA("database",(e,{instanceIdentifier:t})=>SG(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,ns.registerVersion)(bj,"0.13.6",n),(0,ns.registerVersion)(bj,"0.13.6","esm2017")}();const XY=new Ra.Yd("@firebase/database-compat"),MG=function(n){XY.warn("FIREBASE WARNING: "+n)};class n9{constructor(e){this._delegate=e}cancel(e){(0,F.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,F.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,F.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,F.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,F.Dv)("OnDisconnect.set",1,2,arguments.length),(0,F.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,F.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,F.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),o=>r(o)),i}update(e,t){if((0,F.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,MG("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,F.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class r9{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,F.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Sh{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,F.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,F.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,F.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,F.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,F.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),E0("DataSnapshot.child","path",e,!1),new Sh(this._database,this._delegate.child(e))}hasChild(e){return(0,F.Dv)("DataSnapshot.hasChild",1,1,arguments.length),E0("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,F.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,F.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,F.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Sh(this._database,t)))}hasChildren(){return(0,F.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,F.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,F.Dv)("DataSnapshot.ref",0,0,arguments.length),new Uo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class $i{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var o;(0,F.Dv)("Query.on",2,4,arguments.length),(0,F.Wj)("Query.on","callback",t,!1);const u=$i.getCancelAndContextArgs_("Query.on",r,i),d=(_,E)=>{t.call(u.context,new Sh(this.database,_),E)};d.userCallback=t,d.context=u.context;const p=null===(o=u.cancel)||void 0===o?void 0:o.bind(u.context);switch(e){case"value":return _1(this._delegate,d,p),t;case"child_added":return vG(this._delegate,d,p),t;case"child_removed":return EG(this._delegate,d,p),t;case"child_changed":return bG(this._delegate,d,p),t;case"child_moved":return wG(this._delegate,d,p),t;default:throw new Error((0,F.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,F.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,F.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,F.Wj)("Query.off","callback",t,!0),(0,F.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,CG(this._delegate,e,i)}else CG(this._delegate,e)}get(){return hY(this._delegate).then(e=>new Sh(this.database,e))}once(e,t,r,i){(0,F.Dv)("Query.once",1,4,arguments.length),(0,F.Wj)("Query.once","callback",t,!0);const o=$i.getCancelAndContextArgs_("Query.once",r,i),u=new F.BH,d=(_,E)=>{const D=new Sh(this.database,_);t&&t.call(o.context,D,E),u.resolve(D)};d.userCallback=t,d.context=o.context;const p=_=>{o.cancel&&o.cancel.call(o.context,_),u.reject(_)};switch(e){case"value":_1(this._delegate,d,p,{onlyOnce:!0});break;case"child_added":vG(this._delegate,d,p,{onlyOnce:!0});break;case"child_removed":EG(this._delegate,d,p,{onlyOnce:!0});break;case"child_changed":bG(this._delegate,d,p,{onlyOnce:!0});break;case"child_moved":wG(this._delegate,d,p,{onlyOnce:!0});break;default:throw new Error((0,F.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}limitToFirst(e){return(0,F.Dv)("Query.limitToFirst",1,1,arguments.length),new $i(this.database,Ll(this._delegate,function bY(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new vY(n)}(e)))}limitToLast(e){return(0,F.Dv)("Query.limitToLast",1,1,arguments.length),new $i(this.database,Ll(this._delegate,function EY(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new wY(n)}(e)))}orderByChild(e){return(0,F.Dv)("Query.orderByChild",1,1,arguments.length),new $i(this.database,Ll(this._delegate,function IY(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return E0("orderByChild","path",n,!1),new CY(n)}(e)))}orderByKey(){return(0,F.Dv)("Query.orderByKey",0,0,arguments.length),new $i(this.database,Ll(this._delegate,function DY(){return new TY}()))}orderByPriority(){return(0,F.Dv)("Query.orderByPriority",0,0,arguments.length),new $i(this.database,Ll(this._delegate,function AY(){return new SY}()))}orderByValue(){return(0,F.Dv)("Query.orderByValue",0,0,arguments.length),new $i(this.database,Ll(this._delegate,function xY(){return new MY}()))}startAt(e=null,t){return(0,F.Dv)("Query.startAt",0,2,arguments.length),new $i(this.database,Ll(this._delegate,function mY(n=null,e){return w0("startAt","key",e,!0),new TG(n,e)}(e,t)))}startAfter(e=null,t){return(0,F.Dv)("Query.startAfter",0,2,arguments.length),new $i(this.database,Ll(this._delegate,function yY(n,e){return w0("startAfter","key",e,!0),new _Y(n,e)}(e,t)))}endAt(e=null,t){return(0,F.Dv)("Query.endAt",0,2,arguments.length),new $i(this.database,Ll(this._delegate,function fY(n,e){return w0("endAt","key",e,!0),new IG(n,e)}(e,t)))}endBefore(e=null,t){return(0,F.Dv)("Query.endBefore",0,2,arguments.length),new $i(this.database,Ll(this._delegate,function gY(n,e){return w0("endBefore","key",e,!0),new pY(n,e)}(e,t)))}equalTo(e,t){return(0,F.Dv)("Query.equalTo",1,2,arguments.length),new $i(this.database,Ll(this._delegate,function kY(n,e){return w0("equalTo","key",e,!0),new RY(n,e)}(e,t)))}toString(){return(0,F.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,F.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,F.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof $i))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,F.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,F.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,F.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Uo(this.database,new Va(this._delegate._repo,this._delegate._path))}}class Uo extends $i{constructor(e,t){super(e,new no(t._repo,t._path,new fS,!1)),this.database=e,this._delegate=t}getKey(){return(0,F.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,F.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Uo(this.database,Pp(this._delegate,e))}getParent(){(0,F.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Uo(this.database,e):null}getRoot(){return(0,F.Dv)("Reference.root",0,0,arguments.length),new Uo(this.database,this._delegate.root)}set(e,t){(0,F.Dv)("Reference.set",1,2,arguments.length),(0,F.Wj)("Reference.set","onComplete",t,!0);const r=m1(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,F.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,MG("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}La("Reference.update",this._delegate._path),(0,F.Wj)("Reference.update","onComplete",t,!0);const r=dY(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,F.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,F.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function cY(n,e,t){if(La("setWithPriority",n._path),Fu("setWithPriority",e,n._path,!1),a1("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new F.BH;return u1(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),o=>r(o)),i}remove(e){(0,F.Dv)("Reference.remove",0,1,arguments.length),(0,F.Wj)("Reference.remove","onComplete",e,!0);const t=function lY(n){return La("remove",n._path),m1(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,F.Dv)("Reference.transaction",1,3,arguments.length),(0,F.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,F.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,F.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function YY(n,e,t){var r;if(n=(0,F.m9)(n),La("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,o=new F.BH,d=_1(n,()=>{});return function tY(n,e,t,r,i,o){b_(n,"transaction on "+e);const u={path:e,update:t,onComplete:r,status:null,order:Ij(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},d=d1(n,e,void 0);u.currentInputSnapshot=d;const p=u.update(d.val());if(void 0===p)u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&u.onComplete(null,!1,u.currentInputSnapshot);else{b0("transaction failed: Data returned ",p,u.path),u.status=0;const _=xS(n.transactionQueueTree_,e),E=Np(_)||[];let D;E.push(u),r1(_,E),"object"==typeof p&&null!==p&&(0,F.r3)(p,".priority")?(D=(0,F.DV)(p,".priority"),(0,F.hu)(v0(D),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):D=(AS(n.serverSyncTree_,e)||Jt.EMPTY_NODE).getPriority().val();const x=C0(n),P=wr(p,D),L=e1(P,d,x);u.currentOutputSnapshotRaw=P,u.currentOutputSnapshotResolved=L,u.currentWriteId=OS(n);const J=WP(n.serverSyncTree_,e,L,u.currentWriteId,u.applyLocally);Vo(n.eventQueue_,e,J),PS(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(p,_,E)=>{let D=null;p?o.reject(p):(D=new Op(E,new Va(n._repo,n._path),Xn),o.resolve(new ZY(_,D)))},d,i),o.promise}(this._delegate,e,{applyLocally:r}).then(o=>new r9(o.committed,new Sh(this.database,o.snapshot)));return t&&i.then(o=>t(null,o.committed,o.snapshot),o=>t(o,!1,null)),i}setPriority(e,t){(0,F.Dv)("Reference.setPriority",1,2,arguments.length),(0,F.Wj)("Reference.setPriority","onComplete",t,!0);const r=function uY(n,e){n=(0,F.m9)(n),La("setPriority",n._path),a1("setPriority",e,!1);const t=new F.BH;return u1(n._repo,pr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,F.Dv)("Reference.push",0,2,arguments.length),(0,F.Wj)("Reference.push","onComplete",t,!0);const r=function aY(n,e){n=(0,F.m9)(n),La("push",n._path),Fu("push",e,n._path,!0);const t=oG(n._repo),r=_Z(t),i=Pp(n,r),o=Pp(n,r);let u;return u=null!=e?m1(o,e).then(()=>o):Promise.resolve(o),i.then=u.then.bind(u),i.catch=u.then.bind(u,void 0),i}(this._delegate,e),i=r.then(u=>new Uo(this.database,u));t&&i.then(()=>t(null),u=>t(u));const o=new Uo(this.database,r);return o.then=i.then.bind(i),o.catch=i.catch.bind(i,void 0),o}onDisconnect(){return La("Reference.onDisconnect",this._delegate._path),new n9(new mG(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class D0{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:UY,forceLongPolling:BY}}useEmulator(e,t,r={}){!function HY(n,e,t,r={}){(n=(0,F.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Nu("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Nu('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new n0(n0.OWNER);else if(r.mockUserToken){const u="string"==typeof r.mockUserToken?r.mockUserToken:(0,F.Sg)(r.mockUserToken,n.app.options.projectId);o=new n0(u)}!function OY(n,e,t,r){n.repoInfo_=new pP(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,o)}(this._delegate,e,t,r)}ref(e){if((0,F.Dv)("database.ref",0,1,arguments.length),e instanceof Uo){const t=yG(this._delegate,e.toString());return new Uo(this,t)}{const t=_G(this._delegate,e);return new Uo(this,t)}}refFromURL(e){(0,F.Dv)("database.refFromURL",1,1,arguments.length);const r=yG(this._delegate,e);return new Uo(this,r)}goOffline(){return(0,F.Dv)("database.goOffline",0,0,arguments.length),function jY(n){(n=(0,F.m9)(n))._checkNotDeleted("goOffline"),cG(n._repo)}(this._delegate)}goOnline(){return(0,F.Dv)("database.goOnline",0,0,arguments.length),function $Y(n){(n=(0,F.m9)(n))._checkNotDeleted("goOnline"),function eY(n){n.persistentConnection_&&n.persistentConnection_.resume(sG)}(n._repo)}(this._delegate)}}D0.ServerValue={TIMESTAMP:function WY(){return qY}(),increment:n=>function KY(n){return{".sv":{increment:n}}}(n)};var s9=Object.freeze({__proto__:null,initStandalone:function i9({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:o=!1}){Ej(t);const u=new xa.zt("auth-internal",new xa.H0("database-standalone"));return u.setComponent(new xa.wA("auth-internal",()=>r,"PRIVATE")),{instance:new D0(SG(n,u,void 0,e,o),n),namespace:i}}});const o9=D0.ServerValue;function xG(n){return null==n}function RG(n){return"function"==typeof n.set}function kG(n,e){return RG(e)?e:n.ref(e)}function NG(n,e){if(function l9(n){return"string"==typeof n}(n))return e.stringCase();if(RG(n))return e.firebaseCase();if(function u9(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function S0(n,e,t="on",r=uE.z){return new ii.y(i=>{let o=null;return o=n[t](e,(u,d)=>{r.schedule(()=>{i.next({snapshot:u,prevKey:d})}),"once"===t&&r.schedule(()=>i.complete())},u=>{r.schedule(()=>i.error(u))}),"on"===t?{unsubscribe(){null!=o&&n.off(e,o)}}:{unsubscribe(){}}}).pipe((0,ht.U)(i=>{const{snapshot:o,prevKey:u}=i;let d=null;return o.exists()&&(d=o.key),{type:e,payload:o,prevKey:u,key:d}}),(0,Xg.B)())}function OG(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function h9(n,e){const{payload:t,prevKey:r,key:i}=e,o=OG(n,i),u=function d9(n,e){if(xG(e))return 0;{const t=OG(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let d=null;e.payload.forEach(p=>{const _={payload:p,type:"value",prevKey:d,key:p.key};return d=p.key,n=[...n,_],!1})}return n;case"child_added":if(o>-1){const d=n[o-1];(d&&d.key||null)!==r&&(n=n.filter(p=>p.payload.key!==t.key)).splice(u,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(u,0,e)}return n;case"child_removed":return n.filter(d=>d.payload.key!==t.key);case"child_changed":return n.map(d=>d.payload.key===i?e:d);case"child_moved":if(o>-1){const d=n.splice(o,1)[0];return(n=n.slice()).splice(u,0,d),n}return n;default:return n}}function PG(n){return(xG(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function FG(n,e,t){return function c9(n,e,t){return S0(n,"value","once",t).pipe(vr(r=>{const i=[ut(r)];return e.forEach(o=>i.push(S0(n,o,"on",t))),(0,kf.T)(...i).pipe(Wf(h9,[]))}),dg())}(n,e=PG(e),t)}function LG(n,e,t){const r=(e=PG(e)).map(i=>S0(n,i,"on",t));return(0,kf.T)(...r)}function VG(n,e){return function(r,i){return NG(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function m9(n){return function(t){return t?NG(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function UG(n,e){return function(){return S0(n,"value","on",e)}}!function a9(n){n.INTERNAL.registerComponent(new xa.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new D0(i,r)},"PUBLIC").setServiceProps({Reference:Uo,Query:$i,Database:D0,DataSnapshot:Sh,enableLogging:GY,INTERNAL:s9,ServerValue:o9}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.6")}(NT.Z);const v9=new h.OlP("angularfire2.realtimeDatabaseURL"),b9=new h.OlP("angularfire2.database.use-emulator");let w9=(()=>{class n{constructor(t,r,i,o,u,d,p,_,E,D,x,P,L,J,ue){this.schedulers=d;const Ne=p,We=(0,Nr.on)(t,u,r);_&&Gf(We,u,E,x,P,L,D,J),this.database=(0,Nr.cc)(`${We.name}.database.${i}`,"AngularFireDatabase",We.name,()=>{const et=u.runOutsideAngular(()=>We.database(i||void 0));return Ne&&et.useEmulator(...Ne),et},[Ne])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>kG(this.database,t));let o=i;return r&&(o=r(i)),function _9(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:VG(r,"update"),set:VG(r,"set"),push:i=>r.push(i),remove:m9(r),snapshotChanges:i=>FG(n,i,t).pipe(mn.iC),stateChanges:i=>LG(n,i,t).pipe(mn.iC),auditTrail:i=>function f9(n,e,t){return function g9(n,e,t){return function p9(n,e){return S0(n,"value","on",e).pipe((0,ht.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function f5(...n){const e=(0,xi.jO)(n);return(0,Wr.e)((t,r)=>{const i=n.length,o=new Array(i);let u=n.map(()=>!1),d=!1;for(let p=0;p<i;p++)(0,lu.Xf)(n[p]).subscribe((0,Wn.x)(r,_=>{o[p]=_,!d&&!u[p]&&(u[p]=!0,(d=u.every(lc.y))&&(u=null))},K_.Z));t.subscribe((0,Wn.x)(r,p=>{if(d){const _=[p,...o];r.next(e?e(..._):_)}}))})}(e),(0,ht.U)(([i,o])=>{const u=i.lastKeyToLoad,d=o.map(p=>p.key);return{actions:o,lastKeyToLoad:u,loadedKeys:d}}),function p5(n){return(0,Wr.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,Wn.x)(t,o=>(r||(r=!n(o,i++)))&&t.next(o)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,ht.U)(i=>i.actions))}(n,LG(n,e).pipe(Wf((i,o)=>[...i,o],[])),t)}(n,i,t).pipe(mn.iC),valueChanges:(i,o)=>FG(n,i,t).pipe((0,ht.U)(d=>d.map(p=>o&&o.idField?Object.assign(Object.assign({},p.payload.val()),{[o.idField]:p.key}):p.payload.val())),mn.iC)}}(o,this)}object(t){return function y9(n,e){return{query:n,snapshotChanges:()=>UG(n,e.schedulers.outsideAngular)().pipe(mn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>UG(n,e.schedulers.outsideAngular)().pipe(mn.iC,(0,ht.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>kG(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Nr.Dh),h.LFG(Nr.xv,8),h.LFG(v9,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(mn.HU),h.LFG(b9,8),h.LFG(zf,8),h.LFG(Fb,8),h.LFG(Lb,8),h.LFG(Sm,8),h.LFG($f,8),h.LFG(kT,8),h.LFG(Am,8),h.LFG(Ac,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),E9=(()=>{class n{constructor(){jf.Z.registerVersion("angularfire",mn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[w9]}),n})();function BG(n){return new ii.y(e=>{(0,lu.Xf)(n()).subscribe(e)})}var C9=U(9635);function v1(){return(0,Wr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Wn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class HG extends ii.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Wr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Yv.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Wn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Yv.w0.EMPTY)}return e}refCount(){return v1()(this)}}function b1(n){return n<=0?()=>cu.E:(0,Wr.e)((e,t)=>{let r=[];e.subscribe((0,Wn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function jG(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ri((i,o)=>n(i,o,r)):lc.y,b1(1),t?lm(e):oT(()=>new cb))}const an="primary",A0=Symbol("RouteTitle");class D9{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function E_(n){return new D9(n)}function S9(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let o=0;o<r.length;o++){const u=r[o],d=n[o];if(u.startsWith(":"))i[u.substring(1)]=d;else if(u!==d.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Lu(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!$G(n[i],e[i]))return!1;return!0}function $G(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}return n===e}function GG(n){return Array.prototype.concat.apply([],n)}function zG(n){return n.length>0?n[n.length-1]:null}function Gi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Ah(n){return(0,h.CqO)(n)?n:(0,h.QGY)(n)?(0,pn.D)(Promise.resolve(n)):ut(n)}const x9={exact:function KG(n,e,t){if(!Lp(n.segments,e.segments)||!BS(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!KG(n.children[r],e.children[r],t))return!1;return!0},subset:ZG},qG={exact:function R9(n,e){return Lu(n,e)},subset:function k9(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>$G(n[t],e[t]))},ignored:()=>!0};function WG(n,e,t){return x9[t.paths](n.root,e.root,t.matrixParams)&&qG[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function ZG(n,e,t){return YG(n,e,e.segments,t)}function YG(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Lp(i,t)||e.hasChildren()||!BS(i,t,r))}if(n.segments.length===t.length){if(!Lp(n.segments,t)||!BS(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!ZG(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(Lp(n.segments,i)&&BS(n.segments,i,r)&&n.children[an])&&YG(n.children[an],e,o,r)}}function BS(n,e,t){return e.every((r,i)=>qG[t](n[i].parameters,r.parameters))}class Fp{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=E_(this.queryParams)),this._queryParamMap}toString(){return P9.serialize(this)}}class hn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Gi(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return HS(this)}}class M0{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=E_(this.parameters)),this._parameterMap}toString(){return ez(this)}}function Lp(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let QG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return new E1},providedIn:"root"}),n})();class E1{parse(e){const t=new G9(e);return new Fp(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${x0(e.root,!0)}`,r=function V9(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${jS(t)}=${jS(i)}`).join("&"):`${jS(t)}=${jS(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function F9(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${i}`}}const P9=new E1;function HS(n){return n.segments.map(e=>ez(e)).join("/")}function x0(n,e){if(!n.hasChildren())return HS(n);if(e){const t=n.children[an]?x0(n.children[an],!1):"",r=[];return Gi(n.children,(i,o)=>{o!==an&&r.push(`${o}:${x0(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function O9(n,e){let t=[];return Gi(n.children,(r,i)=>{i===an&&(t=t.concat(e(r,i)))}),Gi(n.children,(r,i)=>{i!==an&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===an?[x0(n.children[an],!1)]:[`${i}:${x0(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[an]?`${HS(n)}/${t[0]}`:`${HS(n)}/(${t.join("//")})`}}function JG(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function jS(n){return JG(n).replace(/%3B/gi,";")}function C1(n){return JG(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function $S(n){return decodeURIComponent(n)}function XG(n){return $S(n.replace(/\+/g,"%20"))}function ez(n){return`${C1(n.path)}${function L9(n){return Object.keys(n).map(e=>`;${C1(e)}=${C1(n[e])}`).join("")}(n.parameters)}`}const U9=/^[^\/()?;=#]+/;function GS(n){const e=n.match(U9);return e?e[0]:""}const B9=/^[^=?&#]+/,j9=/^[^&#]+/;class G9{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new hn([],{}):new hn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[an]=new hn(e,t)),r}parseSegment(){const e=GS(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new h.vHH(4009,!1);return this.capture(e),new M0($S(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=GS(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=GS(this.remaining);i&&(r=i,this.capture(r))}e[$S(t)]=$S(r)}parseQueryParam(e){const t=function H9(n){const e=n.match(B9);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const u=function $9(n){const e=n.match(j9);return e?e[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const i=XG(t),o=XG(r);if(e.hasOwnProperty(i)){let u=e[i];Array.isArray(u)||(u=[u],e[i]=u),u.push(o)}else e[i]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=GS(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new h.vHH(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=an);const u=this.parseChildren();t[o]=1===Object.keys(u).length?u[an]:new hn([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new h.vHH(4011,!1)}}function I1(n){return n.segments.length>0?new hn([],{[an]:n}):n}function zS(n){const e={};for(const r of Object.keys(n.children)){const o=zS(n.children[r]);(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function z9(n){if(1===n.numberOfChildren&&n.children[an]){const e=n.children[an];return new hn(n.segments.concat(e.segments),e.children)}return n}(new hn(n.segments,e))}function Vp(n){return n instanceof Fp}function K9(n,e,t,r,i){if(0===t.length)return C_(e.root,e.root,e.root,r,i);const o=function rz(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new nz(!0,0,n);let e=0,t=!1;const r=n.reduce((i,o,u)=>{if("object"==typeof o&&null!=o){if(o.outlets){const d={};return Gi(o.outlets,(p,_)=>{d[_]="string"==typeof p?p.split("/"):p}),[...i,{outlets:d}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===u?(o.split("/").forEach((d,p)=>{0==p&&"."===d||(0==p&&""===d?t=!0:".."===d?e++:""!=d&&i.push(d))}),i):[...i,o]},[]);return new nz(t,e,r)}(t);return o.toRoot()?C_(e.root,e.root,new hn([],{}),r,i):function u(p){const _=function Y9(n,e,t,r){if(n.isAbsolute)return new I_(e.root,!0,0);if(-1===r)return new I_(t,t===e.root,0);return function iz(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new h.vHH(4005,!1);i=r.segments.length}return new I_(r,!1,i-o)}(t,r+(R0(n.commands[0])?0:1),n.numberOfDoubleDots)}(o,e,n.snapshot?._urlSegment,p),E=_.processChildren?N0(_.segmentGroup,_.index,o.commands):D1(_.segmentGroup,_.index,o.commands);return C_(e.root,_.segmentGroup,E,r,i)}(n.snapshot?._lastPathIndex)}function R0(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function k0(n){return"object"==typeof n&&null!=n&&n.outlets}function C_(n,e,t,r,i){let u,o={};r&&Gi(r,(p,_)=>{o[_]=Array.isArray(p)?p.map(E=>`${E}`):`${p}`}),u=n===e?t:tz(n,e,t);const d=I1(zS(u));return new Fp(d,o,i)}function tz(n,e,t){const r={};return Gi(n.children,(i,o)=>{r[o]=i===e?t:tz(i,e,t)}),new hn(n.segments,r)}class nz{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&R0(r[0]))throw new h.vHH(4003,!1);const i=r.find(k0);if(i&&i!==zG(r))throw new h.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class I_{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function D1(n,e,t){if(n||(n=new hn([],{})),0===n.segments.length&&n.hasChildren())return N0(n,e,t);const r=function J9(n,e,t){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;const u=n.segments[i],d=t[r];if(k0(d))break;const p=`${d}`,_=r<t.length-1?t[r+1]:null;if(i>0&&void 0===p)break;if(p&&_&&"object"==typeof _&&void 0===_.outlets){if(!oz(p,_,u))return o;r+=2}else{if(!oz(p,{},u))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const o=new hn(n.segments.slice(0,r.pathIndex),{});return o.children[an]=new hn(n.segments.slice(r.pathIndex),n.children),N0(o,0,i)}return r.match&&0===i.length?new hn(n.segments,{}):r.match&&!n.hasChildren()?S1(n,e,t):r.match?N0(n,0,i):S1(n,e,t)}function N0(n,e,t){if(0===t.length)return new hn(n.segments,{});{const r=function Q9(n){return k0(n[0])?n[0].outlets:{[an]:n}}(t),i={};return Gi(r,(o,u)=>{"string"==typeof o&&(o=[o]),null!==o&&(i[u]=D1(n.children[u],e,o))}),Gi(n.children,(o,u)=>{void 0===r[u]&&(i[u]=o)}),new hn(n.segments,i)}}function S1(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const o=t[i];if(k0(o)){const p=X9(o.outlets);return new hn(r,p)}if(0===i&&R0(t[0])){r.push(new M0(n.segments[e].path,sz(t[0]))),i++;continue}const u=k0(o)?o.outlets[an]:`${o}`,d=i<t.length-1?t[i+1]:null;u&&d&&R0(d)?(r.push(new M0(u,sz(d))),i+=2):(r.push(new M0(u,{})),i++)}return new hn(r,{})}function X9(n){const e={};return Gi(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=S1(new hn([],{}),0,t))}),e}function sz(n){const e={};return Gi(n,(t,r)=>e[r]=`${t}`),e}function oz(n,e,t){return n==t.path&&Lu(e,t.parameters)}class Hc{constructor(e,t){this.id=e,this.url=t}}class A1 extends Hc{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Up extends Hc{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class qS extends Hc{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class az extends Hc{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class eQ extends Hc{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tQ extends Hc{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nQ extends Hc{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class rQ extends Hc{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class iQ extends Hc{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sQ{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class oQ{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class aQ{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lQ{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class uQ{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cQ{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lz{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class uz{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=M1(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=M1(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=x1(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return x1(e,this._root).map(t=>t.value)}}function M1(n,e){if(n===e.value)return e;for(const t of e.children){const r=M1(n,t);if(r)return r}return null}function x1(n,e){if(n===e.value)return[e];for(const t of e.children){const r=x1(n,t);if(r.length)return r.unshift(e),r}return[]}class jc{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function T_(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class cz extends uz{constructor(e,t){super(e),this.snapshot=t,R1(this,e)}toString(){return this.snapshot.toString()}}function dz(n,e){const t=function hQ(n,e){const u=new WS([],{},{},"",{},an,e,null,n.root,-1,{});return new fz("",new jc(u,[]))}(n,e),r=new qr([new M0("",{})]),i=new qr({}),o=new qr({}),u=new qr({}),d=new qr(""),p=new Bp(r,i,u,d,o,an,e,t.root);return p.snapshot=t.root,new cz(new jc(p,[]),t)}class Bp{constructor(e,t,r,i,o,u,d,p){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=u,this.component=d,this.title=this.data?.pipe((0,ht.U)(_=>_[A0]))??ut(void 0),this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ht.U)(e=>E_(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ht.U)(e=>E_(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function hz(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],o=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function fQ(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class WS{constructor(e,t,r,i,o,u,d,p,_,E,D,x){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=u,this.component=d,this.title=this.data?.[A0],this.routeConfig=p,this._urlSegment=_,this._lastPathIndex=E,this._correctedLastPathIndex=x??E,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=E_(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=E_(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class fz extends uz{constructor(e,t){super(t),this.url=e,R1(this,t)}toString(){return pz(this._root)}}function R1(n,e){e.value._routerState=n,e.children.forEach(t=>R1(n,t))}function pz(n){const e=n.children.length>0?` { ${n.children.map(pz).join(", ")} } `:"";return`${n.value}${e}`}function k1(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Lu(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Lu(e.params,t.params)||n.params.next(t.params),function A9(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Lu(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Lu(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function N1(n,e){const t=Lu(n.params,e.params)&&function N9(n,e){return Lp(n,e)&&n.every((t,r)=>Lu(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||N1(n.parent,e.parent))}function O0(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function gQ(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return O0(n,r,i);return O0(n,r)})}(n,e,t);return new jc(r,i)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const u=o.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(d=>O0(n,d)),u}}const r=function mQ(n){return new Bp(new qr(n.url),new qr(n.params),new qr(n.queryParams),new qr(n.fragment),new qr(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(o=>O0(n,o));return new jc(r,i)}}const O1="ngNavigationCancelingError";function gz(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Vp(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=mz(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function mz(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[O1]=!0,r.cancellationCode=e,t&&(r.url=t),r}function _z(n){return yz(n)&&Vp(n.url)}function yz(n){return n&&n[O1]}class _Q{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new P0,this.attachRef=null}}let P0=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new _Q,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const KS=!1;let P1=(()=>{class n{constructor(t,r,i,o,u){this.parentContexts=t,this.location=r,this.changeDetector=o,this.environmentInjector=u,this.activated=null,this._activatedRoute=null,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.name=i||an,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new h.vHH(4012,KS);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new h.vHH(4012,KS);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new h.vHH(4012,KS);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new h.vHH(4013,KS);this._activatedRoute=t;const i=this.location,u=t._futureSnapshot.component,d=this.parentContexts.getOrCreateContext(this.name).children,p=new yQ(t,d,i.injector);if(r&&function vQ(n){return!!n.resolveComponentFactory}(r)){const _=r.resolveComponentFactory(u);this.activated=i.createComponent(_,i.length,p)}else this.activated=i.createComponent(u,{index:i.length,injector:p,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(P0),h.Y36(h.s_b),h.$8M("name"),h.Y36(h.sBO),h.Y36(h.lqb))},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class yQ{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Bp?this.route:e===P0?this.childContexts:this.parent.get(e,t)}}let F1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[h.jDz],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},dependencies:[P1],encapsulation:2}),n})();function vz(n,e){return n.providers&&!n._injector&&(n._injector=(0,h.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function V1(n){const e=n.children&&n.children.map(V1),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==an&&(t.component=F1),t}function Ua(n){return n.outlet||an}function bz(n,e){const t=n.filter(r=>Ua(r)===e);return t.push(...n.filter(r=>Ua(r)!==e)),t}function F0(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class IQ{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),k1(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=T_(t);e.children.forEach(o=>{const u=o.value.outlet;this.deactivateRoutes(o,i[u],r),delete i[u]}),Gi(i,(o,u)=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(i===o)if(i.component){const u=r.getContext(i.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=T_(e);for(const u of Object.keys(o))this.deactivateRouteAndItsChildren(o[u],i);if(r&&r.outlet){const u=r.outlet.detach(),d=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:d})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=T_(e);for(const u of Object.keys(o))this.deactivateRouteAndItsChildren(o[u],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=T_(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new cQ(o.value.snapshot))}),e.children.length&&this.forwardEvent(new lQ(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(k1(i),i===o)if(i.component){const u=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const u=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const d=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),u.children.onOutletReAttached(d.contexts),u.attachRef=d.componentRef,u.route=d.route.value,u.outlet&&u.outlet.attach(d.componentRef,d.route.value),k1(d.route.value),this.activateChildRoutes(e,null,u.children)}else{const d=F0(i.snapshot),p=d?.get(h._Vd)??null;u.attachRef=null,u.route=i,u.resolver=p,u.injector=d,u.outlet&&u.outlet.activateWith(i,u.injector),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,r)}}class wz{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class ZS{constructor(e,t){this.component=e,this.route=t}}function TQ(n,e,t){const r=n._root;return L0(r,e?e._root:null,t,[r.value])}function D_(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,h.Z0I)(n)?e.get(n):n:r}function L0(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=T_(e);return n.children.forEach(u=>{(function SQ(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,u=e?e.value:null,d=t?t.getContext(n.value.outlet):null;if(u&&o.routeConfig===u.routeConfig){const p=function AQ(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Lp(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Lp(n.url,e.url)||!Lu(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!N1(n,e)||!Lu(n.queryParams,e.queryParams);default:return!N1(n,e)}}(u,o,o.routeConfig.runGuardsAndResolvers);p?i.canActivateChecks.push(new wz(r)):(o.data=u.data,o._resolvedData=u._resolvedData),L0(n,e,o.component?d?d.children:null:t,r,i),p&&d&&d.outlet&&d.outlet.isActivated&&i.canDeactivateChecks.push(new ZS(d.outlet.component,u))}else u&&V0(e,d,i),i.canActivateChecks.push(new wz(r)),L0(n,null,o.component?d?d.children:null:t,r,i)})(u,o[u.value.outlet],t,r.concat([u.value]),i),delete o[u.value.outlet]}),Gi(o,(u,d)=>V0(u,t.getContext(d),i)),i}function V0(n,e,t){const r=T_(n),i=n.value;Gi(r,(o,u)=>{V0(o,i.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new ZS(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function U0(n){return"function"==typeof n}function U1(n){return n instanceof cb||"EmptyError"===n?.name}const YS=Symbol("INITIAL_VALUE");function S_(){return vr(n=>J_(n.map(e=>e.pipe(_l(1),qs(YS)))).pipe((0,ht.U)(e=>{for(const t of e)if(!0!==t){if(t===YS)return YS;if(!1===t||t instanceof Fp)return t}return!0}),Ri(e=>e!==YS),_l(1)))}function Ez(n){return(0,C9.z)((0,Ur.b)(e=>{if(Vp(e))throw gz(0,e)}),(0,ht.U)(e=>!0===e))}const B1={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Cz(n,e,t,r,i){const o=H1(n,e,t);return o.matched?function zQ(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?ut(i.map(u=>{const d=D_(u,n);return Ah(function OQ(n){return n&&U0(n.canMatch)}(d)?d.canMatch(e,t):n.runInContext(()=>d(e,t)))})).pipe(S_(),Ez()):ut(!0)}(r=vz(e,r),e,t).pipe((0,ht.U)(u=>!0===u?o:{...B1})):ut(o)}function H1(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...B1}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||S9)(t,n,e);if(!i)return{...B1};const o={};Gi(i.posParams,(d,p)=>{o[p]=d.path});const u=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:u,positionalParamSegments:i.posParams??{}}}function QS(n,e,t,r,i="corrected"){if(t.length>0&&function KQ(n,e,t){return t.some(r=>JS(n,e,r)&&Ua(r)!==an)}(n,t,r)){const u=new hn(e,function WQ(n,e,t,r){const i={};i[an]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const o of t)if(""===o.path&&Ua(o)!==an){const u=new hn([],{});u._sourceSegment=n,u._segmentIndexShift=e.length,i[Ua(o)]=u}return i}(n,e,r,new hn(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function ZQ(n,e,t){return t.some(r=>JS(n,e,r))}(n,t,r)){const u=new hn(n.segments,function qQ(n,e,t,r,i,o){const u={};for(const d of r)if(JS(n,t,d)&&!i[Ua(d)]){const p=new hn([],{});p._sourceSegment=n,p._segmentIndexShift="legacy"===o?n.segments.length:e.length,u[Ua(d)]=p}return{...i,...u}}(n,e,t,r,n.children,i));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const o=new hn(n.segments,n.children);return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}function JS(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Iz(n,e,t,r){return!!(Ua(n)===r||r!==an&&JS(e,t,n))&&("**"===n.path||H1(e,n,t).matched)}function Tz(n,e,t){return 0===e.length&&!n.children[t]}const XS=!1;class eA{constructor(e){this.segmentGroup=e||null}}class Dz{constructor(e){this.urlTree=e}}function B0(n){return Kd(new eA(n))}function Sz(n){return Kd(new Dz(n))}class XQ{constructor(e,t,r,i,o){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0}apply(){const e=QS(this.urlTree.root,[],[],this.config).segmentGroup,t=new hn(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,an).pipe((0,ht.U)(o=>this.createUrlTree(zS(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Al(o=>{if(o instanceof Dz)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof eA?this.noMatchError(o):o}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,an).pipe((0,ht.U)(i=>this.createUrlTree(zS(i),e.queryParams,e.fragment))).pipe(Al(i=>{throw i instanceof eA?this.noMatchError(i):i}))}noMatchError(e){return new h.vHH(4002,XS)}createUrlTree(e,t,r){const i=I1(e);return new Fp(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,ht.U)(o=>new hn([],o))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return(0,pn.D)(i).pipe(Ml(o=>{const u=r.children[o],d=bz(t,o);return this.expandSegmentGroup(e,d,u,o).pipe((0,ht.U)(p=>({segment:p,outlet:o})))}),Wf((o,u)=>(o[u.outlet]=u.segment,o),{}),jG())}expandSegment(e,t,r,i,o,u){return(0,pn.D)(r).pipe(Ml(d=>this.expandSegmentAgainstRoute(e,t,r,d,i,o,u).pipe(Al(_=>{if(_ instanceof eA)return ut(null);throw _}))),Ma(d=>!!d),Al((d,p)=>{if(U1(d))return Tz(t,i,o)?ut(new hn([],{})):B0(t);throw d}))}expandSegmentAgainstRoute(e,t,r,i,o,u,d){return Iz(i,t,o,u)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,o,u):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,u):B0(t):B0(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,u){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const o=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Sz(o):this.lineralizeSegments(r,o).pipe((0,_i.z)(u=>{const d=new hn(u,{});return this.expandSegment(e,d,t,u,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,u){const{matched:d,consumedSegments:p,remainingSegments:_,positionalParamSegments:E}=H1(t,i,o);if(!d)return B0(t);const D=this.applyRedirectCommands(p,i.redirectTo,E);return i.redirectTo.startsWith("/")?Sz(D):this.lineralizeSegments(i,D).pipe((0,_i.z)(x=>this.expandSegment(e,t,r,x.concat(_),u,!1)))}matchSegmentAgainstRoute(e,t,r,i,o){return"**"===r.path?(e=vz(r,e),r.loadChildren?(r._loadedRoutes?ut({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,ht.U)(d=>(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,new hn(i,{})))):ut(new hn(i,{}))):Cz(t,r,i,e).pipe(vr(({matched:u,consumedSegments:d,remainingSegments:p})=>u?this.getChildConfig(e=r._injector??e,r,i).pipe((0,_i.z)(E=>{const D=E.injector??e,x=E.routes,{segmentGroup:P,slicedSegments:L}=QS(t,d,p,x),J=new hn(P.segments,P.children);if(0===L.length&&J.hasChildren())return this.expandChildren(D,x,J).pipe((0,ht.U)(et=>new hn(d,et)));if(0===x.length&&0===L.length)return ut(new hn(d,{}));const ue=Ua(r)===o;return this.expandSegment(D,J,x,L,ue?an:o,!0).pipe((0,ht.U)(We=>new hn(d.concat(We.segments),We.children)))})):B0(t)))}getChildConfig(e,t,r){return t.children?ut({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?ut({routes:t._loadedRoutes,injector:t._loadedInjector}):function GQ(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?ut(!0):ut(i.map(u=>{const d=D_(u,n);return Ah(function xQ(n){return n&&U0(n.canLoad)}(d)?d.canLoad(e,t):n.runInContext(()=>d(e,t)))})).pipe(S_(),Ez())}(e,t,r).pipe((0,_i.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,Ur.b)(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function QQ(n){return Kd(mz(XS,3))}())):ut({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ut(r);if(i.numberOfChildren>1||!i.children[an])return Kd(new h.vHH(4e3,XS));i=i.children[an]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const o=this.createSegmentGroup(e,t.root,r,i);return new Fp(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Gi(e,(i,o)=>{if("string"==typeof i&&i.startsWith(":")){const d=i.substring(1);r[o]=t[d]}else r[o]=i}),r}createSegmentGroup(e,t,r,i){const o=this.createSegments(e,t.segments,r,i);let u={};return Gi(t.children,(d,p)=>{u[p]=this.createSegmentGroup(e,d,r,i)}),new hn(o,u)}createSegments(e,t,r,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new h.vHH(4001,XS);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class tJ{}class iJ{constructor(e,t,r,i,o,u,d,p){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=d,this.urlSerializer=p}recognize(){const e=QS(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,an).pipe((0,ht.U)(t=>{if(null===t)return null;const r=new WS([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},an,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new jc(r,t),o=new fz(this.url,i);return this.inheritParamsAndData(o._root),o}))}inheritParamsAndData(e){const t=e.value,r=hz(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,pn.D)(Object.keys(r.children)).pipe(Ml(i=>{const o=r.children[i],u=bz(t,i);return this.processSegmentGroup(e,u,o,i)}),Wf((i,o)=>i&&o?(i.push(...o),i):null),function I9(n,e=!1){return(0,Wr.e)((t,r)=>{let i=0;t.subscribe((0,Wn.x)(r,o=>{const u=n(o,i++);(u||e)&&r.next(o),!u&&r.complete()}))})}(i=>null!==i),lm(null),jG(),(0,ht.U)(i=>{if(null===i)return null;const o=Az(i);return function sJ(n){n.sort((e,t)=>e.value.outlet===an?-1:t.value.outlet===an?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}))}processSegment(e,t,r,i,o){return(0,pn.D)(t).pipe(Ml(u=>this.processSegmentAgainstRoute(u._injector??e,u,r,i,o)),Ma(u=>!!u),Al(u=>{if(U1(u))return Tz(r,i,o)?ut([]):ut(null);throw u}))}processSegmentAgainstRoute(e,t,r,i,o){if(t.redirectTo||!Iz(t,r,i,o))return ut(null);let u;if("**"===t.path){const d=i.length>0?zG(i).parameters:{},p=xz(r)+i.length;u=ut({snapshot:new WS(i,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,kz(t),Ua(t),t.component??t._loadedComponent??null,t,Mz(r),p,Nz(t),p),consumedSegments:[],remainingSegments:[]})}else u=Cz(r,t,i,e).pipe((0,ht.U)(({matched:d,consumedSegments:p,remainingSegments:_,parameters:E})=>{if(!d)return null;const D=xz(r)+p.length;return{snapshot:new WS(p,E,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,kz(t),Ua(t),t.component??t._loadedComponent??null,t,Mz(r),D,Nz(t),D),consumedSegments:p,remainingSegments:_}}));return u.pipe(vr(d=>{if(null===d)return ut(null);const{snapshot:p,consumedSegments:_,remainingSegments:E}=d;e=t._injector??e;const D=t._loadedInjector??e,x=function oJ(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:P,slicedSegments:L}=QS(r,_,E,x.filter(ue=>void 0===ue.redirectTo),this.relativeLinkResolution);if(0===L.length&&P.hasChildren())return this.processChildren(D,x,P).pipe((0,ht.U)(ue=>null===ue?null:[new jc(p,ue)]));if(0===x.length&&0===L.length)return ut([new jc(p,[])]);const J=Ua(t)===o;return this.processSegment(D,x,P,L,J?an:o).pipe((0,ht.U)(ue=>null===ue?null:[new jc(p,ue)]))}))}}function aJ(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Az(n){const e=[],t=new Set;for(const r of n){if(!aJ(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Az(r.children);e.push(new jc(r.value,i))}return e.filter(r=>!t.has(r))}function Mz(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function xz(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function kz(n){return n.data||{}}function Nz(n){return n.resolve||{}}function Oz(n){return"string"==typeof n.title||null===n.title}function j1(n){return vr(e=>{const t=n(e);return t?(0,pn.D)(t).pipe((0,ht.U)(()=>e)):ut(e)})}let Pz=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===an);return r}getResolvedTitleForRoute(t){return t.data[A0]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(Fz)},providedIn:"root"}),n})(),Fz=(()=>{class n extends Pz{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Yi))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class gJ{}class _J extends class mJ{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const nA=new h.OlP("",{providedIn:"root",factory:()=>({})}),$1=new h.OlP("ROUTES");let G1=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ut(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Ah(t.loadComponent()).pipe((0,Ur.b)(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),wu(()=>{this.componentLoaders.delete(t)})),i=new HG(r,()=>new Qn.x).pipe(v1());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ut({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,ht.U)(d=>{this.onLoadEndListener&&this.onLoadEndListener(r);let p,_,E=!1;Array.isArray(d)?_=d:(p=d.create(t).injector,_=GG(p.get($1,[],h.XFs.Self|h.XFs.Optional)));return{routes:_.map(V1),injector:p}}),wu(()=>{this.childrenLoaders.delete(r)})),u=new HG(o,()=>new Qn.x).pipe(v1());return this.childrenLoaders.set(r,u),u}loadModuleFactoryOrRoutes(t){return Ah(t()).pipe((0,_i.z)(r=>r instanceof h.YKP||Array.isArray(r)?ut(r):(0,pn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.zs3),h.LFG(h.Sil))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class vJ{}class bJ{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function wJ(n){throw n}function EJ(n,e,t){return e.parse("/")}const CJ={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},IJ={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Vz(){const n=(0,h.f3M)(QG),e=(0,h.f3M)(P0),t=(0,h.f3M)(Ve),r=(0,h.f3M)(h.zs3),i=(0,h.f3M)(h.Sil),o=(0,h.f3M)($1,{optional:!0})??[],u=(0,h.f3M)(nA,{optional:!0})??{},d=(0,h.f3M)(Fz),p=(0,h.f3M)(Pz,{optional:!0}),_=(0,h.f3M)(vJ,{optional:!0}),E=(0,h.f3M)(gJ,{optional:!0}),D=new ai(null,n,e,t,r,i,GG(o));return _&&(D.urlHandlingStrategy=_),E&&(D.routeReuseStrategy=E),D.titleStrategy=p??d,function TJ(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(u,D),D}let ai=(()=>{class n{constructor(t,r,i,o,u,d,p){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=o,this.config=p,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Qn.x,this.errorHandler=wJ,this.malformedUriErrorHandler=EJ,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>ut(void 0),this.urlHandlingStrategy=new bJ,this.routeReuseStrategy=new _J,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=u.get(G1),this.configLoader.onLoadEndListener=x=>this.triggerEvent(new oQ(x)),this.configLoader.onLoadStartListener=x=>this.triggerEvent(new sQ(x)),this.ngModule=u.get(h.h0i),this.console=u.get(h.c2e);const D=u.get(h.R0b);this.isNgZoneEnabled=D instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(p),this.currentUrlTree=function M9(){return new Fp(new hn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=dz(this.currentUrlTree,this.rootComponentType),this.transitions=new qr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Ri(i=>0!==i.id),(0,ht.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),vr(i=>{let o=!1,u=!1;return ut(i).pipe((0,Ur.b)(d=>{this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),vr(d=>{const p=this.browserUrlTree.toString(),_=!this.navigated||d.extractedUrl.toString()!==p||p!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||_)&&this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return Uz(d.source)&&(this.browserUrlTree=d.extractedUrl),ut(d).pipe(vr(D=>{const x=this.transitions.getValue();return r.next(new A1(D.id,this.serializeUrl(D.extractedUrl),D.source,D.restoredState)),x!==this.transitions.getValue()?cu.E:Promise.resolve(D)}),function eJ(n,e,t,r){return vr(i=>function JQ(n,e,t,r,i){return new XQ(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,ht.U)(o=>({...i,urlAfterRedirects:o}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Ur.b)(D=>{this.currentNavigation={...this.currentNavigation,finalUrl:D.urlAfterRedirects},i.urlAfterRedirects=D.urlAfterRedirects}),function uJ(n,e,t,r,i,o){return(0,_i.z)(u=>function rJ(n,e,t,r,i,o,u="emptyOnly",d="legacy"){return new iJ(n,e,t,r,i,u,d,o).recognize().pipe(vr(p=>null===p?function nJ(n){return new ii.y(e=>e.error(n))}(new tJ):ut(p)))}(n,e,t,u.urlAfterRedirects,r.serialize(u.urlAfterRedirects),r,i,o).pipe((0,ht.U)(d=>({...u,targetSnapshot:d}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Ur.b)(D=>{if(i.targetSnapshot=D.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!D.extras.skipLocationChange){const P=this.urlHandlingStrategy.merge(D.urlAfterRedirects,D.rawUrl);this.setBrowserUrl(P,D)}this.browserUrlTree=D.urlAfterRedirects}const x=new eQ(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(D.urlAfterRedirects),D.targetSnapshot);r.next(x)}));if(_&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:x,extractedUrl:P,source:L,restoredState:J,extras:ue}=d,Ne=new A1(x,this.serializeUrl(P),L,J);r.next(Ne);const We=dz(P,this.rootComponentType).snapshot;return ut(i={...d,targetSnapshot:We,urlAfterRedirects:P,extras:{...ue,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=d.rawUrl,d.resolve(null),cu.E}),(0,Ur.b)(d=>{const p=new tQ(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(p)}),(0,ht.U)(d=>i={...d,guards:TQ(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),function FQ(n,e){return(0,_i.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:u}}=t;return 0===u.length&&0===o.length?ut({...t,guardsResult:!0}):function LQ(n,e,t,r){return(0,pn.D)(n).pipe((0,_i.z)(i=>function $Q(n,e,t,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?ut(o.map(d=>{const p=F0(e)??i,_=D_(d,p);return Ah(function NQ(n){return n&&U0(n.canDeactivate)}(_)?_.canDeactivate(n,e,t,r):p.runInContext(()=>_(n,e,t,r))).pipe(Ma())})).pipe(S_()):ut(!0)}(i.component,i.route,t,e,r)),Ma(i=>!0!==i,!0))}(u,r,i,n).pipe((0,_i.z)(d=>d&&function MQ(n){return"boolean"==typeof n}(d)?function VQ(n,e,t,r){return(0,pn.D)(e).pipe(Ml(i=>nf(function BQ(n,e){return null!==n&&e&&e(new aQ(n)),ut(!0)}(i.route.parent,r),function UQ(n,e){return null!==n&&e&&e(new uQ(n)),ut(!0)}(i.route,r),function jQ(n,e,t){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(u=>function DQ(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>BG(()=>ut(u.guards.map(p=>{const _=F0(u.node)??t,E=D_(p,_);return Ah(function kQ(n){return n&&U0(n.canActivateChild)}(E)?E.canActivateChild(r,n):_.runInContext(()=>E(r,n))).pipe(Ma())})).pipe(S_())));return ut(o).pipe(S_())}(n,i.path,t),function HQ(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ut(!0);const i=r.map(o=>BG(()=>{const u=F0(e)??t,d=D_(o,u);return Ah(function RQ(n){return n&&U0(n.canActivate)}(d)?d.canActivate(e,n):u.runInContext(()=>d(e,n))).pipe(Ma())}));return ut(i).pipe(S_())}(n,i.route,t))),Ma(i=>!0!==i,!0))}(r,o,n,e):ut(d)),(0,ht.U)(d=>({...t,guardsResult:d})))})}(this.ngModule.injector,d=>this.triggerEvent(d)),(0,Ur.b)(d=>{if(i.guardsResult=d.guardsResult,Vp(d.guardsResult))throw gz(0,d.guardsResult);const p=new nQ(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.triggerEvent(p)}),Ri(d=>!!d.guardsResult||(this.restoreHistory(d),this.cancelNavigationTransition(d,"",3),!1)),j1(d=>{if(d.guards.canActivateChecks.length)return ut(d).pipe((0,Ur.b)(p=>{const _=new rQ(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(_)}),vr(p=>{let _=!1;return ut(p).pipe(function cJ(n,e){return(0,_i.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ut(t);let o=0;return(0,pn.D)(i).pipe(Ml(u=>function dJ(n,e,t,r){const i=n.routeConfig,o=n._resolve;return void 0!==i?.title&&!Oz(i)&&(o[A0]=i.title),function hJ(n,e,t,r){const i=function fJ(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return ut({});const o={};return(0,pn.D)(i).pipe((0,_i.z)(u=>function pJ(n,e,t,r){const i=F0(e)??r,o=D_(n,i);return Ah(o.resolve?o.resolve(e,t):i.runInContext(()=>o(e,t)))}(n[u],e,t,r).pipe(Ma(),(0,Ur.b)(d=>{o[u]=d}))),b1(1),function T9(n){return(0,ht.U)(()=>n)}(o),Al(u=>U1(u)?cu.E:Kd(u)))}(o,n,e,r).pipe((0,ht.U)(u=>(n._resolvedData=u,n.data=hz(n,t).resolve,i&&Oz(i)&&(n.data[A0]=i.title),null)))}(u.route,r,n,e)),(0,Ur.b)(()=>o++),b1(1),(0,_i.z)(u=>o===i.length?ut(t):cu.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Ur.b)({next:()=>_=!0,complete:()=>{_||(this.restoreHistory(p),this.cancelNavigationTransition(p,"",2))}}))}),(0,Ur.b)(p=>{const _=new iQ(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(_)}))}),j1(d=>{const p=_=>{const E=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&E.push(this.configLoader.loadComponent(_.routeConfig).pipe((0,Ur.b)(D=>{_.component=D}),(0,ht.U)(()=>{})));for(const D of _.children)E.push(...p(D));return E};return J_(p(d.targetSnapshot.root)).pipe(lm(),_l(1))}),j1(()=>this.afterPreactivation()),(0,ht.U)(d=>{const p=function pQ(n,e,t){const r=O0(n,e._root,t?t._root:void 0);return new cz(r,e)}(this.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return i={...d,targetRouterState:p}}),(0,Ur.b)(d=>{this.currentUrlTree=d.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),this.routerState=d.targetRouterState,"deferred"===this.urlUpdateStrategy&&(d.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,d),this.browserUrlTree=d.urlAfterRedirects)}),((n,e,t)=>(0,ht.U)(r=>(new IQ(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,d=>this.triggerEvent(d)),(0,Ur.b)({next(){o=!0},complete(){o=!0}}),wu(()=>{o||u||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Al(d=>{if(u=!0,yz(d)){_z(d)||(this.navigated=!0,this.restoreHistory(i,!0));const p=new qS(i.id,this.serializeUrl(i.extractedUrl),d.message,d.cancellationCode);if(r.next(p),_z(d)){const _=this.urlHandlingStrategy.merge(d.url,this.rawUrlTree),E={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Uz(i.source)};this.scheduleNavigation(_,"imperative",null,E,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const p=new az(i.id,this.serializeUrl(i.extractedUrl),d,i.targetSnapshot??void 0);r.next(p);try{i.resolve(this.errorHandler(d))}catch(_){i.reject(_)}}return cu.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},o=t.state?.navigationId?t.state:null;if(o){const d={...o};delete d.navigationId,delete d.\u0275routerPageId,0!==Object.keys(d).length&&(i.state=d)}const u=this.parseUrl(t.url);this.scheduleNavigation(u,r,o,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(V1),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:o,fragment:u,queryParamsHandling:d,preserveFragment:p}=r,_=i||this.routerState.root,E=p?this.currentUrlTree.fragment:u;let D=null;switch(d){case"merge":D={...this.currentUrlTree.queryParams,...o};break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=o||null}return null!==D&&(D=this.removeEmptyProps(D)),K9(_,this.currentUrlTree,t,D,E??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Vp(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function DJ(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new h.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...CJ}:!1===r?{...IJ}:r,Vp(t))return WG(this.currentUrlTree,t,i);const o=this.parseUrl(t);return WG(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const o=t[i];return null!=o&&(r[i]=o),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Up(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,o,u){if(this.disposed)return Promise.resolve(!1);let d,p,_;u?(d=u.resolve,p=u.reject,_=u.promise):_=new Promise((x,P)=>{d=x,p=P});const E=++this.navigationId;let D;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),D=i&&i.\u0275routerPageId?i.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):D=0,this.setTransition({id:E,targetPageId:D,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:o,resolve:d,reject:p,promise:_,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),_.catch(x=>Promise.reject(x))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),o={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",o):this.location.go(i,"",o)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const o=new qS(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:function(){return Vz()},providedIn:"root"}),n})();function Uz(n){return"imperative"!==n}let iA=(()=>{class n{constructor(t,r,i,o,u){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=u,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new Qn.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,h.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,h.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,h.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(ai),h.Y36(Bp),h.$8M("tabindex"),h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&h.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[h.TTD]}),n})(),Mh=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new Qn.x,this.subscription=t.events.subscribe(o=>{o instanceof Up&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=(0,h.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,h.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,h.D6c)(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,o,u){return!!(0!==t||r||i||o||u||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(ai),h.Y36(Bp),h.Y36(Te))},n.\u0275dir=h.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&h.NdJ("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&t&&h.uIk("target",r.target)("href",r.href,h.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[h.TTD]}),n})(),A_=(()=>{class n{constructor(t,r,i,o,u,d){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=u,this.linkWithHref=d,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new h.vpe,this.routerEventsSubscription=t.events.subscribe(p=>{p instanceof Up&&this.update()})}ngAfterContentInit(){ut(this.links.changes,this.linksWithHrefs.changes,ut(null)).pipe((0,hc.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,pn.D)(t).pipe((0,hc.J)()).subscribe(r=>{this.isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function SJ(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(ai),h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(h.sBO),h.Y36(iA,8),h.Y36(Mh,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,i){if(1&t&&(h.Suo(i,iA,5),h.Suo(i,Mh,5)),2&t){let o;h.iGM(o=h.CRH())&&(r.links=o),h.iGM(o=h.CRH())&&(r.linksWithHrefs=o)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[h.TTD]}),n})();class Bz{}let AJ=(()=>{class n{constructor(t,r,i,o,u){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=u}setUpPreloading(){this.subscription=this.router.events.pipe(Ri(t=>t instanceof Up),Ml(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=(0,h.MMx)(o.providers,t,`Route: ${o.path}`));const u=o._injector??t,d=o._loadedInjector??u;o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent?i.push(this.preloadConfig(u,o)):(o.children||o._loadedRoutes)&&i.push(this.processRoutes(d,o.children??o._loadedRoutes))}return(0,pn.D)(i).pipe((0,hc.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):ut(null);const o=i.pipe((0,_i.z)(u=>null===u?ut(void 0):(r._loadedRoutes=u.routes,r._loadedInjector=u.injector,this.processRoutes(u.injector??t,u.routes))));if(r.loadComponent&&!r._loadedComponent){const u=this.loader.loadComponent(r);return(0,pn.D)([o,u]).pipe((0,hc.J)())}return o})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ai),h.LFG(h.Sil),h.LFG(h.lqb),h.LFG(Bz),h.LFG(G1))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const z1=new h.OlP("");let Hz=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof A1?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Up&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof lz&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new lz(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function M_(n,e){return{\u0275kind:n,\u0275providers:e}}function q1(n){return[{provide:$1,multi:!0,useValue:n}]}function $z(){const n=(0,h.f3M)(h.zs3);return e=>{const t=n.get(h.z2F);if(e!==t.components[0])return;const r=n.get(ai),i=n.get(Gz);1===n.get(W1)&&r.initialNavigation(),n.get(zz,null,h.XFs.Optional)?.setUpPreloading(),n.get(z1,null,h.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.next(),i.complete()}}const Gz=new h.OlP("",{factory:()=>new Qn.x}),W1=new h.OlP("",{providedIn:"root",factory:()=>1});const zz=new h.OlP("");function kJ(n){return M_(0,[{provide:zz,useExisting:AJ},{provide:Bz,useExisting:n}])}const qz=new h.OlP("ROUTER_FORROOT_GUARD"),NJ=[Ve,{provide:QG,useClass:E1},{provide:ai,useFactory:Vz},P0,{provide:Bp,useFactory:function jz(n){return n.routerState.root},deps:[ai]},G1];function OJ(){return new h.PXZ("Router",ai)}let Wz=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[NJ,[],q1(t),{provide:qz,useFactory:VJ,deps:[[ai,new h.FiY,new h.tp0]]},{provide:nA,useValue:r||{}},r?.useHash?{provide:Te,useClass:st}:{provide:Te,useClass:it},{provide:z1,useFactory:()=>{const n=(0,h.f3M)(ai),e=(0,h.f3M)(Qc),t=(0,h.f3M)(nA);return t.scrollOffset&&e.setOffset(t.scrollOffset),new Hz(n,e,t)}},r?.preloadingStrategy?kJ(r.preloadingStrategy).\u0275providers:[],{provide:h.PXZ,multi:!0,useFactory:OJ},r?.initialNavigation?UJ(r):[],[{provide:Kz,useFactory:$z},{provide:h.tb,multi:!0,useExisting:Kz}]]}}static forChild(t){return{ngModule:n,providers:[q1(t)]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(qz,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[F1]}),n})();function VJ(n){return"guarded"}function UJ(n){return["disabled"===n.initialNavigation?M_(3,[{provide:h.ip1,multi:!0,useFactory:()=>{const e=(0,h.f3M)(ai);return()=>{e.setUpLocationChangeListener()}}},{provide:W1,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?M_(2,[{provide:W1,useValue:0},{provide:h.ip1,multi:!0,deps:[h.zs3],useFactory:e=>{const t=e.get(W,Promise.resolve(null));let r=!1;return()=>t.then(()=>new Promise(o=>{const u=e.get(ai),d=e.get(Gz);(function i(o){e.get(ai).events.pipe(Ri(d=>d instanceof Up||d instanceof qS||d instanceof az),(0,ht.U)(d=>d instanceof Up||d instanceof qS&&(0===d.code||1===d.code)&&null),Ri(d=>null!==d),_l(1)).subscribe(()=>{o()})})(()=>{o(!0),r=!0}),u.afterPreactivation=()=>(o(!0),r||d.closed?ut(void 0):d),u.initialNavigation()}))}}]).\u0275providers:[]]}const Kz=new h.OlP("");var HJ=U(8554);let xh=(()=>{class n{constructor(t,r,i,o){this.afs=t,this.auth=r,this.router=i,this.ngZone=o,this.auth.authState.subscribe(u=>{u?(this.userData=u,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}signIn(t,r){return this.auth.signInWithEmailAndPassword(t,r).then(i=>{this.setUserData(i.user),this.auth.authState.subscribe(o=>{o&&this.router.navigate(["painel"])})}).catch(i=>{console.log("Something went wrong: ",i.message)})}setUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}signUp(t,r){return this.auth.createUserWithEmailAndPassword(t,r).then(i=>{this.sendVerificationMail(),this.setUserData(i.user)}).catch(i=>{console.log("Something went wrong: ",i)})}sendVerificationMail(){return this.auth.currentUser.then(t=>t.sendEmailVerification()).then(()=>{this.router.navigate(["verificar-email"])})}forgotPassword(t){return this.auth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(r=>{window.alert(r)})}get isLoggedIn(){const t=this.userData;return!!t&&!1!==t.emailVerified}googleLogin(){var t=new HJ.Q;return this.oAuthLogin(t).then(r=>{console.log("Sucess",r),this.router.navigate(["painel"])}).catch(r=>{console.log("Something went wrong: ",r)})}signOut(){this.auth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["/"])})}oAuthLogin(t){return this.auth.signInWithPopup(t).then(r=>(this.setUserData(r.user),r)).catch(r=>{console.log("Something went wrong: ",r)})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(vj),h.LFG(zf),h.LFG(ai),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),jJ=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){const i=this.authService.isLoggedIn;return console.log({isLoggedIn:i}),!0!==i&&this.router.navigate(["login"]),!0}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(xh),h.LFG(ai))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),$J=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(xh))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-email-login"]],decls:30,vars:0,consts:[[1,"container"],[1,"mat-h3"],[1,"my-form"],["appearance","fill",1,"full-width"],["matInput","","value","","required",""],["userEmail",""],["matInput","","type","password","required",""],["userPassword",""],["mat-raised-button","",3,"click"],[1,"or"],[1,"orInner"],["svgIcon","google_logo",2,"width","40px","height","24px"],[1,"forgotPassword"],["routerLink","/esqueceu-senha","routerLinkActive","active"],[1,"redirectToLogin"],["routerLink","/cadastro","routerLinkActive","active"]],template:function(t,r){if(1&t){const i=h.EpF();h.TgZ(0,"div",0)(1,"h3",1),h._uU(2,"Fa\xe7a o Login"),h.qZA(),h.TgZ(3,"form",2)(4,"mat-form-field",3)(5,"mat-label"),h._uU(6,"Email"),h.qZA(),h._UZ(7,"input",4,5),h.qZA(),h.TgZ(9,"mat-form-field",3)(10,"mat-label"),h._uU(11,"Senha"),h.qZA(),h._UZ(12,"input",6,7),h.qZA()(),h.TgZ(14,"button",8),h.NdJ("click",function(){h.CHM(i);const u=h.MAs(8),d=h.MAs(13);return h.KtG(r.authService.signIn(u.value,d.value))}),h._uU(15," Entrar "),h.qZA(),h.TgZ(16,"div",9)(17,"span",10),h._uU(18,"ou"),h.qZA()(),h.TgZ(19,"button",8),h.NdJ("click",function(){return r.authService.googleLogin()}),h._UZ(20,"mat-icon",11),h._uU(21," Entrar com conta Google "),h.qZA(),h.TgZ(22,"div",12)(23,"a",13),h._uU(24,"Esqueceu a senha?"),h.qZA()(),h.TgZ(25,"div",14)(26,"span"),h._uU(27,"N\xe3o tem um cadastro? "),h.TgZ(28,"a",15),h._uU(29,"Cadastrar"),h.qZA()()()()}},dependencies:[Mh,A_,Sd,jI,Wd,Zv,am],styles:[".my-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%;display:flex;flex-direction:column}.full-width[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]{margin-top:10px;width:100%;display:flex;flex-direction:column;align-items:center}.forgotPassword[_ngcontent-%COMP%]{margin-top:15px}"]}),n})(),GJ=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(xh))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-esqueceu-senha"]],decls:18,vars:0,consts:[[1,"container"],[1,"mat-h2"],[1,"text-center"],[1,"my-form"],["appearance","fill",1,"full-width"],["matInput","","value","","required",""],["userEmail",""],["mat-raised-button","",3,"click"],[1,"redirectToLogin"],["routerLink","/login","routerLinkActive","active"]],template:function(t,r){if(1&t){const i=h.EpF();h.TgZ(0,"div",0)(1,"h2",1),h._uU(2,"Recuperar Senha"),h.qZA(),h.TgZ(3,"p",2),h._uU(4,"Informe o email utilizado no cadastro"),h.qZA(),h.TgZ(5,"form",3)(6,"mat-form-field",4)(7,"mat-label"),h._uU(8,"Email"),h.qZA(),h._UZ(9,"input",5,6),h.qZA()(),h.TgZ(11,"button",7),h.NdJ("click",function(){h.CHM(i);const u=h.MAs(10);return h.KtG(r.authService.forgotPassword(u.value))}),h._uU(12," Recuperar "),h.qZA(),h.TgZ(13,"div",8)(14,"span"),h._uU(15,"Voltar e fazer "),h.TgZ(16,"a",9),h._uU(17,"Login?"),h.qZA()()()()}},dependencies:[Mh,A_,Sd,jI,Wd,Zv],styles:[".my-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%;display:flex;flex-direction:column}.full-width[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]{margin-top:10px;width:100%;display:flex;flex-direction:column;align-items:center}.redirectToLogin[_ngcontent-%COMP%]{margin-top:15px}"]}),n})(),zJ=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}googleLogin(){this.authService.googleLogin()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(xh))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-login"]],decls:15,vars:0,consts:[[1,"container"],[1,"form-container"],["mat-raised-button","",1,"google",3,"click"],["svgIcon","google_logo",2,"width","40px","height","24px"],[1,"or"],[1,"orInner"],["mat-raised-button","","routerLink","/email-login",1,"email"],[1,"links"],["routerLink","/cadastro","routerLinkActive","active",1,"create-account-txt"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"button",2),h.NdJ("click",function(){return r.googleLogin()}),h._UZ(3,"mat-icon",3),h._uU(4," Entrar com conta Google "),h.qZA(),h.TgZ(5,"div",4)(6,"span",5),h._uU(7,"ou"),h.qZA()(),h.TgZ(8,"button",6),h._uU(9," Logar com Email "),h.qZA(),h.TgZ(10,"div",7)(11,"a",8),h._uU(12,"N\xe3o tem cadastro? "),h.TgZ(13,"strong"),h._uU(14,"Crie um"),h.qZA()()()()())},dependencies:[iA,Mh,A_,Sd,am],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:center}.form-container[_ngcontent-%COMP%]{margin:20px;display:flex;flex-direction:column;align-items:center}.form-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex-basis:20px}.links[_ngcontent-%COMP%]{margin-top:10px}"]}),n})();function qJ(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div")(1,"ul")(2,"li"),h._uU(3," Email: "),h.TgZ(4,"strong"),h._uU(5),h.qZA()(),h.TgZ(6,"li"),h._uU(7," Name: "),h.TgZ(8,"strong"),h._uU(9),h.qZA()(),h.TgZ(10,"li"),h._uU(11," Email verified: "),h.TgZ(12,"strong"),h._uU(13),h.qZA()(),h.TgZ(14,"li"),h._uU(15," Uid: "),h.TgZ(16,"strong"),h._uU(17),h.qZA()()(),h.TgZ(18,"button",2),h.NdJ("click",function(){h.CHM(t);const i=h.oxw();return h.KtG(i.authService.signOut())}),h._uU(19,"Sair"),h.qZA()()}if(2&n){const t=e.ngIf;h.xp6(5),h.Oqu(t.email),h.xp6(4),h.Oqu(t.displayName?t.displayName:"User"),h.xp6(4),h.Oqu(t.emailVerified),h.xp6(4),h.Oqu(t.uid)}}let WJ=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(xh))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-painel"]],decls:2,vars:1,consts:[[1,"container"],[4,"ngIf"],["mat-raised-button","",3,"click"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0),h.YNc(1,qJ,20,4,"div",1),h.qZA()),2&t&&(h.xp6(1),h.Q6J("ngIf",r.authService.userData))},dependencies:[$n,Sd],styles:["ul[_ngcontent-%COMP%]{list-style:none}.container[_ngcontent-%COMP%]{margin-top:10px;width:100%;display:flex;flex-direction:column;align-items:center}"]}),n})(),KJ=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-perfil"]],decls:2,vars:0,template:function(t,r){1&t&&(h.TgZ(0,"p"),h._uU(1,"perfil works!"),h.qZA())}}),n})(),ZJ=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(xh))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-registro"]],decls:27,vars:0,consts:[[1,"container"],[1,"mat-h3"],[1,"my-form"],["appearance","fill",1,"full-width"],["matInput","","type","email","value","","required",""],["userEmail",""],["matInput","","type","password","required",""],["userPassword",""],["mat-raised-button","",1,"google",3,"click"],[1,"or"],[1,"orInner"],["svgIcon","google_logo",2,"width","40px","height","24px"],[1,"redirectToLogin"],["routerLink","/login","routerLinkActive","active"]],template:function(t,r){if(1&t){const i=h.EpF();h.TgZ(0,"div",0)(1,"h3",1),h._uU(2,"Fa\xe7a o seu cadastro"),h.qZA(),h.TgZ(3,"form",2)(4,"mat-form-field",3)(5,"mat-label"),h._uU(6,"Endere\xe7o de Email"),h.qZA(),h._UZ(7,"input",4,5),h.qZA(),h.TgZ(9,"mat-form-field",3)(10,"mat-label"),h._uU(11,"Senha"),h.qZA(),h._UZ(12,"input",6,7),h.qZA()(),h.TgZ(14,"button",8),h.NdJ("click",function(){h.CHM(i);const u=h.MAs(8),d=h.MAs(13);return h.KtG(r.authService.signUp(u.value,d.value))}),h._uU(15," Cadastrar "),h.qZA(),h.TgZ(16,"div",9)(17,"span",10),h._uU(18,"ou"),h.qZA()(),h.TgZ(19,"button",8),h.NdJ("click",function(){return r.authService.googleLogin()}),h._UZ(20,"mat-icon",11),h._uU(21," Continuar com conta Google "),h.qZA(),h.TgZ(22,"div",12)(23,"span"),h._uU(24,"J\xe1 possui um cadastro? "),h.TgZ(25,"a",13),h._uU(26,"Fa\xe7a o Login"),h.qZA()()()()}},dependencies:[Mh,A_,Sd,jI,Wd,Zv,am],styles:[".my-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%;display:flex;flex-direction:column}.full-width[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]{margin-top:10px;width:100%;display:flex;flex-direction:column;align-items:center}.redirectToLogin[_ngcontent-%COMP%]{margin-top:15px}"]}),n})();function YJ(n,e){if(1&n&&(h.TgZ(0,"div")(1,"p",6),h._uU(2," N\xf3s enviamos um email de confirmacao para "),h.TgZ(3,"strong"),h._uU(4),h.qZA(),h._uU(5,". "),h.qZA(),h.TgZ(6,"p",6),h._uU(7," Para regularizar seu acesso confira seu email e click no link para verificar seu email. "),h.qZA()()),2&n){const t=e.ngIf;h.xp6(4),h.Oqu(t.email)}}const QJ=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"login",component:zJ},{path:"cadastro",component:ZJ},{path:"perfil",component:KJ},{path:"email-login",component:$J},{path:"painel",component:WJ,canActivate:[jJ]},{path:"esqueceu-senha",component:GJ},{path:"verificar-email",component:(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(xh))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-verificar-email"]],decls:11,vars:1,consts:[[1,"container"],[1,"mat-h2"],[4,"ngIf"],["mat-raised-button","",3,"click"],[1,"redirectToLogin","text-center"],["routerLink","/login","routerLinkActive","active"],[1,"text-center"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"h2",1),h._uU(2,"Obrigado por se cadastrar"),h.qZA(),h.YNc(3,YJ,8,1,"div",2),h.TgZ(4,"button",3),h.NdJ("click",function(){return r.authService.sendVerificationMail()}),h._uU(5," Reenviar verifica\xe7\xe3o "),h.qZA(),h.TgZ(6,"div",4)(7,"span"),h._uU(8,"Voltar e fazer "),h.TgZ(9,"a",5),h._uU(10,"Login?"),h.qZA()()()()),2&t&&(h.xp6(3),h.Q6J("ngIf",r.authService.userData))},dependencies:[$n,Mh,A_,Sd],styles:[".my-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%;display:flex;flex-direction:column}.full-width[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]{margin-top:10px;width:100%;display:flex;flex-direction:column;align-items:center}.redirectToLogin[_ngcontent-%COMP%]{margin-top:15px}"]}),n})()}];let JJ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Wz.forRoot(QJ),Wz]}),n})();const K1_firebaseConfig={apiKey:"AIzaSyDgzRquxls0_dgaA7t8UwnYXDhZ7416imI",authDomain:"curriculos-seve.firebaseapp.com",databaseURL:"https://curriculos-seve-default-rtdb.firebaseio.com",projectId:"curriculos-seve",storageBucket:"curriculos-seve.appspot.com",messagingSenderId:"963696035317",appId:"1:963696035317:web:92249188d6af0697164cbc",measurementId:"G-NKH58G9F4P"};let XJ=(()=>{class n{constructor(t,r){this.matIconRegistry=t,this.domSanitizer=r,this.title="curriculo-facil",this.matIconRegistry.addSvgIcon("google_logo",this.domSanitizer.bypassSecurityTrustResourceUrl("/curriculo-facil/assets/svg/google.svg"))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Lf),h.Y36(Us))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:5,vars:0,consts:[[1,"mat-body"]],template:function(t,r){1&t&&(h.TgZ(0,"mat-toolbar")(1,"span"),h._uU(2,"Curr\xedculo F\xe1cil"),h.qZA()(),h.TgZ(3,"div",0),h._UZ(4,"router-outlet"),h.qZA())},dependencies:[P1,tM]}),n})(),eX=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[XJ]}),n.\u0275inj=h.cJS({providers:[xh],imports:[yo,JJ,YM,rM,LE,cR,TR,vR,Nr.hO.initializeApp(K1_firebaseConfig),XR,h5,$q,E9]}),n})();(0,h.G48)(),al().bootstrapModule(eX).catch(n=>console.error(n))},5867:(mt,ke,U)=>{U.d(ke,{C6:()=>h.getApps,Mq:()=>h.getApp});var h=U(9681);(0,h.registerVersion)("firebase","9.9.4","app")},127:(mt,ke,U)=>{U.d(ke,{Z:()=>h.Z});var h=U(3942);h.Z.registerVersion("firebase","9.9.4","app-compat")},5881:(mt,ke,U)=>{U.r(ke);var h=U(5861),j=U(3942),O=U(8554),ce=U(2090),he=(U(9681),U(1877),U(4859));function _e(){return window}function K(){return(K=(0,h.Z)(function*(se,G,q){var Ie;const{BuildInfo:Ye}=_e();(0,O.aq)(G.sessionId,"AuthEvent did not contain a session ID");const Et=yield ve(G.sessionId),At={};return(0,O.ar)()?At.ibi=Ye.packageName:(0,O.as)()?At.apn=Ye.packageName:(0,O.at)(se,"operation-not-supported-in-this-environment"),Ye.displayName&&(At.appDisplayName=Ye.displayName),At.sessionId=Et,(0,O.au)(se,q,G.type,void 0,null!==(Ie=G.eventId)&&void 0!==Ie?Ie:void 0,At)})).apply(this,arguments)}function qe(){return(qe=(0,h.Z)(function*(se){const{BuildInfo:G}=_e(),q={};(0,O.ar)()?q.iosBundleId=G.packageName:(0,O.as)()?q.androidPackageName=G.packageName:(0,O.at)(se,"operation-not-supported-in-this-environment"),yield(0,O.av)(se,q)})).apply(this,arguments)}function ct(){return(ct=(0,h.Z)(function*(se,G,q){const{cordova:Ie}=_e();let Ye=()=>{};try{yield new Promise((Et,At)=>{let Ue=null;function lt(){var Bt;Et();const vn=null===(Bt=Ie.plugins.browsertab)||void 0===Bt?void 0:Bt.close;"function"==typeof vn&&vn(),"function"==typeof q?.close&&q.close()}function Xt(){Ue||(Ue=window.setTimeout(()=>{At((0,O.aw)(se,"redirect-cancelled-by-user"))},2e3))}function On(){"visible"===document?.visibilityState&&Xt()}G.addPassiveListener(lt),document.addEventListener("resume",Xt,!1),(0,O.as)()&&document.addEventListener("visibilitychange",On,!1),Ye=()=>{G.removePassiveListener(lt),document.removeEventListener("resume",Xt,!1),document.removeEventListener("visibilitychange",On,!1),Ue&&window.clearTimeout(Ue)}})}finally{Ye()}})).apply(this,arguments)}function ve(se){return it.apply(this,arguments)}function it(){return(it=(0,h.Z)(function*(se){const G=st(se),q=yield crypto.subtle.digest("SHA-256",G);return Array.from(new Uint8Array(q)).map(Ye=>Ye.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function st(se){if((0,O.aq)(/[0-9a-zA-Z]+/.test(se),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(se);const G=new ArrayBuffer(se.length),q=new Uint8Array(G);for(let Ie=0;Ie<se.length;Ie++)q[Ie]=se.charCodeAt(Ie);return q}class Oe extends O.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(G=>{this.resolveInialized=G})}addPassiveListener(G){this.passiveListeners.add(G)}removePassiveListener(G){this.passiveListeners.delete(G)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(G){return this.resolveInialized(),this.passiveListeners.forEach(q=>q(G)),super.onEvent(G)}initialized(){var G=this;return(0,h.Z)(function*(){yield G.initPromise})()}}function le(se){return pe.apply(this,arguments)}function pe(){return(pe=(0,h.Z)(function*(se){const G=yield ie()._get(ye(se));return G&&(yield ie()._remove(ye(se))),G})).apply(this,arguments)}function te(){const se=[],G="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let q=0;q<20;q++){const Ie=Math.floor(Math.random()*G.length);se.push(G.charAt(Ie))}return se.join("")}function ie(){return(0,O.ay)(O.b)}function ye(se){return(0,O.az)("authEvent",se.config.apiKey,se.name)}function $e(se){if(!se?.includes("?"))return{};const[G,...q]=se.split("?");return(0,ce.zd)(q.join("?"))}function Qe(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,O.aw)("no-auth-event")}}function Kt(){var se;return(null===(se=self?.location)||void 0===se?void 0:se.protocol)||null}function Cr(se=(0,ce.z$)()){return!("file:"!==Kt()&&"ionic:"!==Kt()&&"capacitor:"!==Kt()||!se.toLowerCase().match(/iphone|ipad|ipod|android/))}function zi(){try{const se=self.localStorage,G=O.aI();if(se)return se.setItem(G,"1"),se.removeItem(G),!function ls(se=(0,ce.z$)()){return function Ir(){return(0,ce.w1)()&&11===document?.documentMode}()||function Nn(se=(0,ce.z$)()){return/Edge\/\d+/.test(se)}(se)}()||(0,ce.hl)()}catch{return Qr()&&(0,ce.hl)()}return!1}function Qr(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Hn(){return(function jt(){return"http:"===Kt()||"https:"===Kt()}()||(0,ce.ru)()||Cr())&&!function ro(){return(0,ce.b$)()||(0,ce.UG)()}()&&zi()&&!Qr()}function Si(){return Cr()&&typeof document<"u"}function ot(){return(ot=(0,h.Z)(function*(){return!!Si()&&new Promise(se=>{const G=setTimeout(()=>{se(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(G),se(!0)})})})).apply(this,arguments)}const jn={LOCAL:"local",NONE:"none",SESSION:"session"},yn=O.ax,mr="persistence";function An(se){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,h.Z)(function*(se){yield se._initializationPromise;const G=_t(),q=O.az(mr,se.config.apiKey,se.name);G&&G.setItem(q,se._getPersistence())})).apply(this,arguments)}function _t(){var se;try{return(null===(se=function gr(){return typeof window<"u"?window:null}())||void 0===se?void 0:se.sessionStorage)||null}catch{return null}}const yt=O.ax;class Ft{constructor(){this.browserResolver=O.ay(O.k),this.cordovaResolver=O.ay(class tn{constructor(){this._redirectPersistence=O.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=O.aB,this._overrideRedirectResult=O.aC}_initialize(G){var q=this;return(0,h.Z)(function*(){const Ie=G._key();let Ye=q.eventManagers.get(Ie);return Ye||(Ye=new Oe(G),q.eventManagers.set(Ie,Ye),q.attachCallbackListeners(G,Ye)),Ye})()}_openPopup(G){(0,O.at)(G,"operation-not-supported-in-this-environment")}_openRedirect(G,q,Ie,Ye){var Et=this;return(0,h.Z)(function*(){!function Te(se){var G,q,Ie,Ye,Et,At,Ue,lt,Xt,On;const Bt=_e();(0,O.ax)("function"==typeof(null===(G=Bt?.universalLinks)||void 0===G?void 0:G.subscribe),se,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,O.ax)(typeof(null===(q=Bt?.BuildInfo)||void 0===q?void 0:q.packageName)<"u",se,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,O.ax)("function"==typeof(null===(Et=null===(Ye=null===(Ie=Bt?.cordova)||void 0===Ie?void 0:Ie.plugins)||void 0===Ye?void 0:Ye.browsertab)||void 0===Et?void 0:Et.openUrl),se,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.ax)("function"==typeof(null===(lt=null===(Ue=null===(At=Bt?.cordova)||void 0===At?void 0:At.plugins)||void 0===Ue?void 0:Ue.browsertab)||void 0===lt?void 0:lt.isAvailable),se,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.ax)("function"==typeof(null===(On=null===(Xt=Bt?.cordova)||void 0===Xt?void 0:Xt.InAppBrowser)||void 0===On?void 0:On.open),se,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(G);const At=yield Et._initialize(G);yield At.initialized(),At.resetRedirect(),(0,O.aD)(),yield Et._originValidation(G);const Ue=function Ae(se,G,q=null){return{type:G,eventId:q,urlResponse:null,sessionId:te(),postBody:null,tenantId:se.tenantId,error:(0,O.aw)(se,"no-auth-event")}}(G,Ie,Ye);yield function Ze(se,G){return ie()._set(ye(se),G)}(G,Ue);const lt=yield function W(se,G,q){return K.apply(this,arguments)}(G,Ue,q),Xt=yield function Le(se){const{cordova:G}=_e();return new Promise(q=>{G.plugins.browsertab.isAvailable(Ie=>{let Ye=null;Ie?G.plugins.browsertab.openUrl(se):Ye=G.InAppBrowser.open(se,(0,O.ap)()?"_blank":"_system","location=yes"),q(Ye)})})}(lt);return function Se(se,G,q){return ct.apply(this,arguments)}(G,At,Xt)})()}_isIframeWebStorageSupported(G,q){throw new Error("Method not implemented.")}_originValidation(G){const q=G._key();return this.originValidationPromises[q]||(this.originValidationPromises[q]=function ne(se){return qe.apply(this,arguments)}(G)),this.originValidationPromises[q]}attachCallbackListeners(G,q){const{universalLinks:Ie,handleOpenURL:Ye,BuildInfo:Et}=_e(),At=setTimeout((0,h.Z)(function*(){yield le(G),q.onEvent(Qe())}),500),Ue=function(){var On=(0,h.Z)(function*(Bt){clearTimeout(At);const vn=yield le(G);let us=null;vn&&Bt?.url&&(us=function Ee(se,G){var q,Ie;const Ye=function je(se){const G=$e(se),q=G.link?decodeURIComponent(G.link):void 0,Ie=$e(q).link,Ye=G.deep_link_id?decodeURIComponent(G.deep_link_id):void 0;return $e(Ye).link||Ye||Ie||q||se}(G);if(Ye.includes("/__/auth/callback")){const Et=$e(Ye),At=Et.firebaseError?function de(se){try{return JSON.parse(se)}catch{return null}}(decodeURIComponent(Et.firebaseError)):null,Ue=null===(Ie=null===(q=At?.code)||void 0===q?void 0:q.split("auth/"))||void 0===Ie?void 0:Ie[1],lt=Ue?(0,O.aw)(Ue):null;return lt?{type:se.type,eventId:se.eventId,tenantId:se.tenantId,error:lt,urlResponse:null,sessionId:null,postBody:null}:{type:se.type,eventId:se.eventId,tenantId:se.tenantId,sessionId:se.sessionId,urlResponse:Ye,postBody:null}}return null}(vn,Bt.url)),q.onEvent(us||Qe())});return function(vn){return On.apply(this,arguments)}}();typeof Ie<"u"&&"function"==typeof Ie.subscribe&&Ie.subscribe(null,Ue);const lt=Ye,Xt=`${Et.packageName.toLowerCase()}://`;_e().handleOpenURL=function(){var On=(0,h.Z)(function*(Bt){if(Bt.toLowerCase().startsWith(Xt)&&Ue({url:Bt}),"function"==typeof lt)try{lt(Bt)}catch(vn){console.error(vn)}});return function(Bt){return On.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=O.a,this._completeRedirectFn=O.aB,this._overrideRedirectResult=O.aC}_initialize(G){var q=this;return(0,h.Z)(function*(){return yield q.selectUnderlyingResolver(),q.assertedUnderlyingResolver._initialize(G)})()}_openPopup(G,q,Ie,Ye){var Et=this;return(0,h.Z)(function*(){return yield Et.selectUnderlyingResolver(),Et.assertedUnderlyingResolver._openPopup(G,q,Ie,Ye)})()}_openRedirect(G,q,Ie,Ye){var Et=this;return(0,h.Z)(function*(){return yield Et.selectUnderlyingResolver(),Et.assertedUnderlyingResolver._openRedirect(G,q,Ie,Ye)})()}_isIframeWebStorageSupported(G,q){this.assertedUnderlyingResolver._isIframeWebStorageSupported(G,q)}_originValidation(G){return this.assertedUnderlyingResolver._originValidation(G)}get _shouldInitProactively(){return Si()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return yt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var G=this;return(0,h.Z)(function*(){if(G.underlyingResolver)return;const q=yield function qi(){return ot.apply(this,arguments)}();G.underlyingResolver=q?G.cordovaResolver:G.browserResolver})()}}function $r(se){return se.unwrap()}function Tr(se){return Lr(se)}function Lr(se){const{_tokenResponse:G}=se instanceof ce.ZR?se.customData:se;if(!G)return null;if(!(se instanceof ce.ZR)&&"temporaryProof"in G&&"phoneNumber"in G)return O.P.credentialFromResult(se);const q=G.providerId;if(!q||q===O.o.PASSWORD)return null;let Ie;switch(q){case O.o.GOOGLE:Ie=O.Q;break;case O.o.FACEBOOK:Ie=O.N;break;case O.o.GITHUB:Ie=O.T;break;case O.o.TWITTER:Ie=O.W;break;default:const{oauthIdToken:Ye,oauthAccessToken:Et,oauthTokenSecret:At,pendingToken:Ue,nonce:lt}=G;return Et||At||Ye||Ue?Ue?q.startsWith("saml.")?O.aL._create(q,Ue):O.J._fromParams({providerId:q,signInMethod:q,pendingToken:Ue,idToken:Ye,accessToken:Et}):new O.U(q).credential({idToken:Ye,accessToken:Et,rawNonce:lt}):null}return se instanceof ce.ZR?Ie.credentialFromError(se):Ie.credentialFromResult(se)}function Vt(se,G){return G.catch(q=>{throw q instanceof ce.ZR&&function xt(se,G){var q,Ie;const Ye=null===(q=G.customData)||void 0===q?void 0:q._tokenResponse;if("auth/multi-factor-auth-required"===(null===(Ie=G)||void 0===Ie?void 0:Ie.code))G.resolver=new ee(se,O.an(se,G));else if(Ye){const Et=Lr(G),At=G;Et&&(At.credential=Et,At.tenantId=Ye.tenantId||void 0,At.email=Ye.email||void 0,At.phoneNumber=Ye.phoneNumber||void 0)}}(se,q),q}).then(q=>{const Ye=q.user;return{operationType:q.operationType,credential:Tr(q),additionalUserInfo:O.al(q),user:z.getOrCreate(Ye)}})}function Jr(se,G){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,h.Z)(function*(se,G){const q=yield G;return{verificationId:q.verificationId,confirm:Ie=>Vt(se,q.confirm(Ie))}})).apply(this,arguments)}class ee{constructor(G,q){this.resolver=q,this.auth=function _r(se){return se.wrapped()}(G)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(G){return Vt($r(this.auth),this.resolver.resolveSignIn(G))}}class z{constructor(G){this._delegate=G,this.multiFactor=O.ao(G)}static getOrCreate(G){return z.USER_MAP.has(G)||z.USER_MAP.set(G,new z(G)),z.USER_MAP.get(G)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(G){return this._delegate.getIdTokenResult(G)}getIdToken(G){return this._delegate.getIdToken(G)}linkAndRetrieveDataWithCredential(G){return this.linkWithCredential(G)}linkWithCredential(G){var q=this;return(0,h.Z)(function*(){return Vt(q.auth,O.Z(q._delegate,G))})()}linkWithPhoneNumber(G,q){var Ie=this;return(0,h.Z)(function*(){return Jr(Ie.auth,O.l(Ie._delegate,G,q))})()}linkWithPopup(G){var q=this;return(0,h.Z)(function*(){return Vt(q.auth,O.d(q._delegate,G,Ft))})()}linkWithRedirect(G){var q=this;return(0,h.Z)(function*(){return yield An(O.aE(q.auth)),O.g(q._delegate,G,Ft)})()}reauthenticateAndRetrieveDataWithCredential(G){return this.reauthenticateWithCredential(G)}reauthenticateWithCredential(G){var q=this;return(0,h.Z)(function*(){return Vt(q.auth,O._(q._delegate,G))})()}reauthenticateWithPhoneNumber(G,q){return Jr(this.auth,O.r(this._delegate,G,q))}reauthenticateWithPopup(G){return Vt(this.auth,O.e(this._delegate,G,Ft))}reauthenticateWithRedirect(G){var q=this;return(0,h.Z)(function*(){return yield An(O.aE(q.auth)),O.h(q._delegate,G,Ft)})()}sendEmailVerification(G){return O.ab(this._delegate,G)}unlink(G){var q=this;return(0,h.Z)(function*(){return yield O.ak(q._delegate,G),q})()}updateEmail(G){return O.ag(this._delegate,G)}updatePassword(G){return O.ah(this._delegate,G)}updatePhoneNumber(G){return O.u(this._delegate,G)}updateProfile(G){return O.af(this._delegate,G)}verifyBeforeUpdateEmail(G,q){return O.ac(this._delegate,G,q)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}z.USER_MAP=new WeakMap;const $=O.ax;let Y=(()=>{class se{constructor(q,Ie){if(this.app=q,Ie.isInitialized())return this._delegate=Ie.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ye}=q.options;$(Ye,"invalid-api-key",{appName:q.name}),$(Ye,"invalid-api-key",{appName:q.name});const Et=typeof window<"u"?Ft:void 0;this._delegate=Ie.initialize({options:{persistence:xe(Ye,q.name),popupRedirectResolver:Et}}),this._delegate._updateErrorMap(O.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?z.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(q){this._delegate.languageCode=q}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(q){this._delegate.tenantId=q}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(q,Ie){O.G(this._delegate,q,Ie)}applyActionCode(q){return O.a2(this._delegate,q)}checkActionCode(q){return O.a3(this._delegate,q)}confirmPasswordReset(q,Ie){return O.a1(this._delegate,q,Ie)}createUserWithEmailAndPassword(q,Ie){var Ye=this;return(0,h.Z)(function*(){return Vt(Ye._delegate,O.a5(Ye._delegate,q,Ie))})()}fetchProvidersForEmail(q){return this.fetchSignInMethodsForEmail(q)}fetchSignInMethodsForEmail(q){return O.aa(this._delegate,q)}isSignInWithEmailLink(q){return O.a8(this._delegate,q)}getRedirectResult(){var q=this;return(0,h.Z)(function*(){$(Hn(),q._delegate,"operation-not-supported-in-this-environment");const Ie=yield O.j(q._delegate,Ft);return Ie?Vt(q._delegate,Promise.resolve(Ie)):{credential:null,user:null}})()}addFrameworkForLogging(q){!function In(se,G){(0,O.aE)(se)._logFramework(G)}(this._delegate,q)}onAuthStateChanged(q,Ie,Ye){const{next:Et,error:At,complete:Ue}=Q(q,Ie,Ye);return this._delegate.onAuthStateChanged(Et,At,Ue)}onIdTokenChanged(q,Ie,Ye){const{next:Et,error:At,complete:Ue}=Q(q,Ie,Ye);return this._delegate.onIdTokenChanged(Et,At,Ue)}sendSignInLinkToEmail(q,Ie){return O.a7(this._delegate,q,Ie)}sendPasswordResetEmail(q,Ie){return O.a0(this._delegate,q,Ie||void 0)}setPersistence(q){var Ie=this;return(0,h.Z)(function*(){let Ye;switch(function Wi(se,G){yn(Object.values(jn).includes(G),se,"invalid-persistence-type"),(0,ce.b$)()?yn(G!==jn.SESSION,se,"unsupported-persistence-type"):(0,ce.UG)()?yn(G===jn.NONE,se,"unsupported-persistence-type"):Qr()?yn(G===jn.NONE||G===jn.LOCAL&&(0,ce.hl)(),se,"unsupported-persistence-type"):yn(G===jn.NONE||zi(),se,"unsupported-persistence-type")}(Ie._delegate,q),q){case jn.SESSION:Ye=O.a;break;case jn.LOCAL:Ye=(yield O.ay(O.i)._isAvailable())?O.i:O.b;break;case jn.NONE:Ye=O.L;break;default:return O.at("argument-error",{appName:Ie._delegate.name})}return Ie._delegate.setPersistence(Ye)})()}signInAndRetrieveDataWithCredential(q){return this.signInWithCredential(q)}signInAnonymously(){return Vt(this._delegate,O.X(this._delegate))}signInWithCredential(q){return Vt(this._delegate,O.Y(this._delegate,q))}signInWithCustomToken(q){return Vt(this._delegate,O.$(this._delegate,q))}signInWithEmailAndPassword(q,Ie){return Vt(this._delegate,O.a6(this._delegate,q,Ie))}signInWithEmailLink(q,Ie){return Vt(this._delegate,O.a9(this._delegate,q,Ie))}signInWithPhoneNumber(q,Ie){return Jr(this._delegate,O.s(this._delegate,q,Ie))}signInWithPopup(q){var Ie=this;return(0,h.Z)(function*(){return $(Hn(),Ie._delegate,"operation-not-supported-in-this-environment"),Vt(Ie._delegate,O.c(Ie._delegate,q,Ft))})()}signInWithRedirect(q){var Ie=this;return(0,h.Z)(function*(){return $(Hn(),Ie._delegate,"operation-not-supported-in-this-environment"),yield An(Ie._delegate),O.f(Ie._delegate,q,Ft)})()}updateCurrentUser(q){return this._delegate.updateCurrentUser(q)}verifyPasswordResetCode(q){return O.a4(this._delegate,q)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return se.Persistence=jn,se})();function Q(se,G,q){let Ie=se;"function"!=typeof se&&({next:Ie,error:G,complete:q}=se);const Ye=Ie;return{next:At=>Ye(At&&z.getOrCreate(At)),error:G,complete:q}}function xe(se,G){const q=function Tn(se,G){const q=_t();if(!q)return[];const Ie=O.az(mr,se,G);switch(q.getItem(Ie)){case jn.NONE:return[O.L];case jn.LOCAL:return[O.i,O.a];case jn.SESSION:return[O.a];default:return[]}}(se,G);if(typeof self<"u"&&!q.includes(O.i)&&q.push(O.i),typeof window<"u")for(const Ie of[O.b,O.a])q.includes(Ie)||q.push(Ie);return q.includes(O.L)||q.push(O.L),q}class Ke{constructor(){this.providerId="phone",this._delegate=new O.P($r(j.Z.auth()))}static credential(G,q){return O.P.credential(G,q)}verifyPhoneNumber(G,q){return this._delegate.verifyPhoneNumber(G,q)}unwrap(){return this._delegate}}Ke.PHONE_SIGN_IN_METHOD=O.P.PHONE_SIGN_IN_METHOD,Ke.PROVIDER_ID=O.P.PROVIDER_ID;const It=O.ax;class gn{constructor(G,q,Ie=j.Z.app()){var Ye;It(null===(Ye=Ie.options)||void 0===Ye?void 0:Ye.apiKey,"invalid-api-key",{appName:Ie.name}),this._delegate=new O.R(G,q,Ie.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function tr(se){se.INTERNAL.registerComponent(new he.wA("auth-compat",G=>{const q=G.getProvider("app-compat").getImmediate(),Ie=G.getProvider("auth");return new Y(q,Ie)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:O.A.EMAIL_SIGNIN,PASSWORD_RESET:O.A.PASSWORD_RESET,RECOVER_EMAIL:O.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:O.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:O.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:O.A.VERIFY_EMAIL}},EmailAuthProvider:O.M,FacebookAuthProvider:O.N,GithubAuthProvider:O.T,GoogleAuthProvider:O.Q,OAuthProvider:O.U,SAMLAuthProvider:O.V,PhoneAuthProvider:Ke,PhoneMultiFactorGenerator:O.m,RecaptchaVerifier:gn,TwitterAuthProvider:O.W,Auth:Y,AuthCredential:O.H,Error:ce.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),se.registerVersion("@firebase/auth-compat","0.2.19")}(j.Z)},9751:(mt,ke,U)=>{U.d(ke,{y:()=>_e});var h=U(930),j=U(727),O=U(8822),ce=U(9635),fe=U(2416),be=U(576),he=U(2806);let _e=(()=>{class ne{constructor(Le){Le&&(this._subscribe=Le)}lift(Le){const Se=new ne;return Se.source=this,Se.operator=Le,Se}subscribe(Le,Se,ct){const Te=function K(ne){return ne&&ne instanceof h.Lv||function W(ne){return ne&&(0,be.m)(ne.next)&&(0,be.m)(ne.error)&&(0,be.m)(ne.complete)}(ne)&&(0,j.Nn)(ne)}(Le)?Le:new h.Hp(Le,Se,ct);return(0,he.x)(()=>{const{operator:ve,source:it}=this;Te.add(ve?ve.call(Te,it):it?this._subscribe(Te):this._trySubscribe(Te))}),Te}_trySubscribe(Le){try{return this._subscribe(Le)}catch(Se){Le.error(Se)}}forEach(Le,Se){return new(Se=Ce(Se))((ct,Te)=>{const ve=new h.Hp({next:it=>{try{Le(it)}catch(st){Te(st),ve.unsubscribe()}},error:Te,complete:ct});this.subscribe(ve)})}_subscribe(Le){var Se;return null===(Se=this.source)||void 0===Se?void 0:Se.subscribe(Le)}[O.L](){return this}pipe(...Le){return(0,ce.U)(Le)(this)}toPromise(Le){return new(Le=Ce(Le))((Se,ct)=>{let Te;this.subscribe(ve=>Te=ve,ve=>ct(ve),()=>Se(Te))})}}return ne.create=qe=>new ne(qe),ne})();function Ce(ne){var qe;return null!==(qe=ne??fe.v.Promise)&&void 0!==qe?qe:Promise}},7579:(mt,ke,U)=>{U.d(ke,{x:()=>he});var h=U(9751),j=U(727);const ce=(0,U(3888).d)(Ce=>function(){Ce(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var fe=U(8737),be=U(2806);let he=(()=>{class Ce extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(K){const ne=new _e(this,this);return ne.operator=K,ne}_throwIfClosed(){if(this.closed)throw new ce}next(K){(0,be.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ne of this.currentObservers)ne.next(K)}})}error(K){(0,be.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=K;const{observers:ne}=this;for(;ne.length;)ne.shift().error(K)}})}complete(){(0,be.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:K}=this;for(;K.length;)K.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var K;return(null===(K=this.observers)||void 0===K?void 0:K.length)>0}_trySubscribe(K){return this._throwIfClosed(),super._trySubscribe(K)}_subscribe(K){return this._throwIfClosed(),this._checkFinalizedStatuses(K),this._innerSubscribe(K)}_innerSubscribe(K){const{hasError:ne,isStopped:qe,observers:Le}=this;return ne||qe?j.Lc:(this.currentObservers=null,Le.push(K),new j.w0(()=>{this.currentObservers=null,(0,fe.P)(Le,K)}))}_checkFinalizedStatuses(K){const{hasError:ne,thrownError:qe,isStopped:Le}=this;ne?K.error(qe):Le&&K.complete()}asObservable(){const K=new h.y;return K.source=this,K}}return Ce.create=(W,K)=>new _e(W,K),Ce})();class _e extends he{constructor(W,K){super(),this.destination=W,this.source=K}next(W){var K,ne;null===(ne=null===(K=this.destination)||void 0===K?void 0:K.next)||void 0===ne||ne.call(K,W)}error(W){var K,ne;null===(ne=null===(K=this.destination)||void 0===K?void 0:K.error)||void 0===ne||ne.call(K,W)}complete(){var W,K;null===(K=null===(W=this.destination)||void 0===W?void 0:W.complete)||void 0===K||K.call(W)}_subscribe(W){var K,ne;return null!==(ne=null===(K=this.source)||void 0===K?void 0:K.subscribe(W))&&void 0!==ne?ne:j.Lc}}},930:(mt,ke,U)=>{U.d(ke,{Hp:()=>ct,Lv:()=>ne});var h=U(576),j=U(727),O=U(2416),ce=U(7849),fe=U(5032);const be=Ce("C",void 0,void 0);function Ce(Ve,Oe,Ae){return{kind:Ve,value:Oe,error:Ae}}var W=U(3410),K=U(2806);class ne extends j.w0{constructor(Oe){super(),this.isStopped=!1,Oe?(this.destination=Oe,(0,j.Nn)(Oe)&&Oe.add(this)):this.destination=st}static create(Oe,Ae,Ze){return new ct(Oe,Ae,Ze)}next(Oe){this.isStopped?it(function _e(Ve){return Ce("N",Ve,void 0)}(Oe),this):this._next(Oe)}error(Oe){this.isStopped?it(function he(Ve){return Ce("E",void 0,Ve)}(Oe),this):(this.isStopped=!0,this._error(Oe))}complete(){this.isStopped?it(be,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Oe){this.destination.next(Oe)}_error(Oe){try{this.destination.error(Oe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const qe=Function.prototype.bind;function Le(Ve,Oe){return qe.call(Ve,Oe)}class Se{constructor(Oe){this.partialObserver=Oe}next(Oe){const{partialObserver:Ae}=this;if(Ae.next)try{Ae.next(Oe)}catch(Ze){Te(Ze)}}error(Oe){const{partialObserver:Ae}=this;if(Ae.error)try{Ae.error(Oe)}catch(Ze){Te(Ze)}else Te(Oe)}complete(){const{partialObserver:Oe}=this;if(Oe.complete)try{Oe.complete()}catch(Ae){Te(Ae)}}}class ct extends ne{constructor(Oe,Ae,Ze){let le;if(super(),(0,h.m)(Oe)||!Oe)le={next:Oe??void 0,error:Ae??void 0,complete:Ze??void 0};else{let pe;this&&O.v.useDeprecatedNextContext?(pe=Object.create(Oe),pe.unsubscribe=()=>this.unsubscribe(),le={next:Oe.next&&Le(Oe.next,pe),error:Oe.error&&Le(Oe.error,pe),complete:Oe.complete&&Le(Oe.complete,pe)}):le=Oe}this.destination=new Se(le)}}function Te(Ve){O.v.useDeprecatedSynchronousErrorHandling?(0,K.O)(Ve):(0,ce.h)(Ve)}function it(Ve,Oe){const{onStoppedNotification:Ae}=O.v;Ae&&W.z.setTimeout(()=>Ae(Ve,Oe))}const st={closed:!0,next:fe.Z,error:function ve(Ve){throw Ve},complete:fe.Z}},727:(mt,ke,U)=>{U.d(ke,{Lc:()=>be,w0:()=>fe,Nn:()=>he});var h=U(576);const O=(0,U(3888).d)(Ce=>function(K){Ce(this),this.message=K?`${K.length} errors occurred during unsubscription:\n${K.map((ne,qe)=>`${qe+1}) ${ne.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=K});var ce=U(8737);class fe{constructor(W){this.initialTeardown=W,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let W;if(!this.closed){this.closed=!0;const{_parentage:K}=this;if(K)if(this._parentage=null,Array.isArray(K))for(const Le of K)Le.remove(this);else K.remove(this);const{initialTeardown:ne}=this;if((0,h.m)(ne))try{ne()}catch(Le){W=Le instanceof O?Le.errors:[Le]}const{_finalizers:qe}=this;if(qe){this._finalizers=null;for(const Le of qe)try{_e(Le)}catch(Se){W=W??[],Se instanceof O?W=[...W,...Se.errors]:W.push(Se)}}if(W)throw new O(W)}}add(W){var K;if(W&&W!==this)if(this.closed)_e(W);else{if(W instanceof fe){if(W.closed||W._hasParent(this))return;W._addParent(this)}(this._finalizers=null!==(K=this._finalizers)&&void 0!==K?K:[]).push(W)}}_hasParent(W){const{_parentage:K}=this;return K===W||Array.isArray(K)&&K.includes(W)}_addParent(W){const{_parentage:K}=this;this._parentage=Array.isArray(K)?(K.push(W),K):K?[K,W]:W}_removeParent(W){const{_parentage:K}=this;K===W?this._parentage=null:Array.isArray(K)&&(0,ce.P)(K,W)}remove(W){const{_finalizers:K}=this;K&&(0,ce.P)(K,W),W instanceof fe&&W._removeParent(this)}}fe.EMPTY=(()=>{const Ce=new fe;return Ce.closed=!0,Ce})();const be=fe.EMPTY;function he(Ce){return Ce instanceof fe||Ce&&"closed"in Ce&&(0,h.m)(Ce.remove)&&(0,h.m)(Ce.add)&&(0,h.m)(Ce.unsubscribe)}function _e(Ce){(0,h.m)(Ce)?Ce():Ce.unsubscribe()}},2416:(mt,ke,U)=>{U.d(ke,{v:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(mt,ke,U)=>{U.d(ke,{E:()=>j});const j=new(U(9751).y)(fe=>fe.complete())},8996:(mt,ke,U)=>{U.d(ke,{D:()=>Oe});var h=U(8421),j=U(5363),O=U(9468),be=U(9751),_e=U(2202),Ce=U(576),W=U(9672);function ne(Ae,Ze){if(!Ae)throw new Error("Iterable cannot be null");return new be.y(le=>{(0,W.f)(le,Ze,()=>{const pe=Ae[Symbol.asyncIterator]();(0,W.f)(le,Ze,()=>{pe.next().then(Ee=>{Ee.done?le.complete():le.next(Ee.value)})},0,!0)})})}var qe=U(3670),Le=U(8239),Se=U(1144),ct=U(6495),Te=U(2206),ve=U(4532),it=U(3260);function Oe(Ae,Ze){return Ze?function Ve(Ae,Ze){if(null!=Ae){if((0,qe.c)(Ae))return function ce(Ae,Ze){return(0,h.Xf)(Ae).pipe((0,O.R)(Ze),(0,j.Q)(Ze))}(Ae,Ze);if((0,Se.z)(Ae))return function he(Ae,Ze){return new be.y(le=>{let pe=0;return Ze.schedule(function(){pe===Ae.length?le.complete():(le.next(Ae[pe++]),le.closed||this.schedule())})})}(Ae,Ze);if((0,Le.t)(Ae))return function fe(Ae,Ze){return(0,h.Xf)(Ae).pipe((0,O.R)(Ze),(0,j.Q)(Ze))}(Ae,Ze);if((0,Te.D)(Ae))return ne(Ae,Ze);if((0,ct.T)(Ae))return function K(Ae,Ze){return new be.y(le=>{let pe;return(0,W.f)(le,Ze,()=>{pe=Ae[_e.h](),(0,W.f)(le,Ze,()=>{let Ee,te;try{({value:Ee,done:te}=pe.next())}catch(ie){return void le.error(ie)}te?le.complete():le.next(Ee)},0,!0)}),()=>(0,Ce.m)(pe?.return)&&pe.return()})}(Ae,Ze);if((0,it.L)(Ae))return function st(Ae,Ze){return ne((0,it.Q)(Ae),Ze)}(Ae,Ze)}throw(0,ve.z)(Ae)}(Ae,Ze):(0,h.Xf)(Ae)}},8421:(mt,ke,U)=>{U.d(ke,{Xf:()=>qe});var h=U(655),j=U(1144),O=U(8239),ce=U(9751),fe=U(3670),be=U(2206),he=U(4532),_e=U(6495),Ce=U(3260),W=U(576),K=U(7849),ne=U(8822);function qe(Ve){if(Ve instanceof ce.y)return Ve;if(null!=Ve){if((0,fe.c)(Ve))return function Le(Ve){return new ce.y(Oe=>{const Ae=Ve[ne.L]();if((0,W.m)(Ae.subscribe))return Ae.subscribe(Oe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ve);if((0,j.z)(Ve))return function Se(Ve){return new ce.y(Oe=>{for(let Ae=0;Ae<Ve.length&&!Oe.closed;Ae++)Oe.next(Ve[Ae]);Oe.complete()})}(Ve);if((0,O.t)(Ve))return function ct(Ve){return new ce.y(Oe=>{Ve.then(Ae=>{Oe.closed||(Oe.next(Ae),Oe.complete())},Ae=>Oe.error(Ae)).then(null,K.h)})}(Ve);if((0,be.D)(Ve))return ve(Ve);if((0,_e.T)(Ve))return function Te(Ve){return new ce.y(Oe=>{for(const Ae of Ve)if(Oe.next(Ae),Oe.closed)return;Oe.complete()})}(Ve);if((0,Ce.L)(Ve))return function it(Ve){return ve((0,Ce.Q)(Ve))}(Ve)}throw(0,he.z)(Ve)}function ve(Ve){return new ce.y(Oe=>{(function st(Ve,Oe){var Ae,Ze,le,pe;return(0,h.mG)(this,void 0,void 0,function*(){try{for(Ae=(0,h.KL)(Ve);!(Ze=yield Ae.next()).done;)if(Oe.next(Ze.value),Oe.closed)return}catch(Ee){le={error:Ee}}finally{try{Ze&&!Ze.done&&(pe=Ae.return)&&(yield pe.call(Ae))}finally{if(le)throw le.error}}Oe.complete()})})(Ve,Oe).catch(Ae=>Oe.error(Ae))})}},6451:(mt,ke,U)=>{U.d(ke,{T:()=>be});var h=U(8189),j=U(8421),O=U(515),ce=U(7669),fe=U(8996);function be(...he){const _e=(0,ce.yG)(he),Ce=(0,ce._6)(he,1/0),W=he;return W.length?1===W.length?(0,j.Xf)(W[0]):(0,h.J)(Ce)((0,fe.D)(W,_e)):O.E}},5403:(mt,ke,U)=>{U.d(ke,{x:()=>j});var h=U(930);function j(ce,fe,be,he,_e){return new O(ce,fe,be,he,_e)}class O extends h.Lv{constructor(fe,be,he,_e,Ce,W){super(fe),this.onFinalize=Ce,this.shouldUnsubscribe=W,this._next=be?function(K){try{be(K)}catch(ne){fe.error(ne)}}:super._next,this._error=_e?function(K){try{_e(K)}catch(ne){fe.error(ne)}finally{this.unsubscribe()}}:super._error,this._complete=he?function(){try{he()}catch(K){fe.error(K)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var fe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:be}=this;super.unsubscribe(),!be&&(null===(fe=this.onFinalize)||void 0===fe||fe.call(this))}}}},4004:(mt,ke,U)=>{U.d(ke,{U:()=>O});var h=U(4482),j=U(5403);function O(ce,fe){return(0,h.e)((be,he)=>{let _e=0;be.subscribe((0,j.x)(he,Ce=>{he.next(ce.call(fe,Ce,_e++))}))})}},8189:(mt,ke,U)=>{U.d(ke,{J:()=>O});var h=U(5577),j=U(4671);function O(ce=1/0){return(0,h.z)(j.y,ce)}},5577:(mt,ke,U)=>{U.d(ke,{z:()=>_e});var h=U(4004),j=U(8421),O=U(4482),ce=U(9672),fe=U(5403),he=U(576);function _e(Ce,W,K=1/0){return(0,he.m)(W)?_e((ne,qe)=>(0,h.U)((Le,Se)=>W(ne,Le,qe,Se))((0,j.Xf)(Ce(ne,qe))),K):("number"==typeof W&&(K=W),(0,O.e)((ne,qe)=>function be(Ce,W,K,ne,qe,Le,Se,ct){const Te=[];let ve=0,it=0,st=!1;const Ve=()=>{st&&!Te.length&&!ve&&W.complete()},Oe=Ze=>ve<ne?Ae(Ze):Te.push(Ze),Ae=Ze=>{Le&&W.next(Ze),ve++;let le=!1;(0,j.Xf)(K(Ze,it++)).subscribe((0,fe.x)(W,pe=>{qe?.(pe),Le?Oe(pe):W.next(pe)},()=>{le=!0},void 0,()=>{if(le)try{for(ve--;Te.length&&ve<ne;){const pe=Te.shift();Se?(0,ce.f)(W,Se,()=>Ae(pe)):Ae(pe)}Ve()}catch(pe){W.error(pe)}}))};return Ce.subscribe((0,fe.x)(W,Oe,()=>{st=!0,Ve()})),()=>{ct?.()}}(ne,qe,Ce,K)))}},5363:(mt,ke,U)=>{U.d(ke,{Q:()=>ce});var h=U(9672),j=U(4482),O=U(5403);function ce(fe,be=0){return(0,j.e)((he,_e)=>{he.subscribe((0,O.x)(_e,Ce=>(0,h.f)(_e,fe,()=>_e.next(Ce),be),()=>(0,h.f)(_e,fe,()=>_e.complete(),be),Ce=>(0,h.f)(_e,fe,()=>_e.error(Ce),be)))})}},3099:(mt,ke,U)=>{U.d(ke,{B:()=>fe});var h=U(8421),j=U(7579),O=U(930),ce=U(4482);function fe(he={}){const{connector:_e=(()=>new j.x),resetOnError:Ce=!0,resetOnComplete:W=!0,resetOnRefCountZero:K=!0}=he;return ne=>{let qe,Le,Se,ct=0,Te=!1,ve=!1;const it=()=>{Le?.unsubscribe(),Le=void 0},st=()=>{it(),qe=Se=void 0,Te=ve=!1},Ve=()=>{const Oe=qe;st(),Oe?.unsubscribe()};return(0,ce.e)((Oe,Ae)=>{ct++,!ve&&!Te&&it();const Ze=Se=Se??_e();Ae.add(()=>{ct--,0===ct&&!ve&&!Te&&(Le=be(Ve,K))}),Ze.subscribe(Ae),!qe&&ct>0&&(qe=new O.Hp({next:le=>Ze.next(le),error:le=>{ve=!0,it(),Le=be(st,Ce,le),Ze.error(le)},complete:()=>{Te=!0,it(),Le=be(st,W),Ze.complete()}}),(0,h.Xf)(Oe).subscribe(qe))})(ne)}}function be(he,_e,...Ce){if(!0===_e)return void he();if(!1===_e)return;const W=new O.Hp({next:()=>{W.unsubscribe(),he()}});return _e(...Ce).subscribe(W)}},9468:(mt,ke,U)=>{U.d(ke,{R:()=>j});var h=U(4482);function j(O,ce=0){return(0,h.e)((fe,be)=>{be.add(O.schedule(()=>fe.subscribe(be),ce))})}},8505:(mt,ke,U)=>{U.d(ke,{b:()=>fe});var h=U(576),j=U(4482),O=U(5403),ce=U(4671);function fe(be,he,_e){const Ce=(0,h.m)(be)||he||_e?{next:be,error:he,complete:_e}:be;return Ce?(0,j.e)((W,K)=>{var ne;null===(ne=Ce.subscribe)||void 0===ne||ne.call(Ce);let qe=!0;W.subscribe((0,O.x)(K,Le=>{var Se;null===(Se=Ce.next)||void 0===Se||Se.call(Ce,Le),K.next(Le)},()=>{var Le;qe=!1,null===(Le=Ce.complete)||void 0===Le||Le.call(Ce),K.complete()},Le=>{var Se;qe=!1,null===(Se=Ce.error)||void 0===Se||Se.call(Ce,Le),K.error(Le)},()=>{var Le,Se;qe&&(null===(Le=Ce.unsubscribe)||void 0===Le||Le.call(Ce)),null===(Se=Ce.finalize)||void 0===Se||Se.call(Ce)}))}):ce.y}},4408:(mt,ke,U)=>{U.d(ke,{o:()=>fe});var h=U(727);class j extends h.w0{constructor(he,_e){super()}schedule(he,_e=0){return this}}const O={setInterval(be,he,..._e){const{delegate:Ce}=O;return Ce?.setInterval?Ce.setInterval(be,he,..._e):setInterval(be,he,..._e)},clearInterval(be){const{delegate:he}=O;return(he?.clearInterval||clearInterval)(be)},delegate:void 0};var ce=U(8737);class fe extends j{constructor(he,_e){super(he,_e),this.scheduler=he,this.work=_e,this.pending=!1}schedule(he,_e=0){if(this.closed)return this;this.state=he;const Ce=this.id,W=this.scheduler;return null!=Ce&&(this.id=this.recycleAsyncId(W,Ce,_e)),this.pending=!0,this.delay=_e,this.id=this.id||this.requestAsyncId(W,this.id,_e),this}requestAsyncId(he,_e,Ce=0){return O.setInterval(he.flush.bind(he,this),Ce)}recycleAsyncId(he,_e,Ce=0){if(null!=Ce&&this.delay===Ce&&!1===this.pending)return _e;O.clearInterval(_e)}execute(he,_e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ce=this._execute(he,_e);if(Ce)return Ce;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(he,_e){let W,Ce=!1;try{this.work(he)}catch(K){Ce=!0,W=K||new Error("Scheduled action threw falsy error")}if(Ce)return this.unsubscribe(),W}unsubscribe(){if(!this.closed){const{id:he,scheduler:_e}=this,{actions:Ce}=_e;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ce.P)(Ce,this),null!=he&&(this.id=this.recycleAsyncId(_e,he,null)),this.delay=null,super.unsubscribe()}}}},7565:(mt,ke,U)=>{U.d(ke,{v:()=>O});var h=U(6063);class j{constructor(fe,be=j.now){this.schedulerActionCtor=fe,this.now=be}schedule(fe,be=0,he){return new this.schedulerActionCtor(this,fe).schedule(he,be)}}j.now=h.l.now;class O extends j{constructor(fe,be=j.now){super(fe,be),this.actions=[],this._active=!1,this._scheduled=void 0}flush(fe){const{actions:be}=this;if(this._active)return void be.push(fe);let he;this._active=!0;do{if(he=fe.execute(fe.state,fe.delay))break}while(fe=be.shift());if(this._active=!1,he){for(;fe=be.shift();)fe.unsubscribe();throw he}}}},4986:(mt,ke,U)=>{U.d(ke,{z:()=>O});var h=U(4408);const O=new(U(7565).v)(h.o)},6063:(mt,ke,U)=>{U.d(ke,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},3410:(mt,ke,U)=>{U.d(ke,{z:()=>h});const h={setTimeout(j,O,...ce){const{delegate:fe}=h;return fe?.setTimeout?fe.setTimeout(j,O,...ce):setTimeout(j,O,...ce)},clearTimeout(j){const{delegate:O}=h;return(O?.clearTimeout||clearTimeout)(j)},delegate:void 0}},2202:(mt,ke,U)=>{U.d(ke,{h:()=>j});const j=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(mt,ke,U)=>{U.d(ke,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(mt,ke,U)=>{U.d(ke,{_6:()=>be,jO:()=>ce,yG:()=>fe});var h=U(576);function O(he){return he[he.length-1]}function ce(he){return(0,h.m)(O(he))?he.pop():void 0}function fe(he){return function j(he){return he&&(0,h.m)(he.schedule)}(O(he))?he.pop():void 0}function be(he,_e){return"number"==typeof O(he)?he.pop():_e}},8737:(mt,ke,U)=>{function h(j,O){if(j){const ce=j.indexOf(O);0<=ce&&j.splice(ce,1)}}U.d(ke,{P:()=>h})},3888:(mt,ke,U)=>{function h(j){const ce=j(fe=>{Error.call(fe),fe.stack=(new Error).stack});return ce.prototype=Object.create(Error.prototype),ce.prototype.constructor=ce,ce}U.d(ke,{d:()=>h})},2806:(mt,ke,U)=>{U.d(ke,{O:()=>ce,x:()=>O});var h=U(2416);let j=null;function O(fe){if(h.v.useDeprecatedSynchronousErrorHandling){const be=!j;if(be&&(j={errorThrown:!1,error:null}),fe(),be){const{errorThrown:he,error:_e}=j;if(j=null,he)throw _e}}else fe()}function ce(fe){h.v.useDeprecatedSynchronousErrorHandling&&j&&(j.errorThrown=!0,j.error=fe)}},9672:(mt,ke,U)=>{function h(j,O,ce,fe=0,be=!1){const he=O.schedule(function(){ce(),be?j.add(this.schedule(null,fe)):this.unsubscribe()},fe);if(j.add(he),!be)return he}U.d(ke,{f:()=>h})},4671:(mt,ke,U)=>{function h(j){return j}U.d(ke,{y:()=>h})},1144:(mt,ke,U)=>{U.d(ke,{z:()=>h});const h=j=>j&&"number"==typeof j.length&&"function"!=typeof j},2206:(mt,ke,U)=>{U.d(ke,{D:()=>j});var h=U(576);function j(O){return Symbol.asyncIterator&&(0,h.m)(O?.[Symbol.asyncIterator])}},576:(mt,ke,U)=>{function h(j){return"function"==typeof j}U.d(ke,{m:()=>h})},3670:(mt,ke,U)=>{U.d(ke,{c:()=>O});var h=U(8822),j=U(576);function O(ce){return(0,j.m)(ce[h.L])}},6495:(mt,ke,U)=>{U.d(ke,{T:()=>O});var h=U(2202),j=U(576);function O(ce){return(0,j.m)(ce?.[h.h])}},8239:(mt,ke,U)=>{U.d(ke,{t:()=>j});var h=U(576);function j(O){return(0,h.m)(O?.then)}},3260:(mt,ke,U)=>{U.d(ke,{L:()=>ce,Q:()=>O});var h=U(655),j=U(576);function O(fe){return(0,h.FC)(this,arguments,function*(){const he=fe.getReader();try{for(;;){const{value:_e,done:Ce}=yield(0,h.qq)(he.read());if(Ce)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(_e)}}finally{he.releaseLock()}})}function ce(fe){return(0,j.m)(fe?.getReader)}},4482:(mt,ke,U)=>{U.d(ke,{A:()=>j,e:()=>O});var h=U(576);function j(ce){return(0,h.m)(ce?.lift)}function O(ce){return fe=>{if(j(fe))return fe.lift(function(be){try{return ce(be,this)}catch(he){this.error(he)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(mt,ke,U)=>{function h(){}U.d(ke,{Z:()=>h})},9635:(mt,ke,U)=>{U.d(ke,{U:()=>O,z:()=>j});var h=U(4671);function j(...ce){return O(ce)}function O(ce){return 0===ce.length?h.y:1===ce.length?ce[0]:function(be){return ce.reduce((he,_e)=>_e(he),be)}}},7849:(mt,ke,U)=>{U.d(ke,{h:()=>O});var h=U(2416),j=U(3410);function O(ce){j.z.setTimeout(()=>{const{onUnhandledError:fe}=h.v;if(!fe)throw ce;fe(ce)})}},4532:(mt,ke,U)=>{function h(j){return new TypeError(`You provided ${null!==j&&"object"==typeof j?"an invalid object":`'${j}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}U.d(ke,{z:()=>h})},655:(mt,ke,U)=>{function ce(te,ie){var ye={};for(var de in te)Object.prototype.hasOwnProperty.call(te,de)&&ie.indexOf(de)<0&&(ye[de]=te[de]);if(null!=te&&"function"==typeof Object.getOwnPropertySymbols){var je=0;for(de=Object.getOwnPropertySymbols(te);je<de.length;je++)ie.indexOf(de[je])<0&&Object.prototype.propertyIsEnumerable.call(te,de[je])&&(ye[de[je]]=te[de[je]])}return ye}function _e(te,ie,ye,de){return new(ye||(ye=Promise))(function($e,wt){function tn(In){try{Qe(de.next(In))}catch(Bn){wt(Bn)}}function Wt(In){try{Qe(de.throw(In))}catch(Bn){wt(Bn)}}function Qe(In){In.done?$e(In.value):function je($e){return $e instanceof ye?$e:new ye(function(wt){wt($e)})}(In.value).then(tn,Wt)}Qe((de=de.apply(te,ie||[])).next())})}function Te(te){return this instanceof Te?(this.v=te,this):new Te(te)}function ve(te,ie,ye){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var je,de=ye.apply(te,ie||[]),$e=[];return je={},wt("next"),wt("throw"),wt("return"),je[Symbol.asyncIterator]=function(){return this},je;function wt(un){de[un]&&(je[un]=function(nn){return new Promise(function(Kt,jt){$e.push([un,nn,Kt,jt])>1||tn(un,nn)})})}function tn(un,nn){try{!function Wt(un){un.value instanceof Te?Promise.resolve(un.value.v).then(Qe,In):Bn($e[0][2],un)}(de[un](nn))}catch(Kt){Bn($e[0][3],Kt)}}function Qe(un){tn("next",un)}function In(un){tn("throw",un)}function Bn(un,nn){un(nn),$e.shift(),$e.length&&tn($e[0][0],$e[0][1])}}function st(te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ye,ie=te[Symbol.asyncIterator];return ie?ie.call(te):(te=function ne(te){var ie="function"==typeof Symbol&&Symbol.iterator,ye=ie&&te[ie],de=0;if(ye)return ye.call(te);if(te&&"number"==typeof te.length)return{next:function(){return te&&de>=te.length&&(te=void 0),{value:te&&te[de++],done:!te}}};throw new TypeError(ie?"Object is not iterable.":"Symbol.iterator is not defined.")}(te),ye={},de("next"),de("throw"),de("return"),ye[Symbol.asyncIterator]=function(){return this},ye);function de($e){ye[$e]=te[$e]&&function(wt){return new Promise(function(tn,Wt){!function je($e,wt,tn,Wt){Promise.resolve(Wt).then(function(Qe){$e({value:Qe,done:tn})},wt)}(tn,Wt,(wt=te[$e](wt)).done,wt.value)})}}}U.d(ke,{FC:()=>ve,KL:()=>st,_T:()=>ce,mG:()=>_e,qq:()=>Te})},4650:(mt,ke,U)=>{U.d(ke,{$8M:()=>Xl,$Z:()=>YE,AFp:()=>lT,AaK:()=>_e,BQk:()=>Ef,CHM:()=>Fh,CRH:()=>eT,CZH:()=>dm,CqO:()=>$C,D6c:()=>nk,EJc:()=>UR,EiD:()=>hA,EpF:()=>Ao,F$t:()=>qC,F4k:()=>Xy,FYo:()=>cE,FiY:()=>Je,G48:()=>ZR,Gf:()=>XI,GfV:()=>ey,Gpc:()=>K,Hsn:()=>WC,Ikx:()=>Tv,JOm:()=>vl,JVY:()=>X0,KtG:()=>Yo,L6k:()=>eE,LAX:()=>dA,LFG:()=>or,LSH:()=>oE,Lbi:()=>FR,Lck:()=>bL,MAs:()=>QM,MMx:()=>VI,NdJ:()=>ev,OlP:()=>xn,Oqu:()=>Ic,PXZ:()=>wm,Q6J:()=>VC,QGY:()=>Jy,QP$:()=>Ye,QbO:()=>cT,Qsj:()=>TA,R0b:()=>Cs,RDi:()=>W0,Rgc:()=>Nf,SBq:()=>ba,Sil:()=>pm,Suo:()=>om,TTD:()=>Ns,TgZ:()=>Lg,X6Q:()=>Mb,XFs:()=>ot,Xpm:()=>Y,Xts:()=>Ri,Y36:()=>xd,YKP:()=>LI,YNc:()=>Yy,Yjl:()=>se,Yz7:()=>nn,Z0I:()=>ro,ZZ4:()=>$f,_Bn:()=>FI,_UZ:()=>HC,_Vd:()=>qs,_c5:()=>OT,_uU:()=>Cc,aQg:()=>Gf,c2e:()=>LR,cJS:()=>jt,cg1:()=>Dv,dDg:()=>zR,dqk:()=>Ft,eBb:()=>tE,eFA:()=>gT,ekj:()=>nI,eoX:()=>vm,f3M:()=>T,g9A:()=>hm,h0i:()=>qd,hGG:()=>tk,iGM:()=>rb,ifc:()=>yt,ip1:()=>pb,jDz:()=>Xx,kL8:()=>px,lG2:()=>tr,lqb:()=>uu,lri:()=>wb,mCW:()=>oe,n5z:()=>Vs,oAB:()=>It,oxw:()=>si,pB0:()=>b,q3G:()=>xr,q4F:()=>DA,qLn:()=>wd,qOj:()=>ts,qZA:()=>Qy,qzn:()=>ou,rWj:()=>Qd,sBO:()=>CT,sIi:()=>Od,s_b:()=>Sc,soG:()=>fm,tb:()=>uT,tp0:()=>kt,uIk:()=>qy,vHH:()=>Se,vpe:()=>xo,wAp:()=>Nt,xp6:()=>LE,ynx:()=>wf,z2F:()=>Cm,z3N:()=>va,zSh:()=>ii,zs3:()=>Ad});var h=U(7579),j=U(727),O=U(9751),ce=U(6451),fe=U(3099);function be(s){for(let a in s)if(s[a]===be)return a;throw Error("Could not find renamed property on target object.")}function he(s,a){for(const l in a)a.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&(s[l]=a[l])}function _e(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(_e).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const a=s.toString();if(null==a)return""+a;const l=a.indexOf("\n");return-1===l?a:a.substring(0,l)}function Ce(s,a){return null==s||""===s?null===a?"":a:null==a||""===a?s:s+" "+a}const W=be({__forward_ref__:be});function K(s){return s.__forward_ref__=K,s.toString=function(){return _e(this())},s}function ne(s){return qe(s)?s():s}function qe(s){return"function"==typeof s&&s.hasOwnProperty(W)&&s.__forward_ref__===K}class Se extends Error{constructor(a,l){super(function ct(s,a){return`NG0${Math.abs(s)}${a?": "+a.trim():""}`}(a,l)),this.code=a}}function Te(s){return"string"==typeof s?s:null==s?"":String(s)}function Oe(s,a){throw new Se(-201,!1)}function Wt(s,a){null==s&&function Qe(s,a,l,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${l} ${c} ${a} <=Actual]`))}(a,s,null,"!=")}function nn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function jt(s){return{providers:s.providers||[],imports:s.imports||[]}}function Cr(s){return Ir(s,Qr)||Ir(s,Si)}function ro(s){return null!==Cr(s)}function Ir(s,a){return s.hasOwnProperty(a)?s[a]:null}function zi(s){return s&&(s.hasOwnProperty(Hn)||s.hasOwnProperty(qi))?s[Hn]:null}const Qr=be({\u0275prov:be}),Hn=be({\u0275inj:be}),Si=be({ngInjectableDef:be}),qi=be({ngInjectorDef:be});var ot=(()=>((ot=ot||{})[ot.Default=0]="Default",ot[ot.Host=1]="Host",ot[ot.Self=2]="Self",ot[ot.SkipSelf=4]="SkipSelf",ot[ot.Optional=8]="Optional",ot))();let gr;function yn(s){const a=gr;return gr=s,a}function mr(s,a,l){const c=Cr(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:l&ot.Optional?null:void 0!==a?a:void Oe(_e(s))}function An(s){return{toString:s}.toString()}var Mn=(()=>((Mn=Mn||{})[Mn.OnPush=0]="OnPush",Mn[Mn.Default=1]="Default",Mn))(),yt=(()=>{return(s=yt||(yt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",yt;var s})();const Ft=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Tr={},xt=[],Lr=be({\u0275cmp:be}),Vt=be({\u0275dir:be}),Jr=be({\u0275pipe:be}),Yt=be({\u0275mod:be}),ee=be({\u0275fac:be}),z=be({__NG_ELEMENT_ID__:be});let $=0;function Y(s){return An(()=>{const l=!0===s.standalone,c={},f={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Mn.OnPush,directiveDefs:null,pipeDefs:null,standalone:l,dependencies:l&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||xt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||yt.Emulated,id:"c"+$++,styles:s.styles||xt,_:null,setInput:null,schemas:s.schemas||null,tView:null},g=s.dependencies,v=s.features;return f.inputs=fn(s.inputs,c),f.outputs=fn(s.outputs),v&&v.forEach(w=>w(f)),f.directiveDefs=g?()=>("function"==typeof g?g():g).map(xe).filter(Ke):null,f.pipeDefs=g?()=>("function"==typeof g?g():g).map(Ie).filter(Ke):null,f})}function xe(s){return G(s)||q(s)}function Ke(s){return null!==s}function It(s){return An(()=>({type:s.type,bootstrap:s.bootstrap||xt,declarations:s.declarations||xt,imports:s.imports||xt,exports:s.exports||xt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function fn(s,a){if(null==s)return Tr;const l={};for(const c in s)if(s.hasOwnProperty(c)){let f=s[c],g=f;Array.isArray(f)&&(g=f[1],f=f[0]),l[f]=c,a&&(a[f]=g)}return l}const tr=Y;function se(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function G(s){return s[Lr]||null}function q(s){return s[Vt]||null}function Ie(s){return s[Jr]||null}function Ye(s){const a=G(s)||q(s)||Ie(s);return null!==a&&a.standalone}function Et(s,a){const l=s[Yt]||null;if(!l&&!0===a)throw new Error(`Type ${_e(s)} does not have '\u0275mod' property.`);return l}function nr(s){return Array.isArray(s)&&"object"==typeof s[1]}function ui(s){return Array.isArray(s)&&!0===s[1]}function ho(s){return 0!=(8&s.flags)}function Bl(s){return 2==(2&s.flags)}function $a(s){return 1==(1&s.flags)}function ei(s){return null!==s.template}function Uu(s){return 0!=(256&s[2])}function Dr(s,a){return s.hasOwnProperty(ee)?s[ee]:null}class qo{constructor(a,l,c){this.previousValue=a,this.currentValue=l,this.firstChange=c}isFirstChange(){return this.firstChange}}function Ns(){return Zc}function Zc(s){return s.type.prototype.ngOnChanges&&(s.setInput=Hu),jl}function jl(){const s=Wo(this),a=s?.current;if(a){const l=s.previous;if(l===Tr)s.previous=a;else for(let c in a)l[c]=a[c];s.current=null,this.ngOnChanges(a)}}function Hu(s,a,l,c){const f=Wo(s)||function Oh(s,a){return s[Yc]=a}(s,{previous:Tr,current:null}),g=f.current||(f.current={}),v=f.previous,w=this.declaredInputs[l],I=v[w];g[w]=new qo(I&&I.currentValue,a,v===Tr),s[c]=a}Ns.ngInherit=!0;const Yc="__ngSimpleChanges__";function Wo(s){return s[Yc]||null}function Ln(s){for(;Array.isArray(s);)s=s[0];return s}function Ai(s,a){return Ln(a[s])}function Sr(s,a){return Ln(a[s.index])}function go(s,a){return s.data[a]}function cn(s,a){const l=a[s];return nr(l)?l:l[0]}function Gl(s){return 4==(4&s[2])}function Os(s){return 64==(64&s[2])}function fi(s,a){return null==a?null:s[a]}function qa(s){s[18]=0}function Gn(s,a){s[5]+=a;let l=s,c=s[3];for(;null!==c&&(1===a&&1===l[5]||-1===a&&0===l[5]);)c[5]+=a,l=c,c=c[3]}const Pt={lFrame:nl(null),bindingsEnabled:!0};function mo(){return Pt.bindingsEnabled}function Pe(){return Pt.lFrame.lView}function Qt(){return Pt.lFrame.tView}function Fh(s){return Pt.lFrame.contextLView=s,s[8]}function Yo(s){return Pt.lFrame.contextLView=null,s}function rr(){let s=Qo();for(;null!==s&&64===s.type;)s=s.parent;return s}function Qo(){return Pt.lFrame.currentTNode}function Gr(s,a){const l=Pt.lFrame;l.currentTNode=s,l.isParent=a}function ql(){return Pt.lFrame.isParent}function Jo(){Pt.lFrame.isParent=!1}function Xa(){return Pt.lFrame.bindingIndex++}function ed(s,a){const l=Pt.lFrame;l.bindingIndex=l.bindingRootIndex=s,Xo(a)}function Xo(s){Pt.lFrame.currentDirectiveIndex=s}function el(){return Pt.lFrame.currentQueryIndex}function qu(s){Pt.lFrame.currentQueryIndex=s}function tl(s){const a=s[1];return 2===a.type?a.declTNode:1===a.type?s[6]:null}function td(s,a,l){if(l&ot.SkipSelf){let f=a,g=s;for(;!(f=f.parent,null!==f||l&ot.Host||(f=tl(g),null===f||(g=g[15],10&f.type))););if(null===f)return!1;a=f,s=g}const c=Pt.lFrame=Uh();return c.currentTNode=a,c.lView=s,!0}function ea(s){const a=Uh(),l=s[1];Pt.lFrame=a,a.currentTNode=l.firstChild,a.lView=s,a.tView=l,a.contextLView=s,a.bindingIndex=l.bindingStartIndex,a.inI18n=!1}function Uh(){const s=Pt.lFrame,a=null===s?null:s.child;return null===a?nl(s):a}function nl(s){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=a),a}function Bh(){const s=Pt.lFrame;return Pt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const nd=Bh;function Ps(){const s=Bh();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Pn(){return Pt.lFrame.selectedIndex}function ms(s){Pt.lFrame.selectedIndex=s}function Fn(){const s=Pt.lFrame;return go(s.tView,s.selectedIndex)}function Yu(s,a){for(let l=a.directiveStart,c=a.directiveEnd;l<c;l++){const g=s.data[l].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:w,ngAfterViewInit:I,ngAfterViewChecked:M,ngOnDestroy:N}=g;v&&(s.contentHooks||(s.contentHooks=[])).push(-l,v),w&&((s.contentHooks||(s.contentHooks=[])).push(l,w),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(l,w)),I&&(s.viewHooks||(s.viewHooks=[])).push(-l,I),M&&((s.viewHooks||(s.viewHooks=[])).push(l,M),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(l,M)),null!=N&&(s.destroyHooks||(s.destroyHooks=[])).push(l,N)}}function ta(s,a,l){ra(s,a,3,l)}function na(s,a,l,c){(3&s[2])===l&&ra(s,a,l,c)}function od(s,a){let l=s[2];(3&l)===a&&(l&=2047,l+=1,s[2]=l)}function ra(s,a,l,c){const g=c??-1,v=a.length-1;let w=0;for(let I=void 0!==c?65535&s[18]:0;I<v;I++)if("number"==typeof a[I+1]){if(w=a[I],null!=c&&w>=c)break}else a[I]<0&&(s[18]+=65536),(w<g||-1==g)&&(ad(s,l,a,I),s[18]=(4294901760&s[18])+I+2),I++}function ad(s,a,l,c){const f=l[c]<0,g=l[c+1],w=s[f?-l[c]:l[c]];if(f){if(s[2]>>11<s[18]>>16&&(3&s[2])===a){s[2]+=2048;try{g.call(w)}finally{}}}else try{g.call(w)}finally{}}class pi{constructor(a,l,c){this.factory=a,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=c}}function _s(s,a,l){let c=0;for(;c<l.length;){const f=l[c];if("number"==typeof f){if(0!==f)break;c++;const g=l[c++],v=l[c++],w=l[c++];s.setAttribute(a,v,w,g)}else{const g=f,v=l[++c];Ju(g)?s.setProperty(a,g,v):s.setAttribute(a,g,v),c++}}return c}function il(s){return 3===s||4===s||6===s}function Ju(s){return 64===s.charCodeAt(0)}function sl(s,a){if(null!==a&&0!==a.length)if(null===s||0===s.length)s=a.slice();else{let l=-1;for(let c=0;c<a.length;c++){const f=a[c];"number"==typeof f?l=f:0===l||ud(s,l,f,null,-1===l||2===l?a[++c]:null)}}return s}function ud(s,a,l,c,f){let g=0,v=s.length;if(-1===a)v=-1;else for(;g<s.length;){const w=s[g++];if("number"==typeof w){if(w===a){v=-1;break}if(w>a){v=g-1;break}}}for(;g<s.length;){const w=s[g];if("number"==typeof w)break;if(w===l){if(null===c)return void(null!==f&&(s[g+1]=f));if(c===s[g+1])return void(s[g+2]=f)}g++,null!==c&&g++,null!==f&&g++}-1!==v&&(s.splice(v,0,a),g=v+1),s.splice(g++,0,l),null!==c&&s.splice(g++,0,c),null!==f&&s.splice(g++,0,f)}function $h(s){return-1!==s}function sr(s){return 32767&s}function Ls(s,a){let l=function Gh(s){return s>>16}(s),c=a;for(;l>0;)c=c[15],l--;return c}let Xu=!0;function ol(s){const a=Xu;return Xu=s,a}let cd=0;const ni={};function ys(s,a){const l=Yl(s,a);if(-1!==l)return l;const c=a[1];c.firstCreatePass&&(s.injectorIndex=a.length,ec(c.data,s),ec(a,null),ec(c.blueprint,null));const f=al(s,a),g=s.injectorIndex;if($h(f)){const v=sr(f),w=Ls(f,a),I=w[1].data;for(let M=0;M<8;M++)a[g+M]=w[v+M]|I[v+M]}return a[g+8]=f,g}function ec(s,a){s.push(0,0,0,0,0,0,0,0,a)}function Yl(s,a){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===a[s.injectorIndex+8]?-1:s.injectorIndex}function al(s,a){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,c=null,f=a;for(;null!==f;){if(c=ca(f),null===c)return-1;if(l++,f=f[15],-1!==c.injectorIndex)return c.injectorIndex|l<<16}return-1}function _o(s,a,l){!function dd(s,a,l){let c;"string"==typeof l?c=l.charCodeAt(0)||0:l.hasOwnProperty(z)&&(c=l[z]),null==c&&(c=l[z]=cd++);const f=255&c;a.data[s+(f>>5)]|=1<<f}(s,a,l)}function sa(s,a,l){if(l&ot.Optional)return s;Oe()}function yo(s,a,l,c){if(l&ot.Optional&&void 0===c&&(c=null),0==(l&(ot.Self|ot.Host))){const f=s[9],g=yn(void 0);try{return f?f.get(a,c,l&ot.Optional):mr(a,c,l&ot.Optional)}finally{yn(g)}}return sa(c,0,l)}function oa(s,a,l,c=ot.Default,f){if(null!==s){if(1024&a[2]){const v=function Wh(s,a,l,c,f){let g=s,v=a;for(;null!==g&&null!==v&&1024&v[2]&&!(256&v[2]);){const w=hd(g,v,l,c|ot.Self,ni);if(w!==ni)return w;let I=g.parent;if(!I){const M=v[21];if(M){const N=M.get(l,ni,c);if(N!==ni)return N}I=ca(v),v=v[15]}g=I}return f}(s,a,l,c,ni);if(v!==ni)return v}const g=hd(s,a,l,c,ni);if(g!==ni)return g}return yo(a,l,c,f)}function hd(s,a,l,c,f){const g=function qh(s){if("string"==typeof s)return s.charCodeAt(0)||0;const a=s.hasOwnProperty(z)?s[z]:void 0;return"number"==typeof a?a>=0?255&a:tc:a}(l);if("function"==typeof g){if(!td(a,s,c))return c&ot.Host?sa(f,0,c):yo(a,l,c,f);try{const v=g(c);if(null!=v||c&ot.Optional)return v;Oe()}finally{nd()}}else if("number"==typeof g){let v=null,w=Yl(s,a),I=-1,M=c&ot.Host?a[16][6]:null;for((-1===w||c&ot.SkipSelf)&&(I=-1===w?al(s,a):a[w+8],-1!==I&&Jl(c,!1)?(v=a[1],w=sr(I),a=Ls(I,a)):w=-1);-1!==w;){const N=a[1];if(aa(g,w,N.data)){const B=Ql(w,a,l,v,c,M);if(B!==ni)return B}I=a[w+8],-1!==I&&Jl(c,a[1].data[w+8]===M)&&aa(g,w,a)?(v=N,w=sr(I),a=Ls(I,a)):w=-1}}return f}function Ql(s,a,l,c,f,g){const v=a[1],w=v.data[s+8],N=ul(w,v,l,null==c?Bl(w)&&Xu:c!=v&&0!=(3&w.type),f&ot.Host&&g===w);return null!==N?Yi(a,v,N,w):ni}function ul(s,a,l,c,f){const g=s.providerIndexes,v=a.data,w=1048575&g,I=s.directiveStart,N=g>>20,X=f?w+N:s.directiveEnd;for(let ae=c?w:w+N;ae<X;ae++){const Me=v[ae];if(ae<I&&l===Me||ae>=I&&Me.type===l)return ae}if(f){const ae=v[I];if(ae&&ei(ae)&&ae.type===l)return I}return null}function Yi(s,a,l,c){let f=s[l];const g=a.data;if(function Qu(s){return s instanceof pi}(f)){const v=f;v.resolving&&function it(s,a){const l=a?`. Dependency path: ${a.join(" > ")} > ${s}`:"";throw new Se(-200,`Circular dependency in DI detected for ${s}${l}`)}(function ve(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Te(s)}(g[l]));const w=ol(v.canSeeViewProviders);v.resolving=!0;const I=v.injectImpl?yn(v.injectImpl):null;td(s,c,ot.Default);try{f=s[l]=v.factory(void 0,g,s,c),a.firstCreatePass&&l>=c.directiveStart&&function sd(s,a,l){const{ngOnChanges:c,ngOnInit:f,ngDoCheck:g}=a.type.prototype;if(c){const v=Zc(a);(l.preOrderHooks||(l.preOrderHooks=[])).push(s,v),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,v)}f&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-s,f),g&&((l.preOrderHooks||(l.preOrderHooks=[])).push(s,g),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,g))}(l,g[l],a)}finally{null!==I&&yn(I),ol(w),v.resolving=!1,nd()}}return f}function aa(s,a,l){return!!(l[a+(s>>5)]&1<<s)}function Jl(s,a){return!(s&ot.Self||s&ot.Host&&a)}class la{constructor(a,l){this._tNode=a,this._lView=l}get(a,l,c){return oa(this._tNode,this._lView,a,c,l)}}function tc(){return new la(rr(),Pe())}function Vs(s){return An(()=>{const a=s.prototype.constructor,l=a[ee]||ua(a),c=Object.prototype;let f=Object.getPrototypeOf(s.prototype).constructor;for(;f&&f!==c;){const g=f[ee]||ua(f);if(g&&g!==l)return g;f=Object.getPrototypeOf(f)}return g=>new g})}function ua(s){return qe(s)?()=>{const a=ua(ne(s));return a&&a()}:Dr(s)}function ca(s){const a=s[1],l=a.type;return 2===l?a.declTNode:1===l?s[6]:null}function Xl(s){return function ll(s,a){if("class"===a)return s.classes;if("style"===a)return s.styles;const l=s.attrs;if(l){const c=l.length;let f=0;for(;f<c;){const g=l[f];if(il(g))break;if(0===g)f+=2;else if("number"==typeof g)for(f++;f<c&&"string"==typeof l[f];)f++;else{if(g===a)return l[f+1];f+=2}}}return null}(rr(),s)}const da="__parameters__";function fa(s,a,l){return An(()=>{const c=function nc(s){return function(...l){if(s){const c=s(...l);for(const f in c)this[f]=c[f]}}}(a);function f(...g){if(this instanceof f)return c.apply(this,g),this;const v=new f(...g);return w.annotation=v,w;function w(I,M,N){const B=I.hasOwnProperty(da)?I[da]:Object.defineProperty(I,da,{value:[]})[da];for(;B.length<=N;)B.push(null);return(B[N]=B[N]||[]).push(v),I}}return l&&(f.prototype=Object.create(l.prototype)),f.prototype.ngMetadataName=s,f.annotationCls=f,f})}class xn{constructor(a,l){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=nn({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ar(s,a){void 0===a&&(a=s);for(let l=0;l<s.length;l++){let c=s[l];Array.isArray(c)?(a===s&&(a=s.slice(0,l)),Ar(c,a)):a!==s&&a.push(c)}return a}function Ji(s,a){s.forEach(l=>Array.isArray(l)?Ji(l,a):a(l))}function Bs(s,a,l){a>=s.length?s.push(l):s.splice(a,0,l)}function Eo(s,a){return a>=s.length-1?s.pop():s.splice(a,1)[0]}function Xi(s,a){const l=[];for(let c=0;c<s;c++)l.push(a);return l}function ri(s,a,l){let c=zr(s,a);return c>=0?s[1|c]=l:(c=~c,function eg(s,a,l,c){let f=s.length;if(f==a)s.push(l,c);else if(1===f)s.push(c,s[0]),s[0]=l;else{for(f--,s.push(s[f-1],s[f]);f>a;)s[f]=s[f-2],f--;s[a]=l,s[a+1]=c}}(s,c,a,l)),c}function eu(s,a){const l=zr(s,a);if(l>=0)return s[1|l]}function zr(s,a){return function Qn(s,a,l){let c=0,f=s.length>>l;for(;f!==c;){const g=c+(f-c>>1),v=s[g<<l];if(a===v)return g<<l;v>a?f=g:c=g+1}return~(f<<l)}(s,a,1)}const pa={},sc="__NG_DI_FLAG__",ga="ngTempTokenPath",md=/\n/gm,_d="__source";let nu;function Co(s){const a=nu;return nu=s,a}function tg(s,a=ot.Default){if(void 0===nu)throw new Se(-203,!1);return null===nu?mr(s,void 0,a):nu.get(s,a&ot.Optional?null:void 0,a)}function or(s,a=ot.Default){return(function jn(){return gr}()||tg)(ne(s),a)}function T(s,a=ot.Default){return"number"!=typeof a&&(a=0|(a.optional&&8)|(a.host&&1)|(a.self&&2)|(a.skipSelf&&4)),or(s,a)}function S(s){const a=[];for(let l=0;l<s.length;l++){const c=ne(s[l]);if(Array.isArray(c)){if(0===c.length)throw new Se(900,!1);let f,g=ot.Default;for(let v=0;v<c.length;v++){const w=c[v],I=H(w);"number"==typeof I?-1===I?f=w.token:g|=I:f=w}a.push(or(f,g))}else a.push(or(c))}return a}function k(s,a){return s[sc]=a,s.prototype[sc]=a,s}function H(s){return s[sc]}const Je=k(fa("Optional"),8),kt=k(fa("SkipSelf"),4);let ng,Jh;function W0(s){ng=s}function ac(s){return function rg(){if(void 0===Jh&&(Jh=null,Ft.trustedTypes))try{Jh=Ft.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Jh}()?.createHTML(s)||s}class su{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class sg extends su{getTypeName(){return"HTML"}}class Q0 extends su{getTypeName(){return"Style"}}class H_ extends su{getTypeName(){return"Script"}}class J0 extends su{getTypeName(){return"URL"}}class og extends su{getTypeName(){return"ResourceURL"}}function va(s){return s instanceof su?s.changingThisBreaksApplicationSecurity:s}function ou(s,a){const l=function j_(s){return s instanceof su&&s.getTypeName()||null}(s);if(null!=l&&l!==a){if("ResourceURL"===l&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===a}function X0(s){return new sg(s)}function eE(s){return new Q0(s)}function tE(s){return new H_(s)}function dA(s){return new J0(s)}function b(s){return new og(s)}class y{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const l=(new window.DOMParser).parseFromString(ac(a),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(a):(l.removeChild(l.firstChild),l)}catch{return null}}}class C{constructor(a){if(this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const l=this.inertDocument.createElement("html");this.inertDocument.appendChild(l);const c=this.inertDocument.createElement("body");l.appendChild(c)}}getInertBodyElement(a){const l=this.inertDocument.createElement("template");if("content"in l)return l.innerHTML=ac(a),l;const c=this.inertDocument.createElement("body");return c.innerHTML=ac(a),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(c),c}stripCustomNsAttrs(a){const l=a.attributes;for(let f=l.length-1;0<f;f--){const v=l.item(f).name;("xmlns:ns1"===v||0===v.indexOf("ns1:"))&&a.removeAttribute(v)}let c=a.firstChild;for(;c;)c.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(c),c=c.nextSibling}}const V=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function oe(s){return(s=String(s)).match(V)?s:"unsafe:"+s}function tt(s){const a={};for(const l of s.split(","))a[l]=!0;return a}function vt(...s){const a={};for(const l of s)for(const c in l)l.hasOwnProperty(c)&&(a[c]=!0);return a}const Zt=tt("area,br,col,hr,img,wbr"),Vn=tt("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),zs=tt("rp,rt"),bd=vt(Zt,vt(Vn,tt("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),vt(zs,tt("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),vt(zs,Vn)),ef=tt("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),tf=tt("srcset"),lg=vt(ef,tf,tt("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),tt("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),ug=tt("script,style,template");class G_{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let l=a.firstChild,c=!0;for(;l;)if(l.nodeType===Node.ELEMENT_NODE?c=this.startElement(l):l.nodeType===Node.TEXT_NODE?this.chars(l.nodeValue):this.sanitizedSomething=!0,c&&l.firstChild)l=l.firstChild;else for(;l;){l.nodeType===Node.ELEMENT_NODE&&this.endElement(l);let f=this.checkClobberedElement(l,l.nextSibling);if(f){l=f;break}l=this.checkClobberedElement(l,l.parentNode)}return this.buf.join("")}startElement(a){const l=a.nodeName.toLowerCase();if(!bd.hasOwnProperty(l))return this.sanitizedSomething=!0,!ug.hasOwnProperty(l);this.buf.push("<"),this.buf.push(l);const c=a.attributes;for(let f=0;f<c.length;f++){const g=c.item(f),v=g.name,w=v.toLowerCase();if(!lg.hasOwnProperty(w)){this.sanitizedSomething=!0;continue}let I=g.value;ef[w]&&(I=oe(I)),tf[w]&&(s=I,I=(s=String(s)).split(",").map(a=>oe(a.trim())).join(", ")),this.buf.push(" ",v,'="',z_(I),'"')}var s;return this.buf.push(">"),!0}endElement(a){const l=a.nodeName.toLowerCase();bd.hasOwnProperty(l)&&!Zt.hasOwnProperty(l)&&(this.buf.push("</"),this.buf.push(l),this.buf.push(">"))}chars(a){this.buf.push(z_(a))}checkClobberedElement(a,l){if(l&&(a.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return l}}const iE=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,cg=/([^\#-~ |!])/g;function z_(s){return s.replace(/&/g,"&amp;").replace(iE,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(cg,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let q_;function hA(s,a){let l=null;try{q_=q_||function m(s){const a=new C(s);return function R(){try{return!!(new window.DOMParser).parseFromString(ac(""),"text/html")}catch{return!1}}()?new y(a):a}(s);let c=a?String(a):"";l=q_.getInertBodyElement(c);let f=5,g=c;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,c=g,g=l.innerHTML,l=q_.getInertBodyElement(c)}while(c!==g);return ac((new G_).sanitizeChildren(sE(l)||l))}finally{if(l){const c=sE(l)||l;for(;c.firstChild;)c.removeChild(c.firstChild)}}}function sE(s){return"content"in s&&function Y1(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var xr=(()=>((xr=xr||{})[xr.NONE=0]="NONE",xr[xr.HTML=1]="HTML",xr[xr.STYLE=2]="STYLE",xr[xr.SCRIPT=3]="SCRIPT",xr[xr.URL=4]="URL",xr[xr.RESOURCE_URL=5]="RESOURCE_URL",xr))();function oE(s){const a=function Wn(){const s=Pe();return s&&s[12]}();return a?a.sanitize(xr.URL,s)||"":ou(s,"URL")?va(s):oe(Te(s))}const Ri=new xn("ENVIRONMENT_INITIALIZER"),W_=new xn("INJECTOR",-1),lc=new xn("INJECTOR_DEF_TYPES");class dg{get(a,l=pa){if(l===pa){const c=new Error(`NullInjectorError: No provider for ${_e(a)}!`);throw c.name="NullInjectorError",c}return l}}function gA(...s){return{\u0275providers:lu(0,s)}}function lu(s,...a){const l=[],c=new Set;let f;return Ji(a,g=>{const v=g;uc(v,l,[],c)&&(f||(f=[]),f.push(v))}),void 0!==f&&K_(f,l),l}function K_(s,a){for(let l=0;l<s.length;l++){const{providers:f}=s[l];Ji(f,g=>{a.push(g)})}}function uc(s,a,l,c){if(!(s=ne(s)))return!1;let f=null,g=zi(s);const v=!g&&G(s);if(g||v){if(v&&!v.standalone)return!1;f=s}else{const I=s.ngModule;if(g=zi(I),!g)return!1;f=I}const w=c.has(f);if(v){if(w)return!1;if(c.add(f),v.dependencies){const I="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const M of I)uc(M,a,l,c)}}else{if(!g)return!1;{if(null!=g.imports&&!w){let M;c.add(f);try{Ji(g.imports,N=>{uc(N,a,l,c)&&(M||(M=[]),M.push(N))})}finally{}void 0!==M&&K_(M,a)}if(!w){const M=Dr(f)||(()=>new f);a.push({provide:f,useFactory:M,deps:xt},{provide:lc,useValue:f,multi:!0},{provide:Ri,useValue:()=>or(f),multi:!0})}const I=g.providers;null==I||w||Ji(I,N=>{a.push(N)})}}return f!==s&&void 0!==s.providers}const mA=be({provide:String,useValue:be});function Z_(s){return null!==s&&"object"==typeof s&&mA in s}function es(s){return"function"==typeof s}const ii=new xn("Set Injector scope."),hg={},yA={};let Q_;function fg(){return void 0===Q_&&(Q_=new dg),Q_}class uu{}class aE extends uu{constructor(a,l,c,f){super(),this.parent=l,this.source=c,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,hc(a,v=>this.processProvider(v)),this.records.set(W_,dc(void 0,this)),f.has("environment")&&this.records.set(uu,dc(void 0,this));const g=this.records.get(ii);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(lc.multi,xt,ot.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}runInContext(a){this.assertNotDestroyed();const l=Co(this),c=yn(void 0);try{return a()}finally{Co(l),yn(c)}}get(a,l=pa,c=ot.Default){this.assertNotDestroyed();const f=Co(this),g=yn(void 0);try{if(!(c&ot.SkipSelf)){let w=this.records.get(a);if(void 0===w){const I=function EA(s){return"function"==typeof s||"object"==typeof s&&s instanceof xn}(a)&&Cr(a);w=I&&this.injectableDefInScope(I)?dc(ht(a),hg):null,this.records.set(a,w)}if(null!=w)return this.hydrate(a,w)}return(c&ot.Self?fg():this.parent).get(a,l=c&ot.Optional&&l===pa?null:l)}catch(v){if("NullInjectorError"===v.name){if((v[ga]=v[ga]||[]).unshift(_e(a)),f)throw v;return function re(s,a,l,c){const f=s[ga];throw a[_d]&&f.unshift(a[_d]),s.message=function ge(s,a,l,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let f=_e(a);if(Array.isArray(a))f=a.map(_e).join(" -> ");else if("object"==typeof a){let g=[];for(let v in a)if(a.hasOwnProperty(v)){let w=a[v];g.push(v+":"+("string"==typeof w?JSON.stringify(w):_e(w)))}f=`{${g.join(", ")}}`}return`${l}${c?"("+c+")":""}[${f}]: ${s.replace(md,"\n  ")}`}("\n"+s.message,f,l,c),s.ngTokenPath=f,s[ga]=null,s}(v,a,"R3InjectorError",this.source)}throw v}finally{yn(g),Co(f)}}resolveInjectorInitializers(){const a=Co(this),l=yn(void 0);try{const c=this.get(Ri.multi,xt,ot.Self);for(const f of c)f()}finally{Co(a),yn(l)}}toString(){const a=[],l=this.records;for(const c of l.keys())a.push(_e(c));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Se(205,!1)}processProvider(a){let l=es(a=ne(a))?a:ne(a&&a.provide);const c=function bA(s){return Z_(s)?dc(void 0,s.useValue):dc(pg(s),hg)}(a);if(es(a)||!0!==a.multi)this.records.get(l);else{let f=this.records.get(l);f||(f=dc(void 0,hg,!0),f.factory=()=>S(f.multi),this.records.set(l,f)),l=a,f.multi.push(a)}this.records.set(l,c)}hydrate(a,l){return l.value===hg&&(l.value=yA,l.value=l.factory()),"object"==typeof l.value&&l.value&&function J_(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(l.value)&&this._ngOnDestroyHooks.add(l.value),l.value}injectableDefInScope(a){if(!a.providedIn)return!1;const l=ne(a.providedIn);return"string"==typeof l?"any"===l||this.scopes.has(l):this.injectorDefTypes.has(l)}}function ht(s){const a=Cr(s),l=null!==a?a.factory:Dr(s);if(null!==l)return l;if(s instanceof xn)throw new Se(204,!1);if(s instanceof Function)return function vA(s){const a=s.length;if(a>0)throw Xi(a,"?"),new Se(204,!1);const l=function Nn(s){const a=s&&(s[Qr]||s[Si]);if(a){const l=function ls(s){if(s.hasOwnProperty("name"))return s.name;const a=(""+s).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),a}return null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new Se(204,!1)}function pg(s,a,l){let c;if(es(s)){const f=ne(s);return Dr(f)||ht(f)}if(Z_(s))c=()=>ne(s.useValue);else if(function _A(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...S(s.deps||[]));else if(function Y_(s){return!(!s||!s.useExisting)}(s))c=()=>or(ne(s.useExisting));else{const f=ne(s&&(s.useClass||s.provide));if(!function wA(s){return!!s.deps}(s))return Dr(f)||ht(f);c=()=>new f(...S(s.deps))}return c}function dc(s,a,l=!1){return{factory:s,value:a,multi:l?[]:void 0}}function lE(s){return!!s.\u0275providers}function hc(s,a){for(const l of s)Array.isArray(l)?hc(l,a):lE(l)?hc(l.\u0275providers,a):a(l)}class nf{}class X_{resolveComponentFactory(a){throw function cu(s){const a=Error(`No component factory found for ${_e(s)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=s,a}(a)}}let qs=(()=>{class s{}return s.NULL=new X_,s})();function iF(){return fc(rr(),Pe())}function fc(s,a){return new ba(Sr(s,a))}let ba=(()=>{class s{constructor(l){this.nativeElement=l}}return s.__NG_ELEMENT_ID__=iF,s})();function IA(s){return s instanceof ba?s.nativeElement:s}class cE{}let TA=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function dE(){const s=Pe(),l=cn(rr().index,s);return(nr(l)?l:s)[11]}(),s})(),oF=(()=>{class s{}return s.\u0275prov=nn({token:s,providedIn:"root",factory:()=>null}),s})();class ey{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const DA=new ey("14.2.0"),hE={};function ry(s){return s.ngOriginalError}class wd{constructor(){this._console=console}handleError(a){const l=this._findOriginalError(a);this._console.error("ERROR",a),l&&this._console.error("ORIGINAL ERROR",l)}_findOriginalError(a){let l=a&&ry(a);for(;l&&ry(l);)l=ry(l);return l||null}}const yE=new Map;let _F=0;const sy="__ngContext__";function Ni(s,a){nr(a)?(s[sy]=a[20],function vF(s){yE.set(s[20],s)}(a)):s[sy]=a}function rf(s){const a=s[sy];return"number"==typeof a?function iy(s){return yE.get(s)||null}(a):a||null}function bE(s){const a=rf(s);return a?nr(a)?a:a.lView:null}function yl(s){return s instanceof Function?s():s}var vl=(()=>((vl=vl||{})[vl.Important=1]="Important",vl[vl.DashCase=2]="DashCase",vl))();function TE(s,a){return undefined(s,a)}function _g(s){const a=s[3];return ui(a)?a[3]:a}function vs(s){return UA(s[13])}function DE(s){return UA(s[4])}function UA(s){for(;null!==s&&!ui(s);)s=s[4];return s}function Cd(s,a,l,c,f){if(null!=c){let g,v=!1;ui(c)?g=c:nr(c)&&(v=!0,c=c[0]);const w=Ln(c);0===s&&null!==l?null==f?Dd(a,l,w):Td(a,l,w,f||null,!0):1===s&&null!==l?Td(a,l,w,f||null,!0):2===s?function KA(s,a,l){const c=yg(s,a);c&&function zA(s,a,l,c){s.removeChild(a,l,c)}(s,c,a,l)}(a,w,v):3===s&&a.destroyNode(w),null!=g&&function PF(s,a,l,c,f){const g=l[7];g!==Ln(l)&&Cd(a,s,c,g,f);for(let w=10;w<l.length;w++){const I=l[w];bg(I[1],I,s,a,c,g)}}(a,s,g,l,f)}}function cy(s,a,l){return s.createElement(a,l)}function HA(s,a){const l=s[9],c=l.indexOf(a),f=a[3];512&a[2]&&(a[2]&=-513,Gn(f,-1)),l.splice(c,1)}function AE(s,a){if(s.length<=10)return;const l=10+a,c=s[l];if(c){const f=c[17];null!==f&&f!==s&&HA(f,c),a>0&&(s[l-1][4]=c[4]);const g=Eo(s,10+a);!function SF(s,a){bg(s,a,a[11],2,null,null),a[0]=null,a[6]=null}(c[1],c);const v=g[19];null!==v&&v.detachView(g[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function jA(s,a){if(!(128&a[2])){const l=a[11];l.destroyNode&&bg(s,a,l,3,null,null),function MF(s){let a=s[13];if(!a)return ME(s[1],s);for(;a;){let l=null;if(nr(a))l=a[13];else{const c=a[10];c&&(l=c)}if(!l){for(;a&&!a[4]&&a!==s;)nr(a)&&ME(a[1],a),a=a[3];null===a&&(a=s),nr(a)&&ME(a[1],a),l=a&&a[4]}a=l}}(a)}}function ME(s,a){if(!(128&a[2])){a[2]&=-65,a[2]|=128,function NF(s,a){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let c=0;c<l.length;c+=2){const f=a[l[c]];if(!(f instanceof pi)){const g=l[c+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const w=f[g[v]],I=g[v+1];try{I.call(w)}finally{}}else try{g.call(f)}finally{}}}}(s,a),function kF(s,a){const l=s.cleanup,c=a[7];let f=-1;if(null!==l)for(let g=0;g<l.length-1;g+=2)if("string"==typeof l[g]){const v=l[g+1],w="function"==typeof v?v(a):Ln(a[v]),I=c[f=l[g+2]],M=l[g+3];"boolean"==typeof M?w.removeEventListener(l[g],I,M):M>=0?c[f=M]():c[f=-M].unsubscribe(),g+=2}else{const v=c[f=l[g+1]];l[g].call(v)}if(null!==c){for(let g=f+1;g<c.length;g++)(0,c[g])();a[7]=null}}(s,a),1===a[1].type&&a[11].destroy();const l=a[17];if(null!==l&&ui(a[3])){l!==a[3]&&HA(l,a);const c=a[19];null!==c&&c.detachView(s)}!function vE(s){yE.delete(s[20])}(a)}}function dy(s,a,l){return function $A(s,a,l){let c=a;for(;null!==c&&40&c.type;)c=(a=c).parent;if(null===c)return l[0];if(2&c.flags){const f=s.data[c.directiveStart].encapsulation;if(f===yt.None||f===yt.Emulated)return null}return Sr(c,l)}(s,a.parent,l)}function Td(s,a,l,c,f){s.insertBefore(a,l,c,f)}function Dd(s,a,l){s.appendChild(a,l)}function GA(s,a,l,c,f){null!==c?Td(s,a,l,c,f):Dd(s,a,l)}function yg(s,a){return s.parentNode(a)}function fy(s,a,l){return xE(s,a,l)}let xE=function py(s,a,l){return 40&s.type?Sr(s,l):null};function sf(s,a,l,c){const f=dy(s,c,a),g=a[11],w=fy(c.parent||a[6],c,a);if(null!=f)if(Array.isArray(l))for(let I=0;I<l.length;I++)GA(g,f,l[I],w,!1);else GA(g,f,l,w,!1)}function vg(s,a){if(null!==a){const l=a.type;if(3&l)return Sr(a,s);if(4&l)return kE(-1,s[a.index]);if(8&l){const c=a.child;if(null!==c)return vg(s,c);{const f=s[a.index];return ui(f)?kE(-1,f):Ln(f)}}if(32&l)return TE(a,s)()||Ln(s[a.index]);{const c=WA(s,a);return null!==c?Array.isArray(c)?c[0]:vg(_g(s[16]),c):vg(s,a.next)}}return null}function WA(s,a){return null!==a?s[16][6].projection[a.projection]:null}function kE(s,a){const l=10+s+1;if(l<a.length){const c=a[l],f=c[1].firstChild;if(null!==f)return vg(c,f)}return a[7]}function NE(s,a,l,c,f,g,v){for(;null!=l;){const w=c[l.index],I=l.type;if(v&&0===a&&(w&&Ni(Ln(w),c),l.flags|=4),64!=(64&l.flags))if(8&I)NE(s,a,l.child,c,f,g,!1),Cd(a,s,f,w,g);else if(32&I){const M=TE(l,c);let N;for(;N=M();)Cd(a,s,f,N,g);Cd(a,s,f,w,g)}else 16&I?ZA(s,a,c,l,f,g):Cd(a,s,f,w,g);l=v?l.projectionNext:l.next}}function bg(s,a,l,c,f,g){NE(l,c,s.firstChild,a,f,g,!1)}function ZA(s,a,l,c,f,g){const v=l[16],I=v[6].projection[c.projection];if(Array.isArray(I))for(let M=0;M<I.length;M++)Cd(a,s,f,I[M],g);else NE(s,a,I,v[3],f,g,!0)}function YA(s,a,l){s.setAttribute(a,"style",l)}function OE(s,a,l){""===l?s.removeAttribute(a,"class"):s.setAttribute(a,"class",l)}function QA(s,a,l){let c=s.length;for(;;){const f=s.indexOf(a,l);if(-1===f)return f;if(0===f||s.charCodeAt(f-1)<=32){const g=a.length;if(f+g===c||s.charCodeAt(f+g)<=32)return f}l=f+1}}const JA="ng-template";function LF(s,a,l){let c=0;for(;c<s.length;){let f=s[c++];if(l&&"class"===f){if(f=s[c],-1!==QA(f.toLowerCase(),a,0))return!0}else if(1===f){for(;c<s.length&&"string"==typeof(f=s[c++]);)if(f.toLowerCase()===a)return!0;return!1}}return!1}function PE(s){return 4===s.type&&s.value!==JA}function XA(s,a,l){return a===(4!==s.type||l?s.value:JA)}function eM(s,a,l){let c=4;const f=s.attrs||[],g=function iM(s){for(let a=0;a<s.length;a++)if(il(s[a]))return a;return s.length}(f);let v=!1;for(let w=0;w<a.length;w++){const I=a[w];if("number"!=typeof I){if(!v)if(4&c){if(c=2|1&c,""!==I&&!XA(s,I,l)||""===I&&1===a.length){if(Io(c))return!1;v=!0}}else{const M=8&c?I:a[++w];if(8&c&&null!==s.attrs){if(!LF(s.attrs,M,l)){if(Io(c))return!1;v=!0}continue}const B=tM(8&c?"class":I,f,PE(s),l);if(-1===B){if(Io(c))return!1;v=!0;continue}if(""!==M){let X;X=B>g?"":f[B+1].toLowerCase();const ae=8&c?X:null;if(ae&&-1!==QA(ae,M,0)||2&c&&M!==X){if(Io(c))return!1;v=!0}}}}else{if(!v&&!Io(c)&&!Io(I))return!1;if(v&&Io(I))continue;v=!1,c=I|1&c}}return Io(c)||v}function Io(s){return 0==(1&s)}function tM(s,a,l,c){if(null===a)return-1;let f=0;if(c||!l){let g=!1;for(;f<a.length;){const v=a[f];if(v===s)return f;if(3===v||6===v)g=!0;else{if(1===v||2===v){let w=a[++f];for(;"string"==typeof w;)w=a[++f];continue}if(4===v)break;if(0===v){f+=4;continue}}f+=g?1:2}return-1}return function sM(s,a){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const c=s[l];if("number"==typeof c)return-1;if(c===a)return l;l++}return-1}(a,s)}function nM(s,a,l=!1){for(let c=0;c<a.length;c++)if(eM(s,a[c],l))return!0;return!1}function VF(s,a){e:for(let l=0;l<a.length;l++){const c=a[l];if(s.length===c.length){for(let f=0;f<s.length;f++)if(s[f]!==c[f])continue e;return!0}}return!1}function FE(s,a){return s?":not("+a.trim()+")":a}function oM(s){let a=s[0],l=1,c=2,f="",g=!1;for(;l<s.length;){let v=s[l];if("string"==typeof v)if(2&c){const w=s[++l];f+="["+v+(w.length>0?'="'+w+'"':"")+"]"}else 8&c?f+="."+v:4&c&&(f+=" "+v);else""!==f&&!Io(v)&&(a+=FE(g,f),f=""),c=v,g=g||!Io(c);l++}return""!==f&&(a+=FE(g,f)),a}const Gt={};function LE(s){my(Qt(),Pe(),Pn()+s,!1)}function my(s,a,l,c){if(!c)if(3==(3&a[2])){const g=s.preOrderCheckHooks;null!==g&&ta(a,g,l)}else{const g=s.preOrderHooks;null!==g&&na(a,g,0,l)}ms(l)}function BE(s,a=null,l=null,c){const f=cM(s,a,l,c);return f.resolveInjectorInitializers(),f}function cM(s,a=null,l=null,c,f=new Set){const g=[l||xt,gA(s)];return c=c||("object"==typeof s?void 0:_e(s)),new aE(g,a||fg(),c||null,f)}let Ad=(()=>{class s{static create(l,c){if(Array.isArray(l))return BE({name:""},c,l,"");{const f=l.name??"";return BE({name:f},l.parent,l.providers,f)}}}return s.THROW_IF_NOT_FOUND=pa,s.NULL=new dg,s.\u0275prov=nn({token:s,providedIn:"any",factory:()=>or(W_)}),s.__NG_ELEMENT_ID__=-1,s})();function xd(s,a=ot.Default){const l=Pe();return null===l?or(s,a):oa(rr(),l,ne(s),a)}function YE(){throw new Error("invalid")}function Ig(s,a){return s<<17|a<<2}function To(s){return s>>17&32767}function wy(s){return 2|s}function wl(s){return(131068&s)>>2}function Ey(s,a){return-131069&s|a<<2}function eC(s){return 1|s}function Sy(s,a){const l=s.contentQueries;if(null!==l)for(let c=0;c<l.length;c+=2){const f=l[c],g=l[c+1];if(-1!==g){const v=s.data[g];qu(f),v.contentQueries(2,a[g],g)}}}function df(s,a,l,c,f,g,v,w,I,M,N){const B=a.blueprint.slice();return B[0]=f,B[2]=76|c,(null!==N||s&&1024&s[2])&&(B[2]|=1024),qa(B),B[3]=B[15]=s,B[8]=l,B[10]=v||s&&s[10],B[11]=w||s&&s[11],B[12]=I||s&&s[12]||null,B[9]=M||s&&s[9]||null,B[6]=g,B[20]=function yF(){return _F++}(),B[21]=N,B[16]=2==a.type?s[16]:B,B}function Oi(s,a,l,c,f){let g=s.data[a];if(null===g)g=function Cl(s,a,l,c,f){const g=Qo(),v=ql(),I=s.data[a]=function Mg(s,a,l,c,f,g){return{type:l,index:c,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,l,a,c,f);return null===s.firstChild&&(s.firstChild=I),null!==g&&(v?null==g.child&&null!==I.parent&&(g.child=I):null===g.next&&(g.next=I)),I}(s,a,l,c,f),function Xc(){return Pt.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=l,g.value=c,g.attrs=f;const v=function zl(){const s=Pt.lFrame,a=s.currentTNode;return s.isParent?a:a.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return Gr(g,!0),g}function wa(s,a,l,c){if(0===l)return-1;const f=a.length;for(let g=0;g<l;g++)a.push(c),s.blueprint.push(c),s.data.push(null);return f}function Ag(s,a,l){ea(a);try{const c=s.viewQuery;null!==c&&yf(1,c,l);const f=s.template;null!==f&&hf(s,a,f,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Sy(s,a),s.staticViewQueries&&yf(2,s.viewQuery,l);const g=s.components;null!==g&&function cC(s,a){for(let l=0;l<a.length;l++)Ly(s,a[l])}(a,g)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{a[2]&=-5,Ps()}}function gc(s,a,l,c){const f=a[2];if(128!=(128&f)){ea(a);try{qa(a),function Ja(s){return Pt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&hf(s,a,l,2,c);const v=3==(3&f);if(v){const M=s.preOrderCheckHooks;null!==M&&ta(a,M,null)}else{const M=s.preOrderHooks;null!==M&&na(a,M,0,null),od(a,0)}if(function FM(s){for(let a=vs(s);null!==a;a=DE(a)){if(!a[2])continue;const l=a[9];for(let c=0;c<l.length;c++){const f=l[c],g=f[3];0==(512&f[2])&&Gn(g,1),f[2]|=512}}}(a),function PM(s){for(let a=vs(s);null!==a;a=DE(a))for(let l=10;l<a.length;l++){const c=a[l],f=c[1];Os(c)&&gc(f,c,f.template,c[8])}}(a),null!==s.contentQueries&&Sy(s,a),v){const M=s.contentCheckHooks;null!==M&&ta(a,M)}else{const M=s.contentHooks;null!==M&&na(a,M,1),od(a,1)}!function SM(s,a){const l=s.hostBindingOpCodes;if(null!==l)try{for(let c=0;c<l.length;c++){const f=l[c];if(f<0)ms(~f);else{const g=f,v=l[++c],w=l[++c];ed(v,g),w(2,a[g])}}}finally{ms(-1)}}(s,a);const w=s.components;null!==w&&function fu(s,a){for(let l=0;l<a.length;l++)LM(s,a[l])}(a,w);const I=s.viewQuery;if(null!==I&&yf(2,I,c),v){const M=s.viewCheckHooks;null!==M&&ta(a,M)}else{const M=s.viewHooks;null!==M&&na(a,M,2),od(a,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),a[2]&=-41,512&a[2]&&(a[2]&=-513,Gn(a[3],-1))}finally{Ps()}}}function dC(s,a,l,c){const f=a[10],v=Gl(a);try{!v&&f.begin&&f.begin(),v&&Ag(s,a,c),gc(s,a,l,c)}finally{!v&&f.end&&f.end()}}function hf(s,a,l,c,f){const g=Pn(),v=2&c;try{ms(-1),v&&a.length>22&&my(s,a,22,!1),l(c,f)}finally{ms(g)}}function ff(s,a,l){if(ho(a)){const f=a.directiveEnd;for(let g=a.directiveStart;g<f;g++){const v=s.data[g];v.contentQueries&&v.contentQueries(1,l[g],g)}}}function Ay(s,a,l){!mo()||(function mC(s,a,l,c){const f=l.directiveStart,g=l.directiveEnd;s.firstCreatePass||ys(l,a),Ni(c,a);const v=l.initialInputs;for(let w=f;w<g;w++){const I=s.data[w],M=ei(I);M&&OM(a,l,I);const N=Yi(a,s,w,l);Ni(N,a),null!==v&&Ny(0,w-f,N,I,0,v),M&&(cn(l.index,a)[8]=N)}}(s,a,l,Sr(l,a)),128==(128&l.flags)&&function _C(s,a,l){const c=l.directiveStart,f=l.directiveEnd,g=l.index,v=function Vh(){return Pt.lFrame.currentDirectiveIndex}();try{ms(g);for(let w=c;w<f;w++){const I=s.data[w],M=a[w];Xo(w),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&yC(I,M)}}finally{ms(-1),Xo(v)}}(s,a,l))}function pf(s,a,l=Sr){const c=a.localNames;if(null!==c){let f=a.index+1;for(let g=0;g<c.length;g+=2){const v=c[g+1],w=-1===v?l(a,s):s[v];s[f++]=w}}}function hC(s){const a=s.tView;return null===a||a.incompleteFirstPass?s.tView=My(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):a}function My(s,a,l,c,f,g,v,w,I,M){const N=22+c,B=N+f,X=function AM(s,a){const l=[];for(let c=0;c<a;c++)l.push(c<s?null:Gt);return l}(N,B),ae="function"==typeof M?M():M;return X[1]={type:s,blueprint:X,template:l,queries:null,viewQuery:w,declTNode:a,data:X.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:B,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:I,consts:ae,incompleteFirstPass:!1}}function gf(s,a,l,c){const f=EC(a);null===l?f.push(c):(f.push(l),s.firstCreatePass&&CC(s).push(c,f.length-1))}function pC(s,a,l){for(let c in s)if(s.hasOwnProperty(c)){const f=s[c];(l=null===l?{}:l).hasOwnProperty(c)?l[c].push(a,f):l[c]=[a,f]}return l}function gC(s,a){const c=a.directiveEnd,f=s.data,g=a.attrs,v=[];let w=null,I=null;for(let M=a.directiveStart;M<c;M++){const N=f[M],B=N.inputs,X=null===g||PE(a)?null:Oy(B,g);v.push(X),w=pC(B,M,w),I=pC(N.outputs,M,I)}null!==w&&(w.hasOwnProperty("class")&&(a.flags|=16),w.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=v,a.inputs=w,a.outputs=I}function Ks(s,a,l,c,f,g,v,w){const I=Sr(a,l);let N,M=a.inputs;!w&&null!=M&&(N=M[c])?(Og(s,l,N,c,f),Bl(a)&&xM(l,a.index)):3&a.type&&(c=function MM(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),f=null!=v?v(f,a.value||"",c):f,g.setProperty(I,c,f))}function xM(s,a){const l=cn(a,s);16&l[2]||(l[2]|=32)}function xy(s,a,l,c){let f=!1;if(mo()){const g=function Ry(s,a,l){const c=s.directiveRegistry;let f=null;if(c)for(let g=0;g<c.length;g++){const v=c[g];nM(l,v.selectors,!1)&&(f||(f=[]),_o(ys(l,a),s,v.type),ei(v)?(ky(s,l),f.unshift(v)):f.push(v))}return f}(s,a,l),v=null===c?null:{"":-1};if(null!==g){f=!0,vC(l,s.data.length,g.length);for(let N=0;N<g.length;N++){const B=g[N];B.providersResolver&&B.providersResolver(B)}let w=!1,I=!1,M=wa(s,a,g.length,null);for(let N=0;N<g.length;N++){const B=g[N];l.mergedAttrs=sl(l.mergedAttrs,B.hostAttrs),bC(s,l,a,M,B),NM(M,B,v),null!==B.contentQueries&&(l.flags|=8),(null!==B.hostBindings||null!==B.hostAttrs||0!==B.hostVars)&&(l.flags|=128);const X=B.type.prototype;!w&&(X.ngOnChanges||X.ngOnInit||X.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(l.index),w=!0),!I&&(X.ngOnChanges||X.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(l.index),I=!0),M++}gC(s,l)}v&&function kM(s,a,l){if(a){const c=s.localNames=[];for(let f=0;f<a.length;f+=2){const g=l[a[f+1]];if(null==g)throw new Se(-301,!1);c.push(a[f],g)}}}(l,c,v)}return l.mergedAttrs=sl(l.mergedAttrs,l.attrs),f}function mf(s,a,l,c,f,g){const v=g.hostBindings;if(v){let w=s.hostBindingOpCodes;null===w&&(w=s.hostBindingOpCodes=[]);const I=~a.index;(function Rg(s){let a=s.length;for(;a>0;){const l=s[--a];if("number"==typeof l&&l<0)return l}return 0})(w)!=I&&w.push(I),w.push(c,f,v)}}function yC(s,a){null!==s.hostBindings&&s.hostBindings(1,a)}function ky(s,a){a.flags|=2,(s.components||(s.components=[])).push(a.index)}function NM(s,a,l){if(l){if(a.exportAs)for(let c=0;c<a.exportAs.length;c++)l[a.exportAs[c]]=s;ei(a)&&(l[""]=s)}}function vC(s,a,l){s.flags|=1,s.directiveStart=a,s.directiveEnd=a+l,s.providerIndexes=a}function bC(s,a,l,c,f){s.data[c]=f;const g=f.factory||(f.factory=Dr(f.type)),v=new pi(g,ei(f),xd);s.blueprint[c]=v,l[c]=v,mf(s,a,0,c,wa(s,l,f.hostVars,Gt),f)}function OM(s,a,l){const c=Sr(a,s),f=hC(l),g=s[10],v=mc(s,df(s,f,null,l.onPush?32:16,c,a,g,g.createRenderer(c,l),null,null,null));s[a.index]=v}function Ea(s,a,l,c,f,g){const v=Sr(s,a);!function Il(s,a,l,c,f,g,v){if(null==g)s.removeAttribute(a,f,l);else{const w=null==v?Te(g):v(g,c||"",f);s.setAttribute(a,f,w,l)}}(a[11],v,g,s.value,l,c,f)}function Ny(s,a,l,c,f,g){const v=g[a];if(null!==v){const w=c.setInput;for(let I=0;I<v.length;){const M=v[I++],N=v[I++],B=v[I++];null!==w?c.setInput(l,B,M,N):l[N]=B}}}function Oy(s,a){let l=null,c=0;for(;c<a.length;){const f=a[c];if(0!==f)if(5!==f){if("number"==typeof f)break;s.hasOwnProperty(f)&&(null===l&&(l=[]),l.push(f,s[f],a[c+1])),c+=2}else c+=2;else c+=4}return l}function wC(s,a,l,c){return new Array(s,!0,!1,a,null,0,c,l,null,null)}function LM(s,a){const l=cn(a,s);if(Os(l)){const c=l[1];48&l[2]?gc(c,l,c.template,l[8]):l[5]>0&&Fy(l)}}function Fy(s){for(let c=vs(s);null!==c;c=DE(c))for(let f=10;f<c.length;f++){const g=c[f];if(Os(g))if(512&g[2]){const v=g[1];gc(v,g,v.template,g[8])}else g[5]>0&&Fy(g)}const l=s[1].components;if(null!==l)for(let c=0;c<l.length;c++){const f=cn(l[c],s);Os(f)&&f[5]>0&&Fy(f)}}function Ly(s,a){const l=cn(a,s),c=l[1];(function VM(s,a){for(let l=a.length;l<s.blueprint.length;l++)a.push(s.blueprint[l])})(c,l),Ag(c,l,l[8])}function mc(s,a){return s[13]?s[14][4]=a:s[13]=a,s[14]=a,a}function _f(s){for(;s;){s[2]|=32;const a=_g(s);if(Uu(s)&&!a)return s;s=a}return null}function yf(s,a,l){qu(0),a(s,l)}function EC(s){return s[7]||(s[7]=[])}function CC(s){return s.cleanup||(s.cleanup=[])}function Ng(s,a){const l=s[9],c=l?l.get(wd,null):null;c&&c.handleError(a)}function Og(s,a,l,c,f){for(let g=0;g<l.length;){const v=l[g++],w=l[g++],I=a[v],M=s.data[v];null!==M.setInput?M.setInput(I,f,c,w):I[w]=f}}function Pg(s,a,l){let c=l?s.styles:null,f=l?s.classes:null,g=0;if(null!==a)for(let v=0;v<a.length;v++){const w=a[v];"number"==typeof w?g=w:1==g?f=Ce(f,w):2==g&&(c=Ce(c,w+": "+a[++v]+";"))}l?s.styles=c:s.stylesWithoutHost=c,l?s.classes=f:s.classesWithoutHost=f}function Fg(s,a,l,c,f=!1){for(;null!==l;){const g=a[l.index];if(null!==g&&c.push(Ln(g)),ui(g))for(let w=10;w<g.length;w++){const I=g[w],M=I[1].firstChild;null!==M&&Fg(I[1],I,M,c)}const v=l.type;if(8&v)Fg(s,a,l.child,c);else if(32&v){const w=TE(l,a);let I;for(;I=w();)c.push(I)}else if(16&v){const w=WA(a,l);if(Array.isArray(w))c.push(...w);else{const I=_g(a[16]);Fg(I[1],I,w,c,!0)}}l=f?l.projectionNext:l.next}return c}class vf{constructor(a,l){this._lView=a,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,l=a[1];return Fg(l,a,l.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(ui(a)){const l=a[8],c=l?l.indexOf(this):-1;c>-1&&(AE(a,c),Eo(l,c))}this._attachedToViewContainer=!1}jA(this._lView[1],this._lView)}onDestroy(a){gf(this._lView[1],this._lView,null,a)}markForCheck(){_f(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function Vy(s,a,l){const c=a[10];c.begin&&c.begin();try{gc(s,a,s.template,l)}catch(f){throw Ng(a,f),f}finally{c.end&&c.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Se(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function BA(s,a){bg(s,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Se(902,!1);this._appRef=a}}class UM extends vf{constructor(a){super(a),this._view=a}detectChanges(){!function Uy(s){!function kg(s){for(let a=0;a<s.components.length;a++){const l=s.components[a],c=bE(l);if(null!==c){const f=c[1];dC(f,c,f.template,l)}}}(s[8])}(this._view)}checkNoChanges(){}get context(){return null}}class Hy extends qs{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const l=G(a);return new bf(l,this.ngModule)}}function IC(s){const a=[];for(let l in s)s.hasOwnProperty(l)&&a.push({propName:s[l],templateName:l});return a}class BM{constructor(a,l){this.injector=a,this.parentInjector=l}get(a,l,c){const f=this.injector.get(a,hE,c);return f!==hE||l===hE?f:this.parentInjector.get(a,l,c)}}class bf extends nf{constructor(a,l){super(),this.componentDef=a,this.ngModule=l,this.componentType=a.type,this.selector=function aM(s){return s.map(oM).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return IC(this.componentDef.inputs)}get outputs(){return IC(this.componentDef.outputs)}create(a,l,c,f){let g=(f=f||this.ngModule)instanceof uu?f:f?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const v=g?new BM(a,g):a,w=v.get(cE,null);if(null===w)throw new Se(407,!1);const I=v.get(oF,null),M=w.createRenderer(null,this.componentDef),N=this.componentDef.selectors[0][0]||"div",B=c?function fC(s,a,l){return s.selectRootElement(a,l===yt.ShadowDom)}(M,c,this.componentDef.encapsulation):cy(w.createRenderer(null,this.componentDef),N,function TC(s){const a=s.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(N)),X=this.componentDef.onPush?288:272,ae={components:[]},Me=My(0,null,null,1,0,null,null,null,null,null),Ge=df(null,Me,ae,X,null,null,w,M,I,v,null);let nt,dt;ea(Ge);try{const Rt=function HM(s,a,l,c,f,g){const v=l[1];l[22]=s;const I=Oi(v,22,2,"#host",null),M=I.mergedAttrs=a.hostAttrs;null!==M&&(Pg(I,M,!0),null!==s&&(_s(f,s,M),null!==I.classes&&OE(f,s,I.classes),null!==I.styles&&YA(f,s,I.styles)));const N=c.createRenderer(s,a),B=df(l,hC(a),null,a.onPush?32:16,l[22],I,c,N,g||null,null,null);return v.firstCreatePass&&(_o(ys(I,l),v,a.type),ky(v,I),vC(I,l.length,1)),mc(l,B),l[22]=B}(B,this.componentDef,Ge,w,M);if(B)if(c)_s(M,B,["ng-version",DA.full]);else{const{attrs:Be,classes:pt}=function Sd(s){const a=[],l=[];let c=1,f=2;for(;c<s.length;){let g=s[c];if("string"==typeof g)2===f?""!==g&&a.push(g,s[++c]):8===f&&l.push(g);else{if(!Io(f))break;f=g}c++}return{attrs:a,classes:l}}(this.componentDef.selectors[0]);Be&&_s(M,B,Be),pt&&pt.length>0&&OE(M,B,pt.join(" "))}if(dt=go(Me,22),void 0!==l){const Be=dt.projection=[];for(let pt=0;pt<this.ngContentSelectors.length;pt++){const rn=l[pt];Be.push(null!=rn?Array.from(rn):null)}}nt=function jM(s,a,l,c,f){const g=l[1],v=function RM(s,a,l){const c=rr();s.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),bC(s,c,a,wa(s,a,1,null),l),gC(s,c));const f=Yi(a,s,c.directiveStart,c);Ni(f,a);const g=Sr(c,a);return g&&Ni(g,a),f}(g,l,a);if(c.components.push(v),s[8]=v,null!==f)for(const I of f)I(v,a);if(a.contentQueries){const I=rr();a.contentQueries(1,v,I.directiveStart)}const w=rr();return!g.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(ms(w.index),mf(l[1],w,0,w.directiveStart,w.directiveEnd,a),yC(a,v)),v}(Rt,this.componentDef,Ge,ae,[SC]),Ag(Me,Ge,null)}finally{Ps()}return new jy(this.componentType,nt,fc(dt,Ge),Ge,dt)}}class jy extends class CA{}{constructor(a,l,c,f,g){super(),this.location=c,this._rootLView=f,this._tNode=g,this.instance=l,this.hostView=this.changeDetectorRef=new UM(f),this.componentType=a}setInput(a,l){const c=this._tNode.inputs;let f;if(null!==c&&(f=c[a])){const g=this._rootLView;Og(g[1],g,f,a,l),xM(g,this._tNode.index)}}get injector(){return new la(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function SC(){const s=rr();Yu(Pe()[1],s)}function ts(s){let a=function AC(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),l=!0;const c=[s];for(;a;){let f;if(ei(s))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Se(903,!1);f=a.\u0275dir}if(f){if(l){c.push(f);const v=s;v.inputs=_c(s.inputs),v.declaredInputs=_c(s.declaredInputs),v.outputs=_c(s.outputs);const w=f.hostBindings;w&&zM(s,w);const I=f.viewQuery,M=f.contentQueries;if(I&&Gy(s,I),M&&GM(s,M),he(s.inputs,f.inputs),he(s.declaredInputs,f.declaredInputs),he(s.outputs,f.outputs),ei(f)&&f.data.animation){const N=s.data;N.animation=(N.animation||[]).concat(f.data.animation)}}const g=f.features;if(g)for(let v=0;v<g.length;v++){const w=g[v];w&&w.ngInherit&&w(s),w===ts&&(l=!1)}}a=Object.getPrototypeOf(a)}!function $y(s){let a=0,l=null;for(let c=s.length-1;c>=0;c--){const f=s[c];f.hostVars=a+=f.hostVars,f.hostAttrs=sl(f.hostAttrs,l=sl(l,f.hostAttrs))}}(c)}function _c(s){return s===Tr?{}:s===xt?[]:s}function Gy(s,a){const l=s.viewQuery;s.viewQuery=l?(c,f)=>{a(c,f),l(c,f)}:a}function GM(s,a){const l=s.contentQueries;s.contentQueries=l?(c,f,g)=>{a(c,f,g),l(c,f,g)}:a}function zM(s,a){const l=s.hostBindings;s.hostBindings=l?(c,f)=>{a(c,f),l(c,f)}:a}let yc=null;function vc(){if(!yc){const s=Ft.Symbol;if(s&&s.iterator)yc=s.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<a.length;++l){const c=a[l];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(yc=c)}}}return yc}function Od(s){return!!gu(s)&&(Array.isArray(s)||!(s instanceof Map)&&vc()in s)}function gu(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function mi(s,a,l){return!Object.is(s[a],l)&&(s[a]=l,!0)}function qy(s,a,l,c){const f=Pe();return mi(f,Xa(),a)&&(Qt(),Ea(Fn(),f,s,a,l,c)),qy}function Yy(s,a,l,c,f,g,v,w){const I=Pe(),M=Qt(),N=s+22,B=M.firstCreatePass?function Zy(s,a,l,c,f,g,v,w,I){const M=a.consts,N=Oi(a,s,4,v||null,fi(M,w));xy(a,l,N,fi(M,I)),Yu(a,N);const B=N.tViews=My(2,N,c,f,g,a.directiveRegistry,a.pipeRegistry,null,a.schemas,M);return null!==a.queries&&(a.queries.template(a,N),B.queries=a.queries.embeddedTView(N)),N}(N,M,I,a,l,c,f,g,v):M.data[N];Gr(B,!1);const X=I[11].createComment("");sf(M,I,X,B),Ni(X,I),mc(I,I[N]=wC(X,I,X,B)),$a(B)&&Ay(M,I,B),null!=v&&pf(I,B,w)}function QM(s){return function Ki(s,a){return s[a]}(function Qa(){return Pt.lFrame.contextLView}(),22+s)}function VC(s,a,l){const c=Pe();return mi(c,Xa(),a)&&Ks(Qt(),Fn(),c,s,a,c[11],l,!1),VC}function UC(s,a,l,c,f){const v=f?"class":"style";Og(s,l,a.inputs[v],v,c)}function Lg(s,a,l,c){const f=Pe(),g=Qt(),v=22+s,w=f[11],I=f[v]=cy(w,a,function Zu(){return Pt.lFrame.currentNamespace}()),M=g.firstCreatePass?function BC(s,a,l,c,f,g,v){const w=a.consts,M=Oi(a,s,2,f,fi(w,g));return xy(a,l,M,fi(w,v)),null!==M.attrs&&Pg(M,M.attrs,!1),null!==M.mergedAttrs&&Pg(M,M.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,M),M}(v,g,f,0,a,l,c):g.data[v];Gr(M,!0);const N=M.mergedAttrs;null!==N&&_s(w,I,N);const B=M.classes;null!==B&&OE(w,I,B);const X=M.styles;return null!==X&&YA(w,I,X),64!=(64&M.flags)&&sf(g,f,I,M),0===function Ka(){return Pt.lFrame.elementDepthCount}()&&Ni(I,f),function Jc(){Pt.lFrame.elementDepthCount++}(),$a(M)&&(Ay(g,f,M),ff(g,M,f)),null!==c&&pf(f,M),Lg}function Qy(){let s=rr();ql()?Jo():(s=s.parent,Gr(s,!1));const a=s;!function Za(){Pt.lFrame.elementDepthCount--}();const l=Qt();return l.firstCreatePass&&(Yu(l,s),ho(s)&&l.queries.elementEnd(s)),null!=a.classesWithoutHost&&function Kl(s){return 0!=(16&s.flags)}(a)&&UC(l,a,Pe(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function Zl(s){return 0!=(32&s.flags)}(a)&&UC(l,a,Pe(),a.stylesWithoutHost,!1),Qy}function HC(s,a,l,c){return Lg(s,a,l,c),Qy(),HC}function wf(s,a,l){const c=Pe(),f=Qt(),g=s+22,v=f.firstCreatePass?function jC(s,a,l,c,f){const g=a.consts,v=fi(g,c),w=Oi(a,s,8,"ng-container",v);return null!==v&&Pg(w,v,!0),xy(a,l,w,fi(g,f)),null!==a.queries&&a.queries.elementStart(a,w),w}(g,f,c,a,l):f.data[g];Gr(v,!0);const w=c[g]=c[11].createComment("");return sf(f,c,w,v),Ni(w,c),$a(v)&&(Ay(f,c,v),ff(f,v,c)),null!=l&&pf(c,v),wf}function Ef(){let s=rr();const a=Qt();return ql()?Jo():(s=s.parent,Gr(s,!1)),a.firstCreatePass&&(Yu(a,s),ho(s)&&a.queries.elementEnd(s)),Ef}function Ao(){return Pe()}function Jy(s){return!!s&&"function"==typeof s.then}function Xy(s){return!!s&&"function"==typeof s.subscribe}const $C=Xy;function ev(s,a,l,c){const f=Pe(),g=Qt(),v=rr();return function zC(s,a,l,c,f,g,v,w){const I=$a(c),N=s.firstCreatePass&&CC(s),B=a[8],X=EC(a);let ae=!0;if(3&c.type||w){const nt=Sr(c,a),dt=w?w(nt):nt,Rt=X.length,Be=w?rn=>w(Ln(rn[c.index])):c.index;let pt=null;if(!w&&I&&(pt=function tv(s,a,l,c){const f=s.cleanup;if(null!=f)for(let g=0;g<f.length-1;g+=2){const v=f[g];if(v===l&&f[g+1]===c){const w=a[7],I=f[g+2];return w.length>I?w[I]:null}"string"==typeof v&&(g+=2)}return null}(s,a,f,c.index)),null!==pt)(pt.__ngLastListenerFn__||pt).__ngNextListenerFn__=g,pt.__ngLastListenerFn__=g,ae=!1;else{g=nv(c,a,B,g,!1);const rn=l.listen(dt,f,g);X.push(g,rn),N&&N.push(f,Be,Rt,Rt+1)}}else g=nv(c,a,B,g,!1);const Me=c.outputs;let Ge;if(ae&&null!==Me&&(Ge=Me[f])){const nt=Ge.length;if(nt)for(let dt=0;dt<nt;dt+=2){const wn=a[Ge[dt]][Ge[dt+1]].subscribe(g),Mc=X.length;X.push(g,wn),N&&N.push(f,c.index,Mc,-(Mc+1))}}}(g,f,f[11],v,s,a,0,c),ev}function Dl(s,a,l,c){try{return!1!==l(c)}catch(f){return Ng(s,f),!1}}function nv(s,a,l,c,f){return function g(v){if(v===Function)return c;_f(2&s.flags?cn(s.index,a):a);let I=Dl(a,0,c,v),M=g.__ngNextListenerFn__;for(;M;)I=Dl(a,0,M,v)&&I,M=M.__ngNextListenerFn__;return f&&!1===I&&(v.preventDefault(),v.returnValue=!1),I}}function si(s=1){return function Fs(s){return(Pt.lFrame.contextLView=function rd(s,a){for(;s>0;)a=a[15],s--;return a}(s,Pt.lFrame.contextLView))[8]}(s)}function vu(s,a){let l=null;const c=function rM(s){const a=s.attrs;if(null!=a){const l=a.indexOf(5);if(0==(1&l))return a[l+1]}return null}(s);for(let f=0;f<a.length;f++){const g=a[f];if("*"!==g){if(null===c?nM(s,g,!0):VF(c,g))return f}else l=f}return l}function qC(s){const a=Pe()[16][6];if(!a.projection){const c=a.projection=Xi(s?s.length:1,null),f=c.slice();let g=a.child;for(;null!==g;){const v=s?vu(g,s):0;null!==v&&(f[v]?f[v].projectionNext=g:c[v]=g,f[v]=g),g=g.next}}}function WC(s,a=0,l){const c=Pe(),f=Qt(),g=Oi(f,22+s,16,null,l||null);null===g.projection&&(g.projection=a),Jo(),64!=(64&g.flags)&&function OF(s,a,l){ZA(a[11],0,a,l,dy(s,l,a),fy(l.parent||a[6],l,a))}(f,c,g)}function YC(s,a,l,c,f){const g=s[l+1],v=null===a;let w=c?To(g):wl(g),I=!1;for(;0!==w&&(!1===I||v);){const N=s[w+1];QC(s[w],a)&&(I=!0,s[w+1]=c?eC(N):wy(N)),w=c?To(N):wl(N)}I&&(s[l+1]=c?wy(g):eC(g))}function QC(s,a){return null===s||null==a||(Array.isArray(s)?s[1]:s)===a||!(!Array.isArray(s)||"string"!=typeof a)&&zr(s,a)>=0}function nI(s,a){return function Mo(s,a,l,c){const f=Pe(),g=Qt(),v=function gs(s){const a=Pt.lFrame,l=a.bindingIndex;return a.bindingIndex=a.bindingIndex+s,l}(2);g.firstUpdatePass&&function nx(s,a,l,c){const f=s.data;if(null===f[l+1]){const g=f[Pn()],v=function rI(s,a){return a>=s.expandoStartIndex}(s,l);(function Tf(s,a){return 0!=(s.flags&(a?16:32))})(g,c)&&null===a&&!v&&(a=!1),a=function rL(s,a,l,c){const f=function zu(s){const a=Pt.lFrame.currentDirectiveIndex;return-1===a?null:s[a]}(s);let g=c?a.residualClasses:a.residualStyles;if(null===f)0===(c?a.classBindings:a.styleBindings)&&(l=Hg(l=iI(null,s,a,l,c),a.attrs,c),g=null);else{const v=a.directiveStylingLast;if(-1===v||s[v]!==f)if(l=iI(f,s,a,l,c),null===g){let I=function iL(s,a,l){const c=l?a.classBindings:a.styleBindings;if(0!==wl(c))return s[To(c)]}(s,a,c);void 0!==I&&Array.isArray(I)&&(I=iI(null,s,a,I[1],c),I=Hg(I,a.attrs,c),function sL(s,a,l,c){s[To(l?a.classBindings:a.styleBindings)]=c}(s,a,c,I))}else g=function oL(s,a,l){let c;const f=a.directiveEnd;for(let g=1+a.directiveStylingLast;g<f;g++)c=Hg(c,s[g].hostAttrs,l);return Hg(c,a.attrs,l)}(s,a,c)}return void 0!==g&&(c?a.residualClasses=g:a.residualStyles=g),l}(f,g,a,c),function KC(s,a,l,c,f,g){let v=g?a.classBindings:a.styleBindings,w=To(v),I=wl(v);s[c]=l;let N,M=!1;if(Array.isArray(l)){const B=l;N=B[1],(null===N||zr(B,N)>0)&&(M=!0)}else N=l;if(f)if(0!==I){const X=To(s[w+1]);s[c+1]=Ig(X,w),0!==X&&(s[X+1]=Ey(s[X+1],c)),s[w+1]=function wM(s,a){return 131071&s|a<<17}(s[w+1],c)}else s[c+1]=Ig(w,0),0!==w&&(s[w+1]=Ey(s[w+1],c)),w=c;else s[c+1]=Ig(I,0),0===w?w=c:s[I+1]=Ey(s[I+1],c),I=c;M&&(s[c+1]=wy(s[c+1])),YC(s,N,c,!0),YC(s,N,c,!1),function ZC(s,a,l,c,f){const g=f?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof a&&zr(g,a)>=0&&(l[c+1]=eC(l[c+1]))}(a,N,s,c,g),v=Ig(w,I),g?a.classBindings=v:a.styleBindings=v}(f,g,a,l,v,c)}}(g,s,v,c),a!==Gt&&mi(f,v,a)&&function sI(s,a,l,c,f,g,v,w){if(!(3&a.type))return;const I=s.data,M=I[w+1];Hd(function XE(s){return 1==(1&s)}(M)?oI(I,a,l,f,wl(M),v):void 0)||(Hd(g)||function JE(s){return 2==(2&s)}(M)&&(g=oI(I,null,l,f,w,v)),function FF(s,a,l,c,f){if(a)f?s.addClass(l,c):s.removeClass(l,c);else{let g=-1===c.indexOf("-")?void 0:vl.DashCase;null==f?s.removeStyle(l,c,g):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),g|=vl.Important),s.setStyle(l,c,f,g))}}(c,v,Ai(Pn(),l),f,g))}(g,g.data[Pn()],f,f[11],s,f[v+1]=function If(s,a){return null==s||("string"==typeof a?s+=a:"object"==typeof s&&(s=_e(va(s)))),s}(a,l),c,v)}(s,a,null,!0),nI}function iI(s,a,l,c,f){let g=null;const v=l.directiveEnd;let w=l.directiveStylingLast;for(-1===w?w=l.directiveStart:w++;w<v&&(g=a[w],c=Hg(c,g.hostAttrs,f),g!==s);)w++;return null!==s&&(l.directiveStylingLast=w),c}function Hg(s,a,l){const c=l?1:2;let f=-1;if(null!==a)for(let g=0;g<a.length;g++){const v=a[g];"number"==typeof v?f=v:f===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),ri(s,v,!!l||a[++g]))}return void 0===s?null:s}function oI(s,a,l,c,f,g){const v=null===a;let w;for(;f>0;){const I=s[f],M=Array.isArray(I),N=M?I[1]:I,B=null===N;let X=l[f+1];X===Gt&&(X=B?xt:void 0);let ae=B?eu(X,c):N===c?X:void 0;if(M&&!Hd(ae)&&(ae=eu(I,c)),Hd(ae)&&(w=ae,v))return w;const Me=s[f+1];f=v?To(Me):wl(Me)}if(null!==a){let I=g?a.residualClasses:a.residualStyles;null!=I&&(w=eu(I,c))}return w}function Hd(s){return void 0!==s}function Cc(s,a=""){const l=Pe(),c=Qt(),f=s+22,g=c.firstCreatePass?Oi(c,f,1,a,null):c.data[f],v=l[f]=function Id(s,a){return s.createText(a)}(l[11],a);sf(c,l,v,g),Gr(g,!1)}function Ic(s){return Df("",s,""),Ic}function Df(s,a,l){const c=Pe(),f=function Fd(s,a,l,c){return mi(s,Xa(),l)?a+Te(l)+c:Gt}(c,s,a,l);return f!==Gt&&function pu(s,a,l){const c=Ai(a,s);!function SE(s,a,l){s.setValue(a,l)}(s[11],c,l)}(c,Pn(),f),Df}function Tv(s,a,l){const c=Pe();return mi(c,Xa(),a)&&Ks(Qt(),Fn(),c,s,a,c[11],l,!0),Tv}const Da=void 0;var fI=["en",[["a","p"],["AM","PM"],Da],[["AM","PM"],Da,Da],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Da,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Da,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Da,"{1} 'at' {0}",Da],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function hI(s){const l=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===c?1:5}];let Tc={};function Dv(s){const a=function mx(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=gx(a);if(l)return l;const c=a.split("-")[0];if(l=gx(c),l)return l;if("en"===c)return fI;throw new Se(701,!1)}function px(s){return Dv(s)[Nt.PluralCase]}function gx(s){return s in Tc||(Tc[s]=Ft.ng&&Ft.ng.common&&Ft.ng.common.locales&&Ft.ng.common.locales[s]),Tc[s]}var Nt=(()=>((Nt=Nt||{})[Nt.LocaleId=0]="LocaleId",Nt[Nt.DayPeriodsFormat=1]="DayPeriodsFormat",Nt[Nt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Nt[Nt.DaysFormat=3]="DaysFormat",Nt[Nt.DaysStandalone=4]="DaysStandalone",Nt[Nt.MonthsFormat=5]="MonthsFormat",Nt[Nt.MonthsStandalone=6]="MonthsStandalone",Nt[Nt.Eras=7]="Eras",Nt[Nt.FirstDayOfWeek=8]="FirstDayOfWeek",Nt[Nt.WeekendRange=9]="WeekendRange",Nt[Nt.DateFormat=10]="DateFormat",Nt[Nt.TimeFormat=11]="TimeFormat",Nt[Nt.DateTimeFormat=12]="DateTimeFormat",Nt[Nt.NumberSymbols=13]="NumberSymbols",Nt[Nt.NumberFormats=14]="NumberFormats",Nt[Nt.CurrencyCode=15]="CurrencyCode",Nt[Nt.CurrencySymbol=16]="CurrencySymbol",Nt[Nt.CurrencyName=17]="CurrencyName",Nt[Nt.Currencies=18]="Currencies",Nt[Nt.Directionality=19]="Directionality",Nt[Nt.PluralCase=20]="PluralCase",Nt[Nt.ExtraData=21]="ExtraData",Nt))();const Dc="en-US";let yx=Dc;function Hv(s,a,l,c,f){if(s=ne(s),Array.isArray(s))for(let g=0;g<s.length;g++)Hv(s[g],a,l,c,f);else{const g=Qt(),v=Pe();let w=es(s)?s:ne(s.provide),I=pg(s);const M=rr(),N=1048575&M.providerIndexes,B=M.directiveStart,X=M.providerIndexes>>20;if(es(s)||!s.multi){const ae=new pi(I,f,xd),Me=$v(w,a,f?N:N+X,B);-1===Me?(_o(ys(M,v),g,w),jv(g,s,a.length),a.push(w),M.directiveStart++,M.directiveEnd++,f&&(M.providerIndexes+=1048576),l.push(ae),v.push(ae)):(l[Me]=ae,v[Me]=ae)}else{const ae=$v(w,a,N+X,B),Me=$v(w,a,N,N+X),Ge=ae>=0&&l[ae],nt=Me>=0&&l[Me];if(f&&!nt||!f&&!Ge){_o(ys(M,v),g,w);const dt=function Qx(s,a,l,c,f){const g=new pi(s,l,xd);return g.multi=[],g.index=a,g.componentProviders=0,PI(g,f,c&&!l),g}(f?Yx:Zx,l.length,f,c,I);!f&&nt&&(l[Me].providerFactory=dt),jv(g,s,a.length,0),a.push(w),M.directiveStart++,M.directiveEnd++,f&&(M.providerIndexes+=1048576),l.push(dt),v.push(dt)}else jv(g,s,ae>-1?ae:Me,PI(l[f?Me:ae],I,!f&&c));!f&&c&&nt&&l[Me].componentProviders++}}}function jv(s,a,l,c){const f=es(a),g=function rF(s){return!!s.useClass}(a);if(f||g){const I=(g?ne(a.useClass):a).prototype.ngOnDestroy;if(I){const M=s.destroyHooks||(s.destroyHooks=[]);if(!f&&a.multi){const N=M.indexOf(l);-1===N?M.push(l,[c,I]):M[N+1].push(c,I)}else M.push(l,I)}}}function PI(s,a,l){return l&&s.componentProviders++,s.multi.push(a)-1}function $v(s,a,l,c){for(let f=l;f<c;f++)if(a[f]===s)return f;return-1}function Zx(s,a,l,c){return Gv(this.multi,[])}function Yx(s,a,l,c){const f=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,w=Yi(l,l[1],this.providerFactory.index,c);g=w.slice(0,v),Gv(f,g);for(let I=v;I<w.length;I++)g.push(w[I])}else g=[],Gv(f,g);return g}function Gv(s,a){for(let l=0;l<s.length;l++)a.push((0,s[l])());return a}function FI(s,a=[]){return l=>{l.providersResolver=(c,f)=>function Kx(s,a,l){const c=Qt();if(c.firstCreatePass){const f=ei(s);Hv(l,c.data,c.blueprint,f,!0),Hv(a,c.data,c.blueprint,f,!1)}}(c,f?f(s):s,a)}}class qd{}class LI{}function bL(s,a){return new Jx(s,a??null)}class Jx extends qd{constructor(a,l){super(),this._parent=l,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Hy(this);const c=Et(a);this._bootstrapComponents=yl(c.bootstrap),this._r3Injector=cM(a,l,[{provide:qd,useValue:this},{provide:qs,useValue:this.componentFactoryResolver}],_e(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class zv extends LI{constructor(a){super(),this.moduleType=a}create(a){return new Jx(this.moduleType,a)}}class qv extends qd{constructor(a,l,c){super(),this.componentFactoryResolver=new Hy(this),this.instance=null;const f=new aE([...a,{provide:qd,useValue:this},{provide:qs,useValue:this.componentFactoryResolver}],l||fg(),c,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function VI(s,a,l=null){return new qv(s,a,l).injector}let EL=(()=>{class s{constructor(l){this._injector=l,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(l){if(!l.standalone)return null;if(!this.cachedInjectors.has(l.id)){const c=lu(0,l.type),f=c.length>0?VI([c],this._injector,`Standalone[${l.type.name}]`):null;this.cachedInjectors.set(l.id,f)}return this.cachedInjectors.get(l.id)}ngOnDestroy(){try{for(const l of this.cachedInjectors.values())null!==l&&l.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=nn({token:s,providedIn:"environment",factory:()=>new s(or(uu))}),s})();function Xx(s){s.getStandaloneInjector=a=>a.get(EL).getOrCreateStandaloneInjector(s)}function Xv(s){return a=>{setTimeout(s,void 0,a)}}const xo=class pR extends h.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,l,c){let f=a,g=l||(()=>null),v=c;if(a&&"object"==typeof a){const I=a;f=I.next?.bind(I),g=I.error?.bind(I),v=I.complete?.bind(I)}this.__isAsync&&(g=Xv(g),f&&(f=Xv(f)),v&&(v=Xv(v)));const w=super.subscribe({next:f,error:g,complete:v});return a instanceof j.w0&&a.add(w),w}};function zI(){return this._results[vc()]()}class nm{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=vc(),c=nm.prototype;c[l]||(c[l]=zI)}get changes(){return this._changes||(this._changes=new xo)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,l){return this._results.reduce(a,l)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,l){const c=this;c.dirty=!1;const f=Ar(a);(this._changesDetected=!function wo(s,a,l){if(s.length!==a.length)return!1;for(let c=0;c<s.length;c++){let f=s[c],g=a[c];if(l&&(f=l(f),g=l(g)),g!==f)return!1}return!0}(c._results,f,l))&&(c._results=f,c.length=f.length,c.last=f[this.length-1],c.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Nf=(()=>{class s{}return s.__NG_ELEMENT_ID__=eb,s})();const Of=Nf,kr=class extends Of{constructor(a,l,c){super(),this._declarationLView=a,this._declarationTContainer=l,this.elementRef=c}createEmbeddedView(a,l){const c=this._declarationTContainer.tViews,f=df(this._declarationLView,c,a,16,null,c.declTNode,null,null,null,null,l||null);f[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(f[19]=v.createEmbeddedView(c)),Ag(c,f,a),new vf(f)}};function eb(){return Zd(rr(),Pe())}function Zd(s,a){return 4&s.type?new kr(a,s,fc(s,a)):null}let Sc=(()=>{class s{}return s.__NG_ELEMENT_ID__=qI,s})();function qI(){return WI(rr(),Pe())}const tb=Sc,rm=class extends tb{constructor(a,l,c){super(),this._lContainer=a,this._hostTNode=l,this._hostLView=c}get element(){return fc(this._hostTNode,this._hostLView)}get injector(){return new la(this._hostTNode,this._hostLView)}get parentInjector(){const a=al(this._hostTNode,this._hostLView);if($h(a)){const l=Ls(a,this._hostLView),c=sr(a);return new la(l[1].data[c+8],l)}return new la(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const l=nb(this._lContainer);return null!==l&&l[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,l,c){let f,g;"number"==typeof c?f=c:null!=c&&(f=c.index,g=c.injector);const v=a.createEmbeddedView(l||{},g);return this.insert(v,f),v}createComponent(a,l,c,f,g){const v=a&&!function gi(s){return"function"==typeof s}(a);let w;if(v)w=l;else{const B=l||{};w=B.index,c=B.injector,f=B.projectableNodes,g=B.environmentInjector||B.ngModuleRef}const I=v?a:new bf(G(a)),M=c||this.parentInjector;if(!g&&null==I.ngModule){const X=(v?M:this.parentInjector).get(uu,null);X&&(g=X)}const N=I.create(M,f,void 0,g);return this.insert(N.hostView,w),N}insert(a,l){const c=a._lView,f=c[1];if(function $u(s){return ui(s[3])}(c)){const N=this.indexOf(a);if(-1!==N)this.detach(N);else{const B=c[3],X=new rm(B,B[6],B[3]);X.detach(X.indexOf(a))}}const g=this._adjustIndex(l),v=this._lContainer;!function xF(s,a,l,c){const f=10+c,g=l.length;c>0&&(l[f-1][4]=a),c<g-10?(a[4]=l[f],Bs(l,10+c,a)):(l.push(a),a[4]=null),a[3]=l;const v=a[17];null!==v&&l!==v&&function RF(s,a){const l=s[9];a[16]!==a[3][3][16]&&(s[2]=!0),null===l?s[9]=[a]:l.push(a)}(v,a);const w=a[19];null!==w&&w.insertView(s),a[2]|=64}(f,c,v,g);const w=kE(g,v),I=c[11],M=yg(I,v[7]);return null!==M&&function AF(s,a,l,c,f,g){c[0]=f,c[6]=a,bg(s,c,l,1,f,g)}(f,v[6],I,c,M,w),a.attachToViewContainerRef(),Bs(im(v),g,a),a}move(a,l){return this.insert(a,l)}indexOf(a){const l=nb(this._lContainer);return null!==l?l.indexOf(a):-1}remove(a){const l=this._adjustIndex(a,-1),c=AE(this._lContainer,l);c&&(Eo(im(this._lContainer),l),jA(c[1],c))}detach(a){const l=this._adjustIndex(a,-1),c=AE(this._lContainer,l);return c&&null!=Eo(im(this._lContainer),l)?new vf(c):null}_adjustIndex(a,l=0){return a??this.length+l}};function nb(s){return s[8]}function im(s){return s[8]||(s[8]=[])}function WI(s,a){let l;const c=a[s.index];if(ui(c))l=c;else{let f;if(8&s.type)f=Ln(c);else{const g=a[11];f=g.createComment("");const v=Sr(s,a);Td(g,yg(g,v),f,function hy(s,a){return s.nextSibling(a)}(g,v),!1)}a[s.index]=l=wC(c,a,f,s),mc(a,l)}return new rm(l,s,a)}class KI{constructor(a){this.queryList=a,this.matches=null}clone(){return new KI(this.queryList)}setDirty(){this.queryList.setDirty()}}class ZI{constructor(a=[]){this.queries=a}createEmbeddedView(a){const l=a.queries;if(null!==l){const c=null!==a.contentQueries?a.contentQueries[0]:l.length,f=[];for(let g=0;g<c;g++){const v=l.getByIndex(g);f.push(this.queries[v.indexInDeclarationView].clone())}return new ZI(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let l=0;l<this.queries.length;l++)null!==bR(a,l).matches&&this.queries[l].setDirty()}}class gR{constructor(a,l,c=null){this.predicate=a,this.flags=l,this.read=c}}class YI{constructor(a=[]){this.queries=a}elementStart(a,l){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(a,l)}elementEnd(a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(a)}embeddedTView(a){let l=null;for(let c=0;c<this.length;c++){const f=null!==l?l.length:0,g=this.getByIndex(c).embeddedTView(a,f);g&&(g.indexInDeclarationView=c,null!==l?l.push(g):l=[g])}return null!==l?new YI(l):null}template(a,l){for(let c=0;c<this.queries.length;c++)this.queries[c].template(a,l)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class QI{constructor(a,l=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(a,l){this.isApplyingToNode(l)&&this.matchTNode(a,l)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,l){this.elementStart(a,l)}embeddedTView(a,l){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,l),new QI(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let c=a.parent;for(;null!==c&&8&c.type&&c.index!==l;)c=c.parent;return l===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(a,l){const c=this.metadata.predicate;if(Array.isArray(c))for(let f=0;f<c.length;f++){const g=c[f];this.matchTNodeWithReadOption(a,l,RL(l,g)),this.matchTNodeWithReadOption(a,l,ul(l,a,g,!1,!1))}else c===Nf?4&l.type&&this.matchTNodeWithReadOption(a,l,-1):this.matchTNodeWithReadOption(a,l,ul(l,a,c,!1,!1))}matchTNodeWithReadOption(a,l,c){if(null!==c){const f=this.metadata.read;if(null!==f)if(f===ba||f===Sc||f===Nf&&4&l.type)this.addMatch(l.index,-2);else{const g=ul(l,a,f,!1,!1);null!==g&&this.addMatch(l.index,g)}else this.addMatch(l.index,c)}}addMatch(a,l){null===this.matches?this.matches=[a,l]:this.matches.push(a,l)}}function RL(s,a){const l=s.localNames;if(null!==l)for(let c=0;c<l.length;c+=2)if(l[c]===a)return l[c+1];return null}function _R(s,a,l,c){return-1===l?function mR(s,a){return 11&s.type?fc(s,a):4&s.type?Zd(s,a):null}(a,s):-2===l?function JI(s,a,l){return l===ba?fc(a,s):l===Nf?Zd(a,s):l===Sc?WI(a,s):void 0}(s,a,c):Yi(s,s[1],l,a)}function sm(s,a,l,c){const f=a[19].queries[c];if(null===f.matches){const g=s.data,v=l.matches,w=[];for(let I=0;I<v.length;I+=2){const M=v[I];w.push(M<0?null:_R(a,g[M],v[I+1],l.metadata.read))}f.matches=w}return f.matches}function Pf(s,a,l,c){const f=s.queries.getByIndex(l),g=f.matches;if(null!==g){const v=sm(s,a,f,l);for(let w=0;w<g.length;w+=2){const I=g[w];if(I>0)c.push(v[w/2]);else{const M=g[w+1],N=a[-I];for(let B=10;B<N.length;B++){const X=N[B];X[17]===X[3]&&Pf(X[1],X,M,c)}if(null!==N[9]){const B=N[9];for(let X=0;X<B.length;X++){const ae=B[X];Pf(ae[1],ae,M,c)}}}}}return c}function rb(s){const a=Pe(),l=Qt(),c=el();qu(c+1);const f=bR(l,c);if(s.dirty&&Gl(a)===(2==(2&f.metadata.flags))){if(null===f.matches)s.reset([]);else{const g=f.crossesNgTemplate?Pf(l,a,c,[]):sm(l,a,f,c);s.reset(g,IA),s.notifyOnChanges()}return!0}return!1}function XI(s,a,l){const c=Qt();c.firstCreatePass&&(tT(c,new gR(s,a,l),-1),2==(2&a)&&(c.staticViewQueries=!0)),yR(c,Pe(),a)}function om(s,a,l,c){const f=Qt();if(f.firstCreatePass){const g=rr();tT(f,new gR(a,l,c),g.index),function vR(s,a){const l=s.contentQueries||(s.contentQueries=[]);a!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,a)}(f,s),2==(2&l)&&(f.staticContentQueries=!0)}yR(f,Pe(),l)}function eT(){return function kL(s,a){return s[19].queries[a].queryList}(Pe(),el())}function yR(s,a,l){const c=new nm(4==(4&l));gf(s,a,c,c.destroy),null===a[19]&&(a[19]=new ZI),a[19].queries.push(new KI(c))}function tT(s,a,l){null===s.queries&&(s.queries=new YI),s.queries.track(new QI(a,l))}function bR(s,a){return s.queries.getByIndex(a)}function F(...s){}const pb=new xn("Application Initializer");let dm=(()=>{class s{constructor(l){this.appInits=l,this.resolve=F,this.reject=F,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,f)=>{this.resolve=c,this.reject=f})}runInitializers(){if(this.initialized)return;const l=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const g=this.appInits[f]();if(Jy(g))l.push(g);else if($C(g)){const v=new Promise((w,I)=>{g.subscribe({complete:w,error:I})});l.push(v)}}Promise.all(l).then(()=>{c()}).catch(f=>{this.reject(f)}),0===l.length&&c(),this.initialized=!0}}return s.\u0275fac=function(l){return new(l||s)(or(pb,8))},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const lT=new xn("AppId",{providedIn:"root",factory:function Br(){return`${Yd()}${Yd()}${Yd()}`}});function Yd(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const hm=new xn("Platform Initializer"),FR=new xn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),uT=new xn("appBootstrapListener"),cT=new xn("AnimationModuleType");let LR=(()=>{class s{log(l){console.log(l)}warn(l){console.warn(l)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const fm=new xn("LocaleId",{providedIn:"root",factory:()=>T(fm,ot.Optional|ot.SkipSelf)||function VR(){return typeof $localize<"u"&&$localize.locale||Dc}()}),UR=new xn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class mb{constructor(a,l){this.ngModuleFactory=a,this.componentFactories=l}}let pm=(()=>{class s{compileModuleSync(l){return new zv(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const c=this.compileModuleSync(l),g=yl(Et(l).declarations).reduce((v,w)=>{const I=G(w);return I&&v.push(new bf(I)),v},[]);return new mb(c,g)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Bf=(()=>Promise.resolve(0))();function gm(s){typeof Zone>"u"?Bf.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Cs{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new xo(!1),this.onMicrotaskEmpty=new xo(!1),this.onStable=new xo(!1),this.onError=new xo(!1),typeof Zone>"u")throw new Se(908,!1);Zone.assertZonePatched();const f=this;if(f._nesting=0,f._outer=f._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const g=Zone.AsyncStackTaggingZoneSpec;f._inner=f._inner.fork(new g("Angular"))}Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!c&&l,f.shouldCoalesceRunChangeDetection=c,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function mm(){let s=Ft.requestAnimationFrame,a=Ft.cancelAnimationFrame;if(typeof Zone<"u"&&s&&a){const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l);const c=a[Zone.__symbol__("OriginalDelegate")];c&&(a=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function GR(s){const a=()=>{!function $R(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Ft,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,_m(s),s.isCheckStableRunning=!0,yb(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),_m(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,c,f,g,v,w)=>{try{return ym(s),l.invokeTask(f,g,v,w)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&a(),vb(s)}},onInvoke:(l,c,f,g,v,w,I)=>{try{return ym(s),l.invoke(f,g,v,w,I)}finally{s.shouldCoalesceRunChangeDetection&&a(),vb(s)}},onHasTask:(l,c,f,g)=>{l.hasTask(f,g),c===f&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,_m(s),yb(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(l,c,f,g)=>(l.handleError(f,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Cs.isInAngularZone())throw new Se(909,!1)}static assertNotInAngularZone(){if(Cs.isInAngularZone())throw new Se(909,!1)}run(a,l,c){return this._inner.run(a,l,c)}runTask(a,l,c,f){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+f,a,jR,F,F);try{return g.runTask(v,l,c)}finally{g.cancelTask(v)}}runGuarded(a,l,c){return this._inner.runGuarded(a,l,c)}runOutsideAngular(a){return this._outer.run(a)}}const jR={};function yb(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function _m(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function ym(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function vb(s){s._nesting--,yb(s)}class bb{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new xo,this.onMicrotaskEmpty=new xo,this.onStable=new xo,this.onError=new xo}run(a,l,c){return a.apply(l,c)}runGuarded(a,l,c){return a.apply(l,c)}runOutsideAngular(a){return a()}runTask(a,l,c,f){return a.apply(l,c)}}const wb=new xn(""),Qd=new xn("");let Eb,zR=(()=>{class s{constructor(l,c,f){this._ngZone=l,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Eb||(function pT(s){Eb=s}(f),f.addToWindow(c)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Cs.assertNotInAngularZone(),gm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())gm(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(l)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,c,f){let g=-1;c&&c>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),l(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:l,timeoutId:g,updateCb:f})}whenStable(l,c,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,c,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,c,f){return[]}}return s.\u0275fac=function(l){return new(l||s)(or(Cs),or(vm),or(Qd))},s.\u0275prov=nn({token:s,factory:s.\u0275fac}),s})(),vm=(()=>{class s{constructor(){this._applications=new Map}registerApplication(l,c){this._applications.set(l,c)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,c=!0){return Eb?.findTestabilityInTree(this,l,c)??null}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),Na=null;const Cb=new xn("AllowMultipleToken"),bm=new xn("PlatformDestroyListeners");class wm{constructor(a,l){this.name=a,this.token=l}}function gT(s,a,l=[]){const c=`Platform: ${a}`,f=new xn(c);return(g=[])=>{let v=Db();if(!v||v.injector.get(Cb,!1)){const w=[...l,...g,{provide:f,useValue:!0}];s?s(w):function Ib(s){if(Na&&!Na.get(Cb,!1))throw new Se(400,!1);Na=s;const a=s.get(_T);(function Em(s){const a=s.get(hm,null);a&&a.forEach(l=>l())})(s)}(function Hf(s=[],a){return Ad.create({name:a,providers:[{provide:ii,useValue:"platform"},{provide:bm,useValue:new Set([()=>Na=null])},...s]})}(w,c))}return function mT(s){const a=Db();if(!a)throw new Se(401,!1);return a}()}}function Db(){return Na?.get(_T)??null}let _T=(()=>{class s{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,c){const f=function vT(s,a){let l;return l="noop"===s?new bb:("zone.js"===s?void 0:s)||new Cs(a),l}(c?.ngZone,function yT(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(c)),g=[{provide:Cs,useValue:f}];return f.run(()=>{const v=Ad.create({providers:g,parent:this.injector,name:l.moduleType.name}),w=l.create(v),I=w.injector.get(wd,null);if(!I)throw new Se(402,!1);return f.runOutsideAngular(()=>{const M=f.onError.subscribe({next:N=>{I.handleError(N)}});w.onDestroy(()=>{Im(this._modules,w),M.unsubscribe()})}),function bT(s,a,l){try{const c=l();return Jy(c)?c.catch(f=>{throw a.runOutsideAngular(()=>s.handleError(f)),f}):c}catch(c){throw a.runOutsideAngular(()=>s.handleError(c)),c}}(I,f,()=>{const M=w.injector.get(dm);return M.runInitializers(),M.donePromise.then(()=>(function mI(s){Wt(s,"Expected localeId to be defined"),"string"==typeof s&&(yx=s.toLowerCase().replace(/_/g,"-"))}(w.injector.get(fm,Dc)||Dc),this._moduleDoBootstrap(w),w))})})}bootstrapModule(l,c=[]){const f=wT({},c);return function qR(s,a,l){const c=new zv(l);return Promise.resolve(c)}(0,0,l).then(g=>this.bootstrapModuleFactory(g,f))}_moduleDoBootstrap(l){const c=l.injector.get(Cm);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(f=>c.bootstrap(f));else{if(!l.instance.ngDoBootstrap)throw new Se(403,!1);l.instance.ngDoBootstrap(c)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Se(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const l=this._injector.get(bm,null);l&&(l.forEach(c=>c()),l.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(l){return new(l||s)(or(Ad))},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function wT(s,a){return Array.isArray(a)?a.reduce(wT,s):{...s,...a}}let Cm=(()=>{class s{constructor(l,c,f){this._zone=l,this._injector=c,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new O.y(w=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{w.next(this._stable),w.complete()})}),v=new O.y(w=>{let I;this._zone.runOutsideAngular(()=>{I=this._zone.onStable.subscribe(()=>{Cs.assertNotInAngularZone(),gm(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,w.next(!0))})})});const M=this._zone.onUnstable.subscribe(()=>{Cs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{w.next(!1)}))});return()=>{I.unsubscribe(),M.unsubscribe()}});this.isStable=(0,ce.T)(g,v.pipe((0,fe.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(l,c){const f=l instanceof nf;if(!this._injector.get(dm).done)throw!f&&Ye(l),new Se(405,false);let v;v=f?l:this._injector.get(qs).resolveComponentFactory(l),this.componentTypes.push(v.componentType);const w=function WR(s){return s.isBoundToModule}(v)?void 0:this._injector.get(qd),M=v.create(Ad.NULL,[],c||v.selector,w),N=M.location.nativeElement,B=M.injector.get(wb,null);return B?.registerApplication(N),M.onDestroy(()=>{this.detachView(M.hostView),Im(this.components,M),B?.unregisterApplication(N)}),this._loadComponent(M),M}tick(){if(this._runningTick)throw new Se(101,!1);try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const c=l;this._views.push(c),c.attachToAppRef(this)}detachView(l){const c=l;Im(this._views,c),c.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(uT,[]).concat(this._bootstrapListeners).forEach(f=>f(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return this._destroyListeners.push(l),()=>Im(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new Se(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(l){return new(l||s)(or(Cs),or(uu),or(wd))},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Im(s,a){const l=s.indexOf(a);l>-1&&s.splice(l,1)}let Sb=!0,Ab=!1;function Mb(){return Ab=!0,Sb}function ZR(){if(Ab)throw new Error("Cannot enable prod mode after platform setup.");Sb=!1}let CT=(()=>{class s{}return s.__NG_ELEMENT_ID__=IT,s})();function IT(s){return function TT(s,a,l){if(Bl(s)&&!l){const c=cn(s.index,a);return new vf(c,c)}return 47&s.type?new vf(a[16],a):null}(rr(),Pe(),16==(16&s))}class xT{constructor(){}supports(a){return Od(a)}create(a){return new KL(a)}}const WL=(s,a)=>a;class KL{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||WL}forEachItem(a){let l;for(l=this._itHead;null!==l;l=l._next)a(l)}forEachOperation(a){let l=this._itHead,c=this._removalsHead,f=0,g=null;for(;l||c;){const v=!c||l&&l.currentIndex<jf(c,f,g)?l:c,w=jf(v,f,g),I=v.currentIndex;if(v===c)f--,c=c._nextRemoved;else if(l=l._next,null==v.previousIndex)f++;else{g||(g=[]);const M=w-f,N=I-f;if(M!=N){for(let X=0;X<M;X++){const ae=X<g.length?g[X]:g[X]=0,Me=ae+X;N<=Me&&Me<M&&(g[X]=ae+1)}g[v.previousIndex]=N-M}}w!==I&&a(v,w,I)}}forEachPreviousItem(a){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachMovedItem(a){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}forEachIdentityChange(a){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)a(l)}diff(a){if(null==a&&(a=[]),!Od(a))throw new Se(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,g,v,l=this._itHead,c=!1;if(Array.isArray(a)){this.length=a.length;for(let w=0;w<this.length;w++)g=a[w],v=this._trackByFn(w,g),null!==l&&Object.is(l.trackById,v)?(c&&(l=this._verifyReinsertion(l,g,v,w)),Object.is(l.item,g)||this._addIdentityChange(l,g)):(l=this._mismatch(l,g,v,w),c=!0),l=l._next}else f=0,function Zs(s,a){if(Array.isArray(s))for(let l=0;l<s.length;l++)a(s[l]);else{const l=s[vc()]();let c;for(;!(c=l.next()).done;)a(c.value)}}(a,w=>{v=this._trackByFn(f,w),null!==l&&Object.is(l.trackById,v)?(c&&(l=this._verifyReinsertion(l,w,v,f)),Object.is(l.item,w)||this._addIdentityChange(l,w)):(l=this._mismatch(l,w,v,f),c=!0),l=l._next,f++}),this.length=f;return this._truncate(l),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,l,c,f){let g;return null===a?g=this._itTail:(g=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._reinsertAfter(a,g,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(c,f))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._moveAfter(a,g,f)):a=this._addAfter(new ZL(l,c),g,f),a}_verifyReinsertion(a,l,c,f){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==g?a=this._reinsertAfter(g,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const l=a._next;this._addToRemovals(this._unlink(a)),a=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,l,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,g=a._nextRemoved;return null===f?this._removalsHead=g:f._nextRemoved=g,null===g?this._removalsTail=f:g._prevRemoved=f,this._insertAfter(a,l,c),this._addToMoves(a,c),a}_moveAfter(a,l,c){return this._unlink(a),this._insertAfter(a,l,c),this._addToMoves(a,c),a}_addAfter(a,l,c){return this._insertAfter(a,l,c),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,l,c){const f=null===l?this._itHead:l._next;return a._next=f,a._prev=l,null===f?this._itTail=a:f._prev=a,null===l?this._itHead=a:l._next=a,null===this._linkedRecords&&(this._linkedRecords=new JR),this._linkedRecords.put(a),a.currentIndex=c,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const l=a._prev,c=a._next;return null===l?this._itHead=c:l._next=c,null===c?this._itTail=l:c._prev=l,a}_addToMoves(a,l){return a.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new JR),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,l){return a.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class ZL{constructor(a,l){this.item=a,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class YL{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,l){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===l||l<=c.currentIndex)&&Object.is(c.trackById,a))return c;return null}remove(a){const l=a._prevDup,c=a._nextDup;return null===l?this._head=c:l._nextDup=c,null===c?this._tail=l:c._prevDup=l,null===this._head}}class JR{constructor(){this.map=new Map}put(a){const l=a.trackById;let c=this.map.get(l);c||(c=new YL,this.map.set(l,c)),c.add(a)}get(a,l){const f=this.map.get(a);return f?f.get(a,l):null}remove(a){const l=a.trackById;return this.map.get(l).remove(a)&&this.map.delete(l),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function jf(s,a,l){const c=s.previousIndex;if(null===c)return c;let f=0;return l&&c<l.length&&(f=l[c]),c+a+f}class RT{constructor(){}supports(a){return a instanceof Map||gu(a)}create(){return new Fb}}class Fb{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let l;for(l=this._mapHead;null!==l;l=l._next)a(l)}forEachPreviousItem(a){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)a(l)}forEachChangedItem(a){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}diff(a){if(a){if(!(a instanceof Map||gu(a)))throw new Se(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(a,(c,f)=>{if(l&&l.key===f)this._maybeAddToChanges(l,c),this._appendAfter=l,l=l._next;else{const g=this._getOrCreateRecordForKey(f,c);l=this._insertBeforeOrAppend(l,g)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let c=l;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,l){if(a){const c=a._prev;return l._next=a,l._prev=c,a._prev=l,c&&(c._next=l),a===this._mapHead&&(this._mapHead=l),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(a,l){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,l);const g=f._prev,v=f._next;return g&&(g._next=v),v&&(v._prev=g),f._next=null,f._prev=null,f}const c=new Lb(a);return this._records.set(a,c),c.currentValue=l,this._addToAdditions(c),c}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,l){Object.is(l,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=l,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,l){a instanceof Map?a.forEach(l):Object.keys(a).forEach(c=>l(a[c],c))}}class Lb{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Sm(){return new $f([new xT])}let $f=(()=>{class s{constructor(l){this.factories=l}static create(l,c){if(null!=c){const f=c.factories.slice();l=l.concat(f)}return new s(l)}static extend(l){return{provide:s,useFactory:c=>s.create(l,c||Sm()),deps:[[s,new kt,new Je]]}}find(l){const c=this.factories.find(f=>f.supports(l));if(null!=c)return c;throw new Se(901,!1)}}return s.\u0275prov=nn({token:s,providedIn:"root",factory:Sm}),s})();function Am(){return new Gf([new RT])}let Gf=(()=>{class s{constructor(l){this.factories=l}static create(l,c){if(c){const f=c.factories.slice();l=l.concat(f)}return new s(l)}static extend(l){return{provide:s,useFactory:c=>s.create(l,c||Am()),deps:[[s,new kt,new Je]]}}find(l){const c=this.factories.find(f=>f.supports(l));if(c)return c;throw new Se(901,!1)}}return s.\u0275prov=nn({token:s,providedIn:"root",factory:Am}),s})();const OT=gT(null,"core",[]);let tk=(()=>{class s{constructor(l){}}return s.\u0275fac=function(l){return new(l||s)(or(Cm))},s.\u0275mod=It({type:s}),s.\u0275inj=jt({}),s})();function nk(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(mt,ke,U)=>{U.d(ke,{Z:()=>Se});var h=U(2090),j=U(4859),O=U(9681),ce=U(1877);class fe{constructor(Te,ve){this._delegate=Te,this.firebase=ve,(0,O._addComponent)(Te,new j.wA("app-compat",()=>this,"PUBLIC")),this.container=Te.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Te){this._delegate.automaticDataCollectionEnabled=Te}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Te=>{this._delegate.checkDestroyed(),Te()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(Te,ve=O._DEFAULT_ENTRY_NAME){var it;this._delegate.checkDestroyed();const st=this._delegate.container.getProvider(Te);return!st.isInitialized()&&"EXPLICIT"===(null===(it=st.getComponent())||void 0===it?void 0:it.instantiationMode)&&st.initialize(),st.getImmediate({identifier:ve})}_removeServiceInstance(Te,ve=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Te).clearInstance(ve)}_addComponent(Te){(0,O._addComponent)(this._delegate,Te)}_addOrOverwriteComponent(Te){(0,O._addOrOverwriteComponent)(this._delegate,Te)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const he=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),W=function Ce(){const ct=function _e(ct){const Te={},ve={__esModule:!0,initializeApp:function Ve(le,pe={}){const Ee=O.initializeApp(le,pe);if((0,h.r3)(Te,Ee.name))return Te[Ee.name];const te=new ct(Ee,ve);return Te[Ee.name]=te,te},app:st,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Ae(le){const pe=le.name,Ee=pe.replace("-compat","");if(O._registerComponent(le)&&"PUBLIC"===le.type){const te=(ie=st())=>{if("function"!=typeof ie[Ee])throw he.create("invalid-app-argument",{appName:pe});return ie[Ee]()};void 0!==le.serviceProps&&(0,h.ZB)(te,le.serviceProps),ve[Ee]=te,ct.prototype[Ee]=function(...ie){return this._getService.bind(this,pe).apply(this,le.multipleInstances?ie:[])}}return"PUBLIC"===le.type?ve[Ee]:null},removeApp:function it(le){delete Te[le]},useAsService:function Ze(le,pe){return"serverAuth"===pe?null:pe},modularAPIs:O}};function st(le){if(!(0,h.r3)(Te,le=le||O._DEFAULT_ENTRY_NAME))throw he.create("no-app",{appName:le});return Te[le]}return ve.default=ve,Object.defineProperty(ve,"apps",{get:function Oe(){return Object.keys(Te).map(le=>Te[le])}}),st.App=ct,ve}(fe);return ct.INTERNAL=Object.assign(Object.assign({},ct.INTERNAL),{createFirebaseNamespace:Ce,extendNamespace:function Te(ve){(0,h.ZB)(ct,ve)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),ct}(),K=new ce.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){K.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ct=self.firebase.SDK_VERSION;ct&&ct.indexOf("LITE")>=0&&K.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Se=W;!function Le(ct){(0,O.registerVersion)("@firebase/app-compat","0.1.33",ct)}()},9681:(mt,ke,U)=>{U.r(ke),U.d(ke,{FirebaseError:()=>ce.ZR,SDK_VERSION:()=>zi,_DEFAULT_ENTRY_NAME:()=>Wt,_addComponent:()=>un,_addOrOverwriteComponent:()=>nn,_apps:()=>In,_clearComponents:()=>ro,_components:()=>Bn,_getProvider:()=>jt,_registerComponent:()=>Kt,_removeServiceInstance:()=>Cr,deleteApp:()=>qi,getApp:()=>Hn,getApps:()=>Si,initializeApp:()=>Qr,onLog:()=>jn,registerVersion:()=>gr,setLogLevel:()=>yn});var h=U(5861),j=U(4859),O=U(1877),ce=U(2090),fe=U(8766);class be{constructor(Y){this.container=Y}getPlatformInfoString(){return this.container.getProviders().map(Q=>{if(function he($){return"VERSION"===$.getComponent()?.type}(Q)){const xe=Q.getImmediate();return`${xe.library}/${xe.version}`}return null}).filter(Q=>Q).join(" ")}}const _e="@firebase/app",W=new O.Yd("@firebase/app"),Wt="[DEFAULT]",Qe={[_e]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},In=new Map,Bn=new Map;function un($,Y){try{$.container.addComponent(Y)}catch(Q){W.debug(`Component ${Y.name} failed to register with FirebaseApp ${$.name}`,Q)}}function nn($,Y){$.container.addOrOverwriteComponent(Y)}function Kt($){const Y=$.name;if(Bn.has(Y))return W.debug(`There were multiple attempts to register component ${Y}.`),!1;Bn.set(Y,$);for(const Q of In.values())un(Q,$);return!0}function jt($,Y){const Q=$.container.getProvider("heartbeat").getImmediate({optional:!0});return Q&&Q.triggerHeartbeat(),$.container.getProvider(Y)}function Cr($,Y,Q=Wt){jt($,Y).clearInstance(Q)}function ro(){Bn.clear()}const Nn=new ce.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class ls{constructor(Y,Q,xe){this._isDeleted=!1,this._options=Object.assign({},Y),this._config=Object.assign({},Q),this._name=Q.name,this._automaticDataCollectionEnabled=Q.automaticDataCollectionEnabled,this._container=xe,this.container.addComponent(new j.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Y){this.checkDestroyed(),this._automaticDataCollectionEnabled=Y}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Y){this._isDeleted=Y}checkDestroyed(){if(this.isDeleted)throw Nn.create("app-deleted",{appName:this._name})}}const zi="9.9.4";function Qr($,Y={}){"object"!=typeof Y&&(Y={name:Y});const Q=Object.assign({name:Wt,automaticDataCollectionEnabled:!1},Y),xe=Q.name;if("string"!=typeof xe||!xe)throw Nn.create("bad-app-name",{appName:String(xe)});const Ke=In.get(xe);if(Ke){if((0,ce.vZ)($,Ke.options)&&(0,ce.vZ)(Q,Ke.config))return Ke;throw Nn.create("duplicate-app",{appName:xe})}const It=new j.H0(xe);for(const fn of Bn.values())It.addComponent(fn);const gn=new ls($,Q,It);return In.set(xe,gn),gn}function Hn($=Wt){const Y=In.get($);if(!Y)throw Nn.create("no-app",{appName:$});return Y}function Si(){return Array.from(In.values())}function qi($){return ot.apply(this,arguments)}function ot(){return(ot=(0,h.Z)(function*($){const Y=$.name;In.has(Y)&&(In.delete(Y),yield Promise.all($.container.getProviders().map(Q=>Q.delete())),$.isDeleted=!0)})).apply(this,arguments)}function gr($,Y,Q){var xe;let Ke=null!==(xe=Qe[$])&&void 0!==xe?xe:$;Q&&(Ke+=`-${Q}`);const It=Ke.match(/\s|\//),gn=Y.match(/\s|\//);if(It||gn){const fn=[`Unable to register library "${Ke}" with version "${Y}":`];return It&&fn.push(`library name "${Ke}" contains illegal characters (whitespace or "/")`),It&&gn&&fn.push("and"),gn&&fn.push(`version name "${Y}" contains illegal characters (whitespace or "/")`),void W.warn(fn.join(" "))}Kt(new j.wA(`${Ke}-version`,()=>({library:Ke,version:Y}),"VERSION"))}function jn($,Y){if(null!==$&&"function"!=typeof $)throw Nn.create("invalid-log-argument");(0,O.Am)($,Y)}function yn($){(0,O.Ub)($)}const An="firebase-heartbeat-store";let Mn=null;function Tn(){return Mn||(Mn=(0,fe.X3)("firebase-heartbeat-database",1,{upgrade:($,Y)=>{0===Y&&$.createObjectStore(An)}}).catch($=>{throw Nn.create("idb-open",{originalErrorMessage:$.message})})),Mn}function yt(){return(yt=(0,h.Z)(function*($){var Y;try{return(yield Tn()).transaction(An).objectStore(An).get(_r($))}catch(Q){if(Q instanceof ce.ZR)W.warn(Q.message);else{const xe=Nn.create("idb-get",{originalErrorMessage:null===(Y=Q)||void 0===Y?void 0:Y.message});W.warn(xe.message)}}})).apply(this,arguments)}function Ft($,Y){return $r.apply(this,arguments)}function $r(){return($r=(0,h.Z)(function*($,Y){var Q;try{const Ke=(yield Tn()).transaction(An,"readwrite");return yield Ke.objectStore(An).put(Y,_r($)),Ke.done}catch(xe){if(xe instanceof ce.ZR)W.warn(xe.message);else{const Ke=Nn.create("idb-set",{originalErrorMessage:null===(Q=xe)||void 0===Q?void 0:Q.message});W.warn(Ke.message)}}})).apply(this,arguments)}function _r($){return`${$.name}!${$.options.appId}`}class Lr{constructor(Y){this.container=Y,this._heartbeatsCache=null;const Q=this.container.getProvider("app").getImmediate();this._storage=new Yt(Q),this._heartbeatsCachePromise=this._storage.read().then(xe=>(this._heartbeatsCache=xe,xe))}triggerHeartbeat(){var Y=this;return(0,h.Z)(function*(){const xe=Y.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ke=Vt();if(null===Y._heartbeatsCache&&(Y._heartbeatsCache=yield Y._heartbeatsCachePromise),Y._heartbeatsCache.lastSentHeartbeatDate!==Ke&&!Y._heartbeatsCache.heartbeats.some(It=>It.date===Ke))return Y._heartbeatsCache.heartbeats.push({date:Ke,agent:xe}),Y._heartbeatsCache.heartbeats=Y._heartbeatsCache.heartbeats.filter(It=>{const gn=new Date(It.date).valueOf();return Date.now()-gn<=2592e6}),Y._storage.overwrite(Y._heartbeatsCache)})()}getHeartbeatsHeader(){var Y=this;return(0,h.Z)(function*(){if(null===Y._heartbeatsCache&&(yield Y._heartbeatsCachePromise),null===Y._heartbeatsCache||0===Y._heartbeatsCache.heartbeats.length)return"";const Q=Vt(),{heartbeatsToSend:xe,unsentEntries:Ke}=function Jr($,Y=1024){const Q=[];let xe=$.slice();for(const Ke of $){const It=Q.find(gn=>gn.agent===Ke.agent);if(It){if(It.dates.push(Ke.date),ee(Q)>Y){It.dates.pop();break}}else if(Q.push({agent:Ke.agent,dates:[Ke.date]}),ee(Q)>Y){Q.pop();break}xe=xe.slice(1)}return{heartbeatsToSend:Q,unsentEntries:xe}}(Y._heartbeatsCache.heartbeats),It=(0,ce.L)(JSON.stringify({version:2,heartbeats:xe}));return Y._heartbeatsCache.lastSentHeartbeatDate=Q,Ke.length>0?(Y._heartbeatsCache.heartbeats=Ke,yield Y._storage.overwrite(Y._heartbeatsCache)):(Y._heartbeatsCache.heartbeats=[],Y._storage.overwrite(Y._heartbeatsCache)),It})()}}function Vt(){return(new Date).toISOString().substring(0,10)}class Yt{constructor(Y){this.app=Y,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,ce.hl)()&&(0,ce.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Y=this;return(0,h.Z)(function*(){return(yield Y._canUseIndexedDBPromise)&&(yield function _t($){return yt.apply(this,arguments)}(Y.app))||{heartbeats:[]}})()}overwrite(Y){var Q=this;return(0,h.Z)(function*(){var xe;if(yield Q._canUseIndexedDBPromise){const It=yield Q.read();return Ft(Q.app,{lastSentHeartbeatDate:null!==(xe=Y.lastSentHeartbeatDate)&&void 0!==xe?xe:It.lastSentHeartbeatDate,heartbeats:Y.heartbeats})}})()}add(Y){var Q=this;return(0,h.Z)(function*(){var xe;if(yield Q._canUseIndexedDBPromise){const It=yield Q.read();return Ft(Q.app,{lastSentHeartbeatDate:null!==(xe=Y.lastSentHeartbeatDate)&&void 0!==xe?xe:It.lastSentHeartbeatDate,heartbeats:[...It.heartbeats,...Y.heartbeats]})}})()}}function ee($){return(0,ce.L)(JSON.stringify({version:2,heartbeats:$})).length}!function z($){Kt(new j.wA("platform-logger",Y=>new be(Y),"PRIVATE")),Kt(new j.wA("heartbeat",Y=>new Lr(Y),"PRIVATE")),gr(_e,"0.7.32",$),gr(_e,"0.7.32","esm2017"),gr("fire-js","")}("")},4859:(mt,ke,U)=>{U.d(ke,{H0:()=>_e,wA:()=>O,zt:()=>fe});var h=U(5861),j=U(2090);class O{constructor(W,K,ne){this.name=W,this.instanceFactory=K,this.type=ne,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(W){return this.instantiationMode=W,this}setMultipleInstances(W){return this.multipleInstances=W,this}setServiceProps(W){return this.serviceProps=W,this}setInstanceCreatedCallback(W){return this.onInstanceCreated=W,this}}const ce="[DEFAULT]";class fe{constructor(W,K){this.name=W,this.container=K,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(W){const K=this.normalizeInstanceIdentifier(W);if(!this.instancesDeferred.has(K)){const ne=new j.BH;if(this.instancesDeferred.set(K,ne),this.isInitialized(K)||this.shouldAutoInitialize())try{const qe=this.getOrInitializeService({instanceIdentifier:K});qe&&ne.resolve(qe)}catch{}}return this.instancesDeferred.get(K).promise}getImmediate(W){var K;const ne=this.normalizeInstanceIdentifier(W?.identifier),qe=null!==(K=W?.optional)&&void 0!==K&&K;if(!this.isInitialized(ne)&&!this.shouldAutoInitialize()){if(qe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ne})}catch(Le){if(qe)return null;throw Le}}getComponent(){return this.component}setComponent(W){if(W.name!==this.name)throw Error(`Mismatching Component ${W.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=W,this.shouldAutoInitialize()){if(function he(Ce){return"EAGER"===Ce.instantiationMode}(W))try{this.getOrInitializeService({instanceIdentifier:ce})}catch{}for(const[K,ne]of this.instancesDeferred.entries()){const qe=this.normalizeInstanceIdentifier(K);try{const Le=this.getOrInitializeService({instanceIdentifier:qe});ne.resolve(Le)}catch{}}}}clearInstance(W=ce){this.instancesDeferred.delete(W),this.instancesOptions.delete(W),this.instances.delete(W)}delete(){var W=this;return(0,h.Z)(function*(){const K=Array.from(W.instances.values());yield Promise.all([...K.filter(ne=>"INTERNAL"in ne).map(ne=>ne.INTERNAL.delete()),...K.filter(ne=>"_delete"in ne).map(ne=>ne._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(W=ce){return this.instances.has(W)}getOptions(W=ce){return this.instancesOptions.get(W)||{}}initialize(W={}){const{options:K={}}=W,ne=this.normalizeInstanceIdentifier(W.instanceIdentifier);if(this.isInitialized(ne))throw Error(`${this.name}(${ne}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const qe=this.getOrInitializeService({instanceIdentifier:ne,options:K});for(const[Le,Se]of this.instancesDeferred.entries())ne===this.normalizeInstanceIdentifier(Le)&&Se.resolve(qe);return qe}onInit(W,K){var ne;const qe=this.normalizeInstanceIdentifier(K),Le=null!==(ne=this.onInitCallbacks.get(qe))&&void 0!==ne?ne:new Set;Le.add(W),this.onInitCallbacks.set(qe,Le);const Se=this.instances.get(qe);return Se&&W(Se,qe),()=>{Le.delete(W)}}invokeOnInitCallbacks(W,K){const ne=this.onInitCallbacks.get(K);if(ne)for(const qe of ne)try{qe(W,K)}catch{}}getOrInitializeService({instanceIdentifier:W,options:K={}}){let ne=this.instances.get(W);if(!ne&&this.component&&(ne=this.component.instanceFactory(this.container,{instanceIdentifier:(Ce=W,Ce===ce?void 0:Ce),options:K}),this.instances.set(W,ne),this.instancesOptions.set(W,K),this.invokeOnInitCallbacks(ne,W),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,W,ne)}catch{}var Ce;return ne||null}normalizeInstanceIdentifier(W=ce){return this.component?this.component.multipleInstances?W:ce:W}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class _e{constructor(W){this.name=W,this.providers=new Map}addComponent(W){const K=this.getProvider(W.name);if(K.isComponentSet())throw new Error(`Component ${W.name} has already been registered with ${this.name}`);K.setComponent(W)}addOrOverwriteComponent(W){this.getProvider(W.name).isComponentSet()&&this.providers.delete(W.name),this.addComponent(W)}getProvider(W){if(this.providers.has(W))return this.providers.get(W);const K=new fe(W,this);return this.providers.set(W,K),K}getProviders(){return Array.from(this.providers.values())}}},1877:(mt,ke,U)=>{U.d(ke,{Am:()=>Ce,Ub:()=>_e,Yd:()=>he,in:()=>j});const h=[];var j=(()=>{return(W=j||(j={}))[W.DEBUG=0]="DEBUG",W[W.VERBOSE=1]="VERBOSE",W[W.INFO=2]="INFO",W[W.WARN=3]="WARN",W[W.ERROR=4]="ERROR",W[W.SILENT=5]="SILENT",j;var W})();const O={debug:j.DEBUG,verbose:j.VERBOSE,info:j.INFO,warn:j.WARN,error:j.ERROR,silent:j.SILENT},ce=j.INFO,fe={[j.DEBUG]:"log",[j.VERBOSE]:"log",[j.INFO]:"info",[j.WARN]:"warn",[j.ERROR]:"error"},be=(W,K,...ne)=>{if(K<W.logLevel)return;const qe=(new Date).toISOString(),Le=fe[K];if(!Le)throw new Error(`Attempted to log a message with an invalid logType (value: ${K})`);console[Le](`[${qe}]  ${W.name}:`,...ne)};class he{constructor(K){this.name=K,this._logLevel=ce,this._logHandler=be,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(K){if(!(K in j))throw new TypeError(`Invalid value "${K}" assigned to \`logLevel\``);this._logLevel=K}setLogLevel(K){this._logLevel="string"==typeof K?O[K]:K}get logHandler(){return this._logHandler}set logHandler(K){if("function"!=typeof K)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=K}get userLogHandler(){return this._userLogHandler}set userLogHandler(K){this._userLogHandler=K}debug(...K){this._userLogHandler&&this._userLogHandler(this,j.DEBUG,...K),this._logHandler(this,j.DEBUG,...K)}log(...K){this._userLogHandler&&this._userLogHandler(this,j.VERBOSE,...K),this._logHandler(this,j.VERBOSE,...K)}info(...K){this._userLogHandler&&this._userLogHandler(this,j.INFO,...K),this._logHandler(this,j.INFO,...K)}warn(...K){this._userLogHandler&&this._userLogHandler(this,j.WARN,...K),this._logHandler(this,j.WARN,...K)}error(...K){this._userLogHandler&&this._userLogHandler(this,j.ERROR,...K),this._logHandler(this,j.ERROR,...K)}}function _e(W){h.forEach(K=>{K.setLogLevel(W)})}function Ce(W,K){for(const ne of h){let qe=null;K&&K.level&&(qe=O[K.level]),ne.userLogHandler=null===W?null:(Le,Se,...ct)=>{const Te=ct.map(ve=>{if(null==ve)return null;if("string"==typeof ve)return ve;if("number"==typeof ve||"boolean"==typeof ve)return ve.toString();if(ve instanceof Error)return ve.message;try{return JSON.stringify(ve)}catch{return null}}).filter(ve=>ve).join(" ");Se>=(qe??Le.logLevel)&&W({level:j[Se].toLowerCase(),message:Te,args:ct,type:Le.name})}}}},8766:(mt,ke,U)=>{U.d(ke,{Lj:()=>Ve,X3:()=>st});var h=U(5861);let O,ce;const he=new WeakMap,_e=new WeakMap,Ce=new WeakMap,W=new WeakMap,K=new WeakMap;let Le={get(pe,Ee,te){if(pe instanceof IDBTransaction){if("done"===Ee)return _e.get(pe);if("objectStoreNames"===Ee)return pe.objectStoreNames||Ce.get(pe);if("store"===Ee)return te.objectStoreNames[1]?void 0:te.objectStore(te.objectStoreNames[0])}return ve(pe[Ee])},set:(pe,Ee,te)=>(pe[Ee]=te,!0),has:(pe,Ee)=>pe instanceof IDBTransaction&&("done"===Ee||"store"===Ee)||Ee in pe};function Te(pe){return"function"==typeof pe?function ct(pe){return pe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function be(){return ce||(ce=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(pe)?function(...Ee){return pe.apply(it(this),Ee),ve(he.get(this))}:function(...Ee){return ve(pe.apply(it(this),Ee))}:function(Ee,...te){const ie=pe.call(it(this),Ee,...te);return Ce.set(ie,Ee.sort?Ee.sort():[Ee]),ve(ie)}}(pe):(pe instanceof IDBTransaction&&function qe(pe){if(_e.has(pe))return;const Ee=new Promise((te,ie)=>{const ye=()=>{pe.removeEventListener("complete",de),pe.removeEventListener("error",je),pe.removeEventListener("abort",je)},de=()=>{te(),ye()},je=()=>{ie(pe.error||new DOMException("AbortError","AbortError")),ye()};pe.addEventListener("complete",de),pe.addEventListener("error",je),pe.addEventListener("abort",je)});_e.set(pe,Ee)}(pe),((pe,Ee)=>Ee.some(te=>pe instanceof te))(pe,function fe(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(pe,Le):pe)}function ve(pe){if(pe instanceof IDBRequest)return function ne(pe){const Ee=new Promise((te,ie)=>{const ye=()=>{pe.removeEventListener("success",de),pe.removeEventListener("error",je)},de=()=>{te(ve(pe.result)),ye()},je=()=>{ie(pe.error),ye()};pe.addEventListener("success",de),pe.addEventListener("error",je)});return Ee.then(te=>{te instanceof IDBCursor&&he.set(te,pe)}).catch(()=>{}),K.set(Ee,pe),Ee}(pe);if(W.has(pe))return W.get(pe);const Ee=Te(pe);return Ee!==pe&&(W.set(pe,Ee),K.set(Ee,pe)),Ee}const it=pe=>K.get(pe);function st(pe,Ee,{blocked:te,upgrade:ie,blocking:ye,terminated:de}={}){const je=indexedDB.open(pe,Ee),$e=ve(je);return ie&&je.addEventListener("upgradeneeded",wt=>{ie(ve(je.result),wt.oldVersion,wt.newVersion,ve(je.transaction))}),te&&je.addEventListener("blocked",()=>te()),$e.then(wt=>{de&&wt.addEventListener("close",()=>de()),ye&&wt.addEventListener("versionchange",()=>ye())}).catch(()=>{}),$e}function Ve(pe,{blocked:Ee}={}){const te=indexedDB.deleteDatabase(pe);return Ee&&te.addEventListener("blocked",()=>Ee()),ve(te).then(()=>{})}const Oe=["get","getKey","getAll","getAllKeys","count"],Ae=["put","add","delete","clear"],Ze=new Map;function le(pe,Ee){if(!(pe instanceof IDBDatabase)||Ee in pe||"string"!=typeof Ee)return;if(Ze.get(Ee))return Ze.get(Ee);const te=Ee.replace(/FromIndex$/,""),ie=Ee!==te,ye=Ae.includes(te);if(!(te in(ie?IDBIndex:IDBObjectStore).prototype)||!ye&&!Oe.includes(te))return;const de=function(){var je=(0,h.Z)(function*($e,...wt){const tn=this.transaction($e,ye?"readwrite":"readonly");let Wt=tn.store;return ie&&(Wt=Wt.index(wt.shift())),(yield Promise.all([Wt[te](...wt),ye&&tn.done]))[0]});return function(wt){return je.apply(this,arguments)}}();return Ze.set(Ee,de),de}!function Se(pe){Le=pe(Le)}(pe=>({...pe,get:(Ee,te,ie)=>le(Ee,te)||pe.get(Ee,te,ie),has:(Ee,te)=>!!le(Ee,te)||pe.has(Ee,te)}))},5861:(mt,ke,U)=>{function h(O,ce,fe,be,he,_e,Ce){try{var W=O[_e](Ce),K=W.value}catch(ne){return void fe(ne)}W.done?ce(K):Promise.resolve(K).then(be,he)}function j(O){return function(){var ce=this,fe=arguments;return new Promise(function(be,he){var _e=O.apply(ce,fe);function Ce(K){h(_e,be,he,Ce,W,"next",K)}function W(K){h(_e,be,he,Ce,W,"throw",K)}Ce(void 0)})}}U.d(ke,{Z:()=>j})}},mt=>{mt(mt.s=9589)}]);