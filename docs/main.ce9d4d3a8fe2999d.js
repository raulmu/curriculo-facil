"use strict";(self.webpackChunkcurriculo_facil=self.webpackChunkcurriculo_facil||[]).push([[179],{2011:(ht,ke,L)=>{L.d(ke,{Dh:()=>me,GT:()=>ye,cc:()=>Ne,hO:()=>Ge,on:()=>W,pX:()=>de,xv:()=>we});var l=L(4650),H=L(127),P=L(5813);ht=L.hmd(ht);const ce=["ngOnDestroy"],de=(_e,it,rt,Fe={})=>new Proxy(_e,{get:(Re,Se)=>rt.runOutsideAngular(()=>{var We;if(_e[Se])return!(null===(We=Fe?.spy)||void 0===We)&&We.get&&Fe.spy.get(Se,_e[Se]),_e[Se];if(ce.indexOf(Se)>-1)return()=>{};const le=it.toPromise().then(he=>{const be=he&&he[Se];return"function"==typeof be?be.bind(he):be&&be.then?be.then(J=>rt.run(()=>J)):rt.run(()=>be)});return new Proxy(()=>{},{get:(he,be)=>le[be],apply:(he,be,J)=>le.then(ne=>{var ge;const ue=ne&&ne(...J);return!(null===(ge=Fe?.spy)||void 0===ge)&&ge.apply&&Fe.spy.apply(Se,J,ue),ue})})})}),ye=(_e,it)=>{it.forEach(rt=>{Object.getOwnPropertyNames(rt.prototype||rt).forEach(Fe=>{Object.defineProperty(_e.prototype,Fe,Object.getOwnPropertyDescriptor(rt.prototype||rt,Fe))})})};class ae{constructor(it){return it}}const me=new l.OlP("angularfire2.app.options"),we=new l.OlP("angularfire2.app.name");function W(_e,it,rt){const Re="object"==typeof rt&&rt||{};Re.name=Re.name||"string"==typeof rt&&rt||"[DEFAULT]";const We=H.Z.apps.filter(le=>le&&le.name===Re.name)[0]||it.runOutsideAngular(()=>H.Z.initializeApp(_e,Re));try{JSON.stringify(_e)!==JSON.stringify(We.options)&&Y("error",`${We.name} Firebase App already initialized with different options${ht.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ae(We)}const Y=(_e,...it)=>{(0,l.X6Q)()&&typeof console<"u"&&console[_e](...it)},ee={provide:ae,useFactory:W,deps:[me,l.R0b,[new l.FiY,we]]};let Ge=(()=>{class _e{constructor(rt){H.Z.registerVersion("angularfire",P.q4.full,"core"),H.Z.registerVersion("angularfire",P.q4.full,"app-compat"),H.Z.registerVersion("angular",l.q4F.full,rt.toString())}static initializeApp(rt,Fe){return{ngModule:_e,providers:[{provide:me,useValue:rt},{provide:we,useValue:Fe}]}}}return _e.\u0275fac=function(rt){return new(rt||_e)(l.LFG(l.Lbi))},_e.\u0275mod=l.oAB({type:_e}),_e.\u0275inj=l.cJS({providers:[ee]}),_e})();function Ne(_e,it,rt,Fe,Re){const[,Se,We]=globalThis.\u0275AngularfireInstanceCache.find(le=>le[0]===_e)||[];if(Se)return function Ie(_e,it){try{return _e.toString()===it.toString()}catch{return _e===it}}(Re,We)||(Ee("error",`${it} was already initialized on the ${rt} Firebase App with different settings.${lt?" You may need to reload as Firebase is not HMR aware.":""}`),Ee("warn",{is:Re,was:We})),Se;{const le=Fe();return globalThis.\u0275AngularfireInstanceCache.push([_e,le,Re]),le}}const lt=!!ht.hot,Ee=(_e,...it)=>{(0,l.X6Q)()&&typeof console<"u"&&console[_e](...it)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ht,ke,L)=>{L.d(ke,{q4:()=>_r,iC:()=>zr,fc:()=>Ba,HU:()=>La,vb:()=>Ac,JM:()=>Tc});var l=L(4650),H=L(5867),P=L(5861),ce=L(9681),de=L(2090),ye=L(4859),ae=L(1877),me=L(8766);const we="@firebase/installations",W="0.5.12",ee=`w:${W}`,Ge="FIS_v2",it=new de.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function rt(S){return S instanceof de.ZR&&S.code.includes("request-failed")}function Fe({projectId:S}){return`https://firebaseinstallations.googleapis.com/v1/projects/${S}/installations`}function Re(S){return{token:S.token,requestStatus:2,expiresIn:ne(S.expiresIn),creationTime:Date.now()}}function Se(S,T){return We.apply(this,arguments)}function We(){return(We=(0,P.Z)(function*(S,T){const U=(yield T.json()).error;return it.create("request-failed",{requestName:S,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function le({apiKey:S}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":S})}function he(S,{refreshToken:T}){const k=le(S);return k.append("Authorization",function ge(S){return`${Ge} ${S}`}(T)),k}function be(S){return J.apply(this,arguments)}function J(){return(J=(0,P.Z)(function*(S){const T=yield S();return T.status>=500&&T.status<600?S():T})).apply(this,arguments)}function ne(S){return Number(S.replace("s","000"))}function ue(S,T){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,P.Z)(function*({appConfig:S,heartbeatServiceProvider:T},{fid:k}){const U=Fe(S),te=le(S),fe=T.getImmediate({optional:!0});if(fe){const kt=yield fe.getHeartbeatsHeader();kt&&te.append("x-firebase-client",kt)}const Ke={method:"POST",headers:te,body:JSON.stringify({fid:k,authVersion:Ge,appId:S.appId,sdkVersion:ee})},wt=yield be(()=>fetch(U,Ke));if(wt.ok){const kt=yield wt.json();return{fid:kt.fid||k,registrationStatus:2,refreshToken:kt.refreshToken,authToken:Re(kt.authToken)}}throw yield Se("Create Installation",wt)})).apply(this,arguments)}function He(S){return new Promise(T=>{setTimeout(T,S)})}const en=/^[cdef][\w-]{21}$/;function Ze(){try{const S=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(S),S[0]=112+S[0]%16;const k=function En(S){return function yt(S){return btoa(String.fromCharCode(...S)).replace(/\+/g,"-").replace(/\//g,"_")}(S).substr(0,22)}(S);return en.test(k)?k:""}catch{return""}}function jn(S){return`${S.appName}!${S.appId}`}const an=new Map;function tn(S,T){const k=jn(S);xi(k,T),function wo(S,T){const k=function Pn(){return!Ri&&"BroadcastChannel"in self&&(Ri=new BroadcastChannel("[Firebase] FID Change"),Ri.onmessage=S=>{xi(S.data.key,S.data.fid)}),Ri}();k&&k.postMessage({key:S,fid:T}),function vs(){0===an.size&&Ri&&(Ri.close(),Ri=null)}()}(k,T)}function xi(S,T){const k=an.get(S);if(k)for(const U of k)U(T)}let Ri=null;const $n="firebase-installations-store";let Ur=null;function rs(){return Ur||(Ur=(0,me.X3)("firebase-installations-database",1,{upgrade:(S,T)=>{0===T&&S.createObjectStore($n)}})),Ur}function st(S,T){return Di.apply(this,arguments)}function Di(){return(Di=(0,P.Z)(function*(S,T){const k=jn(S),te=(yield rs()).transaction($n,"readwrite"),fe=te.objectStore($n),Pe=yield fe.get(k);return yield fe.put(T,k),yield te.done,(!Pe||Pe.fid!==T.fid)&&tn(S,T.fid),T})).apply(this,arguments)}function Gn(S){return yn.apply(this,arguments)}function yn(){return(yn=(0,P.Z)(function*(S){const T=jn(S),U=(yield rs()).transaction($n,"readwrite");yield U.objectStore($n).delete(T),yield U.done})).apply(this,arguments)}function Ii(S,T){return ss.apply(this,arguments)}function ss(){return(ss=(0,P.Z)(function*(S,T){const k=jn(S),te=(yield rs()).transaction($n,"readwrite"),fe=te.objectStore($n),Pe=yield fe.get(k),Ke=T(Pe);return void 0===Ke?yield fe.delete(k):yield fe.put(Ke,k),yield te.done,Ke&&(!Pe||Pe.fid!==Ke.fid)&&tn(S,Ke.fid),Ke})).apply(this,arguments)}function Mn(S){return kn.apply(this,arguments)}function kn(){return(kn=(0,P.Z)(function*(S){let T;const k=yield Ii(S.appConfig,U=>{const te=Dn(U),fe=pt(S,te);return T=fe.registrationPromise,fe.installationEntry});return""===k.fid?{installationEntry:yield T}:{installationEntry:k,registrationPromise:T}})).apply(this,arguments)}function Dn(S){return Mt(S||{fid:Ze(),registrationStatus:0})}function pt(S,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(it.create("app-offline"))};const k={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},U=function mt(S,T){return Nt.apply(this,arguments)}(S,k);return{installationEntry:k,registrationPromise:U}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:nr(S)}:{installationEntry:T}}function Nt(){return(Nt=(0,P.Z)(function*(S,T){try{const k=yield ue(S,T);return st(S.appConfig,k)}catch(k){throw rt(k)&&409===k.customData.serverCode?yield Gn(S.appConfig):yield st(S.appConfig,{fid:T.fid,registrationStatus:0}),k}})).apply(this,arguments)}function nr(S){return Si.apply(this,arguments)}function Si(){return(Si=(0,P.Z)(function*(S){let T=yield Oi(S.appConfig);for(;1===T.registrationStatus;)yield He(100),T=yield Oi(S.appConfig);if(0===T.registrationStatus){const{installationEntry:k,registrationPromise:U}=yield Mn(S);return U||k}return T})).apply(this,arguments)}function Oi(S){return Ii(S,T=>{if(!T)throw it.create("installation-not-found");return Mt(T)})}function Mt(S){return function qi(S){return 1===S.registrationStatus&&S.registrationTime+1e4<Date.now()}(S)?{fid:S.fid,registrationStatus:0}:S}function Lt(S,T){return hr.apply(this,arguments)}function hr(){return(hr=(0,P.Z)(function*({appConfig:S,heartbeatServiceProvider:T},k){const U=Zt(S,k),te=he(S,k),fe=T.getImmediate({optional:!0});if(fe){const kt=yield fe.getHeartbeatsHeader();kt&&te.append("x-firebase-client",kt)}const Ke={method:"POST",headers:te,body:JSON.stringify({installation:{sdkVersion:ee,appId:S.appId}})},wt=yield be(()=>fetch(U,Ke));if(wt.ok)return Re(yield wt.json());throw yield Se("Generate Auth Token",wt)})).apply(this,arguments)}function Zt(S,{fid:T}){return`${Fe(S)}/${T}/authTokens:generate`}function X(S){return G.apply(this,arguments)}function G(){return(G=(0,P.Z)(function*(S,T=!1){let k;const U=yield Ii(S.appConfig,fe=>{if(!Ct(fe))throw it.create("not-registered");const Pe=fe.authToken;if(!T&&pn(Pe))return fe;if(1===Pe.requestStatus)return k=j(S,T),fe;{if(!navigator.onLine)throw it.create("app-offline");const Ke=oi(fe);return k=Ae(S,Ke),Ke}});return k?yield k:U.authToken})).apply(this,arguments)}function j(S,T){return Z.apply(this,arguments)}function Z(){return(Z=(0,P.Z)(function*(S,T){let k=yield K(S.appConfig);for(;1===k.authToken.requestStatus;)yield He(100),k=yield K(S.appConfig);const U=k.authToken;return 0===U.requestStatus?X(S,T):U})).apply(this,arguments)}function K(S){return Ii(S,T=>{if(!Ct(T))throw it.create("not-registered");return function re(S){return 1===S.requestStatus&&S.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function Ae(S,T){return qe.apply(this,arguments)}function qe(){return(qe=(0,P.Z)(function*(S,T){try{const k=yield Lt(S,T),U=Object.assign(Object.assign({},T),{authToken:k});return yield st(S.appConfig,U),k}catch(k){if(!rt(k)||401!==k.customData.serverCode&&404!==k.customData.serverCode){const U=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield st(S.appConfig,U)}else yield Gn(S.appConfig);throw k}})).apply(this,arguments)}function Ct(S){return void 0!==S&&2===S.registrationStatus}function pn(S){return 2===S.requestStatus&&!function fn(S){const T=Date.now();return T<S.creationTime||S.creationTime+S.expiresIn<T+36e5}(S)}function oi(S){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},S),{authToken:T})}function q(){return(q=(0,P.Z)(function*(S){const T=S,{installationEntry:k,registrationPromise:U}=yield Mn(T);return U?U.catch(console.error):X(T).catch(console.error),k.fid})).apply(this,arguments)}function Ye(){return(Ye=(0,P.Z)(function*(S,T=!1){const k=S;return yield vt(k),(yield X(k,T)).token})).apply(this,arguments)}function vt(S){return It.apply(this,arguments)}function It(){return(It=(0,P.Z)(function*(S){const{registrationPromise:T}=yield Mn(S);T&&(yield T)})).apply(this,arguments)}function Co(S){return it.create("missing-app-config-values",{valueName:S})}const Eo="installations",Do=S=>{const T=S.getProvider("app").getImmediate(),k=function Rn(S){if(!S||!S.options)throw Co("App Configuration");if(!S.name)throw Co("App Name");const T=["projectId","apiKey","appId"];for(const k of T)if(!S.options[k])throw Co(k);return{appName:S.name,projectId:S.options.projectId,apiKey:S.options.apiKey,appId:S.options.appId}}(T);return{app:T,appConfig:k,heartbeatServiceProvider:(0,ce._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},aa=S=>{const T=S.getProvider("app").getImmediate(),k=(0,ce._getProvider)(T,Eo).getImmediate();return{getId:()=>function $(S){return q.apply(this,arguments)}(k),getToken:te=>function Ce(S){return Ye.apply(this,arguments)}(k,te)}};(function dc(){(0,ce._registerComponent)(new ye.wA(Eo,Do,"PUBLIC")),(0,ce._registerComponent)(new ye.wA("installations-internal",aa,"PRIVATE"))})(),(0,ce.registerVersion)(we,W),(0,ce.registerVersion)(we,W,"esm2017");const ws="@firebase/remote-config",ei=new de.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class cu{constructor(T,k,U,te){this.client=T,this.storage=k,this.storageCache=U,this.logger=te}isCachedDataFresh(T,k){if(!k)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-k,te=U<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${te}.`),te}fetch(T){var k=this;return(0,P.Z)(function*(){const[U,te]=yield Promise.all([k.storage.getLastSuccessfulFetchTimestampMillis(),k.storage.getLastSuccessfulFetchResponse()]);if(te&&k.isCachedDataFresh(T.cacheMaxAgeMillis,U))return te;T.eTag=te&&te.eTag;const fe=yield k.client.fetch(T),Pe=[k.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===fe.status&&Pe.push(k.storage.setLastSuccessfulFetchResponse(fe)),yield Promise.all(Pe),fe})()}}function ul(S=navigator){return S.languages&&S.languages[0]||S.language}class Ao{constructor(T,k,U,te,fe,Pe){this.firebaseInstallations=T,this.sdkVersion=k,this.namespace=U,this.projectId=te,this.apiKey=fe,this.appId=Pe}fetch(T){var k=this;return(0,P.Z)(function*(){var U,te,fe;const[Pe,Ke]=yield Promise.all([k.firebaseInstallations.getId(),k.firebaseInstallations.getToken()]),kt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${k.projectId}/namespaces/${k.namespace}:fetch?key=${k.apiKey}`,$t={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},Et={sdk_version:k.sdkVersion,app_instance_id:Pe,app_instance_id_token:Ke,app_id:k.appId,language_code:ul()},di={method:"POST",headers:$t,body:JSON.stringify(Et)},Vi=fetch(kt,di),Pl=new Promise((Ll,Ha)=>{T.signal.addEventListener(()=>{const Vl=new Error("The operation was aborted.");Vl.name="AbortError",Ha(Vl)})});let Nl;try{yield Promise.race([Vi,Pl]),Nl=yield Vi}catch(Ll){let Ha="fetch-client-network";throw"AbortError"===(null===(U=Ll)||void 0===U?void 0:U.name)&&(Ha="fetch-timeout"),ei.create(Ha,{originalErrorMessage:null===(te=Ll)||void 0===te?void 0:te.message})}let Fl=Nl.status;const Vo=Nl.headers.get("ETag")||void 0;let so,kc;if(200===Nl.status){let Ll;try{Ll=yield Nl.json()}catch(Ha){throw ei.create("fetch-client-parse",{originalErrorMessage:null===(fe=Ha)||void 0===fe?void 0:fe.message})}so=Ll.entries,kc=Ll.state}if("INSTANCE_STATE_UNSPECIFIED"===kc?Fl=500:"NO_CHANGE"===kc?Fl=304:("NO_TEMPLATE"===kc||"EMPTY_CONFIG"===kc)&&(so={}),304!==Fl&&200!==Fl)throw ei.create("fetch-status",{httpStatus:Fl});return{status:Fl,eTag:Vo,config:so}})()}}class Ds{constructor(T,k){this.client=T,this.storage=k}fetch(T){var k=this;return(0,P.Z)(function*(){const U=(yield k.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return k.attemptFetch(T,U)})()}attemptFetch(T,{throttleEndTimeMillis:k,backoffCount:U}){var te=this;return(0,P.Z)(function*(){yield function Ir(S,T){return new Promise((k,U)=>{const te=Math.max(T-Date.now(),0),fe=setTimeout(k,te);S.addEventListener(()=>{clearTimeout(fe),U(ei.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,k);try{const fe=yield te.client.fetch(T);return yield te.storage.deleteThrottleMetadata(),fe}catch(fe){if(!function Cm(S){if(!(S instanceof de.ZR&&S.customData))return!1;const T=Number(S.customData.httpStatus);return 429===T||500===T||503===T||504===T}(fe))throw fe;const Pe={throttleEndTimeMillis:Date.now()+(0,de.$s)(U),backoffCount:U+1};return yield te.storage.setThrottleMetadata(Pe),te.attemptFetch(T,Pe)}})()}}class fc{constructor(T,k,U,te,fe){this.app=T,this._client=k,this._storageCache=U,this._storage=te,this._logger=fe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function dl(S,T){var k;const U=S.target.error||void 0;return ei.create(T,{originalErrorMessage:U&&(null===(k=U)||void 0===k?void 0:k.message)})}const ua="app_namespace_store";class wd{constructor(T,k,U,te=function Im(){return new Promise((S,T)=>{var k;try{const U=indexedDB.open("firebase_remote_config",1);U.onerror=te=>{T(dl(te,"storage-open"))},U.onsuccess=te=>{S(te.target.result)},U.onupgradeneeded=te=>{0===te.oldVersion&&te.target.result.createObjectStore(ua,{keyPath:"compositeKey"})}}catch(U){T(ei.create("storage-open",{originalErrorMessage:null===(k=U)||void 0===k?void 0:k.message}))}})}()){this.appId=T,this.appName=k,this.namespace=U,this.openDbPromise=te}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var k=this;return(0,P.Z)(function*(){const U=yield k.openDbPromise;return new Promise((te,fe)=>{var Pe;const wt=U.transaction([ua],"readonly").objectStore(ua),kt=k.createCompositeKey(T);try{const $t=wt.get(kt);$t.onerror=Et=>{fe(dl(Et,"storage-get"))},$t.onsuccess=Et=>{const di=Et.target.result;te(di?di.value:void 0)}}catch($t){fe(ei.create("storage-get",{originalErrorMessage:null===(Pe=$t)||void 0===Pe?void 0:Pe.message}))}})})()}set(T,k){var U=this;return(0,P.Z)(function*(){const te=yield U.openDbPromise;return new Promise((fe,Pe)=>{var Ke;const kt=te.transaction([ua],"readwrite").objectStore(ua),$t=U.createCompositeKey(T);try{const Et=kt.put({compositeKey:$t,value:k});Et.onerror=di=>{Pe(dl(di,"storage-set"))},Et.onsuccess=()=>{fe()}}catch(Et){Pe(ei.create("storage-set",{originalErrorMessage:null===(Ke=Et)||void 0===Ke?void 0:Ke.message}))}})})()}delete(T){var k=this;return(0,P.Z)(function*(){const U=yield k.openDbPromise;return new Promise((te,fe)=>{var Pe;const wt=U.transaction([ua],"readwrite").objectStore(ua),kt=k.createCompositeKey(T);try{const $t=wt.delete(kt);$t.onerror=Et=>{fe(dl(Et,"storage-delete"))},$t.onsuccess=()=>{te()}}catch($t){fe(ei.create("storage-delete",{originalErrorMessage:null===(Pe=$t)||void 0===Pe?void 0:Pe.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class da{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,P.Z)(function*(){const k=T.storage.getLastFetchStatus(),U=T.storage.getLastSuccessfulFetchTimestampMillis(),te=T.storage.getActiveConfig(),fe=yield k;fe&&(T.lastFetchStatus=fe);const Pe=yield U;Pe&&(T.lastSuccessfulFetchTimestampMillis=Pe);const Ke=yield te;Ke&&(T.activeConfig=Ke)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function _y(){return pc.apply(this,arguments)}function pc(){return(pc=(0,P.Z)(function*(){if(!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch{return!1}})).apply(this,arguments)}!function Cd(){(0,ce._registerComponent)(new ye.wA("remote-config",function S(T,{instanceIdentifier:k}){const U=T.getProvider("app").getImmediate(),te=T.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw ei.create("registration-window");if(!(0,de.hl)())throw ei.create("indexed-db-unavailable");const{projectId:fe,apiKey:Pe,appId:Ke}=U.options;if(!fe)throw ei.create("registration-project-id");if(!Pe)throw ei.create("registration-api-key");if(!Ke)throw ei.create("registration-app-id");const wt=new wd(Ke,U.name,k=k||"firebase"),kt=new da(wt),$t=new ae.Yd(ws);$t.logLevel=ae.in.ERROR;const Et=new Ao(te,ce.SDK_VERSION,k,fe,Pe,Ke),di=new Ds(Et,wt),Vi=new cu(di,wt,kt,$t),Pl=new fc(U,Vi,kt,wt,$t);return function bn(S){const T=(0,de.m9)(S);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(Pl),Pl},"PUBLIC").setMultipleInstances(!0)),(0,ce.registerVersion)(ws,"0.3.11"),(0,ce.registerVersion)(ws,"0.3.11","esm2017")}();const Pi="/firebase-messaging-sw.js",fa="/firebase-cloud-messaging-push-scope",Zs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",mc="google.c.a.c_id",uu="google.c.a.c_l",Id="google.c.a.ts",pa="google.c.a.e";var Sr=(()=>{return(S=Sr||(Sr={})).PUSH_RECEIVED="push-received",S.NOTIFICATION_CLICKED="notification-clicked",Sr;var S})();function Is(S){const T=new Uint8Array(S);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function mr(S){const k=(S+"=".repeat((4-S.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(k),te=new Uint8Array(U.length);for(let fe=0;fe<U.length;++fe)te[fe]=U.charCodeAt(fe);return te}const Mo="fcm_token_details_db",ga="fcm_token_object_Store";function Sm(S){return du.apply(this,arguments)}function du(){return du=(0,P.Z)(function*(S){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(fe=>fe.name).includes(Mo))return null;let T=null;return(yield(0,me.X3)(Mo,5,{upgrade:(U=(0,P.Z)(function*(te,fe,Pe,Ke){var wt;if(fe<2||!te.objectStoreNames.contains(ga))return;const kt=Ke.objectStore(ga),$t=yield kt.index("fcmSenderId").get(S);if(yield kt.clear(),$t)if(2===fe){const Et=$t;if(!Et.auth||!Et.p256dh||!Et.endpoint)return;T={token:Et.fcmToken,createTime:null!==(wt=Et.createTime)&&void 0!==wt?wt:Date.now(),subscriptionOptions:{auth:Et.auth,p256dh:Et.p256dh,endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:"string"==typeof Et.vapidKey?Et.vapidKey:Is(Et.vapidKey)}}}else if(3===fe){const Et=$t;T={token:Et.fcmToken,createTime:Et.createTime,subscriptionOptions:{auth:Is(Et.auth),p256dh:Is(Et.p256dh),endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:Is(Et.vapidKey)}}}else if(4===fe){const Et=$t;T={token:Et.fcmToken,createTime:Et.createTime,subscriptionOptions:{auth:Is(Et.auth),p256dh:Is(Et.p256dh),endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:Is(Et.vapidKey)}}}}),function(fe,Pe,Ke,wt){return U.apply(this,arguments)})})).close(),yield(0,me.Lj)(Mo),yield(0,me.Lj)("fcm_vapid_details_db"),yield(0,me.Lj)("undefined"),Bn(T)?T:null;var U}),du.apply(this,arguments)}function Bn(S){if(!S||!S.subscriptionOptions)return!1;const{subscriptionOptions:T}=S;return"number"==typeof S.createTime&&S.createTime>0&&"string"==typeof S.token&&S.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const jr="firebase-messaging-store";let Ni=null;function gc(){return Ni||(Ni=(0,me.X3)("firebase-messaging-database",1,{upgrade:(S,T)=>{0===T&&S.createObjectStore(jr)}})),Ni}function ko(S){return os.apply(this,arguments)}function os(){return(os=(0,P.Z)(function*(S){const T=Ar(S),U=yield(yield gc()).transaction(jr).objectStore(jr).get(T);if(U)return U;{const te=yield Sm(S.appConfig.senderId);if(te)return yield cn(S,te),te}})).apply(this,arguments)}function cn(S,T){return _c.apply(this,arguments)}function _c(){return(_c=(0,P.Z)(function*(S,T){const k=Ar(S),te=(yield gc()).transaction(jr,"readwrite");return yield te.objectStore(jr).put(T,k),yield te.done,T})).apply(this,arguments)}function Ks(S){return hu.apply(this,arguments)}function hu(){return(hu=(0,P.Z)(function*(S){const T=Ar(S),U=(yield gc()).transaction(jr,"readwrite");yield U.objectStore(jr).delete(T),yield U.done})).apply(this,arguments)}function Ar({appConfig:S}){return S.appId}const zn=new de.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Pt(S,T){return fl.apply(this,arguments)}function fl(){return(fl=(0,P.Z)(function*(S,T){var k;const U=yield gl(S),te=Oe(T),fe={method:"POST",headers:U,body:JSON.stringify(te)};let Pe;try{Pe=yield(yield fetch(xo(S.appConfig),fe)).json()}catch(Ke){throw zn.create("token-subscribe-failed",{errorInfo:null===(k=Ke)||void 0===k?void 0:k.toString()})}if(Pe.error)throw zn.create("token-subscribe-failed",{errorInfo:Pe.error.message});if(!Pe.token)throw zn.create("token-subscribe-no-token");return Pe.token})).apply(this,arguments)}function Tm(S,T){return pl.apply(this,arguments)}function pl(){return(pl=(0,P.Z)(function*(S,T){var k;const U=yield gl(S),te=Oe(T.subscriptionOptions),fe={method:"PATCH",headers:U,body:JSON.stringify(te)};let Pe;try{Pe=yield(yield fetch(`${xo(S.appConfig)}/${T.token}`,fe)).json()}catch(Ke){throw zn.create("token-update-failed",{errorInfo:null===(k=Ke)||void 0===k?void 0:k.toString()})}if(Pe.error)throw zn.create("token-update-failed",{errorInfo:Pe.error.message});if(!Pe.token)throw zn.create("token-update-no-token");return Pe.token})).apply(this,arguments)}function Td(S,T){return ml.apply(this,arguments)}function ml(){return(ml=(0,P.Z)(function*(S,T){var k;const te={method:"DELETE",headers:yield gl(S)};try{const Pe=yield(yield fetch(`${xo(S.appConfig)}/${T}`,te)).json();if(Pe.error)throw zn.create("token-unsubscribe-failed",{errorInfo:Pe.error.message})}catch(fe){throw zn.create("token-unsubscribe-failed",{errorInfo:null===(k=fe)||void 0===k?void 0:k.toString()})}})).apply(this,arguments)}function xo({projectId:S}){return`https://fcmregistrations.googleapis.com/v1/projects/${S}/registrations`}function gl(S){return _a.apply(this,arguments)}function _a(){return(_a=(0,P.Z)(function*({appConfig:S,installations:T}){const k=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":S.apiKey,"x-goog-firebase-installations-auth":`FIS ${k}`})})).apply(this,arguments)}function Oe({p256dh:S,auth:T,endpoint:k,vapidKey:U}){const te={web:{endpoint:k,auth:T,p256dh:S}};return U!==Zs&&(te.web.applicationPubKey=U),te}const Kt=6048e5;function hf(S){return ya.apply(this,arguments)}function ya(){return(ya=(0,P.Z)(function*(S){const T=yield ff(S.swRegistration,S.vapidKey),k={vapidKey:S.vapidKey,swScope:S.swRegistration.scope,endpoint:T.endpoint,auth:Is(T.getKey("auth")),p256dh:Is(T.getKey("p256dh"))},U=yield ko(S.firebaseDependencies);if(U){if(Am(U.subscriptionOptions,k))return Date.now()>=U.createTime+Kt?yc(S,{token:U.token,createTime:Date.now(),subscriptionOptions:k}):U.token;try{yield Td(S.firebaseDependencies,U.token)}catch(te){console.warn(te)}return vc(S.firebaseDependencies,k)}return vc(S.firebaseDependencies,k)})).apply(this,arguments)}function li(S){return va.apply(this,arguments)}function va(){return(va=(0,P.Z)(function*(S){const T=yield ko(S.firebaseDependencies);T&&(yield Td(S.firebaseDependencies,T.token),yield Ks(S.firebaseDependencies));const k=yield S.swRegistration.pushManager.getSubscription();return!k||k.unsubscribe()})).apply(this,arguments)}function yc(S,T){return ir.apply(this,arguments)}function ir(){return(ir=(0,P.Z)(function*(S,T){try{const k=yield Tm(S.firebaseDependencies,T),U=Object.assign(Object.assign({},T),{token:k,createTime:Date.now()});return yield cn(S.firebaseDependencies,U),k}catch(k){throw yield li(S),k}})).apply(this,arguments)}function vc(S,T){return ba.apply(this,arguments)}function ba(){return(ba=(0,P.Z)(function*(S,T){const U={token:yield Pt(S,T),createTime:Date.now(),subscriptionOptions:T};return yield cn(S,U),U.token})).apply(this,arguments)}function ff(S,T){return _l.apply(this,arguments)}function _l(){return(_l=(0,P.Z)(function*(S,T){return(yield S.pushManager.getSubscription())||S.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:mr(T)})})).apply(this,arguments)}function Am(S,T){return T.vapidKey===S.vapidKey&&T.endpoint===S.endpoint&&T.auth===S.auth&&T.p256dh===S.p256dh}function Ss(S){const T={from:S.from,collapseKey:S.collapse_key,messageId:S.fcmMessageId};return function ci(S,T){if(!T.notification)return;S.notification={};const k=T.notification.title;k&&(S.notification.title=k);const U=T.notification.body;U&&(S.notification.body=U);const te=T.notification.image;te&&(S.notification.image=te)}(T,S),function as(S,T){!T.data||(S.data=T.data)}(T,S),function yl(S,T){var k,U,te,fe,Pe;if(!(T.fcmOptions||null!==(k=T.notification)&&void 0!==k&&k.click_action))return;S.fcmOptions={};const Ke=null!==(te=null===(U=T.fcmOptions)||void 0===U?void 0:U.link)&&void 0!==te?te:null===(fe=T.notification)||void 0===fe?void 0:fe.click_action;Ke&&(S.fcmOptions.link=Ke);const wt=null===(Pe=T.fcmOptions)||void 0===Pe?void 0:Pe.analytics_label;wt&&(S.fcmOptions.analyticsLabel=wt)}(T,S),T}function vl(S){return"object"==typeof S&&!!S&&mc in S}function Ts(S,T){const k=[];for(let U=0;U<S.length;U++)k.push(S.charAt(U)),U<T.length&&k.push(T.charAt(U));return k.join("")}function fu(S){return zn.create("missing-app-config-values",{valueName:S})}Ts("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ts("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Md{constructor(T,k,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const te=function Ad(S){if(!S||!S.options)throw fu("App Configuration Object");if(!S.name)throw fu("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:k}=S;for(const U of T)if(!k[U])throw fu(U);return{appName:S.name,projectId:k.projectId,apiKey:k.apiKey,appId:k.appId,senderId:k.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:te,installations:k,analyticsProvider:U}}_delete(){return Promise.resolve()}}function pf(S){return wa.apply(this,arguments)}function wa(){return(wa=(0,P.Z)(function*(S){var T;try{S.swRegistration=yield navigator.serviceWorker.register(Pi,{scope:fa}),S.swRegistration.update().catch(()=>{})}catch(k){throw zn.create("failed-service-worker-registration",{browserErrorMessage:null===(T=k)||void 0===T?void 0:T.message})}})).apply(this,arguments)}function pu(S,T){return bl.apply(this,arguments)}function bl(){return(bl=(0,P.Z)(function*(S,T){if(!T&&!S.swRegistration&&(yield pf(S)),T||!S.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw zn.create("invalid-sw-registration");S.swRegistration=T}})).apply(this,arguments)}function mu(S,T){return wl.apply(this,arguments)}function wl(){return(wl=(0,P.Z)(function*(S,T){T?S.vapidKey=T:S.vapidKey||(S.vapidKey=Zs)})).apply(this,arguments)}function Ca(){return(Ca=(0,P.Z)(function*(S,T){if(!navigator)throw zn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw zn.create("permission-blocked");return yield mu(S,T?.vapidKey),yield pu(S,T?.serviceWorkerRegistration),hf(S)})).apply(this,arguments)}function mf(S,T,k){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,P.Z)(function*(S,T,k){const U=gf(T);(yield S.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:k[mc],message_name:k[uu],message_time:k[Id],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function gf(S){switch(S){case Sr.NOTIFICATION_CLICKED:return"notification_open";case Sr.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Qs(){return(Qs=(0,P.Z)(function*(S,T){const k=T.data;if(!k.isFirebaseMessaging)return;S.onMessageHandler&&k.messageType===Sr.PUSH_RECEIVED&&("function"==typeof S.onMessageHandler?S.onMessageHandler(Ss(k)):S.onMessageHandler.next(Ss(k)));const U=k.data;vl(U)&&"1"===U[pa]&&(yield mf(S,k.messageType,U))})).apply(this,arguments)}const Xs="@firebase/messaging",Fn=S=>{const T=new Md(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),S.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",k=>function xd(S,T){return Qs.apply(this,arguments)}(T,k)),T},As=S=>{const T=S.getProvider("messaging").getImmediate();return{getToken:U=>function kd(S,T){return Ca.apply(this,arguments)}(T,U)}};function gu(){return _u.apply(this,arguments)}function _u(){return(_u=(0,P.Z)(function*(){try{yield(0,de.eu)()}catch{return!1}return typeof window<"u"&&(0,de.hl)()&&(0,de.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Ln(){(0,ce._registerComponent)(new ye.wA("messaging",Fn,"PUBLIC")),(0,ce._registerComponent)(new ye.wA("messaging-internal",As,"PRIVATE")),(0,ce.registerVersion)(Xs,"0.9.16"),(0,ce.registerVersion)(Xs,"0.9.16","esm2017")}();const Ia="analytics",Fd="firebase_id",wu="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ld="https://www.googletagmanager.com/gtag/js",qn=new ae.Yd("@firebase/analytics");function bc(S){return Promise.all(S.map(T=>T.catch(k=>k)))}function wc(S,T){const k=document.createElement("script");k.src=`${Ld}?l=${S}&id=${T}`,k.async=!0,document.head.appendChild(k)}function _f(S,T,k,U,te,fe){return El.apply(this,arguments)}function El(){return(El=(0,P.Z)(function*(S,T,k,U,te,fe){const Pe=U[te];try{if(Pe)yield T[Pe];else{const wt=(yield bc(k)).find(kt=>kt.measurementId===te);wt&&(yield T[wt.appId])}}catch(Ke){qn.error(Ke)}S("config",te,fe)})).apply(this,arguments)}function Ms(S,T,k,U,te){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,P.Z)(function*(S,T,k,U,te){try{let fe=[];if(te&&te.send_to){let Pe=te.send_to;Array.isArray(Pe)||(Pe=[Pe]);const Ke=yield bc(k);for(const wt of Pe){const kt=Ke.find(Et=>Et.measurementId===wt),$t=kt&&T[kt.appId];if(!$t){fe=[];break}fe.push($t)}}0===fe.length&&(fe=Object.values(T)),yield Promise.all(fe),S("event",U,te||{})}catch(fe){qn.error(fe)}})).apply(this,arguments)}function Vd(){const S=window.document.getElementsByTagName("script");for(const T of Object.values(S))if(T.src&&T.src.includes(Ld))return T;return null}const ui=new de.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Sl=new class Eu{constructor(T={},k=1e3){this.throttleMetadata=T,this.intervalMillis=k}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,k){this.throttleMetadata[T]=k}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function Sa(S){return new Headers({Accept:"application/json","x-goog-api-key":S})}function bf(S){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,P.Z)(function*(S){var T;const{appId:k,apiKey:U}=S,te={method:"GET",headers:Sa(U)},fe=wu.replace("{app-id}",k),Pe=yield fetch(fe,te);if(200!==Pe.status&&304!==Pe.status){let Ke="";try{const wt=yield Pe.json();null!==(T=wt.error)&&void 0!==T&&T.message&&(Ke=wt.error.message)}catch{}throw ui.create("config-fetch-failed",{httpStatus:Pe.status,responseMessage:Ke})}return Pe.json()})).apply(this,arguments)}function Bd(S){return gr.apply(this,arguments)}function gr(){return(gr=(0,P.Z)(function*(S,T=Sl,k){const{appId:U,apiKey:te,measurementId:fe}=S.options;if(!U)throw ui.create("no-app-id");if(!te){if(fe)return{measurementId:fe,appId:U};throw ui.create("no-api-key")}const Pe=T.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ke=new Tl;return setTimeout((0,P.Z)(function*(){Ke.abort()}),void 0!==k?k:6e4),Ud({appId:U,apiKey:te,measurementId:fe},Pe,Ke,T)})).apply(this,arguments)}function Ud(S,T,k){return ks.apply(this,arguments)}function ks(){return(ks=(0,P.Z)(function*(S,{throttleEndTimeMillis:T,backoffCount:k},U,te=Sl){var fe,Pe;const{appId:Ke,measurementId:wt}=S;try{yield Du(U,T)}catch(kt){if(wt)return qn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${wt} provided in the "measurementId" field in the local Firebase config. [${null===(fe=kt)||void 0===fe?void 0:fe.message}]`),{appId:Ke,measurementId:wt};throw kt}try{const kt=yield bf(S);return te.deleteThrottleMetadata(Ke),kt}catch(kt){const $t=kt;if(!Ec($t)){if(te.deleteThrottleMetadata(Ke),wt)return qn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${wt} provided in the "measurementId" field in the local Firebase config. [${$t?.message}]`),{appId:Ke,measurementId:wt};throw kt}const Et=503===Number(null===(Pe=$t?.customData)||void 0===Pe?void 0:Pe.httpStatus)?(0,de.$s)(k,te.intervalMillis,30):(0,de.$s)(k,te.intervalMillis),di={throttleEndTimeMillis:Date.now()+Et,backoffCount:k+1};return te.setThrottleMetadata(Ke,di),qn.debug(`Calling attemptFetch again in ${Et} millis`),Ud(S,di,U,te)}})).apply(this,arguments)}function Du(S,T){return new Promise((k,U)=>{const te=Math.max(T-Date.now(),0),fe=setTimeout(k,te);S.addEventListener(()=>{clearTimeout(fe),U(ui.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function Ec(S){if(!(S instanceof de.ZR&&S.customData))return!1;const T=Number(S.customData.httpStatus);return 429===T||500===T||503===T||504===T}class Tl{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let Ro,Ic;function Ta(){return(Ta=(0,P.Z)(function*(S,T,k,U,te){if(te&&te.global)S("event",k,U);else{const fe=yield T;S("event",k,Object.assign(Object.assign({},U),{send_to:fe}))}})).apply(this,arguments)}function ka(S){Ic=S}function Iu(S){Ro=S}function eo(){return xa.apply(this,arguments)}function xa(){return(xa=(0,P.Z)(function*(){var S;if(!(0,de.hl)())return qn.warn(ui.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,de.eu)()}catch(T){return qn.warn(ui.create("indexeddb-unavailable",{errorInfo:null===(S=T)||void 0===S?void 0:S.toString()}).message),!1}return!0})).apply(this,arguments)}function Ra(){return(Ra=(0,P.Z)(function*(S,T,k,U,te,fe,Pe){var Ke;const wt=Bd(S);wt.then(Vi=>{k[Vi.measurementId]=Vi.appId,S.options.measurementId&&Vi.measurementId!==S.options.measurementId&&qn.warn(`The measurement ID in the local Firebase config (${S.options.measurementId}) does not match the measurement ID fetched from the server (${Vi.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Vi=>qn.error(Vi)),T.push(wt);const kt=eo().then(Vi=>{if(Vi)return U.getId()}),[$t,Et]=yield Promise.all([wt,kt]);Vd()||wc(fe,$t.measurementId),Ic&&(te("consent","default",Ic),ka(void 0)),te("js",new Date);const di=null!==(Ke=Pe?.config)&&void 0!==Ke?Ke:{};return di.origin="firebase",di.update=!0,null!=Et&&(di[Fd]=Et),te("config",$t.measurementId,di),Ro&&(te("set",Ro),Iu(void 0)),$t.measurementId})).apply(this,arguments)}class Sc{constructor(T){this.app=T}_delete(){return delete Wi[this.app.options.appId],Promise.resolve()}}let Wi={},Oa=[];const Po={};let Na,cs,Pa="dataLayer",jd=!1;function Ef(S,T,k){!function Mm(){const S=[];if((0,de.ru)()&&S.push("This is a browser extension environment."),(0,de.zI)()||S.push("Cookies are not available."),S.length>0){const T=S.map((U,te)=>`(${te+1}) ${U}`).join(" "),k=ui.create("invalid-analytics-context",{errorInfo:T});qn.warn(k.message)}}();const U=S.options.appId;if(!U)throw ui.create("no-app-id");if(!S.options.apiKey){if(!S.options.measurementId)throw ui.create("no-api-key");qn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${S.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Wi[U])throw ui.create("already-exists",{id:U});if(!jd){!function Cc(S){let T=[];Array.isArray(window[S])?T=window[S]:window[S]=T}(Pa);const{wrappedGtag:fe,gtagCore:Pe}=function Il(S,T,k,U,te){let fe=function(...Pe){window[U].push(arguments)};return window[te]&&"function"==typeof window[te]&&(fe=window[te]),window[te]=function Cu(S,T,k,U){function fe(){return(fe=(0,P.Z)(function*(Pe,Ke,wt){try{"event"===Pe?yield Ms(S,T,k,Ke,wt):"config"===Pe?yield _f(S,T,k,U,Ke,wt):"consent"===Pe?S("consent","update",wt):S("set",Ke)}catch(kt){qn.error(kt)}})).apply(this,arguments)}return function te(Pe,Ke,wt){return fe.apply(this,arguments)}}(fe,S,T,k),{gtagCore:fe,wrappedGtag:window[te]}}(Wi,Oa,Po,Pa,"gtag");cs=fe,Na=Pe,jd=!0}return Wi[U]=function Cf(S,T,k,U,te,fe,Pe){return Ra.apply(this,arguments)}(S,Oa,Po,T,Na,Pa,k),new Sc(S)}function vy(){return Df.apply(this,arguments)}function Df(){return(Df=(0,P.Z)(function*(){if((0,de.ru)()||!(0,de.zI)()||!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch{return!1}})).apply(this,arguments)}const $d="@firebase/analytics";!function Fi(){(0,ce._registerComponent)(new ye.wA(Ia,(T,{options:k})=>Ef(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),k),"PUBLIC")),(0,ce._registerComponent)(new ye.wA("analytics-internal",function S(T){try{const k=T.getProvider(Ia).getImmediate();return{logEvent:(U,te,fe)=>function No(S,T,k,U){S=(0,de.m9)(S),function Al(S,T,k,U,te){return Ta.apply(this,arguments)}(cs,Wi[S.app.options.appId],T,k,U).catch(te=>qn.error(te))}(k,U,te,fe)}}catch(k){throw ui.create("interop-component-reg-failed",{reason:k})}},"PRIVATE")),(0,ce.registerVersion)($d,"0.8.0"),(0,ce.registerVersion)($d,"0.8.0","esm2017")}();var us=L(4408),Lo=L(7565);const kl=new class Gr extends Lo.v{}(class no extends us.o{constructor(T,k){super(T,k),this.scheduler=T,this.work=k}schedule(T,k=0){return k>0?super.schedule(T,k):(this.delay=k,this.state=T,this.scheduler.flush(this),this)}execute(T,k){return k>0||this.closed?super.execute(T,k):this._execute(T,k)}requestAsyncId(T,k,U=0){return null!=U&&U>0||null==U&&this.delay>0?super.requestAsyncId(T,k,U):T.flush(this)}});var If=L(4986),xl=L(8505),Rl=L(5363),Gd=L(9468);const _r=new l.GfV("7.4.1"),Fa="__angularfire_symbol__analyticsIsSupportedValue",Li="__angularfire_symbol__analyticsIsSupported",Ol="__angularfire_symbol__remoteConfigIsSupportedValue",St="__angularfire_symbol__remoteConfigIsSupported",Sn="__angularfire_symbol__messagingIsSupportedValue",Ai="__angularfire_symbol__messagingIsSupported";function Tc(S,T,k){if(T){if(1===T.length)return T[0];const fe=T.filter(Pe=>Pe.app===k);if(1===fe.length)return fe[0]}return k.container.getProvider(S).getImmediate({optional:!0})}globalThis[Li]||(globalThis[Li]=vy().then(S=>globalThis[Fa]=S).catch(()=>globalThis[Fa]=!1)),globalThis[Ai]||(globalThis[Ai]=gu().then(S=>globalThis[Sn]=S).catch(()=>globalThis[Sn]=!1)),globalThis[St]||(globalThis[St]=_y().then(S=>globalThis[Ol]=S).catch(()=>globalThis[Ol]=!1));const Ac=(S,T)=>{const k=T?[T]:(0,H.C6)(),U=[];return k.forEach(te=>{te.container.getProvider(S).instances.forEach(Pe=>{U.includes(Pe)||U.push(Pe)})}),U};function ro(){}class Yi{constructor(T,k=kl){this.zone=T,this.delegate=k}now(){return this.delegate.now()}schedule(T,k,U){const te=this.zone;return this.delegate.schedule(function(Pe){te.runGuarded(()=>{T.apply(this,[Pe])})},k,U)}}class Tu{constructor(T){this.zone=T,this.task=null}call(T,k){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ro,{},ro,ro)),k.pipe((0,xl.b)({next:U,complete:U,error:U})).subscribe(T).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let La=(()=>{class S{constructor(k){this.ngZone=k,this.outsideAngular=k.runOutsideAngular(()=>new Yi(Zone.current)),this.insideAngular=k.run(()=>new Yi(Zone.current,If.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return S.\u0275fac=function(k){return new(k||S)(l.LFG(l.R0b))},S.\u0275prov=l.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();function Rs(){const S=globalThis.\u0275AngularFireScheduler;if(!S)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return S}function Ba(S){return S.pipe((0,Rl.Q)(Rs().outsideAngular))}function zr(S){return Rs(),function Mc(S){return function(k){return(k=k.lift(new Tu(S.ngZone))).pipe((0,Gd.R)(S.outsideAngular),(0,Rl.Q)(S.insideAngular))}}(Rs())(S)}},8554:(ht,ke,L)=>{L.d(ke,{$:()=>xo,A:()=>Y,B:()=>Ne,G:()=>aa,H:()=>fr,J:()=>Ds,L:()=>pn,M:()=>pc,N:()=>Dd,P:()=>If,Q:()=>mc,R:()=>km,T:()=>uu,U:()=>Zs,V:()=>Sr,W:()=>Is,X:()=>Sm,Y:()=>hl,Z:()=>Pt,_:()=>Tm,a:()=>Js,a0:()=>hf,a1:()=>li,a2:()=>yc,a3:()=>vc,a4:()=>ff,a5:()=>Am,a6:()=>ci,a7:()=>as,a8:()=>vl,a9:()=>Ts,aA:()=>Vi,aB:()=>wt,aC:()=>Ba,aD:()=>Va,aE:()=>bt,aI:()=>Sa,aL:()=>pa,aa:()=>pf,ab:()=>pu,ac:()=>mu,af:()=>mf,ag:()=>gf,ah:()=>xd,ak:()=>jr,al:()=>yu,an:()=>Ld,ao:()=>El,ap:()=>Xt,aq:()=>be,ar:()=>at,as:()=>vt,at:()=>rt,au:()=>qd,av:()=>Vo,aw:()=>Fe,ax:()=>le,ay:()=>ne,az:()=>fn,b:()=>ui,c:()=>Sn,d:()=>et,e:()=>xs,f:()=>Mc,g:()=>U,h:()=>S,i:()=>xa,j:()=>Pe,k:()=>Ty,l:()=>Fo,m:()=>ja,o:()=>me,r:()=>us,s:()=>ti,u:()=>kl});var l=L(5861),H=L(2090),P=L(9681),ce=L(655),de=L(1877),ye=L(4859);const me={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Y={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ne=function ee(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ie=function Ge(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},lt=new H.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),_e=new de.Yd("@firebase/auth");function it(b,...g){_e.logLevel<=de.in.ERROR&&_e.error(`Auth (${P.SDK_VERSION}): ${b}`,...g)}function rt(b,...g){throw We(b,...g)}function Fe(b,...g){return We(b,...g)}function Re(b,g,y){const E=Object.assign(Object.assign({},Ie()),{[g]:y});return new H.LL("auth","Firebase",E).create(g,{appName:b.name})}function Se(b,g,y){if(!(g instanceof y))throw y.name!==g.constructor.name&&rt(b,"argument-error"),Re(b,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function We(b,...g){if("string"!=typeof b){const y=g[0],E=[...g.slice(1)];return E[0]&&(E[0].appName=b.name),b._errorFactory.create(y,...E)}return lt.create(b,...g)}function le(b,g,...y){if(!b)throw We(g,...y)}function he(b){const g="INTERNAL ASSERTION FAILED: "+b;throw it(g),new Error(g)}function be(b,g){b||he(g)}const J=new Map;function ne(b){be(b instanceof Function,"Expected a class definition");let g=J.get(b);return g?(be(g instanceof b,"Instance stored in cache mismatched with class"),g):(g=new b,J.set(b,g),g)}function Ue(){var b;return typeof self<"u"&&(null===(b=self.location)||void 0===b?void 0:b.href)||""}function He(){return"http:"===yt()||"https:"===yt()}function yt(){var b;return typeof self<"u"&&(null===(b=self.location)||void 0===b?void 0:b.protocol)||null}class Ze{constructor(g,y){this.shortDelay=g,this.longDelay=y,be(y>g,"Short delay should be less than long delay!"),this.isMobile=(0,H.uI)()||(0,H.b$)()}get(){return function en(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(He()||(0,H.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function En(b,g){be(b.emulator,"Emulator should always be set here");const{url:y}=b.emulator;return g?`${y}${g.startsWith("/")?g.slice(1):g}`:y}class jn{static initialize(g,y,E){this.fetchImpl=g,y&&(this.headersImpl=y),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void he("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void he("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void he("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const an={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},tn=new Ze(3e4,6e4);function Wt(b,g){return b.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:b.tenantId}):g}function Ht(b,g,y,E){return xi.apply(this,arguments)}function xi(){return(xi=(0,l.Z)(function*(b,g,y,E,x={}){return wo(b,x,(0,l.Z)(function*(){let V={},se={};E&&("GET"===g?se=E:V={body:JSON.stringify(E)});const xe=(0,H.xO)(Object.assign({key:b.config.apiKey},se)).slice(1),Je=yield b._getAdditionalHeaders();return Je["Content-Type"]="application/json",b.languageCode&&(Je["X-Firebase-Locale"]=b.languageCode),jn.fetch()(is(b,b.config.apiHost,y,xe),Object.assign({method:g,headers:Je,referrerPolicy:"no-referrer"},V))}))})).apply(this,arguments)}function wo(b,g,y){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,l.Z)(function*(b,g,y){b._canInitEmulator=!1;const E=Object.assign(Object.assign({},an),g);try{const x=new dr(b),V=yield Promise.race([y(),x.promise]);x.clearNetworkTimeout();const se=yield V.json();if("needConfirmation"in se)throw $n(b,"account-exists-with-different-credential",se);if(V.ok&&!("errorMessage"in se))return se;{const xe=V.ok?se.errorMessage:se.error.message,[Je,gt]=xe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Je)throw $n(b,"credential-already-in-use",se);if("EMAIL_EXISTS"===Je)throw $n(b,"email-already-in-use",se);if("USER_DISABLED"===Je)throw $n(b,"user-disabled",se);const Yt=E[Je]||Je.toLowerCase().replace(/[_\s]+/g,"-");if(gt)throw Re(b,Yt,gt);rt(b,Yt)}}catch(x){if(x instanceof H.ZR)throw x;rt(b,"network-request-failed")}})).apply(this,arguments)}function Pn(b,g,y,E){return vs.apply(this,arguments)}function vs(){return(vs=(0,l.Z)(function*(b,g,y,E,x={}){const V=yield Ht(b,g,y,E,x);return"mfaPendingCredential"in V&&rt(b,"multi-factor-auth-required",{_serverResponse:V}),V})).apply(this,arguments)}function is(b,g,y,E){const x=`${g}${y}?${E}`;return b.config.emulator?En(b.config,x):`${b.config.apiScheme}://${x}`}class dr{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((y,E)=>{this.timer=setTimeout(()=>E(Fe(this.auth,"network-request-failed")),tn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function $n(b,g,y){const E={appName:b.name};y.email&&(E.email=y.email),y.phoneNumber&&(E.phoneNumber=y.phoneNumber);const x=Fe(b,g,E);return x.customData._tokenResponse=y,x}function rs(){return(rs=(0,l.Z)(function*(b,g){return Ht(b,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function st(b,g){return Di.apply(this,arguments)}function Di(){return(Di=(0,l.Z)(function*(b,g){return Ht(b,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Gn(b,g){return yn.apply(this,arguments)}function yn(){return(yn=(0,l.Z)(function*(b,g){return Ht(b,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function Ii(b){if(b)try{const g=new Date(Number(b));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function kn(){return(kn=(0,l.Z)(function*(b,g=!1){const y=(0,H.m9)(b),E=yield y.getIdToken(g),x=pt(E);le(x&&x.exp&&x.auth_time&&x.iat,y.auth,"internal-error");const V="object"==typeof x.firebase?x.firebase:void 0,se=V?.sign_in_provider;return{claims:x,token:E,authTime:Ii(Dn(x.auth_time)),issuedAtTime:Ii(Dn(x.iat)),expirationTime:Ii(Dn(x.exp)),signInProvider:se||null,signInSecondFactor:V?.sign_in_second_factor||null}})).apply(this,arguments)}function Dn(b){return 1e3*Number(b)}function pt(b){var g;const[y,E,x]=b.split(".");if(void 0===y||void 0===E||void 0===x)return it("JWT malformed, contained fewer than 3 sections"),null;try{const V=(0,H.tV)(E);return V?JSON.parse(V):(it("Failed to decode base64 JWT payload"),null)}catch(V){return it("Caught error parsing JWT payload as JSON",null===(g=V)||void 0===g?void 0:g.toString()),null}}function Nt(b,g){return nr.apply(this,arguments)}function nr(){return(nr=(0,l.Z)(function*(b,g,y=!1){if(y)return g;try{return yield g}catch(E){throw E instanceof H.ZR&&Si(E)&&b.auth.currentUser===b&&(yield b.auth.signOut()),E}})).apply(this,arguments)}function Si({code:b}){return"auth/user-disabled"===b||"auth/user-token-expired"===b}class Oi{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var y;if(g){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const x=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(g=!1){var y=this;if(!this.isRunning)return;const E=this.getInterval(g);this.timerId=setTimeout((0,l.Z)(function*(){yield y.iteration()}),E)}iteration(){var g=this;return(0,l.Z)(function*(){var y;try{yield g.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===(null===(y=E)||void 0===y?void 0:y.code)&&g.schedule(!0))}g.schedule()})()}}class Mt{constructor(g,y){this.createdAt=g,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ii(this.lastLoginAt),this.creationTime=Ii(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function qi(b){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,l.Z)(function*(b){var g;const y=b.auth,E=yield b.getIdToken(),x=yield Nt(b,Gn(y,{idToken:E}));le(x?.users.length,y,"internal-error");const V=x.users[0];b._notifyReloadListener(V);const se=null!==(g=V.providerUserInfo)&&void 0!==g&&g.length?G(V.providerUserInfo):[],xe=X(b.providerData,se),Yt=!!b.isAnonymous&&!(b.email&&V.passwordHash||xe?.length),Un={uid:V.localId,displayName:V.displayName||null,photoURL:V.photoUrl||null,email:V.email||null,emailVerified:V.emailVerified||!1,phoneNumber:V.phoneNumber||null,tenantId:V.tenantId||null,providerData:xe,metadata:new Mt(V.createdAt,V.lastLoginAt),isAnonymous:Yt};Object.assign(b,Un)})).apply(this,arguments)}function Zt(){return(Zt=(0,l.Z)(function*(b){const g=(0,H.m9)(b);yield qi(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function X(b,g){return[...b.filter(E=>!g.some(x=>x.providerId===E.providerId)),...g]}function G(b){return b.map(g=>{var{providerId:y}=g,E=(0,ce._T)(g,["providerId"]);return{providerId:y,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function Z(){return(Z=(0,l.Z)(function*(b,g){const y=yield wo(b,{},(0,l.Z)(function*(){const E=(0,H.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:x,apiKey:V}=b.config,se=is(b,x,"/v1/token",`key=${V}`),xe=yield b._getAdditionalHeaders();return xe["Content-Type"]="application/x-www-form-urlencoded",jn.fetch()(se,{method:"POST",headers:xe,body:E})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class K{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){le(g.idToken,"internal-error"),le(typeof g.idToken<"u","internal-error"),le(typeof g.refreshToken<"u","internal-error");const y="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function mt(b){const g=pt(b);return le(g,"internal-error"),le(typeof g.exp<"u","internal-error"),le(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,y)}getToken(g,y=!1){var E=this;return(0,l.Z)(function*(){return le(!E.accessToken||E.refreshToken,g,"user-token-expired"),y||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(g,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,y){var E=this;return(0,l.Z)(function*(){const{accessToken:x,refreshToken:V,expiresIn:se}=yield function j(b,g){return Z.apply(this,arguments)}(g,y);E.updateTokensAndExpiration(x,V,Number(se))})()}updateTokensAndExpiration(g,y,E){this.refreshToken=y||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(g,y){const{refreshToken:E,accessToken:x,expirationTime:V}=y,se=new K;return E&&(le("string"==typeof E,"internal-error",{appName:g}),se.refreshToken=E),x&&(le("string"==typeof x,"internal-error",{appName:g}),se.accessToken=x),V&&(le("number"==typeof V,"internal-error",{appName:g}),se.expirationTime=V),se}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new K,this.toJSON())}_performRefresh(){return he("not implemented")}}function Ae(b,g){le("string"==typeof b||typeof b>"u","internal-error",{appName:g})}class qe{constructor(g){var{uid:y,auth:E,stsTokenManager:x}=g,V=(0,ce._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Oi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=E,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=V.displayName||null,this.email=V.email||null,this.emailVerified=V.emailVerified||!1,this.phoneNumber=V.phoneNumber||null,this.photoURL=V.photoURL||null,this.isAnonymous=V.isAnonymous||!1,this.tenantId=V.tenantId||null,this.providerData=V.providerData?[...V.providerData]:[],this.metadata=new Mt(V.createdAt||void 0,V.lastLoginAt||void 0)}getIdToken(g){var y=this;return(0,l.Z)(function*(){const E=yield Nt(y,y.stsTokenManager.getToken(y.auth,g));return le(E,y.auth,"internal-error"),y.accessToken!==E&&(y.accessToken=E,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),E})()}getIdTokenResult(g){return function Mn(b){return kn.apply(this,arguments)}(this,g)}reload(){return function hr(b){return Zt.apply(this,arguments)}(this)}_assign(g){this!==g&&(le(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(y=>Object.assign({},y)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new qe(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,y=!1){var E=this;return(0,l.Z)(function*(){let x=!1;g.idToken&&g.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(g),x=!0),y&&(yield qi(E)),yield E.auth._persistUserIfCurrent(E),x&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var g=this;return(0,l.Z)(function*(){const y=yield g.getIdToken();return yield Nt(g,function Ur(b,g){return rs.apply(this,arguments)}(g.auth,{idToken:y})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,y){var E,x,V,se,xe,Je,gt,Yt;const Un=null!==(E=y.displayName)&&void 0!==E?E:void 0,oo=null!==(x=y.email)&&void 0!==x?x:void 0,Oc=null!==(V=y.phoneNumber)&&void 0!==V?V:void 0,Fm=null!==(se=y.photoURL)&&void 0!==se?se:void 0,XC=null!==(xe=y.tenantId)&&void 0!==xe?xe:void 0,Wd=null!==(Je=y._redirectEventId)&&void 0!==Je?Je:void 0,kf=null!==(gt=y.createdAt)&&void 0!==gt?gt:void 0,xf=null!==(Yt=y.lastLoginAt)&&void 0!==Yt?Yt:void 0,{uid:My,emailVerified:JC,isAnonymous:Lm,providerData:Vm,stsTokenManager:ky}=y;le(My&&ky,g,"internal-error");const eE=K.fromJSON(this.name,ky);le("string"==typeof My,g,"internal-error"),Ae(Un,g.name),Ae(oo,g.name),le("boolean"==typeof JC,g,"internal-error"),le("boolean"==typeof Lm,g,"internal-error"),Ae(Oc,g.name),Ae(Fm,g.name),Ae(XC,g.name),Ae(Wd,g.name),Ae(kf,g.name),Ae(xf,g.name);const Bm=new qe({uid:My,auth:g,email:oo,emailVerified:JC,displayName:Un,isAnonymous:Lm,photoURL:Fm,phoneNumber:Oc,tenantId:XC,stsTokenManager:eE,createdAt:kf,lastLoginAt:xf});return Vm&&Array.isArray(Vm)&&(Bm.providerData=Vm.map(xy=>Object.assign({},xy))),Wd&&(Bm._redirectEventId=Wd),Bm}static _fromIdTokenResponse(g,y,E=!1){return(0,l.Z)(function*(){const x=new K;x.updateFromServerResponse(y);const V=new qe({uid:y.localId,auth:g,stsTokenManager:x,isAnonymous:E});return yield qi(V),V})()}}const pn=(()=>{class b{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,l.Z)(function*(){return!0})()}_set(y,E){var x=this;return(0,l.Z)(function*(){x.storage[y]=E})()}_get(y){var E=this;return(0,l.Z)(function*(){const x=E.storage[y];return void 0===x?null:x})()}_remove(y){var E=this;return(0,l.Z)(function*(){delete E.storage[y]})()}_addListener(y,E){}_removeListener(y,E){}}return b.type="NONE",b})();function fn(b,g,y){return`firebase:${b}:${g}:${y}`}class oi{constructor(g,y,E){this.persistence=g,this.auth=y,this.userKey=E;const{config:x,name:V}=this.auth;this.fullUserKey=fn(this.userKey,x.apiKey,V),this.fullPersistenceKey=fn("persistence",x.apiKey,V),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,l.Z)(function*(){const y=yield g.persistence._get(g.fullUserKey);return y?qe._fromJSON(g.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var y=this;return(0,l.Z)(function*(){if(y.persistence===g)return;const E=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=g,E?y.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,y,E="authUser"){return(0,l.Z)(function*(){if(!y.length)return new oi(ne(pn),g,E);const x=(yield Promise.all(y.map(function(){var gt=(0,l.Z)(function*(Yt){if(yield Yt._isAvailable())return Yt});return function(Yt){return gt.apply(this,arguments)}}()))).filter(gt=>gt);let V=x[0]||ne(pn);const se=fn(E,g.config.apiKey,g.name);let xe=null;for(const gt of y)try{const Yt=yield gt._get(se);if(Yt){const Un=qe._fromJSON(g,Yt);gt!==V&&(xe=Un),V=gt;break}}catch{}const Je=x.filter(gt=>gt._shouldAllowMigration);return V._shouldAllowMigration&&Je.length?(V=Je[0],xe&&(yield V._set(se,xe.toJSON())),yield Promise.all(y.map(function(){var gt=(0,l.Z)(function*(Yt){if(Yt!==V)try{yield Yt._remove(se)}catch{}});return function(Yt){return gt.apply(this,arguments)}}())),new oi(V,g,E)):new oi(V,g,E)})()}}function re(b){const g=b.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Ye(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if($(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(It(g))return"Blackberry";if(Le(g))return"Webos";if(q(g))return"Safari";if((g.includes("chrome/")||Ce(g))&&!g.includes("edge/"))return"Chrome";if(vt(g))return"Android";{const E=b.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function $(b=(0,H.z$)()){return/firefox\//i.test(b)}function q(b=(0,H.z$)()){const g=b.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function Ce(b=(0,H.z$)()){return/crios\//i.test(b)}function Ye(b=(0,H.z$)()){return/iemobile/i.test(b)}function vt(b=(0,H.z$)()){return/android/i.test(b)}function It(b=(0,H.z$)()){return/blackberry/i.test(b)}function Le(b=(0,H.z$)()){return/webos/i.test(b)}function at(b=(0,H.z$)()){return/iphone|ipad|ipod/i.test(b)||/macintosh/i.test(b)&&/mobile/i.test(b)}function Xt(b=(0,H.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(b)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(b)}function vn(b=(0,H.z$)()){return at(b)||vt(b)||Le(b)||It(b)||/windows phone/i.test(b)||Ye(b)}function Rn(b,g=[]){let y;switch(b){case"Browser":y=re((0,H.z$)());break;case"Worker":y=`${re((0,H.z$)())}-${b}`;break;default:y=b}const E=g.length?g.join(","):"FirebaseCore-web";return`${y}/JsCore/${P.SDK_VERSION}/${E}`}class Co{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,y){const E=V=>new Promise((se,xe)=>{try{se(g(V))}catch(Je){xe(Je)}});E.onAbort=y,this.queue.push(E);const x=this.queue.length-1;return()=>{this.queue[x]=()=>Promise.resolve()}}runMiddleware(g){var y=this;return(0,l.Z)(function*(){var E;if(y.auth.currentUser===g)return;const x=[];try{for(const V of y.queue)yield V(g),V.onAbort&&x.push(V.onAbort)}catch(V){x.reverse();for(const se of x)try{se()}catch{}throw y.auth._errorFactory.create("login-blocked",{originalMessage:null===(E=V)||void 0===E?void 0:E.message})}})()}}class Eo{constructor(g,y,E){this.app=g,this.heartbeatServiceProvider=y,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Do(this),this.idTokenSubscription=new Do(this),this.beforeStateQueue=new Co(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(g,y){var E=this;return y&&(this._popupRedirectResolver=ne(y)),this._initializationPromise=this.queue((0,l.Z)(function*(){var x,V;if(!E._deleted&&(E.persistenceManager=yield oi.create(E,g),!E._deleted)){if(null!==(x=E._popupRedirectResolver)&&void 0!==x&&x._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(y),E.lastNotifiedUid=(null===(V=E.currentUser)||void 0===V?void 0:V.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,l.Z)(function*(){if(g._deleted)return;const y=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||y){if(g.currentUser&&y&&g.currentUser.uid===y.uid)return g._currentUser._assign(y),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(y,!0)}})()}initializeCurrentUser(g){var y=this;return(0,l.Z)(function*(){var E;const x=yield y.assertedPersistence.getCurrentUser();let V=x,se=!1;if(g&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const xe=null===(E=y.redirectUser)||void 0===E?void 0:E._redirectEventId,Je=V?._redirectEventId,gt=yield y.tryRedirectSignIn(g);(!xe||xe===Je)&&gt?.user&&(V=gt.user,se=!0)}if(!V)return y.directlySetCurrentUser(null);if(!V._redirectEventId){if(se)try{yield y.beforeStateQueue.runMiddleware(V)}catch(xe){V=x,y._popupRedirectResolver._overrideRedirectResult(y,()=>Promise.reject(xe))}return V?y.reloadAndSetCurrentUserOrClear(V):y.directlySetCurrentUser(null)}return le(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===V._redirectEventId?y.directlySetCurrentUser(V):y.reloadAndSetCurrentUserOrClear(V)})()}tryRedirectSignIn(g){var y=this;return(0,l.Z)(function*(){let E=null;try{E=yield y._popupRedirectResolver._completeRedirectFn(y,g,!0)}catch{yield y._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(g){var y=this;return(0,l.Z)(function*(){var E;try{yield qi(g)}catch(x){if("auth/network-request-failed"!==(null===(E=x)||void 0===E?void 0:E.code))return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function qt(){if(typeof navigator>"u")return null;const b=navigator;return b.languages&&b.languages[0]||b.language||null}()}_delete(){var g=this;return(0,l.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var y=this;return(0,l.Z)(function*(){const E=g?(0,H.m9)(g):null;return E&&le(E.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(E&&E._clone(y))})()}_updateCurrentUser(g,y=!1){var E=this;return(0,l.Z)(function*(){if(!E._deleted)return g&&le(E.tenantId===g.tenantId,E,"tenant-id-mismatch"),y||(yield E.beforeStateQueue.runMiddleware(g)),E.queue((0,l.Z)(function*(){yield E.directlySetCurrentUser(g),E.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,l.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var y=this;return this.queue((0,l.Z)(function*(){yield y.assertedPersistence.setPersistence(ne(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new H.LL("auth","Firebase",g())}onAuthStateChanged(g,y,E){return this.registerStateListener(this.authStateSubscription,g,y,E)}beforeAuthStateChanged(g,y){return this.beforeStateQueue.pushCallback(g,y)}onIdTokenChanged(g,y,E){return this.registerStateListener(this.idTokenSubscription,g,y,E)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,y){var E=this;return(0,l.Z)(function*(){const x=yield E.getOrInitRedirectPersistenceManager(y);return null===g?x.removeCurrentUser():x.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var y=this;return(0,l.Z)(function*(){if(!y.redirectPersistenceManager){const E=g&&ne(g)||y._popupRedirectResolver;le(E,y,"argument-error"),y.redirectPersistenceManager=yield oi.create(y,[ne(E._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(g){var y=this;return(0,l.Z)(function*(){var E,x;return y._isInitialized&&(yield y.queue((0,l.Z)(function*(){}))),(null===(E=y._currentUser)||void 0===E?void 0:E._redirectEventId)===g?y._currentUser:(null===(x=y.redirectUser)||void 0===x?void 0:x._redirectEventId)===g?y.redirectUser:null})()}_persistUserIfCurrent(g){var y=this;return(0,l.Z)(function*(){if(g===y.currentUser)return y.queue((0,l.Z)(function*(){return y.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(y=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,y,E,x){if(this._deleted)return()=>{};const V="function"==typeof y?y:y.next.bind(y),se=this._isInitialized?Promise.resolve():this._initializationPromise;return le(se,this,"internal-error"),se.then(()=>V(this.currentUser)),"function"==typeof y?g.addObserver(y,E,x):g.addObserver(y)}directlySetCurrentUser(g){var y=this;return(0,l.Z)(function*(){y.currentUser&&y.currentUser!==g&&y._currentUser._stopProactiveRefresh(),g&&y.isProactiveRefreshEnabled&&g._startProactiveRefresh(),y.currentUser=g,g?yield y.assertedPersistence.setCurrentUser(g):yield y.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Rn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,l.Z)(function*(){var y;const E={"X-Client-Version":g.clientVersion};g.app.options.appId&&(E["X-Firebase-gmpid"]=g.app.options.appId);const x=yield null===(y=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();return x&&(E["X-Firebase-Client"]=x),E})()}}function bt(b){return(0,H.m9)(b)}class Do{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,H.ne)(y=>this.observer=y)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function aa(b,g,y){const E=bt(b);le(E._canInitEmulator,E,"emulator-config-failed"),le(/^https?:\/\//.test(g),E,"invalid-emulator-scheme");const x=!!y?.disableWarnings,V=dc(g),{host:se,port:xe}=function ws(b){const g=dc(b),y=/(\/\/)?([^?#/]+)/.exec(b.substr(g.length));if(!y)return{host:"",port:null};const E=y[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(E);if(x){const V=x[1];return{host:V,port:Jn(E.substr(V.length+1))}}{const[V,se]=E.split(":");return{host:V,port:Jn(se)}}}(g);E.config.emulator={url:`${V}//${se}${null===xe?"":`:${xe}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:se,port:xe,protocol:V.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function Io(){function b(){const g=document.createElement("p"),y=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",b):b())}()}function dc(b){const g=b.indexOf(":");return g<0?"":b.substr(0,g+1)}function Jn(b){if(!b)return null;const g=Number(b);return isNaN(g)?null:g}class fr{constructor(g,y){this.providerId=g,this.signInMethod=y}toJSON(){return he("not implemented")}_getIdTokenResponse(g){return he("not implemented")}_linkToIdToken(g,y){return he("not implemented")}_getReauthenticationResolver(g){return he("not implemented")}}function Er(b,g){return ei.apply(this,arguments)}function ei(){return(ei=(0,l.Z)(function*(b,g){return Ht(b,"POST","/v1/accounts:resetPassword",Wt(b,g))})).apply(this,arguments)}function hc(b,g){return ln.apply(this,arguments)}function ln(){return(ln=(0,l.Z)(function*(b,g){return Ht(b,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function cf(b,g){return ll.apply(this,arguments)}function ll(){return(ll=(0,l.Z)(function*(b,g){return Ht(b,"POST","/v1/accounts:update",Wt(b,g))})).apply(this,arguments)}function So(){return(So=(0,l.Z)(function*(b,g){return Pn(b,"POST","/v1/accounts:signInWithPassword",Wt(b,g))})).apply(this,arguments)}function Hr(b,g){return To.apply(this,arguments)}function To(){return(To=(0,l.Z)(function*(b,g){return Ht(b,"POST","/v1/accounts:sendOobCode",Wt(b,g))})).apply(this,arguments)}function Cs(b,g){return bn.apply(this,arguments)}function bn(){return(bn=(0,l.Z)(function*(b,g){return Hr(b,g)})).apply(this,arguments)}function uf(b,g){return ai.apply(this,arguments)}function ai(){return(ai=(0,l.Z)(function*(b,g){return Hr(b,g)})).apply(this,arguments)}function Dr(b,g){return Es.apply(this,arguments)}function Es(){return(Es=(0,l.Z)(function*(b,g){return Hr(b,g)})).apply(this,arguments)}function la(b,g){return ca.apply(this,arguments)}function ca(){return(ca=(0,l.Z)(function*(b,g){return Hr(b,g)})).apply(this,arguments)}function lu(){return(lu=(0,l.Z)(function*(b,g){return Pn(b,"POST","/v1/accounts:signInWithEmailLink",Wt(b,g))})).apply(this,arguments)}function cu(){return(cu=(0,l.Z)(function*(b,g){return Pn(b,"POST","/v1/accounts:signInWithEmailLink",Wt(b,g))})).apply(this,arguments)}class ul extends fr{constructor(g,y,E,x=null){super("password",E),this._email=g,this._password=y,this._tenantId=x}static _fromEmailAndPassword(g,y){return new ul(g,y,"password")}static _fromEmailAndCode(g,y,E=null){return new ul(g,y,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g;if(y?.email&&y?.password){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(g){var y=this;return(0,l.Z)(function*(){switch(y.signInMethod){case"password":return function cl(b,g){return So.apply(this,arguments)}(g,{returnSecureToken:!0,email:y._email,password:y._password});case"emailLink":return function pr(b,g){return lu.apply(this,arguments)}(g,{email:y._email,oobCode:y._password});default:rt(g,"internal-error")}})()}_linkToIdToken(g,y){var E=this;return(0,l.Z)(function*(){switch(E.signInMethod){case"password":return hc(g,{idToken:y,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function wm(b,g){return cu.apply(this,arguments)}(g,{idToken:y,email:E._email,oobCode:E._password});default:rt(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Ao(b,g){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,l.Z)(function*(b,g){return Pn(b,"POST","/v1/accounts:signInWithIdp",Wt(b,g))})).apply(this,arguments)}class Ds extends fr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const y=new Ds(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(y.idToken=g.idToken),g.accessToken&&(y.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(y.nonce=g.nonce),g.pendingToken&&(y.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(y.accessToken=g.oauthToken,y.secret=g.oauthTokenSecret):rt("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:x}=y,V=(0,ce._T)(y,["providerId","signInMethod"]);if(!E||!x)return null;const se=new Ds(E,x);return se.idToken=V.idToken||void 0,se.accessToken=V.accessToken||void 0,se.secret=V.secret,se.nonce=V.nonce,se.pendingToken=V.pendingToken||null,se}_getIdTokenResponse(g){return Ao(g,this.buildRequest())}_linkToIdToken(g,y){const E=this.buildRequest();return E.idToken=y,Ao(g,E)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,Ao(g,y)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),g.postBody=(0,H.xO)(y)}return g}}function Em(b,g){return vd.apply(this,arguments)}function vd(){return(vd=(0,l.Z)(function*(b,g){return Ht(b,"POST","/v1/accounts:sendVerificationCode",Wt(b,g))})).apply(this,arguments)}function dl(){return(dl=(0,l.Z)(function*(b,g){return Pn(b,"POST","/v1/accounts:signInWithPhoneNumber",Wt(b,g))})).apply(this,arguments)}function bd(){return(bd=(0,l.Z)(function*(b,g){const y=yield Pn(b,"POST","/v1/accounts:signInWithPhoneNumber",Wt(b,g));if(y.temporaryProof)throw $n(b,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const Dm={USER_NOT_FOUND:"user-not-found"};function wd(){return(wd=(0,l.Z)(function*(b,g){return Pn(b,"POST","/v1/accounts:signInWithPhoneNumber",Wt(b,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Dm)})).apply(this,arguments)}class da extends fr{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,y){return new da({verificationId:g,verificationCode:y})}static _fromTokenResponse(g,y){return new da({phoneNumber:g,temporaryProof:y})}_getIdTokenResponse(g){return function fc(b,g){return dl.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,y){return function ua(b,g){return bd.apply(this,arguments)}(g,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function Im(b,g){return wd.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:y,verificationId:E,verificationCode:x}=this.params;return g&&y?{temporaryProof:g,phoneNumber:y}:{sessionInfo:E,code:x}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:y,verificationCode:E,phoneNumber:x,temporaryProof:V}=g;return E||y||x||V?new da({verificationId:y,verificationCode:E,phoneNumber:x,temporaryProof:V}):null}}class ha{constructor(g){var y,E,x,V,se,xe;const Je=(0,H.zd)((0,H.pd)(g)),gt=null!==(y=Je.apiKey)&&void 0!==y?y:null,Yt=null!==(E=Je.oobCode)&&void 0!==E?E:null,Un=function Cd(b){switch(b){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=Je.mode)&&void 0!==x?x:null);le(gt&&Yt&&Un,"argument-error"),this.apiKey=gt,this.operation=Un,this.code=Yt,this.continueUrl=null!==(V=Je.continueUrl)&&void 0!==V?V:null,this.languageCode=null!==(se=Je.languageCode)&&void 0!==se?se:null,this.tenantId=null!==(xe=Je.tenantId)&&void 0!==xe?xe:null}static parseLink(g){const y=function Ed(b){const g=(0,H.zd)((0,H.pd)(b)).link,y=g?(0,H.zd)((0,H.pd)(g)).deep_link_id:null,E=(0,H.zd)((0,H.pd)(b)).deep_link_id;return(E?(0,H.zd)((0,H.pd)(E)).link:null)||E||y||g||b}(g);try{return new ha(y)}catch{return null}}}let pc=(()=>{class b{constructor(){this.providerId=b.PROVIDER_ID}static credential(y,E){return ul._fromEmailAndPassword(y,E)}static credentialWithLink(y,E){const x=ha.parseLink(E);return le(x,"argument-error"),ul._fromEmailAndCode(y,x.code,x.tenantId)}}return b.PROVIDER_ID="password",b.EMAIL_PASSWORD_SIGN_IN_METHOD="password",b.EMAIL_LINK_SIGN_IN_METHOD="emailLink",b})();class Pi{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class fa extends Pi{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class Zs extends fa{static credentialFromJSON(g){const y="string"==typeof g?JSON.parse(g):g;return le("providerId"in y&&"signInMethod"in y,"argument-error"),Ds._fromParams(y)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return le(g.idToken||g.accessToken,"argument-error"),Ds._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return Zs.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return Zs.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:y,oauthAccessToken:E,oauthTokenSecret:x,pendingToken:V,nonce:se,providerId:xe}=g;if(!E&&!x&&!y&&!V||!xe)return null;try{return new Zs(xe)._credential({idToken:y,accessToken:E,nonce:se,pendingToken:V})}catch{return null}}}let Dd=(()=>{class b extends fa{constructor(){super("facebook.com")}static credential(y){return Ds._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return b.credential(y.oauthAccessToken)}catch{return null}}}return b.FACEBOOK_SIGN_IN_METHOD="facebook.com",b.PROVIDER_ID="facebook.com",b})(),mc=(()=>{class b extends fa{constructor(){super("google.com"),this.addScope("profile")}static credential(y,E){return Ds._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:E})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:E,oauthAccessToken:x}=y;if(!E&&!x)return null;try{return b.credential(E,x)}catch{return null}}}return b.GOOGLE_SIGN_IN_METHOD="google.com",b.PROVIDER_ID="google.com",b})(),uu=(()=>{class b extends fa{constructor(){super("github.com")}static credential(y){return Ds._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return b.credential(y.oauthAccessToken)}catch{return null}}}return b.GITHUB_SIGN_IN_METHOD="github.com",b.PROVIDER_ID="github.com",b})();class pa extends fr{constructor(g,y){super(g,g),this.pendingToken=y}_getIdTokenResponse(g){return Ao(g,this.buildRequest())}_linkToIdToken(g,y){const E=this.buildRequest();return E.idToken=y,Ao(g,E)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,Ao(g,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:x,pendingToken:V}=y;return E&&x&&V&&E===x?new pa(E,V):null}static _create(g,y){return new pa(g,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Sr extends Pi{constructor(g){le(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Sr.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Sr.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const y=pa.fromJSON(g);return le(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:y,providerId:E}=g;if(!y||!E)return null;try{return pa._create(E,y)}catch{return null}}}let Is=(()=>{class b extends fa{constructor(){super("twitter.com")}static credential(y,E){return Ds._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:E})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:E,oauthTokenSecret:x}=y;if(!E||!x)return null;try{return b.credential(E,x)}catch{return null}}}return b.TWITTER_SIGN_IN_METHOD="twitter.com",b.PROVIDER_ID="twitter.com",b})();function mr(b,g){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,l.Z)(function*(b,g){return Pn(b,"POST","/v1/accounts:signUp",Wt(b,g))})).apply(this,arguments)}class Tr{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,y,E,x=!1){return(0,l.Z)(function*(){const V=yield qe._fromIdTokenResponse(g,E,x),se=ga(E);return new Tr({user:V,providerId:se,_tokenResponse:E,operationType:y})})()}static _forOperation(g,y,E){return(0,l.Z)(function*(){yield g._updateTokensIfNecessary(E,!0);const x=ga(E);return new Tr({user:g,providerId:x,_tokenResponse:E,operationType:y})})()}}function ga(b){return b.providerId?b.providerId:"phoneNumber"in b?"phone":null}function Sm(b){return du.apply(this,arguments)}function du(){return(du=(0,l.Z)(function*(b){var g;const y=bt(b);if(yield y._initializationPromise,null!==(g=y.currentUser)&&void 0!==g&&g.isAnonymous)return new Tr({user:y.currentUser,providerId:null,operationType:"signIn"});const E=yield mr(y,{returnSecureToken:!0}),x=yield Tr._fromIdTokenResponse(y,"signIn",E,!0);return yield y._updateCurrentUser(x.user),x})).apply(this,arguments)}class Bn extends H.ZR{constructor(g,y,E,x){var V;super(y.code,y.message),this.operationType=E,this.user=x,Object.setPrototypeOf(this,Bn.prototype),this.customData={appName:g.name,tenantId:null!==(V=g.tenantId)&&void 0!==V?V:void 0,_serverResponse:y.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(g,y,E,x){return new Bn(g,y,E,x)}}function Sd(b,g,y,E){return("reauthenticate"===g?y._getReauthenticationResolver(b):y._getIdTokenResponse(b)).catch(V=>{throw"auth/multi-factor-auth-required"===V.code?Bn._fromErrorAndOperation(b,V,g,E):V})}function df(b){return new Set(b.map(({providerId:g})=>g).filter(g=>!!g))}function jr(b,g){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,l.Z)(function*(b,g){const y=(0,H.m9)(b);yield os(!0,y,g);const{providerUserInfo:E}=yield st(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[g]}),x=df(E||[]);return y.providerData=y.providerData.filter(V=>x.has(V.providerId)),x.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y})).apply(this,arguments)}function gc(b,g){return ko.apply(this,arguments)}function ko(){return(ko=(0,l.Z)(function*(b,g,y=!1){const E=yield Nt(b,g._linkToIdToken(b.auth,yield b.getIdToken()),y);return Tr._forOperation(b,"link",E)})).apply(this,arguments)}function os(b,g,y){return cn.apply(this,arguments)}function cn(){return(cn=(0,l.Z)(function*(b,g,y){yield qi(g);const x=!1===b?"provider-already-linked":"no-such-provider";le(df(g.providerData).has(y)===b,g.auth,x)})).apply(this,arguments)}function _c(b,g){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,l.Z)(function*(b,g,y=!1){var E;const{auth:x}=b,V="reauthenticate";try{const se=yield Nt(b,Sd(x,V,g,b),y);le(se.idToken,x,"internal-error");const xe=pt(se.idToken);le(xe,x,"internal-error");const{sub:Je}=xe;return le(b.uid===Je,x,"user-mismatch"),Tr._forOperation(b,V,se)}catch(se){throw"auth/user-not-found"===(null===(E=se)||void 0===E?void 0:E.code)&&rt(x,"user-mismatch"),se}})).apply(this,arguments)}function hu(b,g){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,l.Z)(function*(b,g,y=!1){const E="signIn",x=yield Sd(b,E,g),V=yield Tr._fromIdTokenResponse(b,E,x);return y||(yield b._updateCurrentUser(V.user)),V})).apply(this,arguments)}function hl(b,g){return zn.apply(this,arguments)}function zn(){return(zn=(0,l.Z)(function*(b,g){return hu(bt(b),g)})).apply(this,arguments)}function Pt(b,g){return fl.apply(this,arguments)}function fl(){return(fl=(0,l.Z)(function*(b,g){const y=(0,H.m9)(b);return yield os(!1,y,g.providerId),gc(y,g)})).apply(this,arguments)}function Tm(b,g){return pl.apply(this,arguments)}function pl(){return(pl=(0,l.Z)(function*(b,g){return _c((0,H.m9)(b),g)})).apply(this,arguments)}function Td(b,g){return ml.apply(this,arguments)}function ml(){return(ml=(0,l.Z)(function*(b,g){return Pn(b,"POST","/v1/accounts:signInWithCustomToken",Wt(b,g))})).apply(this,arguments)}function xo(b,g){return gl.apply(this,arguments)}function gl(){return(gl=(0,l.Z)(function*(b,g){const y=bt(b),E=yield Td(y,{token:g,returnSecureToken:!0}),x=yield Tr._fromIdTokenResponse(y,"signIn",E);return yield y._updateCurrentUser(x.user),x})).apply(this,arguments)}class _a{constructor(g,y){this.factorId=g,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(g,y){return"phoneInfo"in y?Oe._fromServerResponse(g,y):rt(g,"internal-error")}}class Oe extends _a{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,y){return new Oe(y)}}function Kt(b,g,y){var E;le((null===(E=y.url)||void 0===E?void 0:E.length)>0,b,"invalid-continue-uri"),le(typeof y.dynamicLinkDomain>"u"||y.dynamicLinkDomain.length>0,b,"invalid-dynamic-link-domain"),g.continueUrl=y.url,g.dynamicLinkDomain=y.dynamicLinkDomain,g.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(le(y.iOS.bundleId.length>0,b,"missing-ios-bundle-id"),g.iOSBundleId=y.iOS.bundleId),y.android&&(le(y.android.packageName.length>0,b,"missing-android-pkg-name"),g.androidInstallApp=y.android.installApp,g.androidMinimumVersionCode=y.android.minimumVersion,g.androidPackageName=y.android.packageName)}function hf(b,g,y){return ya.apply(this,arguments)}function ya(){return(ya=(0,l.Z)(function*(b,g,y){const E=(0,H.m9)(b),x={requestType:"PASSWORD_RESET",email:g};y&&Kt(E,x,y),yield uf(E,x)})).apply(this,arguments)}function li(b,g,y){return va.apply(this,arguments)}function va(){return(va=(0,l.Z)(function*(b,g,y){yield Er((0,H.m9)(b),{oobCode:g,newPassword:y})})).apply(this,arguments)}function yc(b,g){return ir.apply(this,arguments)}function ir(){return(ir=(0,l.Z)(function*(b,g){yield cf((0,H.m9)(b),{oobCode:g})})).apply(this,arguments)}function vc(b,g){return ba.apply(this,arguments)}function ba(){return(ba=(0,l.Z)(function*(b,g){const y=(0,H.m9)(b),E=yield Er(y,{oobCode:g}),x=E.requestType;switch(le(x,y,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":le(E.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":le(E.mfaInfo,y,"internal-error");default:le(E.email,y,"internal-error")}let V=null;return E.mfaInfo&&(V=_a._fromServerResponse(bt(y),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:V},operation:x}})).apply(this,arguments)}function ff(b,g){return _l.apply(this,arguments)}function _l(){return(_l=(0,l.Z)(function*(b,g){const{data:y}=yield vc((0,H.m9)(b),g);return y.email})).apply(this,arguments)}function Am(b,g,y){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,l.Z)(function*(b,g,y){const E=bt(b),x=yield mr(E,{returnSecureToken:!0,email:g,password:y}),V=yield Tr._fromIdTokenResponse(E,"signIn",x);return yield E._updateCurrentUser(V.user),V})).apply(this,arguments)}function ci(b,g,y){return hl((0,H.m9)(b),pc.credential(g,y))}function as(b,g,y){return yl.apply(this,arguments)}function yl(){return(yl=(0,l.Z)(function*(b,g,y){const E=(0,H.m9)(b),x={requestType:"EMAIL_SIGNIN",email:g};le(y.handleCodeInApp,E,"argument-error"),y&&Kt(E,x,y),yield Dr(E,x)})).apply(this,arguments)}function vl(b,g){return"EMAIL_SIGNIN"===ha.parseLink(g)?.operation}function Ts(b,g,y){return Ad.apply(this,arguments)}function Ad(){return(Ad=(0,l.Z)(function*(b,g,y){const E=(0,H.m9)(b),x=pc.credentialWithLink(g,y||Ue());return le(x._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),hl(E,x)})).apply(this,arguments)}function fu(b,g){return Md.apply(this,arguments)}function Md(){return(Md=(0,l.Z)(function*(b,g){return Ht(b,"POST","/v1/accounts:createAuthUri",Wt(b,g))})).apply(this,arguments)}function pf(b,g){return wa.apply(this,arguments)}function wa(){return(wa=(0,l.Z)(function*(b,g){const E={identifier:g,continueUri:He()?Ue():"http://localhost"},{signinMethods:x}=yield fu((0,H.m9)(b),E);return x||[]})).apply(this,arguments)}function pu(b,g){return bl.apply(this,arguments)}function bl(){return(bl=(0,l.Z)(function*(b,g){const y=(0,H.m9)(b),x={requestType:"VERIFY_EMAIL",idToken:yield b.getIdToken()};g&&Kt(y.auth,x,g);const{email:V}=yield Cs(y.auth,x);V!==b.email&&(yield b.reload())})).apply(this,arguments)}function mu(b,g,y){return wl.apply(this,arguments)}function wl(){return(wl=(0,l.Z)(function*(b,g,y){const E=(0,H.m9)(b),V={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield b.getIdToken(),newEmail:g};y&&Kt(E.auth,V,y);const{email:se}=yield la(E.auth,V);se!==b.email&&(yield b.reload())})).apply(this,arguments)}function kd(b,g){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,l.Z)(function*(b,g){return Ht(b,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function mf(b,g){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,l.Z)(function*(b,{displayName:g,photoURL:y}){if(void 0===g&&void 0===y)return;const E=(0,H.m9)(b),V={idToken:yield E.getIdToken(),displayName:g,photoUrl:y,returnSecureToken:!0},se=yield Nt(E,kd(E.auth,V));E.displayName=se.displayName||null,E.photoURL=se.photoUrl||null;const xe=E.providerData.find(({providerId:Je})=>"password"===Je);xe&&(xe.displayName=E.displayName,xe.photoURL=E.photoURL),yield E._updateTokensIfNecessary(se)})).apply(this,arguments)}function gf(b,g){return Qs((0,H.m9)(b),g,null)}function xd(b,g){return Qs((0,H.m9)(b),null,g)}function Qs(b,g,y){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,l.Z)(function*(b,g,y){const{auth:E}=b,V={idToken:yield b.getIdToken(),returnSecureToken:!0};g&&(V.email=g),y&&(V.password=y);const se=yield Nt(b,hc(E,V));yield b._updateTokensIfNecessary(se,!0)})).apply(this,arguments)}class Fn{constructor(g,y,E={}){this.isNewUser=g,this.providerId=y,this.profile=E}}class As extends Fn{constructor(g,y,E,x){super(g,y,E),this.username=x}}class Ln extends Fn{constructor(g,y){super(g,"facebook.com",y)}}class gu extends As{constructor(g,y){super(g,"github.com",y,"string"==typeof y?.login?y?.login:null)}}class _u extends Fn{constructor(g,y){super(g,"google.com",y)}}class Od extends As{constructor(g,y,E){super(g,"twitter.com",y,E)}}function yu(b){const{user:g,_tokenResponse:y}=b;return g.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function Rd(b){var g,y;if(!b)return null;const{providerId:E}=b,x=b.rawUserInfo?JSON.parse(b.rawUserInfo):{},V=b.isNewUser||"identitytoolkit#SignupNewUserResponse"===b.kind;if(!E&&b?.idToken){const se=null===(y=null===(g=pt(b.idToken))||void 0===g?void 0:g.firebase)||void 0===y?void 0:y.sign_in_provider;if(se)return new Fn(V,"anonymous"!==se&&"custom"!==se?se:null)}if(!E)return null;switch(E){case"facebook.com":return new Ln(V,x);case"github.com":return new gu(V,x);case"google.com":return new _u(V,x);case"twitter.com":return new Od(V,x,b.screenName||null);case"custom":case"anonymous":return new Fn(V,null);default:return new Fn(V,E,x)}}(y)}class Mr{constructor(g,y){this.type=g,this.credential=y}static _fromIdtoken(g){return new Mr("enroll",g)}static _fromMfaPendingCredential(g){return new Mr("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var y,E;if(g?.multiFactorSession){if(null!==(y=g.multiFactorSession)&&void 0!==y&&y.pendingCredential)return Mr._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(E=g.multiFactorSession)&&void 0!==E&&E.idToken)return Mr._fromIdtoken(g.multiFactorSession.idToken)}return null}}class wu{constructor(g,y,E){this.session=g,this.hints=y,this.signInResolver=E}static _fromError(g,y){const E=bt(g),x=y.customData._serverResponse,V=(x.mfaInfo||[]).map(xe=>_a._fromServerResponse(E,xe));le(x.mfaPendingCredential,E,"internal-error");const se=Mr._fromMfaPendingCredential(x.mfaPendingCredential);return new wu(se,V,function(){var xe=(0,l.Z)(function*(Je){const gt=yield Je._process(E,se);delete x.mfaInfo,delete x.mfaPendingCredential;const Yt=Object.assign(Object.assign({},x),{idToken:gt.idToken,refreshToken:gt.refreshToken});switch(y.operationType){case"signIn":const Un=yield Tr._fromIdTokenResponse(E,y.operationType,Yt);return yield E._updateCurrentUser(Un.user),Un;case"reauthenticate":return le(y.user,E,"internal-error"),Tr._forOperation(y.user,y.operationType,Yt);default:rt(E,"internal-error")}});return function(Je){return xe.apply(this,arguments)}}())}resolveSignIn(g){var y=this;return(0,l.Z)(function*(){return y.signInResolver(g)})()}}function Ld(b,g){var y;const E=(0,H.m9)(b),x=g;return le(g.customData.operationType,E,"argument-error"),le(null===(y=x.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,E,"argument-error"),wu._fromError(E,x)}function qn(b,g){return Ht(b,"POST","/v2/accounts/mfaEnrollment:start",Wt(b,g))}class Cc{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(E=>_a._fromServerResponse(g.auth,E)))})}static _fromUser(g){return new Cc(g)}getSession(){var g=this;return(0,l.Z)(function*(){return Mr._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,y){var E=this;return(0,l.Z)(function*(){const x=g,V=yield E.getSession(),se=yield Nt(E.user,x._process(E.user.auth,V,y));return yield E.user._updateTokensIfNecessary(se),E.user.reload()})()}unenroll(g){var y=this;return(0,l.Z)(function*(){var E;const x="string"==typeof g?g:g.uid,V=yield y.user.getIdToken(),se=yield Nt(y.user,function wc(b,g){return Ht(b,"POST","/v2/accounts/mfaEnrollment:withdraw",Wt(b,g))}(y.user.auth,{idToken:V,mfaEnrollmentId:x}));y.enrolledFactors=y.enrolledFactors.filter(({uid:xe})=>xe!==x),yield y.user._updateTokensIfNecessary(se);try{yield y.user.reload()}catch(xe){if("auth/user-token-expired"!==(null===(E=xe)||void 0===E?void 0:E.code))throw xe}})()}}const _f=new WeakMap;function El(b){const g=(0,H.m9)(b);return _f.has(g)||_f.set(g,Cc._fromUser(g)),_f.get(g)}const Ms="__sak";class Dl{constructor(g,y){this.storageRetriever=g,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(Ms,"1"),this.storage.removeItem(Ms),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,y){return this.storage.setItem(g,JSON.stringify(y)),Promise.resolve()}_get(g){const y=this.storage.getItem(g);return Promise.resolve(y?JSON.parse(y):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const ui=(()=>{class b extends Dl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,E)=>this.onStorageEvent(y,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Cu(){const b=(0,H.z$)();return q(b)||at(b)}()&&function bs(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=vn(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const E of Object.keys(this.listeners)){const x=this.storage.getItem(E),V=this.localCache[E];x!==V&&y(E,V,x)}}onStorageEvent(y,E=!1){if(!y.key)return void this.forAllChangedKeys((xe,Je,gt)=>{this.notifyListeners(xe,gt)});const x=y.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const xe=this.storage.getItem(x);if(y.newValue!==xe)null!==y.newValue?this.storage.setItem(x,y.newValue):this.storage.removeItem(x);else if(this.localCache[x]===y.newValue&&!E)return}const V=()=>{const xe=this.storage.getItem(x);!E&&this.localCache[x]===xe||this.notifyListeners(x,xe)},se=this.storage.getItem(x);!function Bt(){return(0,H.w1)()&&10===document.documentMode}()||se===y.newValue||y.newValue===y.oldValue?V():setTimeout(V,10)}notifyListeners(y,E){this.localCache[y]=E;const x=this.listeners[y];if(x)for(const V of Array.from(x))V(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,E,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:E,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(E)}_removeListener(y,E){this.listeners[y]&&(this.listeners[y].delete(E),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,E){var x=()=>super._set,V=this;return(0,l.Z)(function*(){yield x().call(V,y,E),V.localCache[y]=JSON.stringify(E)})()}_get(y){var E=()=>super._get,x=this;return(0,l.Z)(function*(){const V=yield E().call(x,y);return x.localCache[y]=JSON.stringify(V),V})()}_remove(y){var E=()=>super._remove,x=this;return(0,l.Z)(function*(){yield E().call(x,y),delete x.localCache[y]})()}}return b.type="LOCAL",b})(),Js=(()=>{class b extends Dl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,E){}_removeListener(y,E){}}return b.type="SESSION",b})();let Sl=(()=>{class b{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const E=this.receivers.find(V=>V.isListeningto(y));if(E)return E;const x=new b(y);return this.receivers.push(x),x}isListeningto(y){return this.eventTarget===y}handleEvent(y){var E=this;return(0,l.Z)(function*(){const x=y,{eventId:V,eventType:se,data:xe}=x.data,Je=E.handlersMap[se];if(!Je?.size)return;x.ports[0].postMessage({status:"ack",eventId:V,eventType:se});const gt=Array.from(Je).map(function(){var Un=(0,l.Z)(function*(oo){return oo(x.origin,xe)});return function(oo){return Un.apply(this,arguments)}}()),Yt=yield function Eu(b){return Promise.all(b.map(function(){var g=(0,l.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(E){return{fulfilled:!1,reason:E}}});return function(y){return g.apply(this,arguments)}}()))}(gt);x.ports[0].postMessage({status:"done",eventId:V,eventType:se,response:Yt})})()}_subscribe(y,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(E)}_unsubscribe(y,E){this.handlersMap[y]&&E&&this.handlersMap[y].delete(E),(!E||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return b.receivers=[],b})();function Sa(b="",g=10){let y="";for(let E=0;E<g;E++)y+=Math.floor(10*Math.random());return b+y}class bf{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,y,E=50){var x=this;return(0,l.Z)(function*(){const V=typeof MessageChannel<"u"?new MessageChannel:null;if(!V)throw new Error("connection_unavailable");let se,xe;return new Promise((Je,gt)=>{const Yt=Sa("",20);V.port1.start();const Un=setTimeout(()=>{gt(new Error("unsupported_event"))},E);xe={messageChannel:V,onMessage(oo){const Oc=oo;if(Oc.data.eventId===Yt)switch(Oc.data.status){case"ack":clearTimeout(Un),se=setTimeout(()=>{gt(new Error("timeout"))},3e3);break;case"done":clearTimeout(se),Je(Oc.data.response);break;default:clearTimeout(Un),clearTimeout(se),gt(new Error("invalid_response"))}}},x.handlers.add(xe),V.port1.addEventListener("message",xe.onMessage),x.target.postMessage({eventType:g,eventId:Yt,data:y},[V.port2])}).finally(()=>{xe&&x.removeMessageHandler(xe)})})()}}function Wn(){return window}function gr(){return typeof Wn().WorkerGlobalScope<"u"&&"function"==typeof Wn().importScripts}function ks(){return(ks=(0,l.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Tl="firebaseLocalStorageDb",Al="firebaseLocalStorage",Ta="fbase_key";class Oo{constructor(g){this.request=g}toPromise(){return new Promise((g,y)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function Aa(b,g){return b.transaction([Al],g?"readwrite":"readonly").objectStore(Al)}function Dc(){const b=indexedDB.open(Tl,1);return new Promise((g,y)=>{b.addEventListener("error",()=>{y(b.error)}),b.addEventListener("upgradeneeded",()=>{const E=b.result;try{E.createObjectStore(Al,{keyPath:Ta})}catch(x){y(x)}}),b.addEventListener("success",(0,l.Z)(function*(){const E=b.result;E.objectStoreNames.contains(Al)?g(E):(E.close(),yield function Hd(){const b=indexedDB.deleteDatabase(Tl);return new Oo(b).toPromise()}(),g(yield Dc()))}))})}function Ml(b,g,y){return ls.apply(this,arguments)}function ls(){return(ls=(0,l.Z)(function*(b,g,y){const E=Aa(b,!0).put({[Ta]:g,value:y});return new Oo(E).toPromise()})).apply(this,arguments)}function Ma(){return(Ma=(0,l.Z)(function*(b,g){const y=Aa(b,!1).get(g),E=yield new Oo(y).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Ic(b,g){const y=Aa(b,!0).delete(g);return new Oo(y).toPromise()}const xa=(()=>{class b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,l.Z)(function*(){return y.db||(y.db=yield Dc()),y.db})()}_withRetries(y){var E=this;return(0,l.Z)(function*(){let x=0;for(;;)try{const V=yield E._openDb();return yield y(V)}catch(V){if(x++>3)throw V;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,l.Z)(function*(){return gr()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,l.Z)(function*(){y.receiver=Sl._getInstance(function Ec(){return gr()?self:null}()),y.receiver._subscribe("keyChanged",function(){var E=(0,l.Z)(function*(x,V){return{keyProcessed:(yield y._poll()).includes(V.key)}});return function(x,V){return E.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var E=(0,l.Z)(function*(x,V){return["keyChanged"]});return function(x,V){return E.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,l.Z)(function*(){var E,x;if(y.activeServiceWorker=yield function Ud(){return ks.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new bf(y.activeServiceWorker);const V=yield y.sender._send("ping",{},800);!V||(null===(E=V[0])||void 0===E?void 0:E.fulfilled)&&(null===(x=V[0])||void 0===x?void 0:x.value.includes("keyChanged"))&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var E=this;return(0,l.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Du(){var b;return(null===(b=navigator?.serviceWorker)||void 0===b?void 0:b.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:y},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,l.Z)(function*(){try{if(!indexedDB)return!1;const y=yield Dc();return yield Ml(y,Ms,"1"),yield Ic(y,Ms),!0}catch{}return!1})()}_withPendingWrite(y){var E=this;return(0,l.Z)(function*(){E.pendingWrites++;try{yield y()}finally{E.pendingWrites--}})()}_set(y,E){var x=this;return(0,l.Z)(function*(){return x._withPendingWrite((0,l.Z)(function*(){return yield x._withRetries(V=>Ml(V,y,E)),x.localCache[y]=E,x.notifyServiceWorker(y)}))})()}_get(y){var E=this;return(0,l.Z)(function*(){const x=yield E._withRetries(V=>function wf(b,g){return Ma.apply(this,arguments)}(V,y));return E.localCache[y]=x,x})()}_remove(y){var E=this;return(0,l.Z)(function*(){return E._withPendingWrite((0,l.Z)(function*(){return yield E._withRetries(x=>Ic(x,y)),delete E.localCache[y],E.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,l.Z)(function*(){const E=yield y._withRetries(se=>{const xe=Aa(se,!1).getAll();return new Oo(xe).toPromise()});if(!E)return[];if(0!==y.pendingWrites)return[];const x=[],V=new Set;for(const{fbase_key:se,value:xe}of E)V.add(se),JSON.stringify(y.localCache[se])!==JSON.stringify(xe)&&(y.notifyListeners(se,xe),x.push(se));for(const se of Object.keys(y.localCache))y.localCache[se]&&!V.has(se)&&(y.notifyListeners(se,null),x.push(se));return x})()}notifyListeners(y,E){this.localCache[y]=E;const x=this.listeners[y];if(x)for(const V of Array.from(x))V(E)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,l.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(E)}_removeListener(y,E){this.listeners[y]&&(this.listeners[y].delete(E),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return b.type="LOCAL",b})();function Cf(b,g){return Ht(b,"POST","/v2/accounts/mfaSignIn:start",Wt(b,g))}function Wi(){return(Wi=(0,l.Z)(function*(b){return(yield Ht(b,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Po(b){return new Promise((g,y)=>{const E=document.createElement("script");E.setAttribute("src",b),E.onload=g,E.onerror=x=>{const V=Fe("internal-error");V.customData=x,y(V)},E.type="text/javascript",E.charset="UTF-8",function Oa(){var b,g;return null!==(g=null===(b=document.getElementsByTagName("head"))||void 0===b?void 0:b[0])&&void 0!==g?g:document}().appendChild(E)})}function Pa(b){return`__${b}${Math.floor(1e6*Math.random())}`}const cs=1e12;class jd{constructor(g){this.auth=g,this.counter=cs,this._widgets=new Map}render(g,y){const E=this.counter;return this._widgets.set(E,new xn(g,this.auth.name,y||{})),this.counter++,E}reset(g){var y;const E=g||cs;null===(y=this._widgets.get(E))||void 0===y||y.delete(),this._widgets.delete(E)}getResponse(g){var y;return(null===(y=this._widgets.get(g||cs))||void 0===y?void 0:y.getResponse())||""}execute(g){var y=this;return(0,l.Z)(function*(){var E;return null===(E=y._widgets.get(g||cs))||void 0===E||E.execute(),""})()}}class xn{constructor(g,y,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof g?document.getElementById(g):g;le(x,"argument-error",{appName:y}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Mm(b){const g=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<b;E++)g.push(y.charAt(Math.floor(Math.random()*y.length)));return g.join("")}(50);const{callback:g,"expired-callback":y}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ef=Pa("rcb"),VC=new Ze(3e4,6e4);class vy{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=Wn().grecaptcha)||void 0===g||!g.render)}load(g,y=""){return le(function Df(b){return b.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(b)}(y),g,"argument-error"),this.shouldResolveImmediately(y)?Promise.resolve(Wn().grecaptcha):new Promise((E,x)=>{const V=Wn().setTimeout(()=>{x(Fe(g,"network-request-failed"))},VC.get());Wn()[Ef]=()=>{Wn().clearTimeout(V),delete Wn()[Ef];const xe=Wn().grecaptcha;if(!xe)return void x(Fe(g,"internal-error"));const Je=xe.render;xe.render=(gt,Yt)=>{const Un=Je(gt,Yt);return this.counter++,Un},this.hostLanguage=y,E(xe)},Po(`https://www.google.com/recaptcha/api.js??${(0,H.xO)({onload:Ef,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(V),x(Fe(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var y;return!(null===(y=Wn().grecaptcha)||void 0===y||!y.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class BC{load(g){return(0,l.Z)(function*(){return new jd(g)})()}clearedOneInstance(){}}const to="recaptcha",by={theme:"light",type:"image"};class km{constructor(g,y=Object.assign({},by),E){this.parameters=y,this.type=to,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=bt(E),this.isInvisible="invisible"===this.parameters.size,le(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof g?document.getElementById(g):g;le(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new BC:new vy,this.validateStartingState()}verify(){var g=this;return(0,l.Z)(function*(){g.assertNotDestroyed();const y=yield g.render(),E=g.getAssertedRecaptcha();return E.getResponse(y)||new Promise(V=>{const se=xe=>{!xe||(g.tokenChangeListeners.delete(se),V(xe))};g.tokenChangeListeners.add(se),g.isInvisible&&E.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){le(!this.parameters.sitekey,this.auth,"argument-error"),le(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),le(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return y=>{if(this.tokenChangeListeners.forEach(E=>E(y)),"function"==typeof g)g(y);else if("string"==typeof g){const E=Wn()[g];"function"==typeof E&&E(y)}}}assertNotDestroyed(){le(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,l.Z)(function*(){if(yield g.init(),!g.widgetId){let y=g.container;if(!g.isInvisible){const E=document.createElement("div");y.appendChild(E),y=E}g.widgetId=g.getAssertedRecaptcha().render(y,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,l.Z)(function*(){le(He()&&!gr(),g.auth,"internal-error"),yield function Ti(){let b=null;return new Promise(g=>{"complete"!==document.readyState?(b=()=>g(),window.addEventListener("load",b)):g()}).catch(g=>{throw b&&window.removeEventListener("load",b),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const y=yield function Sc(b){return Wi.apply(this,arguments)}(g.auth);le(y,g.auth,"internal-error"),g.parameters.sitekey=y})()}getAssertedRecaptcha(){return le(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class No{constructor(g,y){this.verificationId=g,this.onConfirmation=y}confirm(g){const y=da._fromVerification(this.verificationId,g);return this.onConfirmation(y)}}function ti(b,g,y){return $d.apply(this,arguments)}function $d(){return($d=(0,l.Z)(function*(b,g,y){const E=bt(b),x=yield Lo(E,g,(0,H.m9)(y));return new No(x,V=>hl(E,V))})).apply(this,arguments)}function Fo(b,g,y){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,l.Z)(function*(b,g,y){const E=(0,H.m9)(b);yield os(!1,E,"phone");const x=yield Lo(E.auth,g,(0,H.m9)(y));return new No(x,V=>Pt(E,V))})).apply(this,arguments)}function us(b,g,y){return no.apply(this,arguments)}function no(){return(no=(0,l.Z)(function*(b,g,y){const E=(0,H.m9)(b),x=yield Lo(E.auth,g,(0,H.m9)(y));return new No(x,V=>Tm(E,V))})).apply(this,arguments)}function Lo(b,g,y){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,l.Z)(function*(b,g,y){var E;const x=yield y.verify();try{let V;if(le("string"==typeof x,b,"argument-error"),le(y.type===to,b,"argument-error"),V="string"==typeof g?{phoneNumber:g}:g,"session"in V){const se=V.session;if("phoneNumber"in V)return le("enroll"===se.type,b,"internal-error"),(yield qn(b,{idToken:se.credential,phoneEnrollmentInfo:{phoneNumber:V.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{le("signin"===se.type,b,"internal-error");const xe=(null===(E=V.multiFactorHint)||void 0===E?void 0:E.uid)||V.multiFactorUid;return le(xe,b,"missing-multi-factor-info"),(yield Cf(b,{mfaPendingCredential:se.credential,mfaEnrollmentId:xe,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:se}=yield Em(b,{phoneNumber:V.phoneNumber,recaptchaToken:x});return se}}finally{y._reset()}})).apply(this,arguments)}function kl(b,g){return io.apply(this,arguments)}function io(){return(io=(0,l.Z)(function*(b,g){yield gc((0,H.m9)(b),g)})).apply(this,arguments)}let If=(()=>{class b{constructor(y){this.providerId=b.PROVIDER_ID,this.auth=bt(y)}verifyPhoneNumber(y,E){return Lo(this.auth,y,(0,H.m9)(E))}static credential(y,E){return da._fromVerification(y,E)}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:E,temporaryProof:x}=y;return E&&x?da._fromTokenResponse(E,x):null}}return b.PROVIDER_ID="phone",b.PHONE_SIGN_IN_METHOD="phone",b})();function xl(b,g){return g?ne(g):(le(b._popupRedirectResolver,b,"argument-error"),b._popupRedirectResolver)}class Rl extends fr{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Ao(g,this._buildIdpRequest())}_linkToIdToken(g,y){return Ao(g,this._buildIdpRequest(y))}_getReauthenticationResolver(g){return Ao(g,this._buildIdpRequest())}_buildIdpRequest(g){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(y.idToken=g),y}}function Gd(b){return hu(b.auth,new Rl(b),b.bypassAuthState)}function _r(b){const{auth:g,user:y}=b;return le(y,g,"internal-error"),_c(y,new Rl(b),b.bypassAuthState)}function Fa(b){return Li.apply(this,arguments)}function Li(){return(Li=(0,l.Z)(function*(b){const{auth:g,user:y}=b;return le(y,g,"internal-error"),gc(y,new Rl(b),b.bypassAuthState)})).apply(this,arguments)}class Ol{constructor(g,y,E,x,V=!1){this.auth=g,this.resolver=E,this.user=x,this.bypassAuthState=V,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var g=this;return new Promise(function(){var y=(0,l.Z)(function*(E,x){g.pendingPromise={resolve:E,reject:x};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(V){g.reject(V)}});return function(E,x){return y.apply(this,arguments)}}())}onAuthEvent(g){var y=this;return(0,l.Z)(function*(){const{urlResponse:E,sessionId:x,postBody:V,tenantId:se,error:xe,type:Je}=g;if(xe)return void y.reject(xe);const gt={auth:y.auth,requestUri:E,sessionId:x,tenantId:se||void 0,postBody:V||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(Je)(gt))}catch(Yt){y.reject(Yt)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return Gd;case"linkViaPopup":case"linkViaRedirect":return Fa;case"reauthViaPopup":case"reauthViaRedirect":return _r;default:rt(this.auth,"internal-error")}}resolve(g){be(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){be(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const St=new Ze(2e3,1e4);function Sn(b,g,y){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,l.Z)(function*(b,g,y){const E=bt(b);Se(b,g,Pi);const x=xl(E,y);return new Tc(E,"signInViaPopup",g,x).executeNotNull()})).apply(this,arguments)}function xs(b,g,y){return mn.apply(this,arguments)}function mn(){return(mn=(0,l.Z)(function*(b,g,y){const E=(0,H.m9)(b);Se(E.auth,g,Pi);const x=xl(E.auth,y);return new Tc(E.auth,"reauthViaPopup",g,x,E).executeNotNull()})).apply(this,arguments)}function et(b,g,y){return Sf.apply(this,arguments)}function Sf(){return(Sf=(0,l.Z)(function*(b,g,y){const E=(0,H.m9)(b);Se(E.auth,g,Pi);const x=xl(E.auth,y);return new Tc(E.auth,"linkViaPopup",g,x,E).executeNotNull()})).apply(this,arguments)}let Tc=(()=>{class b extends Ol{constructor(y,E,x,V,se){super(y,E,V,se),this.provider=x,this.authWindow=null,this.pollId=null,b.currentPopupAction&&b.currentPopupAction.cancel(),b.currentPopupAction=this}executeNotNull(){var y=this;return(0,l.Z)(function*(){const E=yield y.execute();return le(E,y.auth,"internal-error"),E})()}onExecution(){var y=this;return(0,l.Z)(function*(){be(1===y.filter.length,"Popup operations only handle one event");const E=Sa();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],E),y.authWindow.associatedEvent=E,y.resolver._originValidation(y.auth).catch(x=>{y.reject(x)}),y.resolver._isIframeWebStorageSupported(y.auth,x=>{x||y.reject(Fe(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(Fe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,b.currentPopupAction=null}pollUserCancellation(){const y=()=>{var E,x;this.pollId=null!==(x=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==x&&x.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Fe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(y,St.get())};y()}}return b.currentPopupAction=null,b})();const ro=new Map;class Yi extends Ol{constructor(g,y,E=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,E),this.eventId=null}execute(){var g=()=>super.execute,y=this;return(0,l.Z)(function*(){let E=ro.get(y.auth._key());if(!E){try{const V=(yield function Tu(b,g){return La.apply(this,arguments)}(y.resolver,y.auth))?yield g().call(y):null;E=()=>Promise.resolve(V)}catch(x){E=()=>Promise.reject(x)}ro.set(y.auth._key(),E)}return y.bypassAuthState||ro.set(y.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(g){var y=()=>super.onAuthEvent,E=this;return(0,l.Z)(function*(){if("signInViaRedirect"===g.type)return y().call(E,g);if("unknown"!==g.type){if(g.eventId){const x=yield E.auth._redirectUserForId(g.eventId);if(x)return E.user=x,y().call(E,g);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,l.Z)(function*(){})()}cleanUp(){}}function La(){return(La=(0,l.Z)(function*(b,g){const y=zr(g),E=rr(b);if(!(yield E._isAvailable()))return!1;const x="true"===(yield E._get(y));return yield E._remove(y),x})).apply(this,arguments)}function Rs(b,g){return zd.apply(this,arguments)}function zd(){return(zd=(0,l.Z)(function*(b,g){return rr(b)._set(zr(g),"true")})).apply(this,arguments)}function Va(){ro.clear()}function Ba(b,g){ro.set(b._key(),g)}function rr(b){return ne(b._redirectPersistence)}function zr(b){return fn("pendingRedirect",b.config.apiKey,b.name)}function Mc(b,g,y){return function Vn(b,g,y){return Ua.apply(this,arguments)}(b,g,y)}function Ua(){return(Ua=(0,l.Z)(function*(b,g,y){const E=bt(b);Se(b,g,Pi);const x=xl(E,y);return yield Rs(x,E),x._openRedirect(E,g,"signInViaRedirect")})).apply(this,arguments)}function S(b,g,y){return function T(b,g,y){return k.apply(this,arguments)}(b,g,y)}function k(){return(k=(0,l.Z)(function*(b,g,y){const E=(0,H.m9)(b);Se(E.auth,g,Pi);const x=xl(E.auth,y);yield Rs(x,E.auth);const V=yield $t(E);return x._openRedirect(E.auth,g,"reauthViaRedirect",V)})).apply(this,arguments)}function U(b,g,y){return function te(b,g,y){return fe.apply(this,arguments)}(b,g,y)}function fe(){return(fe=(0,l.Z)(function*(b,g,y){const E=(0,H.m9)(b);Se(E.auth,g,Pi);const x=xl(E.auth,y);yield os(!1,E,g.providerId),yield Rs(x,E.auth);const V=yield $t(E);return x._openRedirect(E.auth,g,"linkViaRedirect",V)})).apply(this,arguments)}function Pe(b,g){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,l.Z)(function*(b,g){return yield bt(b)._initializationPromise,wt(b,g,!1)})).apply(this,arguments)}function wt(b,g){return kt.apply(this,arguments)}function kt(){return(kt=(0,l.Z)(function*(b,g,y=!1){const E=bt(b),x=xl(E,g),se=yield new Yi(E,x,y).execute();return se&&!y&&(delete se.user._redirectEventId,yield E._persistUserIfCurrent(se.user),yield E._setRedirectUser(null,g)),se})).apply(this,arguments)}function $t(b){return Et.apply(this,arguments)}function Et(){return(Et=(0,l.Z)(function*(b){const g=Sa(`${b.uid}:::`);return b._redirectEventId=g,yield b.auth._setRedirectUser(b),yield b.auth._persistUserIfCurrent(b),g})).apply(this,arguments)}class Vi{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let y=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(g,E)&&(y=!0,this.sendToConsumer(g,E),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function Fl(b){switch(b.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Nl(b);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=g,y=!0)),y}sendToConsumer(g,y){var E;if(g.error&&!Nl(g)){const x=(null===(E=g.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";y.onError(Fe(this.auth,x))}else y.onAuthEvent(g)}isEventForConsumer(g,y){const E=null===y.eventId||!!g.eventId&&g.eventId===y.eventId;return y.filter.includes(g.type)&&E}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Pl(g))}saveEventToCache(g){this.cachedEventUids.add(Pl(g)),this.lastProcessedEventTime=Date.now()}}function Pl(b){return[b.type,b.eventId,b.sessionId,b.tenantId].filter(g=>g).join("-")}function Nl({type:b,error:g}){return"unknown"===b&&"auth/no-auth-event"===g?.code}function Vo(b){return so.apply(this,arguments)}function so(){return(so=(0,l.Z)(function*(b,g={}){return Ht(b,"GET","/v1/projects",g)})).apply(this,arguments)}const kc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ll=/^https?/;function Vl(){return(Vl=(0,l.Z)(function*(b){if(b.config.emulator)return;const{authorizedDomains:g}=yield Vo(b);for(const y of g)try{if(cM(y))return}catch{}rt(b,"unauthorized-domain")})).apply(this,arguments)}function cM(b){const g=Ue(),{protocol:y,hostname:E}=new URL(g);if(b.startsWith("chrome-extension://")){const se=new URL(b);return""===se.hostname&&""===E?"chrome-extension:"===y&&b.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===y&&se.hostname===E}if(!Ll.test(y))return!1;if(kc.test(b))return E===b;const x=b.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(E)}const UC=new Ze(3e4,6e4);function wy(){const b=Wn().___jsl;if(b?.H)for(const g of Object.keys(b.H))if(b.H[g].r=b.H[g].r||[],b.H[g].L=b.H[g].L||[],b.H[g].r=[...b.H[g].L],b.CP)for(let y=0;y<b.CP.length;y++)b.CP[y]=null}let xc=null;function Cy(b){return xc=xc||function HC(b){return new Promise((g,y)=>{var E,x,V;function se(){wy(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{wy(),y(Fe(b,"network-request-failed"))},timeout:UC.get()})}if(null!==(x=null===(E=Wn().gapi)||void 0===E?void 0:E.iframes)&&void 0!==x&&x.Iframe)g(gapi.iframes.getContext());else{if(null===(V=Wn().gapi)||void 0===V||!V.load){const xe=Pa("iframefcb");return Wn()[xe]=()=>{gapi.load?se():y(Fe(b,"network-request-failed"))},Po(`https://apis.google.com/js/api.js?onload=${xe}`).catch(Je=>y(Je))}se()}}).catch(g=>{throw xc=null,g})}(b),xc}const jC=new Ze(5e3,15e3),Dy={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xm(b){const g=b.config;le(g.authDomain,b,"auth-domain-config-required");const y=g.emulator?En(g,"emulator/auth/iframe"):`https://${b.config.authDomain}/__/auth/iframe`,E={apiKey:g.apiKey,appName:b.name,v:P.SDK_VERSION},x=dM.get(b.config.apiHost);x&&(E.eid=x);const V=b._getFrameworks();return V.length&&(E.fw=V.join(",")),`${y}?${(0,H.xO)(E).slice(1)}`}function Tf(){return Tf=(0,l.Z)(function*(b){const g=yield Cy(b),y=Wn().gapi;return le(y,b,"internal-error"),g.open({where:document.body,url:xm(b),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Dy,dontclear:!0},E=>new Promise(function(){var x=(0,l.Z)(function*(V,se){yield E.restyle({setHideOnLeave:!1});const xe=Fe(b,"network-request-failed"),Je=Wn().setTimeout(()=>{se(xe)},jC.get());function gt(){Wn().clearTimeout(Je),V(E)}E.ping(gt).then(gt,()=>{se(xe)})});return function(V,se){return x.apply(this,arguments)}}()))}),Tf.apply(this,arguments)}const Af={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class qC{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function qd(b,g,y,E,x,V){le(b.config.authDomain,b,"auth-domain-config-required"),le(b.config.apiKey,b,"invalid-api-key");const se={apiKey:b.config.apiKey,appName:b.name,authType:y,redirectUrl:E,v:P.SDK_VERSION,eventId:x};if(g instanceof Pi){g.setDefaultLanguage(b.languageCode),se.providerId=g.providerId||"",(0,H.xb)(g.getCustomParameters())||(se.customParameters=JSON.stringify(g.getCustomParameters()));for(const[Je,gt]of Object.entries(V||{}))se[Je]=gt}if(g instanceof fa){const Je=g.getScopes().filter(gt=>""!==gt);Je.length>0&&(se.scopes=Je.join(","))}b.tenantId&&(se.tid=b.tenantId);const xe=se;for(const Je of Object.keys(xe))void 0===xe[Je]&&delete xe[Je];return`${function Bl({config:b}){return b.emulator?En(b,"emulator/auth/handler"):`https://${b.authDomain}/__/auth/handler`}(b)}?${(0,H.xO)(xe).slice(1)}`}const Pm="webStorageSupport",Ty=class WC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Js,this._completeRedirectFn=wt,this._overrideRedirectResult=Ba}_openPopup(g,y,E,x){var V=this;return(0,l.Z)(function*(){var se;be(null===(se=V.eventManagers[g._key()])||void 0===se?void 0:se.manager,"_initialize() not called before _openPopup()");const xe=qd(g,y,E,Ue(),x);return function Mf(b,g,y,E=500,x=600){const V=Math.max((window.screen.availHeight-x)/2,0).toString(),se=Math.max((window.screen.availWidth-E)/2,0).toString();let xe="";const Je=Object.assign(Object.assign({},Af),{width:E.toString(),height:x.toString(),top:V,left:se}),gt=(0,H.z$)().toLowerCase();y&&(xe=Ce(gt)?"_blank":y),$(gt)&&(g=g||"http://localhost",Je.scrollbars="yes");const Yt=Object.entries(Je).reduce((oo,[Oc,Fm])=>`${oo}${Oc}=${Fm},`,"");if(function Nn(b=(0,H.z$)()){var g;return at(b)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(gt)&&"_self"!==xe)return function Om(b,g){const y=document.createElement("a");y.href=b,y.target=g;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(E)}(g||"",xe),new qC(null);const Un=window.open(g||"",xe,Yt);le(Un,b,"popup-blocked");try{Un.focus()}catch{}return new qC(Un)}(g,xe,Sa())})()}_openRedirect(g,y,E,x){var V=this;return(0,l.Z)(function*(){return yield V._originValidation(g),function Bd(b){Wn().location.href=b}(qd(g,y,E,Ue(),x)),new Promise(()=>{})})()}_initialize(g){const y=g._key();if(this.eventManagers[y]){const{manager:x,promise:V}=this.eventManagers[y];return x?Promise.resolve(x):(be(V,"If manager is not set, promise should be"),V)}const E=this.initAndGetManager(g);return this.eventManagers[y]={promise:E},E.catch(()=>{delete this.eventManagers[y]}),E}initAndGetManager(g){var y=this;return(0,l.Z)(function*(){const E=yield function $C(b){return Tf.apply(this,arguments)}(g),x=new Vi(g);return E.register("authEvent",V=>(le(V?.authEvent,g,"invalid-auth-event"),{status:x.onEvent(V.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[g._key()]={manager:x},y.iframes[g._key()]=E,x})()}_isIframeWebStorageSupported(g,y){this.iframes[g._key()].send(Pm,{type:Pm},x=>{var V;const se=null===(V=x?.[0])||void 0===V?void 0:V[Pm];void 0!==se&&y(!!se),rt(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const y=g._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function Ha(b){return Vl.apply(this,arguments)}(g)),this.originValidationPromises[y]}get _shouldInitProactively(){return vn()||q()||at()}};class Nm extends class YC{constructor(g){this.factorId=g}_process(g,y,E){switch(y.type){case"enroll":return this._finalizeEnroll(g,y.credential,E);case"signin":return this._finalizeSignIn(g,y.credential);default:return he("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Nm(g)}_finalizeEnroll(g,y,E){return function bc(b,g){return Ht(b,"POST","/v2/accounts/mfaEnrollment:finalize",Wt(b,g))}(g,{idToken:y,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,y){return function Ra(b,g){return Ht(b,"POST","/v2/accounts/mfaSignIn:finalize",Wt(b,g))}(g,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ja=(()=>{class b{constructor(){}static assertion(y){return Nm._fromCredential(y)}}return b.FACTOR_ID="phone",b})();var Rc="@firebase/auth";class ZC{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var y=this;return(0,l.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const y=this.auth.onIdTokenChanged(E=>{var x;g((null===(x=E)||void 0===x?void 0:x.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,y),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const y=this.internalListeners.get(g);!y||(this.internalListeners.delete(g),y(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}!function QC(b){(0,P._registerComponent)(new ye.wA("auth",(g,{options:y})=>{const E=g.getProvider("app").getImmediate(),x=g.getProvider("heartbeat"),{apiKey:V,authDomain:se}=E.options;return((xe,Je)=>{le(V&&!V.includes(":"),"invalid-api-key",{appName:xe.name}),le(!se?.includes(":"),"argument-error",{appName:xe.name});const gt={apiKey:V,authDomain:se,clientPlatform:b,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Rn(b)},Yt=new Eo(xe,Je,gt);return function ue(b,g){const y=g?.persistence||[],E=(Array.isArray(y)?y:[y]).map(ne);g?.errorMap&&b._updateErrorMap(g.errorMap),b._initializeWithPersistence(E,g?.popupRedirectResolver)}(Yt,y),Yt})(E,x)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,y,E)=>{g.getProvider("auth-internal").initialize()})),(0,P._registerComponent)(new ye.wA("auth-internal",g=>{const y=bt(g.getProvider("auth").getImmediate());return new ZC(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,P.registerVersion)(Rc,"0.20.6",function KC(b){switch(b){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(b)),(0,P.registerVersion)(Rc,"0.20.6","esm2017")}("Browser")},2090:(ht,ke,L)=>{L.d(ke,{$s:()=>qi,BH:()=>Ge,DV:()=>Ht,Dv:()=>Ii,G6:()=>le,GJ:()=>tn,L:()=>me,LL:()=>Ue,Mn:()=>Se,Pz:()=>qt,Sg:()=>Ne,UG:()=>Ee,UI:()=>wo,US:()=>ye,Wj:()=>kn,Yr:()=>We,ZB:()=>Y,ZR:()=>ue,b$:()=>rt,cI:()=>en,d:()=>Fe,dS:()=>pt,eu:()=>be,g5:()=>P,gK:()=>ss,gQ:()=>Ur,h$:()=>ae,hl:()=>he,hu:()=>H,jU:()=>_e,lb:()=>Dn,m9:()=>Zt,ne:()=>rs,p$:()=>W,pd:()=>$n,r3:()=>Wt,ru:()=>it,tV:()=>we,uI:()=>lt,ug:()=>mt,vZ:()=>Ri,w1:()=>Re,w9:()=>an,xO:()=>is,xb:()=>xi,z$:()=>Ie,zI:()=>J,zd:()=>dr});const H=function(X,G){if(!X)throw P(G)},P=function(X){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+X)},ce=function(X){const G=[];let j=0;for(let Z=0;Z<X.length;Z++){let K=X.charCodeAt(Z);K<128?G[j++]=K:K<2048?(G[j++]=K>>6|192,G[j++]=63&K|128):55296==(64512&K)&&Z+1<X.length&&56320==(64512&X.charCodeAt(Z+1))?(K=65536+((1023&K)<<10)+(1023&X.charCodeAt(++Z)),G[j++]=K>>18|240,G[j++]=K>>12&63|128,G[j++]=K>>6&63|128,G[j++]=63&K|128):(G[j++]=K>>12|224,G[j++]=K>>6&63|128,G[j++]=63&K|128)}return G},ye={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(X,G){if(!Array.isArray(X))throw Error("encodeByteArray takes an array as a parameter");this.init_();const j=G?this.byteToCharMapWebSafe_:this.byteToCharMap_,Z=[];for(let K=0;K<X.length;K+=3){const Ae=X[K],qe=K+1<X.length,Ct=qe?X[K+1]:0,pn=K+2<X.length,fn=pn?X[K+2]:0;let $=(15&Ct)<<2|fn>>6,q=63&fn;pn||(q=64,qe||($=64)),Z.push(j[Ae>>2],j[(3&Ae)<<4|Ct>>4],j[$],j[q])}return Z.join("")},encodeString(X,G){return this.HAS_NATIVE_SUPPORT&&!G?btoa(X):this.encodeByteArray(ce(X),G)},decodeString(X,G){return this.HAS_NATIVE_SUPPORT&&!G?atob(X):function(X){const G=[];let j=0,Z=0;for(;j<X.length;){const K=X[j++];if(K<128)G[Z++]=String.fromCharCode(K);else if(K>191&&K<224){const Ae=X[j++];G[Z++]=String.fromCharCode((31&K)<<6|63&Ae)}else if(K>239&&K<365){const pn=((7&K)<<18|(63&X[j++])<<12|(63&X[j++])<<6|63&X[j++])-65536;G[Z++]=String.fromCharCode(55296+(pn>>10)),G[Z++]=String.fromCharCode(56320+(1023&pn))}else{const Ae=X[j++],qe=X[j++];G[Z++]=String.fromCharCode((15&K)<<12|(63&Ae)<<6|63&qe)}}return G.join("")}(this.decodeStringToByteArray(X,G))},decodeStringToByteArray(X,G){this.init_();const j=G?this.charToByteMapWebSafe_:this.charToByteMap_,Z=[];for(let K=0;K<X.length;){const Ae=j[X.charAt(K++)],Ct=K<X.length?j[X.charAt(K)]:0;++K;const fn=K<X.length?j[X.charAt(K)]:64;++K;const re=K<X.length?j[X.charAt(K)]:64;if(++K,null==Ae||null==Ct||null==fn||null==re)throw Error();Z.push(Ae<<2|Ct>>4),64!==fn&&(Z.push(Ct<<4&240|fn>>2),64!==re&&Z.push(fn<<6&192|re))}return Z},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let X=0;X<this.ENCODED_VALS.length;X++)this.byteToCharMap_[X]=this.ENCODED_VALS.charAt(X),this.charToByteMap_[this.byteToCharMap_[X]]=X,this.byteToCharMapWebSafe_[X]=this.ENCODED_VALS_WEBSAFE.charAt(X),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[X]]=X,X>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(X)]=X,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(X)]=X)}}},ae=function(X){const G=ce(X);return ye.encodeByteArray(G,!0)},me=function(X){return ae(X).replace(/\./g,"")},we=function(X){try{return ye.decodeString(X,!0)}catch(G){console.error("base64Decode failed: ",G)}return null};function W(X){return Y(void 0,X)}function Y(X,G){if(!(G instanceof Object))return G;switch(G.constructor){case Date:return new Date(G.getTime());case Object:void 0===X&&(X={});break;case Array:X=[];break;default:return G}for(const j in G)!G.hasOwnProperty(j)||!ee(j)||(X[j]=Y(X[j],G[j]));return X}function ee(X){return"__proto__"!==X}class Ge{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((G,j)=>{this.resolve=G,this.reject=j})}wrapCallback(G){return(j,Z)=>{j?this.reject(j):this.resolve(Z),"function"==typeof G&&(this.promise.catch(()=>{}),1===G.length?G(j):G(j,Z))}}}function Ne(X,G){if(X.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Z=G||"demo-project",K=X.iat||0,Ae=X.sub||X.user_id;if(!Ae)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const qe=Object.assign({iss:`https://securetoken.google.com/${Z}`,aud:Z,iat:K,exp:K+3600,auth_time:K,sub:Ae,user_id:Ae,firebase:{sign_in_provider:"custom",identities:{}}},X);return[me(JSON.stringify({alg:"none",type:"JWT"})),me(JSON.stringify(qe)),""].join(".")}function Ie(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function lt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ie())}function Ee(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function _e(){return"object"==typeof self&&self.self===self}function it(){const X="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof X&&void 0!==X.id}function rt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Fe(){return Ie().indexOf("Electron/")>=0}function Re(){const X=Ie();return X.indexOf("MSIE ")>=0||X.indexOf("Trident/")>=0}function Se(){return Ie().indexOf("MSAppHost/")>=0}function We(){return!1}function le(){return!Ee()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function he(){return"object"==typeof indexedDB}function be(){return new Promise((X,G)=>{try{let j=!0;const Z="validate-browser-context-for-indexeddb-analytics-module",K=self.indexedDB.open(Z);K.onsuccess=()=>{K.result.close(),j||self.indexedDB.deleteDatabase(Z),X(!0)},K.onupgradeneeded=()=>{j=!1},K.onerror=()=>{var Ae;G((null===(Ae=K.error)||void 0===Ae?void 0:Ae.message)||"")}}catch(j){G(j)}})}function J(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ue extends Error{constructor(G,j,Z){super(j),this.code=G,this.customData=Z,this.name="FirebaseError",Object.setPrototypeOf(this,ue.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ue.prototype.create)}}class Ue{constructor(G,j,Z){this.service=G,this.serviceName=j,this.errors=Z}create(G,...j){const Z=j[0]||{},K=`${this.service}/${G}`,Ae=this.errors[G],qe=Ae?function He(X,G){return X.replace(yt,(j,Z)=>{const K=G[Z];return null!=K?String(K):`<${Z}?>`})}(Ae,Z):"Error";return new ue(K,`${this.serviceName}: ${qe} (${K}).`,Z)}}const yt=/\{\$([^}]+)}/g;function en(X){return JSON.parse(X)}function qt(X){return JSON.stringify(X)}const Ze=function(X){let G={},j={},Z={},K="";try{const Ae=X.split(".");G=en(we(Ae[0])||""),j=en(we(Ae[1])||""),K=Ae[2],Z=j.d||{},delete j.d}catch{}return{header:G,claims:j,data:Z,signature:K}},an=function(X){const j=Ze(X).claims;return!!j&&"object"==typeof j&&j.hasOwnProperty("iat")},tn=function(X){const G=Ze(X).claims;return"object"==typeof G&&!0===G.admin};function Wt(X,G){return Object.prototype.hasOwnProperty.call(X,G)}function Ht(X,G){if(Object.prototype.hasOwnProperty.call(X,G))return X[G]}function xi(X){for(const G in X)if(Object.prototype.hasOwnProperty.call(X,G))return!1;return!0}function wo(X,G,j){const Z={};for(const K in X)Object.prototype.hasOwnProperty.call(X,K)&&(Z[K]=G.call(j,X[K],K,X));return Z}function Ri(X,G){if(X===G)return!0;const j=Object.keys(X),Z=Object.keys(G);for(const K of j){if(!Z.includes(K))return!1;const Ae=X[K],qe=G[K];if(Pn(Ae)&&Pn(qe)){if(!Ri(Ae,qe))return!1}else if(Ae!==qe)return!1}for(const K of Z)if(!j.includes(K))return!1;return!0}function Pn(X){return null!==X&&"object"==typeof X}function is(X){const G=[];for(const[j,Z]of Object.entries(X))Array.isArray(Z)?Z.forEach(K=>{G.push(encodeURIComponent(j)+"="+encodeURIComponent(K))}):G.push(encodeURIComponent(j)+"="+encodeURIComponent(Z));return G.length?"&"+G.join("&"):""}function dr(X){const G={};return X.replace(/^\?/,"").split("&").forEach(Z=>{if(Z){const[K,Ae]=Z.split("=");G[decodeURIComponent(K)]=decodeURIComponent(Ae)}}),G}function $n(X){const G=X.indexOf("?");if(!G)return"";const j=X.indexOf("#",G);return X.substring(G,j>0?j:void 0)}class Ur{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let G=1;G<this.blockSize;++G)this.pad_[G]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(G,j){j||(j=0);const Z=this.W_;if("string"==typeof G)for(let re=0;re<16;re++)Z[re]=G.charCodeAt(j)<<24|G.charCodeAt(j+1)<<16|G.charCodeAt(j+2)<<8|G.charCodeAt(j+3),j+=4;else for(let re=0;re<16;re++)Z[re]=G[j]<<24|G[j+1]<<16|G[j+2]<<8|G[j+3],j+=4;for(let re=16;re<80;re++){const $=Z[re-3]^Z[re-8]^Z[re-14]^Z[re-16];Z[re]=4294967295&($<<1|$>>>31)}let fn,oi,K=this.chain_[0],Ae=this.chain_[1],qe=this.chain_[2],Ct=this.chain_[3],pn=this.chain_[4];for(let re=0;re<80;re++){re<40?re<20?(fn=Ct^Ae&(qe^Ct),oi=1518500249):(fn=Ae^qe^Ct,oi=1859775393):re<60?(fn=Ae&qe|Ct&(Ae|qe),oi=2400959708):(fn=Ae^qe^Ct,oi=3395469782);const $=(K<<5|K>>>27)+fn+pn+oi+Z[re]&4294967295;pn=Ct,Ct=qe,qe=4294967295&(Ae<<30|Ae>>>2),Ae=K,K=$}this.chain_[0]=this.chain_[0]+K&4294967295,this.chain_[1]=this.chain_[1]+Ae&4294967295,this.chain_[2]=this.chain_[2]+qe&4294967295,this.chain_[3]=this.chain_[3]+Ct&4294967295,this.chain_[4]=this.chain_[4]+pn&4294967295}update(G,j){if(null==G)return;void 0===j&&(j=G.length);const Z=j-this.blockSize;let K=0;const Ae=this.buf_;let qe=this.inbuf_;for(;K<j;){if(0===qe)for(;K<=Z;)this.compress_(G,K),K+=this.blockSize;if("string"==typeof G){for(;K<j;)if(Ae[qe]=G.charCodeAt(K),++qe,++K,qe===this.blockSize){this.compress_(Ae),qe=0;break}}else for(;K<j;)if(Ae[qe]=G[K],++qe,++K,qe===this.blockSize){this.compress_(Ae),qe=0;break}}this.inbuf_=qe,this.total_+=j}digest(){const G=[];let j=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let K=this.blockSize-1;K>=56;K--)this.buf_[K]=255&j,j/=256;this.compress_(this.buf_);let Z=0;for(let K=0;K<5;K++)for(let Ae=24;Ae>=0;Ae-=8)G[Z]=this.chain_[K]>>Ae&255,++Z;return G}}function rs(X,G){const j=new st(X,G);return j.subscribe.bind(j)}class st{constructor(G,j){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=j,this.task.then(()=>{G(this)}).catch(Z=>{this.error(Z)})}next(G){this.forEachObserver(j=>{j.next(G)})}error(G){this.forEachObserver(j=>{j.error(G)}),this.close(G)}complete(){this.forEachObserver(G=>{G.complete()}),this.close()}subscribe(G,j,Z){let K;if(void 0===G&&void 0===j&&void 0===Z)throw new Error("Missing Observer.");K=function Gn(X,G){if("object"!=typeof X||null===X)return!1;for(const j of G)if(j in X&&"function"==typeof X[j])return!0;return!1}(G,["next","error","complete"])?G:{next:G,error:j,complete:Z},void 0===K.next&&(K.next=yn),void 0===K.error&&(K.error=yn),void 0===K.complete&&(K.complete=yn);const Ae=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?K.error(this.finalError):K.complete()}catch{}}),this.observers.push(K),Ae}unsubscribeOne(G){void 0===this.observers||void 0===this.observers[G]||(delete this.observers[G],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(G){if(!this.finalized)for(let j=0;j<this.observers.length;j++)this.sendOne(j,G)}sendOne(G,j){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[G])try{j(this.observers[G])}catch(Z){typeof console<"u"&&console.error&&console.error(Z)}})}close(G){this.finalized||(this.finalized=!0,void 0!==G&&(this.finalError=G),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yn(){}const Ii=function(X,G,j,Z){let K;if(Z<G?K="at least "+G:Z>j&&(K=0===j?"none":"no more than "+j),K)throw new Error(X+" failed: Was called with "+Z+(1===Z?" argument.":" arguments.")+" Expects "+K+".")};function ss(X,G){return`${X} failed: ${G} argument `}function kn(X,G,j,Z){if((!Z||j)&&"function"!=typeof j)throw new Error(ss(X,G)+"must be a valid function.")}function Dn(X,G,j,Z){if((!Z||j)&&("object"!=typeof j||null===j))throw new Error(ss(X,G)+"must be a valid context object.")}const pt=function(X){const G=[];let j=0;for(let Z=0;Z<X.length;Z++){let K=X.charCodeAt(Z);if(K>=55296&&K<=56319){const Ae=K-55296;Z++,H(Z<X.length,"Surrogate pair missing trail surrogate."),K=65536+(Ae<<10)+(X.charCodeAt(Z)-56320)}K<128?G[j++]=K:K<2048?(G[j++]=K>>6|192,G[j++]=63&K|128):K<65536?(G[j++]=K>>12|224,G[j++]=K>>6&63|128,G[j++]=63&K|128):(G[j++]=K>>18|240,G[j++]=K>>12&63|128,G[j++]=K>>6&63|128,G[j++]=63&K|128)}return G},mt=function(X){let G=0;for(let j=0;j<X.length;j++){const Z=X.charCodeAt(j);Z<128?G++:Z<2048?G+=2:Z>=55296&&Z<=56319?(G+=4,j++):G+=3}return G};function qi(X,G=1e3,j=2){const Z=G*Math.pow(j,X),K=Math.round(.5*Z*(Math.random()-.5)*2);return Math.min(144e5,Z+K)}function Zt(X){return X&&X._delegate?X._delegate:X}},8668:(ht,ke,L)=>{var l=L(4650);let H=null;function P(){return H}const ae=new l.OlP("DocumentToken");let me=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return function we(){return(0,l.LFG)(Y)}()},providedIn:"platform"}),n})();const W=new l.OlP("Location Initialized");let Y=(()=>{class n extends me{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(e){const i=P().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=P().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,i,r){ee()?this._history.pushState(e,i,r):this.location.hash=r}replaceState(e,i,r){ee()?this._history.replaceState(e,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ae))},n.\u0275prov=l.Yz7({token:n,factory:function(){return function Ge(){return new Y((0,l.LFG)(ae))}()},providedIn:"platform"}),n})();function ee(){return!!window.history.pushState}function Ne(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function Ie(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function lt(n){return n&&"?"!==n[0]?"?"+n:n}let Ee=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return(0,l.f3M)(it)},providedIn:"root"}),n})();const _e=new l.OlP("appBaseHref");let it=(()=>{class n extends Ee{constructor(e,i){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??(0,l.f3M)(ae).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Ne(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+lt(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,s){const c=this.prepareExternalUrl(r+lt(s));this._platformLocation.pushState(e,i,c)}replaceState(e,i,r,s){const c=this.prepareExternalUrl(r+lt(s));this._platformLocation.replaceState(e,i,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(me),l.LFG(_e,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),rt=(()=>{class n extends Ee{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=Ne(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,s){let c=this.prepareExternalUrl(r+lt(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(e,i,c)}replaceState(e,i,r,s){let c=this.prepareExternalUrl(r+lt(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(me),l.LFG(_e,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Fe=(()=>{class n{constructor(e){this._subject=new l.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const i=this._locationStrategy.getBaseHref();this._baseHref=Ie(We(i)),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+lt(i))}normalize(e){return n.stripTrailingSlash(function Se(n,t){return n&&t.startsWith(n)?t.substring(n.length):t}(this._baseHref,We(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+lt(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+lt(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}}return n.normalizeQueryParams=lt,n.joinWithSlash=Ne,n.stripTrailingSlash=Ie,n.\u0275fac=function(e){return new(e||n)(l.LFG(Ee))},n.\u0275prov=l.Yz7({token:n,factory:function(){return function Re(){return new Fe((0,l.LFG)(Ee))}()},providedIn:"root"}),n})();function We(n){return n.replace(/\/index.html$/,"")}function hc(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const i=e.indexOf("="),[r,s]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}let ln=(()=>{class n{constructor(e,i,r,s){this._iterableDiffers=e,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&((0,l.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,l.AaK)(i.item)}`);this._toggleClass(i.item,!0)}),e.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!0)):Object.keys(e).forEach(i=>this._toggleClass(i,!!e[i])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!1)):Object.keys(e).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(e,i){(e=e.trim())&&e.split(/\s+/g).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.ZZ4),l.Y36(l.aQg),l.Y36(l.SBq),l.Y36(l.Qsj))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class So{constructor(t,e,i,r){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Hr=(()=>{class n{constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((r,s,c)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new So(r.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)i.remove(null===s?void 0:s);else if(null!==s){const d=i.get(s);i.move(d,c),To(d,r)}});for(let r=0,s=i.length;r<s;r++){const d=i.get(r).context;d.index=r,d.count=s,d.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{To(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.s_b),l.Y36(l.Rgc),l.Y36(l.ZZ4))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function To(n,t){n.context.$implicit=t.item}let bn=(()=>{class n{constructor(e,i){this._viewContainer=e,this._context=new uf,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){ai("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){ai("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.s_b),l.Y36(l.Rgc))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class uf{constructor(){this.$implicit=null,this.ngIf=null}}function ai(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,l.AaK)(t)}'.`)}class Dr{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let Es=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const i=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let i=0;i<this._defaultViews.length;i++)this._defaultViews[i].enforceState(e)}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=l.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),n})(),la=(()=>{class n{constructor(e,i,r){this.ngSwitch=r,r._addCase(),this._view=new Dr(e,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.s_b),l.Y36(l.Rgc),l.Y36(Es,9))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),n})(),ca=(()=>{class n{constructor(e,i,r){r._addDefault(new Dr(e,i))}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.s_b),l.Y36(l.Rgc),l.Y36(Es,9))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngSwitchDefault",""]],standalone:!0}),n})();class Cm{createSubscription(t,e){return t.subscribe({next:e,error:i=>{throw i}})}dispose(t){t.unsubscribe()}}class Ds{createSubscription(t,e){return t.then(e,i=>{throw i})}dispose(t){}}const Em=new Ds,vd=new Cm;let fc=(()=>{class n{constructor(e){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=e}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,i=>this._updateLatestValue(e,i))}_selectStrategy(e){if((0,l.QGY)(e))return Em;if((0,l.F4k)(e))return vd;throw function Ir(n,t){return new l.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,i){e===this._obj&&(this._latestValue=i,this._ref.markForCheck())}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.sBO,16))},n.\u0275pipe=l.Yjl({name:"async",type:n,pure:!1,standalone:!0}),n})(),ma=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();const Sr="browser";function ga(n){return"server"===n}let Sd=(()=>{class n{}return n.\u0275prov=(0,l.Yz7)({token:n,providedIn:"root",factory:()=>new df((0,l.LFG)(ae),window)}),n})();class df{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function Ni(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const c=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(c)return c}r=i.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=jr(this.window.history)||jr(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function jr(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ko{}class Qs extends class xd extends class ye{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function de(n){H||(H=n)}(new Qs)}onAndCancel(t,e,i){return t.addEventListener(e,i,!1),()=>{t.removeEventListener(e,i,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function Rd(){return Xs=Xs||document.querySelector("base"),Xs?Xs.getAttribute("href"):null}();return null==e?null:function As(n){Fn=Fn||document.createElement("a"),Fn.setAttribute("href",n);const t=Fn.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Xs=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return hc(document.cookie,t)}}let Fn,Xs=null;const Ln=new l.OlP("TRANSITION_ID"),_u=[{provide:l.ip1,useFactory:function gu(n,t,e){return()=>{e.get(l.CZH).donePromise.then(()=>{const i=P(),r=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[Ln,ae,l.zs3],multi:!0}];let yu=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const vu=new l.OlP("EventManagerPlugins");let Pd=(()=>{class n{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>r.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}addGlobalEventListener(e,i,r){return this._findPluginFor(i).addGlobalEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){const i=this._eventNameToPlugin.get(e);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const c=r[s];if(c.supports(e))return this._eventNameToPlugin.set(e,c),c}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(vu),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class bu{constructor(t){this._doc=t}addGlobalEventListener(t,e,i){const r=P().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,i)}}let Ea=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(e){const i=new Set;e.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Da=(()=>{class n extends Ea{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,i,r){e.forEach(s=>{const c=this._doc.createElement("style");c.textContent=s,r.push(i.appendChild(c))})}addHost(e){const i=[];this._addStylesToHost(this._stylesSet,e,i),this._hostNodes.set(e,i)}removeHost(e){const i=this._hostNodes.get(e);i&&i.forEach(Nd),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(e,r,i)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(Nd))}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ae))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function Nd(n){P().remove(n)}const Ia={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Fd=/%COMP%/g;function wc(n,t,e){for(let i=0;i<t.length;i++){let r=t[i];Array.isArray(r)?wc(n,r,e):(r=r.replace(Fd,n),e.push(r))}return e}function Cc(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let El=(()=>{class n{constructor(e,i,r){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new Ms(e)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;switch(i.encapsulation){case l.ifc.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new Vd(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(e),r}case 1:case l.ifc.ShadowDom:return new yf(this.eventManager,this.sharedStylesHost,e,i);default:if(!this.rendererByCompId.has(i.id)){const r=wc(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Pd),l.LFG(Da),l.LFG(l.AFp))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class Ms{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(Ia[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){(Il(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(Il(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i="string"==typeof t?document.querySelector(t):t;if(!i)throw new Error(`The selector "${t}" did not match any elements`);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;const s=Ia[r];s?t.setAttributeNS(s,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){const r=Ia[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(l.JOm.DashCase|l.JOm.Important)?t.style.setProperty(e,i,r&l.JOm.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&l.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t[e]=i}setValue(t,e){t.nodeValue=e}listen(t,e,i){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Cc(i)):this.eventManager.addEventListener(t,e,Cc(i))}}function Il(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Vd extends Ms{constructor(t,e,i,r){super(t),this.component=i;const s=wc(r+"-"+i.id,i.styles,[]);e.addStyles(s),this.contentAttr=function qn(n){return"_ngcontent-%COMP%".replace(Fd,n)}(r+"-"+i.id),this.hostAttr=function bc(n){return"_nghost-%COMP%".replace(Fd,n)}(r+"-"+i.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}}class yf extends Ms{constructor(t,e,i,r){super(t),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=wc(r.id,r.styles,[]);for(let c=0;c<s.length;c++){const d=document.createElement("style");d.textContent=s[c],this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let ui=(()=>{class n extends bu{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ae))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const vf=["alt","control","meta","shift"],Js={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Eu={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Sl=(()=>{class n extends bu{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,i,r){const s=n.parseEventName(i),c=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(e,s.domEventName,c))}static parseEventName(e){const i=e.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let c="",d=i.indexOf("code");if(d>-1&&(i.splice(d,1),c="code."),vf.forEach(_=>{const w=i.indexOf(_);w>-1&&(i.splice(w,1),c+=_+".")}),c+=s,0!=i.length||0===s.length)return null;const p={};return p.domEventName=r,p.fullKey=c,p}static matchEventFullKeyCode(e,i){let r=Js[e.key]||e.key,s="";return i.indexOf("code.")>-1&&(r=e.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),vf.forEach(c=>{c!==r&&(0,Eu[c])(e)&&(s+=c+".")}),s+=r,s===i)}static eventCallback(e,i,r){return s=>{n.matchEventFullKeyCode(s,e)&&r.runGuarded(()=>i(s))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ae))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const Tl=(0,l.eFA)(l._c5,"browser",[{provide:l.Lbi,useValue:Sr},{provide:l.g9A,useValue:function Ud(){Qs.makeCurrent()},multi:!0},{provide:ae,useFactory:function Du(){return(0,l.RDi)(document),document},deps:[]}]),Ro=new l.OlP(""),Al=[{provide:l.rWj,useClass:class Od{addToWindow(t){l.dqk.getAngularTestability=(i,r=!0)=>{const s=t.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},l.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),l.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),l.dqk.frameworkStabilizers||(l.dqk.frameworkStabilizers=[]),l.dqk.frameworkStabilizers.push(i=>{const r=l.dqk.getAllAngularTestabilities();let s=r.length,c=!1;const d=function(p){c=c||p,s--,0==s&&i(c)};r.forEach(function(p){p.whenStable(d)})})}findTestabilityInTree(t,e,i){return null==e?null:t.getTestability(e)??(i?P().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:l.lri,useClass:l.dDg,deps:[l.R0b,l.eoX,l.rWj]},{provide:l.dDg,useClass:l.dDg,deps:[l.R0b,l.eoX,l.rWj]}],Ta=[{provide:l.zSh,useValue:"root"},{provide:l.qLn,useFactory:function ks(){return new l.qLn},deps:[]},{provide:vu,useClass:ui,multi:!0,deps:[ae,l.R0b,l.Lbi]},{provide:vu,useClass:Sl,multi:!0,deps:[ae]},{provide:El,useClass:El,deps:[Pd,Da,l.AFp]},{provide:l.FYo,useExisting:El},{provide:Ea,useExisting:Da},{provide:Da,useClass:Da,deps:[ae]},{provide:Pd,useClass:Pd,deps:[vu,l.R0b]},{provide:ko,useClass:yu,deps:[]},[]];let Oo=(()=>{class n{constructor(e){}static withServerTransition(e){return{ngModule:n,providers:[{provide:l.AFp,useValue:e.appId},{provide:Ln,useExisting:l.AFp},_u]}}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Ro,12))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[...Ta,...Al],imports:[ma,l.hGG]}),n})(),ls=(()=>{class n{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ae))},n.\u0275prov=l.Yz7({token:n,factory:function(e){let i=null;return i=e?new e:function Ml(){return new ls((0,l.LFG)(ae))}(),i},providedIn:"root"}),n})();typeof window<"u"&&window;let No,to=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:function(e){let i=null;return i=e?new(e||n):l.LFG(km),i},providedIn:"root"}),n})(),km=(()=>{class n extends to{constructor(e){super(),this._doc=e}sanitize(e,i){if(null==i)return null;switch(e){case l.q3G.NONE:return i;case l.q3G.HTML:return(0,l.qzn)(i,"HTML")?(0,l.z3N)(i):(0,l.EiD)(this._doc,String(i)).toString();case l.q3G.STYLE:return(0,l.qzn)(i,"Style")?(0,l.z3N)(i):i;case l.q3G.SCRIPT:if((0,l.qzn)(i,"Script"))return(0,l.z3N)(i);throw new Error("unsafe value used in a script context");case l.q3G.URL:return(0,l.qzn)(i,"URL")?(0,l.z3N)(i):(0,l.mCW)(String(i));case l.q3G.RESOURCE_URL:if((0,l.qzn)(i,"ResourceURL"))return(0,l.z3N)(i);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return(0,l.JVY)(e)}bypassSecurityTrustStyle(e){return(0,l.L6k)(e)}bypassSecurityTrustScript(e){return(0,l.eBb)(e)}bypassSecurityTrustUrl(e){return(0,l.LAX)(e)}bypassSecurityTrustResourceUrl(e){return(0,l.pB0)(e)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ae))},n.\u0275prov=l.Yz7({token:n,factory:function(e){let i=null;return i=e?new e:function by(n){return new km(n.get(ae))}(l.LFG(l.zs3)),i},providedIn:"root"}),n})();try{No=typeof Intl<"u"&&Intl.v8BreakIterator}catch{No=!1}let Fo,ti=(()=>{class n{constructor(e){this._platformId=e,this.isBrowser=this._platformId?function Tr(n){return n===Sr}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!No)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(l.Lbi))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Fi=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function us(){if(Fo)return Fo;if("object"!=typeof document||!document)return Fo=new Set(Fi),Fo;let n=document.createElement("input");return Fo=new Set(Fi.filter(t=>(n.setAttribute("type",t),n.type===t))),Fo}let no,io,Rl;function Gr(n){return function Lo(){if(null==no&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>no=!0}))}finally{no=no||!1}return no}()?n:!!n.capture}function If(){if(null==io){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return io=!1,io;if("scrollBehavior"in document.documentElement.style)io=!0;else{const n=Element.prototype.scrollTo;io=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return io}function Fa(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const t=n.shadowRoot.activeElement;if(t===n)break;n=t}return n}function Li(n){return n.composedPath?n.composedPath()[0]:n.target}function Ol(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var St=L(7579),Sn=L(727);class Ai extends St.x{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}}var xs=L(3269),mn=L(8996);function et(...n){const t=(0,xs.yG)(n);return(0,mn.D)(n,t)}const S=37,T=38,k=39,U=40;function Pc(n,...t){return t.length?t.some(e=>n[e]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}var Yn=L(8505),Nc=L(4986),_i=L(4482),Zn=L(5403);function Rf(n,t=Nc.z){return(0,_i.e)((e,i)=>{let r=null,s=null,c=null;const d=()=>{if(r){r.unsubscribe(),r=null;const _=s;s=null,i.next(_)}};function p(){const _=c+n,w=t.now();if(w<_)return r=this.schedule(void 0,_-w),void i.add(r);d()}e.subscribe((0,Zn.x)(i,_=>{s=_,c=t.now(),r||(r=t.schedule(p,n),i.add(r))},()=>{d(),i.complete()},void 0,()=>{s=r=null}))})}function yi(n,t){return(0,_i.e)((e,i)=>{let r=0;e.subscribe((0,Zn.x)(i,s=>n.call(t,s,r++)&&i.next(s)))})}var ct=L(4004),Ul=L(515);function ni(n){return n<=0?()=>Ul.E:(0,_i.e)((t,e)=>{let i=0;t.subscribe((0,Zn.x)(e,r=>{++i<=n&&(e.next(r),n<=i&&e.complete())}))})}function mM(n){return yi((t,e)=>n<=e)}var Yd=L(4671);function Zd(n,t=Yd.y){return n=n??iE,(0,_i.e)((e,i)=>{let r,s=!0;e.subscribe((0,Zn.x)(i,c=>{const d=t(c);(s||!n(r,d))&&(s=!1,r=d,i.next(c))}))})}function iE(n,t){return n===t}var Hl=L(8421),jl=L(5032);function sr(n){return(0,_i.e)((t,e)=>{(0,Hl.Xf)(n).subscribe((0,Zn.x)(e,()=>e.complete(),jl.Z)),!e.closed&&t.subscribe(e)})}function gn(n){return null!=n&&"false"!=`${n}`}function Kd(n,t=0){return function gM(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):t}function Qd(n){return Array.isArray(n)?n:[n]}function hi(n){return null==n?"":"string"==typeof n?n:`${n}px`}function qr(n){return n instanceof l.SBq?n.nativeElement:n}var Zi=L(9751);let sE=(()=>{class n{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),_M=(()=>{class n{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,i)=>this._cleanupObserver(i))}observe(e){const i=qr(e);return new Zi.y(r=>{const c=this._observeElement(i).subscribe(r);return()=>{c.unsubscribe(),this._unobserveElement(i)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const i=new St.x,r=this._mutationObserverFactory.create(s=>i.next(s));r&&r.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:r,stream:i,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:i,stream:r}=this._observedElements.get(e);i&&i.disconnect(),r.complete(),this._observedElements.delete(e)}}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(sE))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Oy=(()=>{class n{constructor(e,i,r){this._contentObserver=e,this._elementRef=i,this._ngZone=r,this.event=new l.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(e){this._disabled=gn(e),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=Kd(e),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(Rf(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(_M),l.Y36(l.SBq),l.Y36(l.R0b))},n.\u0275dir=l.lG2({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),Fc=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[sE]}),n})();const{isArray:yM}=Array,{getPrototypeOf:vM,prototype:bM,keys:wM}=Object;function Um(n){if(1===n.length){const t=n[0];if(yM(t))return{args:t,keys:null};if(function CM(n){return n&&"object"==typeof n&&vM(n)===bM}(t)){const e=wM(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}const{isArray:oE}=Array;function Hm(n){return(0,ct.U)(t=>function EM(n,t){return oE(t)?n(...t):n(t)}(n,t))}function DM(n,t){return n.reduce((e,i,r)=>(e[i]=t[r],e),{})}var IM=L(9672);function Mu(...n){const t=(0,xs.yG)(n),e=(0,xs.jO)(n),{args:i,keys:r}=Um(n);if(0===i.length)return(0,mn.D)([],t);const s=new Zi.y(function SM(n,t,e=Yd.y){return i=>{ku(t,()=>{const{length:r}=n,s=new Array(r);let c=r,d=r;for(let p=0;p<r;p++)ku(t,()=>{const _=(0,mn.D)(n[p],t);let w=!1;_.subscribe((0,Zn.x)(i,I=>{s[p]=I,w||(w=!0,d--),d||i.next(e(s.slice()))},()=>{--c||i.complete()}))},i)},i)}}(i,t,r?c=>DM(r,c):Yd.y));return e?s.pipe(Hm(e)):s}function ku(n,t,e){n?(0,IM.f)(e,n,t):t()}var $l=L(8189);function jm(...n){return function TM(){return(0,$l.J)(1)}()((0,mn.D)(n,(0,xs.yG)(n)))}function yr(...n){const t=(0,xs.yG)(n);return(0,_i.e)((e,i)=>{(t?jm(n,e,t):jm(n,e)).subscribe(i)})}const aE=new Set;let Xd,lE=(()=>{class n{constructor(e){this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Py}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function cE(n){if(!aE.has(n))try{Xd||(Xd=document.createElement("style"),Xd.setAttribute("type","text/css"),document.head.appendChild(Xd)),Xd.sheet&&(Xd.sheet.insertRule(`@media ${n} {body{ }}`,0),aE.add(n))}catch(t){console.error(t)}}(e),this._matchMedia(e)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ti))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Py(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let Ny=(()=>{class n{constructor(e,i){this._mediaMatcher=e,this._zone=i,this._queries=new Map,this._destroySubject=new St.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return uE(Qd(e)).some(r=>this._registerQuery(r).mql.matches)}observe(e){let s=Mu(uE(Qd(e)).map(c=>this._registerQuery(c).observable));return s=jm(s.pipe(ni(1)),s.pipe(mM(1),Rf(0))),s.pipe((0,ct.U)(c=>{const d={matches:!1,breakpoints:{}};return c.forEach(({matches:p,query:_})=>{d.matches=d.matches||p,d.breakpoints[_]=p}),d}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const i=this._mediaMatcher.matchMedia(e),s={observable:new Zi.y(c=>{const d=p=>this._zone.run(()=>c.next(p));return i.addListener(d),()=>{i.removeListener(d)}}).pipe(yr(i),(0,ct.U)(({matches:c})=>({query:e,matches:c})),sr(this._destroySubject)),mql:i};return this._queries.set(e,s),s}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(lE),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function uE(n){return n.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}class Ly{constructor(t){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new St.x,this._typeaheadSubscription=Sn.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=e=>e.disabled,this._pressedLetters=[],this.tabOut=new St.x,this.change=new St.x,t instanceof l.n_E&&t.changes.subscribe(e=>{if(this._activeItem){const r=e.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}})}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,Yn.b)(e=>this._pressedLetters.push(e)),Rf(t),yi(()=>this._pressedLetters.length>0),(0,ct.U)(()=>this._pressedLetters.join(""))).subscribe(e=>{const i=this._getItemsArray();for(let r=1;r<i.length+1;r++){const s=(this._activeItemIndex+r)%i.length,c=i[s];if(!this._skipPredicateFn(c)&&0===c.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}setActiveItem(t){const e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){const e=t.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!t[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(e){case 9:return void this.tabOut.next();case U:if(this._vertical&&r){this.setNextItemActive();break}return;case T:if(this._vertical&&r){this.setPreviousItemActive();break}return;case k:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case S:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;default:return void((r||Pc(t,"shiftKey"))&&(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){const e=this._getItemsArray(),i="number"==typeof t?t:e.indexOf(t);this._activeItem=e[i]??null,this._activeItemIndex=i}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){const e=this._getItemsArray();for(let i=1;i<=e.length;i++){const r=(this._activeItemIndex+t*i+e.length)%e.length;if(!this._skipPredicateFn(e[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){const i=this._getItemsArray();if(i[t]){for(;this._skipPredicateFn(i[t]);)if(!i[t+=e])return;this.setActiveItem(t)}}_getItemsArray(){return this._items instanceof l.n_E?this._items.toArray():this._items}}class fE extends Ly{setActiveItem(t){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(t),this.activeItem&&this.activeItem.setActiveStyles()}}class pE extends Ly{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}}let xM=(()=>{class n{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function Of(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const i=function Vy(n){try{return n.frameElement}catch{return null}}(function LM(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(e));if(i&&(-1===yE(i)||!this.isVisible(i)))return!1;let r=e.nodeName.toLowerCase(),s=yE(e);return e.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function FM(n){let t=n.nodeName.toLowerCase(),e="input"===t&&n.type;return"text"===e||"password"===e||"select"===t||"textarea"===t}(e))&&("audio"===r?!!e.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,i){return function By(n){return!function OM(n){return function gE(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function RM(n){let t=n.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(n)||function PM(n){return function NM(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||_E(n))}(e)&&!this.isDisabled(e)&&(i?.ignoreVisibility||this.isVisible(e))}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ti))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function _E(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let t=n.getAttribute("tabindex");return!(!t||isNaN(parseInt(t,10)))}function yE(n){if(!_E(n))return null;const t=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}class VM{constructor(t,e,i,r,s=!1){this._element=t,this._checker=e,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){const e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){const i=this._getFirstTabbableElement(e);return i?.focus(t),!!i}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){const e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){const e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let i=0;i<e.length;i++){const r=e[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[i]):null;if(r)return r}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let i=e.length-1;i>=0;i--){const r=e[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[i]):null;if(r)return r}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe(ni(1)).subscribe(t)}}let BM=(()=>{class n{constructor(e,i,r){this._checker=e,this._ngZone=i,this._document=r}create(e,i=!1){return new VM(e,this._checker,this._ngZone,this._document,i)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(xM),l.LFG(l.R0b),l.LFG(ae))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),vE=(()=>{class n{constructor(e,i,r){this._elementRef=e,this._focusTrapFactory=i,this._previouslyFocusedElement=null,this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0)}get enabled(){return this.focusTrap.enabled}set enabled(e){this.focusTrap.enabled=gn(e)}get autoCapture(){return this._autoCapture}set autoCapture(e){this._autoCapture=gn(e)}ngOnDestroy(){this.focusTrap.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap.hasAttached()||this.focusTrap.attachAnchors()}ngOnChanges(e){const i=e.autoCapture;i&&!i.firstChange&&this.autoCapture&&this.focusTrap.hasAttached()&&this._captureFocus()}_captureFocus(){this._previouslyFocusedElement=Fa(),this.focusTrap.focusInitialElementWhenReady()}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(BM),l.Y36(ae))},n.\u0275dir=l.lG2({type:n,selectors:[["","cdkTrapFocus",""]],inputs:{enabled:["cdkTrapFocus","enabled"],autoCapture:["cdkTrapFocusAutoCapture","autoCapture"]},exportAs:["cdkTrapFocus"],features:[l.TTD]}),n})();function Pf(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function or(n){const t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}const Nf=new l.OlP("cdk-input-modality-detector-options"),Uy={ignoreKeys:[18,17,224,91,16]},Jd=Gr({passive:!0,capture:!0});let CE=(()=>{class n{constructor(e,i,r,s){this._platform=e,this._mostRecentTarget=null,this._modality=new Ai(null),this._lastTouchMs=0,this._onKeydown=c=>{this._options?.ignoreKeys?.some(d=>d===c.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Li(c))},this._onMousedown=c=>{Date.now()-this._lastTouchMs<650||(this._modality.next(Pf(c)?"keyboard":"mouse"),this._mostRecentTarget=Li(c))},this._onTouchstart=c=>{or(c)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Li(c))},this._options={...Uy,...s},this.modalityDetected=this._modality.pipe(mM(1)),this.modalityChanged=this.modalityDetected.pipe(Zd()),e.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Jd),r.addEventListener("mousedown",this._onMousedown,Jd),r.addEventListener("touchstart",this._onTouchstart,Jd)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Jd),document.removeEventListener("mousedown",this._onMousedown,Jd),document.removeEventListener("touchstart",this._onTouchstart,Jd))}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ti),l.LFG(l.R0b),l.LFG(ae),l.LFG(Nf,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const HM=new l.OlP("liveAnnouncerElement",{providedIn:"root",factory:function EE(){return null}}),jM=new l.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let $m=(()=>{class n{constructor(e,i,r,s){this._ngZone=i,this._defaultOptions=s,this._document=r,this._liveElement=e||this._createLiveElement()}announce(e,...i){const r=this._defaultOptions;let s,c;return 1===i.length&&"number"==typeof i[0]?c=i[0]:[s,c]=i,this.clear(),clearTimeout(this._previousTimeout),s||(s=r&&r.politeness?r.politeness:"polite"),null==c&&r&&(c=r.duration),this._liveElement.setAttribute("aria-live",s),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(d=>this._currentResolve=d)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,"number"==typeof c&&(this._previousTimeout=setTimeout(()=>this.clear(),c)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const e="cdk-live-announcer-element",i=this._document.getElementsByClassName(e),r=this._document.createElement("div");for(let s=0;s<i.length;s++)i[s].remove();return r.classList.add(e),r.classList.add("cdk-visually-hidden"),r.setAttribute("aria-atomic","true"),r.setAttribute("aria-live","polite"),this._document.body.appendChild(r),r}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(HM,8),l.LFG(l.R0b),l.LFG(ae),l.LFG(jM,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const $M=new l.OlP("cdk-focus-monitor-default-options"),Gm=Gr({passive:!0,capture:!0});let Ff=(()=>{class n{constructor(e,i,r,s,c){this._ngZone=e,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new St.x,this._rootNodeFocusAndBlurListener=d=>{for(let _=Li(d);_;_=_.parentElement)"focus"===d.type?this._onFocus(d,_):this._onBlur(d,_)},this._document=s,this._detectionMode=c?.detectionMode||0}monitor(e,i=!1){const r=qr(e);if(!this._platform.isBrowser||1!==r.nodeType)return et(null);const s=function _r(n){if(function Gd(){if(null==Rl){const n=typeof document<"u"?document.head:null;Rl=!(!n||!n.createShadowRoot&&!n.attachShadow)}return Rl}()){const t=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}(r)||this._getDocument(),c=this._elementInfo.get(r);if(c)return i&&(c.checkChildren=!0),c.subject;const d={checkChildren:i,subject:new St.x,rootNode:s};return this._elementInfo.set(r,d),this._registerGlobalListeners(d),d.subject}stopMonitoring(e){const i=qr(e),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(e,i,r){const s=qr(e);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([d,p])=>this._originChanged(d,i,p)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((e,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,i){e.classList.toggle("cdk-focused",!!i),e.classList.toggle("cdk-touch-focused","touch"===i),e.classList.toggle("cdk-keyboard-focused","keyboard"===i),e.classList.toggle("cdk-mouse-focused","mouse"===i),e.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(e,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,i){const r=this._elementInfo.get(i),s=Li(e);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(e,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&e.relatedTarget instanceof Node&&i.contains(e.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(e,i){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(i))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const i=e.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,Gm),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,Gm)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(sr(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(e){const i=e.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Gm),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Gm),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,i,r){this._setClasses(e,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(e){const i=[];return this._elementInfo.forEach((r,s)=>{(s===e||r.checkChildren&&s.contains(e))&&i.push([s,r])}),i}_isLastInteractionFromInputLabel(e){const{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!i||i===e||"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName||e.disabled)return!1;const s=e.labels;if(s)for(let c=0;c<s.length;c++)if(s[c].contains(i))return!0;return!1}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(l.R0b),l.LFG(ti),l.LFG(CE),l.LFG(ae,8),l.LFG($M,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),GM=(()=>{class n{constructor(e,i){this._elementRef=e,this._focusMonitor=i,this._focusOrigin=null,this.cdkFocusChange=new l.vpe}get focusOrigin(){return this._focusOrigin}ngAfterViewInit(){const e=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(e,1===e.nodeType&&e.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(i=>{this._focusOrigin=i,this.cdkFocusChange.emit(i)})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(Ff))},n.\u0275dir=l.lG2({type:n,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"},exportAs:["cdkMonitorFocus"]}),n})();const xu="cdk-high-contrast-black-on-white",$a="cdk-high-contrast-white-on-black",Hy="cdk-high-contrast-active";let DE=(()=>{class n{constructor(e,i){this._platform=e,this._document=i,this._breakpointSubscription=(0,l.f3M)(Ny).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(e):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(Hy,xu,$a),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?e.add(Hy,xu):2===i&&e.add(Hy,$a)}}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ti),l.LFG(ae))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),QL=(()=>{class n{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(DE))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Fc]}),n})();const XL=new l.OlP("cdk-dir-doc",{providedIn:"root",factory:function IE(){return(0,l.f3M)(ae)}}),JL=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Bo=(()=>{class n{constructor(e){if(this.value="ltr",this.change=new l.vpe,e){const r=e.documentElement?e.documentElement.dir:null;this.value=function Ga(n){const t=n?.toLowerCase()||"";return"auto"===t&&typeof navigator<"u"&&navigator?.language?JL.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((e.body?e.body.dir:null)||r||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(XL,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Lf=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();function zM(n,t){if(1&n&&l._UZ(0,"mat-pseudo-checkbox",4),2&n){const e=l.oxw();l.Q6J("state",e.selected?"checked":"unchecked")("disabled",e.disabled)}}function qM(n,t){if(1&n&&(l.TgZ(0,"span",5),l._uU(1),l.qZA()),2&n){const e=l.oxw();l.xp6(1),l.hij("(",e.group.label,")")}}const $y=["*"],Gy=new l.OlP("mat-sanity-checks",{providedIn:"root",factory:function eh(){return!0}});let fi=(()=>{class n{constructor(e,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!Ol()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(DE),l.LFG(Gy,8),l.LFG(ae))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Lf,Lf]}),n})();function Wm(n){return class extends n{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=gn(t)}}}function th(n,t){return class extends n{constructor(...e){super(...e),this.defaultColor=t,this.color=t}get color(){return this._color}set color(e){const i=e||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}}}function Ym(n){return class extends n{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=gn(t)}}}function AE(n,t=0){return class extends n{constructor(...e){super(...e),this._tabIndex=t,this.defaultTabIndex=t}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(e){this._tabIndex=null!=e?Kd(e):this.defaultTabIndex}}}function ME(n){return class extends n{constructor(...t){super(...t),this.errorState=!1}updateErrorState(){const t=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==t&&(this.errorState=s,this.stateChanges.next())}}}const Zm=new l.OlP("MAT_DATE_LOCALE",{providedIn:"root",factory:function kE(){return(0,l.f3M)(l.soG)}});class Ki{constructor(){this._localeChanges=new St.x,this.localeChanges=this._localeChanges}getValidDateOrNull(t){return this.isDateInstance(t)&&this.isValid(t)?t:null}deserialize(t){return null==t||this.isDateInstance(t)&&this.isValid(t)?t:this.invalid()}setLocale(t){this.locale=t,this._localeChanges.next()}compareDate(t,e){return this.getYear(t)-this.getYear(e)||this.getMonth(t)-this.getMonth(e)||this.getDate(t)-this.getDate(e)}sameDate(t,e){if(t&&e){let i=this.isValid(t),r=this.isValid(e);return i&&r?!this.compareDate(t,e):i==r}return t==e}clampDate(t,e,i){return e&&this.compareDate(t,e)<0?e:i&&this.compareDate(t,i)>0?i:t}}const Ru=new l.OlP("mat-date-formats"),ZM=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function Km(n,t){const e=Array(n);for(let i=0;i<n;i++)e[i]=t(i);return e}let xE=(()=>{class n extends Ki{constructor(e,i){super(),this.useUtcForDisplay=!1,super.setLocale(e)}getYear(e){return e.getFullYear()}getMonth(e){return e.getMonth()}getDate(e){return e.getDate()}getDayOfWeek(e){return e.getDay()}getMonthNames(e){const i=new Intl.DateTimeFormat(this.locale,{month:e,timeZone:"utc"});return Km(12,r=>this._format(i,new Date(2017,r,1)))}getDateNames(){const e=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return Km(31,i=>this._format(e,new Date(2017,0,i+1)))}getDayOfWeekNames(e){const i=new Intl.DateTimeFormat(this.locale,{weekday:e,timeZone:"utc"});return Km(7,r=>this._format(i,new Date(2017,0,r+1)))}getYearName(e){const i=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(i,e)}getFirstDayOfWeek(){return 0}getNumDaysInMonth(e){return this.getDate(this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+1,0))}clone(e){return new Date(e.getTime())}createDate(e,i,r){let s=this._createDateWithOverflow(e,i,r);return s.getMonth(),s}today(){return new Date}parse(e,i){return"number"==typeof e?new Date(e):e?new Date(Date.parse(e)):null}format(e,i){if(!this.isValid(e))throw Error("NativeDateAdapter: Cannot format invalid date.");const r=new Intl.DateTimeFormat(this.locale,{...i,timeZone:"utc"});return this._format(r,e)}addCalendarYears(e,i){return this.addCalendarMonths(e,12*i)}addCalendarMonths(e,i){let r=this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+i,this.getDate(e));return this.getMonth(r)!=((this.getMonth(e)+i)%12+12)%12&&(r=this._createDateWithOverflow(this.getYear(r),this.getMonth(r),0)),r}addCalendarDays(e,i){return this._createDateWithOverflow(this.getYear(e),this.getMonth(e),this.getDate(e)+i)}toIso8601(e){return[e.getUTCFullYear(),this._2digit(e.getUTCMonth()+1),this._2digit(e.getUTCDate())].join("-")}deserialize(e){if("string"==typeof e){if(!e)return null;if(ZM.test(e)){let i=new Date(e);if(this.isValid(i))return i}}return super.deserialize(e)}isDateInstance(e){return e instanceof Date}isValid(e){return!isNaN(e.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(e,i,r){const s=new Date;return s.setFullYear(e,i,r),s.setHours(0,0,0,0),s}_2digit(e){return("00"+e).slice(-2)}_format(e,i){const r=new Date;return r.setUTCFullYear(i.getFullYear(),i.getMonth(),i.getDate()),r.setUTCHours(i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()),e.format(r)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Zm,8),l.LFG(ti))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const Ou={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};let RE=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[{provide:Ki,useClass:xE}]}),n})(),OE=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[{provide:Ru,useValue:Ou}],imports:[RE]}),n})(),PE=(()=>{class n{isErrorState(e,i){return!!(e&&e.invalid&&(e.touched||i&&i.submitted))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class NE{constructor(t,e,i,r=!1){this._renderer=t,this.element=e,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const Qm={enterDuration:225,exitDuration:150},ih=Gr({passive:!0}),Vf=["mousedown","touchstart"],qy=["mouseup","mouseleave","touchend","touchcancel"];class Wy{constructor(t,e,i,r){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=qr(i))}fadeInRipple(t,e,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...Qm,...i.animation};i.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);const c=i.radius||function LE(n,t,e){const i=Math.max(Math.abs(n-e.left),Math.abs(n-e.right)),r=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(i*i+r*r)}(t,e,r),d=t-r.left,p=e-r.top,_=s.enterDuration,w=document.createElement("div");w.classList.add("mat-ripple-element"),w.style.left=d-c+"px",w.style.top=p-c+"px",w.style.height=2*c+"px",w.style.width=2*c+"px",null!=i.color&&(w.style.backgroundColor=i.color),w.style.transitionDuration=`${_}ms`,this._containerElement.appendChild(w);const I=window.getComputedStyle(w),O=I.transitionDuration,N="none"===I.transitionProperty||"0s"===O||"0s, 0s"===O,z=new NE(this,w,i,N);w.style.transform="scale3d(1, 1, 1)",z.state=0,i.persistent||(this._mostRecentTransientRipple=z);let ie=null;return!N&&(_||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const Me=()=>this._finishRippleTransition(z),ze=()=>this._destroyRipple(z);w.addEventListener("transitionend",Me),w.addEventListener("transitioncancel",ze),ie={onTransitionEnd:Me,onTransitionCancel:ze}}),this._activeRipples.set(z,ie),(N||!_)&&this._finishRippleTransition(z),z}fadeOutRipple(t){if(2===t.state||3===t.state)return;const e=t.element,i={...Qm,...t.config.animation};e.style.transitionDuration=`${i.exitDuration}ms`,e.style.opacity="0",t.state=2,(t._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=qr(t);!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(Vf))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(qy),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){0===t.state?this._startFadeOutTransition(t):2===t.state&&this._destroyRipple(t)}_startFadeOutTransition(t){const e=t===this._mostRecentTransientRipple,{persistent:i}=t.config;t.state=1,!i&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){const e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=3,null!==e&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel)),t.element.remove()}_onMousedown(t){const e=Pf(t),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!i&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!or(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let i=0;i<e.length;i++)this.fadeInRipple(e[i].clientX,e[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(e=>{this._triggerElement.addEventListener(e,this,ih)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&(Vf.forEach(t=>{this._triggerElement.removeEventListener(t,this,ih)}),this._pointerUpEventsRegistered&&qy.forEach(t=>{this._triggerElement.removeEventListener(t,this,ih)}))}}const Yy=new l.OlP("mat-ripple-global-options");let za=(()=>{class n{constructor(e,i,r,s,c){this._elementRef=e,this._animationMode=c,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new Wy(this,i,e,r)}get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,i=0,r){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,i,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...e})}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.R0b),l.Y36(ti),l.Y36(Yy,8),l.Y36(l.QbO,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,i){2&e&&l.ekj("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),Xm=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[fi,fi]}),n})(),VE=(()=>{class n{constructor(e){this._animationMode=e,this.state="unchecked",this.disabled=!1}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.QbO,8))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(e,i){2&e&&l.ekj("mat-pseudo-checkbox-indeterminate","indeterminate"===i.state)("mat-pseudo-checkbox-checked","checked"===i.state)("mat-pseudo-checkbox-disabled",i.disabled)("_mat-animation-noopable","NoopAnimations"===i._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(e,i){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}'],encapsulation:2,changeDetection:0}),n})(),QM=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[fi]}),n})();const BE=new l.OlP("MAT_OPTION_PARENT_COMPONENT"),ek=new l.OlP("MatOptgroup");let nk=0;class HE{constructor(t,e=!1){this.source=t,this.isUserInput=e}}let ik=(()=>{class n{constructor(e,i,r,s){this._element=e,this._changeDetectorRef=i,this._parent=r,this.group=s,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+nk++,this.onSelectionChange=new l.vpe,this._stateChanges=new St.x}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(e){this._disabled=gn(e)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(e,i){const r=this._getHostElement();"function"==typeof r.focus&&r.focus(i)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){(13===e.keyCode||32===e.keyCode)&&!Pc(e)&&(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue=e,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new HE(this,e))}}return n.\u0275fac=function(e){l.$Z()},n.\u0275dir=l.lG2({type:n,inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),n})(),jE=(()=>{class n extends ik{constructor(e,i,r,s){super(e,i,r,s)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.sBO),l.Y36(BE,8),l.Y36(ek,8))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(e,i){1&e&&l.NdJ("click",function(){return i._selectViaInteraction()})("keydown",function(s){return i._handleKeydown(s)}),2&e&&(l.Ikx("id",i.id),l.uIk("tabindex",i._getTabIndex())("aria-selected",i._getAriaSelected())("aria-disabled",i.disabled.toString()),l.ekj("mat-selected",i.selected)("mat-option-multiple",i.multiple)("mat-active",i.active)("mat-option-disabled",i.disabled))},exportAs:["matOption"],features:[l.qOj],ngContentSelectors:$y,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(e,i){1&e&&(l.F$t(),l.YNc(0,zM,1,2,"mat-pseudo-checkbox",0),l.TgZ(1,"span",1),l.Hsn(2),l.qZA(),l.YNc(3,qM,2,1,"span",2),l._UZ(4,"div",3)),2&e&&(l.Q6J("ngIf",i.multiple),l.xp6(3),l.Q6J("ngIf",i.group&&i.group._inert),l.xp6(1),l.Q6J("matRippleTrigger",i._getHostElement())("matRippleDisabled",i.disabled||i.disableRipple))},dependencies:[za,bn,VE],styles:['.mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.mat-option.mat-active::before{content:""}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.cdk-high-contrast-active .mat-option.mat-selected:not(.mat-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-option.mat-selected:not(.mat-option-multiple)::after{right:auto;left:16px}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}'],encapsulation:2,changeDetection:0}),n})();function ao(n,t,e){if(e.length){let i=t.toArray(),r=e.toArray(),s=0;for(let c=0;c<n+1;c++)i[c].group&&i[c].group===r[s]&&s++;return s}return 0}let Zy=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Xm,ma,fi,QM]}),n})();const sk=["*",[["mat-toolbar-row"]]],ok=["*","mat-toolbar-row"],ak=th(class{constructor(n){this._elementRef=n}});let lk=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=l.lG2({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),$E=(()=>{class n extends ak{constructor(e,i,r){super(e),this._platform=i,this._document=r}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(ti),l.Y36(ae))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-toolbar"]],contentQueries:function(e,i,r){if(1&e&&l.Suo(r,lk,5),2&e){let s;l.iGM(s=l.CRH())&&(i._toolbarRows=s)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(e,i){2&e&&l.ekj("mat-toolbar-multiple-rows",i._toolbarRows.length>0)("mat-toolbar-single-row",0===i._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[l.qOj],ngContentSelectors:ok,decls:2,vars:0,template:function(e,i){1&e&&(l.F$t(sk),l.Hsn(0),l.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),n})(),ck=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[fi,fi]}),n})();const uk=["mat-button",""],jt=["*"],zE=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],hk=th(Wm(Ym(class{constructor(n){this._elementRef=n}})));let lo=(()=>{class n extends hk{constructor(e,i,r){super(e),this._focusMonitor=i,this._animationMode=r,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of zE)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);e.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e,i){e?this._focusMonitor.focusVia(this._getHostElement(),e,i):this._getHostElement().focus(i)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...e){return e.some(i=>this._getHostElement().hasAttribute(i))}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(Ff),l.Y36(l.QbO,8))},n.\u0275cmp=l.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(e,i){if(1&e&&l.Gf(za,5),2&e){let r;l.iGM(r=l.CRH())&&(i.ripple=r.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(e,i){2&e&&(l.uIk("disabled",i.disabled||null),l.ekj("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-button-disabled",i.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[l.qOj],attrs:uk,ngContentSelectors:jt,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(e,i){1&e&&(l.F$t(),l.TgZ(0,"span",0),l.Hsn(1),l.qZA(),l._UZ(2,"span",1)(3,"span",2)),2&e&&(l.xp6(2),l.ekj("mat-button-ripple-round",i.isRoundButton||i.isIconButton),l.Q6J("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",i.isIconButton)("matRippleTrigger",i._getHostElement()))},dependencies:[za],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}.mat-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.mat-flat-button::before,.mat-raised-button::before,.mat-fab::before,.mat-mini-fab::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-stroked-button::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px) * -1)}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}"],encapsulation:2,changeDetection:0}),n})(),Ky=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Xm,fi,fi]}),n})();class Qy{}const Gl="*";function Pu(n,t){return{type:7,name:n,definitions:t,options:{}}}function Os(n,t=null){return{type:4,styles:t,timings:n}}function Lc(n,t=null){return{type:2,steps:n,options:t}}function pi(n){return{type:6,styles:n,offset:null}}function co(n,t,e){return{type:0,name:n,styles:t,options:e}}function Jm(n){return{type:5,steps:n}}function Ps(n,t,e=null){return{type:1,expr:n,animation:t,options:e}}function oV(n=null){return{type:9,options:n}}function gk(n,t,e=null){return{type:11,selector:n,animation:t,options:e}}function yk(n){Promise.resolve(null).then(n)}class Bf{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){yk(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class Nu{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,i=0,r=0;const s=this.players.length;0==s?yk(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++e==s&&this._onFinish()}),c.onDestroy(()=>{++i==s&&this._onDestroy()}),c.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((c,d)=>Math.max(c,d.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(r)})}getPosition(){const t=this.players.reduce((e,i)=>null===e||i.totalTime>e.totalTime?i:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}function Uf(n){return new l.vHH(3e3,!1)}function dV(){return typeof window<"u"&&typeof window.document<"u"}function ov(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Vc(n){switch(n.length){case 0:return new Bf;case 1:return n[0];default:return new Nu(n)}}function tD(n,t,e,i,r=new Map,s=new Map){const c=[],d=[];let p=-1,_=null;if(i.forEach(w=>{const I=w.get("offset"),M=I==p,O=M&&_||new Map;w.forEach((N,z)=>{let ie=z,Me=N;if("offset"!==z)switch(ie=t.normalizePropertyName(ie,c),Me){case"!":Me=r.get(z);break;case Gl:Me=s.get(z);break;default:Me=t.normalizeStyleValue(z,ie,Me,c)}O.set(ie,Me)}),M||d.push(O),_=O,p=I}),c.length)throw function tv(n){return new l.vHH(3502,!1)}();return d}function av(n,t,e,i){switch(t){case"start":n.onStart(()=>i(e&&ig(e,"start",n)));break;case"done":n.onDone(()=>i(e&&ig(e,"done",n)));break;case"destroy":n.onDestroy(()=>i(e&&ig(e,"destroy",n)))}}function ig(n,t,e){const s=nD(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,e.totalTime??n.totalTime,!!e.disabled),c=n._data;return null!=c&&(s._data=c),s}function nD(n,t,e,i,r="",s=0,c){return{element:n,triggerName:t,fromState:e,toState:i,phaseName:r,totalTime:s,disabled:!!c}}function Ns(n,t,e){let i=n.get(t);return i||n.set(t,i=e),i}function kk(n){const t=n.indexOf(":");return[n.substring(1,t),n.slice(t+1)]}let rg=(n,t)=>!1,lv=(n,t,e)=>[],iD=null;function Hf(n){const t=n.parentNode||n.host;return t===iD?null:t}(ov()||typeof Element<"u")&&(dV()?(iD=(()=>document.documentElement)(),rg=(n,t)=>{for(;t;){if(t===n)return!0;t=Hf(t)}return!1}):rg=(n,t)=>n.contains(t),lv=(n,t,e)=>{if(e)return Array.from(n.querySelectorAll(t));const i=n.querySelector(t);return i?[i]:[]});let sh=null,xk=!1;const Rk=rg,Ok=lv;let ql=(()=>{class n{validateStyleProperty(e){return function fV(n){sh||(sh=function pV(){return typeof document<"u"?document.body:null}()||{},xk=!!sh.style&&"WebkitAppearance"in sh.style);let t=!0;return sh.style&&!function hV(n){return"ebkit"==n.substring(1,6)}(n)&&(t=n in sh.style,!t&&xk&&(t="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in sh.style)),t}(e)}matchesElement(e,i){return!1}containsElement(e,i){return Rk(e,i)}getParentElement(e){return Hf(e)}query(e,i,r){return Ok(e,i,r)}computeStyle(e,i,r){return r||""}animate(e,i,r,s,c,d=[],p){return new Bf(r,s)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),jf=(()=>{class n{}return n.NOOP=new ql,n})();const sg="ng-enter",oh="ng-leave",og="ng-trigger",Ho=".ng-trigger",dv="ng-animating",hv=".ng-animating";function Bc(n){if("number"==typeof n)return n;const t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:ag(parseFloat(t[1]),t[2])}function ag(n,t){return"s"===t?1e3*n:n}function lg(n,t,e){return n.hasOwnProperty("duration")?n:function Nk(n,t,e){let r,s=0,c="";if("string"==typeof n){const d=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===d)return t.push(Uf()),{duration:0,delay:0,easing:""};r=ag(parseFloat(d[1]),d[2]);const p=d[3];null!=p&&(s=ag(parseFloat(p),d[4]));const _=d[5];_&&(c=_)}else r=n;if(!e){let d=!1,p=t.length;r<0&&(t.push(function bk(){return new l.vHH(3100,!1)}()),d=!0),s<0&&(t.push(function qE(){return new l.vHH(3101,!1)}()),d=!0),d&&t.splice(p,0,Uf())}return{duration:r,delay:s,easing:c}}(n,t,e)}function Uc(n,t={}){return Object.keys(n).forEach(e=>{t[e]=n[e]}),t}function Fu(n){const t=new Map;return Object.keys(n).forEach(e=>{t.set(e,n[e])}),t}function jo(n,t=new Map,e){if(e)for(let[i,r]of e)t.set(i,r);for(let[i,r]of n)t.set(i,r);return t}function ah(n,t,e){return e?t+":"+e+";":""}function rD(n){let t="";for(let e=0;e<n.style.length;e++){const i=n.style.item(e);t+=ah(0,i,n.style.getPropertyValue(i))}for(const e in n.style)n.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=ah(0,Lk(e),n.style[e]));n.setAttribute("style",t)}function $o(n,t,e){n.style&&(t.forEach((i,r)=>{const s=hg(r);e&&!e.has(r)&&e.set(r,n.style[s]),n.style[s]=i}),ov()&&rD(n))}function Hc(n,t){n.style&&(t.forEach((e,i)=>{const r=hg(i);n.style[r]=""}),ov()&&rD(n))}function Vu(n){return Array.isArray(n)?1==n.length?n[0]:Lc(n):n}const cg=new RegExp("{{\\s*(.+?)\\s*}}","g");function ug(n){let t=[];if("string"==typeof n){let e;for(;e=cg.exec(n);)t.push(e[1]);cg.lastIndex=0}return t}function dg(n,t,e){const i=n.toString(),r=i.replace(cg,(s,c)=>{let d=t[c];return null==d&&(e.push(function Ck(n){return new l.vHH(3003,!1)}()),d=""),d.toString()});return r==i?n:r}function mv(n){const t=[];let e=n.next();for(;!e.done;)t.push(e.value),e=n.next();return t}const Fk=/-+([a-z0-9])/g;function hg(n){return n.replace(Fk,(...t)=>t[1].toUpperCase())}function Lk(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Fs(n,t,e){switch(t.type){case 7:return n.visitTrigger(t,e);case 0:return n.visitState(t,e);case 1:return n.visitTransition(t,e);case 2:return n.visitSequence(t,e);case 3:return n.visitGroup(t,e);case 4:return n.visitAnimate(t,e);case 5:return n.visitKeyframes(t,e);case 6:return n.visitStyle(t,e);case 8:return n.visitReference(t,e);case 9:return n.visitAnimateChild(t,e);case 10:return n.visitAnimateRef(t,e);case 11:return n.visitQuery(t,e);case 12:return n.visitStagger(t,e);default:throw function Ek(n){return new l.vHH(3004,!1)}()}}function hs(n,t){return window.getComputedStyle(n)[t]}function Uk(n,t){const e=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function aD(n,t,e){if(":"==n[0]){const p=function Hk(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return t.push(function eg(n){return new l.vHH(3016,!1)}()),"* => *"}}(n,e);if("function"==typeof p)return void t.push(p);n=p}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return e.push(function KE(n){return new l.vHH(3015,!1)}()),t;const r=i[1],s=i[2],c=i[3];t.push(lD(r,c));"<"==s[0]&&!("*"==r&&"*"==c)&&t.push(lD(c,r))}(i,e,t)):e.push(n),e}const Gf=new Set(["true","1"]),mg=new Set(["false","0"]);function lD(n,t){const e=Gf.has(n)||mg.has(n),i=Gf.has(t)||mg.has(t);return(r,s)=>{let c="*"==n||n==r,d="*"==t||t==s;return!c&&e&&"boolean"==typeof r&&(c=r?Gf.has(n):mg.has(n)),!d&&i&&"boolean"==typeof s&&(d=s?Gf.has(t):mg.has(t)),c&&d}}const cD=new RegExp("s*:selfs*,?","g");function yv(n,t,e,i){return new vv(n).build(t,e,i)}class vv{constructor(t){this._driver=t}build(t,e,i){const r=new _V(e);return this._resetContextStyleTimingState(r),Fs(this,Vu(t),r)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,e){let i=e.queryCount=0,r=e.depCount=0;const s=[],c=[];return"@"==t.name.charAt(0)&&e.errors.push(function Ik(){return new l.vHH(3006,!1)}()),t.definitions.forEach(d=>{if(this._resetContextStyleTimingState(e),0==d.type){const p=d,_=p.name;_.toString().split(/\s*,\s*/).forEach(w=>{p.name=w,s.push(this.visitState(p,e))}),p.name=_}else if(1==d.type){const p=this.visitTransition(d,e);i+=p.queryCount,r+=p.depCount,c.push(p)}else e.errors.push(function WE(){return new l.vHH(3007,!1)}())}),{type:7,name:t.name,states:s,transitions:c,queryCount:i,depCount:r,options:null}}visitState(t,e){const i=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(i.containsDynamicStyles){const s=new Set,c=r||{};i.styles.forEach(d=>{d instanceof Map&&d.forEach(p=>{ug(p).forEach(_=>{c.hasOwnProperty(_)||s.add(_)})})}),s.size&&(mv(s.values()),e.errors.push(function Sk(n,t){return new l.vHH(3008,!1)}()))}return{type:0,name:t.name,style:i,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const i=Fs(this,Vu(t.animation),e);return{type:1,matchers:Uk(t.expr,e.errors),animation:i,queryCount:e.queryCount,depCount:e.depCount,options:Bu(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(i=>Fs(this,i,e)),options:Bu(t.options)}}visitGroup(t,e){const i=e.currentTime;let r=0;const s=t.steps.map(c=>{e.currentTime=i;const d=Fs(this,c,e);return r=Math.max(r,e.currentTime),d});return e.currentTime=r,{type:3,steps:s,options:Bu(t.options)}}visitAnimate(t,e){const i=function Gk(n,t){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return bv(lg(n,t).duration,0,"");const e=n;if(e.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=bv(0,0,"");return s.dynamic=!0,s.strValue=e,s}const r=lg(e,t);return bv(r.duration,r.delay,r.easing)}(t.timings,e.errors);e.currentAnimateTimings=i;let r,s=t.styles?t.styles:pi({});if(5==s.type)r=this.visitKeyframes(s,e);else{let c=t.styles,d=!1;if(!c){d=!0;const _={};i.easing&&(_.easing=i.easing),c=pi(_)}e.currentTime+=i.duration+i.delay;const p=this.visitStyle(c,e);p.isEmptyStep=d,r=p}return e.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(t,e){const i=this._makeStyleAst(t,e);return this._validateStyleAst(i,e),i}_makeStyleAst(t,e){const i=[],r=Array.isArray(t.styles)?t.styles:[t.styles];for(let d of r)"string"==typeof d?d===Gl?i.push(d):e.errors.push(new l.vHH(3002,!1)):i.push(Fu(d));let s=!1,c=null;return i.forEach(d=>{if(d instanceof Map&&(d.has("easing")&&(c=d.get("easing"),d.delete("easing")),!s))for(let p of d.values())if(p.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:i,easing:c,offset:t.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(t,e){const i=e.currentAnimateTimings;let r=e.currentTime,s=e.currentTime;i&&s>0&&(s-=i.duration+i.delay),t.styles.forEach(c=>{"string"!=typeof c&&c.forEach((d,p)=>{const _=e.collectedStyles.get(e.currentQuerySelector),w=_.get(p);let I=!0;w&&(s!=r&&s>=w.startTime&&r<=w.endTime&&(e.errors.push(function Jy(n,t,e,i,r){return new l.vHH(3010,!1)}()),I=!1),s=w.startTime),I&&_.set(p,{startTime:s,endTime:r}),e.options&&function pv(n,t,e){const i=t.params||{},r=ug(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||e.push(function wk(n){return new l.vHH(3001,!1)}())})}(d,e.options,e.errors)})})}visitKeyframes(t,e){const i={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function aV(){return new l.vHH(3011,!1)}()),i;let s=0;const c=[];let d=!1,p=!1,_=0;const w=t.steps.map(Me=>{const ze=this._makeStyleAst(Me,e);let Xe=null!=ze.offset?ze.offset:function uD(n){if("string"==typeof n)return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(e instanceof Map&&e.has("offset")){const i=e;t=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const e=n;t=parseFloat(e.get("offset")),e.delete("offset")}return t}(ze.styles),Qe=0;return null!=Xe&&(s++,Qe=ze.offset=Xe),p=p||Qe<0||Qe>1,d=d||Qe<_,_=Qe,c.push(Qe),ze});p&&e.errors.push(function ev(){return new l.vHH(3012,!1)}()),d&&e.errors.push(function Ak(){return new l.vHH(3200,!1)}());const I=t.steps.length;let M=0;s>0&&s<I?e.errors.push(function lV(){return new l.vHH(3202,!1)}()):0==s&&(M=1/(I-1));const O=I-1,N=e.currentTime,z=e.currentAnimateTimings,ie=z.duration;return w.forEach((Me,ze)=>{const Xe=M>0?ze==O?1:M*ze:c[ze],Qe=Xe*ie;e.currentTime=N+z.delay+Qe,z.duration=Qe,this._validateStyleAst(Me,e),Me.offset=Xe,i.styles.push(Me)}),i}visitReference(t,e){return{type:8,animation:Fs(this,Vu(t.animation),e),options:Bu(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Bu(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Bu(t.options)}}visitQuery(t,e){const i=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[s,c]=function jk(n){const t=!!n.split(/\s*,\s*/).find(e=>":self"==e);return t&&(n=n.replace(cD,"")),n=n.replace(/@\*/g,Ho).replace(/@\w+/g,e=>Ho+"-"+e.slice(1)).replace(/:animating/g,hv),[n,t]}(t.selector);e.currentQuerySelector=i.length?i+" "+s:s,Ns(e.collectedStyles,e.currentQuerySelector,new Map);const d=Fs(this,Vu(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:c,animation:d,originalSelector:t.selector,options:Bu(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function rh(){return new l.vHH(3013,!1)}());const i="full"===t.timings?{duration:0,delay:0,easing:"full"}:lg(t.timings,e.errors,!0);return{type:12,animation:Fs(this,Vu(t.animation),e),timings:i,options:null}}}class _V{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Bu(n){return n?(n=Uc(n)).params&&(n.params=function $k(n){return n?Uc(n):null}(n.params)):n={},n}function bv(n,t,e){return{duration:n,delay:t,easing:e}}function zf(n,t,e,i,r,s,c=null,d=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:c,subTimeline:d}}class gg{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let i=this._map.get(t);i||this._map.set(t,i=[]),i.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const wv=new RegExp(":enter","g"),Cv=new RegExp(":leave","g");function yg(n,t,e,i,r,s=new Map,c=new Map,d,p,_=[]){return(new yV).buildKeyframes(n,t,e,i,r,s,c,d,p,_)}class yV{buildKeyframes(t,e,i,r,s,c,d,p,_,w=[]){_=_||new gg;const I=new qf(t,e,_,r,s,w,[]);I.options=p;const M=p.delay?Bc(p.delay):0;I.currentTimeline.delayNextStep(M),I.currentTimeline.setStyles([c],null,I.errors,p),Fs(this,i,I);const O=I.timelines.filter(N=>N.containsAnimation());if(O.length&&d.size){let N;for(let z=O.length-1;z>=0;z--){const ie=O[z];if(ie.element===e){N=ie;break}}N&&!N.allowOnlyTimelineStyles()&&N.setStyles([d],null,I.errors,p)}return O.length?O.map(N=>N.buildKeyframes()):[zf(e,[],[],[],0,M,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const i=e.subInstructions.get(e.element);if(i){const r=e.createSubContext(t.options),s=e.currentTimeline.currentTime,c=this._visitSubInstructions(i,r,r.options);s!=c&&e.transformIntoNewTimeline(c)}e.previousNode=t}visitAnimateRef(t,e){const i=e.createSubContext(t.options);i.transformIntoNewTimeline(),this.visitReference(t.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,i){let s=e.currentTimeline.currentTime;const c=null!=i.duration?Bc(i.duration):null,d=null!=i.delay?Bc(i.delay):null;return 0!==c&&t.forEach(p=>{const _=e.appendInstructionToTimeline(p,c,d);s=Math.max(s,_.duration+_.delay)}),s}visitReference(t,e){e.updateOptions(t.options,!0),Fs(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const i=e.subContextCount;let r=e;const s=t.options;if(s&&(s.params||s.delay)&&(r=e.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Ev);const c=Bc(s.delay);r.delayNextStep(c)}t.steps.length&&(t.steps.forEach(c=>Fs(this,c,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const i=[];let r=e.currentTimeline.currentTime;const s=t.options&&t.options.delay?Bc(t.options.delay):0;t.steps.forEach(c=>{const d=e.createSubContext(t.options);s&&d.delayNextStep(s),Fs(this,c,d),r=Math.max(r,d.currentTimeline.currentTime),i.push(d.currentTimeline)}),i.forEach(c=>e.currentTimeline.mergeTimelineCollectedStyles(c)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const i=t.strValue;return lg(e.params?dg(i,e.params,e.errors):i,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const i=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),r.snapshotCurrentStyles());const s=t.style;5==s.type?this.visitKeyframes(s,e):(e.incrementTime(i.duration),this.visitStyle(s,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const i=e.currentTimeline,r=e.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const s=r&&r.easing||t.easing;t.isEmptyStep?i.applyEmptyStep(s):i.setStyles(t.styles,s,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const i=e.currentAnimateTimings,r=e.currentTimeline.duration,s=i.duration,d=e.createSubContext().currentTimeline;d.easing=i.easing,t.styles.forEach(p=>{d.forwardTime((p.offset||0)*s),d.setStyles(p.styles,p.easing,e.errors,e.options),d.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(d),e.transformIntoNewTimeline(r+s),e.previousNode=t}visitQuery(t,e){const i=e.currentTimeline.currentTime,r=t.options||{},s=r.delay?Bc(r.delay):0;s&&(6===e.previousNode.type||0==i&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Ev);let c=i;const d=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=d.length;let p=null;d.forEach((_,w)=>{e.currentQueryIndex=w;const I=e.createSubContext(t.options,_);s&&I.delayNextStep(s),_===e.element&&(p=I.currentTimeline),Fs(this,t.animation,I),I.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,I.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(c),p&&(e.currentTimeline.mergeTimelineCollectedStyles(p),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const i=e.parentContext,r=e.currentTimeline,s=t.timings,c=Math.abs(s.duration),d=c*(e.currentQueryTotal-1);let p=c*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":p=d-p;break;case"full":p=i.currentStaggerTime}const w=e.currentTimeline;p&&w.delayNextStep(p);const I=w.currentTime;Fs(this,t.animation,e),e.previousNode=t,i.currentStaggerTime=r.currentTime-I+(r.startTime-i.currentTimeline.startTime)}}const Ev={};class qf{constructor(t,e,i,r,s,c,d,p){this._driver=t,this.element=e,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=c,this.timelines=d,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Ev,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=p||new Dv(this._driver,e,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const i=t;let r=this.options;null!=i.duration&&(r.duration=Bc(i.duration)),null!=i.delay&&(r.delay=Bc(i.delay));const s=i.params;if(s){let c=r.params;c||(c=this.options.params={}),Object.keys(s).forEach(d=>{(!e||!c.hasOwnProperty(d))&&(c[d]=dg(s[d],c,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const i=t.params={};Object.keys(e).forEach(r=>{i[r]=e[r]})}}return t}createSubContext(t=null,e,i){const r=e||this.element,s=new qf(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=Ev,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,i){const r={duration:e??t.duration,delay:this.currentTimeline.currentTime+(i??0)+t.delay,easing:""},s=new dD(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,i,r,s,c){let d=[];if(r&&d.push(this.element),t.length>0){t=(t=t.replace(wv,"."+this._enterClassName)).replace(Cv,"."+this._leaveClassName);let _=this._driver.query(this.element,t,1!=i);0!==i&&(_=i<0?_.slice(_.length+i,_.length):_.slice(0,i)),d.push(..._)}return!s&&0==d.length&&c.push(function ZE(n){return new l.vHH(3014,!1)}()),d}}class Dv{constructor(t,e,i,r){this._driver=t,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new Dv(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,i]of this._globalTimelineStyles)this._backFill.set(e,i||Gl),this._currentKeyframe.set(e,Gl);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,i,r){e&&this._previousKeyframe.set("easing",e);const s=r&&r.params||{},c=function hD(n,t){const e=new Map;let i;return n.forEach(r=>{if("*"===r){i=i||t.keys();for(let s of i)e.set(s,Gl)}else jo(r,e)}),e}(t,this._globalTimelineStyles);for(let[d,p]of c){const _=dg(p,s,i);this._pendingStyles.set(d,_),this._localTimelineStyles.has(d)||this._backFill.set(d,this._globalTimelineStyles.get(d)??Gl),this._updateStyle(d,_)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,i)=>{const r=this._styleSummary.get(i);(!r||e.time>r.time)&&this._updateStyle(i,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((d,p)=>{const _=jo(d,new Map,this._backFill);_.forEach((w,I)=>{"!"===w?t.add(I):w===Gl&&e.add(I)}),i||_.set("offset",p/this.duration),r.push(_)});const s=t.size?mv(t.values()):[],c=e.size?mv(e.values()):[];if(i){const d=r[0],p=new Map(d);d.set("offset",0),p.set("offset",1),r=[d,p]}return zf(this.element,r,s,c,this.duration,this.startTime,this.easing,!1)}}class dD extends Dv{constructor(t,e,i,r,s,c,d=!1){super(t,e,c.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=d,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const s=[],c=i+e,d=e/c,p=jo(t[0]);p.set("offset",0),s.push(p);const _=jo(t[0]);_.set("offset",Iv(d)),s.push(_);const w=t.length-1;for(let I=1;I<=w;I++){let M=jo(t[I]);const O=M.get("offset");M.set("offset",Iv((e+O*i)/c)),s.push(M)}i=c,e=0,r="",t=s}return zf(this.element,t,this.preStyleProps,this.postStyleProps,i,e,r,!0)}}function Iv(n,t=3){const e=Math.pow(10,t-1);return Math.round(n*e)/e}class Wf{}const vg=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class bg extends Wf{normalizePropertyName(t,e){return hg(t)}normalizeStyleValue(t,e,i,r){let s="";const c=i.toString().trim();if(vg.has(e)&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const d=i.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&0==d[1].length&&r.push(function Dk(n,t){return new l.vHH(3005,!1)}())}return c+s}}function lh(n,t,e,i,r,s,c,d,p,_,w,I,M){return{type:0,element:n,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:s,toState:i,toStyles:c,timelines:d,queriedElements:p,preStyleProps:_,postStyleProps:w,totalTime:I,errors:M}}const Sv={};class wg{constructor(t,e,i){this._triggerName=t,this.ast=e,this._stateStyles=i}match(t,e,i,r){return function Zk(n,t,e,i,r){return n.some(s=>s(t,e,i,r))}(this.ast.matchers,t,e,i,r)}buildStyles(t,e,i){let r=this._stateStyles.get("*");return void 0!==t&&(r=this._stateStyles.get(t?.toString())||r),r?r.buildStyles(e,i):new Map}build(t,e,i,r,s,c,d,p,_,w){const I=[],M=this.ast.options&&this.ast.options.params||Sv,N=this.buildStyles(i,d&&d.params||Sv,I),z=p&&p.params||Sv,ie=this.buildStyles(r,z,I),Me=new Set,ze=new Map,Xe=new Map,Qe="void"===r,Dt={params:Kk(z,M),delay:this.ast.options?.delay},At=w?[]:yg(t,e,this.ast.animation,s,c,N,ie,Dt,_,I);let on=0;if(At.forEach(sa=>{on=Math.max(sa.duration+sa.delay,on)}),I.length)return lh(e,this._triggerName,i,r,Qe,N,ie,[],[],ze,Xe,on,I);At.forEach(sa=>{const yd=sa.element,y6=Ns(ze,yd,new Set);sa.preStyleProps.forEach(vm=>y6.add(vm));const LC=Ns(Xe,yd,new Set);sa.postStyleProps.forEach(vm=>LC.add(vm)),yd!==e&&Me.add(yd)});const tr=mv(Me.values());return lh(e,this._triggerName,i,r,Qe,N,ie,At,tr,ze,Xe,on)}}function Kk(n,t){const e=Uc(t);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(e[i]=n[i]);return e}class Yf{constructor(t,e,i){this.styles=t,this.defaultParams=e,this.normalizer=i}buildStyles(t,e){const i=new Map,r=Uc(this.defaultParams);return Object.keys(t).forEach(s=>{const c=t[s];null!==c&&(r[s]=c)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((c,d)=>{c&&(c=dg(c,r,e));const p=this.normalizer.normalizePropertyName(d,e);c=this.normalizer.normalizeStyleValue(d,p,c,e),i.set(p,c)})}),i}}class vV{constructor(t,e,i){this.name=t,this.ast=e,this._normalizer=i,this.transitionFactories=[],this.states=new Map,e.states.forEach(r=>{this.states.set(r.name,new Yf(r.style,r.options&&r.options.params||{},i))}),Jk(this.states,"true","1"),Jk(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new wg(t,r,this.states))}),this.fallbackTransition=function Xk(n,t,e){return new wg(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,d)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,i,r){return this.transitionFactories.find(c=>c.match(t,e,i,r))||null}matchStyles(t,e,i){return this.fallbackTransition.buildStyles(t,e,i)}}function Jk(n,t,e){n.has(t)?n.has(e)||n.set(e,n.get(t)):n.has(e)&&n.set(t,n.get(e))}const ex=new gg;class tx{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,e){const i=[],s=yv(this._driver,e,i,[]);if(i.length)throw function zl(n){return new l.vHH(3503,!1)}();this._animations.set(t,s)}_buildPlayer(t,e,i){const r=t.element,s=tD(0,this._normalizer,0,t.keyframes,e,i);return this._driver.animate(r,s,t.duration,t.delay,t.easing,[],!0)}create(t,e,i={}){const r=[],s=this._animations.get(t);let c;const d=new Map;if(s?(c=yg(this._driver,e,s,sg,oh,new Map,new Map,i,ex,r),c.forEach(w=>{const I=Ns(d,w.element,new Map);w.postStyleProps.forEach(M=>I.set(M,null))})):(r.push(function nv(){return new l.vHH(3300,!1)}()),c=[]),r.length)throw function XE(n){return new l.vHH(3504,!1)}();d.forEach((w,I)=>{w.forEach((M,O)=>{w.set(O,this._driver.computeStyle(I,O,Gl))})});const _=Vc(c.map(w=>{const I=d.get(w.element);return this._buildPlayer(w,new Map,I)}));return this._playersById.set(t,_),_.onDestroy(()=>this.destroy(t)),this.players.push(_),_}destroy(t){const e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);const i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(t){const e=this._playersById.get(t);if(!e)throw function iv(n){return new l.vHH(3301,!1)}();return e}listen(t,e,i,r){const s=nD(e,"","","");return av(this._getPlayer(t),i,s,r),()=>{}}command(t,e,i,r){if("register"==i)return void this.register(t,r[0]);if("create"==i)return void this.create(t,e,r[0]||{});const s=this._getPlayer(t);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const fD="ng-animate-queued",Cg="ng-animate-disabled",rx=[],pD={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},sx={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},uo="__ng_removed";class Mv{constructor(t,e=""){this.namespaceId=e;const i=t&&t.hasOwnProperty("value");if(this.value=function ax(n){return n??null}(i?t.value:t),i){const s=Uc(t);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const i=this.options.params;Object.keys(e).forEach(r=>{null==i[r]&&(i[r]=e[r])})}}}const Zf="void",ch=new Mv(Zf);class Uu{constructor(t,e,i){this.id=t,this.hostElement=e,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,ar(e,this._hostClassName)}listen(t,e,i,r){if(!this._triggers.has(e))throw function cV(n,t){return new l.vHH(3302,!1)}();if(null==i||0==i.length)throw function JE(n){return new l.vHH(3303,!1)}();if(!function lx(n){return"start"==n||"done"==n}(i))throw function uV(n,t){return new l.vHH(3400,!1)}();const s=Ns(this._elementListeners,t,[]),c={name:e,phase:i,callback:r};s.push(c);const d=Ns(this._engine.statesByElement,t,new Map);return d.has(e)||(ar(t,og),ar(t,og+"-"+e),d.set(e,ch)),()=>{this._engine.afterFlush(()=>{const p=s.indexOf(c);p>=0&&s.splice(p,1),this._triggers.has(e)||d.delete(e)})}}register(t,e){return!this._triggers.has(t)&&(this._triggers.set(t,e),!0)}_getTrigger(t){const e=this._triggers.get(t);if(!e)throw function tg(n){return new l.vHH(3401,!1)}();return e}trigger(t,e,i,r=!0){const s=this._getTrigger(e),c=new Hu(this.id,e,t);let d=this._engine.statesByElement.get(t);d||(ar(t,og),ar(t,og+"-"+e),this._engine.statesByElement.set(t,d=new Map));let p=d.get(e);const _=new Mv(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&p&&_.absorbOptions(p.options),d.set(e,_),p||(p=ch),_.value!==Zf&&p.value===_.value){if(!function hh(n,t){const e=Object.keys(n),i=Object.keys(t);if(e.length!=i.length)return!1;for(let r=0;r<e.length;r++){const s=e[r];if(!t.hasOwnProperty(s)||n[s]!==t[s])return!1}return!0}(p.params,_.params)){const z=[],ie=s.matchStyles(p.value,p.params,z),Me=s.matchStyles(_.value,_.params,z);z.length?this._engine.reportError(z):this._engine.afterFlush(()=>{Hc(t,ie),$o(t,Me)})}return}const M=Ns(this._engine.playersByElement,t,[]);M.forEach(z=>{z.namespaceId==this.id&&z.triggerName==e&&z.queued&&z.destroy()});let O=s.matchTransition(p.value,_.value,t,_.params),N=!1;if(!O){if(!r)return;O=s.fallbackTransition,N=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:O,fromState:p,toState:_,player:c,isFallbackTransition:N}),N||(ar(t,fD),c.onStart(()=>{Wl(t,fD)})),c.onDone(()=>{let z=this.players.indexOf(c);z>=0&&this.players.splice(z,1);const ie=this._engine.playersByElement.get(t);if(ie){let Me=ie.indexOf(c);Me>=0&&ie.splice(Me,1)}}),this.players.push(c),M.push(c),c}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const i=this._engine.driver.query(t,Ho,!0);i.forEach(r=>{if(r[uo])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(c=>c.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,i,r){const s=this._engine.statesByElement.get(t),c=new Map;if(s){const d=[];if(s.forEach((p,_)=>{if(c.set(_,p.value),this._triggers.has(_)){const w=this.trigger(t,_,Zf,r);w&&d.push(w)}}),d.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,c),i&&Vc(d).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),i=this._engine.statesByElement.get(t);if(e&&i){const r=new Set;e.forEach(s=>{const c=s.name;if(r.has(c))return;r.add(c);const p=this._triggers.get(c).fallbackTransition,_=i.get(c)||ch,w=new Mv(Zf),I=new Hu(this.id,c,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:c,transition:p,fromState:_,toState:w,player:I,isFallbackTransition:!0})})}}removeNode(t,e){const i=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(t):[];if(s&&s.length)r=!0;else{let c=t;for(;c=c.parentNode;)if(i.statesByElement.get(c)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)i.markElementAsRemoved(this.id,t,!1,e);else{const s=t[uo];(!s||s===pD)&&(i.afterFlush(()=>this.clearElementCache(t)),i.destroyInnerAnimations(t),i._onRemovalComplete(t,e))}}insertNode(t,e){ar(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,c=this._elementListeners.get(s);c&&c.forEach(d=>{if(d.name==i.triggerName){const p=nD(s,i.triggerName,i.fromState.value,i.toState.value);p._data=t,av(i.player,d.phase,p,d.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(i)}),this._queue=[],e.sort((i,r)=>{const s=i.transition.ast.depCount,c=r.transition.ast.depCount;return 0==s||0==c?s-c:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(i=>i.element===t)||e,e}}class bV{constructor(t,e,i){this.bodyNode=t,this.driver=e,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&t.push(i)})}),t}createNamespace(t,e){const i=new Uu(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[t]=i}_balanceNamespaceList(t,e){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let c=!1,d=this.driver.getParentElement(e);for(;d;){const p=r.get(d);if(p){const _=i.indexOf(p);i.splice(_+1,0,t),c=!0;break}d=this.driver.getParentElement(d)}c||i.unshift(t)}else i.push(t);return r.set(e,t),t}register(t,e){let i=this._namespaceLookup[t];return i||(i=this.createNamespace(t,e)),i}registerTrigger(t,e,i){let r=this._namespaceLookup[t];r&&r.register(e,i)&&this.totalAnimations++}destroy(t,e){if(!t)return;const i=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[t];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,i=this.statesByElement.get(t);if(i)for(let r of i.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&e.add(s)}return e}trigger(t,e,i,r){if(uh(e)){const s=this._fetchNamespace(t);if(s)return s.trigger(e,i,r),!0}return!1}insertNode(t,e,i,r){if(!uh(e))return;const s=e[uo];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const c=this.collectedLeaveElements.indexOf(e);c>=0&&this.collectedLeaveElements.splice(c,1)}if(t){const c=this._fetchNamespace(t);c&&c.insertNode(e,i)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),ar(t,Cg)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Wl(t,Cg))}removeNode(t,e,i,r){if(uh(e)){const s=t?this._fetchNamespace(t):null;if(s?s.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),i){const c=this.namespacesByHostElement.get(e);c&&c.id!==t&&c.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,i,r,s){this.collectedLeaveElements.push(e),e[uo]={namespaceId:t,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(t,e,i,r,s){return uh(e)?this._fetchNamespace(t).listen(e,i,r,s):()=>{}}_buildInstruction(t,e,i,r,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,i,r,t.fromState.options,t.toState.options,e,s)}destroyInnerAnimations(t){let e=this.driver.query(t,Ho,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,hv,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Vc(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[uo];if(e&&e.setForRemoval){if(t[uo]=pD,e.namespaceId){this.destroyInnerAnimations(t);const i=this._fetchNamespace(e.namespaceId);i&&i.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(Cg)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)ar(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{e=this._flushAnimations(i,t)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],e.length?Vc(e).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(t){throw function ng(n){return new l.vHH(3402,!1)}()}_flushAnimations(t,e){const i=new gg,r=[],s=new Map,c=[],d=new Map,p=new Map,_=new Map,w=new Set;this.disabledNodes.forEach(_t=>{w.add(_t);const Ot=this.driver.query(_t,".ng-animate-queued",!0);for(let Vt=0;Vt<Ot.length;Vt++)w.add(Ot[Vt])});const I=this.bodyNode,M=Array.from(this.statesByElement.keys()),O=vr(M,this.collectedEnterElements),N=new Map;let z=0;O.forEach((_t,Ot)=>{const Vt=sg+z++;N.set(Ot,Vt),_t.forEach(In=>ar(In,Vt))});const ie=[],Me=new Set,ze=new Set;for(let _t=0;_t<this.collectedLeaveElements.length;_t++){const Ot=this.collectedLeaveElements[_t],Vt=Ot[uo];Vt&&Vt.setForRemoval&&(ie.push(Ot),Me.add(Ot),Vt.hasAnimation?this.driver.query(Ot,".ng-star-inserted",!0).forEach(In=>Me.add(In)):ze.add(Ot))}const Xe=new Map,Qe=vr(M,Array.from(Me));Qe.forEach((_t,Ot)=>{const Vt=oh+z++;Xe.set(Ot,Vt),_t.forEach(In=>ar(In,Vt))}),t.push(()=>{O.forEach((_t,Ot)=>{const Vt=N.get(Ot);_t.forEach(In=>Wl(In,Vt))}),Qe.forEach((_t,Ot)=>{const Vt=Xe.get(Ot);_t.forEach(In=>Wl(In,Vt))}),ie.forEach(_t=>{this.processLeaveNode(_t)})});const Dt=[],At=[];for(let _t=this._namespaceList.length-1;_t>=0;_t--)this._namespaceList[_t].drainQueuedTransitions(e).forEach(Vt=>{const In=Vt.player,Br=Vt.element;if(Dt.push(In),this.collectedEnterElements.length){const ys=Br[uo];if(ys&&ys.setForMove){if(ys.previousTriggersValues&&ys.previousTriggersValues.has(Vt.triggerName)){const bm=ys.previousTriggersValues.get(Vt.triggerName),al=this.statesByElement.get(Vt.element);if(al&&al.has(Vt.triggerName)){const lM=al.get(Vt.triggerName);lM.value=bm,al.set(Vt.triggerName,lM)}}return void In.destroy()}}const au=!I||!this.driver.containsElement(I,Br),oa=Xe.get(Br),lf=N.get(Br),ki=this._buildInstruction(Vt,i,lf,oa,au);if(ki.errors&&ki.errors.length)return void At.push(ki);if(au)return In.onStart(()=>Hc(Br,ki.fromStyles)),In.onDestroy(()=>$o(Br,ki.toStyles)),void r.push(In);if(Vt.isFallbackTransition)return In.onStart(()=>Hc(Br,ki.fromStyles)),In.onDestroy(()=>$o(Br,ki.toStyles)),void r.push(In);const w6=[];ki.timelines.forEach(ys=>{ys.stretchStartingKeyframe=!0,this.disabledNodes.has(ys.element)||w6.push(ys)}),ki.timelines=w6,i.append(Br,ki.timelines),c.push({instruction:ki,player:In,element:Br}),ki.queriedElements.forEach(ys=>Ns(d,ys,[]).push(In)),ki.preStyleProps.forEach((ys,bm)=>{if(ys.size){let al=p.get(bm);al||p.set(bm,al=new Set),ys.forEach((lM,PL)=>al.add(PL))}}),ki.postStyleProps.forEach((ys,bm)=>{let al=_.get(bm);al||_.set(bm,al=new Set),ys.forEach((lM,PL)=>al.add(PL))})});if(At.length){const _t=[];At.forEach(Ot=>{_t.push(function rv(n,t){return new l.vHH(3505,!1)}())}),Dt.forEach(Ot=>Ot.destroy()),this.reportError(_t)}const on=new Map,tr=new Map;c.forEach(_t=>{const Ot=_t.element;i.has(Ot)&&(tr.set(Ot,Ot),this._beforeAnimationBuild(_t.player.namespaceId,_t.instruction,on))}),r.forEach(_t=>{const Ot=_t.element;this._getPreviousPlayers(Ot,!1,_t.namespaceId,_t.triggerName,null).forEach(In=>{Ns(on,Ot,[]).push(In),In.destroy()})});const sa=ie.filter(_t=>$u(_t,p,_)),yd=new Map;dh(yd,this.driver,ze,_,Gl).forEach(_t=>{$u(_t,p,_)&&sa.push(_t)});const LC=new Map;O.forEach((_t,Ot)=>{dh(LC,this.driver,new Set(_t),p,"!")}),sa.forEach(_t=>{const Ot=yd.get(_t),Vt=LC.get(_t);yd.set(_t,new Map([...Array.from(Ot?.entries()??[]),...Array.from(Vt?.entries()??[])]))});const vm=[],v6=[],b6={};c.forEach(_t=>{const{element:Ot,player:Vt,instruction:In}=_t;if(i.has(Ot)){if(w.has(Ot))return Vt.onDestroy(()=>$o(Ot,In.toStyles)),Vt.disabled=!0,Vt.overrideTotalTime(In.totalTime),void r.push(Vt);let Br=b6;if(tr.size>1){let oa=Ot;const lf=[];for(;oa=oa.parentNode;){const ki=tr.get(oa);if(ki){Br=ki;break}lf.push(oa)}lf.forEach(ki=>tr.set(ki,Br))}const au=this._buildAnimation(Vt.namespaceId,In,on,s,LC,yd);if(Vt.setRealPlayer(au),Br===b6)vm.push(Vt);else{const oa=this.playersByElement.get(Br);oa&&oa.length&&(Vt.parentPlayer=Vc(oa)),r.push(Vt)}}else Hc(Ot,In.fromStyles),Vt.onDestroy(()=>$o(Ot,In.toStyles)),v6.push(Vt),w.has(Ot)&&r.push(Vt)}),v6.forEach(_t=>{const Ot=s.get(_t.element);if(Ot&&Ot.length){const Vt=Vc(Ot);_t.setRealPlayer(Vt)}}),r.forEach(_t=>{_t.parentPlayer?_t.syncPlayerEvents(_t.parentPlayer):_t.destroy()});for(let _t=0;_t<ie.length;_t++){const Ot=ie[_t],Vt=Ot[uo];if(Wl(Ot,oh),Vt&&Vt.hasAnimation)continue;let In=[];if(d.size){let au=d.get(Ot);au&&au.length&&In.push(...au);let oa=this.driver.query(Ot,hv,!0);for(let lf=0;lf<oa.length;lf++){let ki=d.get(oa[lf]);ki&&ki.length&&In.push(...ki)}}const Br=In.filter(au=>!au.destroyed);Br.length?ho(this,Ot,Br):this.processLeaveNode(Ot)}return ie.length=0,vm.forEach(_t=>{this.players.push(_t),_t.onDone(()=>{_t.destroy();const Ot=this.players.indexOf(_t);this.players.splice(Ot,1)}),_t.play()}),vm}elementContainsData(t,e){let i=!1;const r=e[uo];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(e)&&(i=!0),this.playersByQueriedElement.has(e)&&(i=!0),this.statesByElement.has(e)&&(i=!0),this._fetchNamespace(t).elementContainsData(e)||i}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,i,r,s){let c=[];if(e){const d=this.playersByQueriedElement.get(t);d&&(c=d)}else{const d=this.playersByElement.get(t);if(d){const p=!s||s==Zf;d.forEach(_=>{_.queued||!p&&_.triggerName!=r||c.push(_)})}}return(i||r)&&(c=c.filter(d=>!(i&&i!=d.namespaceId||r&&r!=d.triggerName))),c}_beforeAnimationBuild(t,e,i){const s=e.element,c=e.isRemovalTransition?void 0:t,d=e.isRemovalTransition?void 0:e.triggerName;for(const p of e.timelines){const _=p.element,w=_!==s,I=Ns(i,_,[]);this._getPreviousPlayers(_,w,c,d,e.toState).forEach(O=>{const N=O.getRealPlayer();N.beforeDestroy&&N.beforeDestroy(),O.destroy(),I.push(O)})}Hc(s,e.fromStyles)}_buildAnimation(t,e,i,r,s,c){const d=e.triggerName,p=e.element,_=[],w=new Set,I=new Set,M=e.timelines.map(N=>{const z=N.element;w.add(z);const ie=z[uo];if(ie&&ie.removedBeforeQueried)return new Bf(N.duration,N.delay);const Me=z!==p,ze=function kv(n){const t=[];return ju(n,t),t}((i.get(z)||rx).map(on=>on.getRealPlayer())).filter(on=>!!on.element&&on.element===z),Xe=s.get(z),Qe=c.get(z),Dt=tD(0,this._normalizer,0,N.keyframes,Xe,Qe),At=this._buildPlayer(N,Dt,ze);if(N.subTimeline&&r&&I.add(z),Me){const on=new Hu(t,d,z);on.setRealPlayer(At),_.push(on)}return At});_.forEach(N=>{Ns(this.playersByQueriedElement,N.element,[]).push(N),N.onDone(()=>function ox(n,t,e){let i=n.get(t);if(i){if(i.length){const r=i.indexOf(e);i.splice(r,1)}0==i.length&&n.delete(t)}return i}(this.playersByQueriedElement,N.element,N))}),w.forEach(N=>ar(N,dv));const O=Vc(M);return O.onDestroy(()=>{w.forEach(N=>Wl(N,dv)),$o(p,e.toStyles)}),I.forEach(N=>{Ns(r,N,[]).push(O)}),O}_buildPlayer(t,e,i){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,i):new Bf(t.duration,t.delay)}}class Hu{constructor(t,e,i){this.namespaceId=t,this.triggerName=e,this.element=i,this._player=new Bf,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,i)=>{e.forEach(r=>av(t,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Ns(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function uh(n){return n&&1===n.nodeType}function zo(n,t){const e=n.style.display;return n.style.display=t??"none",e}function dh(n,t,e,i,r){const s=[];e.forEach(p=>s.push(zo(p)));const c=[];i.forEach((p,_)=>{const w=new Map;p.forEach(I=>{const M=t.computeStyle(_,I,r);w.set(I,M),(!M||0==M.length)&&(_[uo]=sx,c.push(_))}),n.set(_,w)});let d=0;return e.forEach(p=>zo(p,s[d++])),c}function vr(n,t){const e=new Map;if(n.forEach(d=>e.set(d,[])),0==t.length)return e;const r=new Set(t),s=new Map;function c(d){if(!d)return 1;let p=s.get(d);if(p)return p;const _=d.parentNode;return p=e.has(_)?_:r.has(_)?1:c(_),s.set(d,p),p}return t.forEach(d=>{const p=c(d);1!==p&&e.get(p).push(d)}),e}function ar(n,t){n.classList?.add(t)}function Wl(n,t){n.classList?.remove(t)}function ho(n,t,e){Vc(e).onDone(()=>n.processLeaveNode(t))}function ju(n,t){for(let e=0;e<n.length;e++){const i=n[e];i instanceof Nu?ju(i.players,t):t.push(i)}}function $u(n,t,e){const i=e.get(n);if(!i)return!1;let r=t.get(n);return r?i.forEach(s=>r.add(s)):t.set(n,i),e.delete(n),!0}class Yl{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new bV(t,e,i),this._timelineEngine=new tx(t,e,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(t,e,i,r,s){const c=t+"-"+r;let d=this._triggerCache[c];if(!d){const p=[],w=yv(this._driver,s,p,[]);if(p.length)throw function Mk(n,t){return new l.vHH(3404,!1)}();d=function Qk(n,t,e){return new vV(n,t,e)}(r,w,this._normalizer),this._triggerCache[c]=d}this._transitionEngine.registerTrigger(e,r,d)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,i,r){this._transitionEngine.insertNode(t,e,i,r)}onRemove(t,e,i,r){this._transitionEngine.removeNode(t,e,r||!1,i)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,i,r){if("@"==i.charAt(0)){const[s,c]=kk(i);this._timelineEngine.command(s,e,c,r)}else this._transitionEngine.trigger(t,e,i,r)}listen(t,e,i,r,s){if("@"==i.charAt(0)){const[c,d]=kk(i);return this._timelineEngine.listen(c,e,d,s)}return this._transitionEngine.listen(t,e,i,r,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let ph=(()=>{class n{constructor(e,i,r){this._element=e,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(e);s||n.initialStylesByElement.set(e,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&$o(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&($o(this._element,this._initialStyles),this._endStyles&&($o(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Hc(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Hc(this._element,this._endStyles),this._endStyles=null),$o(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function $c(n){let t=null;return n.forEach((e,i)=>{(function mh(n){return"display"===n||"position"===n})(i)&&(t=t||new Map,t.set(i,e))}),t}class Gu{constructor(t,e,i,r){this.element=t,this.keyframes=e,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){const e=[];return t.forEach(i=>{e.push(Object.fromEntries(i))}),e}_triggerWebAnimation(t,e,i){return t.animate(this._convertKeyframesToObject(e),i)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&t.set(r,this._finished?i:hs(this.element,r))}),this.currentSnapshot=t}triggerCallback(t){const e="start"===t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class mD{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,e){return!1}containsElement(t,e){return Rk(t,e)}getParentElement(t){return Hf(t)}query(t,e,i){return Ok(t,e,i)}computeStyle(t,e,i){return window.getComputedStyle(t)[e]}animate(t,e,i,r,s,c=[]){const p={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(p.easing=s);const _=new Map,w=c.filter(O=>O instanceof Gu);(function sD(n,t){return 0===n||0===t})(i,r)&&w.forEach(O=>{O.currentSnapshot.forEach((N,z)=>_.set(z,N))});let I=function fv(n){return n.length?n[0]instanceof Map?n:n.map(t=>Fu(t)):[]}(e).map(O=>jo(O));I=function oD(n,t,e){if(e.size&&t.length){let i=t[0],r=[];if(e.forEach((s,c)=>{i.has(c)||r.push(c),i.set(c,s)}),r.length)for(let s=1;s<t.length;s++){let c=t[s];r.forEach(d=>c.set(d,hs(n,d)))}}return t}(t,I,_);const M=function fh(n,t){let e=null,i=null;return Array.isArray(t)&&t.length?(e=$c(t[0]),t.length>1&&(i=$c(t[t.length-1]))):t instanceof Map&&(e=$c(t)),e||i?new ph(n,e,i):null}(t,I);return new Gu(t,I,p,M)}}let gD=(()=>{class n extends Qy{constructor(e,i){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(i.body,{id:"0",encapsulation:l.ifc.None,styles:[],data:{animation:[]}})}build(e){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(e)?Lc(e):e;return xv(this._renderer,null,i,"register",[r]),new _D(i,this._renderer)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(l.FYo),l.LFG(ae))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class _D extends class pk{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new yD(this._id,t,e||{},this._renderer)}}class yD{constructor(t,e,i,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return xv(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function xv(n,t,e,i,r){return n.setProperty(t,`@@${e}:${i}`,r)}const Rv="@.disabled";let vD=(()=>{class n{constructor(e,i,r){this.delegate=e,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,c)=>{const d=c?.parentNode(s);d&&c.removeChild(d,s)}}createRenderer(e,i){const s=this.delegate.createRenderer(e,i);if(!(e&&i&&i.data&&i.data.animation)){let w=this._rendererCache.get(s);return w||(w=new Ov("",s,this.engine),this._rendererCache.set(s,w)),w}const c=i.id,d=i.id+"-"+this._currentId;this._currentId++,this.engine.register(d,e);const p=w=>{Array.isArray(w)?w.forEach(p):this.engine.registerTrigger(c,d,e,w.name,w)};return i.data.animation.forEach(p),new cx(this,d,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,i,r){e>=0&&e<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[c,d]=s;c(d)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(l.FYo),l.LFG(Yl),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class Ov{constructor(t,e,i){this.namespaceId=t,this.delegate=e,this.engine=i,this.destroyNode=this.delegate.destroyNode?r=>e.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,i,r=!0){this.delegate.insertBefore(t,e,i),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,i){this.engine.onRemove(this.namespaceId,e,this.delegate,i)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,r){this.delegate.setAttribute(t,e,i,r)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,r){this.delegate.setStyle(t,e,i,r)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){"@"==e.charAt(0)&&e==Rv?this.disableAnimations(t,!!i):this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i){return this.delegate.listen(t,e,i)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class cx extends Ov{constructor(t,e,i,r){super(e,i,r),this.factory=t,this.namespaceId=e}setProperty(t,e,i){"@"==e.charAt(0)?"."==e.charAt(1)&&e==Rv?this.disableAnimations(t,i=void 0===i||!!i):this.engine.process(this.namespaceId,t,e.slice(1),i):this.delegate.setProperty(t,e,i)}listen(t,e,i){if("@"==e.charAt(0)){const r=function ux(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(t);let s=e.slice(1),c="";return"@"!=s.charAt(0)&&([s,c]=function bD(n){const t=n.indexOf(".");return[n.substring(0,t),n.slice(t+1)]}(s)),this.engine.listen(this.namespaceId,r,s,c,d=>{this.factory.scheduleListenerCallback(d._data||-1,i,d)})}return this.delegate.listen(t,e,i)}}let dx=(()=>{class n extends Yl{constructor(e,i,r,s){super(e.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ae),l.LFG(jf),l.LFG(Wf),l.LFG(l.z2F))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const Eg=[{provide:Qy,useClass:gD},{provide:Wf,useFactory:function wD(){return new bg}},{provide:Yl,useClass:dx},{provide:l.FYo,useFactory:function Pv(n,t,e){return new vD(n,t,e)},deps:[El,Yl,l.R0b]}],Nv=[{provide:jf,useFactory:()=>new mD},{provide:l.QbO,useValue:"BrowserAnimations"},...Eg],Qf=[{provide:jf,useClass:ql},{provide:l.QbO,useValue:"NoopAnimations"},...Eg];let Dg=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?Qf:Nv}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:Nv,imports:[Oo]}),n})();const Xf=Gr({passive:!0});let ED=(()=>{class n{constructor(e,i){this._platform=e,this._ngZone=i,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return Ul.E;const i=qr(e),r=this._monitoredElements.get(i);if(r)return r.subject;const s=new St.x,c="cdk-text-field-autofilled",d=p=>{"cdk-text-field-autofill-start"!==p.animationName||i.classList.contains(c)?"cdk-text-field-autofill-end"===p.animationName&&i.classList.contains(c)&&(i.classList.remove(c),this._ngZone.run(()=>s.next({target:p.target,isAutofilled:!1}))):(i.classList.add(c),this._ngZone.run(()=>s.next({target:p.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",d,Xf),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:s,unlisten:()=>{i.removeEventListener("animationstart",d,Xf)}}),s}stopMonitoring(e){const i=qr(e),r=this._monitoredElements.get(i);r&&(r.unlisten(),r.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((e,i)=>this.stopMonitoring(i))}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ti),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Lv=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();function Vv(...n){const t=(0,xs.jO)(n),{args:e,keys:i}=Um(n),r=new Zi.y(s=>{const{length:c}=e;if(!c)return void s.complete();const d=new Array(c);let p=c,_=c;for(let w=0;w<c;w++){let I=!1;(0,Hl.Xf)(e[w]).subscribe((0,Zn.x)(s,M=>{I||(I=!0,_--),d[w]=M},()=>p--,void 0,()=>{(!p||!I)&&(_||s.next(i?DM(i,d):d),s.complete())}))}});return t?r.pipe(Hm(t)):r}let Ig=(()=>{class n{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.Qsj),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n}),n})(),Zl=(()=>{class n extends Ig{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=l.n5z(n)))(i||n)}}(),n.\u0275dir=l.lG2({type:n,features:[l.qOj]}),n})();const fo=new l.OlP("NgValueAccessor"),SD={provide:fo,useExisting:(0,l.Gpc)(()=>Jf),multi:!0},fx=new l.OlP("CompositionEventMode");let Jf=(()=>{class n extends Ig{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function TD(){const n=P()?P().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.Qsj),l.Y36(l.SBq),l.Y36(fx,8))},n.\u0275dir=l.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,i){1&e&&l.NdJ("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[l._Bn([SD]),l.qOj]}),n})();function Kl(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function ep(n){return null!=n&&"number"==typeof n.length}const Qi=new l.OlP("NgValidators"),Ql=new l.OlP("NgAsyncValidators"),MD=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Xi{static min(t){return function Uv(n){return t=>{if(Kl(t.value)||Kl(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}(t)}static max(t){return function Hv(n){return t=>{if(Kl(t.value)||Kl(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}(t)}static required(t){return jv(t)}static requiredTrue(t){return function $v(n){return!0===n.value?null:{required:!0}}(t)}static email(t){return function px(n){return Kl(n.value)||MD.test(n.value)?null:{email:!0}}(t)}static minLength(t){return function kD(n){return t=>Kl(t.value)||!ep(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static maxLength(t){return function xD(n){return t=>ep(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static pattern(t){return function Gv(n){if(!n)return Sg;let t,e;return"string"==typeof n?(e="","^"!==n.charAt(0)&&(e+="^"),e+=n,"$"!==n.charAt(n.length-1)&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),i=>{if(Kl(i.value))return null;const r=i.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}(t)}static nullValidator(t){return null}static compose(t){return qv(t)}static composeAsync(t){return zu(t)}}function jv(n){return Kl(n.value)?{required:!0}:null}function Sg(n){return null}function Ui(n){return null!=n}function zv(n){return(0,l.QGY)(n)?(0,mn.D)(n):n}function RD(n){let t={};return n.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function OD(n,t){return t.map(e=>e(n))}function ND(n){return n.map(t=>function PD(n){return!n.validate}(t)?t:e=>t.validate(e))}function qv(n){if(!n)return null;const t=n.filter(Ui);return 0==t.length?null:function(e){return RD(OD(e,t))}}function Tg(n){return null!=n?qv(ND(n)):null}function zu(n){if(!n)return null;const t=n.filter(Ui);return 0==t.length?null:function(e){return Vv(OD(e,t).map(zv)).pipe((0,ct.U)(RD))}}function Wv(n){return null!=n?zu(ND(n)):null}function FD(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function Yv(n){return n._rawValidators}function LD(n){return n._rawAsyncValidators}function Ag(n){return n?Array.isArray(n)?n:[n]:[]}function Zv(n,t){return Array.isArray(n)?n.includes(t):n===t}function Mg(n,t){const e=Ag(t);return Ag(n).forEach(r=>{Zv(e,r)||e.push(r)}),e}function kg(n,t){return Ag(t).filter(e=>!Zv(n,e))}class qo{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Tg(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Wv(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class Wr extends qo{get formDirective(){return null}get path(){return null}}class qa extends qo{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Wo{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Kv=(()=>{class n extends Wo{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(qa,2))},n.\u0275dir=l.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,i){2&e&&l.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[l.qOj]}),n})(),gh=(()=>{class n extends Wo{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(Wr,10))},n.\u0275dir=l.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,i){2&e&&l.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[l.qOj]}),n})();const _h="VALID",tp="INVALID",qu="PENDING",yh="DISABLED";function Ng(n){return(Lg(n)?n.validators:n)||null}function ib(n){return Array.isArray(n)?Tg(n):n||null}function Fg(n,t){return(Lg(t)?t.asyncValidators:n)||null}function rb(n){return Array.isArray(n)?Wv(n):n||null}function Lg(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class HD{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=ib(this._rawValidators),this._composedAsyncValidatorFn=rb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===_h}get invalid(){return this.status===tp}get pending(){return this.status==qu}get disabled(){return this.status===yh}get enabled(){return this.status!==yh}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=ib(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=rb(t)}addValidators(t){this.setValidators(Mg(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Mg(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(kg(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(kg(t,this._rawAsyncValidators))}hasValidator(t){return Zv(this._rawValidators,t)}hasAsyncValidator(t){return Zv(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=qu,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=yh,this.errors=null,this._forEachChild(i=>{i.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=_h,this._forEachChild(i=>{i.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===_h||this.status===qu)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?yh:_h}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=qu,this._hasOwnPendingAsyncValidator=!0;const e=zv(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new l.vpe,this.statusChanges=new l.vpe}_calculateStatus(){return this._allControlsDisabled()?yh:this.errors?tp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(qu)?qu:this._anyControlsHaveStatus(tp)?tp:_h}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Lg(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}}class Vg extends HD{constructor(t,e,i){super(Ng(e),Fg(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){(function UD(n,t,e){n._forEachChild((i,r)=>{if(void 0===e[r])throw new l.vHH(1002,"")})})(this,0,t),Object.keys(t).forEach(i=>{(function BD(n,t,e){const i=n.controls;if(!(t?Object.keys(i):i).length)throw new l.vHH(1e3,"");if(!i[e])throw new l.vHH(1001,"")})(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(i=>{const r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,s)=>{i=e(i,r,s)}),i}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}function np(n,t){sb(n,t),t.valueAccessor.writeValue(n.value),n.disabled&&t.valueAccessor.setDisabledState?.(!0),function Cx(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&ob(n,t)})}(n,t),function $D(n,t){const e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function jD(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&ob(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function wx(n,t){if(t.valueAccessor.setDisabledState){const e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function Ug(n,t,e=!0){const i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),jg(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Hg(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function sb(n,t){const e=Yv(n);null!==t.validator?n.setValidators(FD(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const i=LD(n);null!==t.asyncValidator?n.setAsyncValidators(FD(i,t.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();Hg(t._rawValidators,r),Hg(t._rawAsyncValidators,r)}function jg(n,t){let e=!1;if(null!==n){if(null!==t.validator){const r=Yv(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(c=>c!==t.validator);s.length!==r.length&&(e=!0,n.setValidators(s))}}if(null!==t.asyncValidator){const r=LD(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(c=>c!==t.asyncValidator);s.length!==r.length&&(e=!0,n.setAsyncValidators(s))}}}const i=()=>{};return Hg(t._rawValidators,i),Hg(t._rawAsyncValidators,i),e}function ob(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function ab(n,t){sb(n,t)}function ip(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}function Gc(n,t){n._syncPendingControls(),t.forEach(e=>{const i=e.control;"submit"===i.updateOn&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function ub(n,t){if(!t)return null;let e,i,r;return Array.isArray(t),t.forEach(s=>{s.constructor===Jf?e=s:function cb(n){return Object.getPrototypeOf(n.constructor)===Zl}(s)?i=s:r=s}),r||i||e||null}const TV={provide:Wr,useExisting:(0,l.Gpc)(()=>$g)},Wu=(()=>Promise.resolve(null))();let $g=(()=>{class n extends Wr{constructor(e,i){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new l.vpe,this.form=new Vg({},Tg(e),Wv(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Wu.then(()=>{const i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),np(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Wu.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){Wu.then(()=>{const i=this._findContainer(e.path),r=new Vg({});ab(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Wu.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){Wu.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,Gc(this.form,this._directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(Qi,10),l.Y36(Ql,10))},n.\u0275dir=l.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,i){1&e&&l.NdJ("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[l._Bn([TV]),l.qOj]}),n})();function db(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}function hb(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Za=class extends HD{constructor(t=null,e,i){super(Ng(e),Fg(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Lg(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=hb(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){db(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){db(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){hb(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};let op=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=l.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),ZD=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();const _b=new l.OlP("NgModelWithFormControlWarning"),Mx={provide:qa,useExisting:(0,l.Gpc)(()=>vh)};let vh=(()=>{class n extends qa{constructor(e,i,r,s){super(),this._ngModelWarningConfig=s,this.update=new l.vpe,this._ngModelWarningSent=!1,this._setValidators(e),this._setAsyncValidators(i),this.valueAccessor=ub(0,r)}set isDisabled(e){}ngOnChanges(e){if(this._isControlChanged(e)){const i=e.form.previousValue;i&&Ug(i,this,!1),np(this.form,this),this.form.updateValueAndValidity({emitEvent:!1})}ip(e,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Ug(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_isControlChanged(e){return e.hasOwnProperty("form")}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(e){return new(e||n)(l.Y36(Qi,10),l.Y36(Ql,10),l.Y36(fo,10),l.Y36(_b,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[l._Bn([Mx]),l.qOj,l.TTD]}),n})();const XD={provide:Wr,useExisting:(0,l.Gpc)(()=>Yu)};let Yu=(()=>{class n extends Wr{constructor(e,i){super(),this.validators=e,this.asyncValidators=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new l.vpe,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(jg(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const i=this.form.get(e.path);return np(i,e),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){Ug(e.control||null,e,!1),function Ix(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this.submitted=!0,Gc(this.form,this.directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const i=e.control,r=this.form.get(e.path);i!==r&&(Ug(i||null,e),(n=>n instanceof Za)(r)&&(np(r,e),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const i=this.form.get(e.path);ab(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const i=this.form.get(e.path);i&&function GD(n,t){return jg(n,t)}(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){sb(this.form,this),this._oldForm&&jg(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(Qi,10),l.Y36(Ql,10))},n.\u0275dir=l.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(e,i){1&e&&l.NdJ("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[l._Bn([XD]),l.qOj,l.TTD]}),n})();const kx={provide:qa,useExisting:(0,l.Gpc)(()=>vb)};let vb=(()=>{class n extends qa{constructor(e,i,r,s,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new l.vpe,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=ub(0,s)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),ip(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return function Bg(n,t){return[...t.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(e){return new(e||n)(l.Y36(Wr,13),l.Y36(Qi,10),l.Y36(Ql,10),l.Y36(fo,10),l.Y36(_b,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[l._Bn([kx]),l.qOj,l.TTD]}),n})(),Ku=(()=>{class n{constructor(){this._validator=Sg}ngOnChanges(e){if(this.inputName in e){const i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):Sg,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return null!=e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=l.lG2({type:n,features:[l.TTD]}),n})();const Ox={provide:Qi,useExisting:(0,l.Gpc)(()=>zg),multi:!0};let zg=(()=>{class n extends Ku{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=l.D6c,this.createValidator=e=>jv}enabled(e){return e}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=l.n5z(n)))(i||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(e,i){2&e&&l.uIk("required",i._enabled?"":null)},inputs:{required:"required"},features:[l._Bn([Ox]),l.qOj]}),n})(),Tb=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[ZD]}),n})(),cI=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:_b,useValue:e.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Tb]}),n})();var fs=L(6451),br=L(5577),Ux=L(1144),Ka=L(576);const Hx=["addListener","removeListener"],jx=["addEventListener","removeEventListener"],$x=["on","off"];function dp(n,t,e,i){if((0,Ka.m)(e)&&(i=e,e=void 0),i)return dp(n,t,e).pipe(Hm(i));const[r,s]=function hI(n){return(0,Ka.m)(n.addEventListener)&&(0,Ka.m)(n.removeEventListener)}(n)?jx.map(c=>d=>n[c](t,d,e)):function Gx(n){return(0,Ka.m)(n.addListener)&&(0,Ka.m)(n.removeListener)}(n)?Hx.map(Ab(n,t)):function zx(n){return(0,Ka.m)(n.on)&&(0,Ka.m)(n.off)}(n)?$x.map(Ab(n,t)):[];if(!r&&(0,Ux.z)(n))return(0,br.z)(c=>dp(c,t,e))((0,Hl.Xf)(n));if(!r)throw new TypeError("Invalid event target");return new Zi.y(c=>{const d=(...p)=>c.next(1<p.length?p:p[0]);return r(d),()=>s(d)})}function Ab(n,t){return e=>i=>n[e](t,i)}const qx=["connectionContainer"],Wx=["inputContainer"],Yx=["label"];function Mb(n,t){1&n&&(l.ynx(0),l.TgZ(1,"div",14),l._UZ(2,"div",15)(3,"div",16)(4,"div",17),l.qZA(),l.TgZ(5,"div",18),l._UZ(6,"div",15)(7,"div",16)(8,"div",17),l.qZA(),l.BQk())}function kb(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",19),l.NdJ("cdkObserveContent",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.updateOutlineGap())}),l.Hsn(1,1),l.qZA()}if(2&n){const e=l.oxw();l.Q6J("cdkObserveContentDisabled","outline"!=e.appearance)}}function fI(n,t){if(1&n&&(l.ynx(0),l.Hsn(1,2),l.TgZ(2,"span"),l._uU(3),l.qZA(),l.BQk()),2&n){const e=l.oxw(2);l.xp6(3),l.Oqu(e._control.placeholder)}}function xb(n,t){1&n&&l.Hsn(0,3,["*ngSwitchCase","true"])}function Zx(n,t){1&n&&(l.TgZ(0,"span",23),l._uU(1," *"),l.qZA())}function Kx(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"label",20,21),l.NdJ("cdkObserveContent",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.updateOutlineGap())}),l.YNc(2,fI,4,1,"ng-container",12),l.YNc(3,xb,1,0,"ng-content",12),l.YNc(4,Zx,2,0,"span",22),l.qZA()}if(2&n){const e=l.oxw();l.ekj("mat-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-form-field-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-accent","accent"==e.color)("mat-warn","warn"==e.color),l.Q6J("cdkObserveContentDisabled","outline"!=e.appearance)("id",e._labelId)("ngSwitch",e._hasLabel()),l.uIk("for",e._control.id)("aria-owns",e._control.id),l.xp6(2),l.Q6J("ngSwitchCase",!1),l.xp6(1),l.Q6J("ngSwitchCase",!0),l.xp6(1),l.Q6J("ngIf",!e.hideRequiredMarker&&e._control.required&&!e._control.disabled)}}function Rb(n,t){1&n&&(l.TgZ(0,"div",24),l.Hsn(1,4),l.qZA())}function Qx(n,t){if(1&n&&(l.TgZ(0,"div",25),l._UZ(1,"span",26),l.qZA()),2&n){const e=l.oxw();l.xp6(1),l.ekj("mat-accent","accent"==e.color)("mat-warn","warn"==e.color)}}function pI(n,t){if(1&n&&(l.TgZ(0,"div"),l.Hsn(1,5),l.qZA()),2&n){const e=l.oxw();l.Q6J("@transitionMessages",e._subscriptAnimationState)}}function bh(n,t){if(1&n&&(l.TgZ(0,"div",30),l._uU(1),l.qZA()),2&n){const e=l.oxw(2);l.Q6J("id",e._hintLabelId),l.xp6(1),l.Oqu(e.hintLabel)}}function mI(n,t){if(1&n&&(l.TgZ(0,"div",27),l.YNc(1,bh,2,2,"div",28),l.Hsn(2,6),l._UZ(3,"div",29),l.Hsn(4,7),l.qZA()),2&n){const e=l.oxw();l.Q6J("@transitionMessages",e._subscriptAnimationState),l.xp6(1),l.Q6J("ngIf",e.hintLabel)}}const Xx=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],HV=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],Ob=new l.OlP("MatError"),Pb={transitionMessages:Pu("transitionMessages",[co("enter",pi({opacity:1,transform:"translateY(0%)"})),Ps("void => enter",[pi({opacity:0,transform:"translateY(-5px)"}),Os("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let qg=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=l.lG2({type:n}),n})(),_I=0;const Nb=new l.OlP("MatHint");let yI=(()=>{class n{constructor(){this.align="start",this.id="mat-hint-"+_I++}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=l.lG2({type:n,selectors:[["mat-hint"]],hostAttrs:[1,"mat-hint"],hostVars:4,hostBindings:function(e,i){2&e&&(l.uIk("id",i.id)("align",null),l.ekj("mat-form-field-hint-end","end"===i.align))},inputs:{align:"align",id:"id"},features:[l._Bn([{provide:Nb,useExisting:n}])]}),n})(),wh=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=l.lG2({type:n,selectors:[["mat-label"]]}),n})(),nR=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=l.lG2({type:n,selectors:[["mat-placeholder"]]}),n})();const iR=new l.OlP("MatPrefix"),Fb=new l.OlP("MatSuffix");let GV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=l.lG2({type:n,selectors:[["","matSuffix",""]],features:[l._Bn([{provide:Fb,useExisting:n}])]}),n})(),Lb=0;const zV=th(class{constructor(n){this._elementRef=n}},"primary"),qV=new l.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),Wg=new l.OlP("MatFormField");let Yg=(()=>{class n extends zV{constructor(e,i,r,s,c,d,p){super(e),this._changeDetectorRef=i,this._dir=r,this._defaults=s,this._platform=c,this._ngZone=d,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new St.x,this._hideRequiredMarker=!1,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+Lb++,this._labelId="mat-form-field-label-"+Lb++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==p,this.appearance=s?.appearance||"legacy",s&&(this._hideRequiredMarker=Boolean(s.hideRequiredMarker),s.color&&(this.color=this.defaultColor=s.color))}get appearance(){return this._appearance}set appearance(e){const i=this._appearance;this._appearance=e||this._defaults?.appearance||"legacy","outline"===this._appearance&&i!==e&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=gn(e)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(e){this._explicitFormFieldControl=e}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${e.controlType}`),e.stateChanges.pipe(yr(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(sr(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(sr(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,fs.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(yr(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(yr(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(sr(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(e){const i=this._control?this._control.ngControl:null;return i&&i[e]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,dp(this._label.nativeElement,"transitionend").pipe(ni(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const i=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,r=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;i?e.push(i.id):this._hintLabel&&e.push(this._hintLabelId),r&&e.push(r.id)}else this._errorChildren&&e.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(e)}}_validateControlChild(){}updateOutlineGap(){const e=this._label?this._label.nativeElement:null,i=this._connectionContainerRef.nativeElement,r=".mat-form-field-outline-start",s=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!e||!e.children.length||!e.textContent.trim()){const w=i.querySelectorAll(`${r}, ${s}`);for(let I=0;I<w.length;I++)w[I].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let c=0,d=0;const p=i.querySelectorAll(r),_=i.querySelectorAll(s);if(this._label&&this._label.nativeElement.children.length){const w=i.getBoundingClientRect();if(0===w.width&&0===w.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const I=this._getStartEnd(w),M=e.children,O=this._getStartEnd(M[0].getBoundingClientRect());let N=0;for(let z=0;z<M.length;z++)N+=M[z].offsetWidth;c=Math.abs(O-I)-5,d=N>0?.75*N+10:0}for(let w=0;w<p.length;w++)p[w].style.width=`${c}px`;for(let w=0;w<_.length;w++)_[w].style.width=`${d}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(e){return this._dir&&"rtl"===this._dir.value?e.right:e.left}_isAttachedToDOM(){const e=this._elementRef.nativeElement;if(e.getRootNode){const i=e.getRootNode();return i&&i!==e}return document.documentElement.contains(e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.sBO),l.Y36(Bo,8),l.Y36(qV,8),l.Y36(ti),l.Y36(l.R0b),l.Y36(l.QbO,8))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-form-field"]],contentQueries:function(e,i,r){if(1&e&&(l.Suo(r,qg,5),l.Suo(r,qg,7),l.Suo(r,wh,5),l.Suo(r,wh,7),l.Suo(r,nR,5),l.Suo(r,Ob,5),l.Suo(r,Nb,5),l.Suo(r,iR,5),l.Suo(r,Fb,5)),2&e){let s;l.iGM(s=l.CRH())&&(i._controlNonStatic=s.first),l.iGM(s=l.CRH())&&(i._controlStatic=s.first),l.iGM(s=l.CRH())&&(i._labelChildNonStatic=s.first),l.iGM(s=l.CRH())&&(i._labelChildStatic=s.first),l.iGM(s=l.CRH())&&(i._placeholderChild=s.first),l.iGM(s=l.CRH())&&(i._errorChildren=s),l.iGM(s=l.CRH())&&(i._hintChildren=s),l.iGM(s=l.CRH())&&(i._prefixChildren=s),l.iGM(s=l.CRH())&&(i._suffixChildren=s)}},viewQuery:function(e,i){if(1&e&&(l.Gf(qx,7),l.Gf(Wx,5),l.Gf(Yx,5)),2&e){let r;l.iGM(r=l.CRH())&&(i._connectionContainerRef=r.first),l.iGM(r=l.CRH())&&(i._inputContainerRef=r.first),l.iGM(r=l.CRH())&&(i._label=r.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(e,i){2&e&&l.ekj("mat-form-field-appearance-standard","standard"==i.appearance)("mat-form-field-appearance-fill","fill"==i.appearance)("mat-form-field-appearance-outline","outline"==i.appearance)("mat-form-field-appearance-legacy","legacy"==i.appearance)("mat-form-field-invalid",i._control.errorState)("mat-form-field-can-float",i._canLabelFloat())("mat-form-field-should-float",i._shouldLabelFloat())("mat-form-field-has-label",i._hasFloatingLabel())("mat-form-field-hide-placeholder",i._hideControlPlaceholder())("mat-form-field-disabled",i._control.disabled)("mat-form-field-autofilled",i._control.autofilled)("mat-focused",i._control.focused)("ng-untouched",i._shouldForward("untouched"))("ng-touched",i._shouldForward("touched"))("ng-pristine",i._shouldForward("pristine"))("ng-dirty",i._shouldForward("dirty"))("ng-valid",i._shouldForward("valid"))("ng-invalid",i._shouldForward("invalid"))("ng-pending",i._shouldForward("pending"))("_mat-animation-noopable",!i._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[l._Bn([{provide:Wg,useExisting:n}]),l.qOj],ngContentSelectors:HV,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(e,i){1&e&&(l.F$t(Xx),l.TgZ(0,"div",0)(1,"div",1,2),l.NdJ("click",function(s){return i._control.onContainerClick&&i._control.onContainerClick(s)}),l.YNc(3,Mb,9,0,"ng-container",3),l.YNc(4,kb,2,1,"div",4),l.TgZ(5,"div",5,6),l.Hsn(7),l.TgZ(8,"span",7),l.YNc(9,Kx,5,16,"label",8),l.qZA()(),l.YNc(10,Rb,2,0,"div",9),l.qZA(),l.YNc(11,Qx,2,4,"div",10),l.TgZ(12,"div",11),l.YNc(13,pI,2,1,"div",12),l.YNc(14,mI,5,2,"div",13),l.qZA()()),2&e&&(l.xp6(3),l.Q6J("ngIf","outline"==i.appearance),l.xp6(1),l.Q6J("ngIf",i._prefixChildren.length),l.xp6(5),l.Q6J("ngIf",i._hasFloatingLabel()),l.xp6(1),l.Q6J("ngIf",i._suffixChildren.length),l.xp6(1),l.Q6J("ngIf","outline"!=i.appearance),l.xp6(1),l.Q6J("ngSwitch",i._getDisplayedMessages()),l.xp6(1),l.Q6J("ngSwitchCase","error"),l.xp6(1),l.Q6J("ngSwitchCase","hint"))},dependencies:[bn,Es,la,Oy],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}','.mat-input-element{font:inherit;background:rgba(0,0,0,0);color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}._mat-animation-noopable .mat-input-element::placeholder{transition:none}._mat-animation-noopable .mat-input-element::-moz-placeholder{transition:none}._mat-animation-noopable .mat-input-element::-webkit-input-placeholder{transition:none}._mat-animation-noopable .mat-input-element:-ms-input-placeholder{transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:rgba(0,0,0,0)}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}"],encapsulation:2,data:{animation:[Pb.transitionMessages]},changeDetection:0}),n})(),Vb=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[ma,fi,Fc,fi]}),n})();const bI=new l.OlP("MAT_INPUT_VALUE_ACCESSOR"),oR=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let aR=0;const lR=ME(class{constructor(n,t,e,i){this._defaultErrorStateMatcher=n,this._parentForm=t,this._parentFormGroup=e,this.ngControl=i,this.stateChanges=new St.x}});let Zg=(()=>{class n extends lR{constructor(e,i,r,s,c,d,p,_,w,I){super(d,s,c,r),this._elementRef=e,this._platform=i,this._autofillMonitor=_,this._formField=I,this._uid="mat-input-"+aR++,this.focused=!1,this.stateChanges=new St.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(N=>us().has(N)),this._iOSKeyupListener=N=>{const z=N.target;!z.value&&0===z.selectionStart&&0===z.selectionEnd&&(z.setSelectionRange(1,1),z.setSelectionRange(0,0))};const M=this._elementRef.nativeElement,O=M.nodeName.toLowerCase();this._inputValueAccessor=p||M,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&w.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===O,this._isTextarea="textarea"===O,this._isInFormField=!!I,this._isNativeSelect&&(this.controlType=M.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(e){this._disabled=gn(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(Xi.required)??!1}set required(e){this._required=gn(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&us().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=gn(e)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}_focusChanged(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){const e=this._formField,i=e&&"legacy"===e.appearance&&!e._hasLabel?.()?null:this.placeholder;if(i!==this._previousPlaceholder){const r=this._elementRef.nativeElement;this._previousPlaceholder=i,i?r.setAttribute("placeholder",i):r.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_validateType(){oR.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const e=this._elementRef.nativeElement,i=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&i&&i.label)}return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(ti),l.Y36(qa,10),l.Y36($g,8),l.Y36(Yu,8),l.Y36(PE),l.Y36(bI,10),l.Y36(ED),l.Y36(l.R0b),l.Y36(Wg,8))},n.\u0275dir=l.lG2({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(e,i){1&e&&l.NdJ("focus",function(){return i._focusChanged(!0)})("blur",function(){return i._focusChanged(!1)})("input",function(){return i._onInput()}),2&e&&(l.Ikx("disabled",i.disabled)("required",i.required),l.uIk("id",i.id)("data-placeholder",i.placeholder)("name",i.name||null)("readonly",i.readonly&&!i._isNativeSelect||null)("aria-invalid",i.empty&&i.required?null:i.errorState)("aria-required",i.required),l.ekj("mat-input-server",i._isServer)("mat-native-select-inline",i._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[l._Bn([{provide:qg,useExisting:n}]),l.qOj,l.TTD]}),n})(),cR=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[PE],imports:[Lv,Vb,fi,Lv,Vb]}),n})();function Ch(n,t){const e=(0,Ka.m)(n)?n:()=>n,i=r=>r.error(e());return new Zi.y(t?r=>t.schedule(i,0,r):i)}function Xl(n){return(0,_i.e)((t,e)=>{let s,i=null,r=!1;i=t.subscribe((0,Zn.x)(e,void 0,void 0,c=>{s=(0,Hl.Xf)(n(c,Xl(n)(t))),i?(i.unsubscribe(),i=null,s.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(e))})}function zc(n){return(0,_i.e)((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}var Kg=L(3099);function Jl(n,t){return(0,Ka.m)(t)?(0,br.z)(n,t,1):(0,br.z)(n,1)}class Bb{}class Ub{}class Qa{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const i=e.indexOf(":");if(i>0){const r=e.slice(0,i),s=r.toLowerCase(),c=e.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(c):this.headers.set(s,[c])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let i=t[e];const r=e.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Qa?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Qa;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Qa?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":const s=t.value;if(s){let c=this.headers.get(e);if(!c)return;c=c.filter(d=>-1===s.indexOf(d)),0===c.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,c)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class dR{encodeKey(t){return CI(t)}encodeValue(t){return CI(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const wI=/%(\d[a-f0-9])/gi,hR={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function CI(n){return encodeURIComponent(n).replace(wI,(t,e)=>hR[e]??t)}function Qg(n){return`${n}`}class qc{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new dR,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function WV(n,t){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[c,d]=-1==s?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,s)),t.decodeValue(r.slice(s+1))],p=e.get(c)||[];p.push(d),e.set(c,p)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const i=t.fromObject[e],r=Array.isArray(i)?i.map(Qg):[Qg(i)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(i=>{const r=t[i];Array.isArray(r)?r.forEach(s=>{e.push({param:i,value:s,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new qc({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(Qg(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let i=this.map.get(t.param)||[];const r=i.indexOf(Qg(t.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class fR{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function Yo(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function EI(n){return typeof Blob<"u"&&n instanceof Blob}function hp(n){return typeof FormData<"u"&&n instanceof FormData}class pp{constructor(t,e,i,r){let s;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function Hb(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Qa),this.context||(this.context=new fR),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=e;else{const d=e.indexOf("?");this.urlWithParams=e+(-1===d?"?":d<e.length-1?"&":"")+c}}else this.params=new qc,this.urlWithParams=e}serializeBody(){return null===this.body?null:Yo(this.body)||EI(this.body)||hp(this.body)||function fp(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof qc?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||hp(this.body)?null:EI(this.body)?this.body.type||null:Yo(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof qc?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,s=void 0!==t.body?t.body:this.body,c=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,d=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let p=t.headers||this.headers,_=t.params||this.params;const w=t.context??this.context;return void 0!==t.setHeaders&&(p=Object.keys(t.setHeaders).reduce((I,M)=>I.set(M,t.setHeaders[M]),p)),t.setParams&&(_=Object.keys(t.setParams).reduce((I,M)=>I.set(M,t.setParams[M]),_)),new pp(e,i,s,{params:_,headers:p,context:w,reportProgress:d,responseType:r,withCredentials:c})}}var Hi=(()=>((Hi=Hi||{})[Hi.Sent=0]="Sent",Hi[Hi.UploadProgress=1]="UploadProgress",Hi[Hi.ResponseHeader=2]="ResponseHeader",Hi[Hi.DownloadProgress=3]="DownloadProgress",Hi[Hi.Response=4]="Response",Hi[Hi.User=5]="User",Hi))();class jb{constructor(t,e=200,i="OK"){this.headers=t.headers||new Qa,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class Eh extends jb{constructor(t={}){super(t),this.type=Hi.ResponseHeader}clone(t={}){return new Eh({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Xu extends jb{constructor(t={}){super(t),this.type=Hi.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Xu({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class DI extends jb{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function $b(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Jg=(()=>{class n{constructor(e){this.handler=e}request(e,i,r={}){let s;if(e instanceof pp)s=e;else{let p,_;p=r.headers instanceof Qa?r.headers:new Qa(r.headers),r.params&&(_=r.params instanceof qc?r.params:new qc({fromObject:r.params})),s=new pp(e,i,void 0!==r.body?r.body:null,{headers:p,context:r.context,params:_,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const c=et(s).pipe(Jl(p=>this.handler.handle(p)));if(e instanceof pp||"events"===r.observe)return c;const d=c.pipe(yi(p=>p instanceof Xu));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return d.pipe((0,ct.U)(p=>{if(null!==p.body&&!(p.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return p.body}));case"blob":return d.pipe((0,ct.U)(p=>{if(null!==p.body&&!(p.body instanceof Blob))throw new Error("Response is not a Blob.");return p.body}));case"text":return d.pipe((0,ct.U)(p=>{if(null!==p.body&&"string"!=typeof p.body)throw new Error("Response is not a string.");return p.body}));default:return d.pipe((0,ct.U)(p=>p.body))}case"response":return d;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:(new qc).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,$b(r,i))}post(e,i,r={}){return this.request("POST",e,$b(r,i))}put(e,i,r={}){return this.request("PUT",e,$b(r,i))}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Bb))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class Gb{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const e_=new l.OlP("HTTP_INTERCEPTORS");let II=(()=>{class n{intercept(e,i){return i.handle(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const mR=/^\)\]\}',?\n/;let kI=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Zi.y(i=>{const r=this.xhrFactory.build();if(r.open(e.method,e.urlWithParams),e.withCredentials&&(r.withCredentials=!0),e.headers.forEach((O,N)=>r.setRequestHeader(O,N.join(","))),e.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const O=e.detectContentTypeHeader();null!==O&&r.setRequestHeader("Content-Type",O)}if(e.responseType){const O=e.responseType.toLowerCase();r.responseType="json"!==O?O:"text"}const s=e.serializeBody();let c=null;const d=()=>{if(null!==c)return c;const O=r.statusText||"OK",N=new Qa(r.getAllResponseHeaders()),z=function gR(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(r)||e.url;return c=new Eh({headers:N,status:r.status,statusText:O,url:z}),c},p=()=>{let{headers:O,status:N,statusText:z,url:ie}=d(),Me=null;204!==N&&(Me=typeof r.response>"u"?r.responseText:r.response),0===N&&(N=Me?200:0);let ze=N>=200&&N<300;if("json"===e.responseType&&"string"==typeof Me){const Xe=Me;Me=Me.replace(mR,"");try{Me=""!==Me?JSON.parse(Me):null}catch(Qe){Me=Xe,ze&&(ze=!1,Me={error:Qe,text:Me})}}ze?(i.next(new Xu({body:Me,headers:O,status:N,statusText:z,url:ie||void 0})),i.complete()):i.error(new DI({error:Me,headers:O,status:N,statusText:z,url:ie||void 0}))},_=O=>{const{url:N}=d(),z=new DI({error:O,status:r.status||0,statusText:r.statusText||"Unknown Error",url:N||void 0});i.error(z)};let w=!1;const I=O=>{w||(i.next(d()),w=!0);let N={type:Hi.DownloadProgress,loaded:O.loaded};O.lengthComputable&&(N.total=O.total),"text"===e.responseType&&!!r.responseText&&(N.partialText=r.responseText),i.next(N)},M=O=>{let N={type:Hi.UploadProgress,loaded:O.loaded};O.lengthComputable&&(N.total=O.total),i.next(N)};return r.addEventListener("load",p),r.addEventListener("error",_),r.addEventListener("timeout",_),r.addEventListener("abort",_),e.reportProgress&&(r.addEventListener("progress",I),null!==s&&r.upload&&r.upload.addEventListener("progress",M)),r.send(s),i.next({type:Hi.Sent}),()=>{r.removeEventListener("error",_),r.removeEventListener("abort",_),r.removeEventListener("load",p),r.removeEventListener("timeout",_),e.reportProgress&&(r.removeEventListener("progress",I),null!==s&&r.upload&&r.upload.removeEventListener("progress",M)),r.readyState!==r.DONE&&r.abort()}})}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ko))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const t_=new l.OlP("XSRF_COOKIE_NAME"),mp=new l.OlP("XSRF_HEADER_NAME");class zb{}let xI=(()=>{class n{constructor(e,i,r){this.doc=e,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=hc(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ae),l.LFG(l.Lbi),l.LFG(t_))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),n_=(()=>{class n{constructor(e,i){this.tokenService=e,this.headerName=i}intercept(e,i){const r=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||r.startsWith("http://")||r.startsWith("https://"))return i.handle(e);const s=this.tokenService.getToken();return null!==s&&!e.headers.has(this.headerName)&&(e=e.clone({headers:e.headers.set(this.headerName,s)})),i.handle(e)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(zb),l.LFG(mp))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),RI=(()=>{class n{constructor(e,i){this.backend=e,this.injector=i,this.chain=null}handle(e){if(null===this.chain){const i=this.injector.get(e_,[]);this.chain=i.reduceRight((r,s)=>new Gb(r,s),this.backend)}return this.chain.handle(e)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Ub),l.LFG(l.zs3))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),OI=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:n_,useClass:II}]}}static withOptions(e={}){return{ngModule:n,providers:[e.cookieName?{provide:t_,useValue:e.cookieName}:[],e.headerName?{provide:mp,useValue:e.headerName}:[]]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[n_,{provide:e_,useExisting:n_,multi:!0},{provide:zb,useClass:xI},{provide:t_,useValue:"XSRF-TOKEN"},{provide:mp,useValue:"X-XSRF-TOKEN"}]}),n})(),yR=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[Jg,{provide:Bb,useClass:RI},kI,{provide:Ub,useExisting:kI}],imports:[OI.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})();const Yr=["*"];let ec;function gp(n){return function wR(){if(void 0===ec&&(ec=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(ec=n.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return ec}()?.createHTML(n)||n}function CR(n){return Error(`Unable to find icon with the name "${n}"`)}function qb(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function Wb(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class Zo{constructor(t,e,i){this.url=t,this.svgText=e,this.options=i}}let _p=(()=>{class n{constructor(e,i,r,s){this._httpClient=e,this._sanitizer=i,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(e,i,r){return this.addSvgIconInNamespace("",e,i,r)}addSvgIconLiteral(e,i,r){return this.addSvgIconLiteralInNamespace("",e,i,r)}addSvgIconInNamespace(e,i,r,s){return this._addSvgIconConfig(e,i,new Zo(r,null,s))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,i,r,s){const c=this._sanitizer.sanitize(l.q3G.HTML,r);if(!c)throw Wb(r);const d=gp(c);return this._addSvgIconConfig(e,i,new Zo("",d,s))}addSvgIconSet(e,i){return this.addSvgIconSetInNamespace("",e,i)}addSvgIconSetLiteral(e,i){return this.addSvgIconSetLiteralInNamespace("",e,i)}addSvgIconSetInNamespace(e,i,r){return this._addSvgIconSetConfig(e,new Zo(i,null,r))}addSvgIconSetLiteralInNamespace(e,i,r){const s=this._sanitizer.sanitize(l.q3G.HTML,i);if(!s)throw Wb(i);const c=gp(s);return this._addSvgIconSetConfig(e,new Zo("",c,r))}registerFontClassAlias(e,i=e){return this._fontCssClassesByAlias.set(e,i),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const i=this._sanitizer.sanitize(l.q3G.RESOURCE_URL,e);if(!i)throw qb(e);const r=this._cachedIconsByUrl.get(i);return r?et(yp(r)):this._loadSvgIconFromConfig(new Zo(e,null)).pipe((0,Yn.b)(s=>this._cachedIconsByUrl.set(i,s)),(0,ct.U)(s=>yp(s)))}getNamedSvgIcon(e,i=""){const r=PI(i,e);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,e),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const c=this._iconSetConfigs.get(i);return c?this._getSvgFromIconSetConfigs(e,c):Ch(CR(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?et(yp(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe((0,ct.U)(i=>yp(i)))}_getSvgFromIconSetConfigs(e,i){const r=this._extractIconWithNameFromAnySet(e,i);return r?et(r):Vv(i.filter(c=>!c.svgText).map(c=>this._loadSvgIconSetFromConfig(c).pipe(Xl(d=>{const _=`Loading icon set URL: ${this._sanitizer.sanitize(l.q3G.RESOURCE_URL,c.url)} failed: ${d.message}`;return this._errorHandler.handleError(new Error(_)),et(null)})))).pipe((0,ct.U)(()=>{const c=this._extractIconWithNameFromAnySet(e,i);if(!c)throw CR(e);return c}))}_extractIconWithNameFromAnySet(e,i){for(let r=i.length-1;r>=0;r--){const s=i[r];if(s.svgText&&s.svgText.toString().indexOf(e)>-1){const c=this._svgElementFromConfig(s),d=this._extractSvgIconFromSet(c,e,s.options);if(d)return d}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe((0,Yn.b)(i=>e.svgText=i),(0,ct.U)(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?et(null):this._fetchIcon(e).pipe((0,Yn.b)(i=>e.svgText=i))}_extractSvgIconFromSet(e,i,r){const s=e.querySelector(`[id="${i}"]`);if(!s)return null;const c=s.cloneNode(!0);if(c.removeAttribute("id"),"svg"===c.nodeName.toLowerCase())return this._setSvgAttributes(c,r);if("symbol"===c.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(c),r);const d=this._svgElementFromString(gp("<svg></svg>"));return d.appendChild(c),this._setSvgAttributes(d,r)}_svgElementFromString(e){const i=this._document.createElement("DIV");i.innerHTML=e;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(e){const i=this._svgElementFromString(gp("<svg></svg>")),r=e.attributes;for(let s=0;s<r.length;s++){const{name:c,value:d}=r[s];"id"!==c&&i.setAttribute(c,d)}for(let s=0;s<e.childNodes.length;s++)e.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(e.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(e,i){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),i&&i.viewBox&&e.setAttribute("viewBox",i.viewBox),e}_fetchIcon(e){const{url:i,options:r}=e,s=r?.withCredentials??!1;if(!this._httpClient)throw function XV(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const c=this._sanitizer.sanitize(l.q3G.RESOURCE_URL,i);if(!c)throw qb(i);const d=this._inProgressUrlFetches.get(c);if(d)return d;const p=this._httpClient.get(c,{responseType:"text",withCredentials:s}).pipe((0,ct.U)(_=>gp(_)),zc(()=>this._inProgressUrlFetches.delete(c)),(0,Kg.B)());return this._inProgressUrlFetches.set(c,p),p}_addSvgIconConfig(e,i,r){return this._svgIconConfigs.set(PI(e,i),r),this}_addSvgIconSetConfig(e,i){const r=this._iconSetConfigs.get(e);return r?r.push(i):this._iconSetConfigs.set(e,[i]),this}_svgElementFromConfig(e){if(!e.svgElement){const i=this._svgElementFromString(e.svgText);this._setSvgAttributes(i,e.options),e.svgElement=i}return e.svgElement}_getIconConfigFromResolvers(e,i){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](i,e);if(s)return ER(s)?new Zo(s.url,null,s.options):new Zo(s,null)}}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Jg,8),l.LFG(to),l.LFG(ae,8),l.LFG(l.qLn))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function yp(n){return n.cloneNode(!0)}function PI(n,t){return n+":"+t}function ER(n){return!(!n.url||!n.options)}const DR=th(class{constructor(n){this._elementRef=n}}),Zb=new l.OlP("MAT_ICON_DEFAULT_OPTIONS"),NI=new l.OlP("mat-icon-location",{providedIn:"root",factory:function FI(){const n=(0,l.f3M)(ae),t=n?n.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),vp=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Kb=vp.map(n=>`[${n}]`).join(", "),eB=/^url\(['"]?#(.*?)['"]?\)$/;let Dh=(()=>{class n extends DR{constructor(e,i,r,s,c,d){super(e),this._iconRegistry=i,this._location=s,this._errorHandler=c,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=Sn.w0.EMPTY,d&&(d.color&&(this.color=this.defaultColor=d.color),d.fontSet&&(this.fontSet=d.fontSet)),r||e.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(e){this._inline=gn(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const i=this._cleanupFontValue(e);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const i=this._cleanupFontValue(e);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_splitIconName(e){if(!e)return["",""];const i=e.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let i=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=e.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>e.classList.remove(r)),i.forEach(r=>e.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const i=this._elementsWithExternalReferences;i&&i.forEach((r,s)=>{r.forEach(c=>{s.setAttribute(c.name,`url('${e}#${c.value}')`)})})}_cacheChildrenWithExternalReferences(e){const i=e.querySelectorAll(Kb),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)vp.forEach(c=>{const d=i[s],p=d.getAttribute(c),_=p?p.match(eB):null;if(_){let w=r.get(d);w||(w=[],r.set(d,w)),w.push({name:c,value:_[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[i,r]=this._splitIconName(e);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(ni(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${s.message}`))})}}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(_p),l.$8M("aria-hidden"),l.Y36(NI),l.Y36(l.qLn),l.Y36(Zb,8))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(e,i){2&e&&(l.uIk("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet),l.ekj("mat-icon-inline",i.inline)("mat-icon-no-color","primary"!==i.color&&"accent"!==i.color&&"warn"!==i.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[l.qOj],ngContentSelectors:Yr,decls:1,vars:0,template:function(e,i){1&e&&(l.F$t(),l.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),n})(),IR=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[fi,fi]}),n})();var Qb=L(4408);const Xa={schedule(n){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:i}=Xa;i&&(t=i.requestAnimationFrame,e=i.cancelAnimationFrame);const r=t(s=>{e=void 0,n(s)});return new Sn.w0(()=>e?.(r))},requestAnimationFrame(...n){const{delegate:t}=Xa;return(t?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:t}=Xa;return(t?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var Xb=L(7565);new class Jb extends Xb.v{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;t=t||i.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=i[0])&&t.id===e&&i.shift());if(this._active=!1,r){for(;(t=i[0])&&t.id===e&&i.shift();)t.unsubscribe();throw r}}}(class SR extends Qb.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=Xa.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(t,e,i);t.actions.some(r=>r.id===e)||(Xa.cancelAnimationFrame(e),t._scheduled=void 0)}});let ew,iB=1;const i_={};function LI(n){return n in i_&&(delete i_[n],!0)}const VI={setImmediate(n){const t=iB++;return i_[t]=!0,ew||(ew=Promise.resolve()),ew.then(()=>LI(t)&&n()),t},clearImmediate(n){LI(n)}},{setImmediate:AR,clearImmediate:BI}=VI,bp={setImmediate(...n){const{delegate:t}=bp;return(t?.setImmediate||AR)(...n)},clearImmediate(n){const{delegate:t}=bp;return(t?.clearImmediate||BI)(n)},delegate:void 0},r_=new class kR extends Xb.v{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;t=t||i.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=i[0])&&t.id===e&&i.shift());if(this._active=!1,r){for(;(t=i[0])&&t.id===e&&i.shift();)t.unsubscribe();throw r}}}(class MR extends Qb.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=bp.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(t,e,i);t.actions.some(r=>r.id===e)||(bp.clearImmediate(e),t._scheduled=void 0)}});var HI=L(3532);function tw(n=0,t,e=Nc.P){let i=-1;return null!=t&&((0,HI.K)(t)?e=t:i=t),new Zi.y(r=>{let s=function jI(n){return n instanceof Date&&!isNaN(n)}(n)?+n-e.now():n;s<0&&(s=0);let c=0;return e.schedule(function(){r.closed||(r.next(c++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function $I(n,t=Nc.z){return function UI(n){return(0,_i.e)((t,e)=>{let i=!1,r=null,s=null,c=!1;const d=()=>{if(s?.unsubscribe(),s=null,i){i=!1;const _=r;r=null,e.next(_)}c&&e.complete()},p=()=>{s=null,c&&e.complete()};t.subscribe((0,Zn.x)(e,_=>{i=!0,r=_,s||(0,Hl.Xf)(n(_)).subscribe(s=(0,Zn.x)(e,d,p))},()=>{c=!0,(!i||!s||s.closed)&&e.complete()}))})}(()=>tw(n,t))}let aB=(()=>{class n{constructor(e,i,r){this._ngZone=e,this._platform=i,this._scrolled=new St.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const i=this.scrollContainers.get(e);i&&(i.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new Zi.y(i=>{this._globalSubscription||this._addGlobalListener();const r=e>0?this._scrolled.pipe($I(e)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):et()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(e,i){const r=this.getAncestorScrollContainers(e);return this.scrolled(i).pipe(yi(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(e){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,e)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,i){let r=qr(i),s=e.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>dp(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(l.R0b),l.LFG(ti),l.LFG(ae,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),GI=(()=>{class n{constructor(e,i,r){this._platform=e,this._change=new St.x,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(e.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,i=this._getWindow(),r=e.documentElement,s=r.getBoundingClientRect();return{top:-s.top||e.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||e.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(e=20){return e>0?this._change.pipe($I(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ti),l.LFG(l.R0b),l.LFG(ae,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),wp=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})(),rw=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Lf,wp,Lf,wp]}),n})();class qI{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class s_ extends qI{constructor(t,e,i,r){super(),this.component=t,this.viewContainerRef=e,this.injector=i,this.componentFactoryResolver=r}}class ow extends qI{constructor(t,e,i,r){super(),this.templateRef=t,this.viewContainerRef=e,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class FR extends qI{constructor(t){super(),this.element=t instanceof l.SBq?t.nativeElement:t}}class aw{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof s_?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof ow?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof FR?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class pB extends aw{constructor(t,e,i,r,s){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=c=>{const d=c.element,p=this._document.createComment("dom-portal");d.parentNode.insertBefore(p,d),this.outletElement.appendChild(d),this._attachedPortal=c,super.setDisposeFn(()=>{p.parentNode&&p.parentNode.replaceChild(d,p)})},this._document=s}attachComponentPortal(t){const i=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let r;return t.viewContainerRef?(r=t.viewContainerRef.createComponent(i,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>r.destroy())):(r=i.create(t.injector||this._defaultInjector||l.zs3.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=t,r}attachTemplatePortal(t){let e=t.viewContainerRef,i=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(i);-1!==r&&e.remove(r)}),this._attachedPortal=t,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let lw=(()=>{class n extends aw{constructor(e,i,r){super(),this._componentFactoryResolver=e,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new l.vpe,this.attachDomPortal=s=>{const c=s.element,d=this._document.createComment("dom-portal");s.setAttachedHost(this),c.parentNode.insertBefore(d,c),this._getRootNode().appendChild(c),this._attachedPortal=s,super.setDisposeFn(()=>{d.parentNode&&d.parentNode.replaceChild(c,d)})},this._document=r}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(e){e.setAttachedHost(this);const i=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,s=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),c=i.createComponent(s,i.length,e.injector||i.injector);return i!==this._viewContainerRef&&this._getRootNode().appendChild(c.hostView.rootNodes[0]),super.setDisposeFn(()=>c.destroy()),this._attachedPortal=e,this._attachedRef=c,this.attached.emit(c),c}attachTemplatePortal(e){e.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l._Vd),l.Y36(l.s_b),l.Y36(ae))},n.\u0275dir=l.lG2({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[l.qOj]}),n})(),cw=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();function YI(n,t=!1){return(0,_i.e)((e,i)=>{let r=0;e.subscribe((0,Zn.x)(i,s=>{const c=n(s,r++);(c||t)&&i.next(s),!c&&i.complete()}))})}const Ls=If();class BR{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=hi(-this._previousScrollPosition.left),t.style.top=hi(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,i=t.style,r=this._document.body.style,s=i.scrollBehavior||"",c=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),Ls&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Ls&&(i.scrollBehavior=s,r.scrollBehavior=c)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,i=this._viewportRuler.getViewportSize();return e.scrollHeight>i.height||e.scrollWidth>i.width}}class UR{constructor(t,e,i,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class KI{enable(){}disable(){}attach(){}}function Cp(n,t){return t.some(e=>n.bottom<e.top||n.top>e.bottom||n.right<e.left||n.left>e.right)}function uw(n,t){return t.some(e=>n.top<e.top||n.bottom>e.bottom||n.left<e.left||n.right>e.right)}class QI{constructor(t,e,i,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();Cp(e,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let HR=(()=>{class n{constructor(e,i,r,s){this._scrollDispatcher=e,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new KI,this.close=c=>new UR(this._scrollDispatcher,this._ngZone,this._viewportRuler,c),this.block=()=>new BR(this._viewportRuler,this._document),this.reposition=c=>new QI(this._scrollDispatcher,this._viewportRuler,this._ngZone,c),this._document=s}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(aB),l.LFG(GI),l.LFG(l.R0b),l.LFG(ae))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Ih{constructor(t){if(this.scrollStrategy=new KI,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const i of e)void 0!==t[i]&&(this[i]=t[i])}}}class XI{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let tc=(()=>{class n{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const i=this._attachedOverlays.indexOf(e);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ae))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),eS=(()=>{class n extends tc{constructor(e,i){super(e),this._ngZone=i,this._keydownListener=r=>{const s=this._attachedOverlays;for(let c=s.length-1;c>-1;c--)if(s[c]._keydownEvents.observers.length>0){const d=s[c]._keydownEvents;this._ngZone?this._ngZone.run(()=>d.next(r)):d.next(r);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ae),l.LFG(l.R0b,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),dw=(()=>{class n extends tc{constructor(e,i,r){super(e),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Li(s)},this._clickListener=s=>{const c=Li(s),d="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:c;this._pointerDownEventTarget=null;const p=this._attachedOverlays.slice();for(let _=p.length-1;_>-1;_--){const w=p[_];if(w._outsidePointerEvents.observers.length<1||!w.hasAttached())continue;if(w.overlayElement.contains(c)||w.overlayElement.contains(d))break;const I=w._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>I.next(s)):I.next(s)}}}add(e){if(super.add(e),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ae),l.LFG(ti),l.LFG(l.R0b,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),el=(()=>{class n{constructor(e,i){this._platform=i,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||Ol()){const r=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(e),Ol()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ae),l.LFG(ti))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class $R{constructor(t,e,i,r,s,c,d,p,_,w=!1){this._portalOutlet=t,this._host=e,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=c,this._document=d,this._location=p,this._outsideClickDispatcher=_,this._animationsDisabled=w,this._backdropElement=null,this._backdropClick=new St.x,this._attachments=new St.x,this._detachments=new St.x,this._locationChanges=Sn.w0.EMPTY,this._backdropClickHandler=I=>this._backdropClick.next(I),this._backdropTransitionendHandler=I=>{this._disposeBackdrop(I.target)},this._keydownEvents=new St.x,this._outsidePointerEvents=new St.x,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(ni(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof e?.onDestroy&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config={...this._config,...t},this._updateElementSize()}setDirection(t){this._config={...this._config,direction:t},this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=hi(this._config.width),t.height=hi(this._config.height),t.minWidth=hi(this._config.minWidth),t.minHeight=hi(this._config.minHeight),t.maxWidth=hi(this._config.maxWidth),t.maxHeight=hi(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;if(t){if(this._animationsDisabled)return void this._disposeBackdrop(t);t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,i){const r=Qd(e||[]).filter(s=>!!s);r.length&&(i?t.classList.add(...r):t.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(sr((0,fs.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const GR="cdk-overlay-connected-position-bounding-box",zR=/([A-Za-z%]+)$/;class tS{constructor(t,e,i,r,s){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new St.x,this._resizeSubscription=Sn.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(GR),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._originRect,e=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let c;for(let d of this._preferredPositions){let p=this._getOriginPoint(t,r,d),_=this._getOverlayPoint(p,e,d),w=this._getOverlayFit(_,e,i,d);if(w.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(d,p);this._canFitWithFlexibleDimensions(w,_,i)?s.push({position:d,origin:p,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(p,d)}):(!c||c.overlayFit.visibleArea<w.visibleArea)&&(c={overlayFit:w,overlayPoint:_,originPoint:p,position:d,overlayRect:e})}if(s.length){let d=null,p=-1;for(const _ of s){const w=_.boundingBoxRect.width*_.boundingBoxRect.height*(_.position.weight||1);w>p&&(p=w,d=_)}return this._isPushed=!1,void this._applyPosition(d.position,d.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(c.position,c.originPoint);this._applyPosition(c.position,c.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Ju(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(GR),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,i){let r,s;if("center"==i.originX)r=t.left+t.width/2;else{const c=this._isRtl()?t.right:t.left,d=this._isRtl()?t.left:t.right;r="start"==i.originX?c:d}return e.left<0&&(r-=e.left),s="center"==i.originY?t.top+t.height/2:"top"==i.originY?t.top:t.bottom,e.top<0&&(s-=e.top),{x:r,y:s}}_getOverlayPoint(t,e,i){let r,s;return r="center"==i.overlayX?-e.width/2:"start"===i.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,s="center"==i.overlayY?-e.height/2:"top"==i.overlayY?0:-e.height,{x:t.x+r,y:t.y+s}}_getOverlayFit(t,e,i,r){const s=hw(e);let{x:c,y:d}=t,p=this._getOffset(r,"x"),_=this._getOffset(r,"y");p&&(c+=p),_&&(d+=_);let M=0-d,O=d+s.height-i.height,N=this._subtractOverflows(s.width,0-c,c+s.width-i.width),z=this._subtractOverflows(s.height,M,O),ie=N*z;return{visibleArea:ie,isCompletelyWithinViewport:s.width*s.height===ie,fitsInViewportVertically:z===s.height,fitsInViewportHorizontally:N==s.width}}_canFitWithFlexibleDimensions(t,e,i){if(this._hasFlexibleDimensions){const r=i.bottom-e.y,s=i.right-e.x,c=nS(this._overlayRef.getConfig().minHeight),d=nS(this._overlayRef.getConfig().minWidth),_=t.fitsInViewportHorizontally||null!=d&&d<=s;return(t.fitsInViewportVertically||null!=c&&c<=r)&&_}return!1}_pushOverlayOnScreen(t,e,i){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const r=hw(e),s=this._viewportRect,c=Math.max(t.x+r.width-s.width,0),d=Math.max(t.y+r.height-s.height,0),p=Math.max(s.top-i.top-t.y,0),_=Math.max(s.left-i.left-t.x,0);let w=0,I=0;return w=r.width<=s.width?_||-c:t.x<this._viewportMargin?s.left-i.left-t.x:0,I=r.height<=s.height?p||-d:t.y<this._viewportMargin?s.top-i.top-t.y:0,this._previousPushAmount={x:w,y:I},{x:t.x+w,y:t.y+I}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new XI(t,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=t.overlayY;i="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let s=0;s<e.length;s++)e[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(t,e){const i=this._viewportRect,r=this._isRtl();let s,c,d,w,I,M;if("top"===e.overlayY)c=t.y,s=i.height-c+this._viewportMargin;else if("bottom"===e.overlayY)d=i.height-t.y+2*this._viewportMargin,s=i.height-d+this._viewportMargin;else{const O=Math.min(i.bottom-t.y+i.top,t.y),N=this._lastBoundingBoxSize.height;s=2*O,c=t.y-O,s>N&&!this._isInitialRender&&!this._growAfterOpen&&(c=t.y-N/2)}if("end"===e.overlayX&&!r||"start"===e.overlayX&&r)M=i.width-t.x+this._viewportMargin,w=t.x-this._viewportMargin;else if("start"===e.overlayX&&!r||"end"===e.overlayX&&r)I=t.x,w=i.right-t.x;else{const O=Math.min(i.right-t.x+i.left,t.x),N=this._lastBoundingBoxSize.width;w=2*O,I=t.x-O,w>N&&!this._isInitialRender&&!this._growAfterOpen&&(I=t.x-N/2)}return{top:c,left:I,bottom:d,right:M,width:w,height:s}}_setBoundingBoxStyles(t,e){const i=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,c=this._overlayRef.getConfig().maxWidth;r.height=hi(i.height),r.top=hi(i.top),r.bottom=hi(i.bottom),r.width=hi(i.width),r.left=hi(i.left),r.right=hi(i.right),r.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",r.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=hi(s)),c&&(r.maxWidth=hi(c))}this._lastBoundingBoxSize=i,Ju(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Ju(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Ju(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,c=this._overlayRef.getConfig();if(r){const w=this._viewportRuler.getViewportScrollPosition();Ju(i,this._getExactOverlayY(e,t,w)),Ju(i,this._getExactOverlayX(e,t,w))}else i.position="static";let d="",p=this._getOffset(e,"x"),_=this._getOffset(e,"y");p&&(d+=`translateX(${p}px) `),_&&(d+=`translateY(${_}px)`),i.transform=d.trim(),c.maxHeight&&(r?i.maxHeight=hi(c.maxHeight):s&&(i.maxHeight="")),c.maxWidth&&(r?i.maxWidth=hi(c.maxWidth):s&&(i.maxWidth="")),Ju(this._pane.style,i)}_getExactOverlayY(t,e,i){let r={top:"",bottom:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===t.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=hi(s.y),r}_getExactOverlayX(t,e,i){let c,r={left:"",right:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),c=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===c?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=hi(s.x),r}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:uw(t,i),isOriginOutsideView:Cp(t,i),isOverlayClipped:uw(e,i),isOverlayOutsideView:Cp(e,i)}}_subtractOverflows(t,...e){return e.reduce((i,r)=>i-Math.max(r,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+t-this._viewportMargin,bottom:i.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?t.offsetX??this._offsetX:t.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&Qd(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof l.SBq)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,i=t.height||0;return{top:t.y,bottom:t.y+i,left:t.x,right:t.x+e,height:i,width:e}}}function Ju(n,t){for(let e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function nS(n){if("number"!=typeof n&&null!=n){const[t,e]=n.split(zR);return e&&"px"!==e?null:parseFloat(t)}return n||null}function hw(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const iS="cdk-global-overlay-wrapper";class rS{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(iS),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:c,maxHeight:d}=i,p=!("100%"!==r&&"100vw"!==r||c&&"100%"!==c&&"100vw"!==c),_=!("100%"!==s&&"100vh"!==s||d&&"100%"!==d&&"100vh"!==d),w=this._xPosition,I=this._xOffset,M="rtl"===this._overlayRef.getConfig().direction;let O="",N="",z="";p?z="flex-start":"center"===w?(z="center",M?N=I:O=I):M?"left"===w||"end"===w?(z="flex-end",O=I):("right"===w||"start"===w)&&(z="flex-start",N=I):"left"===w||"start"===w?(z="flex-start",O=I):("right"===w||"end"===w)&&(z="flex-end",N=I),t.position=this._cssPosition,t.marginLeft=p?"0":O,t.marginTop=_?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=p?"0":N,e.justifyContent=z,e.alignItems=_?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,i=e.style;e.classList.remove(iS),i.justifyContent=i.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let yB=(()=>{class n{constructor(e,i,r,s){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new rS}flexibleConnectedTo(e){return new tS(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(GI),l.LFG(ae),l.LFG(ti),l.LFG(el))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),fw=0,Ko=(()=>{class n{constructor(e,i,r,s,c,d,p,_,w,I,M,O){this.scrollStrategies=e,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=c,this._injector=d,this._ngZone=p,this._document=_,this._directionality=w,this._location=I,this._outsideClickDispatcher=M,this._animationsModuleType=O}create(e){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),c=new Ih(e);return c.direction=c.direction||this._directionality.value,new $R(s,i,r,c,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(e){const i=this._document.createElement("div");return i.id="cdk-overlay-"+fw++,i.classList.add("cdk-overlay-pane"),e.appendChild(i),i}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(l.z2F)),new pB(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(HR),l.LFG(el),l.LFG(l._Vd),l.LFG(yB),l.LFG(eS),l.LFG(l.zs3),l.LFG(l.R0b),l.LFG(ae),l.LFG(Bo),l.LFG(Fe),l.LFG(dw),l.LFG(l.QbO,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const sS=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],pw=new l.OlP("cdk-connected-overlay-scroll-strategy");let mw=(()=>{class n{constructor(e){this.elementRef=e}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),n})(),gw=(()=>{class n{constructor(e,i,r,s,c){this._overlay=e,this._dir=c,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=Sn.w0.EMPTY,this._attachSubscription=Sn.w0.EMPTY,this._detachSubscription=Sn.w0.EMPTY,this._positionSubscription=Sn.w0.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new l.vpe,this.positionChange=new l.vpe,this.attach=new l.vpe,this.detach=new l.vpe,this.overlayKeydown=new l.vpe,this.overlayOutsideClick=new l.vpe,this._templatePortal=new ow(i,r),this._scrollStrategyFactory=s,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=gn(e)}get lockPosition(){return this._lockPosition}set lockPosition(e){this._lockPosition=gn(e)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(e){this._flexibleDimensions=gn(e)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(e){this._growAfterOpen=gn(e)}get push(){return this._push}set push(e){this._push=gn(e)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=sS);const e=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(i=>{this.overlayKeydown.next(i),27===i.keyCode&&!this.disableClose&&!Pc(i)&&(i.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(i=>{this.overlayOutsideClick.next(i)})}_buildConfig(){const e=this._position=this.positionStrategy||this._createPositionStrategy(),i=new Ih({direction:this._dir,positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(i.width=this.width),(this.height||0===this.height)&&(i.height=this.height),(this.minWidth||0===this.minWidth)&&(i.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(i.minHeight=this.minHeight),this.backdropClass&&(i.backdropClass=this.backdropClass),this.panelClass&&(i.panelClass=this.panelClass),i}_updatePositionStrategy(e){const i=this.positions.map(r=>({originX:r.originX,originY:r.originY,overlayX:r.overlayX,overlayY:r.overlayY,offsetX:r.offsetX||this.offsetX,offsetY:r.offsetY||this.offsetY,panelClass:r.panelClass||void 0}));return e.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(i).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const e=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(e),e}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof mw?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(YI(()=>this.positionChange.observers.length>0)).subscribe(e=>{this.positionChange.emit(e),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(Ko),l.Y36(l.Rgc),l.Y36(l.s_b),l.Y36(pw),l.Y36(Bo,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[l.TTD]}),n})();const a_={provide:pw,deps:[Ko],useFactory:function o_(n){return()=>n.scrollStrategies.reposition()}};let Ep=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[Ko,a_],imports:[Lf,cw,rw,rw]}),n})();function oS(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",2)(1,"button",3),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.action())}),l._uU(2),l.qZA()()}if(2&n){const e=l.oxw();l.xp6(2),l.Oqu(e.data.action)}}function aS(n,t){}const lS=new l.OlP("MatSnackBarData");class l_{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}const bB=Math.pow(2,31)-1;class cS{constructor(t,e){this._overlayRef=e,this._afterDismissed=new St.x,this._afterOpened=new St.x,this._onAction=new St.x,this._dismissedByAction=!1,this.containerInstance=t,t._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(t){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(t,bB))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}let uS=(()=>{class n{constructor(e,i){this.snackBarRef=e,this.data=i}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(cS),l.Y36(lS))},n.\u0275cmp=l.Xpm({type:n,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[[1,"mat-simple-snack-bar-content"],["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(e,i){1&e&&(l.TgZ(0,"span",0),l._uU(1),l.qZA(),l.YNc(2,oS,3,1,"div",1)),2&e&&(l.xp6(1),l.Oqu(i.data.message),l.xp6(1),l.Q6J("ngIf",i.hasAction))},dependencies:[bn,lo],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}.mat-simple-snack-bar-content{overflow:hidden;text-overflow:ellipsis}"],encapsulation:2,changeDetection:0}),n})();const WR={snackBarState:Pu("state",[co("void, hidden",pi({transform:"scale(0.8)",opacity:0})),co("visible",pi({transform:"scale(1)",opacity:1})),Ps("* => visible",Os("150ms cubic-bezier(0, 0, 0.2, 1)")),Ps("* => void, * => hidden",Os("75ms cubic-bezier(0.4, 0.0, 1, 1)",pi({opacity:0})))])};let YR=(()=>{class n extends aw{constructor(e,i,r,s,c){super(),this._ngZone=e,this._elementRef=i,this._changeDetectorRef=r,this._platform=s,this.snackBarConfig=c,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new St.x,this._onExit=new St.x,this._onEnter=new St.x,this._animationState="void",this.attachDomPortal=d=>{this._assertNotAttached();const p=this._portalOutlet.attachDomPortal(d);return this._afterPortalAttached(),p},this._live="assertive"!==c.politeness||c.announcementMessage?"off"===c.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(e){this._assertNotAttached();const i=this._portalOutlet.attachComponentPortal(e);return this._afterPortalAttached(),i}attachTemplatePortal(e){this._assertNotAttached();const i=this._portalOutlet.attachTemplatePortal(e);return this._afterPortalAttached(),i}onAnimationEnd(e){const{fromState:i,toState:r}=e;if(("void"===r&&"void"!==i||"hidden"===r)&&this._completeExit(),"visible"===r){const s=this._onEnter;this._ngZone.run(()=>{s.next(),s.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe(ni(1)).subscribe(()=>{this._ngZone.run(()=>{this._onExit.next(),this._onExit.complete()})})}_afterPortalAttached(){const e=this._elementRef.nativeElement,i=this.snackBarConfig.panelClass;i&&(Array.isArray(i)?i.forEach(r=>e.classList.add(r)):e.classList.add(i))}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const e=this._elementRef.nativeElement.querySelector("[aria-hidden]"),i=this._elementRef.nativeElement.querySelector("[aria-live]");if(e&&i){let r=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&e.contains(document.activeElement)&&(r=document.activeElement),e.removeAttribute("aria-hidden"),i.appendChild(e),r?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.R0b),l.Y36(l.SBq),l.Y36(l.sBO),l.Y36(ti),l.Y36(l_))},n.\u0275dir=l.lG2({type:n,viewQuery:function(e,i){if(1&e&&l.Gf(lw,7),2&e){let r;l.iGM(r=l.CRH())&&(i._portalOutlet=r.first)}},features:[l.qOj]}),n})(),ZR=(()=>{class n extends YR{_afterPortalAttached(){super._afterPortalAttached(),"center"===this.snackBarConfig.horizontalPosition&&this._elementRef.nativeElement.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&this._elementRef.nativeElement.classList.add("mat-snack-bar-top")}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=l.n5z(n)))(i||n)}}(),n.\u0275cmp=l.Xpm({type:n,selectors:[["snack-bar-container"]],hostAttrs:[1,"mat-snack-bar-container"],hostVars:1,hostBindings:function(e,i){1&e&&l.WFA("@state.done",function(s){return i.onAnimationEnd(s)}),2&e&&l.d8E("@state",i._animationState)},features:[l.qOj],decls:3,vars:2,consts:[["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(e,i){1&e&&(l.TgZ(0,"div",0),l.YNc(1,aS,0,0,"ng-template",1),l.qZA(),l._UZ(2,"div")),2&e&&(l.xp6(2),l.uIk("aria-live",i._live)("role",i._role))},dependencies:[lw],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}"],encapsulation:2,data:{animation:[WR.snackBarState]}}),n})(),KR=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Ep,cw,ma,Ky,fi,fi]}),n})();const QR=new l.OlP("mat-snack-bar-default-options",{providedIn:"root",factory:function wB(){return new l_}});let CB=(()=>{class n{constructor(e,i,r,s,c,d){this._overlay=e,this._live=i,this._injector=r,this._breakpointObserver=s,this._parentSnackBar=c,this._defaultConfig=d,this._snackBarRefAtThisLevel=null}get _openedSnackBarRef(){const e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}openFromComponent(e,i){return this._attach(e,i)}openFromTemplate(e,i){return this._attach(e,i)}open(e,i="",r){const s={...this._defaultConfig,...r};return s.data={message:e,action:i},s.announcementMessage===e&&(s.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,s)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(e,i){const s=l.zs3.create({parent:i&&i.viewContainerRef&&i.viewContainerRef.injector||this._injector,providers:[{provide:l_,useValue:i}]}),c=new s_(this.snackBarContainerComponent,i.viewContainerRef,s),d=e.attach(c);return d.instance.snackBarConfig=i,d.instance}_attach(e,i){const r={...new l_,...this._defaultConfig,...i},s=this._createOverlay(r),c=this._attachSnackBarContainer(s,r),d=new cS(c,s);if(e instanceof l.Rgc){const p=new ow(e,null,{$implicit:r.data,snackBarRef:d});d.instance=c.attachTemplatePortal(p)}else{const p=this._createInjector(r,d),_=new s_(e,void 0,p),w=c.attachComponentPortal(_);d.instance=w.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(sr(s.detachments())).subscribe(p=>{s.overlayElement.classList.toggle(this.handsetCssClass,p.matches)}),r.announcementMessage&&c._onAnnounce.subscribe(()=>{this._live.announce(r.announcementMessage,r.politeness)}),this._animateSnackBar(d,r),this._openedSnackBarRef=d,this._openedSnackBarRef}_animateSnackBar(e,i){e.afterDismissed().subscribe(()=>{this._openedSnackBarRef==e&&(this._openedSnackBarRef=null),i.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{e.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):e.containerInstance.enter(),i.duration&&i.duration>0&&e.afterOpened().subscribe(()=>e._dismissAfter(i.duration))}_createOverlay(e){const i=new Ih;i.direction=e.direction;let r=this._overlay.position().global();const s="rtl"===e.direction,c="left"===e.horizontalPosition||"start"===e.horizontalPosition&&!s||"end"===e.horizontalPosition&&s,d=!c&&"center"!==e.horizontalPosition;return c?r.left("0"):d?r.right("0"):r.centerHorizontally(),"top"===e.verticalPosition?r.top("0"):r.bottom("0"),i.positionStrategy=r,this._overlay.create(i)}_createInjector(e,i){return l.zs3.create({parent:e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,providers:[{provide:cS,useValue:i},{provide:lS,useValue:e.data}]})}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Ko),l.LFG($m),l.LFG(l.zs3),l.LFG(Ny),l.LFG(n,12),l.LFG(QR))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),XR=(()=>{class n extends CB{constructor(e,i,r,s,c,d){super(e,i,r,s,c,d),this.simpleSnackBarComponent=uS,this.snackBarContainerComponent=ZR,this.handsetCssClass="mat-snack-bar-handset"}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Ko),l.LFG($m),l.LFG(l.zs3),l.LFG(Ny),l.LFG(n,12),l.LFG(QR))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:KR}),n})();function Kn(n,t){return(0,_i.e)((e,i)=>{let r=null,s=0,c=!1;const d=()=>c&&!r&&i.complete();e.subscribe((0,Zn.x)(i,p=>{r?.unsubscribe();let _=0;const w=s++;(0,Hl.Xf)(n(p,w)).subscribe(r=(0,Zn.x)(i,I=>i.next(t?t(p,I,w,_++):I),()=>{r=null,d()}))},()=>{c=!0,d()}))})}function dS(n){return(0,ct.U)(()=>n)}function hS(n,t){return t?e=>jm(t.pipe(ni(1),function c_(){return(0,_i.e)((n,t)=>{n.subscribe((0,Zn.x)(t,jl.Z))})}()),e.pipe(hS(n))):(0,br.z)((e,i)=>n(e,i).pipe(ni(1),dS(e)))}function _w(n,t=Nc.z){const e=tw(n,t);return hS(()=>e)}const ed=["mat-menu-item",""];function fS(n,t){1&n&&(l.O4$(),l.TgZ(0,"svg",2),l._UZ(1,"polygon",3),l.qZA())}const u_=["*"];function yw(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",0),l.NdJ("keydown",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s._handleKeydown(r))})("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.closed.emit("click"))})("@transformMenu.start",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s._onAnimationStart(r))})("@transformMenu.done",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s._onAnimationDone(r))}),l.TgZ(1,"div",1),l.Hsn(2),l.qZA()()}if(2&n){const e=l.oxw();l.Q6J("id",e.panelId)("ngClass",e._classList)("@transformMenu",e._panelAnimationState),l.uIk("aria-label",e.ariaLabel||null)("aria-labelledby",e.ariaLabelledby||null)("aria-describedby",e.ariaDescribedby||null)}}const d_={transformMenu:Pu("transformMenu",[co("void",pi({opacity:0,transform:"scale(0.8)"})),Ps("void => enter",Os("120ms cubic-bezier(0, 0, 0.2, 1)",pi({opacity:1,transform:"scale(1)"}))),Ps("* => void",Os("100ms 25ms linear",pi({opacity:0})))]),fadeInItems:Pu("fadeInItems",[co("showing",pi({opacity:1})),Ps("void => *",[pi({opacity:0}),Os("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},h_=new l.OlP("MatMenuContent"),vw=new l.OlP("MAT_MENU_PANEL"),eO=Ym(Wm(class{}));let f_=(()=>{class n extends eO{constructor(e,i,r,s,c){super(),this._elementRef=e,this._document=i,this._focusMonitor=r,this._parentMenu=s,this._changeDetectorRef=c,this.role="menuitem",this._hovered=new St.x,this._focused=new St.x,this._highlighted=!1,this._triggersSubmenu=!1,s?.addItem?.(this)}focus(e,i){this._focusMonitor&&e?this._focusMonitor.focusVia(this._getHostElement(),e,i):this._getHostElement().focus(i),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(e){this.disabled&&(e.preventDefault(),e.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){const e=this._elementRef.nativeElement.cloneNode(!0),i=e.querySelectorAll("mat-icon, .material-icons");for(let r=0;r<i.length;r++)i[r].remove();return e.textContent?.trim()||""}_setHighlighted(e){this._highlighted=e,this._changeDetectorRef?.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(ae),l.Y36(Ff),l.Y36(vw,8),l.Y36(l.sBO))},n.\u0275cmp=l.Xpm({type:n,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(e,i){1&e&&l.NdJ("click",function(s){return i._checkDisabled(s)})("mouseenter",function(){return i._handleMouseEnter()}),2&e&&(l.uIk("role",i.role)("tabindex",i._getTabIndex())("aria-disabled",i.disabled.toString())("disabled",i.disabled||null),l.ekj("mat-menu-item",!0)("mat-menu-item-highlighted",i._highlighted)("mat-menu-item-submenu-trigger",i._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[l.qOj],attrs:ed,ngContentSelectors:u_,decls:3,vars:3,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(e,i){1&e&&(l.F$t(),l.Hsn(0),l._UZ(1,"div",0),l.YNc(2,fS,2,0,"svg",1)),2&e&&(l.xp6(1),l.Q6J("matRippleDisabled",i.disableRipple||i.disabled)("matRippleTrigger",i._getHostElement()),l.xp6(1),l.Q6J("ngIf",i._triggersSubmenu))},dependencies:[bn,za],encapsulation:2,changeDetection:0}),n})();const gS=new l.OlP("mat-menu-default-options",{providedIn:"root",factory:function _S(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let yS=0,Sh=(()=>{class n{constructor(e,i,r,s){this._elementRef=e,this._ngZone=i,this._defaultOptions=r,this._changeDetectorRef=s,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new l.n_E,this._tabSubscription=Sn.w0.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new St.x,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new l.vpe,this.close=this.closed,this.panelId="mat-menu-panel-"+yS++}get xPosition(){return this._xPosition}set xPosition(e){this._xPosition=e,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(e){this._yPosition=e,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(e){this._overlapTrigger=gn(e)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=gn(e)}set panelClass(e){const i=this._previousPanelClass;i&&i.length&&i.split(" ").forEach(r=>{this._classList[r]=!1}),this._previousPanelClass=e,e&&e.length&&(e.split(" ").forEach(r=>{this._classList[r]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(e){this.panelClass=e}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new pE(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(yr(this._directDescendantItems),Kn(e=>(0,fs.T)(...e.map(i=>i._focused)))).subscribe(e=>this._keyManager.updateActiveItem(e)),this._directDescendantItems.changes.subscribe(e=>{const i=this._keyManager;if("enter"===this._panelAnimationState&&i.activeItem?._hasFocus()){const r=e.toArray(),s=Math.max(0,Math.min(r.length-1,i.activeItemIndex||0));r[s]&&!r[s].disabled?i.setActiveItem(s):i.setNextItemActive()}})}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe(yr(this._directDescendantItems),Kn(i=>(0,fs.T)(...i.map(r=>r._hovered))))}addItem(e){}removeItem(e){}_handleKeydown(e){const i=e.keyCode,r=this._keyManager;switch(i){case 27:Pc(e)||(e.preventDefault(),this.closed.emit("keydown"));break;case S:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case k:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(i===T||i===U)&&r.setFocusOrigin("keyboard"),void r.onKeydown(e)}e.stopPropagation()}focusFirstItem(e="program"){this._ngZone.onStable.pipe(ni(1)).subscribe(()=>{let i=null;if(this._directDescendantItems.length&&(i=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!i||!i.contains(document.activeElement)){const r=this._keyManager;r.setFocusOrigin(e).setFirstItemActive(),!r.activeItem&&i&&i.focus()}})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(e){const i=Math.min(this._baseElevation+e,24),r=`${this._elevationPrefix}${i}`,s=Object.keys(this._classList).find(c=>c.startsWith(this._elevationPrefix));(!s||s===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[r]=!0,this._previousElevation=r)}setPositionClasses(e=this.xPosition,i=this.yPosition){const r=this._classList;r["mat-menu-before"]="before"===e,r["mat-menu-after"]="after"===e,r["mat-menu-above"]="above"===i,r["mat-menu-below"]="below"===i,this._changeDetectorRef?.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(e){this._animationDone.next(e),this._isAnimating=!1}_onAnimationStart(e){this._isAnimating=!0,"enter"===e.toState&&0===this._keyManager.activeItemIndex&&(e.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(yr(this._allItems)).subscribe(e=>{this._directDescendantItems.reset(e.filter(i=>i._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.R0b),l.Y36(gS),l.Y36(l.sBO))},n.\u0275dir=l.lG2({type:n,contentQueries:function(e,i,r){if(1&e&&(l.Suo(r,h_,5),l.Suo(r,f_,5),l.Suo(r,f_,4)),2&e){let s;l.iGM(s=l.CRH())&&(i.lazyContent=s.first),l.iGM(s=l.CRH())&&(i._allItems=s),l.iGM(s=l.CRH())&&(i.items=s)}},viewQuery:function(e,i){if(1&e&&l.Gf(l.Rgc,5),2&e){let r;l.iGM(r=l.CRH())&&(i.templateRef=r.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),n})(),tO=(()=>{class n extends Sh{constructor(e,i,r,s){super(e,i,r,s),this._elevationPrefix="mat-elevation-z",this._baseElevation=4}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.R0b),l.Y36(gS),l.Y36(l.sBO))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(e,i){2&e&&l.uIk("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[l._Bn([{provide:vw,useExisting:n}]),l.qOj],ngContentSelectors:u_,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(e,i){1&e&&(l.F$t(),l.YNc(0,yw,3,6,"ng-template"))},dependencies:[ln],styles:['mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px;position:relative}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.mat-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.mat-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-menu-submenu-icon{fill:CanvasText}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}'],encapsulation:2,data:{animation:[d_.transformMenu,d_.fadeInItems]},changeDetection:0}),n})();const vS=new l.OlP("mat-menu-scroll-strategy"),bw={provide:vS,deps:[Ko],useFactory:function bS(n){return()=>n.scrollStrategies.reposition()}},ww=Gr({passive:!0});let Cw=(()=>{class n{constructor(e,i,r,s,c,d,p,_,w){this._overlay=e,this._element=i,this._viewContainerRef=r,this._menuItemInstance=d,this._dir=p,this._focusMonitor=_,this._ngZone=w,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=Sn.w0.EMPTY,this._hoverSubscription=Sn.w0.EMPTY,this._menuCloseSubscription=Sn.w0.EMPTY,this._handleTouchStart=I=>{or(I)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new l.vpe,this.onMenuOpen=this.menuOpened,this.menuClosed=new l.vpe,this.onMenuClose=this.menuClosed,this._scrollStrategy=s,this._parentMaterialMenu=c instanceof Sh?c:void 0,i.nativeElement.addEventListener("touchstart",this._handleTouchStart,ww),d&&(d._triggersSubmenu=this.triggersSubmenu())}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(e){this.menu=e}get menu(){return this._menu}set menu(e){e!==this._menu&&(this._menu=e,this._menuCloseSubscription.unsubscribe(),e&&(this._menuCloseSubscription=e.close.subscribe(i=>{this._destroyMenu(i),("click"===i||"tab"===i)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(i)})))}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,ww),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){const e=this.menu;if(this._menuOpen||!e)return;const i=this._createOverlay(e),r=i.getConfig(),s=r.positionStrategy;this._setPosition(e,s),r.hasBackdrop=e.hasBackdrop??!this.triggersSubmenu(),i.attach(this._getPortal(e)),e.lazyContent&&e.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(e),e instanceof Sh&&(e._startAnimation(),e._directDescendantItems.changes.pipe(sr(e.close)).subscribe(()=>{s.withLockedPosition(!1).reapplyLastPosition(),s.withLockedPosition(!0)}))}closeMenu(){this.menu?.close.emit()}focus(e,i){this._focusMonitor&&e?this._focusMonitor.focusVia(this._element,e,i):this._element.nativeElement.focus(i)}updatePosition(){this._overlayRef?.updatePosition()}_destroyMenu(e){if(!this._overlayRef||!this.menuOpen)return;const i=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===e||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,i instanceof Sh?(i._resetAnimation(),i.lazyContent?i._animationDone.pipe(yi(r=>"void"===r.toState),ni(1),sr(i.lazyContent._attached)).subscribe({next:()=>i.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),i?.lazyContent?.detach())}_initMenu(e){e.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,e.direction=this.dir,this._setMenuElevation(e),e.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(e){if(e.setElevation){let i=0,r=e.parentMenu;for(;r;)i++,r=r.parentMenu;e.setElevation(i)}}_setIsMenuOpen(e){this._menuOpen=e,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(e)}_createOverlay(e){if(!this._overlayRef){const i=this._getOverlayConfig(e);this._subscribeToPositions(e,i.positionStrategy),this._overlayRef=this._overlay.create(i),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(e){return new Ih({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:e.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:e.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(e,i){e.setPositionClasses&&i.positionChanges.subscribe(r=>{const s="start"===r.connectionPair.overlayX?"after":"before",c="top"===r.connectionPair.overlayY?"below":"above";this._ngZone?this._ngZone.run(()=>e.setPositionClasses(s,c)):e.setPositionClasses(s,c)})}_setPosition(e,i){let[r,s]="before"===e.xPosition?["end","start"]:["start","end"],[c,d]="above"===e.yPosition?["bottom","top"]:["top","bottom"],[p,_]=[c,d],[w,I]=[r,s],M=0;if(this.triggersSubmenu()){if(I=r="before"===e.xPosition?"start":"end",s=w="end"===r?"start":"end",this._parentMaterialMenu){if(null==this._parentInnerPadding){const O=this._parentMaterialMenu.items.first;this._parentInnerPadding=O?O._getHostElement().offsetTop:0}M="bottom"===c?this._parentInnerPadding:-this._parentInnerPadding}}else e.overlapTrigger||(p="top"===c?"bottom":"top",_="top"===d?"bottom":"top");i.withPositions([{originX:r,originY:p,overlayX:w,overlayY:c,offsetY:M},{originX:s,originY:p,overlayX:I,overlayY:c,offsetY:M},{originX:r,originY:_,overlayX:w,overlayY:d,offsetY:-M},{originX:s,originY:_,overlayX:I,overlayY:d,offsetY:-M}])}_menuClosingActions(){const e=this._overlayRef.backdropClick(),i=this._overlayRef.detachments(),r=this._parentMaterialMenu?this._parentMaterialMenu.closed:et(),s=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(yi(c=>c!==this._menuItemInstance),yi(()=>this._menuOpen)):et();return(0,fs.T)(e,r,s,i)}_handleMousedown(e){Pf(e)||(this._openedBy=0===e.button?"mouse":void 0,this.triggersSubmenu()&&e.preventDefault())}_handleKeydown(e){const i=e.keyCode;(13===i||32===i)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(i===k&&"ltr"===this.dir||i===S&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(e){this.triggersSubmenu()?(e.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(yi(e=>e===this._menuItemInstance&&!e.disabled),_w(0,r_)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof Sh&&this.menu._isAnimating?this.menu._animationDone.pipe(ni(1),_w(0,r_),sr(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(e){return(!this._portal||this._portal.templateRef!==e.templateRef)&&(this._portal=new ow(e.templateRef,this._viewContainerRef)),this._portal}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(Ko),l.Y36(l.SBq),l.Y36(l.s_b),l.Y36(vS),l.Y36(vw,8),l.Y36(f_,10),l.Y36(Bo,8),l.Y36(Ff),l.Y36(l.R0b))},n.\u0275dir=l.lG2({type:n,hostVars:3,hostBindings:function(e,i){1&e&&l.NdJ("click",function(s){return i._handleClick(s)})("mousedown",function(s){return i._handleMousedown(s)})("keydown",function(s){return i._handleKeydown(s)}),2&e&&l.uIk("aria-haspopup",i.menu?"menu":null)("aria-expanded",i.menuOpen||null)("aria-controls",i.menuOpen?i.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),n})(),nO=(()=>{class n extends Cw{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=l.n5z(n)))(i||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-menu-trigger"],exportAs:["matMenuTrigger"],features:[l.qOj]}),n})(),iO=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[bw],imports:[ma,fi,Xm,Ep,wp,fi]}),n})();class SB{constructor(t=!1,e,i=!0,r){this._multiple=t,this._emitChanges=i,this.compareWith=r,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new St.x,e&&e.length&&(t?e.forEach(s=>this._markSelected(s)):this._markSelected(e[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...t){this._verifyValueAssignment(t),t.forEach(i=>this._markSelected(i));const e=this._hasQueuedChanges();return this._emitChangeEvent(),e}deselect(...t){this._verifyValueAssignment(t),t.forEach(i=>this._unmarkSelected(i));const e=this._hasQueuedChanges();return this._emitChangeEvent(),e}setSelection(...t){this._verifyValueAssignment(t);const e=this.selected,i=new Set(t);t.forEach(s=>this._markSelected(s)),e.filter(s=>!i.has(s)).forEach(s=>this._unmarkSelected(s));const r=this._hasQueuedChanges();return this._emitChangeEvent(),r}toggle(t){return this.isSelected(t)?this.deselect(t):this.select(t)}clear(t=!0){this._unmarkAll();const e=this._hasQueuedChanges();return t&&this._emitChangeEvent(),e}isSelected(t){if(this.compareWith){for(const e of this._selection)if(this.compareWith(e,t))return!0;return!1}return this._selection.has(t)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){this.isSelected(t)||(this._multiple||this._unmarkAll(),this.isSelected(t)||this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}}function wS(n){return new Zi.y(t=>{(0,Hl.Xf)(n()).subscribe(t)})}const rO=["trigger"],TB=["panel"];function AB(n,t){if(1&n&&(l.TgZ(0,"span",8),l._uU(1),l.qZA()),2&n){const e=l.oxw();l.xp6(1),l.Oqu(e.placeholder)}}function MB(n,t){if(1&n&&(l.TgZ(0,"span",12),l._uU(1),l.qZA()),2&n){const e=l.oxw(2);l.xp6(1),l.Oqu(e.triggerValue)}}function kB(n,t){1&n&&l.Hsn(0,0,["*ngSwitchCase","true"])}function xB(n,t){if(1&n&&(l.TgZ(0,"span",9),l.YNc(1,MB,2,1,"span",10),l.YNc(2,kB,1,0,"ng-content",11),l.qZA()),2&n){const e=l.oxw();l.Q6J("ngSwitch",!!e.customTrigger),l.xp6(2),l.Q6J("ngSwitchCase",!0)}}function RB(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",13)(1,"div",14,15),l.NdJ("@transformPanel.done",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s._panelDoneAnimatingStream.next(r.toState))})("keydown",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s._handleKeydown(r))}),l.Hsn(3,1),l.qZA()()}if(2&n){const e=l.oxw();l.Q6J("@transformPanelWrap",void 0),l.xp6(1),l.Gre("mat-select-panel ",e._getPanelTheme(),""),l.Udp("transform-origin",e._transformOrigin)("font-size",e._triggerFontSize,"px"),l.Q6J("ngClass",e.panelClass)("@transformPanel",e.multiple?"showing-multiple":"showing"),l.uIk("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}}const o=[[["mat-select-trigger"]],"*"],a=["mat-select-trigger","*"],u={transformPanelWrap:Pu("transformPanelWrap",[Ps("* => void",gk("@transformPanel",[oV()],{optional:!0}))]),transformPanel:Pu("transformPanel",[co("void",pi({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),co("showing",pi({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),co("showing-multiple",pi({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),Ps("void => *",Os("120ms cubic-bezier(0, 0, 0.2, 1)")),Ps("* => void",Os("100ms 25ms linear",pi({opacity:0})))])};let v=0;const C=256,oe=new l.OlP("mat-select-scroll-strategy"),je=new l.OlP("MAT_SELECT_CONFIG"),tt={provide:oe,deps:[Ko],useFactory:function Te(n){return()=>n.scrollStrategies.reposition()}};class ut{constructor(t,e){this.source=t,this.value=e}}const Rt=Ym(AE(Wm(ME(class{constructor(n,t,e,i,r){this._elementRef=n,this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=i,this.ngControl=r,this.stateChanges=new St.x}})))),Ve=new l.OlP("MatSelectTrigger");let un=(()=>{class n extends Rt{constructor(e,i,r,s,c,d,p,_,w,I,M,O,N,z){super(c,s,p,_,I),this._viewportRuler=e,this._changeDetectorRef=i,this._ngZone=r,this._dir=d,this._parentFormField=w,this._liveAnnouncer=N,this._defaultOptions=z,this._panelOpen=!1,this._compareWith=(ie,Me)=>ie===Me,this._uid="mat-select-"+v++,this._triggerAriaLabelledBy=null,this._destroy=new St.x,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+v++,this._panelDoneAnimatingStream=new St.x,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.optionSelectionChanges=wS(()=>{const ie=this.options;return ie?ie.changes.pipe(yr(ie),Kn(()=>(0,fs.T)(...ie.map(Me=>Me.onSelectionChange)))):this._ngZone.onStable.pipe(ni(1),Kn(()=>this.optionSelectionChanges))}),this.openedChange=new l.vpe,this._openedStream=this.openedChange.pipe(yi(ie=>ie),(0,ct.U)(()=>{})),this._closedStream=this.openedChange.pipe(yi(ie=>!ie),(0,ct.U)(()=>{})),this.selectionChange=new l.vpe,this.valueChange=new l.vpe,this.ngControl&&(this.ngControl.valueAccessor=this),null!=z?.typeaheadDebounceInterval&&(this._typeaheadDebounceInterval=z.typeaheadDebounceInterval),this._scrollStrategyFactory=O,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(M)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator(Xi.required)??!1}set required(e){this._required=gn(e),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(e){this._multiple=gn(e)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(e){this._disableOptionCentering=gn(e)}get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){this._assignValue(e)&&this._onChange(e)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(e){this._typeaheadDebounceInterval=Kd(e)}get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new SB(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(Zd(),sr(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(sr(this._destroy)).subscribe(e=>{e.added.forEach(i=>i.select()),e.removed.forEach(i=>i.deselect())}),this.options.changes.pipe(yr(null),sr(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const e=this._getTriggerAriaLabelledby(),i=this.ngControl;if(e!==this._triggerAriaLabelledBy){const r=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?r.setAttribute("aria-labelledby",e):r.removeAttribute("aria-labelledby")}i&&(this._previousControl!==i.control&&(void 0!==this._previousControl&&null!==i.disabled&&i.disabled!==this.disabled&&(this.disabled=i.disabled),this._previousControl=i.control),this.updateErrorState())}ngOnChanges(e){(e.disabled||e.userAriaDescribedBy)&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(e){this._assignValue(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const e=this._selectionModel.selected.map(i=>i.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){const i=e.keyCode,r=i===U||i===T||i===S||i===k,s=13===i||32===i,c=this._keyManager;if(!c.isTyping()&&s&&!Pc(e)||(this.multiple||e.altKey)&&r)e.preventDefault(),this.open();else if(!this.multiple){const d=this.selected;c.onKeydown(e);const p=this.selected;p&&d!==p&&this._liveAnnouncer.announce(p.viewValue,1e4)}}_handleOpenKeydown(e){const i=this._keyManager,r=e.keyCode,s=r===U||r===T,c=i.isTyping();if(s&&e.altKey)e.preventDefault(),this.close();else if(c||13!==r&&32!==r||!i.activeItem||Pc(e))if(!c&&this._multiple&&65===r&&e.ctrlKey){e.preventDefault();const d=this.options.some(p=>!p.disabled&&!p.selected);this.options.forEach(p=>{p.disabled||(d?p.select():p.deselect())})}else{const d=i.activeItemIndex;i.onKeydown(e),this._multiple&&s&&e.shiftKey&&i.activeItem&&i.activeItemIndex!==d&&i.activeItem._selectViaInteraction()}else e.preventDefault(),i.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(ni(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this._selectionModel.selected.forEach(i=>i.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(i=>this._selectOptionByValue(i)),this._sortValues();else{const i=this._selectOptionByValue(e);i?this._keyManager.updateActiveItem(i):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(e){const i=this.options.find(r=>{if(this._selectionModel.isSelected(r))return!1;try{return null!=r.value&&this._compareWith(r.value,e)}catch{return!1}});return i&&this._selectionModel.select(i),i}_assignValue(e){return!!(e!==this._value||this._multiple&&Array.isArray(e))&&(this.options&&this._setSelectionByValue(e),this._value=e,!0)}_initKeyManager(){this._keyManager=new fE(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe(sr(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe(sr(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const e=(0,fs.T)(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(sr(e)).subscribe(i=>{this._onSelect(i.source,i.isUserInput),i.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),(0,fs.T)(...this.options.map(i=>i._stateChanges)).pipe(sr(e)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}_onSelect(e,i){const r=this._selectionModel.isSelected(e);null!=e.value||this._multiple?(r!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),i&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),i&&this.focus())):(e.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(e.value)),r!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const e=this.options.toArray();this._selectionModel.sort((i,r)=>this.sortComparator?this.sortComparator(i,r,e):e.indexOf(i)-e.indexOf(r)),this.stateChanges.next()}}_propagateChanges(e){let i=null;i=this.multiple?this.selected.map(r=>r.value):this.selected?this.selected.value:e,this._value=i,this.valueChange.emit(i),this._onChange(i),this.selectionChange.emit(this._getChangeEvent(i)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;const e=this._parentFormField?.getLabelId();return this.ariaLabelledby?(e?e+" ":"")+this.ariaLabelledby:e}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;const e=this._parentFormField?.getLabelId();let i=(e?e+" ":"")+this._valueId;return this.ariaLabelledby&&(i+=" "+this.ariaLabelledby),i}_panelDoneAnimating(e){this.openedChange.emit(e)}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(GI),l.Y36(l.sBO),l.Y36(l.R0b),l.Y36(PE),l.Y36(l.SBq),l.Y36(Bo,8),l.Y36($g,8),l.Y36(Yu,8),l.Y36(Wg,8),l.Y36(qa,10),l.$8M("tabindex"),l.Y36(oe),l.Y36($m),l.Y36(je,8))},n.\u0275dir=l.lG2({type:n,viewQuery:function(e,i){if(1&e&&(l.Gf(rO,5),l.Gf(TB,5),l.Gf(gw,5)),2&e){let r;l.iGM(r=l.CRH())&&(i.trigger=r.first),l.iGM(r=l.CRH())&&(i.panel=r.first),l.iGM(r=l.CRH())&&(i._overlayDir=r.first)}},inputs:{userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[l.qOj,l.TTD]}),n})(),Qn=(()=>{class n extends un{constructor(){super(...arguments),this._scrollTop=0,this._triggerFontSize=0,this._transformOrigin="top",this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}]}_calculateOverlayScroll(e,i,r){const s=this._getItemHeight();return Math.min(Math.max(0,s*e-i+s/2),r)}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(sr(this._destroy)).subscribe(()=>{this.panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}open(){super._canOpen()&&(super.open(),this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._calculateOverlayPosition(),this._ngZone.onStable.pipe(ni(1)).subscribe(()=>{this._triggerFontSize&&this._overlayDir.overlayRef&&this._overlayDir.overlayRef.overlayElement&&(this._overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}_scrollOptionIntoView(e){const i=ao(e,this.options,this.optionGroups),r=this._getItemHeight();this.panel.nativeElement.scrollTop=0===e&&1===i?0:function rk(n,t,e,i){return n<e?n:n+t>e+i?Math.max(0,n-i+t):e}((e+i)*r,r,this.panel.nativeElement.scrollTop,C)}_positioningSettled(){this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop}_panelDoneAnimating(e){this.panelOpen?this._scrollTop=0:(this._overlayDir.offsetX=0,this._changeDetectorRef.markForCheck()),super._panelDoneAnimating(e)}_getChangeEvent(e){return new ut(this,e)}_calculateOverlayOffsetX(){const e=this._overlayDir.overlayRef.overlayElement.getBoundingClientRect(),i=this._viewportRuler.getViewportSize(),r=this._isRtl(),s=this.multiple?56:32;let c;if(this.multiple)c=40;else if(this.disableOptionCentering)c=16;else{let _=this._selectionModel.selected[0]||this.options.first;c=_&&_.group?32:16}r||(c*=-1);const d=0-(e.left+c-(r?s:0)),p=e.right+c-i.width+(r?0:s);d>0?c+=d+8:p>0&&(c-=p+8),this._overlayDir.offsetX=Math.round(c),this._overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(e,i,r){const s=this._getItemHeight(),c=(s-this._triggerRect.height)/2,d=Math.floor(C/s);let p;return this.disableOptionCentering?0:(p=0===this._scrollTop?e*s:this._scrollTop===r?(e-(this._getItemCount()-d))*s+(s-(this._getItemCount()*s-C)%s):i-s/2,Math.round(-1*p-c))}_checkOverlayWithinViewport(e){const i=this._getItemHeight(),r=this._viewportRuler.getViewportSize(),s=this._triggerRect.top-8,c=r.height-this._triggerRect.bottom-8,d=Math.abs(this._offsetY),_=Math.min(this._getItemCount()*i,C)-d-this._triggerRect.height;_>c?this._adjustPanelUp(_,c):d>s?this._adjustPanelDown(d,s,e):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(e,i){const r=Math.round(e-i);this._scrollTop-=r,this._offsetY-=r,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(e,i,r){const s=Math.round(e-i);if(this._scrollTop+=s,this._offsetY+=s,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=r)return this._scrollTop=r,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_calculateOverlayPosition(){const e=this._getItemHeight(),i=this._getItemCount(),r=Math.min(i*e,C),c=i*e-r;let d;d=this.empty?0:Math.max(this.options.toArray().indexOf(this._selectionModel.selected[0]),0),d+=ao(d,this.options,this.optionGroups);const p=r/2;this._scrollTop=this._calculateOverlayScroll(d,p,c),this._offsetY=this._calculateOverlayOffsetY(d,p,c),this._checkOverlayWithinViewport(c)}_getOriginBasedOnOption(){const e=this._getItemHeight(),i=(e-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-i+e/2}px 0px`}_getItemHeight(){return 3*this._triggerFontSize}_getItemCount(){return this.options.length+this.optionGroups.length}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=l.n5z(n)))(i||n)}}(),n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-select"]],contentQueries:function(e,i,r){if(1&e&&(l.Suo(r,Ve,5),l.Suo(r,jE,5),l.Suo(r,ek,5)),2&e){let s;l.iGM(s=l.CRH())&&(i.customTrigger=s.first),l.iGM(s=l.CRH())&&(i.options=s),l.iGM(s=l.CRH())&&(i.optionGroups=s)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","true",1,"mat-select"],hostVars:19,hostBindings:function(e,i){1&e&&l.NdJ("keydown",function(s){return i._handleKeydown(s)})("focus",function(){return i._onFocus()})("blur",function(){return i._onBlur()}),2&e&&(l.uIk("id",i.id)("tabindex",i.tabIndex)("aria-controls",i.panelOpen?i.id+"-panel":null)("aria-expanded",i.panelOpen)("aria-label",i.ariaLabel||null)("aria-required",i.required.toString())("aria-disabled",i.disabled.toString())("aria-invalid",i.errorState)("aria-activedescendant",i._getAriaActiveDescendant()),l.ekj("mat-select-disabled",i.disabled)("mat-select-invalid",i.errorState)("mat-select-required",i.required)("mat-select-empty",i.empty)("mat-select-multiple",i.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[l._Bn([{provide:qg,useExisting:n},{provide:BE,useExisting:n}]),l.qOj],ngContentSelectors:a,decls:9,vars:12,consts:[["cdk-overlay-origin","",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder mat-select-min-line",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder","mat-select-min-line"],[1,"mat-select-value-text",3,"ngSwitch"],["class","mat-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-min-line"],[1,"mat-select-panel-wrap"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(e,i){if(1&e&&(l.F$t(o),l.TgZ(0,"div",0,1),l.NdJ("click",function(){return i.toggle()}),l.TgZ(3,"div",2),l.YNc(4,AB,2,1,"span",3),l.YNc(5,xB,3,2,"span",4),l.qZA(),l.TgZ(6,"div",5),l._UZ(7,"div",6),l.qZA()(),l.YNc(8,RB,4,14,"ng-template",7),l.NdJ("backdropClick",function(){return i.close()})("attach",function(){return i._onAttached()})("detach",function(){return i.close()})),2&e){const r=l.MAs(1);l.uIk("aria-owns",i.panelOpen?i.id+"-panel":null),l.xp6(3),l.Q6J("ngSwitch",i.empty),l.uIk("id",i._valueId),l.xp6(1),l.Q6J("ngSwitchCase",!0),l.xp6(1),l.Q6J("ngSwitchCase",!1),l.xp6(3),l.Q6J("cdkConnectedOverlayPanelClass",i._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",i._scrollStrategy)("cdkConnectedOverlayOrigin",r)("cdkConnectedOverlayOpen",i.panelOpen)("cdkConnectedOverlayPositions",i._positions)("cdkConnectedOverlayMinWidth",null==i._triggerRect?null:i._triggerRect.width)("cdkConnectedOverlayOffsetY",i._offsetY)}},dependencies:[ln,Es,la,ca,gw,mw],styles:['.mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{height:16px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;margin:0 4px}.mat-form-field.mat-focused .mat-select-arrow{transform:translateX(0)}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px;outline:0}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}'],encapsulation:2,data:{animation:[u.transformPanelWrap,u.transformPanel]},changeDetection:0}),n})(),td=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[tt],imports:[ma,Ep,Zy,fi,wp,Vb,Zy,fi]}),n})();const Ew=["mat-calendar-body",""];function Dw(n,t){if(1&n&&(l.TgZ(0,"tr",2)(1,"td",3),l._uU(2),l.qZA()()),2&n){const e=l.oxw();l.xp6(1),l.Udp("padding-top",e._cellPadding)("padding-bottom",e._cellPadding),l.uIk("colspan",e.numCols),l.xp6(1),l.hij(" ",e.label," ")}}function Iw(n,t){if(1&n&&(l.TgZ(0,"td",3),l._uU(1),l.qZA()),2&n){const e=l.oxw(2);l.Udp("padding-top",e._cellPadding)("padding-bottom",e._cellPadding),l.uIk("colspan",e._firstRowOffset),l.xp6(1),l.hij(" ",e._firstRowOffset>=e.labelMinRequiredCells?e.label:""," ")}}function Sw(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"td",7)(1,"button",8),l.NdJ("click",function(r){const c=l.CHM(e).$implicit,d=l.oxw(2);return l.KtG(d._cellClicked(c,r))})("focus",function(r){const c=l.CHM(e).$implicit,d=l.oxw(2);return l.KtG(d._emitActiveDateChange(c,r))}),l.TgZ(2,"div",9),l._uU(3),l.qZA(),l._UZ(4,"div",10),l.qZA()()}if(2&n){const e=t.$implicit,i=t.index,r=l.oxw().index,s=l.oxw();l.Udp("width",s._cellWidth)("padding-top",s._cellPadding)("padding-bottom",s._cellPadding),l.uIk("data-mat-row",r)("data-mat-col",i),l.xp6(1),l.ekj("mat-calendar-body-disabled",!e.enabled)("mat-calendar-body-active",s._isActiveCell(r,i))("mat-calendar-body-range-start",s._isRangeStart(e.compareValue))("mat-calendar-body-range-end",s._isRangeEnd(e.compareValue))("mat-calendar-body-in-range",s._isInRange(e.compareValue))("mat-calendar-body-comparison-bridge-start",s._isComparisonBridgeStart(e.compareValue,r,i))("mat-calendar-body-comparison-bridge-end",s._isComparisonBridgeEnd(e.compareValue,r,i))("mat-calendar-body-comparison-start",s._isComparisonStart(e.compareValue))("mat-calendar-body-comparison-end",s._isComparisonEnd(e.compareValue))("mat-calendar-body-in-comparison-range",s._isInComparisonRange(e.compareValue))("mat-calendar-body-preview-start",s._isPreviewStart(e.compareValue))("mat-calendar-body-preview-end",s._isPreviewEnd(e.compareValue))("mat-calendar-body-in-preview",s._isInPreview(e.compareValue)),l.Q6J("ngClass",e.cssClasses)("tabindex",s._isActiveCell(r,i)?0:-1),l.uIk("aria-label",e.ariaLabel)("aria-disabled",!e.enabled||null)("aria-pressed",s._isSelected(e.compareValue))("aria-current",s.todayValue===e.compareValue?"date":null),l.xp6(1),l.ekj("mat-calendar-body-selected",s._isSelected(e.compareValue))("mat-calendar-body-comparison-identical",s._isComparisonIdentical(e.compareValue))("mat-calendar-body-today",s.todayValue===e.compareValue),l.xp6(1),l.hij(" ",e.displayValue," ")}}function Tw(n,t){if(1&n&&(l.TgZ(0,"tr",4),l.YNc(1,Iw,2,6,"td",5),l.YNc(2,Sw,5,47,"td",6),l.qZA()),2&n){const e=t.$implicit,i=t.index,r=l.oxw();l.xp6(1),l.Q6J("ngIf",0===i&&r._firstRowOffset),l.xp6(1),l.Q6J("ngForOf",e)}}function Aw(n,t){if(1&n&&(l.TgZ(0,"th",5)(1,"span",6),l._uU(2),l.qZA(),l.TgZ(3,"span",7),l._uU(4),l.qZA()()),2&n){const e=t.$implicit;l.xp6(2),l.Oqu(e.long),l.xp6(2),l.Oqu(e.narrow)}}const Mw=["*"];function kw(n,t){}function xw(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"mat-month-view",5),l.NdJ("activeDateChange",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.activeDate=r)})("_userSelection",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s._dateSelected(r))}),l.qZA()}if(2&n){const e=l.oxw();l.Q6J("activeDate",e.activeDate)("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)("comparisonStart",e.comparisonStart)("comparisonEnd",e.comparisonEnd)}}function X6(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"mat-year-view",6),l.NdJ("activeDateChange",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.activeDate=r)})("monthSelected",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s._monthSelectedInYearView(r))})("selectedChange",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s._goToDateInView(r,"month"))}),l.qZA()}if(2&n){const e=l.oxw();l.Q6J("activeDate",e.activeDate)("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)}}function J6(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"mat-multi-year-view",7),l.NdJ("activeDateChange",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.activeDate=r)})("yearSelected",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s._yearSelectedInMultiYearView(r))})("selectedChange",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s._goToDateInView(r,"year"))}),l.qZA()}if(2&n){const e=l.oxw();l.Q6J("activeDate",e.activeDate)("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)}}function eW(n,t){}const tW=["button"];function nW(n,t){1&n&&(l.O4$(),l.TgZ(0,"svg",3),l._UZ(1,"path",4),l.qZA())}const iW=[[["","matDatepickerToggleIcon",""]]],rW=["[matDatepickerToggleIcon]"];let Rw=(()=>{class n{constructor(){this.changes=new St.x,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year",this.startDateLabel="Start date",this.endDateLabel="End date"}formatYearRange(e,i){return`${e} \u2013 ${i}`}formatYearRangeLabel(e,i){return`${e} to ${i}`}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class sO{constructor(t,e,i,r,s={},c=t,d){this.value=t,this.displayValue=e,this.ariaLabel=i,this.enabled=r,this.cssClasses=s,this.compareValue=c,this.rawValue=d}}let p_=(()=>{class n{constructor(e,i){this._elementRef=e,this._ngZone=i,this._focusActiveCellAfterViewChecked=!1,this.numCols=7,this.activeCell=0,this.isRange=!1,this.cellAspectRatio=1,this.previewStart=null,this.previewEnd=null,this.selectedValueChange=new l.vpe,this.previewChange=new l.vpe,this.activeDateChange=new l.vpe,this._enterHandler=r=>{if(this._skipNextFocus&&"focus"===r.type)this._skipNextFocus=!1;else if(r.target&&this.isRange){const s=this._getCellFromElement(r.target);s&&this._ngZone.run(()=>this.previewChange.emit({value:s.enabled?s:null,event:r}))}},this._leaveHandler=r=>{null!==this.previewEnd&&this.isRange&&r.target&&this._getCellFromElement(r.target)&&this._ngZone.run(()=>this.previewChange.emit({value:null,event:r}))},i.runOutsideAngular(()=>{const r=e.nativeElement;r.addEventListener("mouseenter",this._enterHandler,!0),r.addEventListener("focus",this._enterHandler,!0),r.addEventListener("mouseleave",this._leaveHandler,!0),r.addEventListener("blur",this._leaveHandler,!0)})}ngAfterViewChecked(){this._focusActiveCellAfterViewChecked&&(this._focusActiveCell(),this._focusActiveCellAfterViewChecked=!1)}_cellClicked(e,i){e.enabled&&this.selectedValueChange.emit({value:e.value,event:i})}_emitActiveDateChange(e,i){e.enabled&&this.activeDateChange.emit({value:e.value,event:i})}_isSelected(e){return this.startValue===e||this.endValue===e}ngOnChanges(e){const i=e.numCols,{rows:r,numCols:s}=this;(e.rows||i)&&(this._firstRowOffset=r&&r.length&&r[0].length?s-r[0].length:0),(e.cellAspectRatio||i||!this._cellPadding)&&(this._cellPadding=50*this.cellAspectRatio/s+"%"),(i||!this._cellWidth)&&(this._cellWidth=100/s+"%")}ngOnDestroy(){const e=this._elementRef.nativeElement;e.removeEventListener("mouseenter",this._enterHandler,!0),e.removeEventListener("focus",this._enterHandler,!0),e.removeEventListener("mouseleave",this._leaveHandler,!0),e.removeEventListener("blur",this._leaveHandler,!0)}_isActiveCell(e,i){let r=e*this.numCols+i;return e&&(r-=this._firstRowOffset),r==this.activeCell}_focusActiveCell(e=!0){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(ni(1)).subscribe(()=>{setTimeout(()=>{const i=this._elementRef.nativeElement.querySelector(".mat-calendar-body-active");i&&(e||(this._skipNextFocus=!0),i.focus())})})})}_scheduleFocusActiveCellAfterViewChecked(){this._focusActiveCellAfterViewChecked=!0}_isRangeStart(e){return oO(e,this.startValue,this.endValue)}_isRangeEnd(e){return aO(e,this.startValue,this.endValue)}_isInRange(e){return lO(e,this.startValue,this.endValue,this.isRange)}_isComparisonStart(e){return oO(e,this.comparisonStart,this.comparisonEnd)}_isComparisonBridgeStart(e,i,r){if(!this._isComparisonStart(e)||this._isRangeStart(e)||!this._isInRange(e))return!1;let s=this.rows[i][r-1];if(!s){const c=this.rows[i-1];s=c&&c[c.length-1]}return s&&!this._isRangeEnd(s.compareValue)}_isComparisonBridgeEnd(e,i,r){if(!this._isComparisonEnd(e)||this._isRangeEnd(e)||!this._isInRange(e))return!1;let s=this.rows[i][r+1];if(!s){const c=this.rows[i+1];s=c&&c[0]}return s&&!this._isRangeStart(s.compareValue)}_isComparisonEnd(e){return aO(e,this.comparisonStart,this.comparisonEnd)}_isInComparisonRange(e){return lO(e,this.comparisonStart,this.comparisonEnd,this.isRange)}_isComparisonIdentical(e){return this.comparisonStart===this.comparisonEnd&&e===this.comparisonStart}_isPreviewStart(e){return oO(e,this.previewStart,this.previewEnd)}_isPreviewEnd(e){return aO(e,this.previewStart,this.previewEnd)}_isInPreview(e){return lO(e,this.previewStart,this.previewEnd,this.isRange)}_getCellFromElement(e){let i;if(OB(e)?i=e:OB(e.parentNode)&&(i=e.parentNode),i){const r=i.getAttribute("data-mat-row"),s=i.getAttribute("data-mat-col");if(r&&s)return this.rows[parseInt(r)][parseInt(s)]}return null}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.R0b))},n.\u0275cmp=l.Xpm({type:n,selectors:[["","mat-calendar-body",""]],hostAttrs:[1,"mat-calendar-body"],inputs:{label:"label",rows:"rows",todayValue:"todayValue",startValue:"startValue",endValue:"endValue",labelMinRequiredCells:"labelMinRequiredCells",numCols:"numCols",activeCell:"activeCell",isRange:"isRange",cellAspectRatio:"cellAspectRatio",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",previewStart:"previewStart",previewEnd:"previewEnd"},outputs:{selectedValueChange:"selectedValueChange",previewChange:"previewChange",activeDateChange:"activeDateChange"},exportAs:["matCalendarBody"],features:[l.TTD],attrs:Ew,decls:2,vars:2,consts:[["aria-hidden","true",4,"ngIf"],["role","row",4,"ngFor","ngForOf"],["aria-hidden","true"],[1,"mat-calendar-body-label"],["role","row"],["class","mat-calendar-body-label",3,"paddingTop","paddingBottom",4,"ngIf"],["role","gridcell","class","mat-calendar-body-cell-container",3,"width","paddingTop","paddingBottom",4,"ngFor","ngForOf"],["role","gridcell",1,"mat-calendar-body-cell-container"],["type","button",1,"mat-calendar-body-cell",3,"ngClass","tabindex","click","focus"],[1,"mat-calendar-body-cell-content","mat-focus-indicator"],["aria-hidden","true",1,"mat-calendar-body-cell-preview"]],template:function(e,i){1&e&&(l.YNc(0,Dw,3,6,"tr",0),l.YNc(1,Tw,3,2,"tr",1)),2&e&&(l.Q6J("ngIf",i._firstRowOffset<i.labelMinRequiredCells),l.xp6(1),l.Q6J("ngForOf",i.rows))},dependencies:[ln,Hr,bn],styles:['.mat-calendar-body{min-width:224px}.mat-calendar-body-label{height:0;line-height:0;text-align:left;padding-left:4.7142857143%;padding-right:4.7142857143%}.mat-calendar-body-cell-container{position:relative;height:0;line-height:0}.mat-calendar-body-cell{-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);position:absolute;top:0;left:0;width:100%;height:100%;background:none;text-align:center;outline:none;font-family:inherit;margin:0}.mat-calendar-body-cell::-moz-focus-inner{border:0}.mat-calendar-body-cell::before,.mat-calendar-body-cell::after,.mat-calendar-body-cell-preview{content:"";position:absolute;top:5%;left:0;z-index:0;box-sizing:border-box;height:90%;width:100%}.mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-start::after,.mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,.mat-calendar-body-comparison-start::after,.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:5%;width:95%;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,[dir=rtl] .mat-calendar-body-comparison-start::after,[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:0;border-radius:0;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,.mat-calendar-body-comparison-end::after,.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}[dir=rtl] .mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,[dir=rtl] .mat-calendar-body-comparison-end::after,[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{left:5%;border-radius:0;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-comparison-bridge-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-bridge-end.mat-calendar-body-range-start::after{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end.mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-end.mat-calendar-body-range-start::after{width:90%}.mat-calendar-body-in-preview .mat-calendar-body-cell-preview{border-top:dashed 1px;border-bottom:dashed 1px}.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:dashed 1px}[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:0;border-right:dashed 1px}.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:dashed 1px}[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:0;border-left:dashed 1px}.mat-calendar-body-disabled{cursor:default}.cdk-high-contrast-active .mat-calendar-body-disabled{opacity:.5}.mat-calendar-body-cell-content{top:5%;left:5%;z-index:1;display:flex;align-items:center;justify-content:center;box-sizing:border-box;width:90%;height:90%;line-height:1;border-width:1px;border-style:solid;border-radius:999px}.mat-calendar-body-cell-content.mat-focus-indicator{position:absolute}.cdk-high-contrast-active .mat-calendar-body-cell-content{border:none}.cdk-high-contrast-active .mat-datepicker-popup:not(:empty),.cdk-high-contrast-active .mat-calendar-body-cell:not(.mat-calendar-body-in-range) .mat-calendar-body-selected{outline:solid 1px}.cdk-high-contrast-active .mat-calendar-body-today{outline:dotted 1px}.cdk-high-contrast-active .mat-calendar-body-cell::before,.cdk-high-contrast-active .mat-calendar-body-cell::after,.cdk-high-contrast-active .mat-calendar-body-selected{background:none}.cdk-high-contrast-active .mat-calendar-body-in-range::before,.cdk-high-contrast-active .mat-calendar-body-comparison-bridge-start::before,.cdk-high-contrast-active .mat-calendar-body-comparison-bridge-end::before{border-top:solid 1px;border-bottom:solid 1px}.cdk-high-contrast-active .mat-calendar-body-range-start::before{border-left:solid 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-range-start::before{border-left:0;border-right:solid 1px}.cdk-high-contrast-active .mat-calendar-body-range-end::before{border-right:solid 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-range-end::before{border-right:0;border-left:solid 1px}.cdk-high-contrast-active .mat-calendar-body-in-comparison-range::before{border-top:dashed 1px;border-bottom:dashed 1px}.cdk-high-contrast-active .mat-calendar-body-comparison-start::before{border-left:dashed 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-comparison-start::before{border-left:0;border-right:dashed 1px}.cdk-high-contrast-active .mat-calendar-body-comparison-end::before{border-right:dashed 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-comparison-end::before{border-right:0;border-left:dashed 1px}[dir=rtl] .mat-calendar-body-label{text-align:right}'],encapsulation:2,changeDetection:0}),n})();function OB(n){return"TD"===n.nodeName}function oO(n,t,e){return null!==e&&t!==e&&n<e&&n===t}function aO(n,t,e){return null!==t&&t!==e&&n>=t&&n===e}function lO(n,t,e,i){return i&&null!==t&&null!==e&&t!==e&&n>=t&&n<=e}class po{constructor(t,e){this.start=t,this.end=e}}let Th=(()=>{class n{constructor(e,i){this.selection=e,this._adapter=i,this._selectionChanged=new St.x,this.selectionChanged=this._selectionChanged,this.selection=e}updateSelection(e,i){const r=this.selection;this.selection=e,this._selectionChanged.next({selection:e,source:i,oldValue:r})}ngOnDestroy(){this._selectionChanged.complete()}_isValidDateInstance(e){return this._adapter.isDateInstance(e)&&this._adapter.isValid(e)}}return n.\u0275fac=function(e){l.$Z()},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),sW=(()=>{class n extends Th{constructor(e){super(null,e)}add(e){super.updateSelection(e,this)}isValid(){return null!=this.selection&&this._isValidDateInstance(this.selection)}isComplete(){return null!=this.selection}clone(){const e=new n(this._adapter);return e.updateSelection(this.selection,this),e}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Ki))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const PB={provide:Th,deps:[[new l.FiY,new l.tp0,Th],Ki],useFactory:function aW(n,t){return n||new sW(t)}},CS=new l.OlP("MAT_DATE_RANGE_SELECTION_STRATEGY");let NB=(()=>{class n{constructor(e,i,r,s,c){this._changeDetectorRef=e,this._dateFormats=i,this._dateAdapter=r,this._dir=s,this._rangeStrategy=c,this._rerenderSubscription=Sn.w0.EMPTY,this.selectedChange=new l.vpe,this._userSelection=new l.vpe,this.activeDateChange=new l.vpe,this._activeDate=this._dateAdapter.today()}get activeDate(){return this._activeDate}set activeDate(e){const i=this._activeDate,r=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(r,this.minDate,this.maxDate),this._hasSameMonthAndYear(i,this._activeDate)||this._init()}get selected(){return this._selected}set selected(e){this._selected=e instanceof po?e:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setRanges(this._selected)}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(yr(null)).subscribe(()=>this._init())}ngOnChanges(e){const i=e.comparisonStart||e.comparisonEnd;i&&!i.firstChange&&this._setRanges(this.selected)}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_dateSelected(e){const i=e.value,r=this._getDateFromDayOfMonth(i);let s,c;this._selected instanceof po?(s=this._getDateInCurrentMonth(this._selected.start),c=this._getDateInCurrentMonth(this._selected.end)):s=c=this._getDateInCurrentMonth(this._selected),(s!==i||c!==i)&&this.selectedChange.emit(r),this._userSelection.emit({value:r,event:e.event}),this._previewStart=this._previewEnd=null,this._changeDetectorRef.markForCheck()}_updateActiveDate(e){const r=this._activeDate;this.activeDate=this._getDateFromDayOfMonth(e.value),this._dateAdapter.compareDate(r,this.activeDate)&&this.activeDateChange.emit(this._activeDate)}_handleCalendarBodyKeydown(e){const i=this._activeDate,r=this._isRtl();switch(e.keyCode){case S:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,r?1:-1);break;case k:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,r?-1:1);break;case T:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,-7);break;case U:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,7);break;case 36:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,1-this._dateAdapter.getDate(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,this._dateAdapter.getNumDaysInMonth(this._activeDate)-this._dateAdapter.getDate(this._activeDate));break;case 33:this.activeDate=e.altKey?this._dateAdapter.addCalendarYears(this._activeDate,-1):this._dateAdapter.addCalendarMonths(this._activeDate,-1);break;case 34:this.activeDate=e.altKey?this._dateAdapter.addCalendarYears(this._activeDate,1):this._dateAdapter.addCalendarMonths(this._activeDate,1);break;case 13:case 32:return this._selectionKeyPressed=!0,void(this._canSelect(this._activeDate)&&e.preventDefault());case 27:return void(null!=this._previewEnd&&!Pc(e)&&(this._previewStart=this._previewEnd=null,this.selectedChange.emit(null),this._userSelection.emit({value:null,event:e}),e.preventDefault(),e.stopPropagation()));default:return}this._dateAdapter.compareDate(i,this.activeDate)&&(this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked()),e.preventDefault()}_handleCalendarBodyKeyup(e){(32===e.keyCode||13===e.keyCode)&&(this._selectionKeyPressed&&this._canSelect(this._activeDate)&&this._dateSelected({value:this._dateAdapter.getDate(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_init(){this._setRanges(this.selected),this._todayDate=this._getCellCompareValue(this._dateAdapter.today()),this._monthLabel=this._dateFormats.display.monthLabel?this._dateAdapter.format(this.activeDate,this._dateFormats.display.monthLabel):this._dateAdapter.getMonthNames("short")[this._dateAdapter.getMonth(this.activeDate)].toLocaleUpperCase();let e=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),1);this._firstWeekOffset=(7+this._dateAdapter.getDayOfWeek(e)-this._dateAdapter.getFirstDayOfWeek())%7,this._initWeekdays(),this._createWeekCells(),this._changeDetectorRef.markForCheck()}_focusActiveCell(e){this._matCalendarBody._focusActiveCell(e)}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_previewChanged({event:e,value:i}){if(this._rangeStrategy){const s=this._rangeStrategy.createPreview(i?i.rawValue:null,this.selected,e);this._previewStart=this._getCellCompareValue(s.start),this._previewEnd=this._getCellCompareValue(s.end),this._changeDetectorRef.detectChanges()}}_getDateFromDayOfMonth(e){return this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),e)}_initWeekdays(){const e=this._dateAdapter.getFirstDayOfWeek(),i=this._dateAdapter.getDayOfWeekNames("narrow");let s=this._dateAdapter.getDayOfWeekNames("long").map((c,d)=>({long:c,narrow:i[d]}));this._weekdays=s.slice(e).concat(s.slice(0,e))}_createWeekCells(){const e=this._dateAdapter.getNumDaysInMonth(this.activeDate),i=this._dateAdapter.getDateNames();this._weeks=[[]];for(let r=0,s=this._firstWeekOffset;r<e;r++,s++){7==s&&(this._weeks.push([]),s=0);const c=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),r+1),d=this._shouldEnableDate(c),p=this._dateAdapter.format(c,this._dateFormats.display.dateA11yLabel),_=this.dateClass?this.dateClass(c,"month"):void 0;this._weeks[this._weeks.length-1].push(new sO(r+1,i[r],p,d,_,this._getCellCompareValue(c),c))}}_shouldEnableDate(e){return!!e&&(!this.minDate||this._dateAdapter.compareDate(e,this.minDate)>=0)&&(!this.maxDate||this._dateAdapter.compareDate(e,this.maxDate)<=0)&&(!this.dateFilter||this.dateFilter(e))}_getDateInCurrentMonth(e){return e&&this._hasSameMonthAndYear(e,this.activeDate)?this._dateAdapter.getDate(e):null}_hasSameMonthAndYear(e,i){return!(!e||!i||this._dateAdapter.getMonth(e)!=this._dateAdapter.getMonth(i)||this._dateAdapter.getYear(e)!=this._dateAdapter.getYear(i))}_getCellCompareValue(e){if(e){const i=this._dateAdapter.getYear(e),r=this._dateAdapter.getMonth(e),s=this._dateAdapter.getDate(e);return new Date(i,r,s).getTime()}return null}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setRanges(e){e instanceof po?(this._rangeStart=this._getCellCompareValue(e.start),this._rangeEnd=this._getCellCompareValue(e.end),this._isRange=!0):(this._rangeStart=this._rangeEnd=this._getCellCompareValue(e),this._isRange=!1),this._comparisonRangeStart=this._getCellCompareValue(this.comparisonStart),this._comparisonRangeEnd=this._getCellCompareValue(this.comparisonEnd)}_canSelect(e){return!this.dateFilter||this.dateFilter(e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.sBO),l.Y36(Ru,8),l.Y36(Ki,8),l.Y36(Bo,8),l.Y36(CS,8))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-month-view"]],viewQuery:function(e,i){if(1&e&&l.Gf(p_,5),2&e){let r;l.iGM(r=l.CRH())&&(i._matCalendarBody=r.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd"},outputs:{selectedChange:"selectedChange",_userSelection:"_userSelection",activeDateChange:"activeDateChange"},exportAs:["matMonthView"],features:[l.TTD],decls:7,vars:13,consts:[["role","grid",1,"mat-calendar-table"],[1,"mat-calendar-table-header"],["scope","col",4,"ngFor","ngForOf"],["aria-hidden","true","colspan","7",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"label","rows","todayValue","startValue","endValue","comparisonStart","comparisonEnd","previewStart","previewEnd","isRange","labelMinRequiredCells","activeCell","selectedValueChange","activeDateChange","previewChange","keyup","keydown"],["scope","col"],[1,"cdk-visually-hidden"],["aria-hidden","true"]],template:function(e,i){1&e&&(l.TgZ(0,"table",0)(1,"thead",1)(2,"tr"),l.YNc(3,Aw,5,2,"th",2),l.qZA(),l.TgZ(4,"tr"),l._UZ(5,"th",3),l.qZA()(),l.TgZ(6,"tbody",4),l.NdJ("selectedValueChange",function(s){return i._dateSelected(s)})("activeDateChange",function(s){return i._updateActiveDate(s)})("previewChange",function(s){return i._previewChanged(s)})("keyup",function(s){return i._handleCalendarBodyKeyup(s)})("keydown",function(s){return i._handleCalendarBodyKeydown(s)}),l.qZA()()),2&e&&(l.xp6(3),l.Q6J("ngForOf",i._weekdays),l.xp6(3),l.Q6J("label",i._monthLabel)("rows",i._weeks)("todayValue",i._todayDate)("startValue",i._rangeStart)("endValue",i._rangeEnd)("comparisonStart",i._comparisonRangeStart)("comparisonEnd",i._comparisonRangeEnd)("previewStart",i._previewStart)("previewEnd",i._previewEnd)("isRange",i._isRange)("labelMinRequiredCells",3)("activeCell",i._dateAdapter.getDate(i.activeDate)-1))},dependencies:[Hr,p_],encapsulation:2,changeDetection:0}),n})(),FB=(()=>{class n{constructor(e,i,r){this._changeDetectorRef=e,this._dateAdapter=i,this._dir=r,this._rerenderSubscription=Sn.w0.EMPTY,this.selectedChange=new l.vpe,this.yearSelected=new l.vpe,this.activeDateChange=new l.vpe,this._activeDate=this._dateAdapter.today()}get activeDate(){return this._activeDate}set activeDate(e){let i=this._activeDate;const r=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(r,this.minDate,this.maxDate),LB(this._dateAdapter,i,this._activeDate,this.minDate,this.maxDate)||this._init()}get selected(){return this._selected}set selected(e){this._selected=e instanceof po?e:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setSelectedYear(e)}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(yr(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_init(){this._todayYear=this._dateAdapter.getYear(this._dateAdapter.today());const i=this._dateAdapter.getYear(this._activeDate)-Ow(this._dateAdapter,this.activeDate,this.minDate,this.maxDate);this._years=[];for(let r=0,s=[];r<24;r++)s.push(i+r),4==s.length&&(this._years.push(s.map(c=>this._createCellForYear(c))),s=[]);this._changeDetectorRef.markForCheck()}_yearSelected(e){const i=e.value,r=this._dateAdapter.createDate(i,0,1),s=this._getDateFromYear(i);this.yearSelected.emit(r),this.selectedChange.emit(s)}_updateActiveDate(e){const r=this._activeDate;this.activeDate=this._getDateFromYear(e.value),this._dateAdapter.compareDate(r,this.activeDate)&&this.activeDateChange.emit(this.activeDate)}_handleCalendarBodyKeydown(e){const i=this._activeDate,r=this._isRtl();switch(e.keyCode){case S:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,r?1:-1);break;case k:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,r?-1:1);break;case T:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-4);break;case U:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,4);break;case 36:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-Ow(this._dateAdapter,this.activeDate,this.minDate,this.maxDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,24-Ow(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)-1);break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?-240:-24);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?240:24);break;case 13:case 32:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(i,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked(),e.preventDefault()}_handleCalendarBodyKeyup(e){(32===e.keyCode||13===e.keyCode)&&(this._selectionKeyPressed&&this._yearSelected({value:this._dateAdapter.getYear(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_getActiveCell(){return Ow(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_getDateFromYear(e){const i=this._dateAdapter.getMonth(this.activeDate),r=this._dateAdapter.getNumDaysInMonth(this._dateAdapter.createDate(e,i,1));return this._dateAdapter.createDate(e,i,Math.min(this._dateAdapter.getDate(this.activeDate),r))}_createCellForYear(e){const i=this._dateAdapter.createDate(e,0,1),r=this._dateAdapter.getYearName(i),s=this.dateClass?this.dateClass(i,"multi-year"):void 0;return new sO(e,r,r,this._shouldEnableYear(e),s)}_shouldEnableYear(e){if(null==e||this.maxDate&&e>this._dateAdapter.getYear(this.maxDate)||this.minDate&&e<this._dateAdapter.getYear(this.minDate))return!1;if(!this.dateFilter)return!0;for(let r=this._dateAdapter.createDate(e,0,1);this._dateAdapter.getYear(r)==e;r=this._dateAdapter.addCalendarDays(r,1))if(this.dateFilter(r))return!0;return!1}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setSelectedYear(e){if(this._selectedYear=null,e instanceof po){const i=e.start||e.end;i&&(this._selectedYear=this._dateAdapter.getYear(i))}else e&&(this._selectedYear=this._dateAdapter.getYear(e))}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.sBO),l.Y36(Ki,8),l.Y36(Bo,8))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-multi-year-view"]],viewQuery:function(e,i){if(1&e&&l.Gf(p_,5),2&e){let r;l.iGM(r=l.CRH())&&(i._matCalendarBody=r.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",activeDateChange:"activeDateChange"},exportAs:["matMultiYearView"],decls:5,vars:7,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"rows","todayValue","startValue","endValue","numCols","cellAspectRatio","activeCell","selectedValueChange","activeDateChange","keyup","keydown"]],template:function(e,i){1&e&&(l.TgZ(0,"table",0)(1,"thead",1)(2,"tr"),l._UZ(3,"th",2),l.qZA()(),l.TgZ(4,"tbody",3),l.NdJ("selectedValueChange",function(s){return i._yearSelected(s)})("activeDateChange",function(s){return i._updateActiveDate(s)})("keyup",function(s){return i._handleCalendarBodyKeyup(s)})("keydown",function(s){return i._handleCalendarBodyKeydown(s)}),l.qZA()()),2&e&&(l.xp6(4),l.Q6J("rows",i._years)("todayValue",i._todayYear)("startValue",i._selectedYear)("endValue",i._selectedYear)("numCols",4)("cellAspectRatio",4/7)("activeCell",i._getActiveCell()))},dependencies:[p_],encapsulation:2,changeDetection:0}),n})();function LB(n,t,e,i,r){const s=n.getYear(t),c=n.getYear(e),d=VB(n,i,r);return Math.floor((s-d)/24)===Math.floor((c-d)/24)}function Ow(n,t,e,i){return function dW(n,t){return(n%t+t)%t}(n.getYear(t)-VB(n,e,i),24)}function VB(n,t,e){let i=0;return e?i=n.getYear(e)-24+1:t&&(i=n.getYear(t)),i}let BB=(()=>{class n{constructor(e,i,r,s){this._changeDetectorRef=e,this._dateFormats=i,this._dateAdapter=r,this._dir=s,this._rerenderSubscription=Sn.w0.EMPTY,this.selectedChange=new l.vpe,this.monthSelected=new l.vpe,this.activeDateChange=new l.vpe,this._activeDate=this._dateAdapter.today()}get activeDate(){return this._activeDate}set activeDate(e){let i=this._activeDate;const r=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(r,this.minDate,this.maxDate),this._dateAdapter.getYear(i)!==this._dateAdapter.getYear(this._activeDate)&&this._init()}get selected(){return this._selected}set selected(e){this._selected=e instanceof po?e:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setSelectedMonth(e)}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(yr(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_monthSelected(e){const i=e.value,r=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),i,1);this.monthSelected.emit(r);const s=this._getDateFromMonth(i);this.selectedChange.emit(s)}_updateActiveDate(e){const r=this._activeDate;this.activeDate=this._getDateFromMonth(e.value),this._dateAdapter.compareDate(r,this.activeDate)&&this.activeDateChange.emit(this.activeDate)}_handleCalendarBodyKeydown(e){const i=this._activeDate,r=this._isRtl();switch(e.keyCode){case S:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,r?1:-1);break;case k:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,r?-1:1);break;case T:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-4);break;case U:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,4);break;case 36:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-this._dateAdapter.getMonth(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,11-this._dateAdapter.getMonth(this._activeDate));break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?-10:-1);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?10:1);break;case 13:case 32:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(i,this.activeDate)&&(this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked()),e.preventDefault()}_handleCalendarBodyKeyup(e){(32===e.keyCode||13===e.keyCode)&&(this._selectionKeyPressed&&this._monthSelected({value:this._dateAdapter.getMonth(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_init(){this._setSelectedMonth(this.selected),this._todayMonth=this._getMonthInCurrentYear(this._dateAdapter.today()),this._yearLabel=this._dateAdapter.getYearName(this.activeDate);let e=this._dateAdapter.getMonthNames("short");this._months=[[0,1,2,3],[4,5,6,7],[8,9,10,11]].map(i=>i.map(r=>this._createCellForMonth(r,e[r]))),this._changeDetectorRef.markForCheck()}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_getMonthInCurrentYear(e){return e&&this._dateAdapter.getYear(e)==this._dateAdapter.getYear(this.activeDate)?this._dateAdapter.getMonth(e):null}_getDateFromMonth(e){const i=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),e,1),r=this._dateAdapter.getNumDaysInMonth(i);return this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),e,Math.min(this._dateAdapter.getDate(this.activeDate),r))}_createCellForMonth(e,i){const r=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),e,1),s=this._dateAdapter.format(r,this._dateFormats.display.monthYearA11yLabel),c=this.dateClass?this.dateClass(r,"year"):void 0;return new sO(e,i.toLocaleUpperCase(),s,this._shouldEnableMonth(e),c)}_shouldEnableMonth(e){const i=this._dateAdapter.getYear(this.activeDate);if(null==e||this._isYearAndMonthAfterMaxDate(i,e)||this._isYearAndMonthBeforeMinDate(i,e))return!1;if(!this.dateFilter)return!0;for(let s=this._dateAdapter.createDate(i,e,1);this._dateAdapter.getMonth(s)==e;s=this._dateAdapter.addCalendarDays(s,1))if(this.dateFilter(s))return!0;return!1}_isYearAndMonthAfterMaxDate(e,i){if(this.maxDate){const r=this._dateAdapter.getYear(this.maxDate),s=this._dateAdapter.getMonth(this.maxDate);return e>r||e===r&&i>s}return!1}_isYearAndMonthBeforeMinDate(e,i){if(this.minDate){const r=this._dateAdapter.getYear(this.minDate),s=this._dateAdapter.getMonth(this.minDate);return e<r||e===r&&i<s}return!1}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setSelectedMonth(e){this._selectedMonth=e instanceof po?this._getMonthInCurrentYear(e.start)||this._getMonthInCurrentYear(e.end):this._getMonthInCurrentYear(e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.sBO),l.Y36(Ru,8),l.Y36(Ki,8),l.Y36(Bo,8))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-year-view"]],viewQuery:function(e,i){if(1&e&&l.Gf(p_,5),2&e){let r;l.iGM(r=l.CRH())&&(i._matCalendarBody=r.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",monthSelected:"monthSelected",activeDateChange:"activeDateChange"},exportAs:["matYearView"],decls:5,vars:9,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"label","rows","todayValue","startValue","endValue","labelMinRequiredCells","numCols","cellAspectRatio","activeCell","selectedValueChange","activeDateChange","keyup","keydown"]],template:function(e,i){1&e&&(l.TgZ(0,"table",0)(1,"thead",1)(2,"tr"),l._UZ(3,"th",2),l.qZA()(),l.TgZ(4,"tbody",3),l.NdJ("selectedValueChange",function(s){return i._monthSelected(s)})("activeDateChange",function(s){return i._updateActiveDate(s)})("keyup",function(s){return i._handleCalendarBodyKeyup(s)})("keydown",function(s){return i._handleCalendarBodyKeydown(s)}),l.qZA()()),2&e&&(l.xp6(4),l.Q6J("label",i._yearLabel)("rows",i._months)("todayValue",i._todayMonth)("startValue",i._selectedMonth)("endValue",i._selectedMonth)("labelMinRequiredCells",2)("numCols",4)("cellAspectRatio",4/7)("activeCell",i._dateAdapter.getMonth(i.activeDate)))},dependencies:[p_],encapsulation:2,changeDetection:0}),n})(),hW=0,fW=(()=>{class n{constructor(e,i,r,s,c){this._intl=e,this.calendar=i,this._dateAdapter=r,this._dateFormats=s,this._buttonDescriptionId="mat-calendar-button-"+hW++,this.calendar.stateChanges.subscribe(()=>c.markForCheck())}get periodButtonText(){if("month"==this.calendar.currentView)return this._dateAdapter.format(this.calendar.activeDate,this._dateFormats.display.monthYearLabel).toLocaleUpperCase();if("year"==this.calendar.currentView)return this._dateAdapter.getYearName(this.calendar.activeDate);const i=this._dateAdapter.getYear(this.calendar.activeDate)-Ow(this._dateAdapter,this.calendar.activeDate,this.calendar.minDate,this.calendar.maxDate),r=i+24-1,s=this._dateAdapter.getYearName(this._dateAdapter.createDate(i,0,1)),c=this._dateAdapter.getYearName(this._dateAdapter.createDate(r,0,1));return this._intl.formatYearRange(s,c)}get periodButtonLabel(){return"month"==this.calendar.currentView?this._intl.switchToMultiYearViewLabel:this._intl.switchToMonthViewLabel}get prevButtonLabel(){return{month:this._intl.prevMonthLabel,year:this._intl.prevYearLabel,"multi-year":this._intl.prevMultiYearLabel}[this.calendar.currentView]}get nextButtonLabel(){return{month:this._intl.nextMonthLabel,year:this._intl.nextYearLabel,"multi-year":this._intl.nextMultiYearLabel}[this.calendar.currentView]}currentPeriodClicked(){this.calendar.currentView="month"==this.calendar.currentView?"multi-year":"month"}previousClicked(){this.calendar.activeDate="month"==this.calendar.currentView?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,-1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,"year"==this.calendar.currentView?-1:-24)}nextClicked(){this.calendar.activeDate="month"==this.calendar.currentView?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,"year"==this.calendar.currentView?1:24)}previousEnabled(){return!this.calendar.minDate||!this.calendar.minDate||!this._isSameView(this.calendar.activeDate,this.calendar.minDate)}nextEnabled(){return!this.calendar.maxDate||!this._isSameView(this.calendar.activeDate,this.calendar.maxDate)}_isSameView(e,i){return"month"==this.calendar.currentView?this._dateAdapter.getYear(e)==this._dateAdapter.getYear(i)&&this._dateAdapter.getMonth(e)==this._dateAdapter.getMonth(i):"year"==this.calendar.currentView?this._dateAdapter.getYear(e)==this._dateAdapter.getYear(i):LB(this._dateAdapter,e,i,this.calendar.minDate,this.calendar.maxDate)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(Rw),l.Y36((0,l.Gpc)(()=>dO)),l.Y36(Ki,8),l.Y36(Ru,8),l.Y36(l.sBO))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-calendar-header"]],exportAs:["matCalendarHeader"],ngContentSelectors:Mw,decls:11,vars:10,consts:[[1,"mat-calendar-header"],[1,"mat-calendar-controls"],["mat-button","","type","button","aria-live","polite",1,"mat-calendar-period-button",3,"click"],["viewBox","0 0 10 5","focusable","false",1,"mat-calendar-arrow"],["points","0,0 5,5 10,0"],[1,"mat-calendar-spacer"],["mat-icon-button","","type","button",1,"mat-calendar-previous-button",3,"disabled","click"],["mat-icon-button","","type","button",1,"mat-calendar-next-button",3,"disabled","click"]],template:function(e,i){1&e&&(l.F$t(),l.TgZ(0,"div",0)(1,"div",1)(2,"button",2),l.NdJ("click",function(){return i.currentPeriodClicked()}),l.TgZ(3,"span"),l._uU(4),l.qZA(),l.O4$(),l.TgZ(5,"svg",3),l._UZ(6,"polygon",4),l.qZA()(),l.kcU(),l._UZ(7,"div",5),l.Hsn(8),l.TgZ(9,"button",6),l.NdJ("click",function(){return i.previousClicked()}),l.qZA(),l.TgZ(10,"button",7),l.NdJ("click",function(){return i.nextClicked()}),l.qZA()()()),2&e&&(l.xp6(2),l.uIk("aria-label",i.periodButtonLabel)("aria-describedby",i._buttonDescriptionId),l.xp6(1),l.uIk("id",i._buttonDescriptionId),l.xp6(1),l.Oqu(i.periodButtonText),l.xp6(1),l.ekj("mat-calendar-invert","month"!==i.calendar.currentView),l.xp6(4),l.Q6J("disabled",!i.previousEnabled()),l.uIk("aria-label",i.prevButtonLabel),l.xp6(1),l.Q6J("disabled",!i.nextEnabled()),l.uIk("aria-label",i.nextButtonLabel))},dependencies:[lo],encapsulation:2,changeDetection:0}),n})(),dO=(()=>{class n{constructor(e,i,r,s){this._dateAdapter=i,this._dateFormats=r,this._changeDetectorRef=s,this._moveFocusOnNextTick=!1,this.startView="month",this.selectedChange=new l.vpe,this.yearSelected=new l.vpe,this.monthSelected=new l.vpe,this.viewChanged=new l.vpe(!0),this._userSelection=new l.vpe,this.stateChanges=new St.x,this._intlChanges=e.changes.subscribe(()=>{s.markForCheck(),this.stateChanges.next()})}get startAt(){return this._startAt}set startAt(e){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get selected(){return this._selected}set selected(e){this._selected=e instanceof po?e:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get activeDate(){return this._clampedActiveDate}set activeDate(e){this._clampedActiveDate=this._dateAdapter.clampDate(e,this.minDate,this.maxDate),this.stateChanges.next(),this._changeDetectorRef.markForCheck()}get currentView(){return this._currentView}set currentView(e){const i=this._currentView!==e?e:null;this._currentView=e,this._moveFocusOnNextTick=!0,this._changeDetectorRef.markForCheck(),i&&this.viewChanged.emit(i)}ngAfterContentInit(){this._calendarHeaderPortal=new s_(this.headerComponent||fW),this.activeDate=this.startAt||this._dateAdapter.today(),this._currentView=this.startView}ngAfterViewChecked(){this._moveFocusOnNextTick&&(this._moveFocusOnNextTick=!1,this.focusActiveCell())}ngOnDestroy(){this._intlChanges.unsubscribe(),this.stateChanges.complete()}ngOnChanges(e){const i=e.minDate&&!this._dateAdapter.sameDate(e.minDate.previousValue,e.minDate.currentValue)?e.minDate:void 0,r=e.maxDate&&!this._dateAdapter.sameDate(e.maxDate.previousValue,e.maxDate.currentValue)?e.maxDate:void 0,s=i||r||e.dateFilter;if(s&&!s.firstChange){const c=this._getCurrentViewComponent();c&&(this._changeDetectorRef.detectChanges(),c._init())}this.stateChanges.next()}focusActiveCell(){this._getCurrentViewComponent()._focusActiveCell(!1)}updateTodaysDate(){this._getCurrentViewComponent()._init()}_dateSelected(e){const i=e.value;(this.selected instanceof po||i&&!this._dateAdapter.sameDate(i,this.selected))&&this.selectedChange.emit(i),this._userSelection.emit(e)}_yearSelectedInMultiYearView(e){this.yearSelected.emit(e)}_monthSelectedInYearView(e){this.monthSelected.emit(e)}_goToDateInView(e,i){this.activeDate=e,this.currentView=i}_getCurrentViewComponent(){return this.monthView||this.yearView||this.multiYearView}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(Rw),l.Y36(Ki,8),l.Y36(Ru,8),l.Y36(l.sBO))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-calendar"]],viewQuery:function(e,i){if(1&e&&(l.Gf(NB,5),l.Gf(BB,5),l.Gf(FB,5)),2&e){let r;l.iGM(r=l.CRH())&&(i.monthView=r.first),l.iGM(r=l.CRH())&&(i.yearView=r.first),l.iGM(r=l.CRH())&&(i.multiYearView=r.first)}},hostAttrs:[1,"mat-calendar"],inputs:{headerComponent:"headerComponent",startAt:"startAt",startView:"startView",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",_userSelection:"_userSelection"},exportAs:["matCalendar"],features:[l._Bn([PB]),l.TTD],decls:5,vars:5,consts:[[3,"cdkPortalOutlet"],["cdkMonitorSubtreeFocus","","tabindex","-1",1,"mat-calendar-content",3,"ngSwitch"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","activeDateChange","_userSelection",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","monthSelected","selectedChange",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","yearSelected","selectedChange",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","activeDateChange","_userSelection"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","monthSelected","selectedChange"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","yearSelected","selectedChange"]],template:function(e,i){1&e&&(l.YNc(0,kw,0,0,"ng-template",0),l.TgZ(1,"div",1),l.YNc(2,xw,1,8,"mat-month-view",2),l.YNc(3,X6,1,6,"mat-year-view",3),l.YNc(4,J6,1,6,"mat-multi-year-view",4),l.qZA()),2&e&&(l.Q6J("cdkPortalOutlet",i._calendarHeaderPortal),l.xp6(1),l.Q6J("ngSwitch",i.currentView),l.xp6(1),l.Q6J("ngSwitchCase","month"),l.xp6(1),l.Q6J("ngSwitchCase","year"),l.xp6(1),l.Q6J("ngSwitchCase","multi-year"))},dependencies:[Es,la,GM,lw,NB,BB,FB],styles:['.mat-calendar{display:block}.mat-calendar-header{padding:8px 8px 0 8px}.mat-calendar-content{padding:0 8px 8px 8px;outline:none}.mat-calendar-controls{display:flex;margin:5% calc(4.7142857143% - 16px)}.mat-calendar-controls .mat-icon-button:hover .mat-button-focus-overlay{opacity:.04}.mat-calendar-spacer{flex:1 1 auto}.mat-calendar-period-button{min-width:0}.mat-calendar-arrow{display:inline-block;width:10px;height:5px;margin:0 0 0 5px;vertical-align:middle}.mat-calendar-arrow.mat-calendar-invert{transform:rotate(180deg)}[dir=rtl] .mat-calendar-arrow{margin:0 5px 0 0}.cdk-high-contrast-active .mat-calendar-arrow{fill:CanvasText}.mat-calendar-previous-button,.mat-calendar-next-button{position:relative}.mat-calendar-previous-button::after,.mat-calendar-next-button::after{top:0;left:0;right:0;bottom:0;position:absolute;content:"";margin:15.5px;border:0 solid currentColor;border-top-width:2px}[dir=rtl] .mat-calendar-previous-button,[dir=rtl] .mat-calendar-next-button{transform:rotate(180deg)}.mat-calendar-previous-button::after{border-left-width:2px;transform:translateX(2px) rotate(-45deg)}.mat-calendar-next-button::after{border-right-width:2px;transform:translateX(-2px) rotate(45deg)}.mat-calendar-table{border-spacing:0;border-collapse:collapse;width:100%}.mat-calendar-table-header th{text-align:center;padding:0 0 8px 0}.mat-calendar-table-header-divider{position:relative;height:1px}.mat-calendar-table-header-divider::after{content:"";position:absolute;top:0;left:-8px;right:-8px;height:1px}.mat-calendar-body-cell-content::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px) * -1)}.mat-calendar-body-cell:focus .mat-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0}),n})();const UB={transformPanel:Pu("transformPanel",[Ps("void => enter-dropdown",Os("120ms cubic-bezier(0, 0, 0.2, 1)",Jm([pi({opacity:0,transform:"scale(1, 0.8)"}),pi({opacity:1,transform:"scale(1, 1)"})]))),Ps("void => enter-dialog",Os("150ms cubic-bezier(0, 0, 0.2, 1)",Jm([pi({opacity:0,transform:"scale(0.7)"}),pi({transform:"none",opacity:1})]))),Ps("* => void",Os("100ms linear",pi({opacity:0})))]),fadeInCalendar:Pu("fadeInCalendar",[co("void",pi({opacity:0})),co("enter",pi({opacity:1})),Ps("void => *",Os("120ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"))])};let pW=0;const HB=new l.OlP("mat-datepicker-scroll-strategy"),gW={provide:HB,deps:[Ko],useFactory:function mW(n){return()=>n.scrollStrategies.reposition()}},_W=th(class{constructor(n){this._elementRef=n}});let yW=(()=>{class n extends _W{constructor(e,i,r,s,c,d){super(e),this._changeDetectorRef=i,this._globalModel=r,this._dateAdapter=s,this._rangeSelectionStrategy=c,this._subscriptions=new Sn.w0,this._animationDone=new St.x,this._actionsPortal=null,this._closeButtonText=d.closeCalendarLabel}ngOnInit(){this._animationState=this.datepicker.touchUi?"enter-dialog":"enter-dropdown"}ngAfterViewInit(){this._subscriptions.add(this.datepicker.stateChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})),this._calendar.focusActiveCell()}ngOnDestroy(){this._subscriptions.unsubscribe(),this._animationDone.complete()}_handleUserSelection(e){const i=this._model.selection,r=e.value,s=i instanceof po;if(s&&this._rangeSelectionStrategy){const c=this._rangeSelectionStrategy.selectionFinished(r,i,e.event);this._model.updateSelection(c,this)}else r&&(s||!this._dateAdapter.sameDate(r,i))&&this._model.add(r);(!this._model||this._model.isComplete())&&!this._actionsPortal&&this.datepicker.close()}_startExitAnimation(){this._animationState="void",this._changeDetectorRef.markForCheck()}_getSelected(){return this._model.selection}_applyPendingSelection(){this._model!==this._globalModel&&this._globalModel.updateSelection(this._model.selection,this)}_assignActions(e,i){this._model=e?this._globalModel.clone():this._globalModel,this._actionsPortal=e,i&&this._changeDetectorRef.detectChanges()}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.sBO),l.Y36(Th),l.Y36(Ki),l.Y36(CS,8),l.Y36(Rw))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-datepicker-content"]],viewQuery:function(e,i){if(1&e&&l.Gf(dO,5),2&e){let r;l.iGM(r=l.CRH())&&(i._calendar=r.first)}},hostAttrs:[1,"mat-datepicker-content"],hostVars:3,hostBindings:function(e,i){1&e&&l.WFA("@transformPanel.done",function(){return i._animationDone.next()}),2&e&&(l.d8E("@transformPanel",i._animationState),l.ekj("mat-datepicker-content-touch",i.datepicker.touchUi))},inputs:{color:"color"},exportAs:["matDatepickerContent"],features:[l.qOj],decls:5,vars:24,consts:[["cdkTrapFocus","","role","dialog",1,"mat-datepicker-content-container"],[3,"id","ngClass","startAt","startView","minDate","maxDate","dateFilter","headerComponent","selected","dateClass","comparisonStart","comparisonEnd","yearSelected","monthSelected","viewChanged","_userSelection"],[3,"cdkPortalOutlet"],["type","button","mat-raised-button","",1,"mat-datepicker-close-button",3,"color","focus","blur","click"]],template:function(e,i){if(1&e&&(l.TgZ(0,"div",0)(1,"mat-calendar",1),l.NdJ("yearSelected",function(s){return i.datepicker._selectYear(s)})("monthSelected",function(s){return i.datepicker._selectMonth(s)})("viewChanged",function(s){return i.datepicker._viewChanged(s)})("_userSelection",function(s){return i._handleUserSelection(s)}),l.qZA(),l.YNc(2,eW,0,0,"ng-template",2),l.TgZ(3,"button",3),l.NdJ("focus",function(){return i._closeButtonFocused=!0})("blur",function(){return i._closeButtonFocused=!1})("click",function(){return i.datepicker.close()}),l._uU(4),l.qZA()()),2&e){let r;l.ekj("mat-datepicker-content-container-with-custom-header",i.datepicker.calendarHeaderComponent)("mat-datepicker-content-container-with-actions",i._actionsPortal),l.uIk("aria-modal",!0)("aria-labelledby",null!==(r=i._dialogLabelId)&&void 0!==r?r:void 0),l.xp6(1),l.Q6J("id",i.datepicker.id)("ngClass",i.datepicker.panelClass)("startAt",i.datepicker.startAt)("startView",i.datepicker.startView)("minDate",i.datepicker._getMinDate())("maxDate",i.datepicker._getMaxDate())("dateFilter",i.datepicker._getDateFilter())("headerComponent",i.datepicker.calendarHeaderComponent)("selected",i._getSelected())("dateClass",i.datepicker.dateClass)("comparisonStart",i.comparisonStart)("comparisonEnd",i.comparisonEnd)("@fadeInCalendar","enter"),l.xp6(1),l.Q6J("cdkPortalOutlet",i._actionsPortal),l.xp6(1),l.ekj("cdk-visually-hidden",!i._closeButtonFocused),l.Q6J("color",i.color||"primary"),l.xp6(1),l.Oqu(i._closeButtonText)}},dependencies:[ln,lo,vE,lw,dO],styles:[".mat-datepicker-content{display:block;border-radius:4px}.mat-datepicker-content .mat-calendar{width:296px;height:354px}.mat-datepicker-content .mat-datepicker-content-container-with-custom-header .mat-calendar{height:auto}.mat-datepicker-content .mat-datepicker-close-button{position:absolute;top:100%;left:0;margin-top:8px}.ng-animating .mat-datepicker-content .mat-datepicker-close-button{display:none}.mat-datepicker-content-container{display:flex;flex-direction:column;justify-content:space-between}.mat-datepicker-content-touch{display:block;max-height:80vh;position:relative;overflow:visible}.mat-datepicker-content-touch .mat-datepicker-content-container{min-height:312px;max-height:788px;min-width:250px;max-width:750px}.mat-datepicker-content-touch .mat-calendar{width:100%;height:auto}@media all and (orientation: landscape){.mat-datepicker-content-touch .mat-datepicker-content-container{width:64vh;height:80vh}}@media all and (orientation: portrait){.mat-datepicker-content-touch .mat-datepicker-content-container{width:80vw;height:100vw}.mat-datepicker-content-touch .mat-datepicker-content-container-with-actions{height:115vw}}"],encapsulation:2,data:{animation:[UB.transformPanel,UB.fadeInCalendar]},changeDetection:0}),n})(),jB=(()=>{class n{constructor(e,i,r,s,c,d,p){this._overlay=e,this._ngZone=i,this._viewContainerRef=r,this._dateAdapter=c,this._dir=d,this._model=p,this._inputStateChanges=Sn.w0.EMPTY,this.startView="month",this._touchUi=!1,this.xPosition="start",this.yPosition="below",this._restoreFocus=!0,this.yearSelected=new l.vpe,this.monthSelected=new l.vpe,this.viewChanged=new l.vpe(!0),this.openedStream=new l.vpe,this.closedStream=new l.vpe,this._opened=!1,this.id="mat-datepicker-"+pW++,this._focusedElementBeforeOpen=null,this._backdropHarnessClass=`${this.id}-backdrop`,this.stateChanges=new St.x,this._scrollStrategy=s}get startAt(){return this._startAt||(this.datepickerInput?this.datepickerInput.getStartValue():null)}set startAt(e){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get color(){return this._color||(this.datepickerInput?this.datepickerInput.getThemePalette():void 0)}set color(e){this._color=e}get touchUi(){return this._touchUi}set touchUi(e){this._touchUi=gn(e)}get disabled(){return void 0===this._disabled&&this.datepickerInput?this.datepickerInput.disabled:!!this._disabled}set disabled(e){const i=gn(e);i!==this._disabled&&(this._disabled=i,this.stateChanges.next(void 0))}get restoreFocus(){return this._restoreFocus}set restoreFocus(e){this._restoreFocus=gn(e)}get panelClass(){return this._panelClass}set panelClass(e){this._panelClass=function rE(n,t=/\s+/){const e=[];if(null!=n){const i=Array.isArray(n)?n:`${n}`.split(t);for(const r of i){const s=`${r}`.trim();s&&e.push(s)}}return e}(e)}get opened(){return this._opened}set opened(e){gn(e)?this.open():this.close()}_getMinDate(){return this.datepickerInput&&this.datepickerInput.min}_getMaxDate(){return this.datepickerInput&&this.datepickerInput.max}_getDateFilter(){return this.datepickerInput&&this.datepickerInput.dateFilter}ngOnChanges(e){const i=e.xPosition||e.yPosition;if(i&&!i.firstChange&&this._overlayRef){const r=this._overlayRef.getConfig().positionStrategy;r instanceof tS&&(this._setConnectedPositions(r),this.opened&&this._overlayRef.updatePosition())}this.stateChanges.next(void 0)}ngOnDestroy(){this._destroyOverlay(),this.close(),this._inputStateChanges.unsubscribe(),this.stateChanges.complete()}select(e){this._model.add(e)}_selectYear(e){this.yearSelected.emit(e)}_selectMonth(e){this.monthSelected.emit(e)}_viewChanged(e){this.viewChanged.emit(e)}registerInput(e){return this._inputStateChanges.unsubscribe(),this.datepickerInput=e,this._inputStateChanges=e.stateChanges.subscribe(()=>this.stateChanges.next(void 0)),this._model}registerActions(e){this._actionsPortal=e,this._componentRef?.instance._assignActions(e,!0)}removeActions(e){e===this._actionsPortal&&(this._actionsPortal=null,this._componentRef?.instance._assignActions(null,!0))}open(){this._opened||this.disabled||(this._focusedElementBeforeOpen=Fa(),this._openOverlay(),this._opened=!0,this.openedStream.emit())}close(){if(!this._opened)return;if(this._componentRef){const i=this._componentRef.instance;i._startExitAnimation(),i._animationDone.pipe(ni(1)).subscribe(()=>this._destroyOverlay())}const e=()=>{this._opened&&(this._opened=!1,this.closedStream.emit(),this._focusedElementBeforeOpen=null)};this._restoreFocus&&this._focusedElementBeforeOpen&&"function"==typeof this._focusedElementBeforeOpen.focus?(this._focusedElementBeforeOpen.focus(),setTimeout(e)):e()}_applyPendingSelection(){this._componentRef?.instance?._applyPendingSelection()}_forwardContentValues(e){e.datepicker=this,e.color=this.color,e._dialogLabelId=this.datepickerInput.getOverlayLabelId(),e._assignActions(this._actionsPortal,!1)}_openOverlay(){this._destroyOverlay();const e=this.touchUi,i=new s_(yW,this._viewContainerRef),r=this._overlayRef=this._overlay.create(new Ih({positionStrategy:e?this._getDialogStrategy():this._getDropdownStrategy(),hasBackdrop:!0,backdropClass:[e?"cdk-overlay-dark-backdrop":"mat-overlay-transparent-backdrop",this._backdropHarnessClass],direction:this._dir,scrollStrategy:e?this._overlay.scrollStrategies.block():this._scrollStrategy(),panelClass:"mat-datepicker-"+(e?"dialog":"popup")}));this._getCloseStream(r).subscribe(s=>{s&&s.preventDefault(),this.close()}),r.keydownEvents().subscribe(s=>{const c=s.keyCode;(c===T||c===U||c===S||c===k||33===c||34===c)&&s.preventDefault()}),this._componentRef=r.attach(i),this._forwardContentValues(this._componentRef.instance),e||this._ngZone.onStable.pipe(ni(1)).subscribe(()=>r.updatePosition())}_destroyOverlay(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=this._componentRef=null)}_getDialogStrategy(){return this._overlay.position().global().centerHorizontally().centerVertically()}_getDropdownStrategy(){const e=this._overlay.position().flexibleConnectedTo(this.datepickerInput.getConnectedOverlayOrigin()).withTransformOriginOn(".mat-datepicker-content").withFlexibleDimensions(!1).withViewportMargin(8).withLockedPosition();return this._setConnectedPositions(e)}_setConnectedPositions(e){const i="end"===this.xPosition?"end":"start",r="start"===i?"end":"start",s="above"===this.yPosition?"bottom":"top",c="top"===s?"bottom":"top";return e.withPositions([{originX:i,originY:c,overlayX:i,overlayY:s},{originX:i,originY:s,overlayX:i,overlayY:c},{originX:r,originY:c,overlayX:r,overlayY:s},{originX:r,originY:s,overlayX:r,overlayY:c}])}_getCloseStream(e){return(0,fs.T)(e.backdropClick(),e.detachments(),e.keydownEvents().pipe(yi(i=>27===i.keyCode&&!Pc(i)||this.datepickerInput&&Pc(i,"altKey")&&i.keyCode===T)))}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(Ko),l.Y36(l.R0b),l.Y36(l.s_b),l.Y36(HB),l.Y36(Ki,8),l.Y36(Bo,8),l.Y36(Th))},n.\u0275dir=l.lG2({type:n,inputs:{calendarHeaderComponent:"calendarHeaderComponent",startAt:"startAt",startView:"startView",color:"color",touchUi:"touchUi",disabled:"disabled",xPosition:"xPosition",yPosition:"yPosition",restoreFocus:"restoreFocus",dateClass:"dateClass",panelClass:"panelClass",opened:"opened"},outputs:{yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",openedStream:"opened",closedStream:"closed"},features:[l.TTD]}),n})(),vW=(()=>{class n extends jB{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=l.n5z(n)))(i||n)}}(),n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-datepicker"]],exportAs:["matDatepicker"],features:[l._Bn([PB,{provide:jB,useExisting:n}]),l.qOj],decls:0,vars:0,template:function(e,i){},encapsulation:2,changeDetection:0}),n})();class ES{constructor(t,e){this.target=t,this.targetElement=e,this.value=this.target.value}}let bW=(()=>{class n{constructor(e,i,r){this._elementRef=e,this._dateAdapter=i,this._dateFormats=r,this.dateChange=new l.vpe,this.dateInput=new l.vpe,this.stateChanges=new St.x,this._onTouched=()=>{},this._validatorOnChange=()=>{},this._cvaOnChange=()=>{},this._valueChangesSubscription=Sn.w0.EMPTY,this._localeSubscription=Sn.w0.EMPTY,this._parseValidator=()=>this._lastValueValid?null:{matDatepickerParse:{text:this._elementRef.nativeElement.value}},this._filterValidator=s=>{const c=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(s.value));return!c||this._matchesFilter(c)?null:{matDatepickerFilter:!0}},this._minValidator=s=>{const c=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(s.value)),d=this._getMinDate();return!d||!c||this._dateAdapter.compareDate(d,c)<=0?null:{matDatepickerMin:{min:d,actual:c}}},this._maxValidator=s=>{const c=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(s.value)),d=this._getMaxDate();return!d||!c||this._dateAdapter.compareDate(d,c)>=0?null:{matDatepickerMax:{max:d,actual:c}}},this._lastValueValid=!1,this._localeSubscription=i.localeChanges.subscribe(()=>{this._assignValueProgrammatically(this.value)})}get value(){return this._model?this._getValueFromModel(this._model.selection):this._pendingValue}set value(e){this._assignValueProgrammatically(e)}get disabled(){return!!this._disabled||this._parentDisabled()}set disabled(e){const i=gn(e),r=this._elementRef.nativeElement;this._disabled!==i&&(this._disabled=i,this.stateChanges.next(void 0)),i&&this._isInitialized&&r.blur&&r.blur()}_getValidators(){return[this._parseValidator,this._minValidator,this._maxValidator,this._filterValidator]}_registerModel(e){this._model=e,this._valueChangesSubscription.unsubscribe(),this._pendingValue&&this._assignValue(this._pendingValue),this._valueChangesSubscription=this._model.selectionChanged.subscribe(i=>{if(this._shouldHandleChangeEvent(i)){const r=this._getValueFromModel(i.selection);this._lastValueValid=this._isValidValue(r),this._cvaOnChange(r),this._onTouched(),this._formatValue(r),this.dateInput.emit(new ES(this,this._elementRef.nativeElement)),this.dateChange.emit(new ES(this,this._elementRef.nativeElement))}})}ngAfterViewInit(){this._isInitialized=!0}ngOnChanges(e){(function wW(n,t){const e=Object.keys(n);for(let i of e){const{previousValue:r,currentValue:s}=n[i];if(!t.isDateInstance(r)||!t.isDateInstance(s))return!0;if(!t.sameDate(r,s))return!0}return!1})(e,this._dateAdapter)&&this.stateChanges.next(void 0)}ngOnDestroy(){this._valueChangesSubscription.unsubscribe(),this._localeSubscription.unsubscribe(),this.stateChanges.complete()}registerOnValidatorChange(e){this._validatorOnChange=e}validate(e){return this._validator?this._validator(e):null}writeValue(e){this._assignValueProgrammatically(e)}registerOnChange(e){this._cvaOnChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_onKeydown(e){e.altKey&&e.keyCode===U&&!this._elementRef.nativeElement.readOnly&&(this._openPopup(),e.preventDefault())}_onInput(e){const i=this._lastValueValid;let r=this._dateAdapter.parse(e,this._dateFormats.parse.dateInput);this._lastValueValid=this._isValidValue(r),r=this._dateAdapter.getValidDateOrNull(r);const s=!this._dateAdapter.sameDate(r,this.value);!r||s?this._cvaOnChange(r):(e&&!this.value&&this._cvaOnChange(r),i!==this._lastValueValid&&this._validatorOnChange()),s&&(this._assignValue(r),this.dateInput.emit(new ES(this,this._elementRef.nativeElement)))}_onChange(){this.dateChange.emit(new ES(this,this._elementRef.nativeElement))}_onBlur(){this.value&&this._formatValue(this.value),this._onTouched()}_formatValue(e){this._elementRef.nativeElement.value=null!=e?this._dateAdapter.format(e,this._dateFormats.display.dateInput):""}_assignValue(e){this._model?(this._assignValueToModel(e),this._pendingValue=null):this._pendingValue=e}_isValidValue(e){return!e||this._dateAdapter.isValid(e)}_parentDisabled(){return!1}_assignValueProgrammatically(e){e=this._dateAdapter.deserialize(e),this._lastValueValid=this._isValidValue(e),e=this._dateAdapter.getValidDateOrNull(e),this._assignValue(e),this._formatValue(e)}_matchesFilter(e){const i=this._getDateFilter();return!i||i(e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(Ki,8),l.Y36(Ru,8))},n.\u0275dir=l.lG2({type:n,inputs:{value:"value",disabled:"disabled"},outputs:{dateChange:"dateChange",dateInput:"dateInput"},features:[l.TTD]}),n})();const CW={provide:fo,useExisting:(0,l.Gpc)(()=>hO),multi:!0},EW={provide:Qi,useExisting:(0,l.Gpc)(()=>hO),multi:!0};let hO=(()=>{class n extends bW{constructor(e,i,r,s){super(e,i,r),this._formField=s,this._closedSubscription=Sn.w0.EMPTY,this._validator=Xi.compose(super._getValidators())}set matDatepicker(e){e&&(this._datepicker=e,this._closedSubscription=e.closedStream.subscribe(()=>this._onTouched()),this._registerModel(e.registerInput(this)))}get min(){return this._min}set min(e){const i=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e));this._dateAdapter.sameDate(i,this._min)||(this._min=i,this._validatorOnChange())}get max(){return this._max}set max(e){const i=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e));this._dateAdapter.sameDate(i,this._max)||(this._max=i,this._validatorOnChange())}get dateFilter(){return this._dateFilter}set dateFilter(e){const i=this._matchesFilter(this.value);this._dateFilter=e,this._matchesFilter(this.value)!==i&&this._validatorOnChange()}getConnectedOverlayOrigin(){return this._formField?this._formField.getConnectedOverlayOrigin():this._elementRef}getOverlayLabelId(){return this._formField?this._formField.getLabelId():this._elementRef.nativeElement.getAttribute("aria-labelledby")}getThemePalette(){return this._formField?this._formField.color:void 0}getStartValue(){return this.value}ngOnDestroy(){super.ngOnDestroy(),this._closedSubscription.unsubscribe()}_openPopup(){this._datepicker&&this._datepicker.open()}_getValueFromModel(e){return e}_assignValueToModel(e){this._model&&this._model.updateSelection(e,this)}_getMinDate(){return this._min}_getMaxDate(){return this._max}_getDateFilter(){return this._dateFilter}_shouldHandleChangeEvent(e){return e.source!==this}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(Ki,8),l.Y36(Ru,8),l.Y36(Wg,8))},n.\u0275dir=l.lG2({type:n,selectors:[["input","matDatepicker",""]],hostAttrs:[1,"mat-datepicker-input"],hostVars:6,hostBindings:function(e,i){1&e&&l.NdJ("input",function(s){return i._onInput(s.target.value)})("change",function(){return i._onChange()})("blur",function(){return i._onBlur()})("keydown",function(s){return i._onKeydown(s)}),2&e&&(l.Ikx("disabled",i.disabled),l.uIk("aria-haspopup",i._datepicker?"dialog":null)("aria-owns",(null==i._datepicker?null:i._datepicker.opened)&&i._datepicker.id||null)("min",i.min?i._dateAdapter.toIso8601(i.min):null)("max",i.max?i._dateAdapter.toIso8601(i.max):null)("data-mat-calendar",i._datepicker?i._datepicker.id:null))},inputs:{matDatepicker:"matDatepicker",min:"min",max:"max",dateFilter:["matDatepickerFilter","dateFilter"]},exportAs:["matDatepickerInput"],features:[l._Bn([CW,EW,{provide:bI,useExisting:n}]),l.qOj]}),n})(),DW=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=l.lG2({type:n,selectors:[["","matDatepickerToggleIcon",""]]}),n})(),IW=(()=>{class n{constructor(e,i,r){this._intl=e,this._changeDetectorRef=i,this._stateChanges=Sn.w0.EMPTY;const s=Number(r);this.tabIndex=s||0===s?s:null}get disabled(){return void 0===this._disabled&&this.datepicker?this.datepicker.disabled:!!this._disabled}set disabled(e){this._disabled=gn(e)}ngOnChanges(e){e.datepicker&&this._watchStateChanges()}ngOnDestroy(){this._stateChanges.unsubscribe()}ngAfterContentInit(){this._watchStateChanges()}_open(e){this.datepicker&&!this.disabled&&(this.datepicker.open(),e.stopPropagation())}_watchStateChanges(){const e=this.datepicker?this.datepicker.stateChanges:et(),i=this.datepicker&&this.datepicker.datepickerInput?this.datepicker.datepickerInput.stateChanges:et(),r=this.datepicker?(0,fs.T)(this.datepicker.openedStream,this.datepicker.closedStream):et();this._stateChanges.unsubscribe(),this._stateChanges=(0,fs.T)(this._intl.changes,e,i,r).subscribe(()=>this._changeDetectorRef.markForCheck())}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(Rw),l.Y36(l.sBO),l.$8M("tabindex"))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-datepicker-toggle"]],contentQueries:function(e,i,r){if(1&e&&l.Suo(r,DW,5),2&e){let s;l.iGM(s=l.CRH())&&(i._customIcon=s.first)}},viewQuery:function(e,i){if(1&e&&l.Gf(tW,5),2&e){let r;l.iGM(r=l.CRH())&&(i._button=r.first)}},hostAttrs:[1,"mat-datepicker-toggle"],hostVars:8,hostBindings:function(e,i){1&e&&l.NdJ("click",function(s){return i._open(s)}),2&e&&(l.uIk("tabindex",null)("data-mat-calendar",i.datepicker?i.datepicker.id:null),l.ekj("mat-datepicker-toggle-active",i.datepicker&&i.datepicker.opened)("mat-accent",i.datepicker&&"accent"===i.datepicker.color)("mat-warn",i.datepicker&&"warn"===i.datepicker.color))},inputs:{datepicker:["for","datepicker"],tabIndex:"tabIndex",ariaLabel:["aria-label","ariaLabel"],disabled:"disabled",disableRipple:"disableRipple"},exportAs:["matDatepickerToggle"],features:[l.TTD],ngContentSelectors:rW,decls:4,vars:6,consts:[["mat-icon-button","","type","button",3,"disabled","disableRipple"],["button",""],["class","mat-datepicker-toggle-default-icon","viewBox","0 0 24 24","width","24px","height","24px","fill","currentColor","focusable","false",4,"ngIf"],["viewBox","0 0 24 24","width","24px","height","24px","fill","currentColor","focusable","false",1,"mat-datepicker-toggle-default-icon"],["d","M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"]],template:function(e,i){1&e&&(l.F$t(iW),l.TgZ(0,"button",0,1),l.YNc(2,nW,2,0,"svg",2),l.Hsn(3),l.qZA()),2&e&&(l.Q6J("disabled",i.disabled)("disableRipple",i.disableRipple),l.uIk("aria-haspopup",i.datepicker?"dialog":null)("aria-label",i.ariaLabel||i._intl.openCalendarLabel)("tabindex",i.disabled?-1:i.tabIndex),l.xp6(2),l.Q6J("ngIf",!i._customIcon))},dependencies:[bn,lo],styles:[".mat-form-field-appearance-legacy .mat-form-field-prefix .mat-datepicker-toggle-default-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-datepicker-toggle-default-icon{width:1em}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-datepicker-toggle-default-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-datepicker-toggle-default-icon{display:block;width:1.5em;height:1.5em}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-datepicker-toggle-default-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-datepicker-toggle-default-icon{margin:auto}.cdk-high-contrast-active .mat-datepicker-toggle-default-icon{color:CanvasText}"],encapsulation:2,changeDetection:0}),n})(),SW=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[Rw,gW],imports:[ma,Ky,Ep,QL,cw,fi,wp]}),n})();const TW=["input"],AW=["label"],MW=function(n){return{enterDuration:n}},kW=["*"],xW=new l.OlP("mat-checkbox-default-options",{providedIn:"root",factory:$B});function $B(){return{color:"accent",clickAction:"check-indeterminate"}}let RW=0;const GB=$B(),OW={provide:fo,useExisting:(0,l.Gpc)(()=>zB),multi:!0};class PW{}const NW=AE(th(Ym(Wm(class{constructor(n){this._elementRef=n}}))));let FW=(()=>{class n extends NW{constructor(e,i,r,s,c,d,p){super(i),this._changeDetectorRef=r,this._ngZone=s,this._animationMode=d,this._options=p,this.ariaLabel="",this.ariaLabelledby=null,this.labelPosition="after",this.name=null,this.change=new l.vpe,this.indeterminateChange=new l.vpe,this._onTouched=()=>{},this._currentAnimationClass="",this._currentCheckState=0,this._controlValueAccessorChangeFn=()=>{},this._checked=!1,this._disabled=!1,this._indeterminate=!1,this._options=this._options||GB,this.color=this.defaultColor=this._options.color||GB.color,this.tabIndex=parseInt(c)||0,this.id=this._uniqueId=`${e}${++RW}`}get inputId(){return`${this.id||this._uniqueId}-input`}get required(){return this._required}set required(e){this._required=gn(e)}ngAfterViewInit(){this._syncIndeterminate(this._indeterminate)}get checked(){return this._checked}set checked(e){const i=gn(e);i!=this.checked&&(this._checked=i,this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(e){const i=gn(e);i!==this.disabled&&(this._disabled=i,this._changeDetectorRef.markForCheck())}get indeterminate(){return this._indeterminate}set indeterminate(e){const i=e!=this._indeterminate;this._indeterminate=gn(e),i&&(this._transitionCheckState(this._indeterminate?3:this.checked?1:2),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(e){this.checked=!!e}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_getAriaChecked(){return this.checked?"true":this.indeterminate?"mixed":"false"}_transitionCheckState(e){let i=this._currentCheckState,r=this._getAnimationTargetElement();if(i!==e&&r&&(this._currentAnimationClass&&r.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(i,e),this._currentCheckState=e,this._currentAnimationClass.length>0)){r.classList.add(this._currentAnimationClass);const s=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{r.classList.remove(s)},1e3)})}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.checked),this.change.emit(this._createChangeEvent(this.checked)),this._inputElement&&(this._inputElement.nativeElement.checked=this.checked)}toggle(){this.checked=!this.checked,this._controlValueAccessorChangeFn(this.checked)}_handleInputClick(){const e=this._options?.clickAction;this.disabled||"noop"===e?!this.disabled&&"noop"===e&&(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate):(this.indeterminate&&"check"!==e&&Promise.resolve().then(()=>{this._indeterminate=!1,this.indeterminateChange.emit(this._indeterminate)}),this._checked=!this._checked,this._transitionCheckState(this._checked?1:2),this._emitChangeEvent())}_onInteractionEvent(e){e.stopPropagation()}_onBlur(){Promise.resolve().then(()=>{this._onTouched(),this._changeDetectorRef.markForCheck()})}_getAnimationClassForCheckStateTransition(e,i){if("NoopAnimations"===this._animationMode)return"";switch(e){case 0:if(1===i)return this._animationClasses.uncheckedToChecked;if(3==i)return this._checked?this._animationClasses.checkedToIndeterminate:this._animationClasses.uncheckedToIndeterminate;break;case 2:return 1===i?this._animationClasses.uncheckedToChecked:this._animationClasses.uncheckedToIndeterminate;case 1:return 2===i?this._animationClasses.checkedToUnchecked:this._animationClasses.checkedToIndeterminate;case 3:return 1===i?this._animationClasses.indeterminateToChecked:this._animationClasses.indeterminateToUnchecked}return""}_syncIndeterminate(e){const i=this._inputElement;i&&(i.nativeElement.indeterminate=e)}}return n.\u0275fac=function(e){l.$Z()},n.\u0275dir=l.lG2({type:n,viewQuery:function(e,i){if(1&e&&(l.Gf(TW,5),l.Gf(AW,5),l.Gf(za,5)),2&e){let r;l.iGM(r=l.CRH())&&(i._inputElement=r.first),l.iGM(r=l.CRH())&&(i._labelElement=r.first),l.iGM(r=l.CRH())&&(i.ripple=r.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],id:"id",required:"required",labelPosition:"labelPosition",name:"name",value:"value",checked:"checked",disabled:"disabled",indeterminate:"indeterminate"},outputs:{change:"change",indeterminateChange:"indeterminateChange"},features:[l.qOj]}),n})(),zB=(()=>{class n extends FW{constructor(e,i,r,s,c,d,p){super("mat-checkbox-",e,i,s,c,d,p),this._focusMonitor=r,this._animationClasses={uncheckedToChecked:"mat-checkbox-anim-unchecked-checked",uncheckedToIndeterminate:"mat-checkbox-anim-unchecked-indeterminate",checkedToUnchecked:"mat-checkbox-anim-checked-unchecked",checkedToIndeterminate:"mat-checkbox-anim-checked-indeterminate",indeterminateToChecked:"mat-checkbox-anim-indeterminate-checked",indeterminateToUnchecked:"mat-checkbox-anim-indeterminate-unchecked"}}_createChangeEvent(e){const i=new PW;return i.source=this,i.checked=e,i}_getAnimationTargetElement(){return this._elementRef.nativeElement}ngAfterViewInit(){super.ngAfterViewInit(),this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{e||this._onBlur()})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}_onInputClick(e){e.stopPropagation(),super._handleInputClick()}focus(e,i){e?this._focusMonitor.focusVia(this._inputElement,e,i):this._inputElement.nativeElement.focus(i)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.sBO),l.Y36(Ff),l.Y36(l.R0b),l.$8M("tabindex"),l.Y36(l.QbO,8),l.Y36(xW,8))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-checkbox"]],hostAttrs:[1,"mat-checkbox"],hostVars:14,hostBindings:function(e,i){2&e&&(l.Ikx("id",i.id),l.uIk("tabindex",null)("aria-label",null)("aria-labelledby",null),l.ekj("mat-checkbox-indeterminate",i.indeterminate)("mat-checkbox-checked",i.checked)("mat-checkbox-disabled",i.disabled)("mat-checkbox-label-before","before"==i.labelPosition)("_mat-animation-noopable","NoopAnimations"===i._animationMode))},inputs:{disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matCheckbox"],features:[l._Bn([OW]),l.qOj],ngContentSelectors:kW,decls:17,vars:21,consts:[[1,"mat-checkbox-layout"],["label",""],[1,"mat-checkbox-inner-container"],["type","checkbox",1,"mat-checkbox-input","cdk-visually-hidden",3,"id","required","checked","disabled","tabIndex","change","click"],["input",""],["matRipple","",1,"mat-checkbox-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleRadius","matRippleCentered","matRippleAnimation"],[1,"mat-ripple-element","mat-checkbox-persistent-ripple"],[1,"mat-checkbox-frame"],[1,"mat-checkbox-background"],["version","1.1","focusable","false","viewBox","0 0 24 24","aria-hidden","true",1,"mat-checkbox-checkmark"],["fill","none","stroke","white","d","M4.1,12.7 9,17.6 20.3,6.3",1,"mat-checkbox-checkmark-path"],[1,"mat-checkbox-mixedmark"],[1,"mat-checkbox-label",3,"cdkObserveContent"],["checkboxLabel",""],[2,"display","none"]],template:function(e,i){if(1&e&&(l.F$t(),l.TgZ(0,"label",0,1)(2,"span",2)(3,"input",3,4),l.NdJ("change",function(s){return i._onInteractionEvent(s)})("click",function(s){return i._onInputClick(s)}),l.qZA(),l.TgZ(5,"span",5),l._UZ(6,"span",6),l.qZA(),l._UZ(7,"span",7),l.TgZ(8,"span",8),l.O4$(),l.TgZ(9,"svg",9),l._UZ(10,"path",10),l.qZA(),l.kcU(),l._UZ(11,"span",11),l.qZA()(),l.TgZ(12,"span",12,13),l.NdJ("cdkObserveContent",function(){return i._onLabelTextChange()}),l.TgZ(14,"span",14),l._uU(15,"\xa0"),l.qZA(),l.Hsn(16),l.qZA()()),2&e){const r=l.MAs(1),s=l.MAs(13);l.uIk("for",i.inputId),l.xp6(2),l.ekj("mat-checkbox-inner-container-no-side-margin",!s.textContent||!s.textContent.trim()),l.xp6(1),l.Q6J("id",i.inputId)("required",i.required)("checked",i.checked)("disabled",i.disabled)("tabIndex",i.tabIndex),l.uIk("value",i.value)("name",i.name)("aria-label",i.ariaLabel||null)("aria-labelledby",i.ariaLabelledby)("aria-checked",i._getAriaChecked())("aria-describedby",i.ariaDescribedby),l.xp6(2),l.Q6J("matRippleTrigger",r)("matRippleDisabled",i._isRippleDisabled())("matRippleRadius",20)("matRippleCentered",!0)("matRippleAnimation",l.VKq(19,MW,"NoopAnimations"===i._animationMode?0:150))}},dependencies:[za,Oy],styles:['@keyframes mat-checkbox-fade-in-background{0%{opacity:0}50%{opacity:1}}@keyframes mat-checkbox-fade-out-background{0%,50%{opacity:1}100%{opacity:0}}@keyframes mat-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:22.910259}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1)}100%{stroke-dashoffset:0}}@keyframes mat-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mat-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);stroke-dashoffset:0}to{stroke-dashoffset:-22.910259}}@keyframes mat-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(45deg)}}@keyframes mat-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:0;transform:rotate(45deg)}to{opacity:1;transform:rotate(360deg)}}@keyframes mat-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:0;transform:rotate(-45deg)}to{opacity:1;transform:rotate(0deg)}}@keyframes mat-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(315deg)}}@keyframes mat-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;opacity:1;transform:scaleX(1)}32.8%,100%{opacity:0;transform:scaleX(0)}}.mat-checkbox-background,.mat-checkbox-frame{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:2px;box-sizing:border-box;pointer-events:none}.mat-checkbox{display:inline-block;transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);position:relative}.mat-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-checkbox .mat-ripple-element:not(.mat-checkbox-persistent-ripple){opacity:.16}.mat-checkbox .mat-checkbox-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-checkbox-layout{-webkit-user-select:none;user-select:none;cursor:inherit;align-items:baseline;vertical-align:middle;display:inline-flex;white-space:nowrap}.mat-checkbox-label{-webkit-user-select:auto;user-select:auto}.mat-checkbox-inner-container{display:inline-block;height:16px;line-height:0;margin:auto;margin-right:8px;order:0;position:relative;vertical-align:middle;white-space:nowrap;width:16px;flex-shrink:0}[dir=rtl] .mat-checkbox-inner-container{margin-left:8px;margin-right:auto}.mat-checkbox-inner-container-no-side-margin{margin-left:0;margin-right:0}.mat-checkbox-frame{background-color:rgba(0,0,0,0);transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1);border-width:2px;border-style:solid}._mat-animation-noopable .mat-checkbox-frame{transition:none}.mat-checkbox-background{align-items:center;display:inline-flex;justify-content:center;transition:background-color 90ms cubic-bezier(0, 0, 0.2, 0.1),opacity 90ms cubic-bezier(0, 0, 0.2, 0.1);-webkit-print-color-adjust:exact;color-adjust:exact}._mat-animation-noopable .mat-checkbox-background{transition:none}.cdk-high-contrast-active .mat-checkbox .mat-checkbox-background{background:none}.mat-checkbox-persistent-ripple{display:block;width:100%;height:100%;transform:none}.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:.04}.mat-checkbox.cdk-keyboard-focused .mat-checkbox-persistent-ripple{opacity:.12}.mat-checkbox-persistent-ripple,.mat-checkbox.mat-checkbox-disabled .mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:0}@media(hover: none){.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{display:none}}.mat-checkbox-checkmark{top:0;left:0;right:0;bottom:0;position:absolute;width:100%}.mat-checkbox-checkmark-path{stroke-dashoffset:22.910259;stroke-dasharray:22.910259;stroke-width:2.1333333333px}.cdk-high-contrast-black-on-white .mat-checkbox-checkmark-path{stroke:#000 !important}.mat-checkbox-mixedmark{width:calc(100% - 6px);height:2px;opacity:0;transform:scaleX(0) rotate(0deg);border-radius:2px}.cdk-high-contrast-active .mat-checkbox-mixedmark{height:0;border-top:solid 2px;margin-top:2px}.mat-checkbox-label-before .mat-checkbox-inner-container{order:1;margin-left:8px;margin-right:auto}[dir=rtl] .mat-checkbox-label-before .mat-checkbox-inner-container{margin-left:auto;margin-right:8px}.mat-checkbox-checked .mat-checkbox-checkmark{opacity:1}.mat-checkbox-checked .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-checked .mat-checkbox-mixedmark{transform:scaleX(1) rotate(-45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark{opacity:0;transform:rotate(45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-indeterminate .mat-checkbox-mixedmark{opacity:1;transform:scaleX(1) rotate(0deg)}.mat-checkbox-unchecked .mat-checkbox-background{background-color:rgba(0,0,0,0)}.mat-checkbox-disabled{cursor:default}.cdk-high-contrast-active .mat-checkbox-disabled{opacity:.5}.mat-checkbox-anim-unchecked-checked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-checked .mat-checkbox-checkmark-path{animation:180ms linear 0ms mat-checkbox-unchecked-checked-checkmark-path}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-unchecked-indeterminate-mixedmark}.mat-checkbox-anim-checked-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-checked-unchecked .mat-checkbox-checkmark-path{animation:90ms linear 0ms mat-checkbox-checked-unchecked-checkmark-path}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-checkmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-checkmark}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-mixedmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-checkmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-checkmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-mixedmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-mixedmark}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-mixedmark{animation:300ms linear 0ms mat-checkbox-indeterminate-unchecked-mixedmark}.mat-checkbox-input{bottom:0;left:50%}.mat-checkbox-input:focus~.mat-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0}),n})(),qB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})(),BW=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Xm,fi,Fc,qB,fi,qB]}),n})();var wr=L(2011),DS=L(5363),UW=L(6063);class HW extends St.x{constructor(t=1/0,e=1/0,i=UW.l){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:c}=this;e||(i.push(t),!r&&i.push(s.now()+c)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let c=0;c<s.length&&!t.closed;c+=i?1:2)t.next(s[c]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*t;if(t<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const c=e.now();let d=0;for(let p=1;p<i.length&&i[p]<=c;p+=2)d=p;d&&i.splice(0,d+1)}}}function WB(n,t,e){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:t=1/0,refCount:r=!1,scheduler:e}=n):i=n??1/0,(0,Kg.B)({connector:()=>new HW(i,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}const IS=(0,L(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function SS(n){return(0,_i.e)((t,e)=>{let i=!1;t.subscribe((0,Zn.x)(e,r=>{i=!0,e.next(r)},()=>{i||e.next(n),e.complete()}))})}function YB(n=$W){return(0,_i.e)((t,e)=>{let i=!1;t.subscribe((0,Zn.x)(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(n())))})}function $W(){return new IS}function nd(n,t){const e=arguments.length>=2;return i=>i.pipe(n?yi((r,s)=>n(r,s,i)):Yd.y,ni(1),e?SS(t):YB(()=>new IS))}function ZB(n,t){return(0,Ka.m)(t)?Kn(()=>n,t):Kn(()=>n)}var fO=L(9468),Tn=L(5813);L(5867);var De=L(5861),Vs=L(9681),nc=L(4859),F=L(2090),ic=L(1877);const QB=new Map,YW={activated:!1,tokenObservers:[]},ZW={initialized:!1,enabled:!1};function kr(n){return QB.get(n)||YW}function rc(n,t){QB.set(n,t)}function AS(){return ZW}class e4{constructor(t,e,i,r,s){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var e=this;return(0,De.Z)(function*(){e.stop();try{e.pending=new F.BH,yield function t4(n){return new Promise(t=>{setTimeout(t,n)})}(e.getNextRun(t)),e.pending.resolve(),yield e.pending.promise,e.pending=new F.BH,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(i){e.retryPolicy(i)?e.process(!1).catch(()=>{}):e.stop()}})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const Bs=new F.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function JB(n){if(!kr(n).activated)throw Bs.create("use-before-activation",{appName:n.name})}function _O(n,t){return yO.apply(this,arguments)}function yO(){return(yO=(0,De.Z)(function*({url:n,body:t},e){var i,r;const s={"Content-Type":"application/json"},c=e.getImmediate({optional:!0});if(c){const O=yield c.getHeartbeatsHeader();O&&(s["X-Firebase-Client"]=O)}const d={method:"POST",body:JSON.stringify(t),headers:s};let p,_;try{p=yield fetch(n,d)}catch(O){throw Bs.create("fetch-network-error",{originalErrorMessage:null===(i=O)||void 0===i?void 0:i.message})}if(200!==p.status)throw Bs.create("fetch-status-error",{httpStatus:p.status});try{_=yield p.json()}catch(O){throw Bs.create("fetch-parse-error",{originalErrorMessage:null===(r=O)||void 0===r?void 0:r.message})}const w=_.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw Bs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${_.ttl}`});const I=1e3*Number(w[1]),M=Date.now();return{token:_.token,expireTimeMillis:M+I,issuedAtTimeMillis:M}})).apply(this,arguments)}function s4(n,t){const{projectId:e,appId:i,apiKey:r}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${e}/apps/${i}:exchangeDebugToken?key=${r}`,body:{debug_token:t}}}const Pw="firebase-app-check-store";let xS=null;function tU(){return xS||(xS=new Promise((n,t)=>{var e;try{const i=indexedDB.open("firebase-app-check-database",1);i.onsuccess=r=>{n(r.target.result)},i.onerror=r=>{var s;t(Bs.create("storage-open",{originalErrorMessage:null===(s=r.target.error)||void 0===s?void 0:s.message}))},i.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Pw,{keyPath:"compositeKey"})}}catch(i){t(Bs.create("storage-open",{originalErrorMessage:null===(e=i)||void 0===e?void 0:e.message}))}}),xS)}function vO(){return(vO=(0,De.Z)(function*(n,t){const i=(yield tU()).transaction(Pw,"readwrite"),s=i.objectStore(Pw).put({compositeKey:n,value:t});return new Promise((c,d)=>{s.onsuccess=p=>{c()},i.onerror=p=>{var _;d(Bs.create("storage-set",{originalErrorMessage:null===(_=p.target.error)||void 0===_?void 0:_.message}))}})})).apply(this,arguments)}const Nw=new ic.Yd("@firebase/app-check");function sU(n,t){return(0,F.hl)()?function c4(n,t){return function nU(n,t){return vO.apply(this,arguments)}(function rU(n){return`${n.options.appId}-${n.name}`}(n),t)}(n,t).catch(e=>{Nw.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function oU(){return AS().enabled}function aU(){return EO.apply(this,arguments)}function EO(){return(EO=(0,De.Z)(function*(){const n=AS();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const m4={error:"UNKNOWN_ERROR"};function g4(n){return F.US.encodeString(JSON.stringify(n),!1)}function RS(n){return DO.apply(this,arguments)}function DO(){return(DO=(0,De.Z)(function*(n,t=!1){const e=n.app;JB(e);const i=kr(e);let s,r=i.token;if(!r){const p=yield i.cachedTokenPromise;p&&OS(p)&&(r=p)}if(!t&&r&&OS(r))return{token:r.token};let d,c=!1;if(oU()){i.exchangeTokenPromise||(i.exchangeTokenPromise=_O(s4(e,yield aU()),n.heartbeatServiceProvider).then(_=>(i.exchangeTokenPromise=void 0,_)),c=!0);const p=yield i.exchangeTokenPromise;return yield sU(e,p),rc(e,Object.assign(Object.assign({},i),{token:p})),{token:p.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().then(p=>(i.exchangeTokenPromise=void 0,p)),c=!0),r=yield i.exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?Nw.warn(p.message):Nw.error(p),s=p}return r?(d={token:r.token},rc(e,Object.assign(Object.assign({},i),{token:r})),yield sU(e,r)):d=y4(s),c&&cU(e,d),d})).apply(this,arguments)}function SO(n,t){const e=kr(n),i=e.tokenObservers.filter(r=>r.next!==t);0===i.length&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),rc(n,Object.assign(Object.assign({},e),{tokenObservers:i}))}function lU(n){const{app:t}=n,e=kr(t);let i=e.tokenRefresher;i||(i=function _4(n){const{app:t}=n;return new e4((0,De.Z)(function*(){let i;if(i=kr(t).token?yield RS(n,!0):yield RS(n),i.error)throw i.error}),()=>!0,()=>{const e=kr(t);if(e.token){let i=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,e.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},3e4,96e4)}(n),rc(t,Object.assign(Object.assign({},e),{tokenRefresher:i}))),!i.isRunning()&&e.isTokenAutoRefreshEnabled&&i.start()}function cU(n,t){const e=kr(n).tokenObservers;for(const i of e)try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch{}}function OS(n){return n.expireTimeMillis-Date.now()>0}function y4(n){return{token:g4(m4),error:n}}class v4{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){const{tokenObservers:t}=kr(this.app);for(const e of t)SO(this.app,e.next);return Promise.resolve()}}const _U="app-check-internal";!function O4(){(0,Vs._registerComponent)(new nc.wA("app-check",n=>function b4(n,t){return new v4(n,t)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,t,e)=>{n.getProvider(_U).initialize()})),(0,Vs._registerComponent)(new nc.wA(_U,n=>function w4(n){return{getToken:t=>RS(n,t),addTokenListener:t=>function IO(n,t,e,i){const{app:r}=n,s=kr(r),c={next:e,error:i,type:t};if(rc(r,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,c]})),s.token&&OS(s.token)){const d=s.token;Promise.resolve().then(()=>{e({token:d.token}),lU(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>lU(n))}(n,"INTERNAL",t),removeTokenListener:t=>SO(n.app,t)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Vs.registerVersion)("@firebase/app-check","0.5.12")}();class Fw{constructor(){return(0,Tn.vb)("app-check")}}typeof window<"u"&&window;var NS=L(127);const xO=new l.OlP("angularfire2.auth.use-emulator"),RO=new l.OlP("angularfire2.auth.settings"),OO=new l.OlP("angularfire2.auth.tenant-id"),PO=new l.OlP("angularfire2.auth.langugage-code"),NO=new l.OlP("angularfire2.auth.use-device-language"),FO=new l.OlP("angularfire.auth.persistence"),LO=(n,t,e,i,r,s,c,d)=>(0,wr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=t.runOutsideAngular(()=>n.auth());if(e&&p.useEmulator(...e),i&&(p.tenantId=i),p.languageCode=r,s&&p.useDeviceLanguage(),c)for(const[_,w]of Object.entries(c))p.settings[_]=w;return d&&p.setPersistence(d),p},[e,i,r,s,c,d]);let Lw=(()=>{class n{constructor(e,i,r,s,c,d,p,_,w,I,M,O){const N=new St.x,z=et(void 0).pipe((0,DS.Q)(c.outsideAngular),Kn(()=>s.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,5881)))),(0,ct.U)(()=>(0,wr.on)(e,s,i)),(0,ct.U)(ie=>LO(ie,s,d,_,w,I,p,M)),WB({bufferSize:1,refCount:!1}));if(ga(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=et(null);else{z.pipe(nd()).subscribe();const Me=z.pipe(Kn(Qe=>Qe.getRedirectResult().then(Dt=>Dt,()=>null)),Tn.iC,WB({bufferSize:1,refCount:!1})),ze=z.pipe(Kn(Qe=>new Zi.y(Dt=>({unsubscribe:s.runOutsideAngular(()=>Qe.onAuthStateChanged(At=>Dt.next(At),At=>Dt.error(At),()=>Dt.complete()))})))),Xe=z.pipe(Kn(Qe=>new Zi.y(Dt=>({unsubscribe:s.runOutsideAngular(()=>Qe.onIdTokenChanged(At=>Dt.next(At),At=>Dt.error(At),()=>Dt.complete()))}))));this.authState=Me.pipe(ZB(ze),(0,fO.R)(c.outsideAngular),(0,DS.Q)(c.insideAngular)),this.user=Me.pipe(ZB(Xe),(0,fO.R)(c.outsideAngular),(0,DS.Q)(c.insideAngular)),this.idToken=this.user.pipe(Kn(Qe=>Qe?(0,mn.D)(Qe.getIdToken()):et(null))),this.idTokenResult=this.user.pipe(Kn(Qe=>Qe?(0,mn.D)(Qe.getIdTokenResult()):et(null))),this.credential=(0,fs.T)(Me,N,this.authState.pipe(yi(Qe=>!Qe))).pipe((0,ct.U)(Qe=>Qe?.user?Qe:null),(0,fO.R)(c.outsideAngular),(0,DS.Q)(c.insideAngular))}return(0,wr.pX)(this,z,s,{spy:{apply:(ie,Me,ze)=>{(ie.startsWith("signIn")||ie.startsWith("createUser"))&&ze.then(Xe=>N.next(Xe))}}})}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(wr.Dh),l.LFG(wr.xv,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(Tn.HU),l.LFG(xO,8),l.LFG(RO,8),l.LFG(OO,8),l.LFG(PO,8),l.LFG(NO,8),l.LFG(FO,8),l.LFG(Fw,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),B4=(()=>{class n{constructor(){NS.Z.registerVersion("angularfire",Tn.q4.full,"auth-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[Lw]}),n})();var VO=L(3942);const vU="firebasestorage.googleapis.com",bU="storageBucket";class ji extends F.ZR{constructor(t,e){super(BO(t),`Firebase Storage: ${e} (${BO(t)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ji.prototype)}_codeEquals(t){return BO(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function BO(n){return"storage/"+n}function UO(){return new ji("unknown","An unknown error occurred, please check the error payload for server response.")}function wU(){return new ji("canceled","User canceled the upload/download.")}function CU(){return new ji("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function m_(n){return new ji("invalid-argument",n)}function EU(){return new ji("app-deleted","The Firebase app was deleted.")}function DU(n){return new ji("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Vw(n,t){return new ji("invalid-format","String does not match format '"+n+"': "+t)}function Bw(n){throw new ji("internal-error","Internal error: "+n)}class ps{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let i;try{i=ps.makeFromUrl(t,e)}catch{return new ps(t,"")}if(""===i.path)return i;throw function Z4(n){return new ji("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(t)}static makeFromUrl(t,e){let i=null;const r="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+r+"(/(.*))?$","i");function _(Qe){Qe.path_=decodeURIComponent(Qe.path)}const I=e.replace(/[.]/g,"\\."),Xe=[{regex:d,indices:{bucket:1,path:3},postModify:function s(Qe){"/"===Qe.path.charAt(Qe.path.length-1)&&(Qe.path_=Qe.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${I}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:_},{regex:new RegExp(`^https?://${e===vU?"(?:storage.googleapis.com|storage.cloud.google.com)":e}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:_}];for(let Qe=0;Qe<Xe.length;Qe++){const Dt=Xe[Qe],At=Dt.regex.exec(t);if(At){let tr=At[Dt.indices.path];tr||(tr=""),i=new ps(At[Dt.indices.bucket],tr),Dt.postModify(i);break}}if(null==i)throw function Y4(n){return new ji("invalid-url","Invalid URL '"+n+"'.")}(t);return i}}class J4{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function FS(n){return"string"==typeof n||n instanceof String}function IU(n){return HO()&&n instanceof Blob}function HO(){return typeof Blob<"u"}function jO(n,t,e,i){if(i<t)throw m_(`Invalid value for '${n}'. Expected ${t} or greater.`);if(i>e)throw m_(`Invalid value for '${n}'. Expected ${e} or less.`)}function id(n,t,e){let i=t;return null==e&&(i=`https://${t}`),`${e}://${i}/v0${n}`}function SU(n){const t=encodeURIComponent;let e="?";for(const i in n)n.hasOwnProperty(i)&&(e=e+(t(i)+"=")+t(n[i])+"&");return e=e.slice(0,-1),e}var Ah=(()=>{return(n=Ah||(Ah={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",Ah;var n})();class sY{constructor(t,e,i,r,s,c,d,p,_,w,I){this.url_=t,this.method_=e,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=c,this.callback_=d,this.errorCallback_=p,this.timeout_=_,this.progressCallback_=w,this.connectionFactory_=I,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((M,O)=>{this.resolve_=M,this.reject_=O,this.start_()})}start_(){const e=(i,r)=>{const s=this.resolve_,c=this.reject_,d=r.connection;if(r.wasSuccessCode)try{const p=this.callback_(d,d.getResponse());!function nY(n){return void 0!==n}(p)?s():s(p)}catch(p){c(p)}else if(null!==d){const p=UO();p.serverResponse=d.getErrorText(),c(this.errorCallback_?this.errorCallback_(d,p):p)}else c(r.canceled?this.appDelete_?EU():wU():function W4(){return new ji("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?e(0,new LS(!1,null,!0)):this.backoffId_=function eY(n,t,e){let i=1,r=null,s=null,c=!1,d=0;function p(){return 2===d}let _=!1;function w(...ie){_||(_=!0,t.apply(null,ie))}function I(ie){r=setTimeout(()=>{r=null,n(O,p())},ie)}function M(){s&&clearTimeout(s)}function O(ie,...Me){if(_)return void M();if(ie)return M(),void w.call(null,ie,...Me);if(p()||c)return M(),void w.call(null,ie,...Me);let Xe;i<64&&(i*=2),1===d?(d=2,Xe=0):Xe=1e3*(i+Math.random()),I(Xe)}let N=!1;function z(ie){N||(N=!0,M(),!_&&(null!==r?(ie||(d=2),clearTimeout(r),I(0)):ie||(d=1)))}return I(0),s=setTimeout(()=>{c=!0,z(!0)},e),z}((i,r)=>{if(r)return void i(!1,new LS(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const c=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(c),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(c),this.pendingConnection_=null;const d=s.getErrorCode()===Ah.NO_ERROR,p=s.getStatus();if(!d||this.isRetryStatusCode_(p)){const w=s.getErrorCode()===Ah.ABORT;return void i(!1,new LS(!1,null,w))}const _=-1!==this.successCodes_.indexOf(p);i(!0,new LS(_,s))})},e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function tY(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(t){const e=t>=500&&t<600,r=-1!==[408,429].indexOf(t),s=-1!==this.additionalRetryCodes_.indexOf(t);return e||r||s}}class LS{constructor(t,e,i){this.wasSuccessCode=t,this.connection=e,this.canceled=!!i}}function hY(...n){const t=function dY(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==t){const e=new t;for(let i=0;i<n.length;i++)e.append(n[i]);return e.getBlob()}if(HO())return new Blob(n);throw new ji("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Xo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class $O{constructor(t,e){this.data=t,this.contentType=e||null}}function GO(n,t){switch(n){case Xo.RAW:return new $O(TU(t));case Xo.BASE64:case Xo.BASE64URL:return new $O(AU(n,t));case Xo.DATA_URL:return new $O(function gY(n){const t=new MU(n);return t.base64?AU(Xo.BASE64,t.rest):function mY(n){let t;try{t=decodeURIComponent(n)}catch{throw Vw(Xo.DATA_URL,"Malformed data URL.")}return TU(t)}(t.rest)}(t),function _Y(n){return new MU(n).contentType}(t))}throw UO()}function TU(n){const t=[];for(let e=0;e<n.length;e++){let i=n.charCodeAt(e);i<=127?t.push(i):i<=2047?t.push(192|i>>6,128|63&i):55296==(64512&i)?e<n.length-1&&56320==(64512&n.charCodeAt(e+1))?(i=65536|(1023&i)<<10|1023&n.charCodeAt(++e),t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)):t.push(239,191,189):56320==(64512&i)?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(t)}function AU(n,t){switch(n){case Xo.BASE64:{const r=-1!==t.indexOf("-"),s=-1!==t.indexOf("_");if(r||s)throw Vw(n,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Xo.BASE64URL:{const r=-1!==t.indexOf("+"),s=-1!==t.indexOf("/");if(r||s)throw Vw(n,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let e;try{e=function pY(n){return atob(n)}(t)}catch{throw Vw(n,"Invalid character found")}const i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}class MU{constructor(t){this.base64=!1,this.contentType=null;const e=t.match(/^data:([^,]+)?,/);if(null===e)throw Vw(Xo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=e[1]||null;null!=i&&(this.base64=function yY(n,t){return n.length>=t.length&&n.substring(n.length-t.length)===t}(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=t.substring(t.indexOf(",")+1)}}class Wc{constructor(t,e){let i=0,r="";IU(t)?(this.data_=t,i=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),i=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),i=t.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(t,e){if(IU(this.data_)){const r=function fY(n,t,e){return n.webkitSlice?n.webkitSlice(t,e):n.mozSlice?n.mozSlice(t,e):n.slice?n.slice(t,e):null}(this.data_,t,e);return null===r?null:new Wc(r)}{const i=new Uint8Array(this.data_.buffer,t,e-t);return new Wc(i,!0)}}static getBlob(...t){if(HO()){const e=t.map(i=>i instanceof Wc?i.data_:i);return new Wc(hY.apply(null,e))}{const e=t.map(c=>FS(c)?GO(Xo.RAW,c).data:c.data_);let i=0;e.forEach(c=>{i+=c.byteLength});const r=new Uint8Array(i);let s=0;return e.forEach(c=>{for(let d=0;d<c.length;d++)r[s++]=c[d]}),new Wc(r,!0)}}uploadData(){return this.data_}}function zO(n){let t;try{t=JSON.parse(n)}catch{return null}return function rY(n){return"object"==typeof n&&!Array.isArray(n)}(t)?t:null}function kU(n){const t=n.lastIndexOf("/",n.length-2);return-1===t?n:n.slice(t+1)}function wY(n,t){return t}class Us{constructor(t,e,i,r){this.server=t,this.local=e||t,this.writable=!!i,this.xform=r||wY}}let VS=null;function Uw(){if(VS)return VS;const n=[];n.push(new Us("bucket")),n.push(new Us("generation")),n.push(new Us("metageneration")),n.push(new Us("name","fullPath",!0));const e=new Us("name");e.xform=function t(s,c){return function CY(n){return!FS(n)||n.length<2?n:kU(n)}(c)},n.push(e);const r=new Us("size");return r.xform=function i(s,c){return void 0!==c?Number(c):c},n.push(r),n.push(new Us("timeCreated")),n.push(new Us("updated")),n.push(new Us("md5Hash",null,!0)),n.push(new Us("cacheControl",null,!0)),n.push(new Us("contentDisposition",null,!0)),n.push(new Us("contentEncoding",null,!0)),n.push(new Us("contentLanguage",null,!0)),n.push(new Us("contentType",null,!0)),n.push(new Us("metadata","customMetadata",!0)),VS=n,VS}function xU(n,t,e){const i=zO(t);return null===i?null:function DY(n,t,e){const i={type:"file"},r=e.length;for(let s=0;s<r;s++){const c=e[s];i[c.local]=c.xform(i,t[c.server])}return function EY(n,t){Object.defineProperty(n,"ref",{get:function e(){const s=new ps(n.bucket,n.fullPath);return t._makeStorageReference(s)}})}(i,n),i}(n,i,e)}function qO(n,t){const e={},i=t.length;for(let r=0;r<i;r++){const s=t[r];s.writable&&(e[s.server]=n[s.local])}return JSON.stringify(e)}const RU="prefixes";class Yc{constructor(t,e,i,r){this.url=t,this.method=e,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Zc(n){if(!n)throw UO()}function BS(n,t){return function e(i,r){const s=xU(n,r,t);return Zc(null!==s),s}}function g_(n){return function t(e,i){let r;return r=401===e.getStatus()?e.getErrorText().includes("Firebase App Check token is invalid")?function z4(){return new ji("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function G4(){return new ji("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===e.getStatus()?function $4(n){return new ji("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===e.getStatus()?function q4(n){return new ji("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):i,r.serverResponse=i.serverResponse,r}}function Hw(n){const t=g_(n);return function e(i,r){let s=t(i,r);return 404===i.getStatus()&&(s=function j4(n){return new ji("object-not-found","Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=r.serverResponse,s}}function PU(n,t,e){const r=id(t.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,d=new Yc(r,"GET",BS(n,e),c);return d.errorHandler=Hw(t),d}function kY(n,t,e,i,r){const s={};s.prefix=t.isRoot?"":t.path+"/",e&&e.length>0&&(s.delimiter=e),i&&(s.pageToken=i),r&&(s.maxResults=r);const d=id(t.bucketOnlyServerUrl(),n.host,n._protocol),_=n.maxOperationRetryTime,w=new Yc(d,"GET",function AY(n,t){return function e(i,r){const s=function TY(n,t,e){const i=zO(e);return null===i?null:function SY(n,t,e){const i={prefixes:[],items:[],nextPageToken:e.nextPageToken};if(e[RU])for(const r of e[RU]){const s=r.replace(/\/$/,""),c=n._makeStorageReference(new ps(t,s));i.prefixes.push(c)}if(e.items)for(const r of e.items){const s=n._makeStorageReference(new ps(t,r.name));i.items.push(s)}return i}(n,t,i)}(n,t,r);return Zc(null!==s),s}}(n,t.bucket),_);return w.urlParams=s,w.errorHandler=g_(t),w}function FU(n,t,e){const i=Object.assign({},e);return i.fullPath=n.path,i.size=t.size(),i.contentType||(i.contentType=function PY(n,t){return n&&n.contentType||t&&t.type()||"application/octet-stream"}(null,t)),i}class US{constructor(t,e,i,r){this.current=t,this.total=e,this.finalized=!!i,this.metadata=r||null}}function WO(n,t){let e=null;try{e=n.getResponseHeader("X-Goog-Upload-Status")}catch{Zc(!1)}return Zc(!!e&&-1!==(t||["active"]).indexOf(e)),e}const VY={STATE_CHANGED:"state_changed"},Hs={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function YO(n){switch(n){case"running":case"pausing":case"canceling":return Hs.RUNNING;case"paused":return Hs.PAUSED;case"success":return Hs.SUCCESS;case"canceled":return Hs.CANCELED;default:return Hs.ERROR}}class BY{constructor(t,e,i){if(function iY(n){return"function"==typeof n}(t)||null!=e||null!=i)this.next=t,this.error=e??void 0,this.complete=i??void 0;else{const s=t;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function __(n){return(...t)=>{Promise.resolve().then(()=>n(...t))}}class HY extends class UY{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ah.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ah.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ah.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,e,i,r){if(this.sent_)throw Bw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return void 0!==i?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Bw("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Bw("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Bw("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Bw("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)}}{initXhr(){this.xhr_.responseType="text"}}function sc(){return new HY}class UU{constructor(t,e,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=i,this._mappings=Uw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{this._request=void 0,this._chunkMultiplier=1,r._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=r,this._transition("error"))},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals("canceled")?this.completeTransitions_():(this._error=r,this._transition("error"))},this._promise=new Promise((r,s)=>{this._resolve=r,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const t=this._transferred;return e=>this._updateProgress(t+e)}_shouldDoResumable(t){return t.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([e,i])=>{switch(this._state){case"running":t(e,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((t,e)=>{const i=function NY(n,t,e,i,r){const s=t.bucketOnlyServerUrl(),c=FU(t,i,r),d={name:c.fullPath},p=id(s,n.host,n._protocol),w={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},I=qO(c,e),N=new Yc(p,"POST",function O(z){let ie;WO(z);try{ie=z.getResponseHeader("X-Goog-Upload-URL")}catch{Zc(!1)}return Zc(FS(ie)),ie},n.maxUploadRetryTime);return N.urlParams=d,N.headers=w,N.body=I,N.errorHandler=g_(t),N}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,sc,t,e);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((e,i)=>{const r=function FY(n,t,e,i){const p=new Yc(e,"POST",function s(_){const w=WO(_,["active","final"]);let I=null;try{I=_.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Zc(!1)}I||Zc(!1);const M=Number(I);return Zc(!isNaN(M)),new US(M,i.size(),"final"===w)},n.maxUploadRetryTime);return p.headers={"X-Goog-Upload-Command":"query"},p.errorHandler=g_(t),p}(this._ref.storage,this._ref._location,t,this._blob),s=this._ref.storage._makeRequest(r,sc,e,i);this._request=s,s.getPromise().then(c=>{this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=262144*this._chunkMultiplier,e=new US(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,s)=>{let c;try{c=function LY(n,t,e,i,r,s,c,d){const p=new US(0,0);if(c?(p.current=c.current,p.total=c.total):(p.current=0,p.total=i.size()),i.size()!==p.total)throw function Q4(){return new ji("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const _=p.total-p.current;let w=_;r>0&&(w=Math.min(w,r));const I=p.current,N={"X-Goog-Upload-Command":w===_?"upload, finalize":"upload","X-Goog-Upload-Offset":`${p.current}`},z=i.slice(I,I+w);if(null===z)throw CU();const Xe=new Yc(e,"POST",function ie(Qe,Dt){const At=WO(Qe,["active","final"]),on=p.current+w,tr=i.size();let sa;return sa="final"===At?BS(t,s)(Qe,Dt):null,new US(on,tr,"final"===At,sa)},t.maxUploadRetryTime);return Xe.headers=N,Xe.body=z.uploadData(),Xe.progressCallback=d||null,Xe.errorHandler=g_(n),Xe}(this._ref._location,this._ref.storage,i,this._blob,t,this._mappings,e,this._makeProgressCallback())}catch(p){return this._error=p,void this._transition("error")}const d=this._ref.storage._makeRequest(c,sc,r,s);this._request=d,d.getPromise().then(p=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(p.current),p.finalized?(this._metadata=p.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,e)=>{const i=PU(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,sc,t,e);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,e)=>{const i=function LU(n,t,e,i,r){const s=t.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},p=function d(){let Xe="";for(let Qe=0;Qe<2;Qe++)Xe+=Math.random().toString().slice(2);return Xe}();c["Content-Type"]="multipart/related; boundary="+p;const _=FU(t,i,r),w=qO(_,e),O=Wc.getBlob("--"+p+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+w+"\r\n--"+p+"\r\nContent-Type: "+_.contentType+"\r\n\r\n",i,"\r\n--"+p+"--");if(null===O)throw CU();const N={name:_.fullPath},z=id(s,n.host,n._protocol),Me=n.maxUploadRetryTime,ze=new Yc(z,"POST",BS(n,e),Me);return ze.urlParams=N,ze.headers=c,ze.body=O.uploadData(),ze.errorHandler=g_(t),ze}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,sc,t,e);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":const e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=t,this._notifyObservers();break;case"canceled":this._error=wU(),this._state=t,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const t=YO(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,e,i,r){const s=new BY(e||void 0,i||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(t,e){return this._promise.then(t,e)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(void 0!==this._resolve){let t=!0;switch(YO(this._state)){case Hs.SUCCESS:__(this._resolve.bind(null,this.snapshot))();break;case Hs.CANCELED:case Hs.ERROR:__(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(YO(this._state)){case Hs.RUNNING:case Hs.PAUSED:t.next&&__(t.next.bind(t,this.snapshot))();break;case Hs.SUCCESS:t.complete&&__(t.complete.bind(t))();break;default:t.error&&__(t.error.bind(t,this._error))()}}resume(){const t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t}pause(){const t="running"===this._state;return t&&this._transition("pausing"),t}cancel(){const t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t}}class Dp{constructor(t,e){this._service=t,this._location=e instanceof ps?e:ps.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new Dp(t,e)}get root(){const t=new ps(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return kU(this._location.path)}get storage(){return this._service}get parent(){const t=function vY(n){if(0===n.length)return null;const t=n.lastIndexOf("/");return-1===t?"":n.slice(0,t)}(this._location.path);if(null===t)return null;const e=new ps(this._location.bucket,t);return new Dp(this._service,e)}_throwIfRoot(t){if(""===this._location.path)throw DU(t)}}function jU(n,t,e){return ZO.apply(this,arguments)}function ZO(){return(ZO=(0,De.Z)(function*(n,t,e){const r=yield $U(n,{pageToken:e});t.prefixes.push(...r.prefixes),t.items.push(...r.items),null!=r.nextPageToken&&(yield jU(n,t,r.nextPageToken))})).apply(this,arguments)}function $U(n,t){null!=t&&"number"==typeof t.maxResults&&jO("options.maxResults",1,1e3,t.maxResults);const e=t||{},i=kY(n.storage,n._location,"/",e.pageToken,e.maxResults);return n.storage.makeRequestWithTokens(i,sc)}function JY(n){n._throwIfRoot("getDownloadURL");const t=function xY(n,t,e){const r=id(t.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,d=new Yc(r,"GET",function MY(n,t){return function e(i,r){const s=xU(n,r,t);return Zc(null!==s),function IY(n,t,e,i){const r=zO(t);if(null===r||!FS(r.downloadTokens))return null;const s=r.downloadTokens;if(0===s.length)return null;const c=encodeURIComponent;return s.split(",").map(_=>{const I=n.fullPath;return id("/b/"+c(n.bucket)+"/o/"+c(I),e,i)+SU({alt:"media",token:_})})[0]}(s,r,n.host,n._protocol)}}(n,e),c);return d.errorHandler=Hw(t),d}(n.storage,n._location,Uw());return n.storage.makeRequestWithTokens(t,sc).then(e=>{if(null===e)throw function X4(){return new ji("no-download-url","The given file does not have any download URLs.")}();return e})}function GU(n,t){const e=function bY(n,t){const e=t.split("/").filter(i=>i.length>0).join("/");return 0===n.length?e:n+"/"+e}(n._location.path,t),i=new ps(n._location.bucket,e);return new Dp(n.storage,i)}function zU(n,t){if(n instanceof KO){const e=n;if(null==e._bucket)throw function K4(){return new ji("no-default-bucket","No default bucket found. Did you set the '"+bU+"' property when initializing the app?")}();const i=new Dp(e,e._bucket);return null!=t?zU(i,t):i}return void 0!==t?GU(n,t):n}function iZ(n,t){if(t&&function tZ(n){return/^[A-Za-z]+:\/\//.test(n)}(t)){if(n instanceof KO)return function nZ(n,t){return new Dp(n,t)}(n,t);throw m_("To use ref(service, url), the first argument must be a Storage instance.")}return zU(n,t)}function qU(n,t){const e=t?.[bU];return null==e?null:ps.makeFromBucketSpec(e,n)}class KO{constructor(t,e,i,r,s){this.app=t,this._authProvider=e,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=vU,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?ps.makeFromBucketSpec(r,this._host):qU(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._bucket=null!=this._url?ps.makeFromBucketSpec(this._url,t):qU(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){jO("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){jO("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}_getAuthToken(){var t=this;return(0,De.Z)(function*(){if(t._overrideAuthToken)return t._overrideAuthToken;const e=t._authProvider.getImmediate({optional:!0});if(e){const i=yield e.getToken();if(null!==i)return i.accessToken}return null})()}_getAppCheckToken(){var t=this;return(0,De.Z)(function*(){const e=t._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Dp(this,t)}_makeRequest(t,e,i,r){if(this._deleted)return new J4(EU());{const s=function uY(n,t,e,i,r,s){const c=SU(n.urlParams),d=n.url+c,p=Object.assign({},n.headers);return function lY(n,t){t&&(n["X-Firebase-GMPID"]=t)}(p,t),function oY(n,t){null!==t&&t.length>0&&(n.Authorization="Firebase "+t)}(p,e),function aY(n,t){n["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}(p,s),function cY(n,t){null!==t&&(n["X-Firebase-AppCheck"]=t)}(p,i),new sY(d,n.method,p,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r)}(t,this._appId,i,r,e,this._firebaseVersion);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(t,e){var i=this;return(0,De.Z)(function*(){const[r,s]=yield Promise.all([i._getAuthToken(),i._getAppCheckToken()]);return i._makeRequest(t,e,r,s).getPromise()})()}}const WU="@firebase/storage";function KU(n,t){return iZ(n=(0,F.m9)(n),t)}function pZ(n,{instanceIdentifier:t}){const e=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new KO(e,i,r,t,Vs.SDK_VERSION)}!function mZ(){(0,Vs._registerComponent)(new nc.wA("storage",pZ,"PUBLIC").setMultipleInstances(!0)),(0,Vs.registerVersion)(WU,"0.9.9",""),(0,Vs.registerVersion)(WU,"0.9.9","esm2017")}();class HS{constructor(t,e,i){this._delegate=t,this.task=e,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class QU{constructor(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new HS(this._delegate.snapshot,this,this._ref)}then(t,e){return this._delegate.then(i=>{if(t)return t(new HS(i,this,this._ref))},e)}on(t,e,i,r){let s;return e&&(s="function"==typeof e?c=>e(new HS(c,this,this._ref)):{next:e.next?c=>e.next(new HS(c,this,this._ref)):void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,s,i||void 0,r||void 0)}}class XU{constructor(t,e){this._delegate=t,this._service=e}get prefixes(){return this._delegate.prefixes.map(t=>new rd(t,this._service))}get items(){return this._delegate.items.map(t=>new rd(t,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class rd{constructor(t,e){this._delegate=t,this.storage=e}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(t){const e=function hZ(n,t){return GU(n,t)}(this._delegate,t);return new rd(e,this.storage)}get root(){return new rd(this._delegate.root,this.storage)}get parent(){const t=this._delegate.parent;return null==t?null:new rd(t,this.storage)}put(t,e){return this._throwIfRoot("put"),new QU(function sZ(n,t,e){return function YY(n,t,e){return n._throwIfRoot("uploadBytesResumable"),new UU(n,new Wc(t),e)}(n=(0,F.m9)(n),t,e)}(this._delegate,t,e),this)}putString(t,e=Xo.RAW,i){this._throwIfRoot("putString");const r=GO(e,t),s=Object.assign({},i);return null==s.contentType&&null!=r.contentType&&(s.contentType=r.contentType),new QU(new UU(this._delegate,new Wc(r.data,!0),s),this)}listAll(){return function cZ(n){return function KY(n){const t={prefixes:[],items:[]};return jU(n,t).then(()=>t)}(n=(0,F.m9)(n))}(this._delegate).then(t=>new XU(t,this.storage))}list(t){return function lZ(n,t){return $U(n=(0,F.m9)(n),t)}(this._delegate,t||void 0).then(e=>new XU(e,this.storage))}getMetadata(){return function oZ(n){return function QY(n){n._throwIfRoot("getMetadata");const t=PU(n.storage,n._location,Uw());return n.storage.makeRequestWithTokens(t,sc)}(n=(0,F.m9)(n))}(this._delegate)}updateMetadata(t){return function aZ(n,t){return function XY(n,t){n._throwIfRoot("updateMetadata");const e=function RY(n,t,e,i){const s=id(t.fullServerUrl(),n.host,n._protocol),d=qO(e,i),_=n.maxOperationRetryTime,w=new Yc(s,"PATCH",BS(n,i),_);return w.headers={"Content-Type":"application/json; charset=utf-8"},w.body=d,w.errorHandler=Hw(t),w}(n.storage,n._location,t,Uw());return n.storage.makeRequestWithTokens(e,sc)}(n=(0,F.m9)(n),t)}(this._delegate,t)}getDownloadURL(){return function uZ(n){return JY(n=(0,F.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function dZ(n){return function eZ(n){n._throwIfRoot("deleteObject");const t=function OY(n,t){const i=id(t.fullServerUrl(),n.host,n._protocol),d=new Yc(i,"DELETE",function c(p,_){},n.maxOperationRetryTime);return d.successCodes=[200,204],d.errorHandler=Hw(t),d}(n.storage,n._location);return n.storage.makeRequestWithTokens(t,sc)}(n=(0,F.m9)(n))}(this._delegate)}_throwIfRoot(t){if(""===this._delegate._location.path)throw DU(t)}}class JU{constructor(t,e){this.app=t,this._delegate=e}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(t){if(e2(t))throw m_("ref() expected a child path but got a URL, use refFromURL instead.");return new rd(KU(this._delegate,t),this)}refFromURL(t){if(!e2(t))throw m_("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ps.makeFromUrl(t,this._delegate.host)}catch{throw m_("refFromUrl() expected a valid full URL but got an invalid one.")}return new rd(KU(this._delegate,t),this)}setMaxUploadRetryTime(t){this._delegate.maxUploadRetryTime=t}setMaxOperationRetryTime(t){this._delegate.maxOperationRetryTime=t}useEmulator(t,e,i={}){!function fZ(n,t,e,i={}){!function rZ(n,t,e,i={}){n.host=`${t}:${e}`,n._protocol="http";const{mockUserToken:r}=i;r&&(n._overrideAuthToken="string"==typeof r?r:(0,F.Sg)(r,n.app.options.projectId))}(n,t,e,i)}(this._delegate,t,e,i)}}function e2(n){return/^[A-Za-z]+:\/\//.test(n)}function vZ(n,{instanceIdentifier:t}){const e=n.getProvider("app-compat").getImmediate(),i=n.getProvider("storage").getImmediate({identifier:t});return new JU(e,i)}function t2(n){const t=function wZ(n){return new Zi.y(t=>{const e=c=>t.next(c);e(n.snapshot);const s=n.on("state_changed",e);return n.then(c=>{e(c),t.complete()},c=>{e(n.snapshot),(c=>{t.error(c)})(c)}),function(){s()}}).pipe(Rf(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>t,percentageChanges:()=>t.pipe((0,ct.U)(e=>e.bytesTransferred/e.totalBytes*100))}}function jS(n){return{getDownloadURL:()=>et(void 0).pipe(Tn.fc,Kn(()=>n.getDownloadURL()),Tn.iC),getMetadata:()=>et(void 0).pipe(Tn.fc,Kn(()=>n.getMetadata()),Tn.iC),delete:()=>(0,mn.D)(n.delete()),child:t=>jS(n.child(t)),updateMetadata:t=>(0,mn.D)(n.updateMetadata(t)),put:(t,e)=>t2(n.put(t,e)),putString:(t,e,i)=>t2(n.putString(t,e,i)),list:t=>(0,mn.D)(n.list(t)),listAll:()=>(0,mn.D)(n.listAll())}}!function bZ(n){const t={TaskState:Hs,TaskEvent:VY,StringFormat:Xo,Storage:JU,Reference:rd};n.INTERNAL.registerComponent(new nc.wA("storage-compat",vZ,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.17")}(VO.Z);const CZ=new l.OlP("angularfire2.storageBucket"),EZ=new l.OlP("angularfire2.storage.maxUploadRetryTime"),DZ=new l.OlP("angularfire2.storage.maxOperationRetryTime"),IZ=new l.OlP("angularfire2.storage.use-emulator");let SZ=(()=>{class n{constructor(e,i,r,s,c,d,p,_,w,I){const M=(0,wr.on)(e,c,i);this.storage=(0,wr.cc)(`${M.name}.storage.${r}`,"AngularFireStorage",M.name,()=>{const O=c.runOutsideAngular(()=>M.storage(r||void 0)),N=w;return N&&O.useEmulator(...N),p&&O.setMaxUploadRetryTime(p),_&&O.setMaxOperationRetryTime(_),O},[p,_])}ref(e){return jS(this.storage.ref(e))}refFromURL(e){return jS(this.storage.refFromURL(e))}upload(e,i,r){return jS(this.storage.ref(e)).put(i,r)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(wr.Dh),l.LFG(wr.xv,8),l.LFG(CZ,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(Tn.HU),l.LFG(EZ,8),l.LFG(DZ,8),l.LFG(IZ,8),l.LFG(Fw,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),TZ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})(),AZ=(()=>{class n{constructor(){NS.Z.registerVersion("angularfire",Tn.q4.full,"gcs-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[SZ],imports:[TZ]}),n})();function QO(){return(0,_i.e)((n,t)=>{let e,i=!1;n.subscribe((0,Zn.x)(t,r=>{const s=e;e=r,i&&t.next([s,r]),i=!0}))})}function MZ(n,t,e,i,r){return(s,c)=>{let d=e,p=t,_=0;s.subscribe((0,Zn.x)(c,w=>{const I=_++;p=d?n(p,w,I):(d=!0,w),i&&c.next(p)},r&&(()=>{d&&c.next(p),c.complete()})))}}function Ip(n,t){return(0,_i.e)(MZ(n,t,arguments.length>=2,!0))}L(5881);var dt,kZ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},sd={},XO=XO||{},Gt=kZ||self;function $S(){}function JO(n){var t=typeof n;return"array"==(t="object"!=t?t:n?Array.isArray(n)?"array":t:"null")||"object"==t&&"number"==typeof n.length}function jw(n){var t=typeof n;return"object"==t&&null!=n||"function"==t}var eP="closure_uid_"+(1e9*Math.random()>>>0),RZ=0;function OZ(n,t,e){return n.call.apply(n.bind,arguments)}function PZ(n,t,e){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(t,r)}}return function(){return n.apply(t,arguments)}}function Zr(n,t,e){return(Zr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?OZ:PZ).apply(null,arguments)}function GS(n,t){var e=Array.prototype.slice.call(arguments,1);return function(){var i=e.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function Kr(n,t){function e(){}e.prototype=t.prototype,n.Z=t.prototype,n.prototype=new e,n.prototype.constructor=n,n.Vb=function(i,r,s){for(var c=Array(arguments.length-2),d=2;d<arguments.length;d++)c[d-2]=arguments[d];return t.prototype[r].apply(i,c)}}function Mh(){this.s=this.s,this.o=this.o}var FZ={};Mh.prototype.s=!1,Mh.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function xZ(n){return Object.prototype.hasOwnProperty.call(n,eP)&&n[eP]||(n[eP]=++RZ)}(this);delete FZ[n]}},Mh.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const n2=Array.prototype.indexOf?function(n,t){return Array.prototype.indexOf.call(n,t,void 0)}:function(n,t){if("string"==typeof n)return"string"!=typeof t||1!=t.length?-1:n.indexOf(t,0);for(let e=0;e<n.length;e++)if(e in n&&n[e]===t)return e;return-1},r2=Array.prototype.forEach?function(n,t,e){Array.prototype.forEach.call(n,t,e)}:function(n,t,e){const i=n.length,r="string"==typeof n?n.split(""):n;for(let s=0;s<i;s++)s in r&&t.call(e,r[s],s,n)};function s2(n){return Array.prototype.concat.apply([],arguments)}function tP(n){const t=n.length;if(0<t){const e=Array(t);for(let i=0;i<t;i++)e[i]=n[i];return e}return[]}function zS(n){return/^[\s\xa0]*$/.test(n)}var $s,o2=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function js(n,t){return-1!=n.indexOf(t)}function nP(n,t){return n<t?-1:n>t?1:0}e:{var a2=Gt.navigator;if(a2){var l2=a2.userAgent;if(l2){$s=l2;break e}}$s=""}function iP(n,t,e){for(const i in n)t.call(e,n[i],i,n)}function c2(n){const t={};for(const e in n)t[e]=n[e];return t}var u2="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function d2(n,t){let e,i;for(let r=1;r<arguments.length;r++){for(e in i=arguments[r],i)n[e]=i[e];for(let s=0;s<u2.length;s++)e=u2[s],Object.prototype.hasOwnProperty.call(i,e)&&(n[e]=i[e])}}function rP(n){return rP[" "](n),n}rP[" "]=$S;var qS,n,BZ=js($s,"Opera"),y_=js($s,"Trident")||js($s,"MSIE"),h2=js($s,"Edge"),sP=h2||y_,f2=js($s,"Gecko")&&!(js($s.toLowerCase(),"webkit")&&!js($s,"Edge"))&&!(js($s,"Trident")||js($s,"MSIE"))&&!js($s,"Edge"),UZ=js($s.toLowerCase(),"webkit")&&!js($s,"Edge");function p2(){var n=Gt.document;return n?n.documentMode:void 0}e:{var oP="",aP=(n=$s,f2?/rv:([^\);]+)(\)|;)/.exec(n):h2?/Edge\/([\d\.]+)/.exec(n):y_?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):UZ?/WebKit\/(\S+)/.exec(n):BZ?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(aP&&(oP=aP?aP[1]:""),y_){var lP=p2();if(null!=lP&&lP>parseFloat(oP)){qS=String(lP);break e}}qS=oP}var HZ={};var $Z=Gt.document&&y_&&(p2()||parseInt(qS,10))||void 0,GZ=function(){if(!Gt.addEventListener||!Object.defineProperty)return!1;var n=!1,t=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Gt.addEventListener("test",$S,t),Gt.removeEventListener("test",$S,t)}catch{}return n}();function ms(n,t){this.type=n,this.g=this.target=t,this.defaultPrevented=!1}function $w(n,t){if(ms.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var e=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=t,t=n.relatedTarget){if(f2){e:{try{rP(t.nodeName);var r=!0;break e}catch{}r=!1}r||(t=null)}}else"mouseover"==e?t=n.fromElement:"mouseout"==e&&(t=n.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:zZ[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&$w.Z.h.call(this)}}ms.prototype.h=function(){this.defaultPrevented=!0},Kr($w,ms);var zZ={2:"touch",3:"pen",4:"mouse"};$w.prototype.h=function(){$w.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Gw="closure_listenable_"+(1e6*Math.random()|0),qZ=0;function WZ(n,t,e,i,r){this.listener=n,this.proxy=null,this.src=t,this.type=e,this.capture=!!i,this.ia=r,this.key=++qZ,this.ca=this.fa=!1}function WS(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function YS(n){this.src=n,this.g={},this.h=0}function uP(n,t){var e=t.type;if(e in n.g){var s,i=n.g[e],r=n2(i,t);(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(WS(t),0==n.g[e].length&&(delete n.g[e],n.h--))}}function dP(n,t,e,i){for(var r=0;r<n.length;++r){var s=n[r];if(!s.ca&&s.listener==t&&s.capture==!!e&&s.ia==i)return r}return-1}YS.prototype.add=function(n,t,e,i,r){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var c=dP(n,t,i,r);return-1<c?(t=n[c],e||(t.fa=!1)):((t=new WZ(t,this.src,s,!!i,r)).fa=e,n.push(t)),t};var hP="closure_lm_"+(1e6*Math.random()|0),fP={};function g2(n,t,e,i,r){if(i&&i.once)return y2(n,t,e,i,r);if(Array.isArray(t)){for(var s=0;s<t.length;s++)g2(n,t[s],e,i,r);return null}return e=_P(e),n&&n[Gw]?n.N(t,e,jw(i)?!!i.capture:!!i,r):_2(n,t,e,!1,i,r)}function _2(n,t,e,i,r,s){if(!t)throw Error("Invalid event type");var c=jw(r)?!!r.capture:!!r,d=mP(n);if(d||(n[hP]=d=new YS(n)),(e=d.add(t,e,i,c,s)).proxy)return e;if(i=function YZ(){var t=ZZ;return function n(e){return t.call(n.src,n.listener,e)}}(),e.proxy=i,i.src=n,i.listener=e,n.addEventListener)GZ||(r=c),void 0===r&&(r=!1),n.addEventListener(t.toString(),i,r);else if(n.attachEvent)n.attachEvent(b2(t.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return e}function y2(n,t,e,i,r){if(Array.isArray(t)){for(var s=0;s<t.length;s++)y2(n,t[s],e,i,r);return null}return e=_P(e),n&&n[Gw]?n.O(t,e,jw(i)?!!i.capture:!!i,r):_2(n,t,e,!0,i,r)}function v2(n,t,e,i,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)v2(n,t[s],e,i,r);else i=jw(i)?!!i.capture:!!i,e=_P(e),n&&n[Gw]?(n=n.i,(t=String(t).toString())in n.g&&-1<(e=dP(s=n.g[t],e,i,r))&&(WS(s[e]),Array.prototype.splice.call(s,e,1),0==s.length&&(delete n.g[t],n.h--))):n&&(n=mP(n))&&(t=n.g[t.toString()],n=-1,t&&(n=dP(t,e,i,r)),(e=-1<n?t[n]:null)&&pP(e))}function pP(n){if("number"!=typeof n&&n&&!n.ca){var t=n.src;if(t&&t[Gw])uP(t.i,n);else{var e=n.type,i=n.proxy;t.removeEventListener?t.removeEventListener(e,i,n.capture):t.detachEvent?t.detachEvent(b2(e),i):t.addListener&&t.removeListener&&t.removeListener(i),(e=mP(t))?(uP(e,n),0==e.h&&(e.src=null,t[hP]=null)):WS(n)}}}function b2(n){return n in fP?fP[n]:fP[n]="on"+n}function ZZ(n,t){if(n.ca)n=!0;else{t=new $w(t,this);var e=n.listener,i=n.ia||n.src;n.fa&&pP(n),n=e.call(i,t)}return n}function mP(n){return(n=n[hP])instanceof YS?n:null}var gP="__closure_events_fn_"+(1e9*Math.random()>>>0);function _P(n){return"function"==typeof n?n:(n[gP]||(n[gP]=function(t){return n.handleEvent(t)}),n[gP])}function xr(){Mh.call(this),this.i=new YS(this),this.P=this,this.I=null}function Qr(n,t){var e,i=n.I;if(i)for(e=[];i;i=i.I)e.push(i);if(n=n.P,i=t.type||t,"string"==typeof t)t=new ms(t,n);else if(t instanceof ms)t.target=t.target||n;else{var r=t;d2(t=new ms(i,n),r)}if(r=!0,e)for(var s=e.length-1;0<=s;s--){var c=t.g=e[s];r=ZS(c,i,!0,t)&&r}if(r=ZS(c=t.g=n,i,!0,t)&&r,r=ZS(c,i,!1,t)&&r,e)for(s=0;s<e.length;s++)r=ZS(c=t.g=e[s],i,!1,t)&&r}function ZS(n,t,e,i){if(!(t=n.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,s=0;s<t.length;++s){var c=t[s];if(c&&!c.ca&&c.capture==e){var d=c.listener,p=c.ia||c.src;c.fa&&uP(n.i,c),r=!1!==d.call(p,i)&&r}}return r&&!i.defaultPrevented}Kr(xr,Mh),xr.prototype[Gw]=!0,xr.prototype.removeEventListener=function(n,t,e,i){v2(this,n,t,e,i)},xr.prototype.M=function(){if(xr.Z.M.call(this),this.i){var t,n=this.i;for(t in n.g){for(var e=n.g[t],i=0;i<e.length;i++)WS(e[i]);delete n.g[t],n.h--}}this.I=null},xr.prototype.N=function(n,t,e,i){return this.i.add(String(n),t,!1,e,i)},xr.prototype.O=function(n,t,e,i){return this.i.add(String(n),t,!0,e,i)};var yP=Gt.JSON.stringify;function KZ(){var n=C2;let t=null;return n.g&&(t=n.g,n.g=n.g.next,n.g||(n.h=null),t.next=null),t}var bP,w2=new class{constructor(n,t){this.i=n,this.j=t,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new XZ,n=>n.reset());class XZ{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function JZ(n){Gt.setTimeout(()=>{throw n},0)}function vP(n,t){bP||function e8(){var n=Gt.Promise.resolve(void 0);bP=function(){n.then(t8)}}(),wP||(bP(),wP=!0),C2.add(n,t)}var wP=!1,C2=new class QZ{constructor(){this.h=this.g=null}add(t,e){const i=w2.get();i.set(t,e),this.h?this.h.next=i:this.g=i,this.h=i}};function t8(){for(var n;n=KZ();){try{n.h.call(n.g)}catch(e){JZ(e)}var t=w2;t.j(n),100>t.h&&(t.h++,n.next=t.g,t.g=n)}wP=!1}function KS(n,t){xr.call(this),this.h=n||1,this.g=t||Gt,this.j=Zr(this.kb,this),this.l=Date.now()}function CP(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function EP(n,t,e){if("function"==typeof n)e&&(n=Zr(n,e));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Zr(n.handleEvent,n)}return 2147483647<Number(t)?-1:Gt.setTimeout(n,t||0)}function E2(n){n.g=EP(()=>{n.g=null,n.i&&(n.i=!1,E2(n))},n.j);const t=n.h;n.h=null,n.m.apply(null,t)}Kr(KS,xr),(dt=KS.prototype).da=!1,dt.S=null,dt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Qr(this,"tick"),this.da&&(CP(this),this.start()))}},dt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},dt.M=function(){KS.Z.M.call(this),CP(this),delete this.g};class n8 extends Mh{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:E2(this)}M(){super.M(),this.g&&(Gt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zw(n){Mh.call(this),this.h=n,this.g={}}Kr(zw,Mh);var D2=[];function I2(n,t,e,i){Array.isArray(e)||(e&&(D2[0]=e.toString()),e=D2);for(var r=0;r<e.length;r++){var s=g2(t,e[r],i||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function S2(n){iP(n.g,function(t,e){this.g.hasOwnProperty(e)&&pP(t)},n),n.g={}}function QS(){this.g=!0}function v_(n,t,e,i){n.info(function(){return"XMLHTTP TEXT ("+t+"): "+function o8(n,t){if(!n.g)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(n=0;n<e.length;n++)if(Array.isArray(e[n])){var i=e[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var c=1;c<r.length;c++)r[c]=""}}}return yP(e)}catch{return t}}(n,e)+(i?" "+i:"")})}zw.prototype.M=function(){zw.Z.M.call(this),S2(this)},zw.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},QS.prototype.Aa=function(){this.g=!1},QS.prototype.info=function(){};var Sp={},T2=null;function XS(){return T2=T2||new xr}function A2(n){ms.call(this,Sp.Ma,n)}function qw(n){const t=XS();Qr(t,new A2(t,n))}function M2(n,t){ms.call(this,Sp.STAT_EVENT,n),this.stat=t}function Gs(n){const t=XS();Qr(t,new M2(t,n))}function k2(n,t){ms.call(this,Sp.Na,n),this.size=t}function Ww(n,t){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Gt.setTimeout(function(){n()},t)}Sp.Ma="serverreachability",Kr(A2,ms),Sp.STAT_EVENT="statevent",Kr(M2,ms),Sp.Na="timingevent",Kr(k2,ms);var JS={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},x2={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function DP(){}function O2(){}DP.prototype.h=null;var TP,Yw={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function IP(){ms.call(this,"d")}function SP(){ms.call(this,"c")}function eT(){}function Zw(n,t,e,i){this.l=n,this.j=t,this.m=e,this.X=i||1,this.V=new zw(this),this.P=a8,this.W=new KS(n=sP?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new P2}function P2(){this.i=null,this.g="",this.h=!1}Kr(IP,ms),Kr(SP,ms),Kr(eT,DP),eT.prototype.g=function(){return new XMLHttpRequest},eT.prototype.i=function(){return{}},TP=new eT;var a8=45e3,AP={},tT={};function MP(n,t,e){n.K=1,n.v=oT(od(t)),n.s=e,n.U=!0,N2(n,null)}function N2(n,t){n.F=Date.now(),Kw(n),n.A=od(n.v);var e=n.A,i=n.X;Array.isArray(i)||(i=[String(i)]),G2(e.h,"t",i),n.C=0,e=n.l.H,n.h=new P2,n.g=fH(n.l,e?t:null,!n.s),0<n.O&&(n.L=new n8(Zr(n.Ia,n,n.g),n.O)),I2(n.V,n.g,"readystatechange",n.gb),t=n.H?c2(n.H):{},n.s?(n.u||(n.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,t)):(n.u="GET",n.g.ea(n.A,n.u,null,t)),qw(1),function i8(n,t,e,i,r,s){n.info(function(){if(n.g)if(s)for(var c="",d=s.split("&"),p=0;p<d.length;p++){var _=d[p].split("=");if(1<_.length){var w=_[0];_=_[1];var I=w.split("_");c=2<=I.length&&"type"==I[1]?c+(w+"=")+_+"&":c+(w+"=redacted&")}}else c=null;else c=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+"\n"+e+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function F2(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function L2(n,t,e){let r,i=!0;for(;!n.I&&n.C<e.length;){if(r=l8(n,e),r==tT){4==t&&(n.o=4,Gs(14),i=!1),v_(n.j,n.m,null,"[Incomplete Response]");break}if(r==AP){n.o=4,Gs(15),v_(n.j,n.m,e,"[Invalid Chunk]"),i=!1;break}v_(n.j,n.m,r,null),kP(n,r)}F2(n)&&r!=tT&&r!=AP&&(n.h.g="",n.C=0),4!=t||0!=e.length||n.h.h||(n.o=1,Gs(16),i=!1),n.i=n.i&&i,i?0<e.length&&!n.aa&&(n.aa=!0,(t=n.l).g==n&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+e.length),HP(t),t.L=!0,Gs(11))):(v_(n.j,n.m,e,"[Invalid Chunked Response]"),Tp(n),Qw(n))}function l8(n,t){var e=n.C,i=t.indexOf("\n",e);return-1==i?tT:(e=Number(t.substring(e,i)),isNaN(e)?AP:(i+=1)+e>t.length?tT:(t=t.substr(i,e),n.C=i+e,t))}function Kw(n){n.Y=Date.now()+n.P,V2(n,n.P)}function V2(n,t){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Ww(Zr(n.eb,n),t)}function nT(n){n.B&&(Gt.clearTimeout(n.B),n.B=null)}function Qw(n){0==n.l.G||n.I||cH(n.l,n)}function Tp(n){nT(n);var t=n.L;t&&"function"==typeof t.na&&t.na(),n.L=null,CP(n.W),S2(n.V),n.g&&(t=n.g,n.g=null,t.abort(),t.na())}function kP(n,t){try{var e=n.l;if(0!=e.G&&(e.g==n||OP(e.i,n)))if(e.I=n.N,!n.J&&OP(e.i,n)&&3==e.G){try{var i=e.Ca.g.parse(t)}catch{i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!e.u){if(e.g){if(!(e.g.F+3e3<n.F))break e;hT(e),uT(e)}UP(e),Gs(18)}}else e.ta=r[1],0<e.ta-e.U&&37500>r[2]&&e.N&&0==e.A&&!e.v&&(e.v=Ww(Zr(e.ab,e),6e3));if(1>=W2(e.i)&&e.ka){try{e.ka()}catch{}e.ka=void 0}}else kp(e,11)}else if((n.J||e.g==n)&&hT(e),!zS(t))for(r=e.Ca.g.parse(t),t=0;t<r.length;t++){let _=r[t];if(e.U=_[0],_=_[1],2==e.G)if("c"==_[0]){e.J=_[1],e.la=_[2];const w=_[3];null!=w&&(e.ma=w,e.h.info("VER="+e.ma));const I=_[4];null!=I&&(e.za=I,e.h.info("SVER="+e.za));const M=_[5];null!=M&&"number"==typeof M&&0<M&&(e.K=i=1.5*M,e.h.info("backChannelRequestTimeoutMs_="+i)),i=e;const O=n.g;if(O){const N=O.g?O.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(N){var s=i.i;!s.g&&(js(N,"spdy")||js(N,"quic")||js(N,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(PP(s,s.h),s.h=null))}if(i.D){const z=O.g?O.g.getResponseHeader("X-HTTP-Session-Id"):null;z&&(i.sa=z,vi(i.F,i.D,z))}}e.G=3,e.j&&e.j.xa(),e.$&&(e.O=Date.now()-n.F,e.h.info("Handshake RTT: "+e.O+"ms"));var c=n;if((i=e).oa=hH(i,i.H?i.la:null,i.W),c.J){Y2(i.i,c);var d=c,p=i.K;p&&d.setTimeout(p),d.B&&(nT(d),Kw(d)),i.g=c}else aH(i);0<e.l.length&&dT(e)}else"stop"!=_[0]&&"close"!=_[0]||kp(e,7);else 3==e.G&&("stop"==_[0]||"close"==_[0]?"stop"==_[0]?kp(e,7):VP(e):"noop"!=_[0]&&e.j&&e.j.wa(_),e.A=0)}qw(4)}catch{}}function xP(n,t){if(n.forEach&&"function"==typeof n.forEach)n.forEach(t,void 0);else if(JO(n)||"string"==typeof n)r2(n,t,void 0);else{if(n.T&&"function"==typeof n.T)var e=n.T();else if(n.R&&"function"==typeof n.R)e=void 0;else if(JO(n)||"string"==typeof n){e=[];for(var i=n.length,r=0;r<i;r++)e.push(r)}else for(r in e=[],i=0,n)e[i++]=r;i=function c8(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(JO(n)){for(var t=[],e=n.length,i=0;i<e;i++)t.push(n[i]);return t}for(i in t=[],e=0,n)t[e++]=n[i];return t}(n),r=i.length;for(var s=0;s<r;s++)t.call(void 0,i[s],e&&e[s],n)}}function b_(n,t){this.h={},this.g=[],this.i=0;var e=arguments.length;if(1<e){if(e%2)throw Error("Uneven number of arguments");for(var i=0;i<e;i+=2)this.set(arguments[i],arguments[i+1])}else if(n)if(n instanceof b_)for(e=n.T(),i=0;i<e.length;i++)this.set(e[i],n.get(e[i]));else for(i in n)this.set(i,n[i])}function RP(n){if(n.i!=n.g.length){for(var t=0,e=0;t<n.g.length;){var i=n.g[t];Ap(n.h,i)&&(n.g[e++]=i),t++}n.g.length=e}if(n.i!=n.g.length){var r={};for(e=t=0;t<n.g.length;)Ap(r,i=n.g[t])||(n.g[e++]=i,r[i]=1),t++;n.g.length=e}}function Ap(n,t){return Object.prototype.hasOwnProperty.call(n,t)}(dt=Zw.prototype).setTimeout=function(n){this.P=n},dt.gb=function(n){n=n.target;const t=this.L;t&&3==ad(n)?t.l():this.Ia(n)},dt.Ia=function(n){try{if(n==this.g)e:{const w=ad(this.g);var t=this.g.Da();const I=this.g.ba();if(!(3>w)&&(3!=w||sP||this.g&&(this.h.h||this.g.ga()||nH(this.g)))){this.I||4!=w||7==t||qw(8==t||0>=I?3:2),nT(this);var e=this.g.ba();this.N=e;t:if(F2(this)){var i=nH(this.g);n="";var r=i.length,s=4==ad(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Tp(this),Qw(this);var c="";break t}this.h.i=new Gt.TextDecoder}for(t=0;t<r;t++)this.h.h=!0,n+=this.h.i.decode(i[t],{stream:s&&t==r-1});i.splice(0,r),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==e,function r8(n,t,e,i,r,s,c){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+"\n"+e+"\n"+s+" "+c})}(this.j,this.u,this.A,this.m,this.X,w,e),this.i){if(this.$&&!this.J){t:{if(this.g){var d,p=this.g;if((d=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!zS(d)){var _=d;break t}}_=null}if(!(e=_)){this.i=!1,this.o=3,Gs(12),Tp(this),Qw(this);break e}v_(this.j,this.m,e,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,kP(this,e)}this.U?(L2(this,w,c),sP&&this.i&&3==w&&(I2(this.V,this.W,"tick",this.fb),this.W.start())):(v_(this.j,this.m,c,null),kP(this,c)),4==w&&Tp(this),this.i&&!this.I&&(4==w?cH(this.l,this):(this.i=!1,Kw(this)))}else 400==e&&0<c.indexOf("Unknown SID")?(this.o=3,Gs(12)):(this.o=0,Gs(13)),Tp(this),Qw(this)}}}catch{}},dt.fb=function(){if(this.g){var n=ad(this.g),t=this.g.ga();this.C<t.length&&(nT(this),L2(this,n,t),this.i&&4!=n&&Kw(this))}},dt.cancel=function(){this.I=!0,Tp(this)},dt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function s8(n,t){n.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(qw(3),Gs(17)),Tp(this),this.o=2,Qw(this)):V2(this,this.Y-n)},(dt=b_.prototype).R=function(){RP(this);for(var n=[],t=0;t<this.g.length;t++)n.push(this.h[this.g[t]]);return n},dt.T=function(){return RP(this),this.g.concat()},dt.get=function(n,t){return Ap(this.h,n)?this.h[n]:t},dt.set=function(n,t){Ap(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=t},dt.forEach=function(n,t){for(var e=this.T(),i=0;i<e.length;i++){var r=e[i],s=this.get(r);n.call(t,s,r,this)}};var B2=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Mp(n,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Mp){this.g=void 0!==t?t:n.g,iT(this,n.j),this.s=n.s,rT(this,n.i),sT(this,n.m),this.l=n.l,t=n.h;var e=new e0;e.i=t.i,t.g&&(e.g=new b_(t.g),e.h=t.h),U2(this,e),this.o=n.o}else n&&(e=String(n).match(B2))?(this.g=!!t,iT(this,e[1]||"",!0),this.s=Xw(e[2]||""),rT(this,e[3]||"",!0),sT(this,e[4]),this.l=Xw(e[5]||"",!0),U2(this,e[6]||"",!0),this.o=Xw(e[7]||"")):(this.g=!!t,this.h=new e0(null,this.g))}function od(n){return new Mp(n)}function iT(n,t,e){n.j=e?Xw(t,!0):t,n.j&&(n.j=n.j.replace(/:$/,""))}function rT(n,t,e){n.i=e?Xw(t,!0):t}function sT(n,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);n.m=t}else n.m=null}function U2(n,t,e){t instanceof e0?(n.h=t,function y8(n,t){t&&!n.j&&(kh(n),n.i=null,n.g.forEach(function(e,i){var r=i.toLowerCase();i!=r&&(j2(this,i),G2(this,r,e))},n)),n.j=t}(n.h,n.g)):(e||(t=Jw(t,g8)),n.h=new e0(t,n.g))}function vi(n,t,e){n.h.set(t,e)}function oT(n){return vi(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Xw(n,t){return n?t?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Jw(n,t,e){return"string"==typeof n?(n=encodeURI(n).replace(t,f8),e&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function f8(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Mp.prototype.toString=function(){var n=[],t=this.j;t&&n.push(Jw(t,H2,!0),":");var e=this.i;return(e||"file"==t)&&(n.push("//"),(t=this.s)&&n.push(Jw(t,H2,!0),"@"),n.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&n.push(":",String(e))),(e=this.l)&&(this.i&&"/"!=e.charAt(0)&&n.push("/"),n.push(Jw(e,"/"==e.charAt(0)?m8:p8,!0))),(e=this.h.toString())&&n.push("?",e),(e=this.o)&&n.push("#",Jw(e,_8)),n.join("")};var H2=/[#\/\?@]/g,p8=/[#\?:]/g,m8=/[#\?]/g,g8=/[#\?@]/g,_8=/#/g;function e0(n,t){this.h=this.g=null,this.i=n||null,this.j=!!t}function kh(n){n.g||(n.g=new b_,n.h=0,n.i&&function u8(n,t){if(n){n=n.split("&");for(var e=0;e<n.length;e++){var i=n[e].indexOf("="),r=null;if(0<=i){var s=n[e].substring(0,i);r=n[e].substring(i+1)}else s=n[e];t(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function j2(n,t){kh(n),t=w_(n,t),Ap(n.g.h,t)&&(n.i=null,n.h-=n.g.get(t).length,Ap((n=n.g).h,t)&&(delete n.h[t],n.i--,n.g.length>2*n.i&&RP(n)))}function $2(n,t){return kh(n),t=w_(n,t),Ap(n.g.h,t)}function G2(n,t,e){j2(n,t),0<e.length&&(n.i=null,n.g.set(w_(n,t),tP(e)),n.h+=e.length)}function w_(n,t){return t=String(t),n.j&&(t=t.toLowerCase()),t}function z2(n){this.l=n||b8,n=Gt.PerformanceNavigationTiming?0<(n=Gt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Gt.g&&Gt.g.Ea&&Gt.g.Ea()&&Gt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(dt=e0.prototype).add=function(n,t){kh(this),this.i=null,n=w_(this,n);var e=this.g.get(n);return e||this.g.set(n,e=[]),e.push(t),this.h+=1,this},dt.forEach=function(n,t){kh(this),this.g.forEach(function(e,i){r2(e,function(r){n.call(t,r,i,this)},this)},this)},dt.T=function(){kh(this);for(var n=this.g.R(),t=this.g.T(),e=[],i=0;i<t.length;i++)for(var r=n[i],s=0;s<r.length;s++)e.push(t[i]);return e},dt.R=function(n){kh(this);var t=[];if("string"==typeof n)$2(this,n)&&(t=s2(t,this.g.get(w_(this,n))));else{n=this.g.R();for(var e=0;e<n.length;e++)t=s2(t,n[e])}return t},dt.set=function(n,t){return kh(this),this.i=null,$2(this,n=w_(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[t]),this.h+=1,this},dt.get=function(n,t){return n&&0<(n=this.R(n)).length?String(n[0]):t},dt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],t=this.g.T(),e=0;e<t.length;e++){var i=t[e],r=encodeURIComponent(String(i));i=this.R(i);for(var s=0;s<i.length;s++){var c=r;""!==i[s]&&(c+="="+encodeURIComponent(String(i[s]))),n.push(c)}}return this.i=n.join("&")};var b8=10;function q2(n){return!!n.h||!!n.g&&n.g.size>=n.j}function W2(n){return n.h?1:n.g?n.g.size:0}function OP(n,t){return n.h?n.h==t:!!n.g&&n.g.has(t)}function PP(n,t){n.g?n.g.add(t):n.h=t}function Y2(n,t){n.h&&n.h==t?n.h=null:n.g&&n.g.has(t)&&n.g.delete(t)}function Z2(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let t=n.i;for(const e of n.g.values())t=t.concat(e.D);return t}return tP(n.i)}function NP(){}function w8(){this.g=new NP}function C8(n,t,e){const i=e||"";try{xP(n,function(r,s){let c=r;jw(r)&&(c=yP(r)),t.push(i+s+"="+encodeURIComponent(c))})}catch(r){throw t.push(i+"type="+encodeURIComponent("_badmap")),r}}function aT(n,t,e,i,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(i)}catch{}}function t0(n){this.l=n.$b||null,this.j=n.ib||!1}function lT(n,t){xr.call(this),this.D=n,this.u=t,this.m=void 0,this.readyState=FP,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}z2.prototype.cancel=function(){if(this.i=Z2(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},NP.prototype.stringify=function(n){return Gt.JSON.stringify(n,void 0)},NP.prototype.parse=function(n){return Gt.JSON.parse(n,void 0)},Kr(t0,DP),t0.prototype.g=function(){return new lT(this.l,this.j)},t0.prototype.i=function(n){return function(){return n}}({}),Kr(lT,xr);var FP=0;function K2(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function n0(n){n.readyState=4,n.l=null,n.j=null,n.A=null,r0(n)}function r0(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(dt=lT.prototype).open=function(n,t){if(this.readyState!=FP)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=t,this.readyState=1,r0(this)},dt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(t.body=n),(this.D||Gt).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},dt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,n0(this)),this.readyState=FP},dt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,r0(this)),this.g&&(this.readyState=3,r0(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof Gt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;K2(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},dt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var t=n.value?n.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!n.done}))&&(this.response=this.responseText+=t)}n.done?n0(this):r0(this),3==this.readyState&&K2(this)}},dt.Ua=function(n){this.g&&(this.response=this.responseText=n,n0(this))},dt.Ta=function(n){this.g&&(this.response=n,n0(this))},dt.ha=function(){this.g&&n0(this)},dt.setRequestHeader=function(n,t){this.v.append(n,t)},dt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},dt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],t=this.h.entries();for(var e=t.next();!e.done;)n.push((e=e.value)[0]+": "+e[1]),e=t.next();return n.join("\r\n")},Object.defineProperty(lT.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var D8=Gt.JSON.parse;function lr(n){xr.call(this),this.headers=new b_,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Q2,this.K=this.L=!1}Kr(lr,xr);var Q2="",I8=/^https?$/i,S8=["POST","PUT"];function A8(n){return"content-type"==n.toLowerCase()}function X2(n,t){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=t,n.m=5,J2(n),cT(n)}function J2(n){n.D||(n.D=!0,Qr(n,"complete"),Qr(n,"error"))}function eH(n){if(n.h&&typeof XO<"u"&&(!n.C[1]||4!=ad(n)||2!=n.ba()))if(n.v&&4==ad(n))EP(n.Fa,0,n);else if(Qr(n,"readystatechange"),4==ad(n)){n.h=!1;try{const d=n.ba();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var e;if(!(e=t)){var i;if(i=0===d){var r=String(n.H).match(B2)[1]||null;if(!r&&Gt.self&&Gt.self.location){var s=Gt.self.location.protocol;r=s.substr(0,s.length-1)}i=!I8.test(r?r.toLowerCase():"")}e=i}if(e)Qr(n,"complete"),Qr(n,"success");else{n.m=6;try{var c=2<ad(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.ba()+"]",J2(n)}}finally{cT(n)}}}function cT(n,t){if(n.g){tH(n);const e=n.g,i=n.C[0]?$S:null;n.g=null,n.C=null,t||Qr(n,"ready");try{e.onreadystatechange=i}catch{}}}function tH(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Gt.clearTimeout(n.A),n.A=null)}function ad(n){return n.g?n.g.readyState:0}function nH(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Q2:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function LP(n,t,e){e:{for(i in e){var i=!1;break e}i=!0}i||(e=function M8(n){let t="";return iP(n,function(e,i){t+=i,t+=":",t+=e,t+="\r\n"}),t}(e),"string"==typeof n?null!=e&&encodeURIComponent(String(e)):vi(n,t,e))}function s0(n,t,e){return e&&e.internalChannelParams&&e.internalChannelParams[n]||t}function iH(n){this.za=0,this.l=[],this.h=new QS,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=s0("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=s0("baseRetryDelayMs",5e3,n),this.$a=s0("retryDelaySeedMs",1e4,n),this.Ya=s0("forwardChannelMaxRetries",2,n),this.ra=s0("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new z2(n&&n.concurrentRequestLimit),this.Ca=new w8,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function VP(n){if(rH(n),3==n.G){var t=n.V++,e=od(n.F);vi(e,"SID",n.J),vi(e,"RID",t),vi(e,"TYPE","terminate"),o0(n,e),(t=new Zw(n,n.h,t,void 0)).K=2,t.v=oT(od(e)),e=!1,Gt.navigator&&Gt.navigator.sendBeacon&&(e=Gt.navigator.sendBeacon(t.v.toString(),"")),!e&&Gt.Image&&((new Image).src=t.v,e=!0),e||(t.g=fH(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Kw(t)}dH(n)}function uT(n){n.g&&(HP(n),n.g.cancel(),n.g=null)}function rH(n){uT(n),n.u&&(Gt.clearTimeout(n.u),n.u=null),hT(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Gt.clearTimeout(n.m),n.m=null)}function BP(n,t){n.l.push(new class{constructor(n,t){this.h=n,this.g=t}}(n.Za++,t)),3==n.G&&dT(n)}function dT(n){q2(n.i)||n.m||(n.m=!0,vP(n.Ha,n),n.C=0)}function sH(n,t){var e;e=t?t.m:n.V++;const i=od(n.F);vi(i,"SID",n.J),vi(i,"RID",e),vi(i,"AID",n.U),o0(n,i),n.o&&n.s&&LP(i,n.o,n.s),e=new Zw(n,n.h,e,n.C+1),null===n.o&&(e.H=n.s),t&&(n.l=t.D.concat(n.l)),t=oH(n,e,1e3),e.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),PP(n.i,e),MP(e,i,t)}function o0(n,t){n.j&&xP({},function(e,i){vi(t,i,e)})}function oH(n,t,e){e=Math.min(n.l.length,e);var i=n.j?Zr(n.j.Oa,n.j,n):null;e:{var r=n.l;let s=-1;for(;;){const c=["count="+e];-1==s?0<e?(s=r[0].h,c.push("ofs="+s)):s=0:c.push("ofs="+s);let d=!0;for(let p=0;p<e;p++){let _=r[p].h;const w=r[p].g;if(_-=s,0>_)s=Math.max(0,r[p].h-100),d=!1;else try{C8(w,c,"req"+_+"_")}catch{i&&i(w)}}if(d){i=c.join("&");break e}}}return n=n.l.splice(0,e),t.D=n,i}function aH(n){n.g||n.u||(n.Y=1,vP(n.Ga,n),n.A=0)}function UP(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Ww(Zr(n.Ga,n),uH(n,n.A)),n.A++,0))}function HP(n){null!=n.B&&(Gt.clearTimeout(n.B),n.B=null)}function lH(n){n.g=new Zw(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var t=od(n.oa);vi(t,"RID","rpc"),vi(t,"SID",n.J),vi(t,"CI",n.N?"0":"1"),vi(t,"AID",n.U),o0(n,t),vi(t,"TYPE","xmlhttp"),n.o&&n.s&&LP(t,n.o,n.s),n.K&&n.g.setTimeout(n.K);var e=n.g;n=n.la,e.K=1,e.v=oT(od(t)),e.s=null,e.U=!0,N2(e,n)}function hT(n){null!=n.v&&(Gt.clearTimeout(n.v),n.v=null)}function cH(n,t){var e=null;if(n.g==t){hT(n),HP(n),n.g=null;var i=2}else{if(!OP(n.i,t))return;e=t.D,Y2(n.i,t),i=1}if(n.I=t.N,0!=n.G)if(t.i)if(1==i){e=t.s?t.s.length:0,t=Date.now()-t.F;var r=n.C;Qr(i=XS(),new k2(i,e,t,r)),dT(n)}else aH(n);else if(3==(r=t.o)||0==r&&0<n.I||!(1==i&&function k8(n,t){return!(W2(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=t.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Ww(Zr(n.Ha,n,t),uH(n,n.C)),n.C++,0)))}(n,t)||2==i&&UP(n)))switch(e&&0<e.length&&(t=n.i,t.i=t.i.concat(e)),r){case 1:kp(n,5);break;case 4:kp(n,10);break;case 3:kp(n,6);break;default:kp(n,2)}}function uH(n,t){let e=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(e*=2),e*t}function kp(n,t){if(n.h.info("Error code "+t),2==t){var e=null;n.j&&(e=null);var i=Zr(n.jb,n);e||(e=new Mp("//www.google.com/images/cleardot.gif"),Gt.location&&"http"==Gt.location.protocol||iT(e,"https"),oT(e)),function E8(n,t){const e=new QS;if(Gt.Image){const i=new Image;i.onload=GS(aT,e,i,"TestLoadImage: loaded",!0,t),i.onerror=GS(aT,e,i,"TestLoadImage: error",!1,t),i.onabort=GS(aT,e,i,"TestLoadImage: abort",!1,t),i.ontimeout=GS(aT,e,i,"TestLoadImage: timeout",!1,t),Gt.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else t(!1)}(e.toString(),i)}else Gs(2);n.G=0,n.j&&n.j.va(t),dH(n),rH(n)}function dH(n){n.G=0,n.I=-1,n.j&&((0!=Z2(n.i).length||0!=n.l.length)&&(n.i.i.length=0,tP(n.l),n.l.length=0),n.j.ua())}function hH(n,t,e){let i=function d8(n){return n instanceof Mp?od(n):new Mp(n,void 0)}(e);if(""!=i.i)t&&rT(i,t+"."+i.i),sT(i,i.m);else{const r=Gt.location;i=function h8(n,t,e,i){var r=new Mp(null,void 0);return n&&iT(r,n),t&&rT(r,t),e&&sT(r,e),i&&(r.l=i),r}(r.protocol,t?t+"."+r.hostname:r.hostname,+r.port,e)}return n.aa&&iP(n.aa,function(r,s){vi(i,s,r)}),e=n.sa,(t=n.D)&&e&&vi(i,t,e),vi(i,"VER",n.ma),o0(n,i),i}function fH(n,t,e){if(t&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new lr(e&&n.Ba&&!n.qa?new t0({ib:!0}):n.qa)).L=n.H,t}function pH(){}function fT(){if(y_&&!(10<=Number($Z)))throw Error("Environmental error: no available transport.")}function Jo(n,t){xr.call(this),this.g=new iH(t),this.l=n,this.h=t&&t.messageUrlParams||null,n=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(n?n["X-WebChannel-Content-Type"]=t.messageContentType:n={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(n?n["X-WebChannel-Client-Profile"]=t.ya:n={"X-WebChannel-Client-Profile":t.ya}),this.g.P=n,(n=t&&t.httpHeadersOverwriteParam)&&!zS(n)&&(this.g.o=n),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!zS(t)&&(this.g.D=t,null!==(n=this.h)&&t in n&&t in(n=this.h)&&delete n[t]),this.j=new C_(this)}function mH(n){IP.call(this);var t=n.__sm__;if(t){e:{for(const e in t){n=e;break e}n=void 0}(this.i=n)&&(n=this.i,t=null!==t&&n in t?t[n]:void 0),this.data=t}else this.data=n}function gH(){SP.call(this),this.status=1}function C_(n){this.g=n}(dt=lr.prototype).ea=function(n,t,e,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);t=t?t.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():TP.g(),this.C=function R2(n){return n.h||(n.h=n.i())}(this.u?this.u:TP),this.g.onreadystatechange=Zr(this.Fa,this);try{this.F=!0,this.g.open(t,String(n),!0),this.F=!1}catch(s){return void X2(this,s)}n=e||"";const r=new b_(this.headers);i&&xP(i,function(s,c){r.set(c,s)}),i=function LZ(n){e:{var t=A8;const e=n.length,i="string"==typeof n?n.split(""):n;for(let r=0;r<e;r++)if(r in i&&t.call(void 0,i[r],r,n)){t=r;break e}t=-1}return 0>t?null:"string"==typeof n?n.charAt(t):n[t]}(r.T()),e=Gt.FormData&&n instanceof Gt.FormData,!(0<=n2(S8,t))||i||e||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.forEach(function(s,c){this.g.setRequestHeader(c,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{tH(this),0<this.B&&((this.K=function T8(n){return y_&&function jZ(){return function VZ(n){var t=HZ;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=n(9)}(function(){let n=0;const t=o2(String(qS)).split("."),e=o2("9").split("."),i=Math.max(t.length,e.length);for(let c=0;0==n&&c<i;c++){var r=t[c]||"",s=e[c]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==r[0].length&&0==s[0].length)break;n=nP(0==r[1].length?0:parseInt(r[1],10),0==s[1].length?0:parseInt(s[1],10))||nP(0==r[2].length,0==s[2].length)||nP(r[2],s[2]),r=r[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Zr(this.pa,this)):this.A=EP(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){X2(this,s)}},dt.pa=function(){typeof XO<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Qr(this,"timeout"),this.abort(8))},dt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Qr(this,"complete"),Qr(this,"abort"),cT(this))},dt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),cT(this,!0)),lr.Z.M.call(this)},dt.Fa=function(){this.s||(this.F||this.v||this.l?eH(this):this.cb())},dt.cb=function(){eH(this)},dt.ba=function(){try{return 2<ad(this)?this.g.status:-1}catch{return-1}},dt.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},dt.Qa=function(n){if(this.g){var t=this.g.responseText;return n&&0==t.indexOf(n)&&(t=t.substring(n.length)),D8(t)}},dt.Da=function(){return this.m},dt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(dt=iH.prototype).ma=8,dt.G=1,dt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch{}},dt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const r=new Zw(this,this.h,n,void 0);let s=this.s;if(this.P&&(s?(s=c2(s),d2(s,this.P)):s=this.P),null===this.o&&(r.H=s),this.ja)e:{for(var t=0,e=0;e<this.l.length;e++){var i=this.l[e];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=e;break e}if(4096===t||e===this.l.length-1){t=e+1;break e}}t=1e3}else t=1e3;t=oH(this,r,t),vi(e=od(this.F),"RID",n),vi(e,"CVER",22),this.D&&vi(e,"X-HTTP-Session-Id",this.D),o0(this,e),this.o&&s&&LP(e,this.o,s),PP(this.i,r),this.Ra&&vi(e,"TYPE","init"),this.ja?(vi(e,"$req",t),vi(e,"SID","null"),r.$=!0,MP(r,e,null)):MP(r,e,t),this.G=2}}else 3==this.G&&(n?sH(this,n):0==this.l.length||q2(this.i)||sH(this))},dt.Ga=function(){if(this.u=null,lH(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Ww(Zr(this.bb,this),n)}},dt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Gs(10),uT(this),lH(this))},dt.ab=function(){null!=this.v&&(this.v=null,uT(this),UP(this),Gs(19))},dt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Gs(2)):(this.h.info("Failed to ping google.com"),Gs(1))},(dt=pH.prototype).xa=function(){},dt.wa=function(){},dt.va=function(){},dt.ua=function(){},dt.Oa=function(){},fT.prototype.g=function(n,t){return new Jo(n,t)},Kr(Jo,xr),Jo.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,t=this.l,e=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),vP(Zr(n.hb,n,t))),Gs(0),n.W=t,n.aa=e||{},n.N=n.X,n.F=hH(n,null,n.W),dT(n)},Jo.prototype.close=function(){VP(this.g)},Jo.prototype.u=function(n){if("string"==typeof n){var t={};t.__data__=n,BP(this.g,t)}else this.v?((t={}).__data__=yP(n),BP(this.g,t)):BP(this.g,n)},Jo.prototype.M=function(){this.g.j=null,delete this.j,VP(this.g),delete this.g,Jo.Z.M.call(this)},Kr(mH,IP),Kr(gH,SP),Kr(C_,pH),C_.prototype.xa=function(){Qr(this.g,"a")},C_.prototype.wa=function(n){Qr(this.g,new mH(n))},C_.prototype.va=function(n){Qr(this.g,new gH(n))},C_.prototype.ua=function(){Qr(this.g,"b")},fT.prototype.createWebChannel=fT.prototype.g,Jo.prototype.send=Jo.prototype.u,Jo.prototype.open=Jo.prototype.m,Jo.prototype.close=Jo.prototype.close,JS.NO_ERROR=0,JS.TIMEOUT=8,JS.HTTP_ERROR=6,x2.COMPLETE="complete",O2.EventType=Yw,Yw.OPEN="a",Yw.CLOSE="b",Yw.ERROR="c",Yw.MESSAGE="d",xr.prototype.listen=xr.prototype.N,lr.prototype.listenOnce=lr.prototype.O,lr.prototype.getLastError=lr.prototype.La,lr.prototype.getLastErrorCode=lr.prototype.Da,lr.prototype.getStatus=lr.prototype.ba,lr.prototype.getResponseJson=lr.prototype.Qa,lr.prototype.getResponseText=lr.prototype.ga,lr.prototype.send=lr.prototype.ea;var x8=sd.createWebChannelTransport=function(){return new fT},R8=sd.getStatEventTarget=function(){return XS()},jP=sd.ErrorCode=JS,O8=sd.EventType=x2,P8=sd.Event=Sp,_H=sd.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},N8=sd.FetchXmlHttpFactory=t0,pT=sd.WebChannel=O2,F8=sd.XhrIo=lr;const yH="@firebase/firestore";class Rr{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Rr.UNAUTHENTICATED=new Rr(null),Rr.GOOGLE_CREDENTIALS=new Rr("google-credentials-uid"),Rr.FIRST_PARTY=new Rr("first-party-uid"),Rr.MOCK_USER=new Rr("mock-user");let E_="9.9.4";const xh=new ic.Yd("@firebase/firestore");function $P(){return xh.logLevel}function $e(n,...t){if(xh.logLevel<=ic.in.DEBUG){const e=t.map(GP);xh.debug(`Firestore (${E_}): ${n}`,...e)}}function Ji(n,...t){if(xh.logLevel<=ic.in.ERROR){const e=t.map(GP);xh.error(`Firestore (${E_}): ${n}`,...e)}}function xp(n,...t){if(xh.logLevel<=ic.in.WARN){const e=t.map(GP);xh.warn(`Firestore (${E_}): ${n}`,...e)}}function GP(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ft(n="Unexpected state"){const t=`FIRESTORE (${E_}) INTERNAL ASSERTION FAILED: `+n;throw Ji(t),new Error(t)}function Ut(n,t){n||ft()}function ot(n,t){return n}const ve={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Be extends F.ZR{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Or{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class vH{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class B8{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Rr.UNAUTHENTICATED))}shutdown(){}}class U8{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class H8{constructor(t){this.t=t,this.currentUser=Rr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){var i=this;let r=this.i;const s=_=>this.i!==r?(r=this.i,e(_)):Promise.resolve();let c=new Or;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Or,t.enqueueRetryable(()=>s(this.currentUser))};const d=()=>{const _=c;t.enqueueRetryable((0,De.Z)(function*(){yield _.promise,yield s(i.currentUser)}))},p=_=>{$e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(_=>p(_)),setTimeout(()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?p(_):($e("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Or)}},0),d()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?($e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ut("string"==typeof i.accessToken),new vH(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Ut(null===t||"string"==typeof t),new Rr(t)}}class j8{constructor(t,e,i,r){this.h=t,this.l=e,this.m=i,this.g=r,this.type="FirstParty",this.user=Rr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Ut(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.p.set("Authorization",t),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class $8{constructor(t,e,i,r){this.h=t,this.l=e,this.m=i,this.g=r}getToken(){return Promise.resolve(new j8(this.h,this.l,this.m,this.g))}start(t,e){t.enqueueRetryable(()=>e(Rr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class bH{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class G8{constructor(t){this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(t,e){const i=s=>{null!=s.error&&$e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const c=s.token!==this.A;return this.A=s.token,$e("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{$e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.T.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.T.getImmediate({optional:!0});s?r(s):$e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Ut("string"==typeof e.token),this.A=e.token,new bH(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function z8(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}class wH{static R(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let i="";for(;i.length<20;){const r=z8(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<e&&(i+=t.charAt(r[s]%t.length))}return i}}function zt(n,t){return n<t?-1:n>t?1:0}function D_(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}function CH(n){return n+"\0"}class bi{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Be(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Be(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Be(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Be(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return bi.fromMillis(Date.now())}static fromDate(t){return bi.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new bi(e,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?zt(this.nanoseconds,t.nanoseconds):zt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ft{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Ft(t)}static min(){return new Ft(new bi(0,0))}static max(){return new Ft(new bi(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class a0{constructor(t,e,i){void 0===e?e=0:e>t.length&&ft(),void 0===i?i=t.length-e:i>t.length-e&&ft(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return 0===a0.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof a0?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let r=0;r<i;r++){const s=t.get(r),c=e.get(r);if(s<c)return-1;if(s>c)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class wn extends a0{construct(t,e,i){return new wn(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new Be(ve.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new wn(e)}static emptyPath(){return new wn([])}}const q8=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $i extends a0{construct(t,e,i){return new $i(t,e,i)}static isValidIdentifier(t){return q8.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$i.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new $i(["__name__"])}static fromServerFormat(t){const e=[];let i="",r=0;const s=()=>{if(0===i.length)throw new Be(ve.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let c=!1;for(;r<t.length;){const d=t[r];if("\\"===d){if(r+1===t.length)throw new Be(ve.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const p=t[r+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new Be(ve.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=p,r+=2}else"`"===d?(c=!c,r++):"."!==d||c?(i+=d,r++):(s(),r++)}if(s(),c)throw new Be(ve.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new $i(e)}static emptyPath(){return new $i([])}}class nt{constructor(t){this.path=t}static fromPath(t){return new nt(wn.fromString(t))}static fromName(t){return new nt(wn.fromString(t).popFirst(5))}static empty(){return new nt(wn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===wn.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return wn.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new nt(new wn(t.slice()))}}class mT{constructor(t,e,i,r){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=r}}function zP(n){return n.fields.find(t=>2===t.kind)}function Rp(n){return n.fields.filter(t=>2!==t.kind)}mT.UNKNOWN_ID=-1;class gT{constructor(t,e){this.fieldPath=t,this.kind=e}}class l0{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new l0(0,ea.min())}}function EH(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Ft.fromTimestamp(1e9===i?new bi(e+1,0):new bi(e,i));return new ea(r,nt.empty(),t)}function DH(n){return new ea(n.readTime,n.key,-1)}class ea{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new ea(Ft.min(),nt.empty(),-1)}static max(){return new ea(Ft.max(),nt.empty(),-1)}}function qP(n,t){let e=n.readTime.compareTo(t.readTime);return 0!==e?e:(e=nt.comparator(n.documentKey,t.documentKey),0!==e?e:zt(n.largestBatchId,t.largestBatchId))}const IH="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class SH{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}function Rh(n){return WP.apply(this,arguments)}function WP(){return WP=(0,De.Z)(function*(n){if(n.code!==ve.FAILED_PRECONDITION||n.message!==IH)throw n;$e("LocalStore","Unexpectedly lost primary lease")}),WP.apply(this,arguments)}class pe{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&ft(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new pe((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(e,s).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof pe?e:pe.resolve(e)}catch(e){return pe.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):pe.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):pe.reject(e)}static resolve(t){return new pe((e,i)=>{e(t)})}static reject(t){return new pe((e,i)=>{i(t)})}static waitFor(t){return new pe((e,i)=>{let r=0,s=0,c=!1;t.forEach(d=>{++r,d.next(()=>{++s,c&&s===r&&e()},p=>i(p))}),c=!0,s===r&&e()})}static or(t){let e=pe.resolve(!1);for(const i of t)e=e.next(r=>r?pe.resolve(r):i());return e}static forEach(t,e){const i=[];return t.forEach((r,s)=>{i.push(e.call(this,r,s))}),this.waitFor(i)}static mapArray(t,e){return new pe((i,r)=>{const s=t.length,c=new Array(s);let d=0;for(let p=0;p<s;p++){const _=p;e(t[_]).next(w=>{c[_]=w,++d,d===s&&i(c)},w=>r(w))}})}static doWhile(t,e){return new pe((i,r)=>{const s=()=>{!0===t()?e().next(()=>{s()},r):i()};s()})}}class _T{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.P=new Or,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{e.error?this.P.reject(new c0(t,e.error)):this.P.resolve()},this.transaction.onerror=i=>{const r=YP(i.target.error);this.P.reject(new c0(t,r))}}static open(t,e,i,r){try{return new _T(e,t.transaction(r,i))}catch(s){throw new c0(e,s)}}get v(){return this.P.promise}abort(t){t&&this.P.reject(t),this.aborted||($e("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new K8(e)}}class oc{constructor(t,e,i){this.name=t,this.version=e,this.S=i,12.2===oc.D((0,F.z$)())&&Ji("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return $e("SimpleDb","Removing database:",t),Op(window.indexedDB.deleteDatabase(t)).toPromise()}static C(){if(!(0,F.hl)())return!1;if(oc.N())return!0;const t=(0,F.z$)(),e=oc.D(t),i=0<e&&e<10,r=oc.k(t),s=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||s)}static N(){var t;return typeof process<"u"&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.M)}static O(t,e){return t.store(e)}static D(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static k(t){const e=t.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}F(t){var e=this;return(0,De.Z)(function*(){return e.db||($e("SimpleDb","Opening database:",e.name),e.db=yield new Promise((i,r)=>{const s=indexedDB.open(e.name,e.version);s.onsuccess=c=>{i(c.target.result)},s.onblocked=()=>{r(new c0(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=c=>{const d=c.target.error;r("VersionError"===d.name?new Be(ve.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new Be(ve.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new c0(t,d))},s.onupgradeneeded=c=>{$e("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',c.oldVersion),e.S.$(c.target.result,s.transaction,c.oldVersion,e.version).next(()=>{$e("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.B&&(e.db.onversionchange=i=>e.B(i)),e.db})()}L(t){this.B=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,i,r){var s=this;return(0,De.Z)(function*(){const c="readonly"===e;let d=0;for(;;){++d;try{s.db=yield s.F(t);const p=_T.open(s.db,t,c?"readonly":"readwrite",i),_=r(p).next(w=>(p.V(),w)).catch(w=>(p.abort(w),pe.reject(w))).toPromise();return _.catch(()=>{}),yield p.v,_}catch(p){const _=p,w="FirebaseError"!==_.name&&d<3;if($e("SimpleDb","Transaction failed with error:",_.message,"Retrying:",w),s.close(),!w)return Promise.reject(_)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Z8{constructor(t){this.U=t,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(t){this.U=t}done(){this.q=!0}j(t){this.K=t}delete(){return Op(this.U.delete())}}class c0 extends Be{constructor(t,e){super(ve.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Oh(n){return"IndexedDbTransactionError"===n.name}class K8{constructor(t){this.store=t}put(t,e){let i;return void 0!==e?($e("SimpleDb","PUT",this.store.name,t,e),i=this.store.put(e,t)):($e("SimpleDb","PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),Op(i)}add(t){return $e("SimpleDb","ADD",this.store.name,t,t),Op(this.store.add(t))}get(t){return Op(this.store.get(t)).next(e=>(void 0===e&&(e=null),$e("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return $e("SimpleDb","DELETE",this.store.name,t),Op(this.store.delete(t))}count(){return $e("SimpleDb","COUNT",this.store.name),Op(this.store.count())}W(t,e){const i=this.options(t,e);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),s=[];return this.H(r,(c,d)=>{s.push(d)}).next(()=>s)}{const r=this.store.getAll(i.range);return new pe((s,c)=>{r.onerror=d=>{c(d.target.error)},r.onsuccess=d=>{s(d.target.result)}})}}J(t,e){const i=this.store.getAll(t,null===e?void 0:e);return new pe((r,s)=>{i.onerror=c=>{s(c.target.error)},i.onsuccess=c=>{r(c.target.result)}})}Y(t,e){$e("SimpleDb","DELETE ALL",this.store.name);const i=this.options(t,e);i.X=!1;const r=this.cursor(i);return this.H(r,(s,c,d)=>d.delete())}Z(t,e){let i;e?i=t:(i={},e=t);const r=this.cursor(i);return this.H(r,e)}tt(t){const e=this.cursor({});return new pe((i,r)=>{e.onerror=s=>{const c=YP(s.target.error);r(c)},e.onsuccess=s=>{const c=s.target.result;c?t(c.primaryKey,c.value).next(d=>{d?c.continue():i()}):i()}})}H(t,e){const i=[];return new pe((r,s)=>{t.onerror=c=>{s(c.target.error)},t.onsuccess=c=>{const d=c.target.result;if(!d)return void r();const p=new Z8(d),_=e(d.primaryKey,d.value,p);if(_ instanceof pe){const w=_.catch(I=>(p.done(),pe.reject(I)));i.push(w)}p.isDone?r():null===p.G?d.continue():d.continue(p.G)}}).next(()=>pe.waitFor(i))}options(t,e){let i;return void 0!==t&&("string"==typeof t?i=t:e=t),{index:i,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const i=this.store.index(t.index);return t.X?i.openKeyCursor(t.range,e):i.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function Op(n){return new pe((t,e)=>{n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{const r=YP(i.target.error);e(r)}})}let TH=!1;function YP(n){const t=oc.D((0,F.z$)());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const i=new Be("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return TH||(TH=!0,setTimeout(()=>{throw i},0)),i}}return n}class Q8{constructor(t,e){this.asyncQueue=t,this.et=e,this.task=null}start(){this.nt(15)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(t){var e=this;$e("IndexBackiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(0,De.Z)(function*(){e.task=null;try{$e("IndexBackiller",`Documents written: ${yield e.et.st()}`)}catch(i){Oh(i)?$e("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield Rh(i)}yield e.nt(1)}))}}class X8{constructor(t,e){this.localStore=t,this.persistence=e}st(t=50){var e=this;return(0,De.Z)(function*(){return e.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>e.it(i,t))})()}it(t,e){const i=new Set;let r=e,s=!0;return pe.doWhile(()=>!0===s&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(c=>{if(null!==c&&!i.has(c))return $e("IndexBackiller",`Processing collection: ${c}`),this.rt(t,c,r).next(d=>{r-=d,i.add(c)});s=!1})).next(()=>e-r)}rt(t,e,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(r=>this.localStore.localDocuments.getNextDocuments(t,e,r,i).next(s=>{const c=s.changes;return this.localStore.indexManager.updateIndexEntries(t,c).next(()=>this.ot(r,s)).next(d=>($e("IndexBackiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(t,e,d))).next(()=>c.size)}))}ot(t,e){let i=t;return e.changes.forEach((r,s)=>{const c=DH(s);qP(c,i)>0&&(i=c)}),new ea(i.readTime,i.documentKey,Math.max(e.batchId,t.largestBatchId))}}class mo{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.ut(i),this.ct=i=>e.writeSequenceNumber(i))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}function AH(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Pp(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function MH(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}mo.at=-1;class Gi{constructor(t,e){this.comparator=t,this.root=e||Xr.EMPTY}insert(t,e){return new Gi(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Xr.BLACK,null,null))}remove(t){return new Gi(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Xr.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(0===i)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(0===r)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new yT(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new yT(this.root,t,this.comparator,!1)}getReverseIterator(){return new yT(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new yT(this.root,t,this.comparator,!0)}}class yT{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?i(t.key,e):1,e&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(0===s){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Xr{constructor(t,e,i,r,s){this.key=t,this.value=e,this.color=i??Xr.RED,this.left=r??Xr.EMPTY,this.right=s??Xr.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,s){return new Xr(t??this.key,e??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,e,i),null):0===s?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Xr.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return Xr.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Xr.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Xr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ft();const t=this.left.check();if(t!==this.right.check())throw ft();return t+(this.isRed()?0:1)}}Xr.EMPTY=null,Xr.RED=!0,Xr.BLACK=!1,Xr.EMPTY=new class{constructor(){this.size=0}get key(){throw ft()}get value(){throw ft()}get color(){throw ft()}get left(){throw ft()}get right(){throw ft()}copy(n,t,e,i,r){return this}insert(n,t,e){return new Xr(n,t)}remove(n,t){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Hn{constructor(t){this.comparator=t,this.data=new Gi(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new kH(this.data.getIterator())}getIteratorFrom(t){return new kH(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof Hn)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(0!==this.comparator(r,s))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Hn(this.comparator);return e.data=t,e}}class kH{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function I_(n){return n.hasNext()?n.getNext():void 0}class ta{constructor(t){this.fields=t,t.sort($i.comparator)}static empty(){return new ta([])}unionWith(t){let e=new Hn($i.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new ta(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return D_(this.fields,t.fields,(e,i)=>e.isEqual(i))}}class Cr{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new Cr(e)}static fromUint8Array(t){const e=function(i){let r="";for(let s=0;s<i.length;++s)r+=String.fromCharCode(i[s]);return r}(t);return new Cr(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return zt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Cr.EMPTY_BYTE_STRING=new Cr("");const e5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ph(n){if(Ut(!!n),"string"==typeof n){let t=0;const e=e5.exec(n);if(Ut(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:zi(n.seconds),nanos:zi(n.nanos)}}function zi(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Np(n){return"string"==typeof n?Cr.fromBase64String(n):Cr.fromUint8Array(n)}function ZP(n){var t,e;return"server_timestamp"===(null===(e=((null===(t=n?.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function xH(n){const t=n.mapValue.fields.__previous_value__;return ZP(t)?xH(t):t}function u0(n){const t=Ph(n.mapValue.fields.__local_write_time__.timestampValue);return new bi(t.seconds,t.nanos)}class t5{constructor(t,e,i,r,s,c,d,p){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.useFetchStreams=p}}class Nh{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new Nh("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof Nh&&t.projectId===this.projectId&&t.database===this.database}}function d0(n){return null==n}function h0(n){return 0===n&&1/n==-1/0}function RH(n){return"number"==typeof n&&Number.isInteger(n)&&!h0(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Fh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},vT={nullValue:"NULL_VALUE"};function Fp(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ZP(n)?4:FH(n)?9007199254740991:10:ft()}function Kc(n,t){if(n===t)return!0;const e=Fp(n);if(e!==Fp(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return u0(n).isEqual(u0(t));case 3:return function(i,r){if("string"==typeof i.timestampValue&&"string"==typeof r.timestampValue&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const s=Ph(i.timestampValue),c=Ph(r.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return r=t,Np(n.bytesValue).isEqual(Np(r.bytesValue));case 7:return n.referenceValue===t.referenceValue;case 8:return function(i,r){return zi(i.geoPointValue.latitude)===zi(r.geoPointValue.latitude)&&zi(i.geoPointValue.longitude)===zi(r.geoPointValue.longitude)}(n,t);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return zi(i.integerValue)===zi(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const s=zi(i.doubleValue),c=zi(r.doubleValue);return s===c?h0(s)===h0(c):isNaN(s)&&isNaN(c)}return!1}(n,t);case 9:return D_(n.arrayValue.values||[],t.arrayValue.values||[],Kc);case 10:return function(i,r){const s=i.mapValue.fields||{},c=r.mapValue.fields||{};if(AH(s)!==AH(c))return!1;for(const d in s)if(s.hasOwnProperty(d)&&(void 0===c[d]||!Kc(s[d],c[d])))return!1;return!0}(n,t);default:return ft()}var r}function f0(n,t){return void 0!==(n.values||[]).find(e=>Kc(e,t))}function Lh(n,t){if(n===t)return 0;const e=Fp(n),i=Fp(t);if(e!==i)return zt(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return zt(n.booleanValue,t.booleanValue);case 2:return function(r,s){const c=zi(r.integerValue||r.doubleValue),d=zi(s.integerValue||s.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1}(n,t);case 3:return OH(n.timestampValue,t.timestampValue);case 4:return OH(u0(n),u0(t));case 5:return zt(n.stringValue,t.stringValue);case 6:return function(r,s){const c=Np(r),d=Np(s);return c.compareTo(d)}(n.bytesValue,t.bytesValue);case 7:return function(r,s){const c=r.split("/"),d=s.split("/");for(let p=0;p<c.length&&p<d.length;p++){const _=zt(c[p],d[p]);if(0!==_)return _}return zt(c.length,d.length)}(n.referenceValue,t.referenceValue);case 8:return function(r,s){const c=zt(zi(r.latitude),zi(s.latitude));return 0!==c?c:zt(zi(r.longitude),zi(s.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(r,s){const c=r.values||[],d=s.values||[];for(let p=0;p<c.length&&p<d.length;++p){const _=Lh(c[p],d[p]);if(_)return _}return zt(c.length,d.length)}(n.arrayValue,t.arrayValue);case 10:return function(r,s){if(r===Fh.mapValue&&s===Fh.mapValue)return 0;if(r===Fh.mapValue)return 1;if(s===Fh.mapValue)return-1;const c=r.fields||{},d=Object.keys(c),p=s.fields||{},_=Object.keys(p);d.sort(),_.sort();for(let w=0;w<d.length&&w<_.length;++w){const I=zt(d[w],_[w]);if(0!==I)return I;const M=Lh(c[d[w]],p[_[w]]);if(0!==M)return M}return zt(d.length,_.length)}(n.mapValue,t.mapValue);default:throw ft()}}function OH(n,t){if("string"==typeof n&&"string"==typeof t&&n.length===t.length)return zt(n,t);const e=Ph(n),i=Ph(t),r=zt(e.seconds,i.seconds);return 0!==r?r:zt(e.nanos,i.nanos)}function S_(n){return KP(n)}function KP(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=Ph(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Np(n.bytesValue).toBase64():"referenceValue"in n?nt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(t=n.geoPointValue).latitude},${t.longitude})`:"arrayValue"in n?function(i){let r="[",s=!0;for(const c of i.values||[])s?s=!1:r+=",",r+=KP(c);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let s="{",c=!0;for(const d of r)c?c=!1:s+=",",s+=`${d}:${KP(i.fields[d])}`;return s+"}"}(n.mapValue):ft();var t}function Lp(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function QP(n){return!!n&&"integerValue"in n}function p0(n){return!!n&&"arrayValue"in n}function PH(n){return!!n&&"nullValue"in n}function NH(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function bT(n){return!!n&&"mapValue"in n}function m0(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return Pp(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=m0(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=m0(n.arrayValue.values[e]);return t}return Object.assign({},n)}function FH(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function n5(n){return"nullValue"in n?vT:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Lp(Nh.empty(),nt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ft()}function r5(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Lp(Nh.empty(),nt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Fh:ft()}function LH(n,t){const e=Lh(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?-1:!n.inclusive&&t.inclusive?1:0}function VH(n,t){const e=Lh(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?1:!n.inclusive&&t.inclusive?-1:0}class Jr{constructor(t){this.value=t}static empty(){return new Jr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!bT(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=m0(e)}setAll(t){let e=$i.emptyPath(),i={},r=[];t.forEach((c,d)=>{if(!e.isImmediateParentOf(d)){const p=this.getFieldsMap(e);this.applyChanges(p,i,r),i={},r=[],e=d.popLast()}c?i[d.lastSegment()]=m0(c):r.push(d.lastSegment())});const s=this.getFieldsMap(e);this.applyChanges(s,i,r)}delete(t){const e=this.field(t.popLast());bT(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Kc(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];bT(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){Pp(e,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new Jr(m0(this.value))}}function BH(n){const t=[];return Pp(n.fields,(e,i)=>{const r=new $i([e]);if(bT(i)){const s=BH(i.mapValue).fields;if(0===s.length)t.push(r);else for(const c of s)t.push(r.child(c))}else t.push(r)}),new ta(t)}class ii{constructor(t,e,i,r,s,c){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.data=s,this.documentState=c}static newInvalidDocument(t){return new ii(t,0,Ft.min(),Ft.min(),Jr.empty(),0)}static newFoundDocument(t,e,i){return new ii(t,1,e,Ft.min(),i,0)}static newNoDocument(t,e){return new ii(t,2,e,Ft.min(),Jr.empty(),0)}static newUnknownDocument(t,e){return new ii(t,3,e,Ft.min(),Jr.empty(),2)}convertToFoundDocument(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Jr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Jr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ft.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof ii&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ii(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class s5{constructor(t,e=null,i=[],r=[],s=null,c=null,d=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=c,this.endAt=d,this.ht=null}}function UH(n,t=null,e=[],i=[],r=null,s=null,c=null){return new s5(n,t,e,i,r,s,c)}function Vp(n){const t=ot(n);if(null===t.ht){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>{return(r=i).field.canonicalString()+r.op.toString()+S_(r.value);var r}).join(","),e+="|ob:",e+=t.orderBy.map(i=>{return(r=i).field.canonicalString()+r.dir;var r}).join(","),d0(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>S_(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>S_(i)).join(",")),t.ht=e}return t.ht}function g0(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<n.orderBy.length;r++)if(!p5(n.orderBy[r],t.orderBy[r]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let r=0;r<n.filters.length;r++)if((e=n.filters[r]).op!==(i=t.filters[r]).op||!e.field.isEqual(i.field)||!Kc(e.value,i.value))return!1;var e,i;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!zH(n.startAt,t.startAt)&&zH(n.endAt,t.endAt)}function wT(n){return nt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function CT(n,t){return n.filters.filter(e=>e instanceof es&&e.field.isEqual(t))}function HH(n,t,e){let i=vT,r=!0;for(const s of CT(n,t)){let c=vT,d=!0;switch(s.op){case"<":case"<=":c=n5(s.value);break;case"==":case"in":case">=":c=s.value;break;case">":c=s.value,d=!1;break;case"!=":case"not-in":c=vT}LH({value:i,inclusive:r},{value:c,inclusive:d})<0&&(i=c,r=d)}if(null!==e)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const c=e.position[s];LH({value:i,inclusive:r},{value:c,inclusive:e.inclusive})<0&&(i=c,r=e.inclusive);break}return{value:i,inclusive:r}}function jH(n,t,e){let i=Fh,r=!0;for(const s of CT(n,t)){let c=Fh,d=!0;switch(s.op){case">=":case">":c=r5(s.value),d=!1;break;case"==":case"in":case"<=":c=s.value;break;case"<":c=s.value,d=!1;break;case"!=":case"not-in":c=Fh}VH({value:i,inclusive:r},{value:c,inclusive:d})>0&&(i=c,r=d)}if(null!==e)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const c=e.position[s];VH({value:i,inclusive:r},{value:c,inclusive:e.inclusive})>0&&(i=c,r=e.inclusive);break}return{value:i,inclusive:r}}class es extends class{}{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?"in"===e||"not-in"===e?this.lt(t,e,i):new a5(t,e,i):"array-contains"===e?new u5(t,i):"in"===e?new d5(t,i):"not-in"===e?new h5(t,i):"array-contains-any"===e?new f5(t,i):new es(t,e,i)}static lt(t,e,i){return"in"===e?new l5(t,i):new c5(t,i)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.ft(Lh(e,this.value)):null!==e&&Fp(this.value)===Fp(e)&&this.ft(Lh(e,this.value))}ft(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return ft()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class a5 extends es{constructor(t,e,i){super(t,e,i),this.key=nt.fromName(i.referenceValue)}matches(t){const e=nt.comparator(t.key,this.key);return this.ft(e)}}class l5 extends es{constructor(t,e){super(t,"in",e),this.keys=$H(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class c5 extends es{constructor(t,e){super(t,"not-in",e),this.keys=$H(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function $H(n,t){var e;return((null===(e=t.arrayValue)||void 0===e?void 0:e.values)||[]).map(i=>nt.fromName(i.referenceValue))}class u5 extends es{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return p0(e)&&f0(e.arrayValue,this.value)}}class d5 extends es{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&f0(this.value.arrayValue,e)}}class h5 extends es{constructor(t,e){super(t,"not-in",e)}matches(t){if(f0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!f0(this.value.arrayValue,e)}}class f5 extends es{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!p0(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>f0(this.value.arrayValue,i))}}class Vh{constructor(t,e){this.position=t,this.inclusive=e}}class T_{constructor(t,e="asc"){this.field=t,this.dir=e}}function p5(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}function GH(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){const s=t[r],c=n.position[r];if(i=s.field.isKeyField()?nt.comparator(nt.fromName(c.referenceValue),e.key):Lh(c,e.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function zH(n,t){if(null===n)return null===t;if(null===t||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Kc(n.position[e],t.position[e]))return!1;return!0}class ld{constructor(t,e=null,i=[],r=[],s=null,c="F",d=null,p=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=c,this.startAt=d,this.endAt=p,this._t=null,this.wt=null}}function qH(n,t,e,i,r,s,c,d){return new ld(n,t,e,i,r,s,c,d)}function A_(n){return new ld(n)}function WH(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function XP(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function JP(n){for(const t of n.filters)if(t.dt())return t.field;return null}function eN(n){return null!==n.collectionGroup}function M_(n){const t=ot(n);if(null===t._t){t._t=[];const e=JP(t),i=XP(t);if(null!==e&&null===i)e.isKeyField()||t._t.push(new T_(e)),t._t.push(new T_($i.keyField(),"asc"));else{let r=!1;for(const s of t.explicitOrderBy)t._t.push(s),s.field.isKeyField()&&(r=!0);if(!r){const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t._t.push(new T_($i.keyField(),s))}}}return t._t}function go(n){const t=ot(n);if(!t.wt)if("F"===t.limitType)t.wt=UH(t.path,t.collectionGroup,M_(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const s of M_(t))e.push(new T_(s.field,"desc"===s.dir?"asc":"desc"));const i=t.endAt?new Vh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Vh(t.startAt.position,t.startAt.inclusive):null;t.wt=UH(t.path,t.collectionGroup,e,t.filters,t.limit,i,r)}return t.wt}function ET(n,t,e){return new ld(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function _0(n,t){return g0(go(n),go(t))&&n.limitType===t.limitType}function YH(n){return`${Vp(go(n))}|lt:${n.limitType}`}function tN(n){return`Query(target=${function o5(n){let t=n.path.canonicalString();return null!==n.collectionGroup&&(t+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(t+=`, filters: [${n.filters.map(e=>{return`${(i=e).field.canonicalString()} ${i.op} ${S_(i.value)}`;var i}).join(", ")}]`),d0(n.limit)||(t+=", limit: "+n.limit),n.orderBy.length>0&&(t+=`, orderBy: [${n.orderBy.map(e=>{return`${(i=e).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),n.startAt&&(t+=", startAt: ",t+=n.startAt.inclusive?"b:":"a:",t+=n.startAt.position.map(e=>S_(e)).join(",")),n.endAt&&(t+=", endAt: ",t+=n.endAt.inclusive?"a:":"b:",t+=n.endAt.position.map(e=>S_(e)).join(",")),`Target(${t})`}(go(n))}; limitType=${n.limitType})`}function nN(n,t){return t.isFoundDocument()&&function(e,i){const r=i.key.path;return null!==e.collectionGroup?i.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(r):nt.isDocumentKey(e.path)?e.path.isEqual(r):e.path.isImmediateParentOf(r)}(n,t)&&function(e,i){for(const r of e.explicitOrderBy)if(!r.field.isKeyField()&&null===i.data.field(r.field))return!1;return!0}(n,t)&&function(e,i){for(const r of e.filters)if(!r.matches(i))return!1;return!0}(n,t)&&(i=t,!((e=n).startAt&&!function(r,s,c){const d=GH(r,s,c);return r.inclusive?d<=0:d<0}(e.startAt,M_(e),i)||e.endAt&&!function(r,s,c){const d=GH(r,s,c);return r.inclusive?d>=0:d>0}(e.endAt,M_(e),i)));var e,i}function ZH(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function KH(n){return(t,e)=>{let i=!1;for(const r of M_(n)){const s=m5(r,t,e);if(0!==s)return s;i=i||r.field.isKeyField()}return 0}}function m5(n,t,e){const i=n.field.isKeyField()?nt.comparator(t.key,e.key):function(r,s,c){const d=s.data.field(r),p=c.data.field(r);return null!==d&&null!==p?Lh(d,p):ft()}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return ft()}}function QH(n,t){if(n.gt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:h0(t)?"-0":t}}function XH(n){return{integerValue:""+n}}function JH(n,t){return RH(t)?XH(t):QH(n,t)}class DT{constructor(){this._=void 0}}function g5(n,t,e){return n instanceof k_?function(i,r){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&(s.fields.__previous_value__=r),{mapValue:s}}(e,t):n instanceof Bp?tj(n,t):n instanceof Up?nj(n,t):function(i,r){const s=ej(i,r),c=ij(s)+ij(i.yt);return QP(s)&&QP(i.yt)?XH(c):QH(i.It,c)}(n,t)}function _5(n,t,e){return n instanceof Bp?tj(n,t):n instanceof Up?nj(n,t):e}function ej(n,t){return n instanceof x_?QP(e=t)||(i=e)&&"doubleValue"in i?t:{integerValue:0}:null;var i,e}class k_ extends DT{}class Bp extends DT{constructor(t){super(),this.elements=t}}function tj(n,t){const e=rj(t);for(const i of n.elements)e.some(r=>Kc(r,i))||e.push(i);return{arrayValue:{values:e}}}class Up extends DT{constructor(t){super(),this.elements=t}}function nj(n,t){let e=rj(t);for(const i of n.elements)e=e.filter(r=>!Kc(r,i));return{arrayValue:{values:e}}}class x_ extends DT{constructor(t,e){super(),this.It=t,this.yt=e}}function ij(n){return zi(n.integerValue||n.doubleValue)}function rj(n){return p0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class y0{constructor(t,e){this.field=t,this.transform=e}}class v5{constructor(t,e){this.version=t,this.transformResults=e}}class wi{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new wi}static exists(t){return new wi(void 0,t)}static updateTime(t){return new wi(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function IT(n,t){return void 0!==n.updateTime?t.isFoundDocument()&&t.version.isEqual(n.updateTime):void 0===n.exists||n.exists===t.isFoundDocument()}class ST{}function sj(n,t){if(!n.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return n.isNoDocument()?new O_(n.key,wi.none()):new R_(n.key,n.data,wi.none());{const e=n.data,i=Jr.empty();let r=new Hn($i.comparator);for(let s of t.fields)if(!r.has(s)){let c=e.field(s);null===c&&s.length>1&&(s=s.popLast(),c=e.field(s)),null===c?i.delete(s):i.set(s,c),r=r.add(s)}return new cd(n.key,i,new ta(r.toArray()),wi.none())}}function b5(n,t,e){n instanceof R_?function(i,r,s){const c=i.value.clone(),d=lj(i.fieldTransforms,r,s.transformResults);c.setAll(d),r.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,t,e):n instanceof cd?function(i,r,s){if(!IT(i.precondition,r))return void r.convertToUnknownDocument(s.version);const c=lj(i.fieldTransforms,r,s.transformResults),d=r.data;d.setAll(aj(i)),d.setAll(c),r.convertToFoundDocument(s.version,d).setHasCommittedMutations()}(n,t,e):t.convertToNoDocument(e.version).setHasCommittedMutations()}function v0(n,t,e,i){return n instanceof R_?function(r,s,c,d){if(!IT(r.precondition,s))return c;const p=r.value.clone(),_=cj(r.fieldTransforms,d,s);return p.setAll(_),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),null}(n,t,e,i):n instanceof cd?function(r,s,c,d){if(!IT(r.precondition,s))return c;const p=cj(r.fieldTransforms,d,s),_=s.data;return _.setAll(aj(r)),_.setAll(p),s.convertToFoundDocument(s.version,_).setHasLocalMutations(),null===c?null:c.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(w=>w.field))}(n,t,e,i):(c=e,IT(n.precondition,s=t)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c);var s,c}function w5(n,t){let e=null;for(const i of n.fieldTransforms){const r=t.data.field(i.field),s=ej(i.transform,r||null);null!=s&&(null===e&&(e=Jr.empty()),e.set(i.field,s))}return e||null}function oj(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&(i=t.fieldTransforms,!!(void 0===(e=n.fieldTransforms)&&void 0===i||e&&i&&D_(e,i,(r,s)=>function y5(n,t){return n.field.isEqual(t.field)&&(i=t.transform,(e=n.transform)instanceof Bp&&i instanceof Bp||e instanceof Up&&i instanceof Up?D_(e.elements,i.elements,Kc):e instanceof x_&&i instanceof x_?Kc(e.yt,i.yt):e instanceof k_&&i instanceof k_);var e,i}(r,s))))&&(0===n.type?n.value.isEqual(t.value):1!==n.type||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask));var e,i}class R_ extends ST{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class cd extends ST{constructor(t,e,i,r,s=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function aj(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function lj(n,t,e){const i=new Map;Ut(n.length===e.length);for(let r=0;r<e.length;r++){const s=n[r],c=s.transform,d=t.data.field(s.field);i.set(s.field,_5(c,d,e[r]))}return i}function cj(n,t,e){const i=new Map;for(const r of n){const s=r.transform,c=e.data.field(r.field);i.set(r.field,g5(s,c,t))}return i}class O_ extends ST{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class iN extends ST{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class C5{constructor(t){this.count=t}}var cr,Cn;function uj(n){switch(n){default:return ft();case ve.CANCELLED:case ve.UNKNOWN:case ve.DEADLINE_EXCEEDED:case ve.RESOURCE_EXHAUSTED:case ve.INTERNAL:case ve.UNAVAILABLE:case ve.UNAUTHENTICATED:return!1;case ve.INVALID_ARGUMENT:case ve.NOT_FOUND:case ve.ALREADY_EXISTS:case ve.PERMISSION_DENIED:case ve.FAILED_PRECONDITION:case ve.ABORTED:case ve.OUT_OF_RANGE:case ve.UNIMPLEMENTED:case ve.DATA_LOSS:return!0}}function dj(n){if(void 0===n)return Ji("GRPC error has no .code"),ve.UNKNOWN;switch(n){case cr.OK:return ve.OK;case cr.CANCELLED:return ve.CANCELLED;case cr.UNKNOWN:return ve.UNKNOWN;case cr.DEADLINE_EXCEEDED:return ve.DEADLINE_EXCEEDED;case cr.RESOURCE_EXHAUSTED:return ve.RESOURCE_EXHAUSTED;case cr.INTERNAL:return ve.INTERNAL;case cr.UNAVAILABLE:return ve.UNAVAILABLE;case cr.UNAUTHENTICATED:return ve.UNAUTHENTICATED;case cr.INVALID_ARGUMENT:return ve.INVALID_ARGUMENT;case cr.NOT_FOUND:return ve.NOT_FOUND;case cr.ALREADY_EXISTS:return ve.ALREADY_EXISTS;case cr.PERMISSION_DENIED:return ve.PERMISSION_DENIED;case cr.FAILED_PRECONDITION:return ve.FAILED_PRECONDITION;case cr.ABORTED:return ve.ABORTED;case cr.OUT_OF_RANGE:return ve.OUT_OF_RANGE;case cr.UNIMPLEMENTED:return ve.UNIMPLEMENTED;case cr.DATA_LOSS:return ve.DATA_LOSS;default:return ft()}}(Cn=cr||(cr={}))[Cn.OK=0]="OK",Cn[Cn.CANCELLED=1]="CANCELLED",Cn[Cn.UNKNOWN=2]="UNKNOWN",Cn[Cn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Cn[Cn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Cn[Cn.NOT_FOUND=5]="NOT_FOUND",Cn[Cn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Cn[Cn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Cn[Cn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Cn[Cn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Cn[Cn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Cn[Cn.ABORTED=10]="ABORTED",Cn[Cn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Cn[Cn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Cn[Cn.INTERNAL=13]="INTERNAL",Cn[Cn.UNAVAILABLE=14]="UNAVAILABLE",Cn[Cn.DATA_LOSS=15]="DATA_LOSS";class Bh{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0!==i)for(const[r,s]of i)if(this.equalsFn(r,t))return s}has(t){return void 0!==this.get(t)}set(t,e){const i=this.mapKeyFn(t),r=this.inner[i];if(void 0===r)return this.inner[i]=[[t,e]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return 1===i.length?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Pp(this.inner,(e,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return MH(this.inner)}size(){return this.innerSize}}const E5=new Gi(nt.comparator);function _o(){return E5}const hj=new Gi(nt.comparator);function b0(...n){let t=hj;for(const e of n)t=t.insert(e.key,e);return t}function fj(n){let t=hj;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function Qc(){return w0()}function pj(){return w0()}function w0(){return new Bh(n=>n.toString(),(n,t)=>n.isEqual(t))}const D5=new Gi(nt.comparator),I5=new Hn(nt.comparator);function Jt(...n){let t=I5;for(const e of n)t=t.add(e);return t}const S5=new Hn(zt);function TT(){return S5}class C0{constructor(t,e,i,r,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e){const i=new Map;return i.set(t,E0.createSynthesizedTargetChangeForCurrentChange(t,e)),new C0(Ft.min(),i,TT(),_o(),Jt())}}class E0{constructor(t,e,i,r,s){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e){return new E0(Cr.EMPTY_BYTE_STRING,e,Jt(),Jt(),Jt())}}class AT{constructor(t,e,i,r){this.Tt=t,this.removedTargetIds=e,this.key=i,this.Et=r}}class mj{constructor(t,e){this.targetId=t,this.At=e}}class gj{constructor(t,e,i=Cr.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}}class _j{constructor(){this.Rt=0,this.bt=vj(),this.Pt=Cr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(t){t.approximateByteSize()>0&&(this.Vt=!0,this.Pt=t)}xt(){let t=Jt(),e=Jt(),i=Jt();return this.bt.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:ft()}}),new E0(this.Pt,this.vt,t,e,i)}Nt(){this.Vt=!1,this.bt=vj()}kt(t,e){this.Vt=!0,this.bt=this.bt.insert(t,e)}Mt(t){this.Vt=!0,this.bt=this.bt.remove(t)}Ot(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class T5{constructor(t){this.Bt=t,this.Lt=new Map,this.Ut=_o(),this.qt=yj(),this.Kt=new Hn(zt)}Gt(t){for(const e of t.Tt)t.Et&&t.Et.isFoundDocument()?this.Qt(e,t.Et):this.jt(e,t.key,t.Et);for(const e of t.removedTargetIds)this.jt(e,t.key,t.Et)}Wt(t){this.forEachTarget(t,e=>{const i=this.zt(e);switch(t.state){case 0:this.Ht(e)&&i.Ct(t.resumeToken);break;case 1:i.Ft(),i.St||i.Nt(),i.Ct(t.resumeToken);break;case 2:i.Ft(),i.St||this.removeTarget(e);break;case 3:this.Ht(e)&&(i.$t(),i.Ct(t.resumeToken));break;case 4:this.Ht(e)&&(this.Jt(e),i.Ct(t.resumeToken));break;default:ft()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Lt.forEach((i,r)=>{this.Ht(r)&&e(r)})}Yt(t){const e=t.targetId,i=t.At.count,r=this.Xt(e);if(r){const s=r.target;if(wT(s))if(0===i){const c=new nt(s.path);this.jt(e,c,ii.newNoDocument(c,Ft.min()))}else Ut(1===i);else this.Zt(e)!==i&&(this.Jt(e),this.Kt=this.Kt.add(e))}}te(t){const e=new Map;this.Lt.forEach((s,c)=>{const d=this.Xt(c);if(d){if(s.current&&wT(d.target)){const p=new nt(d.target.path);null!==this.Ut.get(p)||this.ee(c,p)||this.jt(c,p,ii.newNoDocument(p,t))}s.Dt&&(e.set(c,s.xt()),s.Nt())}});let i=Jt();this.qt.forEach((s,c)=>{let d=!0;c.forEachWhile(p=>{const _=this.Xt(p);return!_||2===_.purpose||(d=!1,!1)}),d&&(i=i.add(s))}),this.Ut.forEach((s,c)=>c.setReadTime(t));const r=new C0(t,e,this.Kt,this.Ut,i);return this.Ut=_o(),this.qt=yj(),this.Kt=new Hn(zt),r}Qt(t,e){if(!this.Ht(t))return;const i=this.ee(t,e.key)?2:0;this.zt(t).kt(e.key,i),this.Ut=this.Ut.insert(e.key,e),this.qt=this.qt.insert(e.key,this.ne(e.key).add(t))}jt(t,e,i){if(!this.Ht(t))return;const r=this.zt(t);this.ee(t,e)?r.kt(e,1):r.Mt(e),this.qt=this.qt.insert(e,this.ne(e).delete(t)),i&&(this.Ut=this.Ut.insert(e,i))}removeTarget(t){this.Lt.delete(t)}Zt(t){const e=this.zt(t).xt();return this.Bt.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ot(t){this.zt(t).Ot()}zt(t){let e=this.Lt.get(t);return e||(e=new _j,this.Lt.set(t,e)),e}ne(t){let e=this.qt.get(t);return e||(e=new Hn(zt),this.qt=this.qt.insert(t,e)),e}Ht(t){const e=null!==this.Xt(t);return e||$e("WatchChangeAggregator","Detected inactive target",t),e}Xt(t){const e=this.Lt.get(t);return e&&e.St?null:this.Bt.se(t)}Jt(t){this.Lt.set(t,new _j),this.Bt.getRemoteKeysForTarget(t).forEach(e=>{this.jt(t,e,null)})}ee(t,e){return this.Bt.getRemoteKeysForTarget(t).has(e)}}function yj(){return new Gi(nt.comparator)}function vj(){return new Gi(nt.comparator)}const A5={asc:"ASCENDING",desc:"DESCENDING"},M5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class k5{constructor(t,e){this.databaseId=t,this.gt=e}}function D0(n,t){return n.gt?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function bj(n,t){return n.gt?t.toBase64():t.toUint8Array()}function x5(n,t){return D0(n,t.toTimestamp())}function Pr(n){return Ut(!!n),Ft.fromTimestamp(function(t){const e=Ph(t);return new bi(e.seconds,e.nanos)}(n))}function rN(n,t){return(e=n,new wn(["projects",e.projectId,"databases",e.database])).child("documents").child(t).canonicalString();var e}function wj(n){const t=wn.fromString(n);return Ut(kj(t)),t}function I0(n,t){return rN(n.databaseId,t.path)}function Xc(n,t){const e=wj(t);if(e.get(1)!==n.databaseId.projectId)throw new Be(ve.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new Be(ve.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new nt(Ej(e))}function sN(n,t){return rN(n.databaseId,t)}function Cj(n){const t=wj(n);return 4===t.length?wn.emptyPath():Ej(t)}function S0(n){return new wn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Ej(n){return Ut(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Dj(n,t,e){return{name:I0(n,t),fields:e.value.mapValue.fields}}function Ij(n,t,e){const i=Xc(n,t.name),r=Pr(t.updateTime),s=new Jr({mapValue:{fields:t.fields}}),c=ii.newFoundDocument(i,r,s);return e&&c.setHasCommittedMutations(),e?c.setHasCommittedMutations():c}function T0(n,t){let e;if(t instanceof R_)e={update:Dj(n,t.key,t.value)};else if(t instanceof O_)e={delete:I0(n,t.key)};else if(t instanceof cd)e={update:Dj(n,t.key,t.data),updateMask:U5(t.fieldMask)};else{if(!(t instanceof iN))return ft();e={verify:I0(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(r,s){const c=s.transform;if(c instanceof k_)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Bp)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Up)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof x_)return{fieldPath:s.field.canonicalString(),increment:c.yt};throw ft()}(0,i))),t.precondition.isNone||(e.currentDocument=void 0!==(r=t.precondition).updateTime?{updateTime:x5(n,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:ft()),e;var r}function oN(n,t){const e=t.currentDocument?void 0!==(r=t.currentDocument).updateTime?wi.updateTime(Pr(r.updateTime)):void 0!==r.exists?wi.exists(r.exists):wi.none():wi.none(),i=t.updateTransforms?t.updateTransforms.map(r=>function(s,c){let d=null;"setToServerValue"in c?(Ut("REQUEST_TIME"===c.setToServerValue),d=new k_):"appendMissingElements"in c?d=new Bp(c.appendMissingElements.values||[]):"removeAllFromArray"in c?d=new Up(c.removeAllFromArray.values||[]):"increment"in c?d=new x_(s,c.increment):ft();const p=$i.fromServerFormat(c.fieldPath);return new y0(p,d)}(n,r)):[];var r;if(t.update){const r=Xc(n,t.update.name),s=new Jr({mapValue:{fields:t.update.fields}});if(t.updateMask){const c=new ta((t.updateMask.fieldPaths||[]).map(_=>$i.fromServerFormat(_)));return new cd(r,s,c,e,i)}return new R_(r,s,e,i)}if(t.delete){const r=Xc(n,t.delete);return new O_(r,e)}if(t.verify){const r=Xc(n,t.verify);return new iN(r,e)}return ft()}function Sj(n,t){return{documents:[sN(n,t.path)]}}function Tj(n,t){const e={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(e.parent=sN(n,i),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=sN(n,i.popLast()),e.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(p){if(0===p.length)return;const _=p.map(w=>function(I){if("=="===I.op){if(NH(I.value))return{unaryFilter:{field:P_(I.field),op:"IS_NAN"}};if(PH(I.value))return{unaryFilter:{field:P_(I.field),op:"IS_NULL"}}}else if("!="===I.op){if(NH(I.value))return{unaryFilter:{field:P_(I.field),op:"IS_NOT_NAN"}};if(PH(I.value))return{unaryFilter:{field:P_(I.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:P_(I.field),op:L5(I.op),value:I.value}}}(w));return 1===_.length?_[0]:{compositeFilter:{op:"AND",filters:_}}}(t.filters);r&&(e.structuredQuery.where=r);const s=function(p){if(0!==p.length)return p.map(_=>{return{field:P_((w=_).field),direction:F5(w.dir)};var w})}(t.orderBy);s&&(e.structuredQuery.orderBy=s);const c=(_=t.limit,n.gt||d0(_)?_:{value:_});var _,d,p;return null!==c&&(e.structuredQuery.limit=c),t.startAt&&(e.structuredQuery.startAt={before:(d=t.startAt).inclusive,values:d.position}),t.endAt&&(e.structuredQuery.endAt={before:!(p=t.endAt).inclusive,values:p.position}),e}function Aj(n){let t=Cj(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let r=null;if(i>0){Ut(1===i);const w=e.from[0];w.allDescendants?r=w.collectionId:t=t.child(w.collectionId)}let s=[];e.where&&(s=Mj(e.where));let c=[];e.orderBy&&(c=e.orderBy.map(w=>{return new T_(N_((I=w).field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction));var I}));let d=null;e.limit&&(d=function(w){let I;return I="object"==typeof w?w.value:w,d0(I)?null:I}(e.limit));let p=null;var w;e.startAt&&(p=new Vh((w=e.startAt).values||[],!!w.before));let _=null;return e.endAt&&(_=function(w){return new Vh(w.values||[],!w.before)}(e.endAt)),qH(t,r,c,s,d,"F",p,_)}function Mj(n){return n?void 0!==n.unaryFilter?[B5(n)]:void 0!==n.fieldFilter?[V5(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(t=>Mj(t)).reduce((t,e)=>t.concat(e)):ft():[]}function F5(n){return A5[n]}function L5(n){return M5[n]}function P_(n){return{fieldPath:n.canonicalString()}}function N_(n){return $i.fromServerFormat(n.fieldPath)}function V5(n){return es.create(N_(n.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ft()}}(n.fieldFilter.op),n.fieldFilter.value)}function B5(n){switch(n.unaryFilter.op){case"IS_NAN":const t=N_(n.unaryFilter.field);return es.create(t,"==",{doubleValue:NaN});case"IS_NULL":const e=N_(n.unaryFilter.field);return es.create(e,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=N_(n.unaryFilter.field);return es.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=N_(n.unaryFilter.field);return es.create(r,"!=",{nullValue:"NULL_VALUE"});default:return ft()}}function U5(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function kj(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function zs(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=xj(t)),t=H5(n.get(e),t);return xj(t)}function H5(n,t){let e=t;const i=n.length;for(let r=0;r<i;r++){const s=n.charAt(r);switch(s){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=s}}return e}function xj(n){return n+"\x01\x01"}function Jc(n){const t=n.length;if(Ut(t>=2),2===t)return Ut("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),wn.emptyPath();const e=t-2,i=[];let r="";for(let s=0;s<t;){const c=n.indexOf("\x01",s);switch((c<0||c>e)&&ft(),n.charAt(c+1)){case"\x01":const d=n.substring(s,c);let p;0===r.length?p=d:(r+=d,p=r,r=""),i.push(p);break;case"\x10":r+=n.substring(s,c),r+="\0";break;case"\x11":r+=n.substring(s,c+1);break;default:ft()}s=c+2}return new wn(i)}const Rj=["userId","batchId"];function MT(n,t){return[n,zs(t)]}function Oj(n,t,e){return[n,zs(t),e]}const j5={},$5=["prefixPath","collectionGroup","readTime","documentId"],G5=["prefixPath","collectionGroup","documentId"],z5=["collectionGroup","readTime","prefixPath","documentId"],q5=["canonicalId","targetId"],W5=["targetId","path"],Y5=["path","targetId"],Z5=["collectionId","parent"],K5=["indexId","uid"],Q5=["uid","sequenceNumber"],X5=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],J5=["indexId","uid","orderedDocumentKey"],eK=["userId","collectionPath","documentId"],tK=["userId","collectionPath","largestBatchId"],nK=["userId","collectionGroup","largestBatchId"],Pj=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],iK=[...Pj,"documentOverlays"],Nj=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Fj=Nj,rK=[...Fj,"indexConfiguration","indexState","indexEntries"];class aN extends SH{constructor(t,e){super(),this.ie=t,this.currentSequenceNumber=e}}function Nr(n,t){const e=ot(n);return oc.O(e.ie,t)}class lN{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&b5(s,t,i[r])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=v0(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=v0(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=pj();return this.mutations.forEach(r=>{const s=t.get(r.key),c=s.overlayedDocument;let d=this.applyToLocalView(c,s.mutatedFields);d=e.has(r.key)?null:d;const p=sj(c,d);null!==p&&i.set(r.key,p),c.isValidDocument()||c.convertToNoDocument(Ft.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Jt())}isEqual(t){return this.batchId===t.batchId&&D_(this.mutations,t.mutations,(e,i)=>oj(e,i))&&D_(this.baseMutations,t.baseMutations,(e,i)=>oj(e,i))}}class cN{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){Ut(t.mutations.length===i.length);let r=D5;const s=t.mutations;for(let c=0;c<s.length;c++)r=r.insert(s[c].key,i[c].version);return new cN(t,e,i,r)}}class uN{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Uh{constructor(t,e,i,r,s=Ft.min(),c=Ft.min(),d=Cr.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d}withSequenceNumber(t){return new Uh(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new Uh(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new Uh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class Lj{constructor(t){this.re=t}}function Vj(n,t){const e=t.key,i={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:kT(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document={name:I0(r=n.re,(s=t).key),fields:s.data.value.mapValue.fields,updateTime:D0(r,s.version.toTimestamp())};else if(t.isNoDocument())i.noDocument={path:e.path.toArray(),readTime:Hp(t.version)};else{if(!t.isUnknownDocument())return ft();i.unknownDocument={path:e.path.toArray(),version:Hp(t.version)}}var r,s;return i}function kT(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function Hp(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function jp(n){const t=new bi(n.seconds,n.nanoseconds);return Ft.fromTimestamp(t)}function $p(n,t){const e=(t.baseMutations||[]).map(s=>oN(n.re,s));for(let s=0;s<t.mutations.length-1;++s){const c=t.mutations[s];s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform&&(c.updateTransforms=t.mutations[s+1].transform.fieldTransforms,t.mutations.splice(s+1,1),++s)}const i=t.mutations.map(s=>oN(n.re,s)),r=bi.fromMillis(t.localWriteTimeMs);return new lN(t.batchId,r,e,i)}function A0(n){const t=jp(n.readTime),e=void 0!==n.lastLimboFreeSnapshotVersion?jp(n.lastLimboFreeSnapshotVersion):Ft.min();let i;var r;return void 0!==n.query.documents?(Ut(1===(r=n.query).documents.length),i=go(A_(Cj(r.documents[0])))):i=go(Aj(n.query)),new Uh(i,n.targetId,0,n.lastListenSequenceNumber,t,e,Cr.fromBase64String(n.resumeToken))}function Bj(n,t){const e=Hp(t.snapshotVersion),i=Hp(t.lastLimboFreeSnapshotVersion);let r;r=wT(t.target)?Sj(n.re,t.target):Tj(n.re,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Vp(t.target),readTime:e,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function dN(n){const t=Aj({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?ET(t,t.limit,"L"):t}function hN(n,t){return new uN(t.largestBatchId,oN(n.re,t.overlayMutation))}function Uj(n,t){const e=t.path.lastSegment();return[n,zs(t.path.popLast()),e]}function Hj(n,t,e,i){return{indexId:n,uid:t.uid||"",sequenceNumber:e,readTime:Hp(i.readTime),documentKey:zs(i.documentKey.path),largestBatchId:i.largestBatchId}}class oK{getBundleMetadata(t,e){return jj(t).get(e).next(i=>{if(i)return{id:(r=i).bundleId,createTime:jp(r.createTime),version:r.version};var r})}saveBundleMetadata(t,e){return jj(t).put({bundleId:(i=e).id,createTime:Hp(Pr(i.createTime)),version:i.version});var i}getNamedQuery(t,e){return $j(t).get(e).next(i=>{if(i)return{name:(r=i).name,query:dN(r.bundledQuery),readTime:jp(r.readTime)};var r})}saveNamedQuery(t,e){return $j(t).put({name:(i=e).name,readTime:Hp(Pr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function jj(n){return Nr(n,"bundles")}function $j(n){return Nr(n,"namedQueries")}class xT{constructor(t,e){this.It=t,this.userId=e}static oe(t,e){return new xT(t,e.uid||"")}getOverlay(t,e){return M0(t).get(Uj(this.userId,e)).next(i=>i?hN(this.It,i):null)}getOverlays(t,e){const i=Qc();return pe.forEach(e,r=>this.getOverlay(t,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){const r=[];return i.forEach((s,c)=>{const d=new uN(e,c);r.push(this.ue(t,d))}),pe.waitFor(r)}removeOverlaysForBatchId(t,e,i){const r=new Set;e.forEach(c=>r.add(zs(c.getCollectionPath())));const s=[];return r.forEach(c=>{const d=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,i+1],!1,!0);s.push(M0(t).Y("collectionPathOverlayIndex",d))}),pe.waitFor(s)}getOverlaysForCollection(t,e,i){const r=Qc(),s=zs(e),c=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return M0(t).W("collectionPathOverlayIndex",c).next(d=>{for(const p of d){const _=hN(this.It,p);r.set(_.getKey(),_)}return r})}getOverlaysForCollectionGroup(t,e,i,r){const s=Qc();let c;const d=IDBKeyRange.bound([this.userId,e,i],[this.userId,e,Number.POSITIVE_INFINITY],!0);return M0(t).Z({index:"collectionGroupOverlayIndex",range:d},(p,_,w)=>{const I=hN(this.It,_);s.size()<r||I.largestBatchId===c?(s.set(I.getKey(),I),c=I.largestBatchId):w.done()}).next(()=>s)}ue(t,e){return M0(t).put(function(i,r,s){const[c,d,p]=Uj(r,s.mutation.key);return{userId:r,collectionPath:d,documentId:p,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:T0(i.re,s.mutation)}}(this.It,this.userId,e))}}function M0(n){return Nr(n,"documentOverlays")}class Gp{constructor(){}ce(t,e){this.ae(t,e),e.he()}ae(t,e){if("nullValue"in t)this.le(e,5);else if("booleanValue"in t)this.le(e,10),e.fe(t.booleanValue?1:0);else if("integerValue"in t)this.le(e,15),e.fe(zi(t.integerValue));else if("doubleValue"in t){const i=zi(t.doubleValue);isNaN(i)?this.le(e,13):(this.le(e,15),h0(i)?e.fe(0):e.fe(i))}else if("timestampValue"in t){const i=t.timestampValue;this.le(e,20),"string"==typeof i?e.de(i):(e.de(`${i.seconds||""}`),e.fe(i.nanos||0))}else if("stringValue"in t)this._e(t.stringValue,e),this.we(e);else if("bytesValue"in t)this.le(e,30),e.me(Np(t.bytesValue)),this.we(e);else if("referenceValue"in t)this.ge(t.referenceValue,e);else if("geoPointValue"in t){const i=t.geoPointValue;this.le(e,45),e.fe(i.latitude||0),e.fe(i.longitude||0)}else"mapValue"in t?FH(t)?this.le(e,Number.MAX_SAFE_INTEGER):(this.ye(t.mapValue,e),this.we(e)):"arrayValue"in t?(this.pe(t.arrayValue,e),this.we(e)):ft()}_e(t,e){this.le(e,25),this.Ie(t,e)}Ie(t,e){e.de(t)}ye(t,e){const i=t.fields||{};this.le(e,55);for(const r of Object.keys(i))this._e(r,e),this.ae(i[r],e)}pe(t,e){const i=t.values||[];this.le(e,50);for(const r of i)this.ae(r,e)}ge(t,e){this.le(e,37),nt.fromName(t).path.forEach(i=>{this.le(e,60),this.Ie(i,e)})}le(t,e){t.fe(e)}we(t){t.fe(2)}}function aK(n){if(0===n)return 8;let t=0;return n>>4==0&&(t+=4,n<<=4),n>>6==0&&(t+=2,n<<=2),n>>7==0&&(t+=1),t}function Gj(n){const t=64-function(e){let i=0;for(let r=0;r<8;++r){const s=aK(255&e[r]);if(i+=s,8!==s)break}return i}(n);return Math.ceil(t/8)}Gp.Te=new Gp;class lK{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Ae(i.value),i=e.next();this.Re()}be(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Pe(i.value),i=e.next();this.ve()}Ve(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{const r=e.codePointAt(0);this.Ae(240|r>>>18),this.Ae(128|63&r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r)}}this.Re()}Se(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Pe(i);else if(i<2048)this.Pe(960|i>>>6),this.Pe(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.Pe(480|i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i);else{const r=e.codePointAt(0);this.Pe(240|r>>>18),this.Pe(128|63&r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r)}}this.ve()}De(t){const e=this.Ce(t),i=Gj(e);this.xe(1+i),this.buffer[this.position++]=255&i;for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=255&e[r]}Ne(t){const e=this.Ce(t),i=Gj(e);this.xe(1+i),this.buffer[this.position++]=~(255&i);for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=~(255&e[r])}ke(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(t){this.xe(t.length),this.buffer.set(t,this.position),this.position+=t.length}$e(){return this.buffer.slice(0,this.position)}Ce(t){const e=function(r){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,r,!1),new Uint8Array(s.buffer)}(t),i=0!=(128&e[0]);e[0]^=i?255:128;for(let r=1;r<e.length;++r)e[r]^=i?255:0;return e}Ae(t){const e=255&t;0===e?(this.Me(0),this.Me(255)):255===e?(this.Me(255),this.Me(0)):this.Me(e)}Pe(t){const e=255&t;0===e?(this.Fe(0),this.Fe(255)):255===e?(this.Fe(255),this.Fe(0)):this.Fe(t)}Re(){this.Me(0),this.Me(1)}ve(){this.Fe(0),this.Fe(1)}Me(t){this.xe(1),this.buffer[this.position++]=t}Fe(t){this.xe(1),this.buffer[this.position++]=~t}xe(t){const e=t+this.position;if(e<=this.buffer.length)return;let i=2*this.buffer.length;i<e&&(i=e);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class cK{constructor(t){this.Be=t}me(t){this.Be.Ee(t)}de(t){this.Be.Ve(t)}fe(t){this.Be.De(t)}he(){this.Be.ke()}}class uK{constructor(t){this.Be=t}me(t){this.Be.be(t)}de(t){this.Be.Se(t)}fe(t){this.Be.Ne(t)}he(){this.Be.Oe()}}class k0{constructor(){this.Be=new lK,this.Le=new cK(this.Be),this.Ue=new uK(this.Be)}seed(t){this.Be.seed(t)}qe(t){return 0===t?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class zp{constructor(t,e,i,r){this.indexId=t,this.documentKey=e,this.arrayValue=i,this.directionalValue=r}Ke(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,i=new Uint8Array(e);return i.set(this.directionalValue,0),e!==t?i.set([0],this.directionalValue.length):++i[i.length-1],new zp(this.indexId,this.documentKey,this.arrayValue,i)}}function qp(n,t){let e=n.indexId-t.indexId;return 0!==e?e:(e=zj(n.arrayValue,t.arrayValue),0!==e?e:(e=zj(n.directionalValue,t.directionalValue),0!==e?e:nt.comparator(n.documentKey,t.documentKey)))}function zj(n,t){for(let e=0;e<n.length&&e<t.length;++e){const i=n[e]-t[e];if(0!==i)return i}return n.length-t.length}class dK{constructor(t){this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ge=t.orderBy,this.Qe=[];for(const e of t.filters){const i=e;i.dt()?this.je=i:this.Qe.push(i)}}We(t){const e=zP(t);if(void 0!==e&&!this.ze(e))return!1;const i=Rp(t);let r=0,s=0;for(;r<i.length&&this.ze(i[r]);++r);if(r===i.length)return!0;if(void 0!==this.je){const c=i[r];if(!this.He(this.je,c)||!this.Je(this.Ge[s++],c))return!1;++r}for(;r<i.length;++r){const c=i[r];if(s>=this.Ge.length||!this.Je(this.Ge[s++],c))return!1}return!0}ze(t){for(const e of this.Qe)if(this.He(e,t))return!0;return!1}He(t,e){return!(void 0===t||!t.field.isEqual(e.fieldPath))&&2===e.kind==("array-contains"===t.op||"array-contains-any"===t.op)}Je(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}class hK{constructor(){this.Ye=new fN}addToCollectionParentIndex(t,e){return this.Ye.add(e),pe.resolve()}getCollectionParents(t,e){return pe.resolve(this.Ye.getEntries(e))}addFieldIndex(t,e){return pe.resolve()}deleteFieldIndex(t,e){return pe.resolve()}getDocumentsMatchingTarget(t,e){return pe.resolve(null)}getIndexType(t,e){return pe.resolve(0)}getFieldIndexes(t,e){return pe.resolve([])}getNextCollectionGroupToUpdate(t){return pe.resolve(null)}getMinOffset(t,e){return pe.resolve(ea.min())}getMinOffsetFromCollectionGroup(t,e){return pe.resolve(ea.min())}updateCollectionGroup(t,e,i){return pe.resolve()}updateIndexEntries(t,e){return pe.resolve()}}class fN{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new Hn(wn.comparator),s=!r.has(i);return this.index[e]=r.add(i),s}has(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new Hn(wn.comparator)).toArray()}}const RT=new Uint8Array(0);class fK{constructor(t,e){this.user=t,this.databaseId=e,this.Xe=new fN,this.Ze=new Bh(i=>Vp(i),(i,r)=>g0(i,r)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.Xe.has(e)){const i=e.lastSegment(),r=e.popLast();t.addOnCommittedListener(()=>{this.Xe.add(e)});const s={collectionId:i,parent:zs(r)};return qj(t).put(s)}return pe.resolve()}getCollectionParents(t,e){const i=[],r=IDBKeyRange.bound([e,""],[CH(e),""],!1,!0);return qj(t).W(r).next(s=>{for(const c of s){if(c.collectionId!==e)break;i.push(Jc(c.parent))}return i})}addFieldIndex(t,e){const i=OT(t),r={indexId:(c=e).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var c;delete r.indexId;const s=i.add(r);if(e.indexState){const c=R0(t);return s.next(d=>{c.put(Hj(d,this.user,e.indexState.sequenceNumber,e.indexState.offset))})}return s.next()}deleteFieldIndex(t,e){const i=OT(t),r=R0(t),s=x0(t);return i.delete(e.indexId).next(()=>r.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}getDocumentsMatchingTarget(t,e){const i=x0(t);let r=!0;const s=new Map;return pe.forEach(this.tn(e),c=>this.en(t,c).next(d=>{r&&(r=!!d),s.set(c,d)})).next(()=>{if(r){let c=Jt();const d=[];return pe.forEach(s,(p,_)=>{var w;$e("IndexedDbIndexManager",`Using index ${w=p,`id=${w.indexId}|cg=${w.collectionGroup}|f=${w.fields.map(Xe=>`${Xe.fieldPath}:${Xe.kind}`).join(",")}`} to execute ${Vp(e)}`);const I=function(Xe,Qe){const Dt=zP(Qe);if(void 0===Dt)return null;for(const At of CT(Xe,Dt.fieldPath))switch(At.op){case"array-contains-any":return At.value.arrayValue.values||[];case"array-contains":return[At.value]}return null}(_,p),M=function(Xe,Qe){const Dt=new Map;for(const At of Rp(Qe))for(const on of CT(Xe,At.fieldPath))switch(on.op){case"==":case"in":Dt.set(At.fieldPath.canonicalString(),on.value);break;case"not-in":case"!=":return Dt.set(At.fieldPath.canonicalString(),on.value),Array.from(Dt.values())}return null}(_,p),O=function(Xe,Qe){const Dt=[];let At=!0;for(const on of Rp(Qe)){const tr=0===on.kind?HH(Xe,on.fieldPath,Xe.startAt):jH(Xe,on.fieldPath,Xe.startAt);Dt.push(tr.value),At&&(At=tr.inclusive)}return new Vh(Dt,At)}(_,p),N=function(Xe,Qe){const Dt=[];let At=!0;for(const on of Rp(Qe)){const tr=0===on.kind?jH(Xe,on.fieldPath,Xe.endAt):HH(Xe,on.fieldPath,Xe.endAt);Dt.push(tr.value),At&&(At=tr.inclusive)}return new Vh(Dt,At)}(_,p),z=this.nn(p,_,O),ie=this.nn(p,_,N),Me=this.sn(p,_,M),ze=this.rn(p.indexId,I,z,O.inclusive,ie,N.inclusive,Me);return pe.forEach(ze,Xe=>i.J(Xe,e.limit).next(Qe=>{Qe.forEach(Dt=>{const At=nt.fromSegments(Dt.documentKey);c.has(At)||(c=c.add(At),d.push(At))})}))}).next(()=>d)}return pe.resolve(null)})}tn(t){let e=this.Ze.get(t);return e||(e=[t],this.Ze.set(t,e),e)}rn(t,e,i,r,s,c,d){const p=(null!=e?e.length:1)*Math.max(i.length,s.length),_=p/(null!=e?e.length:1),w=[];for(let I=0;I<p;++I){const M=e?this.on(e[I/_]):RT,O=this.un(t,M,i[I%_],r),N=this.cn(t,M,s[I%_],c),z=d.map(ie=>this.un(t,M,ie,!0));w.push(...this.createRange(O,N,z))}return w}un(t,e,i,r){const s=new zp(t,nt.empty(),e,i);return r?s:s.Ke()}cn(t,e,i,r){const s=new zp(t,nt.empty(),e,i);return r?s.Ke():s}en(t,e){const i=new dK(e),r=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,r).next(s=>{let c=null;for(const d of s)i.We(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c})}getIndexType(t,e){let i=2;return pe.forEach(this.tn(e),r=>this.en(t,r).next(s=>{s?0!==i&&s.fields.length<function(c){let d=new Hn($i.comparator),p=!1;for(const _ of c.filters){const w=_;w.field.isKeyField()||("array-contains"===w.op||"array-contains-any"===w.op?p=!0:d=d.add(w.field))}for(const _ of c.orderBy)_.field.isKeyField()||(d=d.add(_.field));return d.size+(p?1:0)}(r)&&(i=1):i=0})).next(()=>i)}an(t,e){const i=new k0;for(const r of Rp(t)){const s=e.data.field(r.fieldPath);if(null==s)return null;const c=i.qe(r.kind);Gp.Te.ce(s,c)}return i.$e()}on(t){const e=new k0;return Gp.Te.ce(t,e.qe(0)),e.$e()}hn(t,e){const i=new k0;return Gp.Te.ce(Lp(this.databaseId,e),i.qe(function(r){const s=Rp(r);return 0===s.length?0:s[s.length-1].kind}(t))),i.$e()}sn(t,e,i){if(null===i)return[];let r=[];r.push(new k0);let s=0;for(const c of Rp(t)){const d=i[s++];for(const p of r)if(this.ln(e,c.fieldPath)&&p0(d))r=this.fn(r,c,d);else{const _=p.qe(c.kind);Gp.Te.ce(d,_)}}return this.dn(r)}nn(t,e,i){return this.sn(t,e,i.position)}dn(t){const e=[];for(let i=0;i<t.length;++i)e[i]=t[i].$e();return e}fn(t,e,i){const r=[...t],s=[];for(const c of i.arrayValue.values||[])for(const d of r){const p=new k0;p.seed(d.$e()),Gp.Te.ce(c,p.qe(e.kind)),s.push(p)}return s}ln(t,e){return!!t.filters.find(i=>i instanceof es&&i.field.isEqual(e)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(t,e){const i=OT(t),r=R0(t);return(e?i.W("collectionGroupIndex",IDBKeyRange.bound(e,e)):i.W()).next(s=>{const c=[];return pe.forEach(s,d=>r.get([d.indexId,this.uid]).next(p=>{c.push(function(_,w){const I=w?new l0(w.sequenceNumber,new ea(jp(w.readTime),new nt(Jc(w.documentKey)),w.largestBatchId)):l0.empty(),M=_.fields.map(([O,N])=>new gT($i.fromServerFormat(O),N));return new mT(_.indexId,_.collectionGroup,M,I)}(d,p))})).next(()=>c)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>0===e.length?null:(e.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==s?s:zt(i.collectionGroup,r.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,i){const r=OT(t),s=R0(t);return this._n(t).next(c=>r.W("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(d=>pe.forEach(d,p=>s.put(Hj(p.indexId,this.user,c,i)))))}updateIndexEntries(t,e){const i=new Map;return pe.forEach(e,(r,s)=>{const c=i.get(r.collectionGroup);return(c?pe.resolve(c):this.getFieldIndexes(t,r.collectionGroup)).next(d=>(i.set(r.collectionGroup,d),pe.forEach(d,p=>this.wn(t,r,p).next(_=>{const w=this.mn(s,p);return _.isEqual(w)?pe.resolve():this.gn(t,s,p,_,w)}))))})}yn(t,e,i,r){return x0(t).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.hn(i,e.key),documentKey:e.key.path.toArray()})}pn(t,e,i,r){return x0(t).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.hn(i,e.key),e.key.path.toArray()])}wn(t,e,i){const r=x0(t);let s=new Hn(qp);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.hn(i,e)])},(c,d)=>{s=s.add(new zp(i.indexId,e,d.arrayValue,d.directionalValue))}).next(()=>s)}mn(t,e){let i=new Hn(qp);const r=this.an(e,t);if(null==r)return i;const s=zP(e);if(null!=s){const c=t.data.field(s.fieldPath);if(p0(c))for(const d of c.arrayValue.values||[])i=i.add(new zp(e.indexId,t.key,this.on(d),r))}else i=i.add(new zp(e.indexId,t.key,RT,r));return i}gn(t,e,i,r,s){$e("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const c=[];return function(d,p,_,w,I){const M=d.getIterator(),O=p.getIterator();let N=I_(M),z=I_(O);for(;N||z;){let ie=!1,Me=!1;if(N&&z){const ze=_(N,z);ze<0?Me=!0:ze>0&&(ie=!0)}else null!=N?Me=!0:ie=!0;ie?(w(z),z=I_(O)):Me?(I(N),N=I_(M)):(N=I_(M),z=I_(O))}}(r,s,qp,d=>{c.push(this.yn(t,e,i,d))},d=>{c.push(this.pn(t,e,i,d))}),pe.waitFor(c)}_n(t){let e=1;return R0(t).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),e=r.sequenceNumber+1}).next(()=>e)}createRange(t,e,i){i=i.sort((c,d)=>qp(c,d)).filter((c,d,p)=>!d||0!==qp(c,p[d-1]));const r=[];r.push(t);for(const c of i){const d=qp(c,t),p=qp(c,e);if(0===d)r[0]=t.Ke();else if(d>0&&p<0)r.push(c),r.push(c.Ke());else if(p>0)break}r.push(e);const s=[];for(let c=0;c<r.length;c+=2)s.push(IDBKeyRange.bound([r[c].indexId,this.uid,r[c].arrayValue,r[c].directionalValue,RT,[]],[r[c+1].indexId,this.uid,r[c+1].arrayValue,r[c+1].directionalValue,RT,[]]));return s}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(Wj)}getMinOffset(t,e){return pe.mapArray(this.tn(e),i=>this.en(t,i).next(r=>r||ft())).next(Wj)}}function qj(n){return Nr(n,"collectionParents")}function x0(n){return Nr(n,"indexEntries")}function OT(n){return Nr(n,"indexConfiguration")}function R0(n){return Nr(n,"indexState")}function Wj(n){Ut(0!==n.length);let t=n[0].indexState.offset,e=t.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;qP(r,t)<0&&(t=r),e<r.largestBatchId&&(e=r.largestBatchId)}return new ea(t.readTime,t.documentKey,e)}const Yj={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class yo{constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new yo(t,yo.DEFAULT_COLLECTION_PERCENTILE,yo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Zj(n,t,e){const i=n.store("mutations"),r=n.store("documentMutations"),s=[],c=IDBKeyRange.only(e.batchId);let d=0;const p=i.Z({range:c},(w,I,M)=>(d++,M.delete()));s.push(p.next(()=>{Ut(1===d)}));const _=[];for(const w of e.mutations){const I=Oj(t,w.key.path,e.batchId);s.push(r.delete(I)),_.push(w.key)}return pe.waitFor(s).next(()=>_)}function PT(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw ft();t=n.noDocument}return JSON.stringify(t).length}yo.DEFAULT_COLLECTION_PERCENTILE=10,yo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yo.DEFAULT=new yo(41943040,yo.DEFAULT_COLLECTION_PERCENTILE,yo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yo.DISABLED=new yo(-1,0,0);class NT{constructor(t,e,i,r){this.userId=t,this.It=e,this.indexManager=i,this.referenceDelegate=r,this.In={}}static oe(t,e,i,r){Ut(""!==t.uid);const s=t.isAuthenticated()?t.uid:"";return new NT(s,e,i,r)}checkEmpty(t){let e=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Hh(t).Z({index:"userMutationsIndex",range:i},(r,s,c)=>{e=!1,c.done()}).next(()=>e)}addMutationBatch(t,e,i,r){const s=F_(t),c=Hh(t);return c.add({}).next(d=>{Ut("number"==typeof d);const p=new lN(d,e,i,r),_=function(M,O,N){const z=N.baseMutations.map(Me=>T0(M.re,Me)),ie=N.mutations.map(Me=>T0(M.re,Me));return{userId:O,batchId:N.batchId,localWriteTimeMs:N.localWriteTime.toMillis(),baseMutations:z,mutations:ie}}(this.It,this.userId,p),w=[];let I=new Hn((M,O)=>zt(M.canonicalString(),O.canonicalString()));for(const M of r){const O=Oj(this.userId,M.key.path,d);I=I.add(M.key.path.popLast()),w.push(c.put(_)),w.push(s.put(O,j5))}return I.forEach(M=>{w.push(this.indexManager.addToCollectionParentIndex(t,M))}),t.addOnCommittedListener(()=>{this.In[d]=p.keys()}),pe.waitFor(w).next(()=>p)})}lookupMutationBatch(t,e){return Hh(t).get(e).next(i=>i?(Ut(i.userId===this.userId),$p(this.It,i)):null)}Tn(t,e){return this.In[e]?pe.resolve(this.In[e]):this.lookupMutationBatch(t,e).next(i=>{if(i){const r=i.keys();return this.In[e]=r,r}return null})}getNextMutationBatchAfterBatchId(t,e){const i=e+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return Hh(t).Z({index:"userMutationsIndex",range:r},(c,d,p)=>{d.userId===this.userId&&(Ut(d.batchId>=i),s=$p(this.It,d)),p.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return Hh(t).Z({index:"userMutationsIndex",range:e,reverse:!0},(r,s,c)=>{i=s.batchId,c.done()}).next(()=>i)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Hh(t).W("userMutationsIndex",e).next(i=>i.map(r=>$p(this.It,r)))}getAllMutationBatchesAffectingDocumentKey(t,e){const i=MT(this.userId,e.path),r=IDBKeyRange.lowerBound(i),s=[];return F_(t).Z({range:r},(c,d,p)=>{const[_,w,I]=c,M=Jc(w);if(_===this.userId&&e.path.isEqual(M))return Hh(t).get(I).next(O=>{if(!O)throw ft();Ut(O.userId===this.userId),s.push($p(this.It,O))});p.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Hn(zt);const r=[];return e.forEach(s=>{const c=MT(this.userId,s.path),d=IDBKeyRange.lowerBound(c),p=F_(t).Z({range:d},(_,w,I)=>{const[M,O,N]=_,z=Jc(O);M===this.userId&&s.path.isEqual(z)?i=i.add(N):I.done()});r.push(p)}),pe.waitFor(r).next(()=>this.En(t,i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1,s=MT(this.userId,i),c=IDBKeyRange.lowerBound(s);let d=new Hn(zt);return F_(t).Z({range:c},(p,_,w)=>{const[I,M,O]=p,N=Jc(M);I===this.userId&&i.isPrefixOf(N)?N.length===r&&(d=d.add(O)):w.done()}).next(()=>this.En(t,d))}En(t,e){const i=[],r=[];return e.forEach(s=>{r.push(Hh(t).get(s).next(c=>{if(null===c)throw ft();Ut(c.userId===this.userId),i.push($p(this.It,c))}))}),pe.waitFor(r).next(()=>i)}removeMutationBatch(t,e){return Zj(t.ie,this.userId,e).next(i=>(t.addOnCommittedListener(()=>{this.An(e.batchId)}),pe.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(t,r))))}An(t){delete this.In[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return pe.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return F_(t).Z({range:i},(s,c,d)=>{if(s[0]===this.userId){const p=Jc(s[1]);r.push(p)}else d.done()}).next(()=>{Ut(0===r.length)})})}containsKey(t,e){return Kj(t,this.userId,e)}Rn(t){return Qj(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Kj(n,t,e){const i=MT(t,e.path),r=i[1],s=IDBKeyRange.lowerBound(i);let c=!1;return F_(n).Z({range:s,X:!0},(d,p,_)=>{const[w,I,M]=d;w===t&&I===r&&(c=!0),_.done()}).next(()=>c)}function Hh(n){return Nr(n,"mutations")}function F_(n){return Nr(n,"documentMutations")}function Qj(n){return Nr(n,"mutationQueues")}class Wp{constructor(t){this.bn=t}next(){return this.bn+=2,this.bn}static Pn(){return new Wp(0)}static vn(){return new Wp(-1)}}class pK{constructor(t,e){this.referenceDelegate=t,this.It=e}allocateTargetId(t){return this.Vn(t).next(e=>{const i=new Wp(e.highestTargetId);return e.highestTargetId=i.next(),this.Sn(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.Vn(t).next(e=>Ft.fromTimestamp(new bi(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.Vn(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,i){return this.Vn(t).next(r=>(r.highestListenSequenceNumber=e,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),e>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e),this.Sn(t,r)))}addTargetData(t,e){return this.Dn(t,e).next(()=>this.Vn(t).next(i=>(i.targetCount+=1,this.Cn(e,i),this.Sn(t,i))))}updateTargetData(t,e){return this.Dn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>L_(t).delete(e.targetId)).next(()=>this.Vn(t)).next(i=>(Ut(i.targetCount>0),i.targetCount-=1,this.Sn(t,i)))}removeTargets(t,e,i){let r=0;const s=[];return L_(t).Z((c,d)=>{const p=A0(d);p.sequenceNumber<=e&&null===i.get(p.targetId)&&(r++,s.push(this.removeTargetData(t,p)))}).next(()=>pe.waitFor(s)).next(()=>r)}forEachTarget(t,e){return L_(t).Z((i,r)=>{const s=A0(r);e(s)})}Vn(t){return Xj(t).get("targetGlobalKey").next(e=>(Ut(null!==e),e))}Sn(t,e){return Xj(t).put("targetGlobalKey",e)}Dn(t,e){return L_(t).put(Bj(this.It,e))}Cn(t,e){let i=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,i=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.Vn(t).next(e=>e.targetCount)}getTargetData(t,e){const i=Vp(e),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return L_(t).Z({range:r,index:"queryTargetsIndex"},(c,d,p)=>{const _=A0(d);g0(e,_.target)&&(s=_,p.done())}).next(()=>s)}addMatchingKeys(t,e,i){const r=[],s=jh(t);return e.forEach(c=>{const d=zs(c.path);r.push(s.put({targetId:i,path:d})),r.push(this.referenceDelegate.addReference(t,i,c))}),pe.waitFor(r)}removeMatchingKeys(t,e,i){const r=jh(t);return pe.forEach(e,s=>{const c=zs(s.path);return pe.waitFor([r.delete([i,c]),this.referenceDelegate.removeReference(t,i,s)])})}removeMatchingKeysForTargetId(t,e){const i=jh(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(t,e){const i=IDBKeyRange.bound([e],[e+1],!1,!0),r=jh(t);let s=Jt();return r.Z({range:i,X:!0},(c,d,p)=>{const _=Jc(c[1]),w=new nt(_);s=s.add(w)}).next(()=>s)}containsKey(t,e){const i=zs(e.path),r=IDBKeyRange.bound([i],[CH(i)],!1,!0);let s=0;return jh(t).Z({index:"documentTargetsIndex",X:!0,range:r},([c,d],p,_)=>{0!==c&&(s++,_.done())}).next(()=>s>0)}se(t,e){return L_(t).get(e).next(i=>i?A0(i):null)}}function L_(n){return Nr(n,"targets")}function Xj(n){return Nr(n,"targetGlobal")}function jh(n){return Nr(n,"targetDocuments")}function Jj([n,t],[e,i]){const r=zt(n,e);return 0===r?zt(t,i):r}class mK{constructor(t){this.xn=t,this.buffer=new Hn(Jj),this.Nn=0}kn(){return++this.Nn}Mn(t){const e=[t,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();Jj(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class gK{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}Fn(t){var e=this;$e("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(0,De.Z)(function*(){e.On=null;try{yield e.localStore.collectGarbage(e.garbageCollector)}catch(i){Oh(i)?$e("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Rh(i)}yield e.Fn(3e5)}))}}class _K{constructor(t,e){this.$n=t,this.params=e}calculateTargetCount(t,e){return this.$n.Bn(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(0===e)return pe.resolve(mo.at);const i=new mK(e);return this.$n.forEachTarget(t,r=>i.Mn(r.sequenceNumber)).next(()=>this.$n.Ln(t,r=>i.Mn(r))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.$n.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.$n.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector","Garbage collection skipped; disabled"),pe.resolve(Yj)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Yj):this.Un(t,e))}getCacheSize(t){return this.$n.getCacheSize(t)}Un(t,e){let i,r,s,c,d,p,_;const w=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(I=>(I>this.params.maximumSequenceNumbersToCollect?($e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),r=this.params.maximumSequenceNumbersToCollect):r=I,c=Date.now(),this.nthSequenceNumber(t,r))).next(I=>(i=I,d=Date.now(),this.removeTargets(t,i,e))).next(I=>(s=I,p=Date.now(),this.removeOrphanedDocuments(t,i))).next(I=>(_=Date.now(),$P()<=ic.in.DEBUG&&$e("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-w}ms\n\tDetermined least recently used ${r} in `+(d-c)+`ms\n\tRemoved ${s} targets in `+(p-d)+`ms\n\tRemoved ${I} documents in `+(_-p)+`ms\nTotal Duration: ${_-w}ms`),pe.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:I})))}}class yK{constructor(t,e){this.db=t,this.garbageCollector=new _K(this,e)}Bn(t){const e=this.qn(t);return this.db.getTargetCache().getTargetCount(t).next(i=>e.next(r=>i+r))}qn(t){let e=0;return this.Ln(t,i=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}Ln(t,e){return this.Kn(t,(i,r)=>e(r))}addReference(t,e,i){return FT(t,i)}removeReference(t,e,i){return FT(t,i)}removeTargets(t,e,i){return this.db.getTargetCache().removeTargets(t,e,i)}markPotentiallyOrphaned(t,e){return FT(t,e)}Gn(t,e){return function(i,r){let s=!1;return Qj(i).tt(c=>Kj(i,c,r).next(d=>(d&&(s=!0),pe.resolve(!d)))).next(()=>s)}(t,e)}removeOrphanedDocuments(t,e){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Kn(t,(c,d)=>{if(d<=e){const p=this.Gn(t,c).next(_=>{if(!_)return s++,i.getEntry(t,c).next(()=>(i.removeEntry(c,Ft.min()),jh(t).delete([0,zs(c.path)])))});r.push(p)}}).next(()=>pe.waitFor(r)).next(()=>i.apply(t)).next(()=>s)}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,e){return FT(t,e)}Kn(t,e){const i=jh(t);let r,s=mo.at;return i.Z({index:"documentTargetsIndex"},([c,d],{path:p,sequenceNumber:_})=>{0===c?(s!==mo.at&&e(new nt(Jc(r)),s),s=_,r=p):s=mo.at}).next(()=>{s!==mo.at&&e(new nt(Jc(r)),s)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function FT(n,t){return jh(n).put((i=n.currentSequenceNumber,{targetId:0,path:zs(t.path),sequenceNumber:i}));var i}class e3{constructor(){this.changes=new Bh(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,ii.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return void 0!==i?pe.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class vK{constructor(t){this.It=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,i){return Yp(t).put(i)}removeEntry(t,e,i){return Yp(t).delete(function(r,s){const c=r.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],kT(s),c[c.length-1]]}(e,i))}updateMetadata(t,e){return this.getMetadata(t).next(i=>(i.byteSize+=e,this.Qn(t,i)))}getEntry(t,e){let i=ii.newInvalidDocument(e);return Yp(t).Z({index:"documentKeyIndex",range:IDBKeyRange.only(O0(e))},(r,s)=>{i=this.jn(e,s)}).next(()=>i)}Wn(t,e){let i={size:0,document:ii.newInvalidDocument(e)};return Yp(t).Z({index:"documentKeyIndex",range:IDBKeyRange.only(O0(e))},(r,s)=>{i={document:this.jn(e,s),size:PT(s)}}).next(()=>i)}getEntries(t,e){let i=_o();return this.zn(t,e,(r,s)=>{const c=this.jn(r,s);i=i.insert(r,c)}).next(()=>i)}Hn(t,e){let i=_o(),r=new Gi(nt.comparator);return this.zn(t,e,(s,c)=>{const d=this.jn(s,c);i=i.insert(s,d),r=r.insert(s,PT(c))}).next(()=>({documents:i,Jn:r}))}zn(t,e,i){if(e.isEmpty())return pe.resolve();let r=new Hn(r3);e.forEach(p=>r=r.add(p));const s=IDBKeyRange.bound(O0(r.first()),O0(r.last())),c=r.getIterator();let d=c.getNext();return Yp(t).Z({index:"documentKeyIndex",range:s},(p,_,w)=>{const I=nt.fromSegments([..._.prefixPath,_.collectionGroup,_.documentId]);for(;d&&r3(d,I)<0;)i(d,null),d=c.getNext();d&&d.isEqual(I)&&(i(d,_),d=c.hasNext()?c.getNext():null),d?w.j(O0(d)):w.done()}).next(()=>{for(;d;)i(d,null),d=c.hasNext()?c.getNext():null})}getAllFromCollection(t,e,i){const r=[e.popLast().toArray(),e.lastSegment(),kT(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],s=[e.popLast().toArray(),e.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Yp(t).W(IDBKeyRange.bound(r,s,!0)).next(c=>{let d=_o();for(const p of c){const _=this.jn(nt.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);d=d.insert(_.key,_)}return d})}getAllFromCollectionGroup(t,e,i,r){let s=_o();const c=i3(e,i),d=i3(e,ea.max());return Yp(t).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,d,!0)},(p,_,w)=>{const I=this.jn(nt.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);s=s.insert(I.key,I),s.size===r&&w.done()}).next(()=>s)}newChangeBuffer(t){return new bK(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return n3(t).get("remoteDocumentGlobalKey").next(e=>(Ut(!!e),e))}Qn(t,e){return n3(t).put("remoteDocumentGlobalKey",e)}jn(t,e){if(e){const i=function sK(n,t){let e;if(t.document)e=Ij(n.re,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const i=nt.fromSegments(t.noDocument.path),r=jp(t.noDocument.readTime);e=ii.newNoDocument(i,r),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return ft();{const i=nt.fromSegments(t.unknownDocument.path),r=jp(t.unknownDocument.version);e=ii.newUnknownDocument(i,r)}}return t.readTime&&e.setReadTime(function(i){const r=new bi(i[0],i[1]);return Ft.fromTimestamp(r)}(t.readTime)),e}(this.It,e);if(!i.isNoDocument()||!i.version.isEqual(Ft.min()))return i}return ii.newInvalidDocument(t)}}function t3(n){return new vK(n)}class bK extends e3{constructor(t,e){super(),this.Yn=t,this.trackRemovals=e,this.Xn=new Bh(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(t){const e=[];let i=0,r=new Hn((s,c)=>zt(s.canonicalString(),c.canonicalString()));return this.changes.forEach((s,c)=>{const d=this.Xn.get(s);if(e.push(this.Yn.removeEntry(t,s,d.readTime)),c.isValidDocument()){const p=Vj(this.Yn.It,c);r=r.add(s.path.popLast()),i+=PT(p)-d.size,e.push(this.Yn.addEntry(t,s,p))}else if(i-=d.size,this.trackRemovals){const p=Vj(this.Yn.It,c.convertToNoDocument(Ft.min()));e.push(this.Yn.addEntry(t,s,p))}}),r.forEach(s=>{e.push(this.Yn.indexManager.addToCollectionParentIndex(t,s))}),e.push(this.Yn.updateMetadata(t,i)),pe.waitFor(e)}getFromCache(t,e){return this.Yn.Wn(t,e).next(i=>(this.Xn.set(e,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(t,e){return this.Yn.Hn(t,e).next(({documents:i,Jn:r})=>(r.forEach((s,c)=>{this.Xn.set(s,{size:c,readTime:i.get(s).readTime})}),i))}}function n3(n){return Nr(n,"remoteDocumentGlobal")}function Yp(n){return Nr(n,"remoteDocumentsV14")}function O0(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function i3(n,t){const e=t.documentKey.path.toArray();return[n,kT(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function r3(n,t){const e=n.path.toArray(),i=t.path.toArray();let r=0;for(let s=0;s<e.length-2&&s<i.length-2;++s)if(r=zt(e[s],i[s]),r)return r;return r=zt(e.length,i.length),r||(r=zt(e[e.length-2],i[i.length-2]),r||zt(e[e.length-1],i[i.length-1]))}class wK{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class s3{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(i=r,this.getBaseDocument(t,e,i))).next(r=>(null!==i&&v0(i.mutation,r,ta.empty(),bi.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,Jt()).next(()=>i))}getLocalViewOfDocuments(t,e,i=Jt()){const r=Qc();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,i).next(s=>{let c=b0();return s.forEach((d,p)=>{c=c.insert(d,p.overlayedDocument)}),c}))}getOverlayedDocuments(t,e){const i=Qc();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,Jt()))}populateOverlays(t,e,i){const r=[];return i.forEach(s=>{e.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((c,d)=>{e.set(c,d)})})}computeViews(t,e,i,r){let s=_o();const c=w0(),d=w0();return e.forEach((p,_)=>{const w=i.get(_.key);r.has(_.key)&&(void 0===w||w.mutation instanceof cd)?s=s.insert(_.key,_):void 0!==w&&(c.set(_.key,w.mutation.getFieldMask()),v0(w.mutation,_,w.mutation.getFieldMask(),bi.now()))}),this.recalculateAndSaveOverlays(t,s).next(p=>(p.forEach((_,w)=>c.set(_,w)),e.forEach((_,w)=>{var I;return d.set(_,new wK(w,null!==(I=c.get(_))&&void 0!==I?I:null))}),d))}recalculateAndSaveOverlays(t,e){const i=w0();let r=new Gi((c,d)=>c-d),s=Jt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(c=>{for(const d of c)d.keys().forEach(p=>{const _=e.get(p);if(null===_)return;let w=i.get(p)||ta.empty();w=d.applyToLocalView(_,w),i.set(p,w);const I=(r.get(d.batchId)||Jt()).add(p);r=r.insert(d.batchId,I)})}).next(()=>{const c=[],d=r.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),_=p.key,w=p.value,I=pj();w.forEach(M=>{if(!s.has(M)){const O=sj(e.get(M),i.get(M));null!==O&&I.set(M,O),s=s.add(M)}}),c.push(this.documentOverlayCache.saveOverlays(t,_,I))}return pe.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i){return nt.isDocumentKey((r=e).path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(t,e.path):eN(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i):this.getDocumentsMatchingCollectionQuery(t,e,i);var r}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next(s=>{const c=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-s.size):pe.resolve(Qc());let d=-1,p=s;return c.next(_=>pe.forEach(_,(w,I)=>(d<I.largestBatchId&&(d=I.largestBatchId),s.get(w)?pe.resolve():this.getBaseDocument(t,w,I).next(M=>{p=p.insert(w,M)}))).next(()=>this.populateOverlays(t,_,s)).next(()=>this.computeViews(t,p,_,Jt())).next(w=>({batchId:d,changes:fj(w)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new nt(e)).next(i=>{let r=b0();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,i){const r=e.collectionGroup;let s=b0();return this.indexManager.getCollectionParents(t,r).next(c=>pe.forEach(c,d=>{const p=(_=e,w=d.child(r),new ld(w,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt));var _,w;return this.getDocumentsMatchingCollectionQuery(t,p,i).next(_=>{_.forEach((w,I)=>{s=s.insert(w,I)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(t,e,i){let r;return this.remoteDocumentCache.getAllFromCollection(t,e.path,i).next(s=>(r=s,this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId))).next(s=>{s.forEach((d,p)=>{const _=p.getKey();null===r.get(_)&&(r=r.insert(_,ii.newInvalidDocument(_)))});let c=b0();return r.forEach((d,p)=>{const _=s.get(d);void 0!==_&&v0(_.mutation,p,ta.empty(),bi.now()),nN(e,p)&&(c=c.insert(d,p))}),c})}getBaseDocument(t,e,i){return null===i||1===i.mutation.type?this.remoteDocumentCache.getEntry(t,e):pe.resolve(ii.newInvalidDocument(e))}}class CK{constructor(t){this.It=t,this.Zn=new Map,this.ts=new Map}getBundleMetadata(t,e){return pe.resolve(this.Zn.get(e))}saveBundleMetadata(t,e){var i;return this.Zn.set(e.id,{id:(i=e).id,version:i.version,createTime:Pr(i.createTime)}),pe.resolve()}getNamedQuery(t,e){return pe.resolve(this.ts.get(e))}saveNamedQuery(t,e){return this.ts.set(e.name,{name:(i=e).name,query:dN(i.bundledQuery),readTime:Pr(i.readTime)}),pe.resolve();var i}}class EK{constructor(){this.overlays=new Gi(nt.comparator),this.es=new Map}getOverlay(t,e){return pe.resolve(this.overlays.get(e))}getOverlays(t,e){const i=Qc();return pe.forEach(e,r=>this.getOverlay(t,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((r,s)=>{this.ue(t,e,s)}),pe.resolve()}removeOverlaysForBatchId(t,e,i){const r=this.es.get(i);return void 0!==r&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.es.delete(i)),pe.resolve()}getOverlaysForCollection(t,e,i){const r=Qc(),s=e.length+1,c=new nt(e.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,_=p.getKey();if(!e.isPrefixOf(_.path))break;_.path.length===s&&p.largestBatchId>i&&r.set(p.getKey(),p)}return pe.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let s=new Gi((_,w)=>_-w);const c=this.overlays.getIterator();for(;c.hasNext();){const _=c.getNext().value;if(_.getKey().getCollectionGroup()===e&&_.largestBatchId>i){let w=s.get(_.largestBatchId);null===w&&(w=Qc(),s=s.insert(_.largestBatchId,w)),w.set(_.getKey(),_)}}const d=Qc(),p=s.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((_,w)=>d.set(_,w)),!(d.size()>=r)););return pe.resolve(d)}ue(t,e,i){const r=this.overlays.get(i.key);if(null!==r){const c=this.es.get(r.largestBatchId).delete(i.key);this.es.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new uN(e,i));let s=this.es.get(e);void 0===s&&(s=Jt(),this.es.set(e,s)),this.es.set(e,s.add(i.key))}}class pN{constructor(){this.ns=new Hn(Fr.ss),this.rs=new Hn(Fr.os)}isEmpty(){return this.ns.isEmpty()}addReference(t,e){const i=new Fr(t,e);this.ns=this.ns.add(i),this.rs=this.rs.add(i)}us(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.cs(new Fr(t,e))}hs(t,e){t.forEach(i=>this.removeReference(i,e))}ls(t){const e=new nt(new wn([])),i=new Fr(e,t),r=new Fr(e,t+1),s=[];return this.rs.forEachInRange([i,r],c=>{this.cs(c),s.push(c.key)}),s}fs(){this.ns.forEach(t=>this.cs(t))}cs(t){this.ns=this.ns.delete(t),this.rs=this.rs.delete(t)}ds(t){const e=new nt(new wn([])),i=new Fr(e,t),r=new Fr(e,t+1);let s=Jt();return this.rs.forEachInRange([i,r],c=>{s=s.add(c.key)}),s}containsKey(t){const e=new Fr(t,0),i=this.ns.firstAfterOrEqual(e);return null!==i&&t.isEqual(i.key)}}class Fr{constructor(t,e){this.key=t,this._s=e}static ss(t,e){return nt.comparator(t.key,e.key)||zt(t._s,e._s)}static os(t,e){return zt(t._s,e._s)||nt.comparator(t.key,e.key)}}class DK{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.ws=1,this.gs=new Hn(Fr.ss)}checkEmpty(t){return pe.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,i,r){const s=this.ws;this.ws++;const c=new lN(s,e,i,r);this.mutationQueue.push(c);for(const d of r)this.gs=this.gs.add(new Fr(d.key,s)),this.indexManager.addToCollectionParentIndex(t,d.key.path.popLast());return pe.resolve(c)}lookupMutationBatch(t,e){return pe.resolve(this.ys(e))}getNextMutationBatchAfterBatchId(t,e){const r=this.ps(e+1),s=r<0?0:r;return pe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return pe.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(t){return pe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new Fr(e,0),r=new Fr(e,Number.POSITIVE_INFINITY),s=[];return this.gs.forEachInRange([i,r],c=>{const d=this.ys(c._s);s.push(d)}),pe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Hn(zt);return e.forEach(r=>{const s=new Fr(r,0),c=new Fr(r,Number.POSITIVE_INFINITY);this.gs.forEachInRange([s,c],d=>{i=i.add(d._s)})}),pe.resolve(this.Is(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1;let s=i;nt.isDocumentKey(s)||(s=s.child(""));const c=new Fr(new nt(s),0);let d=new Hn(zt);return this.gs.forEachWhile(p=>{const _=p.key.path;return!!i.isPrefixOf(_)&&(_.length===r&&(d=d.add(p._s)),!0)},c),pe.resolve(this.Is(d))}Is(t){const e=[];return t.forEach(i=>{const r=this.ys(i);null!==r&&e.push(r)}),e}removeMutationBatch(t,e){Ut(0===this.Ts(e.batchId,"removed")),this.mutationQueue.shift();let i=this.gs;return pe.forEach(e.mutations,r=>{const s=new Fr(r.key,e.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.gs=i})}An(t){}containsKey(t,e){const i=new Fr(e,0),r=this.gs.firstAfterOrEqual(i);return pe.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return pe.resolve()}Ts(t,e){return this.ps(t)}ps(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}ys(t){const e=this.ps(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class IK{constructor(t){this.Es=t,this.docs=new Gi(nt.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,r=this.docs.get(i),s=r?r.size:0,c=this.Es(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:c}),this.size+=c-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return pe.resolve(i?i.document.mutableCopy():ii.newInvalidDocument(e))}getEntries(t,e){let i=_o();return e.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():ii.newInvalidDocument(r))}),pe.resolve(i)}getAllFromCollection(t,e,i){let r=_o();const s=new nt(e.child("")),c=this.docs.getIteratorFrom(s);for(;c.hasNext();){const{key:d,value:{document:p}}=c.getNext();if(!e.isPrefixOf(d.path))break;d.path.length>e.length+1||qP(DH(p),i)<=0||(r=r.insert(p.key,p.mutableCopy()))}return pe.resolve(r)}getAllFromCollectionGroup(t,e,i,r){ft()}As(t,e){return pe.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new SK(this)}getSize(t){return pe.resolve(this.size)}}class SK extends e3{constructor(t){super(),this.Yn=t}applyChanges(t){const e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.Yn.addEntry(t,r)):this.Yn.removeEntry(i)}),pe.waitFor(e)}getFromCache(t,e){return this.Yn.getEntry(t,e)}getAllFromCache(t,e){return this.Yn.getEntries(t,e)}}class TK{constructor(t){this.persistence=t,this.Rs=new Bh(e=>Vp(e),g0),this.lastRemoteSnapshotVersion=Ft.min(),this.highestTargetId=0,this.bs=0,this.Ps=new pN,this.targetCount=0,this.vs=Wp.Pn()}forEachTarget(t,e){return this.Rs.forEach((i,r)=>e(r)),pe.resolve()}getLastRemoteSnapshotVersion(t){return pe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return pe.resolve(this.bs)}allocateTargetId(t){return this.highestTargetId=this.vs.next(),pe.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.bs&&(this.bs=e),pe.resolve()}Dn(t){this.Rs.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.vs=new Wp(e),this.highestTargetId=e),t.sequenceNumber>this.bs&&(this.bs=t.sequenceNumber)}addTargetData(t,e){return this.Dn(e),this.targetCount+=1,pe.resolve()}updateTargetData(t,e){return this.Dn(e),pe.resolve()}removeTargetData(t,e){return this.Rs.delete(e.target),this.Ps.ls(e.targetId),this.targetCount-=1,pe.resolve()}removeTargets(t,e,i){let r=0;const s=[];return this.Rs.forEach((c,d)=>{d.sequenceNumber<=e&&null===i.get(d.targetId)&&(this.Rs.delete(c),s.push(this.removeMatchingKeysForTargetId(t,d.targetId)),r++)}),pe.waitFor(s).next(()=>r)}getTargetCount(t){return pe.resolve(this.targetCount)}getTargetData(t,e){const i=this.Rs.get(e)||null;return pe.resolve(i)}addMatchingKeys(t,e,i){return this.Ps.us(e,i),pe.resolve()}removeMatchingKeys(t,e,i){this.Ps.hs(e,i);const r=this.persistence.referenceDelegate,s=[];return r&&e.forEach(c=>{s.push(r.markPotentiallyOrphaned(t,c))}),pe.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.Ps.ls(e),pe.resolve()}getMatchingKeysForTargetId(t,e){const i=this.Ps.ds(e);return pe.resolve(i)}containsKey(t,e){return pe.resolve(this.Ps.containsKey(e))}}class o3{constructor(t,e){this.Vs={},this.overlays={},this.Ss=new mo(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=t(this),this.Cs=new TK(this),this.indexManager=new hK,this.remoteDocumentCache=new IK(i=>this.referenceDelegate.xs(i)),this.It=new Lj(e),this.Ns=new CK(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new EK,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.Vs[t.toKey()];return i||(i=new DK(e,this.referenceDelegate),this.Vs[t.toKey()]=i),i}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(t,e,i){$e("MemoryPersistence","Starting transaction:",t);const r=new AK(this.Ss.next());return this.referenceDelegate.ks(),i(r).next(s=>this.referenceDelegate.Ms(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Os(t,e){return pe.or(Object.values(this.Vs).map(i=>()=>i.containsKey(t,e)))}}class AK extends SH{constructor(t){super(),this.currentSequenceNumber=t}}class LT{constructor(t){this.persistence=t,this.Fs=new pN,this.$s=null}static Bs(t){return new LT(t)}get Ls(){if(this.$s)return this.$s;throw ft()}addReference(t,e,i){return this.Fs.addReference(i,e),this.Ls.delete(i.toString()),pe.resolve()}removeReference(t,e,i){return this.Fs.removeReference(i,e),this.Ls.add(i.toString()),pe.resolve()}markPotentiallyOrphaned(t,e){return this.Ls.add(e.toString()),pe.resolve()}removeTarget(t,e){this.Fs.ls(e.targetId).forEach(r=>this.Ls.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(s=>this.Ls.add(s.toString()))}).next(()=>i.removeTargetData(t,e))}ks(){this.$s=new Set}Ms(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pe.forEach(this.Ls,i=>{const r=nt.fromPath(i);return this.Us(t,r).next(s=>{s||e.removeEntry(r,Ft.min())})}).next(()=>(this.$s=null,e.apply(t)))}updateLimboDocument(t,e){return this.Us(t,e).next(i=>{i?this.Ls.delete(e.toString()):this.Ls.add(e.toString())})}xs(t){return 0}Us(t,e){return pe.or([()=>pe.resolve(this.Fs.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Os(t,e)])}}class MK{constructor(t){this.It=t}$(t,e,i,r){const s=new _T("createOrUpgrade",e);var d;i<1&&r>=1&&(t.createObjectStore("owner"),(d=t).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Rj,{unique:!0}),d.createObjectStore("documentMutations"),a3(t),function(d){d.createObjectStore("remoteDocuments")}(t));let c=pe.resolve();return i<3&&r>=3&&(0!==i&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(t),a3(t)),c=c.next(()=>function(d){const p=d.store("targetGlobal"),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ft.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",_)}(s))),i<4&&r>=4&&(0!==i&&(c=c.next(()=>function(d,p){return p.store("mutations").W().next(_=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Rj,{unique:!0});const w=p.store("mutations"),I=_.map(M=>w.put(M));return pe.waitFor(I)})}(t,s))),c=c.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),i<5&&r>=5&&(c=c.next(()=>this.qs(s))),i<6&&r>=6&&(c=c.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(t),this.Ks(s)))),i<7&&r>=7&&(c=c.next(()=>this.Gs(s))),i<8&&r>=8&&(c=c.next(()=>this.Qs(t,s))),i<9&&r>=9&&(c=c.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(t)})),i<10&&r>=10&&(c=c.next(()=>this.js(s))),i<11&&r>=11&&(c=c.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),i<12&&r>=12&&(c=c.next(()=>{!function(d){const p=d.createObjectStore("documentOverlays",{keyPath:eK});p.createIndex("collectionPathOverlayIndex",tK,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",nK,{unique:!1})}(t)})),i<13&&r>=13&&(c=c.next(()=>function(d){const p=d.createObjectStore("remoteDocumentsV14",{keyPath:$5});p.createIndex("documentKeyIndex",G5),p.createIndex("collectionGroupIndex",z5)}(t)).next(()=>this.Ws(t,s)).next(()=>t.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(c=c.next(()=>this.zs(t,s))),i<15&&r>=15&&(c=c.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:K5}).createIndex("sequenceNumberIndex",Q5,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:X5}).createIndex("documentKeyIndex",J5,{unique:!1})}(t))),c}Ks(t){let e=0;return t.store("remoteDocuments").Z((i,r)=>{e+=PT(r)}).next(()=>{const i={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}qs(t){const e=t.store("mutationQueues"),i=t.store("mutations");return e.W().next(r=>pe.forEach(r,s=>{const c=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.W("userMutationsIndex",c).next(d=>pe.forEach(d,p=>{Ut(p.userId===s.userId);const _=$p(this.It,p);return Zj(t,s.userId,_).next(()=>{})}))}))}Gs(t){const e=t.store("targetDocuments"),i=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.Z((c,d)=>{const p=new wn(c),_=[0,zs(p)];s.push(e.get(_).next(w=>w?pe.resolve():e.put({targetId:0,path:zs(p),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>pe.waitFor(s))})}Qs(t,e){t.createObjectStore("collectionParents",{keyPath:Z5});const i=e.store("collectionParents"),r=new fN,s=c=>{if(r.add(c)){const d=c.lastSegment(),p=c.popLast();return i.put({collectionId:d,parent:zs(p)})}};return e.store("remoteDocuments").Z({X:!0},(c,d)=>{const p=new wn(c);return s(p.popLast())}).next(()=>e.store("documentMutations").Z({X:!0},([c,d,p],_)=>{const w=Jc(d);return s(w.popLast())}))}js(t){const e=t.store("targets");return e.Z((i,r)=>{const s=A0(r),c=Bj(this.It,s);return e.put(c)})}Ws(t,e){const i=e.store("remoteDocuments"),r=[];return i.Z((s,c)=>{const d=e.store("remoteDocumentsV14"),p=(_=c,_.document?new nt(wn.fromString(_.document.name).popFirst(5)):_.noDocument?nt.fromSegments(_.noDocument.path):_.unknownDocument?nt.fromSegments(_.unknownDocument.path):ft()).path.toArray();var _;const w={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};r.push(d.put(w))}).next(()=>pe.waitFor(r))}zs(t,e){const i=e.store("mutations"),r=t3(this.It),s=new o3(LT.Bs,this.It.re);return i.W().next(c=>{const d=new Map;return c.forEach(p=>{var _;let w=null!==(_=d.get(p.userId))&&void 0!==_?_:Jt();$p(this.It,p).keys().forEach(I=>w=w.add(I)),d.set(p.userId,w)}),pe.forEach(d,(p,_)=>{const w=new Rr(_),I=xT.oe(this.It,w),M=s.getIndexManager(w),O=NT.oe(w,this.It,M,s.referenceDelegate);return new s3(r,O,I,M).recalculateAndSaveOverlaysForDocumentKeys(new aN(e,mo.at),p).next()})})}}function a3(n){n.createObjectStore("targetDocuments",{keyPath:W5}).createIndex("documentTargetsIndex",Y5,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",q5,{unique:!0}),n.createObjectStore("targetGlobal")}const mN="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class gN{constructor(t,e,i,r,s,c,d,p,_,w,I=15){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=i,this.Hs=s,this.window=c,this.document=d,this.Js=_,this.Ys=w,this.Xs=I,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=M=>Promise.resolve(),!gN.C())throw new Be(ve.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new yK(this,r),this.ii=e+"main",this.It=new Lj(p),this.ri=new oc(this.ii,this.Xs,new MK(this.It)),this.Cs=new pK(this.referenceDelegate,this.It),this.remoteDocumentCache=t3(this.It),this.Ns=new oK,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===w&&Ji("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Be(ve.FAILED_PRECONDITION,mN);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Cs.getHighestSequenceNumber(t))}).then(t=>{this.Ss=new mo(t,this.Js)}).then(()=>{this.Ds=!0}).catch(t=>(this.ri&&this.ri.close(),Promise.reject(t)))}li(t){var e=this;return this.si=function(){var i=(0,De.Z)(function*(r){if(e.started)return t(r)});return function(r){return i.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.ri.L(function(){var e=(0,De.Z)(function*(i){null===i.newVersion&&(yield t())});return function(i){return e.apply(this,arguments)}}())}setNetworkEnabled(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Hs.enqueueAndForget((0,De.Z)(function*(){e.started&&(yield e.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>VT(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(t).next(e=>{e||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(t)).next(e=>this.isPrimary&&!e?this._i(t).next(()=>!1):!!e&&this.wi(t).next(()=>!0))).catch(t=>{if(Oh(t))return $e("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return $e("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.Hs.enqueueRetryable(()=>this.si(t)),this.isPrimary=t})}fi(t){return P0(t).get("owner").next(e=>pe.resolve(this.mi(e)))}gi(t){return VT(t).delete(this.clientId)}yi(){var t=this;return(0,De.Z)(function*(){if(t.isPrimary&&!t.pi(t.ni,18e5)){t.ni=Date.now();const e=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=Nr(i,"clientMetadata");return r.W().next(s=>{const c=t.Ii(s,18e5),d=s.filter(p=>-1===c.indexOf(p));return pe.forEach(d,p=>r.delete(p.clientId)).next(()=>d)})}).catch(()=>[]);if(t.oi)for(const i of e)t.oi.removeItem(t.Ti(i.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(t){return!!t&&t.ownerId===this.clientId}di(t){return this.Ys?pe.resolve(!0):P0(t).get("owner").next(e=>{if(null!==e&&this.pi(e.leaseTimestampMs,5e3)&&!this.Ei(e.ownerId)){if(this.mi(e)&&this.networkEnabled)return!0;if(!this.mi(e)){if(!e.allowTabSynchronization)throw new Be(ve.FAILED_PRECONDITION,mN);return!1}}return!(!this.networkEnabled||!this.inForeground)||VT(t).W().next(i=>void 0===this.Ii(i,5e3).find(r=>{if(this.clientId!==r.clientId){const c=!this.inForeground&&r.inForeground,d=this.networkEnabled===r.networkEnabled;if(!this.networkEnabled&&r.networkEnabled||c&&d)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&$e("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var t=this;return(0,De.Z)(function*(){t.Ds=!1,t.Ai(),t.ei&&(t.ei.cancel(),t.ei=null),t.Ri(),t.bi(),yield t.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const i=new aN(e,mo.at);return t._i(i).next(()=>t.gi(i))}),t.ri.close(),t.Pi()})()}Ii(t,e){return t.filter(i=>this.pi(i.updateTimeMs,e)&&!this.Ei(i.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",t=>VT(t).W().next(e=>this.Ii(e,18e5).map(i=>i.clientId)))}get started(){return this.Ds}getMutationQueue(t,e){return NT.oe(t,this.It,e,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new fK(t,this.It.re.databaseId)}getDocumentOverlayCache(t){return xT.oe(this.It,t)}getBundleCache(){return this.Ns}runTransaction(t,e,i){$e("IndexedDbPersistence","Starting transaction:",t);const r="readonly"===e?"readonly":"readwrite",s=15===(c=this.Xs)?rK:14===c?Fj:13===c?Nj:12===c?iK:11===c?Pj:void ft();var c;let d;return this.ri.runTransaction(t,r,s,p=>(d=new aN(p,this.Ss?this.Ss.next():mo.at),"readwrite-primary"===e?this.fi(d).next(_=>!!_||this.di(d)).next(_=>{if(!_)throw Ji(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Be(ve.FAILED_PRECONDITION,IH);return i(d)}).next(_=>this.wi(d).next(()=>_)):this.Vi(d).next(()=>i(d)))).then(p=>(d.raiseOnCommittedEvent(),p))}Vi(t){return P0(t).get("owner").next(e=>{if(null!==e&&this.pi(e.leaseTimestampMs,5e3)&&!this.Ei(e.ownerId)&&!this.mi(e)&&!(this.Ys||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Be(ve.FAILED_PRECONDITION,mN)})}wi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return P0(t).put("owner",e)}static C(){return oc.C()}_i(t){const e=P0(t);return e.get("owner").next(i=>this.mi(i)?($e("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):pe.resolve())}pi(t,e){const i=Date.now();return!(t<i-e||t>i&&(Ji(`Detected an update time that is in the future: ${t} > ${i}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,F.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(t){var e;try{const i=null!==(null===(e=this.oi)||void 0===e?void 0:e.getItem(this.Ti(t)));return $e("IndexedDbPersistence",`Client '${t}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Ji("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(t){Ji("Failed to set zombie client id.",t)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function P0(n){return Nr(n,"owner")}function VT(n){return Nr(n,"clientMetadata")}function _N(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}class yN{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.Si=i,this.Di=r}static Ci(t,e){let i=Jt(),r=Jt();for(const s of e.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new yN(t,e.fromCache,i,r)}}class l3{constructor(){this.xi=!1}initialize(t,e){this.Ni=t,this.indexManager=e,this.xi=!0}getDocumentsMatchingQuery(t,e,i,r){return this.ki(t,e).next(s=>s||this.Mi(t,e,r,i)).next(s=>s||this.Oi(t,e))}ki(t,e){if(WH(e))return pe.resolve(null);let i=go(e);return this.indexManager.getIndexType(t,i).next(r=>0===r?null:(null!==e.limit&&1===r&&(e=ET(e,null,"F"),i=go(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{const c=Jt(...s);return this.Ni.getDocuments(t,c).next(d=>this.indexManager.getMinOffset(t,i).next(p=>{const _=this.Fi(e,d);return this.$i(e,_,c,p.readTime)?this.ki(t,ET(e,null,"F")):this.Bi(t,_,e,p)}))})))}Mi(t,e,i,r){return WH(e)||r.isEqual(Ft.min())?this.Oi(t,e):this.Ni.getDocuments(t,i).next(s=>{const c=this.Fi(e,s);return this.$i(e,c,i,r)?this.Oi(t,e):($P()<=ic.in.DEBUG&&$e("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),tN(e)),this.Bi(t,c,e,EH(r,-1)))})}Fi(t,e){let i=new Hn(KH(t));return e.forEach((r,s)=>{nN(t,s)&&(i=i.add(s))}),i}$i(t,e,i,r){if(null===t.limit)return!1;if(i.size!==e.size)return!0;const s="F"===t.limitType?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Oi(t,e){return $P()<=ic.in.DEBUG&&$e("QueryEngine","Using full collection scan to execute query:",tN(e)),this.Ni.getDocumentsMatchingQuery(t,e,ea.min())}Bi(t,e,i,r){return this.Ni.getDocumentsMatchingQuery(t,i,r).next(s=>(e.forEach(c=>{s=s.insert(c.key,c)}),s))}}class kK{constructor(t,e,i,r){this.persistence=t,this.Li=e,this.It=r,this.Ui=new Gi(zt),this.qi=new Bh(s=>Vp(s),g0),this.Ki=new Map,this.Gi=t.getRemoteDocumentCache(),this.Cs=t.getTargetCache(),this.Ns=t.getBundleCache(),this.Qi(i)}Qi(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new s3(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Ui))}}function c3(n,t,e,i){return new kK(n,t,e,i)}function u3(n,t){return vN.apply(this,arguments)}function vN(){return vN=(0,De.Z)(function*(n,t){const e=ot(n);return yield e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,e.Qi(t),e.mutationQueue.getAllMutationBatches(i))).next(s=>{const c=[],d=[];let p=Jt();for(const _ of r){c.push(_.batchId);for(const w of _.mutations)p=p.add(w.key)}for(const _ of s){d.push(_.batchId);for(const w of _.mutations)p=p.add(w.key)}return e.localDocuments.getDocuments(i,p).next(_=>({ji:_,removedBatchIds:c,addedBatchIds:d}))})})}),vN.apply(this,arguments)}function xK(n,t){const e=ot(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),s=e.Gi.newChangeBuffer({trackRemovals:!0});return function(c,d,p,_){const w=p.batch,I=w.keys();let M=pe.resolve();return I.forEach(O=>{M=M.next(()=>_.getEntry(d,O)).next(N=>{const z=p.docVersions.get(O);Ut(null!==z),N.version.compareTo(z)<0&&(w.applyToRemoteDocument(N,p),N.isValidDocument()&&(N.setReadTime(p.commitVersion),_.addEntry(N)))})}),M.next(()=>c.mutationQueue.removeMutationBatch(d,w))}(e,i,t,s).next(()=>s.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(c){let d=Jt();for(let p=0;p<c.mutationResults.length;++p)c.mutationResults[p].transformResults.length>0&&(d=d.add(c.batch.mutations[p].key));return d}(t))).next(()=>e.localDocuments.getDocuments(i,r))})}function d3(n){const t=ot(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Cs.getLastRemoteSnapshotVersion(e))}function RK(n,t){const e=ot(n),i=t.snapshotVersion;let r=e.Ui;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const c=e.Gi.newChangeBuffer({trackRemovals:!0});r=e.Ui;const d=[];t.targetChanges.forEach((w,I)=>{const M=r.get(I);if(!M)return;d.push(e.Cs.removeMatchingKeys(s,w.removedDocuments,I).next(()=>e.Cs.addMatchingKeys(s,w.addedDocuments,I)));let O=M.withSequenceNumber(s.currentSequenceNumber);var N,z,ie;t.targetMismatches.has(I)?O=O.withResumeToken(Cr.EMPTY_BYTE_STRING,Ft.min()).withLastLimboFreeSnapshotVersion(Ft.min()):w.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(w.resumeToken,i)),r=r.insert(I,O),z=O,ie=w,(0===(N=M).resumeToken.approximateByteSize()||z.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8||ie.addedDocuments.size+ie.modifiedDocuments.size+ie.removedDocuments.size>0)&&d.push(e.Cs.updateTargetData(s,O))});let p=_o(),_=Jt();if(t.documentUpdates.forEach(w=>{t.resolvedLimboDocuments.has(w)&&d.push(e.persistence.referenceDelegate.updateLimboDocument(s,w))}),d.push(h3(s,c,t.documentUpdates).next(w=>{p=w.Wi,_=w.zi})),!i.isEqual(Ft.min())){const w=e.Cs.getLastRemoteSnapshotVersion(s).next(I=>e.Cs.setTargetsMetadata(s,s.currentSequenceNumber,i));d.push(w)}return pe.waitFor(d).next(()=>c.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,p,_)).next(()=>p)}).then(s=>(e.Ui=r,s))}function h3(n,t,e){let i=Jt(),r=Jt();return e.forEach(s=>i=i.add(s)),t.getEntries(n,i).next(s=>{let c=_o();return e.forEach((d,p)=>{const _=s.get(d);p.isFoundDocument()!==_.isFoundDocument()&&(r=r.add(d)),p.isNoDocument()&&p.version.isEqual(Ft.min())?(t.removeEntry(d,p.readTime),c=c.insert(d,p)):!_.isValidDocument()||p.version.compareTo(_.version)>0||0===p.version.compareTo(_.version)&&_.hasPendingWrites?(t.addEntry(p),c=c.insert(d,p)):$e("LocalStore","Ignoring outdated watch update for ",d,". Current version:",_.version," Watch version:",p.version)}),{Wi:c,zi:r}})}function OK(n,t){const e=ot(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function V_(n,t){const e=ot(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.Cs.getTargetData(i,t).next(s=>s?(r=s,pe.resolve(r)):e.Cs.allocateTargetId(i).next(c=>(r=new Uh(t,c,0,i.currentSequenceNumber),e.Cs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=e.Ui.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.Ui=e.Ui.insert(i.targetId,i),e.qi.set(t,i.targetId)),i})}function B_(n,t,e){return bN.apply(this,arguments)}function bN(){return bN=(0,De.Z)(function*(n,t,e){const i=ot(n),r=i.Ui.get(t),s=e?"readwrite":"readwrite-primary";try{e||(yield i.persistence.runTransaction("Release target",s,c=>i.persistence.referenceDelegate.removeTarget(c,r)))}catch(c){if(!Oh(c))throw c;$e("LocalStore",`Failed to update sequence numbers for target ${t}: ${c}`)}i.Ui=i.Ui.remove(t),i.qi.delete(r.target)}),bN.apply(this,arguments)}function BT(n,t,e){const i=ot(n);let r=Ft.min(),s=Jt();return i.persistence.runTransaction("Execute query","readonly",c=>function(d,p,_){const w=ot(d),I=w.qi.get(_);return void 0!==I?pe.resolve(w.Ui.get(I)):w.Cs.getTargetData(p,_)}(i,c,go(t)).next(d=>{if(d)return r=d.lastLimboFreeSnapshotVersion,i.Cs.getMatchingKeysForTargetId(c,d.targetId).next(p=>{s=p})}).next(()=>i.Li.getDocumentsMatchingQuery(c,t,e?r:Ft.min(),e?s:Jt())).next(d=>(m3(i,ZH(t),d),{documents:d,Hi:s})))}function f3(n,t){const e=ot(n),i=ot(e.Cs),r=e.Ui.get(t);return r?Promise.resolve(r.target):e.persistence.runTransaction("Get target data","readonly",s=>i.se(s,t).next(c=>c?c.target:null))}function p3(n,t){const e=ot(n),i=e.Ki.get(t)||Ft.min();return e.persistence.runTransaction("Get new document changes","readonly",r=>e.Gi.getAllFromCollectionGroup(r,t,EH(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(m3(e,t,r),r))}function m3(n,t,e){let i=Ft.min();e.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.Ki.set(t,i)}function wN(){return wN=(0,De.Z)(function*(n,t,e,i){const r=ot(n);let s=Jt(),c=_o();for(const _ of e){const w=t.Ji(_.metadata.name);_.document&&(s=s.add(w));const I=t.Yi(_);I.setReadTime(t.Xi(_.metadata.readTime)),c=c.insert(w,I)}const d=r.Gi.newChangeBuffer({trackRemovals:!0}),p=yield V_(r,(_=i,go(A_(wn.fromString(`__bundle__/docs/${_}`)))));var _;return r.persistence.runTransaction("Apply bundle documents","readwrite",_=>h3(_,d,c).next(w=>(d.apply(_),w)).next(w=>r.Cs.removeMatchingKeysForTargetId(_,p.targetId).next(()=>r.Cs.addMatchingKeys(_,s,p.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(_,w.Wi,w.zi)).next(()=>w.Wi)))}),wN.apply(this,arguments)}function NK(n,t){return CN.apply(this,arguments)}function CN(){return CN=(0,De.Z)(function*(n,t,e=Jt()){const i=yield V_(n,go(dN(t.bundledQuery))),r=ot(n);return r.persistence.runTransaction("Save named query","readwrite",s=>{const c=Pr(t.readTime);if(i.snapshotVersion.compareTo(c)>=0)return r.Ns.saveNamedQuery(s,t);const d=i.withResumeToken(Cr.EMPTY_BYTE_STRING,c);return r.Ui=r.Ui.insert(d.targetId,d),r.Cs.updateTargetData(s,d).next(()=>r.Cs.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.Cs.addMatchingKeys(s,e,i.targetId)).next(()=>r.Ns.saveNamedQuery(s,t))})}),CN.apply(this,arguments)}function g3(n,t){return`firestore_clients_${n}_${t}`}function _3(n,t,e){let i=`firestore_mutations_${n}_${e}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}function EN(n,t){return`firestore_targets_${n}_${t}`}class UT{constructor(t,e,i,r){this.user=t,this.batchId=e,this.state=i,this.error=r}static Zi(t,e,i){const r=JSON.parse(i);let s,c="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return c&&r.error&&(c="string"==typeof r.error.message&&"string"==typeof r.error.code,c&&(s=new Be(r.error.code,r.error.message))),c?new UT(t,e,r.state,s):(Ji("SharedClientState",`Failed to parse mutation state for ID '${e}': ${i}`),null)}tr(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class N0{constructor(t,e,i){this.targetId=t,this.state=e,this.error=i}static Zi(t,e){const i=JSON.parse(e);let r,s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(r=new Be(i.error.code,i.error.message))),s?new N0(t,i.state,r):(Ji("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}tr(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class HT{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Zi(t,e){const i=JSON.parse(e);let r="object"==typeof i&&i.activeTargetIds instanceof Array,s=TT();for(let c=0;r&&c<i.activeTargetIds.length;++c)r=RH(i.activeTargetIds[c]),s=s.add(i.activeTargetIds[c]);return r?new HT(t,s):(Ji("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class DN{constructor(t,e){this.clientId=t,this.onlineState=e}static Zi(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new DN(e.clientId,e.onlineState):(Ji("SharedClientState",`Failed to parse online state: ${t}`),null)}}class IN{constructor(){this.activeTargetIds=TT()}er(t){this.activeTargetIds=this.activeTargetIds.add(t)}nr(t){this.activeTargetIds=this.activeTargetIds.delete(t)}tr(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class SN{constructor(t,e,i,r,s){this.window=t,this.Hs=e,this.persistenceKey=i,this.sr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Gi(zt),this.started=!1,this.cr=[];const c=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ar=g3(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new IN),this.lr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,De.Z)(function*(){const e=yield t.syncEngine.vi();for(const r of e){if(r===t.sr)continue;const s=t.getItem(g3(t.persistenceKey,r));if(s){const c=HT.Zi(r,s);c&&(t.ur=t.ur.insert(c.clientId,c))}}t.gr();const i=t.storage.getItem(t.wr);if(i){const r=t.yr(i);r&&t.pr(r)}for(const r of t.cr)t.rr(r);t.cr=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.hr,JSON.stringify(t))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(t){let e=!1;return this.ur.forEach((i,r)=>{r.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.Tr(t,"pending")}updateMutationState(t,e,i){this.Tr(t,e,i),this.Er(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const i=this.storage.getItem(EN(this.persistenceKey,t));if(i){const r=N0.Zi(t,i);r&&(e=r.state)}}return this.Ar.er(t),this.gr(),e}removeLocalQueryTarget(t){this.Ar.nr(t),this.gr()}isLocalQueryTarget(t){return this.Ar.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(EN(this.persistenceKey,t))}updateQueryState(t,e,i){this.Rr(t,e,i)}handleUserChange(t,e,i){e.forEach(r=>{this.Er(r)}),this.currentUser=t,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(t){this.br(t)}notifyBundleLoaded(t){this.Pr(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return $e("SharedClientState","READ",t,e),e}setItem(t,e){$e("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){$e("SharedClientState","REMOVE",t),this.storage.removeItem(t)}rr(t){var e=this;const i=t;if(i.storageArea===this.storage){if($e("SharedClientState","EVENT",i.key,i.newValue),i.key===this.ar)return void Ji("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,De.Z)(function*(){if(e.started){if(null!==i.key)if(e.lr.test(i.key)){if(null==i.newValue){const r=e.vr(i.key);return e.Vr(r,null)}{const r=e.Sr(i.key,i.newValue);if(r)return e.Vr(r.clientId,r)}}else if(e.dr.test(i.key)){if(null!==i.newValue){const r=e.Dr(i.key,i.newValue);if(r)return e.Cr(r)}}else if(e._r.test(i.key)){if(null!==i.newValue){const r=e.Nr(i.key,i.newValue);if(r)return e.kr(r)}}else if(i.key===e.wr){if(null!==i.newValue){const r=e.yr(i.newValue);if(r)return e.pr(r)}}else if(i.key===e.hr){const r=function(s){let c=mo.at;if(null!=s)try{const d=JSON.parse(s);Ut("number"==typeof d),c=d}catch(d){Ji("SharedClientState","Failed to read sequence number from WebStorage",d)}return c}(i.newValue);r!==mo.at&&e.sequenceNumberHandler(r)}else if(i.key===e.mr){const r=e.Mr(i.newValue);yield Promise.all(r.map(s=>e.syncEngine.Or(s)))}}else e.cr.push(i)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(t,e,i){const r=new UT(this.currentUser,t,e,i),s=_3(this.persistenceKey,this.currentUser,t);this.setItem(s,r.tr())}Er(t){const e=_3(this.persistenceKey,this.currentUser,t);this.removeItem(e)}br(t){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:t}))}Rr(t,e,i){const r=EN(this.persistenceKey,t),s=new N0(t,e,i);this.setItem(r,s.tr())}Pr(t){const e=JSON.stringify(Array.from(t));this.setItem(this.mr,e)}vr(t){const e=this.lr.exec(t);return e?e[1]:null}Sr(t,e){const i=this.vr(t);return HT.Zi(i,e)}Dr(t,e){const i=this.dr.exec(t),r=Number(i[1]);return UT.Zi(new Rr(void 0!==i[2]?i[2]:null),r,e)}Nr(t,e){const i=this._r.exec(t),r=Number(i[1]);return N0.Zi(r,e)}yr(t){return DN.Zi(t)}Mr(t){return JSON.parse(t)}Cr(t){var e=this;return(0,De.Z)(function*(){if(t.user.uid===e.currentUser.uid)return e.syncEngine.Fr(t.batchId,t.state,t.error);$e("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}kr(t){return this.syncEngine.$r(t.targetId,t.state,t.error)}Vr(t,e){const i=e?this.ur.insert(t,e):this.ur.remove(t),r=this.Ir(this.ur),s=this.Ir(i),c=[],d=[];return s.forEach(p=>{r.has(p)||c.push(p)}),r.forEach(p=>{s.has(p)||d.push(p)}),this.syncEngine.Br(c,d).then(()=>{this.ur=i})}pr(t){this.ur.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}Ir(t){let e=TT();return t.forEach((i,r)=>{e=e.unionWith(r.activeTargetIds)}),e}}class y3{constructor(){this.Lr=new IN,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t){return this.Lr.er(t),this.Ur[t]||"not-current"}updateQueryState(t,e,i){this.Ur[t]=e}removeLocalQueryTarget(t){this.Lr.nr(t)}isLocalQueryTarget(t){return this.Lr.activeTargetIds.has(t)}clearQueryState(t){delete this.Ur[t]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(t){return this.Lr.activeTargetIds.has(t)}start(){return this.Lr=new IN,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class FK{qr(t){}shutdown(){}}class v3{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(t){this.Wr.push(t)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){$e("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.Wr)t(0)}jr(){$e("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.Wr)t(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const LK={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class VK{constructor(t){this.Hr=t.Hr,this.Jr=t.Jr}Yr(t){this.Xr=t}Zr(t){this.eo=t}onMessage(t){this.no=t}close(){this.Jr()}send(t){this.Hr(t)}so(){this.Xr()}io(t){this.eo(t)}ro(t){this.no(t)}}class BK extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.oo=(t.ssl?"https":"http")+"://"+t.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(t,e,i,r,s){const c=this.ao(t,e);$e("RestConnection","Sending: ",c,i);const d={};return this.ho(d,r,s),this.lo(t,c,d,i).then(p=>($e("RestConnection","Received: ",p),p),p=>{throw xp("RestConnection",`${t} failed with error: `,p,"url: ",c,"request:",i),p})}fo(t,e,i,r,s,c){return this.co(t,e,i,r,s)}ho(t,e,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+E_,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((r,s)=>t[s]=r),i&&i.headers.forEach((r,s)=>t[s]=r)}ao(t,e){return`${this.oo}/v1/${e}:${LK[t]}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}lo(t,e,i,r){return new Promise((s,c)=>{const d=new F8;d.listenOnce(O8.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case jP.NO_ERROR:const _=d.getResponseJson();$e("Connection","XHR received:",JSON.stringify(_)),s(_);break;case jP.TIMEOUT:$e("Connection",'RPC "'+t+'" timed out'),c(new Be(ve.DEADLINE_EXCEEDED,"Request time out"));break;case jP.HTTP_ERROR:const w=d.getStatus();if($e("Connection",'RPC "'+t+'" failed with status:',w,"response text:",d.getResponseText()),w>0){const I=d.getResponseJson().error;if(I&&I.status&&I.message){const M=function(O){const N=O.toLowerCase().replace(/_/g,"-");return Object.values(ve).indexOf(N)>=0?N:ve.UNKNOWN}(I.status);c(new Be(M,I.message))}else c(new Be(ve.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new Be(ve.UNAVAILABLE,"Connection failed."));break;default:ft()}}finally{$e("Connection",'RPC "'+t+'" completed.')}});const p=JSON.stringify(r);d.send(e,"POST",p,i,15)})}_o(t,e,i){const r=[this.oo,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=x8(),c=R8(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(d.xmlHttpFactory=new N8({})),this.ho(d.initMessageHeaders,e,i),(0,F.uI)()||(0,F.b$)()||(0,F.d)()||(0,F.w1)()||(0,F.Mn)()||(0,F.ru)()||(d.httpHeadersOverwriteParam="$httpHeaders");const p=r.join("");$e("Connection","Creating WebChannel: "+p,d);const _=s.createWebChannel(p,d);let w=!1,I=!1;const M=new VK({Hr:N=>{I?$e("Connection","Not sending because WebChannel is closed:",N):(w||($e("Connection","Opening WebChannel transport."),_.open(),w=!0),$e("Connection","WebChannel sending:",N),_.send(N))},Jr:()=>_.close()}),O=(N,z,ie)=>{N.listen(z,Me=>{try{ie(Me)}catch(ze){setTimeout(()=>{throw ze},0)}})};return O(_,pT.EventType.OPEN,()=>{I||$e("Connection","WebChannel transport opened.")}),O(_,pT.EventType.CLOSE,()=>{I||(I=!0,$e("Connection","WebChannel transport closed"),M.io())}),O(_,pT.EventType.ERROR,N=>{I||(I=!0,xp("Connection","WebChannel transport errored:",N),M.io(new Be(ve.UNAVAILABLE,"The operation could not be completed")))}),O(_,pT.EventType.MESSAGE,N=>{var z;if(!I){const ie=N.data[0];Ut(!!ie);const Me=ie,ze=Me.error||(null===(z=Me[0])||void 0===z?void 0:z.error);if(ze){$e("Connection","WebChannel received error:",ze);const Xe=ze.status;let Qe=function(At){const on=cr[At];if(void 0!==on)return dj(on)}(Xe),Dt=ze.message;void 0===Qe&&(Qe=ve.INTERNAL,Dt="Unknown error status: "+Xe+" with message "+ze.message),I=!0,M.io(new Be(Qe,Dt)),_.close()}else $e("Connection","WebChannel received:",ie),M.ro(ie)}}),O(c,P8.STAT_EVENT,N=>{N.stat===_H.PROXY?$e("Connection","Detected buffering proxy"):N.stat===_H.NOPROXY&&$e("Connection","Detected no buffering proxy")}),setTimeout(()=>{M.so()},0),M}}function b3(){return typeof window<"u"?window:null}function jT(){return typeof document<"u"?document:null}function F0(n){return new k5(n,!0)}class TN{constructor(t,e,i=1e3,r=1.5,s=6e4){this.Hs=t,this.timerId=e,this.wo=i,this.mo=r,this.yo=s,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(t){this.cancel();const e=Math.floor(this.po+this.Ro()),i=Math.max(0,Date.now()-this.To),r=Math.max(0,e-i);r>0&&$e("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.po} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.Io=this.Hs.enqueueAfterDelay(this.timerId,r,()=>(this.To=Date.now(),t())),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}bo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class w3{constructor(t,e,i,r,s,c,d,p){this.Hs=t,this.Po=i,this.vo=r,this.Vo=s,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new TN(t,e)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var t=this;return(0,De.Z)(function*(){t.No()&&(yield t.close(0))})()}Oo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,()=>this.$o()))}Bo(t){this.Lo(),this.stream.send(t)}$o(){var t=this;return(0,De.Z)(function*(){if(t.ko())return t.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(t,e){var i=this;return(0,De.Z)(function*(){i.Lo(),i.Uo(),i.xo.cancel(),i.So++,4!==t?i.xo.reset():e&&e.code===ve.RESOURCE_EXHAUSTED?(Ji(e.toString()),Ji("Using maximum backoff delay to prevent overloading the backend."),i.xo.Eo()):e&&e.code===ve.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.qo(),i.stream.close(),i.stream=null),i.state=t,yield i.listener.Zr(e)})()}qo(){}auth(){this.state=1;const t=this.Ko(this.So),e=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.So===e&&this.Go(i,r)},i=>{t(()=>{const r=new Be(ve.UNKNOWN,"Fetching auth token failed: "+i.message);return this.Qo(r)})})}Go(t,e){const i=this.Ko(this.So);this.stream=this.jo(t,e),this.stream.Yr(()=>{i(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(r=>{i(()=>this.Qo(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Mo(){var t=this;this.state=5,this.xo.Ao((0,De.Z)(function*(){t.state=0,t.start()}))}Qo(t){return $e("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Ko(t){return e=>{this.Hs.enqueueAndForget(()=>this.So===t?e():($e("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class UK extends w3{constructor(t,e,i,r,s,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,c),this.It=s}jo(t,e){return this.Vo._o("Listen",t,e)}onMessage(t){this.xo.reset();const e=function O5(n,t){let e;if("targetChange"in t){const i="NO_CHANGE"===(p=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:ft(),r=t.targetChange.targetIds||[],s=function(p,_){return p.gt?(Ut(void 0===_||"string"==typeof _),Cr.fromBase64String(_||"")):(Ut(void 0===_||_ instanceof Uint8Array),Cr.fromUint8Array(_||new Uint8Array))}(n,t.targetChange.resumeToken),c=t.targetChange.cause,d=c&&function(p){const _=void 0===p.code?ve.UNKNOWN:dj(p.code);return new Be(_,p.message||"")}(c);e=new gj(i,r,s,d||null)}else if("documentChange"in t){const i=t.documentChange,r=Xc(n,i.document.name),s=Pr(i.document.updateTime),c=new Jr({mapValue:{fields:i.document.fields}}),d=ii.newFoundDocument(r,s,c);e=new AT(i.targetIds||[],i.removedTargetIds||[],d.key,d)}else if("documentDelete"in t){const i=t.documentDelete,r=Xc(n,i.document),s=i.readTime?Pr(i.readTime):Ft.min(),c=ii.newNoDocument(r,s);e=new AT([],i.removedTargetIds||[],c.key,c)}else if("documentRemove"in t){const i=t.documentRemove,r=Xc(n,i.document);e=new AT([],i.removedTargetIds||[],r,null)}else{if(!("filter"in t))return ft();{const i=t.filter,s=new C5(i.count||0);e=new mj(i.targetId,s)}}var p;return e}(this.It,t),i=function(r){if(!("targetChange"in r))return Ft.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?Ft.min():s.readTime?Pr(s.readTime):Ft.min()}(t);return this.listener.Wo(e,i)}zo(t){const e={};e.database=S0(this.It),e.addTarget=function(r,s){let c;const d=s.target;return c=wT(d)?{documents:Sj(r,d)}:{query:Tj(r,d)},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?c.resumeToken=bj(r,s.resumeToken):s.snapshotVersion.compareTo(Ft.min())>0&&(c.readTime=D0(r,s.snapshotVersion.toTimestamp())),c}(this.It,t);const i=function N5(n,t){const e=function(i,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ft()}}(0,t.purpose);return null==e?null:{"goog-listen-tags":e}}(0,t);i&&(e.labels=i),this.Bo(e)}Ho(t){const e={};e.database=S0(this.It),e.removeTarget=t,this.Bo(e)}}class HK extends w3{constructor(t,e,i,r,s,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,c),this.It=s,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(t,e){return this.Vo._o("Write",t,e)}onMessage(t){if(Ut(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Jo){this.xo.reset();const e=function P5(n,t){return n&&n.length>0?(Ut(void 0!==t),n.map(e=>function(i,r){let s=Pr(i.updateTime?i.updateTime:r);return s.isEqual(Ft.min())&&(s=Pr(r)),new v5(s,i.transformResults||[])}(e,t))):[]}(t.writeResults,t.commitTime),i=Pr(t.commitTime);return this.listener.Zo(i,e)}return Ut(!t.writeResults||0===t.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const t={};t.database=S0(this.It),this.Bo(t)}Xo(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>T0(this.It,i))};this.Bo(e)}}class jK extends class{}{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.Vo=i,this.It=r,this.nu=!1}su(){if(this.nu)throw new Be(ve.FAILED_PRECONDITION,"The client has already been terminated.")}co(t,e,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.Vo.co(t,e,i,r,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Be(ve.UNKNOWN,r.toString())})}fo(t,e,i,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.Vo.fo(t,e,i,s,c,r)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Be(ve.UNKNOWN,s.toString())})}terminate(){this.nu=!0}}class $K{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(t){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.cu("Offline")))}set(t){this.lu(),this.iu=0,"Online"===t&&(this.ou=!1),this.cu(t)}cu(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}au(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Ji(e),this.ou=!1):$e("OnlineStateTracker",e)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class GK{constructor(t,e,i,r,s){var c=this;this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=s,this.mu.qr(d=>{i.enqueueAndForget((0,De.Z)(function*(){var p;$h(c)&&($e("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,De.Z)(function*(_){const w=ot(_);w._u.add(4),yield U_(w),w.gu.set("Unknown"),w._u.delete(4),yield L0(w)}),function(_){return p.apply(this,arguments)})(c))}))}),this.gu=new $K(i,r)}}function L0(n){return AN.apply(this,arguments)}function AN(){return AN=(0,De.Z)(function*(n){if($h(n))for(const t of n.wu)yield t(!0)}),AN.apply(this,arguments)}function U_(n){return MN.apply(this,arguments)}function MN(){return MN=(0,De.Z)(function*(n){for(const t of n.wu)yield t(!1)}),MN.apply(this,arguments)}function $T(n,t){const e=ot(n);e.du.has(t.targetId)||(e.du.set(t.targetId,t),RN(e)?xN(e):j_(e).ko()&&kN(e,t))}function V0(n,t){const e=ot(n),i=j_(e);e.du.delete(t),i.ko()&&C3(e,t),0===e.du.size&&(i.ko()?i.Fo():$h(e)&&e.gu.set("Unknown"))}function kN(n,t){n.yu.Ot(t.targetId),j_(n).zo(t)}function C3(n,t){n.yu.Ot(t),j_(n).Ho(t)}function xN(n){n.yu=new T5({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),se:t=>n.du.get(t)||null}),j_(n).start(),n.gu.uu()}function RN(n){return $h(n)&&!j_(n).No()&&n.du.size>0}function $h(n){return 0===ot(n)._u.size}function E3(n){n.yu=void 0}function zK(n){return ON.apply(this,arguments)}function ON(){return ON=(0,De.Z)(function*(n){n.du.forEach((t,e)=>{kN(n,t)})}),ON.apply(this,arguments)}function qK(n,t){return PN.apply(this,arguments)}function PN(){return PN=(0,De.Z)(function*(n,t){E3(n),RN(n)?(n.gu.hu(t),xN(n)):n.gu.set("Unknown")}),PN.apply(this,arguments)}function WK(n,t,e){return NN.apply(this,arguments)}function NN(){return NN=(0,De.Z)(function*(n,t,e){if(n.gu.set("Online"),t instanceof gj&&2===t.state&&t.cause)try{yield(i=(0,De.Z)(function*(r,s){const c=s.cause;for(const d of s.targetIds)r.du.has(d)&&(yield r.remoteSyncer.rejectListen(d,c),r.du.delete(d),r.yu.removeTarget(d))}),function(r,s){return i.apply(this,arguments)})(n,t)}catch(i){$e("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield GT(n,i)}else if(t instanceof AT?n.yu.Gt(t):t instanceof mj?n.yu.Yt(t):n.yu.Wt(t),!e.isEqual(Ft.min()))try{const i=yield d3(n.localStore);e.compareTo(i)>=0&&(yield function(r,s){const c=r.yu.te(s);return c.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const _=r.du.get(p);_&&r.du.set(p,_.withResumeToken(d.resumeToken,s))}}),c.targetMismatches.forEach(d=>{const p=r.du.get(d);if(!p)return;r.du.set(d,p.withResumeToken(Cr.EMPTY_BYTE_STRING,p.snapshotVersion)),C3(r,d);const _=new Uh(p.target,d,1,p.sequenceNumber);kN(r,_)}),r.remoteSyncer.applyRemoteEvent(c)}(n,e))}catch(i){$e("RemoteStore","Failed to raise snapshot:",i),yield GT(n,i)}var i}),NN.apply(this,arguments)}function GT(n,t,e){return FN.apply(this,arguments)}function FN(){return FN=(0,De.Z)(function*(n,t,e){if(!Oh(t))throw t;n._u.add(1),yield U_(n),n.gu.set("Offline"),e||(e=()=>d3(n.localStore)),n.asyncQueue.enqueueRetryable((0,De.Z)(function*(){$e("RemoteStore","Retrying IndexedDB access"),yield e(),n._u.delete(1),yield L0(n)}))}),FN.apply(this,arguments)}function D3(n,t){return t().catch(e=>GT(n,e,t))}function H_(n){return LN.apply(this,arguments)}function LN(){return LN=(0,De.Z)(function*(n){const t=ot(n),e=Gh(t);let i=t.fu.length>0?t.fu[t.fu.length-1].batchId:-1;for(;YK(t);)try{const r=yield OK(t.localStore,i);if(null===r){0===t.fu.length&&e.Fo();break}i=r.batchId,ZK(t,r)}catch(r){yield GT(t,r)}I3(t)&&S3(t)}),LN.apply(this,arguments)}function YK(n){return $h(n)&&n.fu.length<10}function ZK(n,t){n.fu.push(t);const e=Gh(n);e.ko()&&e.Yo&&e.Xo(t.mutations)}function I3(n){return $h(n)&&!Gh(n).No()&&n.fu.length>0}function S3(n){Gh(n).start()}function KK(n){return VN.apply(this,arguments)}function VN(){return VN=(0,De.Z)(function*(n){Gh(n).eu()}),VN.apply(this,arguments)}function QK(n){return BN.apply(this,arguments)}function BN(){return BN=(0,De.Z)(function*(n){const t=Gh(n);for(const e of n.fu)t.Xo(e.mutations)}),BN.apply(this,arguments)}function XK(n,t,e){return UN.apply(this,arguments)}function UN(){return UN=(0,De.Z)(function*(n,t,e){const i=n.fu.shift(),r=cN.from(i,t,e);yield D3(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield H_(n)}),UN.apply(this,arguments)}function JK(n,t){return HN.apply(this,arguments)}function HN(){return HN=(0,De.Z)(function*(n,t){var e;t&&Gh(n).Yo&&(yield(e=(0,De.Z)(function*(i,r){if(uj(s=r.code)&&s!==ve.ABORTED){const c=i.fu.shift();Gh(i).Oo(),yield D3(i,()=>i.remoteSyncer.rejectFailedWrite(c.batchId,r)),yield H_(i)}var s}),function(i,r){return e.apply(this,arguments)})(n,t)),I3(n)&&S3(n)}),HN.apply(this,arguments)}function T3(n,t){return jN.apply(this,arguments)}function jN(){return jN=(0,De.Z)(function*(n,t){const e=ot(n);e.asyncQueue.verifyOperationInProgress(),$e("RemoteStore","RemoteStore received new credentials");const i=$h(e);e._u.add(3),yield U_(e),i&&e.gu.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e._u.delete(3),yield L0(e)}),jN.apply(this,arguments)}function $N(n,t){return GN.apply(this,arguments)}function GN(){return GN=(0,De.Z)(function*(n,t){const e=ot(n);t?(e._u.delete(2),yield L0(e)):t||(e._u.add(2),yield U_(e),e.gu.set("Unknown"))}),GN.apply(this,arguments)}function j_(n){return n.pu||(n.pu=function(t,e,i){const r=ot(t);return r.su(),new UK(e,r.Vo,r.authCredentials,r.appCheckCredentials,r.It,i)}(n.datastore,n.asyncQueue,{Yr:zK.bind(null,n),Zr:qK.bind(null,n),Wo:WK.bind(null,n)}),n.wu.push(function(){var t=(0,De.Z)(function*(e){e?(n.pu.Oo(),RN(n)?xN(n):n.gu.set("Unknown")):(yield n.pu.stop(),E3(n))});return function(e){return t.apply(this,arguments)}}())),n.pu}function Gh(n){return n.Iu||(n.Iu=function(t,e,i){const r=ot(t);return r.su(),new HK(e,r.Vo,r.authCredentials,r.appCheckCredentials,r.It,i)}(n.datastore,n.asyncQueue,{Yr:KK.bind(null,n),Zr:JK.bind(null,n),tu:QK.bind(null,n),Zo:XK.bind(null,n)}),n.wu.push(function(){var t=(0,De.Z)(function*(e){e?(n.Iu.Oo(),yield H_(n)):(yield n.Iu.stop(),n.fu.length>0&&($e("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(e){return t.apply(this,arguments)}}())),n.Iu}class zN{constructor(t,e,i,r,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(t,e,i,r,s){const c=Date.now()+i,d=new zN(t,e,c,r,s);return d.start(i),d}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Be(ve.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $_(n,t){if(Ji("AsyncQueue",`${t}: ${n}`),Oh(n))return new Be(ve.UNAVAILABLE,`${t}: ${n}`);throw n}class G_{constructor(t){this.comparator=t?(e,i)=>t(e,i)||nt.comparator(e.key,i.key):(e,i)=>nt.comparator(e.key,i.key),this.keyedMap=b0(),this.sortedSet=new Gi(this.comparator)}static emptySet(t){return new G_(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof G_)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const i=new G_;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}class A3{constructor(){this.Tu=new Gi(nt.comparator)}track(t){const e=t.doc.key,i=this.Tu.get(e);i?0!==t.type&&3===i.type?this.Tu=this.Tu.insert(e,t):3===t.type&&1!==i.type?this.Tu=this.Tu.insert(e,{type:i.type,doc:t.doc}):2===t.type&&2===i.type?this.Tu=this.Tu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===i.type?this.Tu=this.Tu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===i.type?this.Tu=this.Tu.remove(e):1===t.type&&2===i.type?this.Tu=this.Tu.insert(e,{type:1,doc:i.doc}):0===t.type&&1===i.type?this.Tu=this.Tu.insert(e,{type:2,doc:t.doc}):ft():this.Tu=this.Tu.insert(e,t)}Eu(){const t=[];return this.Tu.inorderTraversal((e,i)=>{t.push(i)}),t}}class z_{constructor(t,e,i,r,s,c,d,p){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p}static fromInitialDocuments(t,e,i,r){const s=[];return e.forEach(c=>{s.push({type:0,doc:c})}),new z_(t,e,G_.emptySet(e),s,i,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&_0(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}}class e7{constructor(){this.Au=void 0,this.listeners=[]}}class t7{constructor(){this.queries=new Bh(t=>YH(t),_0),this.onlineState="Unknown",this.Ru=new Set}}function qN(n,t){return WN.apply(this,arguments)}function WN(){return WN=(0,De.Z)(function*(n,t){const e=ot(n),i=t.query;let r=!1,s=e.queries.get(i);if(s||(r=!0,s=new e7),r)try{s.Au=yield e.onListen(i)}catch(c){const d=$_(c,`Initialization of query '${tN(t.query)}' failed`);return void t.onError(d)}e.queries.set(i,s),s.listeners.push(t),t.bu(e.onlineState),s.Au&&t.Pu(s.Au)&&KN(e)}),WN.apply(this,arguments)}function YN(n,t){return ZN.apply(this,arguments)}function ZN(){return ZN=(0,De.Z)(function*(n,t){const e=ot(n),i=t.query;let r=!1;const s=e.queries.get(i);if(s){const c=s.listeners.indexOf(t);c>=0&&(s.listeners.splice(c,1),r=0===s.listeners.length)}if(r)return e.queries.delete(i),e.onUnlisten(i)}),ZN.apply(this,arguments)}function n7(n,t){const e=ot(n);let i=!1;for(const r of t){const c=e.queries.get(r.query);if(c){for(const d of c.listeners)d.Pu(r)&&(i=!0);c.Au=r}}i&&KN(e)}function i7(n,t,e){const i=ot(n),r=i.queries.get(t);if(r)for(const s of r.listeners)s.onError(e);i.queries.delete(t)}function KN(n){n.Ru.forEach(t=>{t.next()})}class QN{constructor(t,e,i){this.query=t,this.vu=e,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=i||{}}Pu(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)3!==r.type&&i.push(r);t=new z_(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}let e=!1;return this.Vu?this.Du(t)&&(this.vu.next(t),e=!0):this.Cu(t,this.onlineState)&&(this.xu(t),e=!0),this.Su=t,e}onError(t){this.vu.error(t)}bu(t){this.onlineState=t;let e=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,t)&&(this.xu(this.Su),e=!0),e}Cu(t,e){return!t.fromCache||!(this.options.Nu&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)}Du(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(t){t=z_.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Vu=!0,this.vu.next(t)}}class r7{constructor(t,e){this.payload=t,this.byteLength=e}ku(){return"metadata"in this.payload}}class M3{constructor(t){this.It=t}Ji(t){return Xc(this.It,t)}Yi(t){return t.metadata.exists?Ij(this.It,t.document,!1):ii.newNoDocument(this.Ji(t.metadata.name),this.Xi(t.metadata.readTime))}Xi(t){return Pr(t)}}class s7{constructor(t,e,i){this.Mu=t,this.localStore=e,this.It=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=k3(t)}Ou(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.payload.namedQuery)this.queries.push(t.payload.namedQuery);else if(t.payload.documentMetadata){this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e;const i=wn.fromString(t.payload.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}Fu(t){const e=new Map,i=new M3(this.It);for(const r of t)if(r.metadata.queries){const s=i.Ji(r.metadata.name);for(const c of r.metadata.queries){const d=(e.get(c)||Jt()).add(s);e.set(c,d)}}return e}complete(){var t=this;return(0,De.Z)(function*(){const e=yield function PK(n,t,e,i){return wN.apply(this,arguments)}(t.localStore,new M3(t.It),t.documents,t.Mu.id),i=t.Fu(t.documents);for(const r of t.queries)yield NK(t.localStore,r,i.get(r.name));return t.progress.taskState="Success",{progress:t.progress,$u:t.collectionGroups,Bu:e}})()}}function k3(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class x3{constructor(t){this.key=t}}class R3{constructor(t){this.key=t}}class O3{constructor(t,e){this.query=t,this.Lu=e,this.Uu=null,this.current=!1,this.qu=Jt(),this.mutatedKeys=Jt(),this.Ku=KH(t),this.Gu=new G_(this.Ku)}get Qu(){return this.Lu}ju(t,e){const i=e?e.Wu:new A3,r=e?e.Gu:this.Gu;let s=e?e.mutatedKeys:this.mutatedKeys,c=r,d=!1;const p="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,_="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((w,I)=>{const M=r.get(w),O=nN(this.query,I)?I:null,N=!!M&&this.mutatedKeys.has(M.key),z=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let ie=!1;M&&O?M.data.isEqual(O.data)?N!==z&&(i.track({type:3,doc:O}),ie=!0):this.zu(M,O)||(i.track({type:2,doc:O}),ie=!0,(p&&this.Ku(O,p)>0||_&&this.Ku(O,_)<0)&&(d=!0)):!M&&O?(i.track({type:0,doc:O}),ie=!0):M&&!O&&(i.track({type:1,doc:M}),ie=!0,(p||_)&&(d=!0)),ie&&(O?(c=c.add(O),s=z?s.add(w):s.delete(w)):(c=c.delete(w),s=s.delete(w)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const w="F"===this.query.limitType?c.last():c.first();c=c.delete(w.key),s=s.delete(w.key),i.track({type:1,doc:w})}return{Gu:c,Wu:i,$i:d,mutatedKeys:s}}zu(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i){const r=this.Gu;this.Gu=t.Gu,this.mutatedKeys=t.mutatedKeys;const s=t.Wu.Eu();s.sort((_,w)=>function(I,M){const O=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ft()}};return O(I)-O(M)}(_.type,w.type)||this.Ku(_.doc,w.doc)),this.Hu(i);const c=e?this.Ju():[],d=0===this.qu.size&&this.current?1:0,p=d!==this.Uu;return this.Uu=d,0!==s.length||p?{snapshot:new z_(this.query,t.Gu,r,s,t.mutatedKeys,0===d,p,!1),Yu:c}:{Yu:c}}bu(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new A3,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}Xu(t){return!this.Lu.has(t)&&!!this.Gu.has(t)&&!this.Gu.get(t).hasLocalMutations}Hu(t){t&&(t.addedDocuments.forEach(e=>this.Lu=this.Lu.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Lu=this.Lu.delete(e)),this.current=t.current)}Ju(){if(!this.current)return[];const t=this.qu;this.qu=Jt(),this.Gu.forEach(i=>{this.Xu(i.key)&&(this.qu=this.qu.add(i.key))});const e=[];return t.forEach(i=>{this.qu.has(i)||e.push(new R3(i))}),this.qu.forEach(i=>{t.has(i)||e.push(new x3(i))}),e}Zu(t){this.Lu=t.Hi,this.qu=Jt();const e=this.ju(t.documents);return this.applyChanges(e,!0)}tc(){return z_.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.Uu)}}class o7{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class a7{constructor(t){this.key=t,this.ec=!1}}class l7{constructor(t,e,i,r,s,c){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=c,this.nc={},this.sc=new Bh(d=>YH(d),_0),this.ic=new Map,this.rc=new Set,this.oc=new Gi(nt.comparator),this.uc=new Map,this.cc=new pN,this.ac={},this.hc=new Map,this.lc=Wp.vn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function c7(n,t){return XN.apply(this,arguments)}function XN(){return XN=(0,De.Z)(function*(n,t){const e=C1(n);let i,r;const s=e.sc.get(t);if(s)i=s.targetId,e.sharedClientState.addLocalQueryTarget(i),r=s.view.tc();else{const c=yield V_(e.localStore,go(t));e.isPrimaryClient&&$T(e.remoteStore,c);const d=e.sharedClientState.addLocalQueryTarget(c.targetId);i=c.targetId,r=yield JN(e,t,i,"current"===d)}return r}),XN.apply(this,arguments)}function JN(n,t,e,i){return e1.apply(this,arguments)}function e1(){return e1=(0,De.Z)(function*(n,t,e,i){n.dc=(w,I,M)=>{return(O=(0,De.Z)(function*(N,z,ie,Me){let ze=z.view.ju(ie);ze.$i&&(ze=yield BT(N.localStore,z.query,!1).then(({documents:Dt})=>z.view.ju(Dt,ze)));const Xe=Me&&Me.targetChanges.get(z.targetId),Qe=z.view.applyChanges(ze,N.isPrimaryClient,Xe);return d1(N,z.targetId,Qe.Yu),Qe.snapshot}),function(N,z,ie,Me){return O.apply(this,arguments)})(n,w,I,M);var O};const r=yield BT(n.localStore,t,!0),s=new O3(t,r.Hi),c=s.ju(r.documents),d=E0.createSynthesizedTargetChangeForCurrentChange(e,i&&"Offline"!==n.onlineState),p=s.applyChanges(c,n.isPrimaryClient,d);d1(n,e,p.Yu);const _=new o7(t,e,s);return n.sc.set(t,_),n.ic.has(e)?n.ic.get(e).push(t):n.ic.set(e,[t]),p.snapshot}),e1.apply(this,arguments)}function u7(n,t){return t1.apply(this,arguments)}function t1(){return t1=(0,De.Z)(function*(n,t){const e=ot(n),i=e.sc.get(t),r=e.ic.get(i.targetId);if(r.length>1)return e.ic.set(i.targetId,r.filter(s=>!_0(s,t))),void e.sc.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(i.targetId),e.sharedClientState.isActiveQueryTarget(i.targetId)||(yield B_(e.localStore,i.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(i.targetId),V0(e.remoteStore,i.targetId),q_(e,i.targetId)}).catch(Rh))):(q_(e,i.targetId),yield B_(e.localStore,i.targetId,!0))}),t1.apply(this,arguments)}function n1(){return n1=(0,De.Z)(function*(n,t,e){const i=E1(n);try{const r=yield function(s,c){const d=ot(s),p=bi.now(),_=c.reduce((M,O)=>M.add(O.key),Jt());let w,I;return d.persistence.runTransaction("Locally write mutations","readwrite",M=>{let O=_o(),N=Jt();return d.Gi.getEntries(M,_).next(z=>{O=z,O.forEach((ie,Me)=>{Me.isValidDocument()||(N=N.add(ie))})}).next(()=>d.localDocuments.getOverlayedDocuments(M,O)).next(z=>{w=z;const ie=[];for(const Me of c){const ze=w5(Me,w.get(Me.key).overlayedDocument);null!=ze&&ie.push(new cd(Me.key,ze,BH(ze.value.mapValue),wi.exists(!0)))}return d.mutationQueue.addMutationBatch(M,p,ie,c)}).next(z=>{I=z;const ie=z.applyToLocalDocumentSet(w,N);return d.documentOverlayCache.saveOverlays(M,z.batchId,ie)})}).then(()=>({batchId:I.batchId,changes:fj(w)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(s,c,d){let p=s.ac[s.currentUser.toKey()];p||(p=new Gi(zt)),p=p.insert(c,d),s.ac[s.currentUser.toKey()]=p}(i,r.batchId,e),yield ud(i,r.changes),yield H_(i.remoteStore)}catch(r){const s=$_(r,"Failed to persist write");e.reject(s)}}),n1.apply(this,arguments)}function P3(n,t){return r1.apply(this,arguments)}function r1(){return r1=(0,De.Z)(function*(n,t){const e=ot(n);try{const i=yield RK(e.localStore,t);t.targetChanges.forEach((r,s)=>{const c=e.uc.get(s);c&&(Ut(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?c.ec=!0:r.modifiedDocuments.size>0?Ut(c.ec):r.removedDocuments.size>0&&(Ut(c.ec),c.ec=!1))}),yield ud(e,i,t)}catch(i){yield Rh(i)}}),r1.apply(this,arguments)}function N3(n,t,e){const i=ot(n);if(i.isPrimaryClient&&0===e||!i.isPrimaryClient&&1===e){const r=[];i.sc.forEach((s,c)=>{const d=c.view.bu(t);d.snapshot&&r.push(d.snapshot)}),function(s,c){const d=ot(s);d.onlineState=c;let p=!1;d.queries.forEach((_,w)=>{for(const I of w.listeners)I.bu(c)&&(p=!0)}),p&&KN(d)}(i.eventManager,t),r.length&&i.nc.Wo(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function h7(n,t,e){return s1.apply(this,arguments)}function s1(){return s1=(0,De.Z)(function*(n,t,e){const i=ot(n);i.sharedClientState.updateQueryState(t,"rejected",e);const r=i.uc.get(t),s=r&&r.key;if(s){let c=new Gi(nt.comparator);c=c.insert(s,ii.newNoDocument(s,Ft.min()));const d=Jt().add(s),p=new C0(Ft.min(),new Map,new Hn(zt),c,d);yield P3(i,p),i.oc=i.oc.remove(s),i.uc.delete(t),h1(i)}else yield B_(i.localStore,t,!1).then(()=>q_(i,t,e)).catch(Rh)}),s1.apply(this,arguments)}function f7(n,t){return o1.apply(this,arguments)}function o1(){return o1=(0,De.Z)(function*(n,t){const e=ot(n),i=t.batch.batchId;try{const r=yield xK(e.localStore,t);u1(e,i,null),c1(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),yield ud(e,r)}catch(r){yield Rh(r)}}),o1.apply(this,arguments)}function p7(n,t,e){return a1.apply(this,arguments)}function a1(){return a1=(0,De.Z)(function*(n,t,e){const i=ot(n);try{const r=yield function(s,c){const d=ot(s);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let _;return d.mutationQueue.lookupMutationBatch(p,c).next(w=>(Ut(null!==w),_=w.keys(),d.mutationQueue.removeMutationBatch(p,w))).next(()=>d.mutationQueue.performConsistencyCheck(p)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(p,_,c)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_)).next(()=>d.localDocuments.getDocuments(p,_))})}(i.localStore,t);u1(i,t,e),c1(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),yield ud(i,r)}catch(r){yield Rh(r)}}),a1.apply(this,arguments)}function l1(){return l1=(0,De.Z)(function*(n,t){const e=ot(n);$h(e.remoteStore)||$e("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(s){const c=ot(s);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>c.mutationQueue.getHighestUnacknowledgedBatchId(d))}(e.localStore);if(-1===i)return void t.resolve();const r=e.hc.get(i)||[];r.push(t),e.hc.set(i,r)}catch(i){const r=$_(i,"Initialization of waitForPendingWrites() operation failed");t.reject(r)}}),l1.apply(this,arguments)}function c1(n,t){(n.hc.get(t)||[]).forEach(e=>{e.resolve()}),n.hc.delete(t)}function u1(n,t,e){const i=ot(n);let r=i.ac[i.currentUser.toKey()];if(r){const s=r.get(t);s&&(e?s.reject(e):s.resolve(),r=r.remove(t)),i.ac[i.currentUser.toKey()]=r}}function q_(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.ic.get(t))n.sc.delete(i),e&&n.nc._c(i,e);n.ic.delete(t),n.isPrimaryClient&&n.cc.ls(t).forEach(i=>{n.cc.containsKey(i)||F3(n,i)})}function F3(n,t){n.rc.delete(t.path.canonicalString());const e=n.oc.get(t);null!==e&&(V0(n.remoteStore,e),n.oc=n.oc.remove(t),n.uc.delete(e),h1(n))}function d1(n,t,e){for(const i of e)i instanceof x3?(n.cc.addReference(i.key,t),g7(n,i)):i instanceof R3?($e("SyncEngine","Document no longer in limbo: "+i.key),n.cc.removeReference(i.key,t),n.cc.containsKey(i.key)||F3(n,i.key)):ft()}function g7(n,t){const e=t.key,i=e.path.canonicalString();n.oc.get(e)||n.rc.has(i)||($e("SyncEngine","New document in limbo: "+e),n.rc.add(i),h1(n))}function h1(n){for(;n.rc.size>0&&n.oc.size<n.maxConcurrentLimboResolutions;){const t=n.rc.values().next().value;n.rc.delete(t);const e=new nt(wn.fromString(t)),i=n.lc.next();n.uc.set(i,new a7(e)),n.oc=n.oc.insert(e,i),$T(n.remoteStore,new Uh(go(A_(e.path)),i,2,mo.at))}}function ud(n,t,e){return f1.apply(this,arguments)}function f1(){return f1=(0,De.Z)(function*(n,t,e){const i=ot(n),r=[],s=[],c=[];var d;i.sc.isEmpty()||(i.sc.forEach((d,p)=>{c.push(i.dc(p,t,e).then(_=>{if(_){i.isPrimaryClient&&i.sharedClientState.updateQueryState(p.targetId,_.fromCache?"not-current":"current"),r.push(_);const w=yN.Ci(p.targetId,_);s.push(w)}}))}),yield Promise.all(c),i.nc.Wo(r),yield(d=(0,De.Z)(function*(p,_){const w=ot(p);try{yield w.persistence.runTransaction("notifyLocalViewChanges","readwrite",I=>pe.forEach(_,M=>pe.forEach(M.Si,O=>w.persistence.referenceDelegate.addReference(I,M.targetId,O)).next(()=>pe.forEach(M.Di,O=>w.persistence.referenceDelegate.removeReference(I,M.targetId,O)))))}catch(I){if(!Oh(I))throw I;$e("LocalStore","Failed to update sequence numbers: "+I)}for(const I of _){const M=I.targetId;if(!I.fromCache){const O=w.Ui.get(M),z=O.withLastLimboFreeSnapshotVersion(O.snapshotVersion);w.Ui=w.Ui.insert(M,z)}}}),function(p,_){return d.apply(this,arguments)})(i.localStore,s))}),f1.apply(this,arguments)}function _7(n,t){return p1.apply(this,arguments)}function p1(){return p1=(0,De.Z)(function*(n,t){const e=ot(n);if(!e.currentUser.isEqual(t)){$e("SyncEngine","User change. New user:",t.toKey());const i=yield u3(e.localStore,t);e.currentUser=t,(r=e).hc.forEach(c=>{c.forEach(d=>{d.reject(new Be(ve.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.hc.clear(),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield ud(e,i.ji)}var r}),p1.apply(this,arguments)}function y7(n,t){const e=ot(n),i=e.uc.get(t);if(i&&i.ec)return Jt().add(i.key);{let r=Jt();const s=e.ic.get(t);if(!s)return r;for(const c of s){const d=e.sc.get(c);r=r.unionWith(d.view.Qu)}return r}}function v7(n,t){return m1.apply(this,arguments)}function m1(){return m1=(0,De.Z)(function*(n,t){const e=ot(n),i=yield BT(e.localStore,t.query,!0),r=t.view.Zu(i);return e.isPrimaryClient&&d1(e,t.targetId,r.Yu),r}),m1.apply(this,arguments)}function b7(n,t){return g1.apply(this,arguments)}function g1(){return g1=(0,De.Z)(function*(n,t){const e=ot(n);return p3(e.localStore,t).then(i=>ud(e,i))}),g1.apply(this,arguments)}function w7(n,t,e,i){return _1.apply(this,arguments)}function _1(){return _1=(0,De.Z)(function*(n,t,e,i){const r=ot(n),s=yield function(c,d){const p=ot(c),_=ot(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",w=>_.Tn(w,d).next(I=>I?p.localDocuments.getDocuments(w,I):pe.resolve(null)))}(r.localStore,t);var d;null!==s?("pending"===e?yield H_(r.remoteStore):"acknowledged"===e||"rejected"===e?(u1(r,t,i||null),c1(r,t),d=t,ot(ot(r.localStore).mutationQueue).An(d)):ft(),yield ud(r,s)):$e("SyncEngine","Cannot apply mutation batch with id: "+t)}),_1.apply(this,arguments)}function y1(){return y1=(0,De.Z)(function*(n,t){const e=ot(n);if(C1(e),E1(e),!0===t&&!0!==e.fc){const i=e.sharedClientState.getAllActiveQueryTargets(),r=yield L3(e,i.toArray());e.fc=!0,yield $N(e.remoteStore,!0);for(const s of r)$T(e.remoteStore,s)}else if(!1===t&&!1!==e.fc){const i=[];let r=Promise.resolve();e.ic.forEach((s,c)=>{e.sharedClientState.isLocalQueryTarget(c)?i.push(c):r=r.then(()=>(q_(e,c),B_(e.localStore,c,!0))),V0(e.remoteStore,c)}),yield r,yield L3(e,i),function(s){const c=ot(s);c.uc.forEach((d,p)=>{V0(c.remoteStore,p)}),c.cc.fs(),c.uc=new Map,c.oc=new Gi(nt.comparator)}(e),e.fc=!1,yield $N(e.remoteStore,!1)}}),y1.apply(this,arguments)}function L3(n,t,e){return v1.apply(this,arguments)}function v1(){return v1=(0,De.Z)(function*(n,t,e){const i=ot(n),r=[],s=[];for(const c of t){let d;const p=i.ic.get(c);if(p&&0!==p.length){d=yield V_(i.localStore,go(p[0]));for(const _ of p){const w=i.sc.get(_),I=yield v7(i,w);I.snapshot&&s.push(I.snapshot)}}else{const _=yield f3(i.localStore,c);d=yield V_(i.localStore,_),yield JN(i,V3(_),c,!1)}r.push(d)}return i.nc.Wo(s),r}),v1.apply(this,arguments)}function V3(n){return qH(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function E7(n){const t=ot(n);return ot(ot(t.localStore).persistence).vi()}function D7(n,t,e,i){return b1.apply(this,arguments)}function b1(){return b1=(0,De.Z)(function*(n,t,e,i){const r=ot(n);if(r.fc)return void $e("SyncEngine","Ignoring unexpected query state notification.");const s=r.ic.get(t);if(s&&s.length>0)switch(e){case"current":case"not-current":{const c=yield p3(r.localStore,ZH(s[0])),d=C0.createSynthesizedRemoteEventForCurrentChange(t,"current"===e);yield ud(r,c,d);break}case"rejected":yield B_(r.localStore,t,!0),q_(r,t,i);break;default:ft()}}),b1.apply(this,arguments)}function I7(n,t,e){return w1.apply(this,arguments)}function w1(){return w1=(0,De.Z)(function*(n,t,e){const i=C1(n);if(i.fc){for(const r of t){if(i.ic.has(r)){$e("SyncEngine","Adding an already active target "+r);continue}const s=yield f3(i.localStore,r),c=yield V_(i.localStore,s);yield JN(i,V3(s),c.targetId,!1),$T(i.remoteStore,c)}for(const r of e)i.ic.has(r)&&(yield B_(i.localStore,r,!1).then(()=>{V0(i.remoteStore,r),q_(i,r)}).catch(Rh))}}),w1.apply(this,arguments)}function C1(n){const t=ot(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=P3.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=y7.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=h7.bind(null,t),t.nc.Wo=n7.bind(null,t.eventManager),t.nc._c=i7.bind(null,t.eventManager),t}function E1(n){const t=ot(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=f7.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=p7.bind(null,t),t}class B3{constructor(){this.synchronizeTabs=!1}initialize(t){var e=this;return(0,De.Z)(function*(){e.It=F0(t.databaseInfo.databaseId),e.sharedClientState=e.mc(t),e.persistence=e.gc(t),yield e.persistence.start(),e.localStore=e.yc(t),e.gcScheduler=e.Ic(t,e.localStore),e.indexBackfillerScheduler=e.Tc(t,e.localStore)})()}Ic(t,e){return null}Tc(t,e){return null}yc(t){return c3(this.persistence,new l3,t.initialUser,this.It)}gc(t){return new o3(LT.Bs,this.It)}mc(t){return new y3}terminate(){var t=this;return(0,De.Z)(function*(){t.gcScheduler&&t.gcScheduler.stop(),yield t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class U3 extends B3{constructor(t,e,i){super(),this.Ec=t,this.cacheSizeBytes=e,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(t){var e=()=>super.initialize,i=this;return(0,De.Z)(function*(){yield e().call(i,t),yield i.Ec.initialize(i,t),yield E1(i.Ec.syncEngine),yield H_(i.Ec.remoteStore),yield i.persistence.li(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}yc(t){return c3(this.persistence,new l3,t.initialUser,this.It)}Ic(t,e){return new gK(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue,e)}Tc(t,e){const i=new X8(e,this.persistence);return new Q8(t.asyncQueue,i)}gc(t){const e=_N(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?yo.withCacheSize(this.cacheSizeBytes):yo.DEFAULT;return new gN(this.synchronizeTabs,e,t.clientId,i,t.asyncQueue,b3(),jT(),this.It,this.sharedClientState,!!this.forceOwnership)}mc(t){return new y3}}class T7 extends U3{constructor(t,e){super(t,e,!1),this.Ec=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){var e=()=>super.initialize,i=this;return(0,De.Z)(function*(){yield e().call(i,t);const r=i.Ec.syncEngine;i.sharedClientState instanceof SN&&(i.sharedClientState.syncEngine={Fr:w7.bind(null,r),$r:D7.bind(null,r),Br:I7.bind(null,r),vi:E7.bind(null,r),Or:b7.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.li(function(){var s=(0,De.Z)(function*(c){yield function C7(n,t){return y1.apply(this,arguments)}(i.Ec.syncEngine,c),i.gcScheduler&&(c&&!i.gcScheduler.started?i.gcScheduler.start():c||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(c&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():c||i.indexBackfillerScheduler.stop())});return function(c){return s.apply(this,arguments)}}())})()}mc(t){const e=b3();if(!SN.C(e))throw new Be(ve.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=_N(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new SN(e,t.asyncQueue,i,t.clientId,t.initialUser)}}class D1{initialize(t,e){var i=this;return(0,De.Z)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(e),i.remoteStore=i.createRemoteStore(e),i.eventManager=i.createEventManager(e),i.syncEngine=i.createSyncEngine(e,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>N3(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=_7.bind(null,i.syncEngine),yield $N(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new t7}createDatastore(t){const e=F0(t.databaseInfo.databaseId),i=new BK(t.databaseInfo);return new jK(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return e=this.localStore,i=this.datastore,r=t.asyncQueue,s=d=>N3(this.syncEngine,d,0),c=v3.C()?new v3:new FK,new GK(e,i,r,s,c);var e,i,r,s,c}createSyncEngine(t,e){return function(i,r,s,c,d,p,_){const w=new l7(i,r,s,c,d,p);return _&&(w.fc=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return(t=(0,De.Z)(function*(e){const i=ot(e);$e("RemoteStore","RemoteStore shutting down."),i._u.add(5),yield U_(i),i.mu.shutdown(),i.gu.set("Unknown")}),function(e){return t.apply(this,arguments)})(this.remoteStore);var t}}function H3(n,t=10240){let e=0;return{read:()=>(0,De.Z)(function*(){if(e<n.byteLength){const i={value:n.slice(e,e+t),done:!1};return e+=t,i}return{done:!0}})(),cancel:()=>(0,De.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class zT{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ac(this.observer.next,t)}error(t){this.observer.error?this.Ac(this.observer.error,t):Ji("Uncaught Error in snapshot listener:",t)}Rc(){this.muted=!0}Ac(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class A7{constructor(t,e){this.bc=t,this.It=e,this.metadata=new Or,this.buffer=new Uint8Array,this.Pc=new TextDecoder("utf-8"),this.vc().then(i=>{i&&i.ku()?this.metadata.resolve(i.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.payload)}`))},i=>this.metadata.reject(i))}close(){return this.bc.cancel()}getMetadata(){var t=this;return(0,De.Z)(function*(){return t.metadata.promise})()}wc(){var t=this;return(0,De.Z)(function*(){return yield t.getMetadata(),t.vc()})()}vc(){var t=this;return(0,De.Z)(function*(){const e=yield t.Vc();if(null===e)return null;const i=t.Pc.decode(e),r=Number(i);isNaN(r)&&t.Sc(`length string (${i}) is not valid number`);const s=yield t.Dc(r);return new r7(JSON.parse(s),e.length+r)})()}Cc(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}Vc(){var t=this;return(0,De.Z)(function*(){for(;t.Cc()<0&&!(yield t.xc()););if(0===t.buffer.length)return null;const e=t.Cc();e<0&&t.Sc("Reached the end of bundle when a length string is expected.");const i=t.buffer.slice(0,e);return t.buffer=t.buffer.slice(e),i})()}Dc(t){var e=this;return(0,De.Z)(function*(){for(;e.buffer.length<t;)(yield e.xc())&&e.Sc("Reached the end of bundle when more is expected.");const i=e.Pc.decode(e.buffer.slice(0,t));return e.buffer=e.buffer.slice(t),i})()}Sc(t){throw this.bc.cancel(),new Error(`Invalid bundle format: ${t}`)}xc(){var t=this;return(0,De.Z)(function*(){const e=yield t.bc.read();if(!e.done){const i=new Uint8Array(t.buffer.length+e.value.length);i.set(t.buffer),i.set(e.value,t.buffer.length),t.buffer=i}return e.done})()}}class M7{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(t){var e=this;return(0,De.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw new Be(ve.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=(0,De.Z)(function*(s,c){const d=ot(s),p=S0(d.It)+"/documents",_={documents:c.map(O=>I0(d.It,O))},w=yield d.fo("BatchGetDocuments",p,_,c.length),I=new Map;w.forEach(O=>{const N=function R5(n,t){return"found"in t?function(e,i){Ut(!!i.found);const r=Xc(e,i.found.name),s=Pr(i.found.updateTime),c=new Jr({mapValue:{fields:i.found.fields}});return ii.newFoundDocument(r,s,c)}(n,t):"missing"in t?function(e,i){Ut(!!i.missing),Ut(!!i.readTime);const r=Xc(e,i.missing),s=Pr(i.readTime);return ii.newNoDocument(r,s)}(n,t):ft()}(d.It,O);I.set(N.key.toString(),N)});const M=[];return c.forEach(O=>{const N=I.get(O.toString());Ut(!!N),M.push(N)}),M}),function(s,c){return r.apply(this,arguments)})(e.datastore,t);var r;return i.forEach(r=>e.recordVersion(r)),i})()}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new O_(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,De.Z)(function*(){if(t.ensureCommitNotCalled(),t.lastWriteError)throw t.lastWriteError;const e=t.readVersions;var i;t.mutations.forEach(i=>{e.delete(i.key.toString())}),e.forEach((i,r)=>{const s=nt.fromPath(r);t.mutations.push(new iN(s,t.precondition(s)))}),yield(i=(0,De.Z)(function*(r,s){const c=ot(r),d=S0(c.It)+"/documents",p={writes:s.map(_=>T0(c.It,_))};yield c.co("Commit",d,p)}),function(r,s){return i.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw ft();e=Ft.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!e.isEqual(i))throw new Be(ve.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?e.isEqual(Ft.min())?wi.exists(!1):wi.updateTime(e):wi.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Ft.min()))throw new Be(ve.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return wi.updateTime(e)}return wi.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class k7{constructor(t,e,i,r,s){this.asyncQueue=t,this.datastore=e,this.options=i,this.updateFunction=r,this.deferred=s,this.Nc=i.maxAttempts,this.xo=new TN(this.asyncQueue,"transaction_retry")}run(){this.Nc-=1,this.kc()}kc(){var t=this;this.xo.Ao((0,De.Z)(function*(){const e=new M7(t.datastore),i=t.Mc(e);i&&i.then(r=>{t.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{t.deferred.resolve(r)}).catch(s=>{t.Oc(s)}))}).catch(r=>{t.Oc(r)})}))}Mc(t){try{const e=this.updateFunction(t);return!d0(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Oc(t){this.Nc>0&&this.Fc(t)?(this.Nc-=1,this.asyncQueue.enqueueAndForget(()=>(this.kc(),Promise.resolve()))):this.deferred.reject(t)}Fc(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||!uj(e)}return!1}}class x7{constructor(t,e,i,r){var s=this;this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=Rr.UNAUTHENTICATED,this.clientId=wH.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var c=(0,De.Z)(function*(d){$e("FirestoreClient","Received user=",d.uid),yield s.authCredentialListener(d),s.user=d});return function(d){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(i,c=>($e("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var t=this;return(0,De.Z)(function*(){return{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,authCredentials:t.authCredentials,appCheckCredentials:t.appCheckCredentials,initialUser:t.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Be(ve.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const e=new Or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,De.Z)(function*(){try{t.onlineComponents&&(yield t.onlineComponents.terminate()),t.offlineComponents&&(yield t.offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve()}catch(i){const r=$_(i,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}function j3(n,t){return I1.apply(this,arguments)}function I1(){return I1=(0,De.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress(),$e("FirestoreClient","Initializing OfflineComponentProvider");const e=yield n.getConfiguration();yield t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(function(){var r=(0,De.Z)(function*(s){i.isEqual(s)||(yield u3(t.localStore,s),i=s)});return function(s){return r.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=t}),I1.apply(this,arguments)}function $3(n,t){return S1.apply(this,arguments)}function S1(){return S1=(0,De.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress();const e=yield T1(n);$e("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield t.initialize(e,i),n.setCredentialChangeListener(r=>T3(t.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>T3(t.remoteStore,s)),n.onlineComponents=t}),S1.apply(this,arguments)}function T1(n){return A1.apply(this,arguments)}function A1(){return A1=(0,De.Z)(function*(n){return n.offlineComponents||($e("FirestoreClient","Using default OfflineComponentProvider"),yield j3(n,new B3)),n.offlineComponents}),A1.apply(this,arguments)}function qT(n){return M1.apply(this,arguments)}function M1(){return M1=(0,De.Z)(function*(n){return n.onlineComponents||($e("FirestoreClient","Using default OnlineComponentProvider"),yield $3(n,new D1)),n.onlineComponents}),M1.apply(this,arguments)}function G3(n){return T1(n).then(t=>t.persistence)}function WT(n){return T1(n).then(t=>t.localStore)}function z3(n){return qT(n).then(t=>t.remoteStore)}function k1(n){return qT(n).then(t=>t.syncEngine)}function W_(n){return x1.apply(this,arguments)}function x1(){return x1=(0,De.Z)(function*(n){const t=yield qT(n),e=t.eventManager;return e.onListen=c7.bind(null,t.syncEngine),e.onUnlisten=u7.bind(null,t.syncEngine),e}),x1.apply(this,arguments)}function q3(n,t,e={}){const i=new Or;return n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return function(r,s,c,d,p){const _=new zT({next:I=>{s.enqueueAndForget(()=>YN(r,w));const M=I.docs.has(c);!M&&I.fromCache?p.reject(new Be(ve.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&I.fromCache&&d&&"server"===d.source?p.reject(new Be(ve.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(I)},error:I=>p.reject(I)}),w=new QN(A_(c.path),_,{includeMetadataChanges:!0,Nu:!0});return qN(r,w)}(yield W_(n),n.asyncQueue,t,e,i)})),i.promise}function W3(n,t,e={}){const i=new Or;return n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return function(r,s,c,d,p){const _=new zT({next:I=>{s.enqueueAndForget(()=>YN(r,w)),I.fromCache&&"server"===d.source?p.reject(new Be(ve.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(I)},error:I=>p.reject(I)}),w=new QN(c,_,{includeMetadataChanges:!0,Nu:!0});return qN(r,w)}(yield W_(n),n.asyncQueue,t,e,i)})),i.promise}const Y3=new Map;function R1(n,t,e){if(!e)throw new Be(ve.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function Z3(n,t,e,i){if(!0===t&&!0===i)throw new Be(ve.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function K3(n){if(!nt.isDocumentKey(n))throw new Be(ve.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Q3(n){if(nt.isDocumentKey(n))throw new Be(ve.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function YT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const t=(e=n).constructor?e.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var e;return"function"==typeof n?"a function":ft()}function _n(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Be(ve.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=YT(n);throw new Be(ve.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function X3(n,t){if(t<=0)throw new Be(ve.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}class J3{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Be(ve.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Be(ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Z3("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class B0{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new J3({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Be(ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Be(ve.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new J3(t),void 0!==t.credentials&&(this._authCredentials=function(e){if(!e)return new B8;switch(e.type){case"gapi":return new $8(e.client,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Be(ve.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=Y3.get(t);e&&($e("ComponentProvider","Removing Datastore"),Y3.delete(t),e.terminate())}(this),Promise.resolve()}}class gi{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new eu(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new gi(this.firestore,t,this._key)}}class gs{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new gs(this.firestore,t,this._query)}}class eu extends gs{constructor(t,e,i){super(t,e,A_(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new gi(this.firestore,null,new nt(t))}withConverter(t){return new eu(this.firestore,t,this._path)}}function e$(n,t,...e){if(n=(0,F.m9)(n),R1("collection","path",t),n instanceof B0){const i=wn.fromString(t,...e);return Q3(i),new eu(n,null,i)}{if(!(n instanceof gi||n instanceof eu))throw new Be(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(wn.fromString(t,...e));return Q3(i),new eu(n.firestore,null,i)}}function ZT(n,t,...e){if(n=(0,F.m9)(n),1===arguments.length&&(t=wH.R()),R1("doc","path",t),n instanceof B0){const i=wn.fromString(t,...e);return K3(i),new gi(n,null,new nt(i))}{if(!(n instanceof gi||n instanceof eu))throw new Be(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(wn.fromString(t,...e));return K3(i),new gi(n.firestore,n instanceof eu?n.converter:null,new nt(i))}}function t$(n,t){return n=(0,F.m9)(n),t=(0,F.m9)(t),(n instanceof gi||n instanceof eu)&&(t instanceof gi||t instanceof eu)&&n.firestore===t.firestore&&n.path===t.path&&n.converter===t.converter}function n$(n,t){return n=(0,F.m9)(n),t=(0,F.m9)(t),n instanceof gs&&t instanceof gs&&n.firestore===t.firestore&&_0(n._query,t._query)&&n.converter===t.converter}class j7{constructor(){this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new TN(this,"async_queue_retry"),this.jc=()=>{const e=jT();e&&$e("AsyncQueue","Visibility state changed to "+e.visibilityState),this.xo.bo()};const t=jT();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.jc)}get isShuttingDown(){return this.Lc}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Wc(),this.zc(t)}enterRestrictedMode(t){if(!this.Lc){this.Lc=!0,this.Gc=t||!1;const e=jT();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.jc)}}enqueue(t){if(this.Wc(),this.Lc)return new Promise(()=>{});const e=new Or;return this.zc(()=>this.Lc&&this.Gc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Bc.push(t),this.Hc()))}Hc(){var t=this;return(0,De.Z)(function*(){if(0!==t.Bc.length){try{yield t.Bc[0](),t.Bc.shift(),t.xo.reset()}catch(e){if(!Oh(e))throw e;$e("AsyncQueue","Operation failed with retryable error: "+e)}t.Bc.length>0&&t.xo.Ao(()=>t.Hc())}})()}zc(t){const e=this.$c.then(()=>(this.Kc=!0,t().catch(i=>{throw this.qc=i,this.Kc=!1,Ji("INTERNAL UNHANDLED ERROR: ",function(s){let c=s.message||"";return s.stack&&(c=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),c}(i)),i}).then(i=>(this.Kc=!1,i))));return this.$c=e,e}enqueueAfterDelay(t,e,i){this.Wc(),this.Qc.indexOf(t)>-1&&(e=0);const r=zN.createAndSchedule(this,t,e,i,s=>this.Jc(s));return this.Uc.push(r),r}Wc(){this.qc&&ft()}verifyOperationInProgress(){}Yc(){var t=this;return(0,De.Z)(function*(){let e;do{e=t.$c,yield e}while(e!==t.$c)})()}Xc(t){for(const e of this.Uc)if(e.timerId===t)return!0;return!1}Zc(t){return this.Yc().then(()=>{this.Uc.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.Uc)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Yc()})}ta(t){this.Qc.push(t)}Jc(t){const e=this.Uc.indexOf(t);this.Uc.splice(e,1)}}function O1(n){return function(t,e){if("object"!=typeof t||null===t)return!1;const i=t;for(const r of["next","error","complete"])if(r in i&&"function"==typeof i[r])return!0;return!1}(n)}class $7{constructor(){this._progressObserver={},this._taskCompletionResolver=new Or,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,i){this._progressObserver={next:t,error:e,complete:i}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class Ci extends B0{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=new j7,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||i$(this),this._firestoreClient.terminate()}}function ur(n){return n._firestoreClient||i$(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function i$(n){var t;const e=n._freezeSettings(),i=(s=(null===(t=n._app)||void 0===t?void 0:t.options.appId)||"",new t5(n._databaseId,s,n._persistenceKey,(d=e).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,d.useFetchStreams));var s,d;n._firestoreClient=new x7(n._authCredentials,n._appCheckCredentials,n._queue,i)}function r$(n,t,e){const i=new Or;return n.asyncQueue.enqueue((0,De.Z)(function*(){try{yield j3(n,e),yield $3(n,t),i.resolve()}catch(r){const s=r;if(!("FirebaseError"===(c=s).name?c.code===ve.FAILED_PRECONDITION||c.code===ve.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw s;xp("Error enabling offline persistence. Falling back to persistence disabled: "+s),i.reject(s)}var c})).then(()=>i.promise)}function s$(n){if(n._initialized||n._terminated)throw new Be(ve.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class dd{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Be(ve.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $i(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class tu{constructor(t){this._byteString=t}static fromBase64String(t){try{return new tu(Cr.fromBase64String(t))}catch(e){throw new Be(ve.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new tu(Cr.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class Zp{constructor(t){this._methodName=t}}class KT{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Be(ve.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Be(ve.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return zt(this._lat,t._lat)||zt(this._long,t._long)}}const J7=/^__.*__$/;class e9{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return null!==this.fieldMask?new cd(t,this.data,this.fieldMask,e,this.fieldTransforms):new R_(t,this.data,e,this.fieldTransforms)}}class o${constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new cd(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function a$(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ft()}}class QT{constructor(t,e,i,r,s,c){this.settings=t,this.databaseId=e,this.It=i,this.ignoreUndefinedProperties=r,void 0===s&&this.ea(),this.fieldTransforms=s||[],this.fieldMask=c||[]}get path(){return this.settings.path}get na(){return this.settings.na}sa(t){return new QT(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ia(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.sa({path:i,ra:!1});return r.oa(t),r}ua(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.sa({path:i,ra:!1});return r.ea(),r}ca(t){return this.sa({path:void 0,ra:!0})}aa(t){return eA(t,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}ea(){if(this.path)for(let t=0;t<this.path.length;t++)this.oa(this.path.get(t))}oa(t){if(0===t.length)throw this.aa("Document fields must not be empty");if(a$(this.na)&&J7.test(t))throw this.aa('Document fields cannot begin and end with "__"')}}class t9{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.It=i||F0(t)}fa(t,e,i,r=!1){return new QT({na:t,methodName:e,la:i,path:$i.emptyPath(),ra:!1,ha:r},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Kp(n){const t=n._freezeSettings(),e=F0(n._databaseId);return new t9(n._databaseId,!!t.ignoreUndefinedProperties,e)}function XT(n,t,e,i,r,s={}){const c=n.fa(s.merge||s.mergeFields?2:0,t,e,r);L1("Data must be an object, but it was:",c,i);const d=u$(i,c);let p,_;if(s.merge)p=new ta(c.fieldMask),_=c.fieldTransforms;else if(s.mergeFields){const w=[];for(const I of s.mergeFields){const M=V1(t,I,e);if(!c.contains(M))throw new Be(ve.INVALID_ARGUMENT,`Field '${M}' is specified in your field mask but missing from your input data.`);h$(w,M)||w.push(M)}p=new ta(w),_=c.fieldTransforms.filter(I=>p.covers(I.field))}else p=null,_=c.fieldTransforms;return new e9(new Jr(d),p,_)}class U0 extends Zp{_toFieldTransform(t){if(2!==t.na)throw t.aa(1===t.na?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof U0}}function l$(n,t,e){return new QT({na:3,la:t.settings.la,methodName:n._methodName,ra:e},t.databaseId,t.It,t.ignoreUndefinedProperties)}class P1 extends Zp{_toFieldTransform(t){return new y0(t.path,new k_)}isEqual(t){return t instanceof P1}}class n9 extends Zp{constructor(t,e){super(t),this.da=e}_toFieldTransform(t){const e=l$(this,t,!0),i=this.da.map(s=>Qp(s,e)),r=new Bp(i);return new y0(t.path,r)}isEqual(t){return this===t}}class i9 extends Zp{constructor(t,e){super(t),this.da=e}_toFieldTransform(t){const e=l$(this,t,!0),i=this.da.map(s=>Qp(s,e)),r=new Up(i);return new y0(t.path,r)}isEqual(t){return this===t}}class r9 extends Zp{constructor(t,e){super(t),this._a=e}_toFieldTransform(t){const e=new x_(t.It,JH(t.It,this._a));return new y0(t.path,e)}isEqual(t){return this===t}}function N1(n,t,e,i){const r=n.fa(1,t,e);L1("Data must be an object, but it was:",r,i);const s=[],c=Jr.empty();Pp(i,(p,_)=>{const w=JT(t,p,e);_=(0,F.m9)(_);const I=r.ua(w);if(_ instanceof U0)s.push(w);else{const M=Qp(_,I);null!=M&&(s.push(w),c.set(w,M))}});const d=new ta(s);return new o$(c,d,r.fieldTransforms)}function F1(n,t,e,i,r,s){const c=n.fa(1,t,e),d=[V1(t,i,e)],p=[r];if(s.length%2!=0)throw new Be(ve.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let M=0;M<s.length;M+=2)d.push(V1(t,s[M])),p.push(s[M+1]);const _=[],w=Jr.empty();for(let M=d.length-1;M>=0;--M)if(!h$(_,d[M])){const O=d[M];let N=p[M];N=(0,F.m9)(N);const z=c.ua(O);if(N instanceof U0)_.push(O);else{const ie=Qp(N,z);null!=ie&&(_.push(O),w.set(O,ie))}}const I=new ta(_);return new o$(w,I,c.fieldTransforms)}function c$(n,t,e,i=!1){return Qp(e,n.fa(i?4:3,t))}function Qp(n,t){if(d$(n=(0,F.m9)(n)))return L1("Unsupported field value:",t,n),u$(n,t);if(n instanceof Zp)return function(e,i){if(!a$(i.na))throw i.aa(`${e._methodName}() can only be used with update() and set()`);if(!i.path)throw i.aa(`${e._methodName}() is not currently supported inside arrays`);const r=e._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,t),null;if(void 0===n&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.ra&&4!==t.na)throw t.aa("Nested arrays are not supported");return function(e,i){const r=[];let s=0;for(const c of e){let d=Qp(c,i.ca(s));null==d&&(d={nullValue:"NULL_VALUE"}),r.push(d),s++}return{arrayValue:{values:r}}}(n,t)}return function(e,i){if(null===(e=(0,F.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return JH(i.It,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const r=bi.fromDate(e);return{timestampValue:D0(i.It,r)}}if(e instanceof bi){const r=new bi(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:D0(i.It,r)}}if(e instanceof KT)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof tu)return{bytesValue:bj(i.It,e._byteString)};if(e instanceof gi){const r=i.databaseId,s=e.firestore._databaseId;if(!s.isEqual(r))throw i.aa(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:rN(e.firestore._databaseId||i.databaseId,e._key.path)}}throw i.aa(`Unsupported field value: ${YT(e)}`)}(n,t)}function u$(n,t){const e={};return MH(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Pp(n,(i,r)=>{const s=Qp(r,t.ia(i));null!=s&&(e[i]=s)}),{mapValue:{fields:e}}}function d$(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof bi||n instanceof KT||n instanceof tu||n instanceof gi||n instanceof Zp)}function L1(n,t,e){if(!d$(e)||"object"!=typeof(i=e)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=YT(e);throw t.aa("an object"===i?n+" a custom object":n+" "+i)}var i}function V1(n,t,e){if((t=(0,F.m9)(t))instanceof dd)return t._internalPath;if("string"==typeof t)return JT(n,t);throw eA("Field path arguments must be of type string or ",n,!1,void 0,e)}const s9=new RegExp("[~\\*/\\[\\]]");function JT(n,t,e){if(t.search(s9)>=0)throw eA(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new dd(...t.split("."))._internalPath}catch{throw eA(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function eA(n,t,e,i,r){const s=i&&!i.isEmpty(),c=void 0!==r;let d=`Function ${t}() called with invalid data`;e&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(s||c)&&(p+=" (found",s&&(p+=` in field ${i}`),c&&(p+=` in document ${r}`),p+=")"),new Be(ve.INVALID_ARGUMENT,d+n+p)}function h$(n,t){return n.some(e=>e.isEqual(t))}class H0{constructor(t,e,i,r,s){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new gi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new o9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(tA("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class o9 extends H0{data(){return super.data()}}function tA(n,t){return"string"==typeof t?JT(n,t):t instanceof dd?t._internalPath:t._delegate._internalPath}class Xp{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class hd extends H0{constructor(t,e,i,r,s,c){super(t,e,i,r,c),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new j0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(tA("DocumentSnapshot.get",t));if(null!==i)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}}class j0 extends hd{data(t={}){return super.data(t)}}class zh{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Xp(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new j0(this._firestore,this._userDataWriter,i.key,i,new Xp(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Be(ve.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>({type:"added",doc:new j0(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Xp(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>r||3!==c.type).map(c=>{const d=new j0(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Xp(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let p=-1,_=-1;return 0!==c.type&&(p=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),1!==c.type&&(s=s.add(c.doc),_=s.indexOf(c.doc.key)),{type:a9(c.type),doc:d,oldIndex:p,newIndex:_}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function a9(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ft()}}function f$(n,t){return n instanceof hd&&t instanceof hd?n._firestore===t._firestore&&n._key.isEqual(t._key)&&(null===n._document?null===t._document:n._document.isEqual(t._document))&&n._converter===t._converter:n instanceof zh&&t instanceof zh&&n._firestore===t._firestore&&n$(n.query,t.query)&&n.metadata.isEqual(t.metadata)&&n._snapshot.isEqual(t._snapshot)}function p$(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Be(ve.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $0{}function qh(n,...t){for(const e of t)n=e._apply(n);return n}class l9 extends $0{constructor(t,e,i){super(),this.wa=t,this.ma=e,this.ga=i,this.type="where"}_apply(t){const e=Kp(t.firestore),i=function(r,s,c,d,p,_,w){let I;if(p.isKeyField()){if("array-contains"===_||"array-contains-any"===_)throw new Be(ve.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if("in"===_||"not-in"===_){b$(w,_);const O=[];for(const N of w)O.push(v$(d,r,N));I={arrayValue:{values:O}}}else I=v$(d,r,w)}else"in"!==_&&"not-in"!==_&&"array-contains-any"!==_||b$(w,_),I=c$(c,"where",w,"in"===_||"not-in"===_);const M=es.create(p,_,I);return function(O,N){if(N.dt()){const ie=JP(O);if(null!==ie&&!ie.isEqual(N.field))throw new Be(ve.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ie.toString()}' and '${N.field.toString()}'`);const Me=XP(O);null!==Me&&w$(0,N.field,Me)}const z=function(ie,Me){for(const ze of ie.filters)if(Me.indexOf(ze.op)>=0)return ze.op;return null}(O,function(ie){switch(ie){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(N.op));if(null!==z)throw new Be(ve.INVALID_ARGUMENT,z===N.op?`Invalid query. You cannot use more than one '${N.op.toString()}' filter.`:`Invalid query. You cannot use '${N.op.toString()}' filters with '${z.toString()}' filters.`)}(r,M),M}(t._query,0,e,t.firestore._databaseId,this.wa,this.ma,this.ga);return new gs(t.firestore,t.converter,function(r,s){const c=r.filters.concat([s]);return new ld(r.path,r.collectionGroup,r.explicitOrderBy.slice(),c,r.limit,r.limitType,r.startAt,r.endAt)}(t._query,i))}}class u9 extends $0{constructor(t,e){super(),this.wa=t,this.ya=e,this.type="orderBy"}_apply(t){const e=function(i,r,s){if(null!==i.startAt)throw new Be(ve.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Be(ve.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new T_(r,s);return function(d,p){if(null===XP(d)){const _=JP(d);null!==_&&w$(0,_,p.field)}}(i,c),c}(t._query,this.wa,this.ya);return new gs(t.firestore,t.converter,function(i,r){const s=i.explicitOrderBy.concat([r]);return new ld(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,e))}}class m$ extends $0{constructor(t,e,i){super(),this.type=t,this.pa=e,this.Ia=i}_apply(t){return new gs(t.firestore,t.converter,ET(t._query,this.pa,this.Ia))}}class g$ extends $0{constructor(t,e,i){super(),this.type=t,this.Ta=e,this.Ea=i}_apply(t){const e=y$(t,this.type,this.Ta,this.Ea);return new gs(t.firestore,t.converter,(r=e,new ld((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)));var i,r}}class _$ extends $0{constructor(t,e,i){super(),this.type=t,this.Ta=e,this.Ea=i}_apply(t){const e=y$(t,this.type,this.Ta,this.Ea);return new gs(t.firestore,t.converter,(r=e,new ld((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)));var i,r}}function y$(n,t,e,i){if(e[0]=(0,F.m9)(e[0]),e[0]instanceof H0)return function(r,s,c,d,p){if(!d)throw new Be(ve.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const _=[];for(const w of M_(r))if(w.field.isKeyField())_.push(Lp(s,d.key));else{const I=d.data.field(w.field);if(ZP(I))throw new Be(ve.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+w.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===I){const M=w.field.canonicalString();throw new Be(ve.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${M}' (used as the orderBy) does not exist.`)}_.push(I)}return new Vh(_,p)}(n._query,n.firestore._databaseId,t,e[0]._document,i);{const r=Kp(n.firestore);return function(s,c,d,p,_,w){const I=s.explicitOrderBy;if(_.length>I.length)throw new Be(ve.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const M=[];for(let O=0;O<_.length;O++){const N=_[O];if(I[O].field.isKeyField()){if("string"!=typeof N)throw new Be(ve.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof N}`);if(!eN(s)&&-1!==N.indexOf("/"))throw new Be(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${N}' contains a slash.`);const z=s.path.child(wn.fromString(N));if(!nt.isDocumentKey(z))throw new Be(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${z}' is not because it contains an odd number of segments.`);const ie=new nt(z);M.push(Lp(c,ie))}else{const z=c$(d,p,N);M.push(z)}}return new Vh(M,w)}(n._query,n.firestore._databaseId,r,t,e,i)}}function v$(n,t,e){if("string"==typeof(e=(0,F.m9)(e))){if(""===e)throw new Be(ve.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!eN(t)&&-1!==e.indexOf("/"))throw new Be(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(wn.fromString(e));if(!nt.isDocumentKey(i))throw new Be(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Lp(n,new nt(i))}if(e instanceof gi)return Lp(n,e._key);throw new Be(ve.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${YT(e)}.`)}function b$(n,t){if(!Array.isArray(n)||0===n.length)throw new Be(ve.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(n.length>10)throw new Be(ve.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function w$(n,t,e){if(!e.isEqual(t))throw new Be(ve.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${e.toString()}' instead.`)}const y9={maxAttempts:5};class B1{convertValue(t,e="none"){switch(Fp(t)){case 0:return null;case 1:return t.booleanValue;case 2:return zi(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Np(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw ft()}}convertObject(t,e){const i={};return Pp(t.fields,(r,s)=>{i[r]=this.convertValue(s,e)}),i}convertGeoPoint(t){return new KT(zi(t.latitude),zi(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=xH(t);return null==i?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(u0(t));default:return null}}convertTimestamp(t){const e=Ph(t);return new bi(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=wn.fromString(t);Ut(kj(i));const r=new Nh(i.get(1),i.get(3)),s=new nt(i.popFirst(5));return r.isEqual(e)||Ji(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}function nA(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}class v9 extends B1{constructor(t){super(),this.firestore=t}convertBytes(t){return new tu(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new gi(this.firestore,null,e)}}class C${constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Kp(t)}set(t,e,i){this._verifyNotCommitted();const r=Wh(t,this._firestore),s=nA(r.converter,e,i),c=XT(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,i);return this._mutations.push(c.toMutation(r._key,wi.none())),this}update(t,e,i,...r){this._verifyNotCommitted();const s=Wh(t,this._firestore);let c;return c="string"==typeof(e=(0,F.m9)(e))||e instanceof dd?F1(this._dataReader,"WriteBatch.update",s._key,e,i,r):N1(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(c.toMutation(s._key,wi.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=Wh(t,this._firestore);return this._mutations=this._mutations.concat(new O_(e._key,wi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Be(ve.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Wh(n,t){if((n=(0,F.m9)(n)).firestore!==t)throw new Be(ve.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Jp extends B1{constructor(t){super(),this.firestore=t}convertBytes(t){return new tu(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new gi(this.firestore,null,e)}}function E$(n,t,e){n=_n(n,gi);const i=_n(n.firestore,Ci),r=nA(n.converter,t,e);return Y_(i,[XT(Kp(i),"setDoc",n._key,r,null!==n.converter,e).toMutation(n._key,wi.none())])}function D$(n,t,e,...i){n=_n(n,gi);const r=_n(n.firestore,Ci),s=Kp(r);let c;return c="string"==typeof(t=(0,F.m9)(t))||t instanceof dd?F1(s,"updateDoc",n._key,t,e,i):N1(s,"updateDoc",n._key,t),Y_(r,[c.toMutation(n._key,wi.exists(!0))])}function I$(n,...t){var e,i,r;n=(0,F.m9)(n);let s={includeMetadataChanges:!1},c=0;"object"!=typeof t[c]||O1(t[c])||(s=t[c],c++);const d={includeMetadataChanges:s.includeMetadataChanges};if(O1(t[c])){const I=t[c];t[c]=null===(e=I.next)||void 0===e?void 0:e.bind(I),t[c+1]=null===(i=I.error)||void 0===i?void 0:i.bind(I),t[c+2]=null===(r=I.complete)||void 0===r?void 0:r.bind(I)}let p,_,w;if(n instanceof gi)_=_n(n.firestore,Ci),w=A_(n._key.path),p={next:I=>{t[c]&&t[c](U1(_,n,I))},error:t[c+1],complete:t[c+2]};else{const I=_n(n,gs);_=_n(I.firestore,Ci),w=I._query;const M=new Jp(_);p={next:O=>{t[c]&&t[c](new zh(_,M,I,O))},error:t[c+1],complete:t[c+2]},p$(n._query)}return function(I,M,O,N){const z=new zT(N),ie=new QN(M,z,O);return I.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return qN(yield W_(I),ie)})),()=>{z.Rc(),I.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return YN(yield W_(I),ie)}))}}(ur(_),w,d,p)}function Y_(n,t){return function(e,i){const r=new Or;return e.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return function d7(n,t,e){return n1.apply(this,arguments)}(yield k1(e),i,r)})),r.promise}(ur(n),t)}function U1(n,t,e){const i=e.docs.get(t._key),r=new Jp(n);return new hd(n,r,t._key,i,new Xp(e.hasPendingWrites,e.fromCache),t.converter)}class M9 extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=Kp(t)}get(t){const e=Wh(t,this._firestore),i=new v9(this._firestore);return this._transaction.lookup([e._key]).then(r=>{if(!r||1!==r.length)return ft();const s=r[0];if(s.isFoundDocument())return new H0(this._firestore,i,s.key,s,e.converter);if(s.isNoDocument())return new H0(this._firestore,i,e._key,null,e.converter);throw ft()})}set(t,e,i){const r=Wh(t,this._firestore),s=nA(r.converter,e,i),c=XT(this._dataReader,"Transaction.set",r._key,s,null!==r.converter,i);return this._transaction.set(r._key,c),this}update(t,e,i,...r){const s=Wh(t,this._firestore);let c;return c="string"==typeof(e=(0,F.m9)(e))||e instanceof dd?F1(this._dataReader,"Transaction.update",s._key,e,i,r):N1(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,c),this}delete(t){const e=Wh(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=Wh(t,this._firestore),i=new Jp(this._firestore);return super.get(t).then(r=>new hd(this._firestore,i,e._key,r._document,new Xp(!1,!1),e.converter))}}function H1(n,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Be("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return t}function T$(){if(typeof Uint8Array>"u")throw new Be("unimplemented","Uint8Arrays are not available in this environment.")}function A$(){if(!function J8(){return typeof atob<"u"}())throw new Be("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,t=!0){E_=Vs.SDK_VERSION,(0,Vs._registerComponent)(new nc.wA("firestore",(e,{instanceIdentifier:i,options:r})=>{const s=e.getProvider("app").getImmediate(),c=new Ci(new H8(e.getProvider("auth-internal")),new G8(e.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Be(ve.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Nh(d.options.projectId,p)}(s,i),s);return r=Object.assign({useFetchStreams:t},r),c._setSettings(r),c},"PUBLIC").setMultipleInstances(!0)),(0,Vs.registerVersion)(yH,"3.4.15",n),(0,Vs.registerVersion)(yH,"3.4.15","esm2017")}();class G0{constructor(t){this._delegate=t}static fromBase64String(t){return A$(),new G0(tu.fromBase64String(t))}static fromUint8Array(t){return T$(),new G0(tu.fromUint8Array(t))}toBase64(){return A$(),this._delegate.toBase64()}toUint8Array(){return T$(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function j1(n){return function V9(n,t){if("object"!=typeof n||null===n)return!1;const e=n;for(const i of t)if(i in e&&"function"==typeof e[i])return!0;return!1}(n,["next","error","complete"])}class B9{enableIndexedDbPersistence(t,e){return function z7(n,t){s$(n=_n(n,Ci));const e=ur(n),i=n._freezeSettings(),r=new D1;return r$(e,r,new U3(r,i.cacheSizeBytes,t?.forceOwnership))}(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return function q7(n){s$(n=_n(n,Ci));const t=ur(n),e=n._freezeSettings(),i=new D1;return r$(t,i,new T7(i,e.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function W7(n){if(n._initialized&&!n._terminated)throw new Be(ve.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Or;return n._queue.enqueueAndForgetEvenWhileRestricted((0,De.Z)(function*(){try{yield(e=(0,De.Z)(function*(i){if(!oc.C())return Promise.resolve();const r=i+"main";yield oc.delete(r)}),function(i){return e.apply(this,arguments)})(_N(n._databaseId,n._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var e})),t.promise}(t._delegate)}}class M${constructor(t,e,i){this._delegate=e,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},t instanceof Nh||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&xp("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e,i={}){!function U7(n,t,e,i={}){var r;const s=(n=_n(n,B0))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==t&&xp("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${t}:${e}`,ssl:!1})),i.mockUserToken){let c,d;if("string"==typeof i.mockUserToken)c=i.mockUserToken,d=Rr.MOCK_USER;else{c=(0,F.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new Be(ve.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Rr(p)}n._authCredentials=new U8(new vH(c,d))}}(this._delegate,t,e,i)}enableNetwork(){return function Z7(n){return function R7(n){return n.asyncQueue.enqueue((0,De.Z)(function*(){const t=yield G3(n),e=yield z3(n);return t.setNetworkEnabled(!0),function(i){const r=ot(i);return r._u.delete(0),L0(r)}(e)}))}(ur(n=_n(n,Ci)))}(this._delegate)}disableNetwork(){return function K7(n){return function O7(n){return n.asyncQueue.enqueue((0,De.Z)(function*(){const t=yield G3(n),e=yield z3(n);return t.setNetworkEnabled(!1),(i=(0,De.Z)(function*(r){const s=ot(r);s._u.add(0),yield U_(s),s.gu.set("Offline")}),function(r){return i.apply(this,arguments)})(e);var i}))}(ur(n=_n(n,Ci)))}(this._delegate)}enablePersistence(t){let e=!1,i=!1;return t&&(e=!!t.synchronizeTabs,i=!!t.experimentalForceOwningTab,Z3("synchronizeTabs",e,"experimentalForceOwningTab",i)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Y7(n){return function(t){const e=new Or;return t.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return function m7(n,t){return l1.apply(this,arguments)}(yield k1(t),e)})),e.promise}(ur(n=_n(n,Ci)))}(this._delegate)}onSnapshotsInSync(t){return function A9(n,t){return function F7(n,t){const e=new zT(t);return n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return i=yield W_(n),r=e,ot(i).Ru.add(r),void r.next();var i,r})),()=>{e.Rc(),n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return i=yield W_(n),r=e,void ot(i).Ru.delete(r);var i,r}))}}(ur(n=_n(n,Ci)),O1(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new Be("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new Z_(this,e$(this._delegate,t))}catch(e){throw qs(e,"collection()","Firestore.collection()")}}doc(t){try{return new tl(this,ZT(this._delegate,t))}catch(e){throw qs(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new Ws(this,function H7(n,t){if(n=_n(n,B0),R1("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Be(ve.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new gs(n,null,(e=t,new ld(wn.emptyPath(),e)));var e}(this._delegate,t))}catch(e){throw qs(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function k9(n,t,e){n=_n(n,Ci);const i=Object.assign(Object.assign({},y9),e);return function(r){if(r.maxAttempts<1)throw new Be(ve.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function L7(n,t,e){const i=new Or;return n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){const r=yield(s=n,qT(s).then(c=>c.datastore));var s;new k7(n.asyncQueue,r,e,t,i).run()})),i.promise}(ur(n),r=>t(new M9(n,r)),i)}(this._delegate,e=>t(new k$(this,e)))}batch(){return ur(this._delegate),new x$(new C$(this._delegate,t=>Y_(this._delegate,t)))}loadBundle(t){return function Q7(n,t){const e=ur(n=_n(n,Ci)),i=new $7;return function V7(n,t,e,i){const r=function(s,c){let d;return d="string"==typeof s?(new TextEncoder).encode(s):s,p=function(p,_){if(p instanceof Uint8Array)return H3(p,_);if(p instanceof ArrayBuffer)return H3(new Uint8Array(p),_);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new A7(p,c);var p}(e,F0(t));n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){!function S7(n,t,e){const i=ot(n);var r;(r=(0,De.Z)(function*(s,c,d){try{const p=yield c.getMetadata();if(yield function(M,O){const N=ot(M),z=Pr(O.createTime);return N.persistence.runTransaction("hasNewerBundle","readonly",ie=>N.Ns.getBundleMetadata(ie,O.id)).then(ie=>!!ie&&ie.createTime.compareTo(z)>=0)}(s.localStore,p))return yield c.close(),d._completeWith({taskState:"Success",documentsLoaded:(M=p).totalDocuments,bytesLoaded:M.totalBytes,totalDocuments:M.totalDocuments,totalBytes:M.totalBytes}),Promise.resolve(new Set);d._updateProgress(k3(p));const _=new s7(p,s.localStore,c.It);let w=yield c.wc();for(;w;){const M=yield _.Ou(w);M&&d._updateProgress(M),w=yield c.wc()}const I=yield _.complete();return yield ud(s,I.Bu,void 0),yield function(M,O){const N=ot(M);return N.persistence.runTransaction("Save bundle","readwrite",z=>N.Ns.saveBundleMetadata(z,O))}(s.localStore,p),d._completeWith(I.progress),Promise.resolve(I.$u)}catch(p){return xp("SyncEngine",`Loading bundle failed with ${p}`),d._failWith(p),Promise.resolve(new Set)}var M}),function(s,c,d){return r.apply(this,arguments)})(i,t,e).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield k1(n),r,i)}))}(e,n._databaseId,t,i),i}(this._delegate,t)}namedQuery(t){return function X7(n,t){return function B7(n,t){return n.asyncQueue.enqueue((0,De.Z)(function*(){return function(e,i){const r=ot(e);return r.persistence.runTransaction("Get named query","readonly",s=>r.Ns.getNamedQuery(s,i))}(yield WT(n),t)}))}(ur(n=_n(n,Ci)),t).then(e=>e?new gs(n,null,e.query):null)}(this._delegate,t).then(e=>e?new Ws(this,e):null)}}class iA extends B1{constructor(t){super(),this.firestore=t}convertBytes(t){return new G0(new tu(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return tl.forKey(e,this.firestore,null)}}class k${constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new iA(t)}get(t){const e=tm(t);return this._delegate.get(e).then(i=>new z0(this._firestore,new hd(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,e.converter)))}set(t,e,i){const r=tm(t);return i?(H1("Transaction.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const s=tm(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...r),this}delete(t){const e=tm(t);return this._delegate.delete(e),this}}class x${constructor(t){this._delegate=t}set(t,e,i){const r=tm(t);return i?(H1("WriteBatch.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const s=tm(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...r),this}delete(t){const e=tm(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class em{constructor(t,e,i){this._firestore=t,this._userDataWriter=e,this._delegate=i}fromFirestore(t,e){const i=new j0(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new q0(this._firestore,i),e??{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const i=em.INSTANCES;let r=i.get(t);r||(r=new WeakMap,i.set(t,r));let s=r.get(e);return s||(s=new em(t,new iA(t),e),r.set(e,s)),s}}em.INSTANCES=new WeakMap;class tl{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new iA(t)}static forPath(t,e,i){if(t.length%2!=0)throw new Be("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new tl(e,new gi(e._delegate,i,new nt(t)))}static forKey(t,e,i){return new tl(e,new gi(e._delegate,i,t))}get id(){return this._delegate.id}get parent(){return new Z_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new Z_(this.firestore,e$(this._delegate,t))}catch(e){throw qs(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,F.m9)(t))instanceof gi&&t$(this._delegate,t)}set(t,e){e=H1("DocumentReference.set",e);try{return e?E$(this._delegate,t,e):E$(this._delegate,t)}catch(i){throw qs(i,"setDoc()","DocumentReference.set()")}}update(t,e,...i){try{return 1===arguments.length?D$(this._delegate,t):D$(this._delegate,t,e,...i)}catch(r){throw qs(r,"updateDoc()","DocumentReference.update()")}}delete(){return function S9(n){return Y_(_n(n.firestore,Ci),[new O_(n._key,wi.none())])}(this._delegate)}onSnapshot(...t){const e=R$(t),i=O$(t,r=>new z0(this.firestore,new hd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return I$(this._delegate,e,i)}get(t){let e;return e="cache"===t?.source?function w9(n){n=_n(n,gi);const t=_n(n.firestore,Ci),e=ur(t),i=new Jp(t);return function P7(n,t){const e=new Or;return n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return(i=(0,De.Z)(function*(r,s,c){try{const d=yield function(p,_){const w=ot(p);return w.persistence.runTransaction("read document","readonly",I=>w.localDocuments.getDocument(I,_))}(r,s);d.isFoundDocument()?c.resolve(d):d.isNoDocument()?c.resolve(null):c.reject(new Be(ve.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const p=$_(d,`Failed to get document '${s} from cache`);c.reject(p)}}),function(r,s,c){return i.apply(this,arguments)})(yield WT(n),t,e);var i})),e.promise}(e,n._key).then(r=>new hd(t,i,n._key,r,new Xp(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===t?.source?function C9(n){n=_n(n,gi);const t=_n(n.firestore,Ci);return q3(ur(t),n._key,{source:"server"}).then(e=>U1(t,n,e))}(this._delegate):function b9(n){n=_n(n,gi);const t=_n(n.firestore,Ci);return q3(ur(t),n._key).then(e=>U1(t,n,e))}(this._delegate),e.then(i=>new z0(this.firestore,new hd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(t){return new tl(this.firestore,this._delegate.withConverter(t?em.getInstance(this.firestore,t):null))}}function qs(n,t,e){return n.message=n.message.replace(t,e),n}function R$(n){for(const t of n)if("object"==typeof t&&!j1(t))return t;return{}}function O$(n,t){var e,i;let r;return r=j1(n[0])?n[0]:j1(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(t(s))},error:null===(e=r.error)||void 0===e?void 0:e.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class z0{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new tl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return f$(this._delegate,t._delegate)}}class q0 extends z0{data(t){const e=this._delegate.data(t);return function V8(n,t){n||ft()}(void 0!==e),e}}class Ws{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new iA(t)}where(t,e,i){try{return new Ws(this.firestore,qh(this._delegate,function c9(n,t,e){const i=t,r=tA("where",n);return new l9(r,i,e)}(t,e,i)))}catch(r){throw qs(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new Ws(this.firestore,qh(this._delegate,function d9(n,t="asc"){const e=t,i=tA("orderBy",n);return new u9(i,e)}(t,e)))}catch(i){throw qs(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new Ws(this.firestore,qh(this._delegate,function h9(n){return X3("limit",n),new m$("limit",n,"F")}(t)))}catch(e){throw qs(e,"limit()","Query.limit()")}}limitToLast(t){try{return new Ws(this.firestore,qh(this._delegate,function f9(n){return X3("limitToLast",n),new m$("limitToLast",n,"L")}(t)))}catch(e){throw qs(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new Ws(this.firestore,qh(this._delegate,function p9(...n){return new g$("startAt",n,!0)}(...t)))}catch(e){throw qs(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new Ws(this.firestore,qh(this._delegate,function m9(...n){return new g$("startAfter",n,!1)}(...t)))}catch(e){throw qs(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new Ws(this.firestore,qh(this._delegate,function g9(...n){return new _$("endBefore",n,!1)}(...t)))}catch(e){throw qs(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new Ws(this.firestore,qh(this._delegate,function _9(...n){return new _$("endAt",n,!0)}(...t)))}catch(e){throw qs(e,"endAt()","Query.endAt()")}}isEqual(t){return n$(this._delegate,t._delegate)}get(t){let e;return e="cache"===t?.source?function D9(n){n=_n(n,gs);const t=_n(n.firestore,Ci),e=ur(t),i=new Jp(t);return function N7(n,t){const e=new Or;return n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return(i=(0,De.Z)(function*(r,s,c){try{const d=yield BT(r,s,!0),p=new O3(s,d.Hi),_=p.ju(d.documents),w=p.applyChanges(_,!1);c.resolve(w.snapshot)}catch(d){const p=$_(d,`Failed to execute query '${s} against cache`);c.reject(p)}}),function(r,s,c){return i.apply(this,arguments)})(yield WT(n),t,e);var i})),e.promise}(e,n._query).then(r=>new zh(t,i,n,r))}(this._delegate):"server"===t?.source?function I9(n){n=_n(n,gs);const t=_n(n.firestore,Ci),e=ur(t),i=new Jp(t);return W3(e,n._query,{source:"server"}).then(r=>new zh(t,i,n,r))}(this._delegate):function E9(n){n=_n(n,gs);const t=_n(n.firestore,Ci),e=ur(t),i=new Jp(t);return p$(n._query),W3(e,n._query).then(r=>new zh(t,i,n,r))}(this._delegate),e.then(i=>new $1(this.firestore,new zh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...t){const e=R$(t),i=O$(t,r=>new $1(this.firestore,new zh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return I$(this._delegate,e,i)}withConverter(t){return new Ws(this.firestore,this._delegate.withConverter(t?em.getInstance(this.firestore,t):null))}}class H9{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new q0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class $1{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new Ws(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new q0(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new H9(this._firestore,e))}forEach(t,e){this._delegate.forEach(i=>{t.call(e,new q0(this._firestore,i))})}isEqual(t){return f$(this._delegate,t._delegate)}}class Z_ extends Ws{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new tl(this.firestore,t):null}doc(t){try{return new tl(this.firestore,void 0===t?ZT(this._delegate):ZT(this._delegate,t))}catch(e){throw qs(e,"doc()","CollectionReference.doc()")}}add(t){return function T9(n,t){const e=_n(n.firestore,Ci),i=ZT(n),r=nA(n.converter,t);return Y_(e,[XT(Kp(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,wi.exists(!1))]).then(()=>i)}(this._delegate,t).then(e=>new tl(this.firestore,e))}isEqual(t){return t$(this._delegate,t._delegate)}withConverter(t){return new Z_(this.firestore,this._delegate.withConverter(t?em.getInstance(this.firestore,t):null))}}function tm(n){return _n(n,gi)}class G1{constructor(...t){this._delegate=new dd(...t)}static documentId(){return new G1($i.keyField().canonicalString())}isEqual(t){return(t=(0,F.m9)(t))instanceof dd&&this._delegate._internalPath.isEqual(t._internalPath)}}class nm{constructor(t){this._delegate=t}static serverTimestamp(){const t=function R9(){return new P1("serverTimestamp")}();return t._methodName="FieldValue.serverTimestamp",new nm(t)}static delete(){const t=function x9(){return new U0("deleteField")}();return t._methodName="FieldValue.delete",new nm(t)}static arrayUnion(...t){const e=function O9(...n){return new n9("arrayUnion",n)}(...t);return e._methodName="FieldValue.arrayUnion",new nm(e)}static arrayRemove(...t){const e=function P9(...n){return new i9("arrayRemove",n)}(...t);return e._methodName="FieldValue.arrayRemove",new nm(e)}static increment(t){const e=function N9(n){return new r9("increment",n)}(t);return e._methodName="FieldValue.increment",new nm(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const j9={Firestore:M$,GeoPoint:KT,Timestamp:bi,Blob:G0,Transaction:k$,WriteBatch:x$,DocumentReference:tl,DocumentSnapshot:z0,Query:Ws,QueryDocumentSnapshot:q0,QuerySnapshot:$1,CollectionReference:Z_,FieldPath:G1,FieldValue:nm,setLogLevel:function U9(n){!function L8(n){xh.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function P$(n,t){return function z9(n,t=Nc.z){return new Zi.y(e=>{let i;return null!=t?t.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},e)}):i=n.onSnapshot({includeMetadataChanges:!0},e),()=>{i?.()}})}(n,t)}function z1(n,t){return P$(n,t).pipe((0,ct.U)(e=>({payload:e,type:"query"})))}function rA(n,t){return z1(n,t).pipe(yr(void 0),QO(),(0,ct.U)(([e,i])=>{const r=i.payload.docChanges(),s=r.map(c=>({type:c.type,payload:c}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((c,d)=>{const p=r.find(w=>w.doc.ref.isEqual(c.ref)),_=e?.payload.docs.find(w=>w.ref.isEqual(c.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(c.metadata)||!p&&_&&JSON.stringify(_.metadata)===JSON.stringify(c.metadata)||s.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:c}})}),s}))}function N$(n,t,e){return rA(n,e).pipe(Ip((i,r)=>function W9(n,t,e){return t.forEach(i=>{e.indexOf(i.type)>-1&&(n=function Y9(n,t){switch(t.type){case"added":if(!n[t.newIndex]||!n[t.newIndex].doc.ref.isEqual(t.doc.ref))return q1(n,t.newIndex,0,t);break;case"modified":if(null==n[t.oldIndex]||n[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const e=n.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}return q1(n,t.newIndex,1,t)}break;case"removed":if(n[t.oldIndex]&&n[t.oldIndex].doc.ref.isEqual(t.doc.ref))return q1(n,t.oldIndex,1)}return n}(n,i))}),n}(i,r.map(s=>s.payload),t),[]),Zd(),(0,ct.U)(i=>i.map(r=>({type:r.type,payload:r}))))}function q1(n,t,e,...i){const r=n.slice();return r.splice(t,e,...i),r}function F$(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function G9(n){(function $9(n,t){n.INTERNAL.registerComponent(new nc.wA("firestore-compat",e=>{const i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(i,r)},"PUBLIC").setServiceProps(Object.assign({},j9)))})(n,(t,e)=>new M$(t,e,new B9)),n.registerVersion("@firebase/firestore-compat","0.1.24")}(VO.Z);class L${constructor(t,e,i){this.ref=t,this.query=e,this.afs=i}stateChanges(t){let e=rA(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,ct.U)(i=>i.filter(r=>t.indexOf(r.type)>-1)))),e.pipe(yr(void 0),QO(),yi(([i,r])=>r.length>0||!i),(0,ct.U)(([i,r])=>r),Tn.iC)}auditTrail(t){return this.stateChanges(t).pipe(Ip((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=F$(t);return N$(this.query,e,this.afs.schedulers.outsideAngular).pipe(Tn.iC)}valueChanges(t={}){return z1(this.query,this.afs.schedulers.outsideAngular).pipe((0,ct.U)(e=>e.payload.docs.map(i=>t.idField?Object.assign(Object.assign({},i.data()),{[t.idField]:i.id}):i.data())),Tn.iC)}get(t){return(0,mn.D)(this.query.get(t)).pipe(Tn.iC)}add(t){return this.ref.add(t)}doc(t){return new V$(this.ref.doc(t),this.afs)}}class V${constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const i=this.ref.collection(t),{ref:r,query:s}=H$(i,e);return new L$(r,s,this.afs)}snapshotChanges(){return function q9(n,t){return P$(n,t).pipe(yr(void 0),QO(),(0,ct.U)(([e,i])=>i.exists?e?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Tn.iC)}valueChanges(t={}){return this.snapshotChanges().pipe((0,ct.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,mn.D)(this.ref.get(t)).pipe(Tn.iC)}}class Z9{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?rA(this.query,this.afs.schedulers.outsideAngular).pipe((0,ct.U)(e=>e.filter(i=>t.indexOf(i.type)>-1)),yi(e=>e.length>0),Tn.iC):rA(this.query,this.afs.schedulers.outsideAngular).pipe(Tn.iC)}auditTrail(t){return this.stateChanges(t).pipe(Ip((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=F$(t);return N$(this.query,e,this.afs.schedulers.outsideAngular).pipe(Tn.iC)}valueChanges(t={}){return z1(this.query,this.afs.schedulers.outsideAngular).pipe((0,ct.U)(i=>i.payload.docs.map(r=>t.idField?Object.assign({[t.idField]:r.id},r.data()):r.data())),Tn.iC)}get(t){return(0,mn.D)(this.query.get(t)).pipe(Tn.iC)}}const B$=new l.OlP("angularfire2.enableFirestorePersistence"),U$=new l.OlP("angularfire2.firestore.persistenceSettings"),K9=new l.OlP("angularfire2.firestore.settings"),Q9=new l.OlP("angularfire2.firestore.use-emulator");function H$(n,t=(e=>e)){return{query:t(n),ref:n}}let W1=(()=>{class n{constructor(e,i,r,s,c,d,p,_,w,I,M,O,N,z,ie,Me,ze){this.schedulers=p;const Xe=(0,wr.on)(e,d,i),Qe=w;I&&LO(Xe,d,M,N,z,ie,O,Me),[this.firestore,this.persistenceEnabled$]=(0,wr.cc)(`${Xe.name}.firestore`,"AngularFirestore",Xe.name,()=>{const Dt=d.runOutsideAngular(()=>Xe.firestore());if(s&&Dt.settings(s),Qe&&Dt.useEmulator(...Qe),r&&!ga(c)){const At=()=>{try{return(0,mn.D)(Dt.enablePersistence(_||void 0).then(()=>!0,()=>!1))}catch(on){return typeof console<"u"&&console.warn(on),et(!1)}};return[Dt,d.runOutsideAngular(At)]}return[Dt,et(!1)]},[s,Qe,r])}collection(e,i){let r;r="string"==typeof e?this.firestore.collection(e):e;const{ref:s,query:c}=H$(r,i),d=this.schedulers.ngZone.run(()=>s);return new L$(d,c,this)}collectionGroup(e,i){const r=i||(c=>c),s=this.firestore.collectionGroup(e);return new Z9(r(s),this)}doc(e){let i;i="string"==typeof e?this.firestore.doc(e):e;const r=this.schedulers.ngZone.run(()=>i);return new V$(r,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(wr.Dh),l.LFG(wr.xv,8),l.LFG(B$,8),l.LFG(K9,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(Tn.HU),l.LFG(U$,8),l.LFG(Q9,8),l.LFG(Lw,8),l.LFG(xO,8),l.LFG(RO,8),l.LFG(OO,8),l.LFG(PO,8),l.LFG(NO,8),l.LFG(FO,8),l.LFG(Fw,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),X9=(()=>{class n{constructor(){NS.Z.registerVersion("angularfire",Tn.q4.full,"fst-compat")}static enablePersistence(e){return{ngModule:n,providers:[{provide:B$,useValue:!0},{provide:U$,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[W1]}),n})();const j$="@firebase/database";let Y1="";function G$(n){Y1=n}class tQ{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,F.Pz)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,F.cI)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class nQ{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,F.r3)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const z$=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new tQ(t)}}catch{}return new nQ},im=z$("localStorage"),Z1=z$("sessionStorage"),K_=new ic.Yd("@firebase/database"),q$=function(){let n=1;return function(){return n++}}(),W$=function(n){const t=(0,F.dS)(n),e=new F.gQ;e.update(t);const i=e.digest();return F.US.encodeByteArray(i)},W0=function(...n){let t="";for(let e=0;e<n.length;e++){const i=n[e];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?t+=W0.apply(null,i):t+="object"==typeof i?(0,F.Pz)(i):i,t+=" "}return t};let rm=null,Y$=!0;const Z$=function(n,t){(0,F.hu)(!t||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(K_.logLevel=ic.in.VERBOSE,rm=K_.log.bind(K_),t&&Z1.set("logging_enabled",!0)):"function"==typeof n?rm=n:(rm=null,Z1.remove("logging_enabled"))},Lr=function(...n){if(!0===Y$&&(Y$=!1,null===rm&&!0===Z1.get("logging_enabled")&&Z$(!0)),rm){const t=W0.apply(null,n);rm(t)}},Y0=function(n){return function(...t){Lr(n,...t)}},K1=function(...n){const t="FIREBASE INTERNAL ERROR: "+W0(...n);K_.error(t)},nu=function(...n){const t=`FIREBASE FATAL ERROR: ${W0(...n)}`;throw K_.error(t),new Error(t)},_s=function(...n){const t="FIREBASE WARNING: "+W0(...n);K_.warn(t)},sA=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},fd="[MIN_NAME]",iu="[MAX_NAME]",sm=function(n,t){if(n===t)return 0;if(n===fd||t===iu)return-1;if(t===fd||n===iu)return 1;{const e=oA(n),i=oA(t);return null!==e?null!==i?e-i==0?n.length-t.length:e-i:-1:null!==i?1:n<t?-1:1}},sQ=function(n,t){return n===t?0:n<t?-1:1},Z0=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+(0,F.Pz)(t))},Q1=function(n){if("object"!=typeof n||null===n)return(0,F.Pz)(n);const t=[];for(const i in n)t.push(i);t.sort();let e="{";for(let i=0;i<t.length;i++)0!==i&&(e+=","),e+=(0,F.Pz)(t[i]),e+=":",e+=Q1(n[t[i]]);return e+="}",e},K$=function(n,t){const e=n.length;if(e<=t)return[n];const i=[];for(let r=0;r<e;r+=t)i.push(n.substring(r,r+t>e?e:r+t));return i};function Vr(n,t){for(const e in n)n.hasOwnProperty(e)&&t(e,n[e])}const Q$=function(n){(0,F.hu)(!sA(n),"Invalid JSON number");const i=1023;let r,s,c,d,p;0===n?(s=0,c=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=d+i,c=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(s=0,c=Math.round(n/Math.pow(2,-1074))));const _=[];for(p=52;p;p-=1)_.push(c%2?1:0),c=Math.floor(c/2);for(p=11;p;p-=1)_.push(s%2?1:0),s=Math.floor(s/2);_.push(r?1:0),_.reverse();const w=_.join("");let I="";for(p=0;p<64;p+=8){let M=parseInt(w.substr(p,8),2).toString(16);1===M.length&&(M="0"+M),I+=M}return I.toLowerCase()},cQ=new RegExp("^-?(0*)\\d{1,10}$"),X$=-2147483648,X1=2147483647,oA=function(n){if(cQ.test(n)){const t=Number(n);if(t>=X$&&t<=X1)return t}return null},Q_=function(n){try{n()}catch(t){setTimeout(()=>{throw _s("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},K0=function(n,t){const e=setTimeout(n,t);return"number"==typeof e&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(e):"object"==typeof e&&e.unref&&e.unref(),e};class dQ{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=e?.getImmediate({optional:!0}),this.appCheck||e?.get().then(i=>this.appCheck=i)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){_s(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class hQ{constructor(t,e,i){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&"auth/token-not-initialized"===e.code?(Lr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',_s(t)}}let Q0=(()=>{class n{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const iG=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,oG="websocket",aG="long_polling";class eF{constructor(t,e,i,r,s=!1,c="",d=!1){this.secure=e,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=c,this.includeNamespaceInQueryParams=d,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=im.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&im.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function lG(n,t,e){let i;if((0,F.hu)("string"==typeof t,"typeof type must == string"),(0,F.hu)("object"==typeof e,"typeof params must == object"),t===oG)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(t!==aG)throw new Error("Unknown connection type: "+t);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function fQ(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(e.ns=n.namespace);const r=[];return Vr(e,(s,c)=>{r.push(s+"="+c)}),i+r.join("&")}class pQ{constructor(){this.counters_={}}incrementCounter(t,e=1){(0,F.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,F.p$)(this.counters_)}}const tF={},nF={};function iF(n){const t=n.toString();return tF[t]||(tF[t]=new pQ),tF[t]}class gQ{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&Q_(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Yh{constructor(t,e,i,r,s,c,d){this.connId=t,this.repoInfo=e,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=c,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Y0(t),this.stats_=iF(e),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),lG(e,aG,p))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new gQ(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,F.Yr)()||"complete"===document.readyState)n();else{let t=!1;const e=function(){document.body?t||(t=!0,n()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new rF((...s)=>{const[c,d,p,_,w]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=d,this.password=p;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[c,d]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(c,d)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&iG.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Yh.forceAllow_=!0}static forceDisallow(){Yh.forceDisallow_=!0}static isAvailable(){return!((0,F.Yr)()||!Yh.forceAllow_&&(Yh.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,F.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const i=(0,F.h$)(e),r=K$(i,1840);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,F.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=t,i.pw=e,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,F.Pz)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class rF{constructor(t,e,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,F.Yr)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=q$(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=rF.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(d){Lr("frame writing exception"),d.stack&&Lr(d.stack),Lr(d)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||Lr("No IE domain setting required")}catch{const i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const c=this.pendingSegs.shift();i=i+"&seg"+r+"="+c.seg+"&ts"+r+"="+c.ts+"&d"+r+"="+c.d,r++}return e+=i,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,i){this.pendingSegs.push({seg:t,ts:e,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const i=()=>{this.outstandingRequests.delete(e),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(r),i()})}addTag(t,e){(0,F.Yr)()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=()=>{Lr("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}let lA=null;typeof MozWebSocket<"u"?lA=MozWebSocket:typeof WebSocket<"u"&&(lA=WebSocket);let X_=(()=>{class n{constructor(e,i,r,s,c,d,p){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Y0(this.connId),this.stats_=iF(i),this.connURL=n.connectionURL_(i,d,p,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(e,i,r,s,c){const d={v:"5"};return!(0,F.Yr)()&&typeof location<"u"&&location.hostname&&iG.test(location.hostname)&&(d.r="f"),i&&(d.s=i),r&&(d.ls=r),s&&(d.ac=s),c&&(d.p=c),lG(e,oG,d)}open(e,i){this.onDisconnect=i,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,im.set("previous_websocket_failure",!0);try{let r;if((0,F.Yr)()){r={headers:{"User-Agent":`Firebase/5/${Y1}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,d=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;d&&(r.proxy={origin:d})}this.mySock=new lA(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&null!==lA&&!n.forceDisallow_}static previouslyFailed(){return im.isInMemoryStorage||!0===im.get("previous_websocket_failure")}markConnectionHealthy(){im.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=(0,F.cI)(i);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,F.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const i=Number(e);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const i=e.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const i=(0,F.Pz)(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=K$(i,16384);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),mG=(()=>{class n{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Yh,X_]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const i=X_&&X_.isAvailable();let r=i&&!X_.previouslyFailed();if(e.webSocketOnly&&(i||_s("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[X_];else{const s=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&s.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class CG{constructor(t,e,i,r,s,c,d,p,_,w){this.id=t,this.repoInfo_=e,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=c,this.onReady_=d,this.onDisconnect_=p,this.onKill_=_,this.lastSessionId=w,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Y0("c:"+this.id+":"),this.transportManager_=new mG(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,i)},Math.floor(0));const r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=K0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=Z0("t",t),i=Z0("d",t);if("c"===e)this.onSecondaryControl_(i);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=Z0("t",t),i=Z0("d",t);"c"===e?this.onControl_(i):"d"===e&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=Z0("t",t);if("d"in t){const i=t.d;if("h"===e)this.onHandshake_(i);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(i):"r"===e?this.onReset_(i):"e"===e?K1("Server Error: "+i):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):K1("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,i=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==i&&_s("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,i),K0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):K0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(im.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class EG{put(t,e,i,r){}merge(t,e,i,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,i){}onDisconnectMerge(t,e,i){}onDisconnectCancel(t,e){}reportStats(t){}}class DG{constructor(t){this.allowedEvents_=t,this.listeners_={},(0,F.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const i=[...this.listeners_[t]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,e)}}on(t,e,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:i});const r=this.getInitialEvent(t);r&&e.apply(i,r)}off(t,e,i){this.validateEventType_(t);const r=this.listeners_[t]||[];for(let s=0;s<r.length;s++)if(r[s].callback===e&&(!i||i===r[s].context))return void r.splice(s,1)}validateEventType_(t){(0,F.hu)(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class cA extends DG{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,F.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new cA}getInitialEvent(t){return(0,F.hu)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class On{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function An(){return new On("")}function nn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Zh(n){return n.pieces_.length-n.pieceNum_}function Xn(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new On(n.pieces_,t)}function oF(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function X0(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function TG(n){if(n.pieceNum_>=n.pieces_.length)return null;const t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new On(t,0)}function Ei(n,t){const e=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)e.push(n.pieces_[i]);if(t instanceof On)for(let i=t.pieceNum_;i<t.pieces_.length;i++)e.push(t.pieces_[i]);else{const i=t.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&e.push(i[r])}return new On(e,0)}function rn(n){return n.pieceNum_>=n.pieces_.length}function Ys(n,t){const e=nn(n),i=nn(t);if(null===e)return t;if(e===i)return Ys(Xn(n),Xn(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function VQ(n,t){const e=X0(n,0),i=X0(t,0);for(let r=0;r<e.length&&r<i.length;r++){const s=sm(e[r],i[r]);if(0!==s)return s}return e.length===i.length?0:e.length<i.length?-1:1}function aF(n,t){if(Zh(n)!==Zh(t))return!1;for(let e=n.pieceNum_,i=t.pieceNum_;e<=n.pieces_.length;e++,i++)if(n.pieces_[e]!==t.pieces_[i])return!1;return!0}function nl(n,t){let e=n.pieceNum_,i=t.pieceNum_;if(Zh(n)>Zh(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[i])return!1;++e,++i}return!0}class BQ{constructor(t,e){this.errorPrefix_=e,this.parts_=X0(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,F.ug)(this.parts_[i]);AG(this)}}function AG(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+om(n))}function om(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class lF extends DG{constructor(){let t,e;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new lF}getInitialEvent(t){return(0,F.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]}}const J0=1e3;let dA,am=(()=>{class n extends EG{constructor(e,i,r,s,c,d,p,_){if(super(),this.repoInfo_=e,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=c,this.authTokenProvider_=d,this.appCheckTokenProvider_=p,this.authOverride_=_,this.id=n.nextPersistentConnectionId_++,this.log_=Y0("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=J0,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,_&&!(0,F.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");lF.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&cA.getInstance().on("online",this.onOnline_,this)}sendRequest(e,i,r){const s=++this.requestNumber_,c={r:s,a:e,b:i};this.log_((0,F.Pz)(c)),(0,F.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const i=new F.BH,r={p:e._path.toString(),q:e._queryObject};return this.outstandingGets_.push({action:"g",request:r,onComplete:d=>{const p=d.d;"ok"===d.s?i.resolve(p):i.reject(p)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(e,i,r,s){this.initConnection_();const c=e._queryIdentifier,d=e._path.toString();this.log_("Listen called for "+d+" "+c),this.listens.has(d)||this.listens.set(d,new Map),(0,F.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,F.hu)(!this.listens.get(d).has(c),"listen() called twice for same path/queryId.");const p={onComplete:s,hashFn:i,query:e,tag:r};this.listens.get(d).set(c,p),this.connected_&&this.sendListen_(p)}sendGet_(e){const i=this.outstandingGets_[e];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(e){const i=e.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);const c={p:r};e.tag&&(c.q=i._queryObject,c.t=e.tag),c.h=e.hashFn(),this.sendRequest("q",c,p=>{const _=p.d,w=p.s;n.warnOnListenWarnings_(_,i),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",p),"ok"!==w&&this.removeListen_(r,s),e.onComplete&&e.onComplete(w,_))})}static warnOnListenWarnings_(e,i){if(e&&"object"==typeof e&&(0,F.r3)(e,"w")){const r=(0,F.DV)(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',c=i._path.toString();_s(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,F.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,i=(0,F.w9)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{const c=s.s,d=s.d||"error";this.authToken_===e&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const i=e.s,r=e.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(e,i){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),(0,F.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,i)}sendUnlisten_(e,i,r,s){this.log_("Unlisten on "+e+" for "+i);const c={p:e};s&&(c.q=r,c.t=s),this.sendRequest("n",c)}onDisconnectPut(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:i,onComplete:r})}onDisconnectMerge(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:i,onComplete:r})}onDisconnectCancel(e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(e,i,r,s){const c={p:i,d:r};this.log_("onDisconnect "+e,c),this.sendRequest(e,c,d=>{s&&setTimeout(()=>{s(d.s,d.d)},Math.floor(0))})}put(e,i,r,s){this.putInternal("p",e,i,r,s)}merge(e,i,r,s){this.putInternal("m",e,i,r,s)}putInternal(e,i,r,s,c){this.initConnection_();const d={p:i,d:r};void 0!==c&&(d.h=c),this.outstandingPuts_.push({action:e,request:d,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(e){const i=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(i,r,c=>{this.log_(i+" response",c),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(c.s,c.d)})}reportStats(e){if(this.connected_){const i={c:e};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,F.Pz)(e));const i=e.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,i){this.log_("handleServerMessage",e,i),"d"===e?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===e?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===e?this.onListenRevoked_(i.p,i.q):"ac"===e?this.onAuthRevoked_(i.s,i.d):"apc"===e?this.onAppCheckRevoked_(i.s,i.d):"sd"===e?this.onSecurityDebugPacket_(i):K1("Unrecognized action received from server: "+(0,F.Pz)(e)+"\nAre you using the latest client?")}onReady_(e,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,F.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=J0,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=J0,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=J0),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-e);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,De.Z)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const i=e.onDataMessage_.bind(e),r=e.onReady_.bind(e),s=e.onRealtimeDisconnect_.bind(e),c=e.id+":"+n.nextConnectionId_++,d=e.lastSessionId;let p=!1,_=null;const w=function(){_?_.close():(p=!0,s())};e.realtime_={close:w,sendRequest:function(O){(0,F.hu)(_,"sendRequest call when we're not connected not allowed."),_.sendRequest(O)}};const M=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[O,N]=yield Promise.all([e.authTokenProvider_.getToken(M),e.appCheckTokenProvider_.getToken(M)]);p?Lr("getToken() completed but was canceled"):(Lr("getToken() completed. Creating connection."),e.authToken_=O&&O.accessToken,e.appCheckToken_=N&&N.token,_=new CG(c,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,i,r,s,z=>{_s(z+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},d))}catch(O){e.log_("Failed to get token: "+O),p||(e.repoInfo_.nodeAdmin&&_s(O),w())}}})()}interrupt(e){Lr("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Lr("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,F.xb)(this.interruptReasons_)&&(this.reconnectDelay_=J0,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const i=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const i=this.outstandingPuts_[e];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,i){let r;r=i?i.map(c=>Q1(c)).join("$"):"default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,i){const r=new On(e).toString();let s;if(this.listens.has(r)){const c=this.listens.get(r);s=c.get(i),c.delete(i),0===c.size&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,i){Lr("Auth token revoked: "+e+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,i){Lr("App check token revoked: "+e+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const i of e.values())this.sendListen_(i);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let i="js";(0,F.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+i+"."+Y1.replace(/\./g,"-")]=1,(0,F.uI)()?e["framework.cordova"]=1:(0,F.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=cA.getInstance().currentlyOnline();return(0,F.xb)(this.interruptReasons_)&&e}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class dn{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new dn(t,e)}}class uA{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const i=new dn(fd,t),r=new dn(fd,e);return 0!==this.compare(i,r)}minPost(){return dn.MIN}}class xG extends uA{static get __EMPTY_NODE(){return dA}static set __EMPTY_NODE(t){dA=t}compare(t,e){return sm(t.name,e.name)}isDefinedOn(t){throw(0,F.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return dn.MIN}maxPost(){return new dn(iu,dA)}makePost(t,e){return(0,F.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new dn(t,dA)}toString(){return".key"}}const ru=new xG;class hA{constructor(t,e,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let c=1;for(;!t.isEmpty();)if(c=e?i(t.key,e):1,r&&(c*=-1),c<0)t=this.isReverse_?t.left:t.right;else{if(0===c){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let uF,ac=(()=>{class n{constructor(e,i,r,s,c){this.key=e,this.value=i,this.color=r??n.RED,this.left=s??vo.EMPTY_NODE,this.right=c??vo.EMPTY_NODE}copy(e,i,r,s,c){return new n(e??this.key,i??this.value,r??this.color,s??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,r){let s=this;const c=r(e,s.key);return s=c<0?s.copy(null,null,null,s.left.insert(e,i,r),null):0===c?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(e,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return vo.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,i){let r,s;if(r=this,i(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(e,r.key)){if(r.right.isEmpty())return vo.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class vo{constructor(t,e=vo.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new vo(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,ac.BLACK,null,null))}remove(t){return new vo(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,ac.BLACK,null,null))}get(t){let e,i=this.root_;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e)return i.value;e<0?i=i.left:e>0&&(i=i.right)}return null}getPredecessorKey(t){let e,i=this.root_,r=null;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}e<0?i=i.left:e>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new hA(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new hA(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new hA(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new hA(this.root_,null,this.comparator_,!0,t)}}function WQ(n,t){return sm(n.name,t.name)}function cF(n,t){return sm(n,t)}vo.EMPTY_NODE=new class qQ{copy(t,e,i,r,s){return this}insert(t,e,i){return new ac(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const RG=function(n){return"number"==typeof n?"number:"+Q$(n):"string:"+n},OG=function(n){if(n.isLeafNode()){const t=n.val();(0,F.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,F.r3)(t,".sv"),"Priority must be a string or number.")}else(0,F.hu)(n===uF||n.isEmpty(),"priority of unexpected type.");(0,F.hu)(n===uF||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let PG,NG,FG,J_=(()=>{class n{constructor(e,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=i,this.lazyHash_=null,(0,F.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),OG(this.priorityNode_)}static set __childrenNodeConstructor(e){PG=e}static get __childrenNodeConstructor(){return PG}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new n(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return rn(e)?this:".priority"===nn(e)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,i){return null}updateImmediateChild(e,i){return".priority"===e?this.updatePriority(i):i.isEmpty()&&".priority"!==e?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,i).updatePriority(this.priorityNode_)}updateChild(e,i){const r=nn(e);return null===r?i:i.isEmpty()&&".priority"!==r?this:((0,F.hu)(".priority"!==r||1===Zh(e),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Xn(e),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,i){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+RG(this.priorityNode_.val())+":");const i=typeof this.value_;e+=i+":",e+="number"===i?Q$(this.value_):this.value_,this.lazyHash_=W$(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof n.__childrenNodeConstructor?-1:((0,F.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const i=typeof e.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),c=n.VALUE_TYPE_ORDER.indexOf(r);return(0,F.hu)(s>=0,"Unknown leaf type: "+i),(0,F.hu)(c>=0,"Unknown leaf type: "+r),s===c?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:c-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const i=e;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const ri=new class QQ extends uA{compare(t,e){const i=t.node.getPriority(),r=e.node.getPriority(),s=i.compareTo(r);return 0===s?sm(t.name,e.name):s}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return dn.MIN}maxPost(){return new dn(iu,new J_("[PRIORITY-POST]",FG))}makePost(t,e){const i=NG(t);return new dn(e,new J_("[PRIORITY-POST]",i))}toString(){return".priority"}},XQ=Math.log(2);class JQ{constructor(t){this.count=parseInt(Math.log(t+1)/XQ,10),this.current_=this.count-1;const r=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&r}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const fA=function(n,t,e,i){n.sort(t);const r=function(p,_){const w=_-p;let I,M;if(0===w)return null;if(1===w)return I=n[p],M=e?e(I):I,new ac(M,I.node,ac.BLACK,null,null);{const O=parseInt(w/2,10)+p,N=r(p,O),z=r(O+1,_);return I=n[O],M=e?e(I):I,new ac(M,I.node,ac.BLACK,N,z)}},d=function(p){let _=null,w=null,I=n.length;const M=function(N,z){const ie=I-N,Me=I;I-=N;const ze=r(ie+1,Me),Xe=n[ie],Qe=e?e(Xe):Xe;O(new ac(Qe,Xe.node,z,null,ze))},O=function(N){_?(_.left=N,_=N):(w=N,_=N)};for(let N=0;N<p.count;++N){const z=p.nextBitIsOne(),ie=Math.pow(2,p.count-(N+1));z?M(ie,ac.BLACK):(M(ie,ac.BLACK),M(ie,ac.RED))}return w}(new JQ(n.length));return new vo(i||t,d)};let dF;const ey={};class pd{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return(0,F.hu)(ey&&ri,"ChildrenNode.ts has not been loaded"),dF=dF||new pd({".priority":ey},{".priority":ri}),dF}get(t){const e=(0,F.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof vo?e:null}hasIndex(t){return(0,F.r3)(this.indexSet_,t.toString())}addIndex(t,e){(0,F.hu)(t!==ru,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=e.getIterator(dn.Wrap);let d,c=s.getNext();for(;c;)r=r||t.isDefinedOn(c.node),i.push(c),c=s.getNext();d=r?fA(i,t.getCompare()):ey;const p=t.toString(),_=Object.assign({},this.indexSet_);_[p]=t;const w=Object.assign({},this.indexes_);return w[p]=d,new pd(w,_)}addToIndexes(t,e){const i=(0,F.UI)(this.indexes_,(r,s)=>{const c=(0,F.DV)(this.indexSet_,s);if((0,F.hu)(c,"Missing index implementation for "+s),r===ey){if(c.isDefinedOn(t.node)){const d=[],p=e.getIterator(dn.Wrap);let _=p.getNext();for(;_;)_.name!==t.name&&d.push(_),_=p.getNext();return d.push(t),fA(d,c.getCompare())}return ey}{const d=e.get(t.name);let p=r;return d&&(p=p.remove(new dn(t.name,d))),p.insert(t,t.node)}});return new pd(i,this.indexSet_)}removeFromIndexes(t,e){const i=(0,F.UI)(this.indexes_,r=>{if(r===ey)return r;{const s=e.get(t.name);return s?r.remove(new dn(t.name,s)):r}});return new pd(i,this.indexSet_)}}let eC,Qt=(()=>{class n{constructor(e,i,r){this.children_=e,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&OG(this.priorityNode_),this.children_.isEmpty()&&(0,F.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return eC||(eC=new n(new vo(cF),null,pd.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||eC}updatePriority(e){return this.children_.isEmpty()?this:new n(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const i=this.children_.get(e);return null===i?eC:i}}getChild(e){const i=nn(e);return null===i?this:this.getImmediateChild(i).getChild(Xn(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,i){if((0,F.hu)(i,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(i);{const r=new dn(e,i);let s,c;i.isEmpty()?(s=this.children_.remove(e),c=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,i),c=this.indexMap_.addToIndexes(r,this.children_));const d=s.isEmpty()?eC:this.priorityNode_;return new n(s,d,c)}}updateChild(e,i){const r=nn(e);if(null===r)return i;{(0,F.hu)(".priority"!==nn(e)||1===Zh(e),".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Xn(e),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const i={};let r=0,s=0,c=!0;if(this.forEachChild(ri,(d,p)=>{i[d]=p.val(e),r++,c&&n.INTEGER_REGEXP_.test(d)?s=Math.max(s,Number(d)):c=!1}),!e&&c&&s<2*r){const d=[];for(const p in i)d[p]=i[p];return d}return e&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+RG(this.getPriority().val())+":"),this.forEachChild(ri,(i,r)=>{const s=r.hash();""!==s&&(e+=":"+i+":"+s)}),this.lazyHash_=""===e?"":W$(e)}return this.lazyHash_}getPredecessorChildName(e,i,r){const s=this.resolveIndex_(r);if(s){const c=s.getPredecessorKey(new dn(e,i));return c?c.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(e){const i=this.getFirstChildName(e);return i?new dn(i,this.children_.get(i)):null}getLastChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(e){const i=this.getLastChildName(e);return i?new dn(i,this.children_.get(i)):null}forEachChild(e,i){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,dn.Wrap);let c=s.peek();for(;null!=c&&i.compare(c,e)<0;)s.getNext(),c=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,dn.Wrap);let c=s.peek();for(;null!=c&&i.compare(c,e)>0;)s.getNext(),c=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===tC?-1:0}withIndex(e){if(e===ru||this.indexMap_.hasIndex(e))return this;{const i=this.indexMap_.addIndex(e,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(e){return e===ru||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const i=e;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(ri),s=i.getIterator(ri);let c=r.getNext(),d=s.getNext();for(;c&&d;){if(c.name!==d.name||!c.node.equals(d.node))return!1;c=r.getNext(),d=s.getNext()}return null===c&&null===d}return!1}return!1}}resolveIndex_(e){return e===ru?null:this.indexMap_.get(e.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const tC=new class eX extends Qt{constructor(){super(new vo(cF),Qt.EMPTY_NODE,pd.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return Qt.EMPTY_NODE}isEmpty(){return!1}};function Mi(n,t=null){if(null===n)return Qt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),(0,F.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new J_(n,Mi(t));if(n instanceof Array){let e=Qt.EMPTY_NODE;return Vr(n,(i,r)=>{if((0,F.r3)(n,i)&&"."!==i.substring(0,1)){const s=Mi(r);(s.isLeafNode()||!s.isEmpty())&&(e=e.updateImmediateChild(i,s))}}),e.updatePriority(Mi(t))}{const e=[];let i=!1;if(Vr(n,(c,d)=>{if("."!==c.substring(0,1)){const p=Mi(d);p.isEmpty()||(i=i||!p.getPriority().isEmpty(),e.push(new dn(c,p)))}}),0===e.length)return Qt.EMPTY_NODE;const s=fA(e,WQ,c=>c.name,cF);if(i){const c=fA(e,ri.getCompare());return new Qt(s,Mi(t),new pd({".priority":c},{".priority":ri}))}return new Qt(s,Mi(t),pd.Default)}}Object.defineProperties(dn,{MIN:{value:new dn(fd,Qt.EMPTY_NODE)},MAX:{value:new dn(iu,tC)}}),xG.__EMPTY_NODE=Qt.EMPTY_NODE,J_.__childrenNodeConstructor=Qt,function YQ(n){uF=n}(tC),function KQ(n){FG=n}(tC),function ZQ(n){NG=n}(Mi);class hF extends uA{constructor(t){super(),this.indexPath_=t,(0,F.hu)(!rn(t)&&".priority"!==nn(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const i=this.extractChild(t.node),r=this.extractChild(e.node),s=i.compareTo(r);return 0===s?sm(t.name,e.name):s}makePost(t,e){const i=Mi(t),r=Qt.EMPTY_NODE.updateChild(this.indexPath_,i);return new dn(e,r)}maxPost(){const t=Qt.EMPTY_NODE.updateChild(this.indexPath_,tC);return new dn(iu,t)}toString(){return X0(this.indexPath_,0).join("/")}}const fF=new class nX extends uA{compare(t,e){const i=t.node.compareTo(e.node);return 0===i?sm(t.name,e.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return dn.MIN}maxPost(){return dn.MAX}makePost(t,e){const i=Mi(t);return new dn(e,i)}toString(){return".value"}},ty="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",iX=function(){let n=0;const t=[];return function(e){const i=e===n;let r;n=e;const s=new Array(8);for(r=7;r>=0;r--)s[r]=ty.charAt(e%64),e=Math.floor(e/64);(0,F.hu)(0===e,"Cannot push at time == 0");let c=s.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)c+=ty.charAt(t[r]);return(0,F.hu)(20===c.length,"nextPushId: Length should be 20."),c}}(),BG=function(n){if(n===""+X1)return"-";const t=oA(n);if(null!=t)return""+(t+1);const e=new Array(n.length);for(let c=0;c<e.length;c++)e[c]=n.charAt(c);if(e.length<786)return e.push("-"),e.join("");let i=e.length-1;for(;i>=0&&"z"===e[i];)i--;if(-1===i)return iu;const s=ty.charAt(ty.indexOf(e[i])+1);return e[i]=s,e.slice(0,i+1).join("")},UG=function(n){if(n===""+X$)return fd;const t=oA(n);if(null!=t)return""+(t-1);const e=new Array(n.length);for(let i=0;i<e.length;i++)e[i]=n.charAt(i);return"-"===e[e.length-1]?1===e.length?""+X1:(delete e[e.length-1],e.join("")):(e[e.length-1]=ty.charAt(ty.indexOf(e[e.length-1])-1),e.join("")+"z".repeat(786-e.length))};function HG(n){return{type:"value",snapshotNode:n}}function ny(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function nC(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function iC(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}class mF{constructor(t){this.index_=t}updateChild(t,e,i,r,s,c){(0,F.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=t.getImmediateChild(e);return d.getChild(r).equals(i.getChild(r))&&d.isEmpty()===i.isEmpty()||(null!=c&&(i.isEmpty()?t.hasChild(e)?c.trackChildChange(nC(e,d)):(0,F.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?c.trackChildChange(ny(e,i)):c.trackChildChange(iC(e,i,d))),t.isLeafNode()&&i.isEmpty())?t:t.updateImmediateChild(e,i).withIndex(this.index_)}updateFullNode(t,e,i){return null!=i&&(t.isLeafNode()||t.forEachChild(ri,(r,s)=>{e.hasChild(r)||i.trackChildChange(nC(r,s))}),e.isLeafNode()||e.forEachChild(ri,(r,s)=>{if(t.hasChild(r)){const c=t.getImmediateChild(r);c.equals(s)||i.trackChildChange(iC(r,s,c))}else i.trackChildChange(ny(r,s))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?Qt.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class rC{constructor(t){this.indexedFilter_=new mF(t.getIndex()),this.index_=t.getIndex(),this.startPost_=rC.getStartPost_(t),this.endPost_=rC.getEndPost_(t)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0}updateChild(t,e,i,r,s,c){return this.matches(new dn(e,i))||(i=Qt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,i,r,s,c)}updateFullNode(t,e,i){e.isLeafNode()&&(e=Qt.EMPTY_NODE);let r=e.withIndex(this.index_);r=r.updatePriority(Qt.EMPTY_NODE);const s=this;return e.forEachChild(ri,(c,d)=>{s.matches(new dn(c,d))||(r=r.updateImmediateChild(c,Qt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}class sX{constructor(t){this.rangedFilter_=new rC(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}updateChild(t,e,i,r,s,c){return this.rangedFilter_.matches(new dn(e,i))||(i=Qt.EMPTY_NODE),t.getImmediateChild(e).equals(i)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,i,r,s,c):this.fullLimitUpdateChild_(t,e,i,s,c)}updateFullNode(t,e,i){let r;if(e.isLeafNode()||e.isEmpty())r=Qt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let s;r=Qt.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;s.hasNext()&&c<this.limit_;){const d=s.getNext();let p;if(p=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),d)<=0:this.index_.compare(d,this.rangedFilter_.getEndPost())<=0,!p)break;r=r.updateImmediateChild(d.name,d.node),c++}}else{let s,c,d,p;if(r=e.withIndex(this.index_),r=r.updatePriority(Qt.EMPTY_NODE),this.reverse_){p=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();const I=this.index_.getCompare();d=(M,O)=>I(O,M)}else p=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),d=this.index_.getCompare();let _=0,w=!1;for(;p.hasNext();){const I=p.getNext();!w&&d(s,I)<=0&&(w=!0),w&&_<this.limit_&&d(I,c)<=0?_++:r=r.updateImmediateChild(I.name,Qt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,i,r,s){let c;if(this.reverse_){const I=this.index_.getCompare();c=(M,O)=>I(O,M)}else c=this.index_.getCompare();const d=t;(0,F.hu)(d.numChildren()===this.limit_,"");const p=new dn(e,i),_=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),w=this.rangedFilter_.matches(p);if(d.hasChild(e)){const I=d.getImmediateChild(e);let M=r.getChildAfterChild(this.index_,_,this.reverse_);for(;null!=M&&(M.name===e||d.hasChild(M.name));)M=r.getChildAfterChild(this.index_,M,this.reverse_);const O=null==M?1:c(M,p);if(w&&!i.isEmpty()&&O>=0)return s?.trackChildChange(iC(e,i,I)),d.updateImmediateChild(e,i);{s?.trackChildChange(nC(e,I));const z=d.updateImmediateChild(e,Qt.EMPTY_NODE);return null!=M&&this.rangedFilter_.matches(M)?(s?.trackChildChange(ny(M.name,M.node)),z.updateImmediateChild(M.name,M.node)):z}}return i.isEmpty()?t:w&&c(_,p)>=0?(null!=s&&(s.trackChildChange(nC(_.name,_.node)),s.trackChildChange(ny(e,i))),d.updateImmediateChild(e,i).updateImmediateChild(_.name,Qt.EMPTY_NODE)):t}}class pA{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ri}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,F.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,F.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:fd}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,F.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,F.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:iu}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,F.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ri}copy(){const t=new pA;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function gF(n,t,e){const i=n.copy();return i.startSet_=!0,void 0===t&&(t=null),i.indexStartValue_=t,null!=e?(i.startNameSet_=!0,i.indexStartName_=e):(i.startNameSet_=!1,i.indexStartName_=""),i}function _F(n,t,e){const i=n.copy();return i.endSet_=!0,void 0===t&&(t=null),i.indexEndValue_=t,void 0!==e?(i.endNameSet_=!0,i.indexEndName_=e):(i.endNameSet_=!1,i.indexEndName_=""),i}function mA(n,t){const e=n.copy();return e.index_=t,e}function jG(n){const t={};if(n.isDefault())return t;let e;return n.index_===ri?e="$priority":n.index_===fF?e="$value":n.index_===ru?e="$key":((0,F.hu)(n.index_ instanceof hF,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=(0,F.Pz)(e),n.startSet_&&(t.startAt=(0,F.Pz)(n.indexStartValue_),n.startNameSet_&&(t.startAt+=","+(0,F.Pz)(n.indexStartName_))),n.endSet_&&(t.endAt=(0,F.Pz)(n.indexEndValue_),n.endNameSet_&&(t.endAt+=","+(0,F.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function $G(n){const t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_)),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_)),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;""===e&&(e=n.isViewFromLeft()?"l":"r"),t.vf=e}return n.index_!==ri&&(t.i=n.index_.toString()),t}class gA extends EG{constructor(t,e,i,r){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=Y0("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,F.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,i,r){const s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);const c=gA.getListenId_(t,i),d={};this.listens_[c]=d;const p=jG(t._queryParams);this.restRequest_(s+".json",p,(_,w)=>{let I=w;if(404===_&&(I=null,_=null),null===_&&this.onDataUpdate_(s,I,!1,i),(0,F.DV)(this.listens_,c)===d){let M;M=_?401===_?"permission_denied":"rest_error:"+_:"ok",r(M,null)}})}unlisten(t,e){const i=gA.getListenId_(t,e);delete this.listens_[i]}get(t){const e=jG(t._queryParams),i=t._path.toString(),r=new F.BH;return this.restRequest_(i+".json",e,(s,c)=>{let d=c;404===s&&(d=null,s=null),null===s?(this.onDataUpdate_(i,d,!1,null),r.resolve(d)):r.reject(new Error(d))}),r.promise}refreshAuthToken(t){}restRequest_(t,e={},i){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(e.auth=r.accessToken),s&&s.token&&(e.ac=s.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,F.xO)(e);this.log_("Sending REST request for "+c);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(i&&4===d.readyState){this.log_("REST Response for "+c+" received. status:",d.status,"response:",d.responseText);let p=null;if(d.status>=200&&d.status<300){try{p=(0,F.cI)(d.responseText)}catch{_s("Failed to parse JSON response for "+c+": "+d.responseText)}i(null,p)}else 401!==d.status&&404!==d.status&&_s("Got unsuccessful REST response for "+c+" Status: "+d.status),i(d.status);i=null}},d.open("GET",c,!0),d.send()})}}class dX{constructor(){this.rootNode_=Qt.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function _A(){return{value:null,children:new Map}}function iy(n,t,e){if(rn(t))n.value=e,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(t,e);else{const i=nn(t);n.children.has(i)||n.children.set(i,_A()),iy(n.children.get(i),t=Xn(t),e)}}function yF(n,t){if(rn(t))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const e=n.value;return n.value=null,e.forEachChild(ri,(i,r)=>{iy(n,new On(i),r)}),yF(n,t)}}if(n.children.size>0){const e=nn(t);return t=Xn(t),n.children.has(e)&&yF(n.children.get(e),t)&&n.children.delete(e),0===n.children.size}return!0}function vF(n,t,e){null!==n.value?e(t,n.value):function hX(n,t){n.children.forEach((e,i)=>{t(i,e)})}(n,(i,r)=>{vF(r,new On(t.toString()+"/"+i),e)})}class fX{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&Vr(this.last_,(i,r)=>{e[i]=e[i]-r}),this.last_=t,e}}class gX{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new fX(t);const i=1e4+2e4*Math.random();K0(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const t=this.statsListener_.get(),e={};let i=!1;Vr(t,(r,s)=>{s>0&&(0,F.r3)(this.statsToReport_,r)&&(e[r]=s,i=!0)}),i&&this.server_.reportStats(e),K0(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var il=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(il||(il={})),il))();function CF(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class yA{constructor(t,e,i){this.path=t,this.affectedTree=e,this.revert=i,this.type=il.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(rn(this.path)){if(null!=this.affectedTree.value)return(0,F.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new On(t));return new yA(An(),e,this.revert)}}return(0,F.hu)(nn(this.path)===t,"operationForChild called for unrelated child."),new yA(Xn(this.path),this.affectedTree,this.revert)}}class sC{constructor(t,e){this.source=t,this.path=e,this.type=il.LISTEN_COMPLETE}operationForChild(t){return rn(this.path)?new sC(this.source,An()):new sC(this.source,Xn(this.path))}}class lm{constructor(t,e,i){this.source=t,this.path=e,this.snap=i,this.type=il.OVERWRITE}operationForChild(t){return rn(this.path)?new lm(this.source,An(),this.snap.getImmediateChild(t)):new lm(this.source,Xn(this.path),this.snap)}}class ry{constructor(t,e,i){this.source=t,this.path=e,this.children=i,this.type=il.MERGE}operationForChild(t){if(rn(this.path)){const e=this.children.subtree(new On(t));return e.isEmpty()?null:e.value?new lm(this.source,An(),e.value):new ry(this.source,An(),e)}return(0,F.hu)(nn(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new ry(this.source,Xn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Kh{constructor(t,e,i){this.node_=t,this.fullyInitialized_=e,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(rn(t))return this.isFullyInitialized()&&!this.filtered_;const e=nn(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class _X{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function oC(n,t,e,i,r,s){const c=i.filter(d=>d.type===e);c.sort((d,p)=>function bX(n,t,e){if(null==t.childName||null==e.childName)throw(0,F.g5)("Should only compare child_ events.");const i=new dn(t.childName,t.snapshotNode),r=new dn(e.childName,e.snapshotNode);return n.index_.compare(i,r)}(n,d,p)),c.forEach(d=>{const p=function vX(n,t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}(n,d,s);r.forEach(_=>{_.respondsTo(d.type)&&t.push(_.createEvent(p,n.query_))})})}function vA(n,t){return{eventCache:n,serverCache:t}}function aC(n,t,e,i){return vA(new Kh(t,e,i),n.serverCache)}function zG(n,t,e,i){return vA(n.eventCache,new Kh(t,e,i))}function bA(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function cm(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let EF;class si{constructor(t,e=(()=>(EF||(EF=new vo(sQ)),EF))()){this.value=t,this.children=e}static fromObject(t){let e=new si(null);return Vr(t,(i,r)=>{e=e.set(new On(i),r)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:An(),value:this.value};if(rn(t))return null;{const i=nn(t),r=this.children.get(i);if(null!==r){const s=r.findRootMostMatchingPathAndValue(Xn(t),e);return null!=s?{path:Ei(new On(i),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(rn(t))return this;{const e=nn(t),i=this.children.get(e);return null!==i?i.subtree(Xn(t)):new si(null)}}set(t,e){if(rn(t))return new si(e,this.children);{const i=nn(t),s=(this.children.get(i)||new si(null)).set(Xn(t),e),c=this.children.insert(i,s);return new si(this.value,c)}}remove(t){if(rn(t))return this.children.isEmpty()?new si(null):new si(null,this.children);{const e=nn(t),i=this.children.get(e);if(i){const r=i.remove(Xn(t));let s;return s=r.isEmpty()?this.children.remove(e):this.children.insert(e,r),null===this.value&&s.isEmpty()?new si(null):new si(this.value,s)}return this}}get(t){if(rn(t))return this.value;{const e=nn(t),i=this.children.get(e);return i?i.get(Xn(t)):null}}setTree(t,e){if(rn(t))return e;{const i=nn(t),s=(this.children.get(i)||new si(null)).setTree(Xn(t),e);let c;return c=s.isEmpty()?this.children.remove(i):this.children.insert(i,s),new si(this.value,c)}}fold(t){return this.fold_(An(),t)}fold_(t,e){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(Ei(t,r),e)}),e(t,this.value,i)}findOnPath(t,e){return this.findOnPath_(t,An(),e)}findOnPath_(t,e,i){const r=!!this.value&&i(e,this.value);if(r)return r;if(rn(t))return null;{const s=nn(t),c=this.children.get(s);return c?c.findOnPath_(Xn(t),Ei(e,s),i):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,An(),e)}foreachOnPath_(t,e,i){if(rn(t))return this;{this.value&&i(e,this.value);const r=nn(t),s=this.children.get(r);return s?s.foreachOnPath_(Xn(t),Ei(e,r),i):new si(null)}}foreach(t){this.foreach_(An(),t)}foreach_(t,e){this.children.inorderTraversal((i,r)=>{r.foreach_(Ei(t,i),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,i)=>{i.value&&t(e,i.value)})}}class lc{constructor(t){this.writeTree_=t}static empty(){return new lc(new si(null))}}function lC(n,t,e){if(rn(t))return new lc(new si(e));{const i=n.writeTree_.findRootMostValueAndPath(t);if(null!=i){const r=i.path;let s=i.value;const c=Ys(r,t);return s=s.updateChild(c,e),new lc(n.writeTree_.set(r,s))}{const r=new si(e),s=n.writeTree_.setTree(t,r);return new lc(s)}}}function DF(n,t,e){let i=n;return Vr(e,(r,s)=>{i=lC(i,Ei(t,r),s)}),i}function qG(n,t){if(rn(t))return lc.empty();{const e=n.writeTree_.setTree(t,new si(null));return new lc(e)}}function IF(n,t){return null!=um(n,t)}function um(n,t){const e=n.writeTree_.findRootMostValueAndPath(t);return null!=e?n.writeTree_.get(e.path).getChild(Ys(e.path,t)):null}function WG(n){const t=[],e=n.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(ri,(i,r)=>{t.push(new dn(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&t.push(new dn(i,r.value))}),t}function Qh(n,t){if(rn(t))return n;{const e=um(n,t);return new lc(null!=e?new si(e):n.writeTree_.subtree(t))}}function SF(n){return n.writeTree_.isEmpty()}function sy(n,t){return YG(An(),n.writeTree_,t)}function YG(n,t,e){if(null!=t.value)return e.updateChild(n,t.value);{let i=null;return t.children.inorderTraversal((r,s)=>{".priority"===r?((0,F.hu)(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):e=YG(Ei(n,r),s,e)}),!e.getChild(n).isEmpty()&&null!==i&&(e=e.updateChild(Ei(n,".priority"),i)),e}}function wA(n,t){return JG(t,n)}function SX(n,t){if(n.snap)return nl(n.path,t);for(const e in n.children)if(n.children.hasOwnProperty(e)&&nl(Ei(n.path,e),t))return!0;return!1}function AX(n){return n.visible}function ZG(n,t,e){let i=lc.empty();for(let r=0;r<n.length;++r){const s=n[r];if(t(s)){const c=s.path;let d;if(s.snap)nl(e,c)?(d=Ys(e,c),i=lC(i,d,s.snap)):nl(c,e)&&(d=Ys(c,e),i=lC(i,An(),s.snap.getChild(d)));else{if(!s.children)throw(0,F.g5)("WriteRecord should have .snap or .children");if(nl(e,c))d=Ys(e,c),i=DF(i,d,s.children);else if(nl(c,e))if(d=Ys(c,e),rn(d))i=DF(i,An(),s.children);else{const p=(0,F.DV)(s.children,nn(d));if(p){const _=p.getChild(Xn(d));i=lC(i,An(),_)}}}}}return i}function KG(n,t,e,i,r){if(i||r){const s=Qh(n.visibleWrites,t);return!r&&SF(s)?e:r||null!=e||IF(s,An())?sy(ZG(n.allWrites,function(_){return(_.visible||r)&&(!i||!~i.indexOf(_.writeId))&&(nl(_.path,t)||nl(t,_.path))},t),e||Qt.EMPTY_NODE):null}{const s=um(n.visibleWrites,t);if(null!=s)return s;{const c=Qh(n.visibleWrites,t);return SF(c)?e:null!=e||IF(c,An())?sy(c,e||Qt.EMPTY_NODE):null}}}function CA(n,t,e,i){return KG(n.writeTree,n.treePath,t,e,i)}function TF(n,t){return function MX(n,t,e){let i=Qt.EMPTY_NODE;const r=um(n.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(ri,(s,c)=>{i=i.updateImmediateChild(s,c)}),i;if(e){const s=Qh(n.visibleWrites,t);return e.forEachChild(ri,(c,d)=>{const p=sy(Qh(s,new On(c)),d);i=i.updateImmediateChild(c,p)}),WG(s).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}return WG(Qh(n.visibleWrites,t)).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}(n.writeTree,n.treePath,t)}function QG(n,t,e,i){return function kX(n,t,e,i,r){(0,F.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=Ei(t,e);if(IF(n.visibleWrites,s))return null;{const c=Qh(n.visibleWrites,s);return SF(c)?r.getChild(e):sy(c,r.getChild(e))}}(n.writeTree,n.treePath,t,e,i)}function EA(n,t){return function RX(n,t){return um(n.visibleWrites,t)}(n.writeTree,Ei(n.treePath,t))}function AF(n,t,e){return function xX(n,t,e,i){const r=Ei(t,e),s=um(n.visibleWrites,r);return null!=s?s:i.isCompleteForChild(e)?sy(Qh(n.visibleWrites,r),i.getNode().getImmediateChild(e)):null}(n.writeTree,n.treePath,t,e)}function XG(n,t){return JG(Ei(n.treePath,t),n.writeTree)}function JG(n,t){return{treePath:n,writeTree:t}}class FX{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,i=t.childName;(0,F.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,F.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if("child_added"===e&&"child_removed"===s)this.changeMap.set(i,iC(i,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===s)this.changeMap.delete(i);else if("child_removed"===e&&"child_changed"===s)this.changeMap.set(i,nC(i,r.oldSnap));else if("child_changed"===e&&"child_added"===s)this.changeMap.set(i,ny(i,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==s)throw(0,F.g5)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(i,iC(i,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}}const ez=new class LX{getCompleteChild(t){return null}getChildAfterChild(t,e,i){return null}};class MF{constructor(t,e,i=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=i}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const i=null!=this.optCompleteServerCache_?new Kh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return AF(this.writes_,t,i)}}getChildAfterChild(t,e,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:cm(this.viewCache_),s=function NX(n,t,e,i,r,s){return function OX(n,t,e,i,r,s,c){let d;const p=Qh(n.visibleWrites,t),_=um(p,An());if(null!=_)d=_;else{if(null==e)return[];d=sy(p,e)}if(d=d.withIndex(c),d.isEmpty()||d.isLeafNode())return[];{const w=[],I=c.getCompare(),M=s?d.getReverseIteratorFrom(i,c):d.getIteratorFrom(i,c);let O=M.getNext();for(;O&&w.length<r;)0!==I(O,i)&&w.push(O),O=M.getNext();return w}}(n.writeTree,n.treePath,t,e,i,r,s)}(this.writes_,r,e,1,i,t);return 0===s.length?null:s[0]}}function tz(n,t,e,i,r,s){const c=t.eventCache;if(null!=EA(i,e))return t;{let d,p;if(rn(e))if((0,F.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const _=cm(t),I=TF(i,_ instanceof Qt?_:Qt.EMPTY_NODE);d=n.filter.updateFullNode(t.eventCache.getNode(),I,s)}else{const _=CA(i,cm(t));d=n.filter.updateFullNode(t.eventCache.getNode(),_,s)}else{const _=nn(e);if(".priority"===_){(0,F.hu)(1===Zh(e),"Can't have a priority with additional path components");const w=c.getNode();p=t.serverCache.getNode();const I=QG(i,e,w,p);d=null!=I?n.filter.updatePriority(w,I):c.getNode()}else{const w=Xn(e);let I;if(c.isCompleteForChild(_)){p=t.serverCache.getNode();const M=QG(i,e,c.getNode(),p);I=null!=M?c.getNode().getImmediateChild(_).updateChild(w,M):c.getNode().getImmediateChild(_)}else I=AF(i,_,t.serverCache);d=null!=I?n.filter.updateChild(c.getNode(),_,I,w,r,s):c.getNode()}}return aC(t,d,c.isFullyInitialized()||rn(e),n.filter.filtersNodes())}}function DA(n,t,e,i,r,s,c,d){const p=t.serverCache;let _;const w=c?n.filter:n.filter.getIndexedFilter();if(rn(e))_=w.updateFullNode(p.getNode(),i,null);else if(w.filtersNodes()&&!p.isFiltered()){const O=p.getNode().updateChild(e,i);_=w.updateFullNode(p.getNode(),O,null)}else{const O=nn(e);if(!p.isCompleteForPath(e)&&Zh(e)>1)return t;const N=Xn(e),ie=p.getNode().getImmediateChild(O).updateChild(N,i);_=".priority"===O?w.updatePriority(p.getNode(),ie):w.updateChild(p.getNode(),O,ie,N,ez,null)}const I=zG(t,_,p.isFullyInitialized()||rn(e),w.filtersNodes());return tz(n,I,e,r,new MF(r,I,s),d)}function kF(n,t,e,i,r,s,c){const d=t.eventCache;let p,_;const w=new MF(r,t,s);if(rn(e))_=n.filter.updateFullNode(t.eventCache.getNode(),i,c),p=aC(t,_,!0,n.filter.filtersNodes());else{const I=nn(e);if(".priority"===I)_=n.filter.updatePriority(t.eventCache.getNode(),i),p=aC(t,_,d.isFullyInitialized(),d.isFiltered());else{const M=Xn(e),O=d.getNode().getImmediateChild(I);let N;if(rn(M))N=i;else{const z=w.getCompleteChild(I);N=null!=z?".priority"===oF(M)&&z.getChild(TG(M)).isEmpty()?z:z.updateChild(M,i):Qt.EMPTY_NODE}p=O.equals(N)?t:aC(t,n.filter.updateChild(d.getNode(),I,N,M,w,c),d.isFullyInitialized(),n.filter.filtersNodes())}}return p}function nz(n,t){return n.eventCache.isCompleteForChild(t)}function iz(n,t,e){return e.foreach((i,r)=>{t=t.updateChild(i,r)}),t}function xF(n,t,e,i,r,s,c,d){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let _,p=t;_=rn(e)?i:new si(null).setTree(e,i);const w=t.serverCache.getNode();return _.children.inorderTraversal((I,M)=>{if(w.hasChild(I)){const N=iz(0,t.serverCache.getNode().getImmediateChild(I),M);p=DA(n,p,new On(I),N,r,s,c,d)}}),_.children.inorderTraversal((I,M)=>{const O=!t.serverCache.isCompleteForChild(I)&&null===M.value;if(!w.hasChild(I)&&!O){const z=iz(0,t.serverCache.getNode().getImmediateChild(I),M);p=DA(n,p,new On(I),z,r,s,c,d)}}),p}class qX{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new mF(i.getIndex()),s=function oX(n){return n.loadsAllData()?new mF(n.getIndex()):n.hasLimit()?new sX(n):new rC(n)}(i);this.processor_=function VX(n){return{filter:n}}(s);const c=e.serverCache,d=e.eventCache,p=r.updateFullNode(Qt.EMPTY_NODE,c.getNode(),null),_=s.updateFullNode(Qt.EMPTY_NODE,d.getNode(),null),w=new Kh(p,c.isFullyInitialized(),r.filtersNodes()),I=new Kh(_,d.isFullyInitialized(),s.filtersNodes());this.viewCache_=vA(I,w),this.eventGenerator_=new _X(this.query_)}get query(){return this.query_}}function ZX(n,t){const e=cm(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!rn(t)&&!e.getImmediateChild(nn(t)).isEmpty())?e.getChild(t):null}function rz(n){return 0===n.eventRegistrations_.length}function sz(n,t,e){const i=[];if(e){(0,F.hu)(null==t,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(s=>{const c=s.createCancelEvent(e,r);c&&i.push(c)})}if(t){let r=[];for(let s=0;s<n.eventRegistrations_.length;++s){const c=n.eventRegistrations_[s];if(c.matches(t)){if(t.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(s+1));break}}else r.push(c)}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function oz(n,t,e,i){t.type===il.MERGE&&null!==t.source.queryId&&((0,F.hu)(cm(n.viewCache_),"We should always have a full cache before handling merges"),(0,F.hu)(bA(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,s=function UX(n,t,e,i,r){const s=new FX;let c,d;if(e.type===il.OVERWRITE){const _=e;_.source.fromUser?c=kF(n,t,_.path,_.snap,i,r,s):((0,F.hu)(_.source.fromServer,"Unknown source."),d=_.source.tagged||t.serverCache.isFiltered()&&!rn(_.path),c=DA(n,t,_.path,_.snap,i,r,d,s))}else if(e.type===il.MERGE){const _=e;_.source.fromUser?c=function jX(n,t,e,i,r,s,c){let d=t;return i.foreach((p,_)=>{const w=Ei(e,p);nz(t,nn(w))&&(d=kF(n,d,w,_,r,s,c))}),i.foreach((p,_)=>{const w=Ei(e,p);nz(t,nn(w))||(d=kF(n,d,w,_,r,s,c))}),d}(n,t,_.path,_.children,i,r,s):((0,F.hu)(_.source.fromServer,"Unknown source."),d=_.source.tagged||t.serverCache.isFiltered(),c=xF(n,t,_.path,_.children,i,r,d,s))}else if(e.type===il.ACK_USER_WRITE){const _=e;c=_.revert?function zX(n,t,e,i,r,s){let c;if(null!=EA(i,e))return t;{const d=new MF(i,t,r),p=t.eventCache.getNode();let _;if(rn(e)||".priority"===nn(e)){let w;if(t.serverCache.isFullyInitialized())w=CA(i,cm(t));else{const I=t.serverCache.getNode();(0,F.hu)(I instanceof Qt,"serverChildren would be complete if leaf node"),w=TF(i,I)}_=n.filter.updateFullNode(p,w,s)}else{const w=nn(e);let I=AF(i,w,t.serverCache);null==I&&t.serverCache.isCompleteForChild(w)&&(I=p.getImmediateChild(w)),_=null!=I?n.filter.updateChild(p,w,I,Xn(e),d,s):t.eventCache.getNode().hasChild(w)?n.filter.updateChild(p,w,Qt.EMPTY_NODE,Xn(e),d,s):p,_.isEmpty()&&t.serverCache.isFullyInitialized()&&(c=CA(i,cm(t)),c.isLeafNode()&&(_=n.filter.updateFullNode(_,c,s)))}return c=t.serverCache.isFullyInitialized()||null!=EA(i,An()),aC(t,_,c,n.filter.filtersNodes())}}(n,t,_.path,i,r,s):function $X(n,t,e,i,r,s,c){if(null!=EA(r,e))return t;const d=t.serverCache.isFiltered(),p=t.serverCache;if(null!=i.value){if(rn(e)&&p.isFullyInitialized()||p.isCompleteForPath(e))return DA(n,t,e,p.getNode().getChild(e),r,s,d,c);if(rn(e)){let _=new si(null);return p.getNode().forEachChild(ru,(w,I)=>{_=_.set(new On(w),I)}),xF(n,t,e,_,r,s,d,c)}return t}{let _=new si(null);return i.foreach((w,I)=>{const M=Ei(e,w);p.isCompleteForPath(M)&&(_=_.set(w,p.getNode().getChild(M)))}),xF(n,t,e,_,r,s,d,c)}}(n,t,_.path,_.affectedTree,i,r,s)}else{if(e.type!==il.LISTEN_COMPLETE)throw(0,F.g5)("Unknown operation type: "+e.type);c=function GX(n,t,e,i,r){const s=t.serverCache;return tz(n,zG(t,s.getNode(),s.isFullyInitialized()||rn(e),s.isFiltered()),e,i,ez,r)}(n,t,e.path,i,s)}const p=s.getChanges();return function HX(n,t,e){const i=t.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=bA(n);(e.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&e.push(HG(bA(t)))}}(t,c,p),{viewCache:c,changes:p}}(n.processor_,r,t,e,i);return function BX(n,t){(0,F.hu)(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,F.hu)(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,F.hu)(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,az(n,s.changes,s.viewCache.eventCache.getNode(),null)}function az(n,t,e,i){return function yX(n,t,e,i){const r=[],s=[];return t.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&s.push(function rX(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}(c.childName,c.snapshotNode))}),oC(n,r,"child_removed",t,i,e),oC(n,r,"child_added",t,i,e),oC(n,r,"child_moved",s,i,e),oC(n,r,"child_changed",t,i,e),oC(n,r,"value",t,i,e),r}(n.eventGenerator_,t,e,i?[i]:n.eventRegistrations_)}let IA,TA;class lz{constructor(){this.views=new Map}}function RF(n,t,e,i){const r=t.source.queryId;if(null!==r){const s=n.views.get(r);return(0,F.hu)(null!=s,"SyncTree gave us an op for an invalid query."),oz(s,t,e,i)}{let s=[];for(const c of n.views.values())s=s.concat(oz(c,t,e,i));return s}}function cz(n,t,e,i,r){const c=n.views.get(t._queryIdentifier);if(!c){let d=CA(e,r?i:null),p=!1;d?p=!0:i instanceof Qt?(d=TF(e,i),p=!1):(d=Qt.EMPTY_NODE,p=!1);const _=vA(new Kh(d,p,!1),new Kh(i,r,!1));return new qX(t,_)}return c}function uz(n){const t=[];for(const e of n.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function Xh(n,t){let e=null;for(const i of n.views.values())e=e||ZX(i,t);return e}function dz(n,t){return t._queryParams.loadsAllData()?SA(n):n.views.get(t._queryIdentifier)}function hz(n,t){return null!=dz(n,t)}function Jh(n){return null!=SA(n)}function SA(n){for(const t of n.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let sJ=1;class fz{constructor(t){this.listenProvider_=t,this.syncPointTree_=new si(null),this.pendingWriteTree_=function PX(){return{visibleWrites:lc.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function OF(n,t,e,i,r){return function CX(n,t,e,i,r){(0,F.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:t,snap:e,writeId:i,visible:r}),r&&(n.visibleWrites=lC(n.visibleWrites,t,e)),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i,r),r?oy(n,new lm({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]}function ef(n,t,e=!1){const i=function DX(n,t){for(let e=0;e<n.allWrites.length;e++){const i=n.allWrites[e];if(i.writeId===t)return i}return null}(n.pendingWriteTree_,t);if(function IX(n,t){const e=n.allWrites.findIndex(d=>d.writeId===t);(0,F.hu)(e>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[e];n.allWrites.splice(e,1);let r=i.visible,s=!1,c=n.allWrites.length-1;for(;r&&c>=0;){const d=n.allWrites[c];d.visible&&(c>=e&&SX(d,i.path)?r=!1:nl(i.path,d.path)&&(s=!0)),c--}return!!r&&(s?(function TX(n){n.visibleWrites=ZG(n.allWrites,AX,An()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=qG(n.visibleWrites,i.path):Vr(i.children,p=>{n.visibleWrites=qG(n.visibleWrites,Ei(i.path,p))}),!0))}(n.pendingWriteTree_,t)){let s=new si(null);return null!=i.snap?s=s.set(An(),!0):Vr(i.children,c=>{s=s.set(new On(c),!0)}),oy(n,new yA(i.path,s,e))}return[]}function cC(n,t,e){return oy(n,new lm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))}function AA(n,t,e,i,r=!1){const s=t._path,c=n.syncPointTree_.get(s);let d=[];if(c&&("default"===t._queryIdentifier||hz(c,t))){const p=function nJ(n,t,e,i){const r=t._queryIdentifier,s=[];let c=[];const d=Jh(n);if("default"===r)for(const[p,_]of n.views.entries())c=c.concat(sz(_,e,i)),rz(_)&&(n.views.delete(p),_.query._queryParams.loadsAllData()||s.push(_.query));else{const p=n.views.get(r);p&&(c=c.concat(sz(p,e,i)),rz(p)&&(n.views.delete(r),p.query._queryParams.loadsAllData()||s.push(p.query)))}return d&&!Jh(n)&&s.push(new(function JX(){return(0,F.hu)(IA,"Reference.ts has not been loaded"),IA}())(t._repo,t._path)),{removed:s,events:c}}(c,t,e,i);(function eJ(n){return 0===n.views.size})(c)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const _=p.removed;if(d=p.events,!r){const w=-1!==_.findIndex(M=>M._queryParams.loadsAllData()),I=n.syncPointTree_.findOnPath(s,(M,O)=>Jh(O));if(w&&!I){const M=n.syncPointTree_.subtree(s);if(!M.isEmpty()){const O=function hJ(n){return n.fold((t,e,i)=>{if(e&&Jh(e))return[SA(e)];{let r=[];return e&&(r=uz(e)),Vr(i,(s,c)=>{r=r.concat(c)}),r}})}(M);for(let N=0;N<O.length;++N){const z=O[N],ie=z.query,Me=_z(n,z);n.listenProvider_.startListening(dC(ie),uC(n,ie),Me.hashFn,Me.onComplete)}}}!I&&_.length>0&&!i&&(w?n.listenProvider_.stopListening(dC(t),null):_.forEach(M=>{const O=n.queryToTagMap.get(kA(M));n.listenProvider_.stopListening(dC(M),O)}))}!function fJ(n,t){for(let e=0;e<t.length;++e){const i=t[e];if(!i._queryParams.loadsAllData()){const r=kA(i),s=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(s)}}}(n,_)}return d}function pz(n,t,e,i){const r=NF(n,i);if(null!=r){const s=FF(r),c=s.path,d=s.queryId,p=Ys(c,t);return LF(n,c,new lm(CF(d),p,e))}return[]}function PF(n,t,e,i=!1){const r=t._path;let s=null,c=!1;n.syncPointTree_.foreachOnPath(r,(M,O)=>{const N=Ys(M,r);s=s||Xh(O,N),c=c||Jh(O)});let p,d=n.syncPointTree_.get(r);d?(c=c||Jh(d),s=s||Xh(d,An())):(d=new lz,n.syncPointTree_=n.syncPointTree_.set(r,d)),null!=s?p=!0:(p=!1,s=Qt.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((O,N)=>{const z=Xh(N,An());z&&(s=s.updateImmediateChild(O,z))}));const _=hz(d,t);if(!_&&!t._queryParams.loadsAllData()){const M=kA(t);(0,F.hu)(!n.queryToTagMap.has(M),"View does not exist, but we have a tag");const O=function pJ(){return sJ++}();n.queryToTagMap.set(M,O),n.tagToQueryMap.set(O,M)}let I=function tJ(n,t,e,i,r,s){const c=cz(n,t,i,r,s);return n.views.has(t._queryIdentifier)||n.views.set(t._queryIdentifier,c),function KX(n,t){n.eventRegistrations_.push(t)}(c,e),function QX(n,t){const e=n.viewCache_.eventCache,i=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(ri,(s,c)=>{i.push(ny(s,c))}),e.isFullyInitialized()&&i.push(HG(e.getNode())),az(n,i,e.getNode(),t)}(c,e)}(d,t,e,wA(n.pendingWriteTree_,r),s,p);if(!_&&!c&&!i){const M=dz(d,t);I=I.concat(function mJ(n,t,e){const i=t._path,r=uC(n,t),s=_z(n,e),c=n.listenProvider_.startListening(dC(t),r,s.hashFn,s.onComplete),d=n.syncPointTree_.subtree(i);if(r)(0,F.hu)(!Jh(d.value),"If we're adding a query, it shouldn't be shadowed");else{const p=d.fold((_,w,I)=>{if(!rn(_)&&w&&Jh(w))return[SA(w).query];{let M=[];return w&&(M=M.concat(uz(w).map(O=>O.query))),Vr(I,(O,N)=>{M=M.concat(N)}),M}});for(let _=0;_<p.length;++_){const w=p[_];n.listenProvider_.stopListening(dC(w),uC(n,w))}}return c}(n,t,M))}return I}function MA(n,t,e){const r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(t,(c,d)=>{const _=Xh(d,Ys(c,t));if(_)return _});return KG(r,t,s,e,!0)}function oy(n,t){return mz(t,n.syncPointTree_,null,wA(n.pendingWriteTree_,An()))}function mz(n,t,e,i){if(rn(n.path))return gz(n,t,e,i);{const r=t.get(An());null==e&&null!=r&&(e=Xh(r,An()));let s=[];const c=nn(n.path),d=n.operationForChild(c),p=t.children.get(c);if(p&&d){const _=e?e.getImmediateChild(c):null,w=XG(i,c);s=s.concat(mz(d,p,_,w))}return r&&(s=s.concat(RF(r,n,i,e))),s}}function gz(n,t,e,i){const r=t.get(An());null==e&&null!=r&&(e=Xh(r,An()));let s=[];return t.children.inorderTraversal((c,d)=>{const p=e?e.getImmediateChild(c):null,_=XG(i,c),w=n.operationForChild(c);w&&(s=s.concat(gz(w,d,p,_)))}),r&&(s=s.concat(RF(r,n,i,e))),s}function _z(n,t){const e=t.query,i=uC(n,e);return{hashFn:()=>(function WX(n){return n.viewCache_.serverCache.getNode()}(t)||Qt.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function cJ(n,t,e){const i=NF(n,e);if(i){const r=FF(i),s=r.path,c=r.queryId,d=Ys(s,t);return LF(n,s,new sC(CF(c),d))}return[]}(n,e._path,i):function lJ(n,t){return oy(n,new sC({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(n,e._path);{const s=function lQ(n,t){let e="Unknown Error";"too_big"===n?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?e="Client doesn't have permission to access the desired data.":"unavailable"===n&&(e="The service is unavailable");const i=new Error(n+" at "+t._path.toString()+": "+e);return i.code=n.toUpperCase(),i}(r,e);return AA(n,e,null,s)}}}}function uC(n,t){const e=kA(t);return n.queryToTagMap.get(e)}function kA(n){return n._path.toString()+"$"+n._queryIdentifier}function NF(n,t){return n.tagToQueryMap.get(t)}function FF(n){const t=n.indexOf("$");return(0,F.hu)(-1!==t&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new On(n.substr(0,t))}}function LF(n,t,e){const i=n.syncPointTree_.get(t);return(0,F.hu)(i,"Missing sync point for query tag that we're tracking"),RF(i,e,wA(n.pendingWriteTree_,t),null)}function dC(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function rJ(){return(0,F.hu)(TA,"Reference.ts has not been loaded"),TA}())(n._repo,n._path):n}class VF{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new VF(e)}node(){return this.node_}}class BF{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=Ei(this.path_,t);return new BF(this.syncTree_,e)}node(){return MA(this.syncTree_,this.path_)}}const yz=function(n,t,e){return n&&"object"==typeof n?((0,F.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?_J(n[".sv"],t,e):"object"==typeof n[".sv"]?yJ(n[".sv"],t):void(0,F.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},_J=function(n,t,e){if("timestamp"===n)return e.timestamp;(0,F.hu)(!1,"Unexpected server value: "+n)},yJ=function(n,t,e){n.hasOwnProperty("increment")||(0,F.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,F.hu)(!1,"Unexpected increment value: "+i);const r=t.node();if((0,F.hu)(null!==r&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const c=r.getValue();return"number"!=typeof c?i:c+i},vz=function(n,t,e,i){return HF(t,new BF(e,n),i)},UF=function(n,t,e){return HF(n,new VF(t),e)};function HF(n,t,e){const i=n.getPriority().val(),r=yz(i,t.getImmediateChild(".priority"),e);let s;if(n.isLeafNode()){const c=n,d=yz(c.getValue(),t,e);return d!==c.getValue()||r!==c.getPriority().val()?new J_(d,Mi(r)):n}{const c=n;return s=c,r!==c.getPriority().val()&&(s=s.updatePriority(new J_(r))),c.forEachChild(ri,(d,p)=>{const _=HF(p,t.getImmediateChild(d),e);_!==p&&(s=s.updateImmediateChild(d,_))}),s}}class jF{constructor(t="",e=null,i={children:{},childCount:0}){this.name=t,this.parent=e,this.node=i}}function xA(n,t){let e=t instanceof On?t:new On(t),i=n,r=nn(e);for(;null!==r;){const s=(0,F.DV)(i.node.children,r)||{children:{},childCount:0};i=new jF(r,i,s),e=Xn(e),r=nn(e)}return i}function dm(n){return n.node.value}function $F(n,t){n.node.value=t,GF(n)}function bz(n){return n.node.childCount>0}function RA(n,t){Vr(n.node.children,(e,i)=>{t(new jF(e,n,i))})}function wz(n,t,e,i){e&&!i&&t(n),RA(n,r=>{wz(r,t,!0,i)}),e&&i&&t(n)}function hC(n){return new On(null===n.parent?n.name:hC(n.parent)+"/"+n.name)}function GF(n){null!==n.parent&&function wJ(n,t,e){const i=function vJ(n){return void 0===dm(n)&&!bz(n)}(e),r=(0,F.r3)(n.node.children,t);i&&r?(delete n.node.children[t],n.node.childCount--,GF(n)):!i&&!r&&(n.node.children[t]=e.node,n.node.childCount++,GF(n))}(n.parent,n.name,n)}const CJ=/[\[\].#$\/\u0000-\u001F\u007F]/,EJ=/[\[\].#$\u0000-\u001F\u007F]/,zF=10485760,OA=function(n){return"string"==typeof n&&0!==n.length&&!CJ.test(n)},Cz=function(n){return"string"==typeof n&&0!==n.length&&!EJ.test(n)},fC=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!sA(n)||n&&"object"==typeof n&&(0,F.r3)(n,".sv")},su=function(n,t,e,i){i&&void 0===t||pC((0,F.gK)(n,"value"),t,e)},pC=function(n,t,e){const i=e instanceof On?new BQ(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+om(i));if("function"==typeof t)throw new Error(n+"contains a function "+om(i)+" with contents = "+t.toString());if(sA(t))throw new Error(n+"contains "+t.toString()+" "+om(i));if("string"==typeof t&&t.length>zF/3&&(0,F.ug)(t)>zF)throw new Error(n+"contains a string greater than "+zF+" utf8 bytes "+om(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let r=!1,s=!1;if(Vr(t,(c,d)=>{if(".value"===c)r=!0;else if(".priority"!==c&&".sv"!==c&&(s=!0,!OA(c)))throw new Error(n+" contains an invalid key ("+c+") "+om(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function UQ(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=(0,F.ug)(t),AG(n)})(i,c),pC(n,d,i),function HQ(n){const t=n.parts_.pop();n.byteLength_-=(0,F.ug)(t),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&s)throw new Error(n+' contains ".value" child '+om(i)+" in addition to actual children.")}},Ez=function(n,t,e,i){if(i&&void 0===t)return;const r=(0,F.gK)(n,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(r+" must be an object containing the children to replace.");const s=[];Vr(t,(c,d)=>{const p=new On(c);if(pC(r,d,Ei(e,p)),".priority"===oF(p)&&!fC(d))throw new Error(r+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(p)}),function(n,t){let e,i;for(e=0;e<t.length;e++){i=t[e];const s=X0(i);for(let c=0;c<s.length;c++)if((".priority"!==s[c]||c!==s.length-1)&&!OA(s[c]))throw new Error(n+"contains an invalid key ("+s[c]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(VQ);let r=null;for(e=0;e<t.length;e++){if(i=t[e],null!==r&&nl(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}(r,s)},qF=function(n,t,e){if(!e||void 0!==t){if(sA(t))throw new Error((0,F.gK)(n,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!fC(t))throw new Error((0,F.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},mC=function(n,t,e,i){if(!(i&&void 0===e||OA(e)))throw new Error((0,F.gK)(n,t)+'was an invalid key = "'+e+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},gC=function(n,t,e,i){if(!(i&&void 0===e||Cz(e)))throw new Error((0,F.gK)(n,t)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},rl=function(n,t){if(".info"===nn(t))throw new Error(n+" failed = Can't modify data under /.info/")},Dz=function(n,t){const e=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!OA(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==e.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Cz(n)}(e))throw new Error((0,F.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class TJ{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function PA(n,t){let e=null;for(let i=0;i<t.length;i++){const r=t[i],s=r.getPath();null!==e&&!aF(s,e.path)&&(n.eventLists_.push(e),e=null),null===e&&(e={events:[],path:s}),e.events.push(r)}e&&n.eventLists_.push(e)}function Iz(n,t,e){PA(n,e),Sz(n,i=>aF(i,t))}function na(n,t,e){PA(n,e),Sz(n,i=>nl(i,t)||nl(t,i))}function Sz(n,t){n.recursionDepth_++;let e=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(t(r.path)?(AJ(n.eventLists_[i]),n.eventLists_[i]=null):e=!1)}e&&(n.eventLists_=[]),n.recursionDepth_--}function AJ(n){for(let t=0;t<n.events.length;t++){const e=n.events[t];if(null!==e){n.events[t]=null;const i=e.getEventRunner();rm&&Lr("event: "+e.toString()),Q_(i)}}}const Tz="repo_interrupt";class kJ{constructor(t,e,i,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new TJ,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=_A(),this.transactionQueueTree_=new jF,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Az(n){const e=n.infoData_.getNode(new On(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function _C(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:Az(n)})}function Mz(n,t,e,i,r){n.dataUpdateCount++;const s=new On(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let c=[];if(r)if(i){const p=(0,F.UI)(e,_=>Mi(_));c=function uJ(n,t,e,i){const r=NF(n,i);if(r){const s=FF(r),c=s.path,d=s.queryId,p=Ys(c,t),_=si.fromObject(e);return LF(n,c,new ry(CF(d),p,_))}return[]}(n.serverSyncTree_,s,p,r)}else{const p=Mi(e);c=pz(n.serverSyncTree_,s,p,r)}else if(i){const p=(0,F.UI)(e,_=>Mi(_));c=function aJ(n,t,e){const i=si.fromObject(e);return oy(n,new ry({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,i))}(n.serverSyncTree_,s,p)}else{const p=Mi(e);c=cC(n.serverSyncTree_,s,p)}let d=s;c.length>0&&(d=ly(n,s)),na(n.eventQueue_,d,c)}function kz(n,t){WF(n,"connected",t),!1===t&&function NJ(n){ay(n,"onDisconnectEvents");const t=_C(n),e=_A();vF(n.onDisconnect_,An(),(r,s)=>{const c=vz(r,s,n.serverSyncTree_,t);iy(e,r,c)});let i=[];vF(e,An(),(r,s)=>{i=i.concat(cC(n.serverSyncTree_,r,s));const c=QF(n,r);ly(n,c)}),n.onDisconnect_=_A(),na(n.eventQueue_,An(),i)}(n)}function WF(n,t,e){const i=new On("/.info/"+t),r=Mi(e);n.infoData_.updateSnapshot(i,r);const s=cC(n.infoSyncTree_,i,r);na(n.eventQueue_,i,s)}function NA(n){return n.nextWriteId_++}function YF(n,t,e,i,r){ay(n,"set",{path:t.toString(),value:e,priority:i});const s=_C(n),c=Mi(e,i),d=MA(n.serverSyncTree_,t),p=UF(c,d,s),_=NA(n),w=OF(n.serverSyncTree_,t,p,_,!0);PA(n.eventQueue_,w),n.server_.put(t.toString(),c.val(!0),(M,O)=>{const N="ok"===M;N||_s("set at "+t+" failed: "+M);const z=ef(n.serverSyncTree_,_,!N);na(n.eventQueue_,t,z),tf(0,r,M,O)});const I=QF(n,t);ly(n,I),na(n.eventQueue_,I,[])}function FJ(n,t,e){n.server_.onDisconnectCancel(t.toString(),(i,r)=>{"ok"===i&&yF(n.onDisconnect_,t),tf(0,e,i,r)})}function xz(n,t,e,i){const r=Mi(e);n.server_.onDisconnectPut(t.toString(),r.val(!0),(s,c)=>{"ok"===s&&iy(n.onDisconnect_,t,r),tf(0,i,s,c)})}function ZF(n,t,e){let i;i=".info"===nn(t._path)?AA(n.infoSyncTree_,t,e):AA(n.serverSyncTree_,t,e),Iz(n.eventQueue_,t._path,i)}function Rz(n){n.persistentConnection_&&n.persistentConnection_.interrupt(Tz)}function ay(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),Lr(e,...t)}function tf(n,t,e,i){t&&Q_(()=>{if("ok"===e)t(null);else{const r=(e||"error").toUpperCase();let s=r;i&&(s+=": "+i);const c=new Error(s);c.code=r,t(c)}})}function KF(n,t,e){return MA(n.serverSyncTree_,t,e)||Qt.EMPTY_NODE}function FA(n,t=n.transactionQueueTree_){if(t||LA(n,t),dm(t)){const e=Pz(n,t);(0,F.hu)(e.length>0,"Sending zero length transaction queue"),e.every(r=>0===r.status)&&function jJ(n,t,e){const i=e.map(_=>_.currentWriteId),r=KF(n,t,i);let s=r;const c=r.hash();for(let _=0;_<e.length;_++){const w=e[_];(0,F.hu)(0===w.status,"tryToSendTransactionQueue_: items in queue should all be run."),w.status=1,w.retryCount++;const I=Ys(t,w.path);s=s.updateChild(I,w.currentOutputSnapshotRaw)}const d=s.val(!0),p=t;n.server_.put(p.toString(),d,_=>{ay(n,"transaction put response",{path:p.toString(),status:_});let w=[];if("ok"===_){const I=[];for(let M=0;M<e.length;M++)e[M].status=2,w=w.concat(ef(n.serverSyncTree_,e[M].currentWriteId)),e[M].onComplete&&I.push(()=>e[M].onComplete(null,!0,e[M].currentOutputSnapshotResolved)),e[M].unwatcher();LA(n,xA(n.transactionQueueTree_,t)),FA(n,n.transactionQueueTree_),na(n.eventQueue_,t,w);for(let M=0;M<I.length;M++)Q_(I[M])}else{if("datastale"===_)for(let I=0;I<e.length;I++)e[I].status=3===e[I].status?4:0;else{_s("transaction at "+p.toString()+" failed: "+_);for(let I=0;I<e.length;I++)e[I].status=4,e[I].abortReason=_}ly(n,t)}},c)}(n,hC(t),e)}else bz(t)&&RA(t,e=>{FA(n,e)})}function ly(n,t){const e=Oz(n,t),i=hC(e);return function $J(n,t,e){if(0===t.length)return;const i=[];let r=[];const c=t.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<t.length;d++){const p=t[d],_=Ys(e,p.path);let I,w=!1;if((0,F.hu)(null!==_,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)w=!0,I=p.abortReason,r=r.concat(ef(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=25)w=!0,I="maxretry",r=r.concat(ef(n.serverSyncTree_,p.currentWriteId,!0));else{const M=KF(n,p.path,c);p.currentInputSnapshot=M;const O=t[d].update(M.val());if(void 0!==O){pC("transaction failed: Data returned ",O,p.path);let N=Mi(O);"object"==typeof O&&null!=O&&(0,F.r3)(O,".priority")||(N=N.updatePriority(M.getPriority()));const ie=p.currentWriteId,Me=_C(n),ze=UF(N,M,Me);p.currentOutputSnapshotRaw=N,p.currentOutputSnapshotResolved=ze,p.currentWriteId=NA(n),c.splice(c.indexOf(ie),1),r=r.concat(OF(n.serverSyncTree_,p.path,ze,p.currentWriteId,p.applyLocally)),r=r.concat(ef(n.serverSyncTree_,ie,!0))}else w=!0,I="nodata",r=r.concat(ef(n.serverSyncTree_,p.currentWriteId,!0))}na(n.eventQueue_,e,r),r=[],w&&(t[d].status=2,setTimeout(t[d].unwatcher,Math.floor(0)),t[d].onComplete&&i.push("nodata"===I?()=>t[d].onComplete(null,!1,t[d].currentInputSnapshot):()=>t[d].onComplete(new Error(I),!1,null)))}LA(n,n.transactionQueueTree_);for(let d=0;d<i.length;d++)Q_(i[d]);FA(n,n.transactionQueueTree_)}(n,Pz(n,e),i),i}function Oz(n,t){let e,i=n.transactionQueueTree_;for(e=nn(t);null!==e&&void 0===dm(i);)i=xA(i,e),e=nn(t=Xn(t));return i}function Pz(n,t){const e=[];return Nz(n,t,e),e.sort((i,r)=>i.order-r.order),e}function Nz(n,t,e){const i=dm(t);if(i)for(let r=0;r<i.length;r++)e.push(i[r]);RA(t,r=>{Nz(n,r,e)})}function LA(n,t){const e=dm(t);if(e){let i=0;for(let r=0;r<e.length;r++)2!==e[r].status&&(e[i]=e[r],i++);e.length=i,$F(t,e.length>0?e:void 0)}RA(t,i=>{LA(n,i)})}function QF(n,t){const e=hC(Oz(n,t)),i=xA(n.transactionQueueTree_,t);return function bJ(n,t,e){let i=e?n:n.parent;for(;null!==i;){if(t(i))return!0;i=i.parent}}(i,r=>{XF(n,r)}),XF(n,i),wz(i,r=>{XF(n,r)}),e}function XF(n,t){const e=dm(t);if(e){const i=[];let r=[],s=-1;for(let c=0;c<e.length;c++)3===e[c].status||(1===e[c].status?((0,F.hu)(s===c-1,"All SENT items should be at beginning of queue."),s=c,e[c].status=3,e[c].abortReason="set"):((0,F.hu)(0===e[c].status,"Unexpected transaction status in abort"),e[c].unwatcher(),r=r.concat(ef(n.serverSyncTree_,e[c].currentWriteId,!0)),e[c].onComplete&&i.push(e[c].onComplete.bind(null,new Error("set"),!1,null))));-1===s?$F(t,void 0):e.length=s+1,na(n.eventQueue_,hC(t),r);for(let c=0;c<i.length;c++)Q_(i[c])}}const JF=function(n,t){const e=qJ(n),i=e.namespace;return"firebase.com"===e.domain&&nu(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==e.domain&&nu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&_s("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new eF(e.host,e.secure,i,"ws"===e.scheme||"wss"===e.scheme,t,"",i!==e.subdomain),path:new On(e.pathString)}},qJ=function(n){let t="",e="",i="",r="",s="",c=!0,d="https",p=443;if("string"==typeof n){let _=n.indexOf("//");_>=0&&(d=n.substring(0,_-1),n=n.substring(_+2));let w=n.indexOf("/");-1===w&&(w=n.length);let I=n.indexOf("?");-1===I&&(I=n.length),t=n.substring(0,Math.min(w,I)),w<I&&(r=function GJ(n){let t="";const e=n.split("/");for(let i=0;i<e.length;i++)if(e[i].length>0){let r=e[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}t+="/"+r}return t}(n.substring(w,I)));const M=function zJ(n){const t={};"?"===n.charAt(0)&&(n=n.substring(1));for(const e of n.split("&")){if(0===e.length)continue;const i=e.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):_s(`Invalid query segment '${e}' in query '${n}'`)}return t}(n.substring(Math.min(n.length,I)));_=t.indexOf(":"),_>=0?(c="https"===d||"wss"===d,p=parseInt(t.substring(_+1),10)):_=t.length;const O=t.slice(0,_);if("localhost"===O.toLowerCase())e="localhost";else if(O.split(".").length<=2)e=O;else{const N=t.indexOf(".");i=t.substring(0,N).toLowerCase(),e=t.substring(N+1),s=i}"ns"in M&&(s=M.ns)}return{host:t,port:p,domain:e,subdomain:i,secure:c,scheme:d,pathString:r,namespace:s}};class Fz{constructor(t,e,i,r){this.eventType=t,this.eventRegistration=e,this.snapshot=i,this.prevName=r}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,F.Pz)(this.snapshot.exportVal())}}class Lz{constructor(t,e,i){this.eventRegistration=t,this.error=e,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class eL{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return(0,F.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class Vz{constructor(t,e){this._repo=t,this._path=e}cancel(){const t=new F.BH;return FJ(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){rl("OnDisconnect.remove",this._path);const t=new F.BH;return xz(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){rl("OnDisconnect.set",this._path),su("OnDisconnect.set",t,this._path,!1);const e=new F.BH;return xz(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){rl("OnDisconnect.setWithPriority",this._path),su("OnDisconnect.setWithPriority",t,this._path,!1),qF("OnDisconnect.setWithPriority",e,!1);const i=new F.BH;return function LJ(n,t,e,i,r){const s=Mi(e,i);n.server_.onDisconnectPut(t.toString(),s.val(!0),(c,d)=>{"ok"===c&&iy(n.onDisconnect_,t,s),tf(0,r,c,d)})}(this._repo,this._path,t,e,i.wrapCallback(()=>{})),i.promise}update(t){rl("OnDisconnect.update",this._path),Ez("OnDisconnect.update",t,this._path,!1);const e=new F.BH;return function VJ(n,t,e,i){if((0,F.xb)(e))return Lr("onDisconnect().update() called with empty data.  Don't do anything."),void tf(0,i,"ok",void 0);n.server_.onDisconnectMerge(t.toString(),e,(r,s)=>{"ok"===r&&Vr(e,(c,d)=>{const p=Mi(d);iy(n.onDisconnect_,Ei(t,c),p)}),tf(0,i,r,s)})}(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}}class bo{constructor(t,e,i,r){this._repo=t,this._path=e,this._queryParams=i,this._orderByCalled=r}get key(){return rn(this._path)?null:oF(this._path)}get ref(){return new sl(this._repo,this._path)}get _queryIdentifier(){const t=$G(this._queryParams),e=Q1(t);return"{}"===e?"default":e}get _queryObject(){return $G(this._queryParams)}isEqual(t){if(!((t=(0,F.m9)(t))instanceof bo))return!1;const e=this._repo===t._repo,i=aF(this._path,t._path);return e&&i&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function LQ(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)""!==n.pieces_[e]&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}(this._path)}}function VA(n,t){if(!0===n._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function nf(n){let t=null,e=null;if(n.hasStart()&&(t=n.getIndexStartValue()),n.hasEnd()&&(e=n.getIndexEndValue()),n.getIndex()===ru){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==fd)throw new Error(i);if("string"!=typeof t)throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==iu)throw new Error(i);if("string"!=typeof e)throw new Error(r)}}else if(n.getIndex()===ri){if(null!=t&&!fC(t)||null!=e&&!fC(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,F.hu)(n.getIndex()instanceof hF||n.getIndex()===fF,"unknown index type."),null!=t&&"object"==typeof t||null!=e&&"object"==typeof e)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function BA(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class sl extends bo{constructor(t,e){super(t,e,new pA,!1)}get parent(){const t=TG(this._path);return null===t?null:new sl(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class hm{constructor(t,e,i){this._node=t,this.ref=e,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new On(t),i=fm(this.ref,t);return new hm(this._node.getChild(e),i,ri)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>t(new hm(r,fm(this.ref,i),ri)))}hasChild(t){const e=new On(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Bz(n,t){return(n=(0,F.m9)(n))._checkNotDeleted("ref"),void 0!==t?fm(n._root,t):n._root}function Uz(n,t){(n=(0,F.m9)(n))._checkNotDeleted("refFromURL");const e=JF(t,n._repo.repoInfo_.nodeAdmin);Dz("refFromURL",e);const i=e.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&nu("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),Bz(n,e.path.toString())}function fm(n,t){return null===nn((n=(0,F.m9)(n))._path)?(e=t,e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),gC("child","path",e,!1)):gC("child","path",t,!1),new sl(n._repo,Ei(n._path,t));var e}function tL(n,t){n=(0,F.m9)(n),rl("set",n._path),su("set",t,n._path,!1);const e=new F.BH;return YF(n._repo,n._path,t,null,e.wrapCallback(()=>{})),e.promise}function QJ(n,t){Ez("update",t,n._path,!1);const e=new F.BH;return function PJ(n,t,e,i){ay(n,"update",{path:t.toString(),value:e});let r=!0;const s=_C(n),c={};if(Vr(e,(d,p)=>{r=!1,c[d]=vz(Ei(t,d),Mi(p),n.serverSyncTree_,s)}),r)Lr("update() called with empty data.  Don't do anything."),tf(0,i,"ok",void 0);else{const d=NA(n),p=function oJ(n,t,e,i){!function EX(n,t,e,i){(0,F.hu)(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:t,children:e,writeId:i,visible:!0}),n.visibleWrites=DF(n.visibleWrites,t,e),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i);const r=si.fromObject(e);return oy(n,new ry({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,r))}(n.serverSyncTree_,t,c,d);PA(n.eventQueue_,p),n.server_.merge(t.toString(),e,(_,w)=>{const I="ok"===_;I||_s("update at "+t+" failed: "+_);const M=ef(n.serverSyncTree_,d,!I),O=M.length>0?ly(n,t):t;na(n.eventQueue_,O,M),tf(0,i,_,w)}),Vr(e,_=>{const w=QF(n,Ei(t,_));ly(n,w)}),na(n.eventQueue_,t,[])}}(n._repo,n._path,t,e.wrapCallback(()=>{})),e.promise}function XJ(n){n=(0,F.m9)(n);const t=new eL(()=>{}),e=new yC(t);return function OJ(n,t,e){const i=function dJ(n,t){const e=t._path;let i=null;n.syncPointTree_.foreachOnPath(e,(_,w)=>{const I=Ys(_,e);i=i||Xh(w,I)});let r=n.syncPointTree_.get(e);r?i=i||Xh(r,An()):(r=new lz,n.syncPointTree_=n.syncPointTree_.set(e,r));const s=null!=i,c=s?new Kh(i,!0,!1):null;return function YX(n){return bA(n.viewCache_)}(cz(r,t,wA(n.pendingWriteTree_,t._path),s?c.getNode():Qt.EMPTY_NODE,s))}(n.serverSyncTree_,t);return null!=i?Promise.resolve(i):n.server_.get(t).then(r=>{const s=Mi(r).withIndex(t._queryParams.getIndex());let c;if(PF(n.serverSyncTree_,t,e,!0),t._queryParams.loadsAllData())c=cC(n.serverSyncTree_,t._path,s);else{const d=uC(n.serverSyncTree_,t);c=pz(n.serverSyncTree_,t._path,s,d)}return na(n.eventQueue_,t._path,c),AA(n.serverSyncTree_,t,e,null,!0),s},r=>(ay(n,"get for query "+(0,F.Pz)(t)+" failed: "+r),Promise.reject(new Error(r))))}(n._repo,n,e).then(i=>new hm(i,new sl(n._repo,n._path),n._queryParams.getIndex()))}class yC{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const i=e._queryParams.getIndex();return new Fz("value",this,new hm(t.snapshotNode,new sl(e._repo,e._path),i))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new Lz(this,t,e):null}matches(t){return t instanceof yC&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class UA{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new Lz(this,t,e):null}createEvent(t,e){(0,F.hu)(null!=t.childName,"Child events should have a childName.");const i=fm(new sl(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new Fz(t.type,this,new hm(t.snapshotNode,i,r),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof UA&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function vC(n,t,e,i,r){let s;if("object"==typeof i&&(s=void 0,r=i),"function"==typeof i&&(s=i),r&&r.onlyOnce){const p=e,_=(w,I)=>{ZF(n._repo,n,d),p(w,I)};_.userCallback=e.userCallback,_.context=e.context,e=_}const c=new eL(e,s||void 0),d="value"===t?new yC(c):new UA(t,c);return function BJ(n,t,e){let i;i=".info"===nn(t._path)?PF(n.infoSyncTree_,t,e):PF(n.serverSyncTree_,t,e),Iz(n.eventQueue_,t._path,i)}(n._repo,n,d),()=>ZF(n._repo,n,d)}function nL(n,t,e,i){return vC(n,"value",t,e,i)}function Hz(n,t,e,i){return vC(n,"child_added",t,e,i)}function jz(n,t,e,i){return vC(n,"child_changed",t,e,i)}function $z(n,t,e,i){return vC(n,"child_moved",t,e,i)}function Gz(n,t,e,i){return vC(n,"child_removed",t,e,i)}function zz(n,t,e){let i=null;const r=e?new eL(e):null;"value"===t?i=new yC(r):t&&(i=new UA(t,r)),ZF(n._repo,n,i)}class cc{}class qz extends cc{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){su("endAt",this._value,t._path,!0);const e=_F(t._queryParams,this._value,this._key);if(BA(e),nf(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new bo(t._repo,t._path,e,t._orderByCalled)}}class eee extends cc{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){su("endBefore",this._value,t._path,!1);const e=function uX(n,t,e){let i,r;return n.index_===ru?("string"==typeof t&&(t=UG(t)),r=_F(n,t,e)):(i=null==e?fd:UG(e),r=_F(n,t,i)),r.endBeforeSet_=!0,r}(t._queryParams,this._value,this._key);if(BA(e),nf(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new bo(t._repo,t._path,e,t._orderByCalled)}}class Wz extends cc{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){su("startAt",this._value,t._path,!0);const e=gF(t._queryParams,this._value,this._key);if(BA(e),nf(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new bo(t._repo,t._path,e,t._orderByCalled)}}class iee extends cc{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){su("startAfter",this._value,t._path,!1);const e=function cX(n,t,e){let i;if(n.index_===ru)"string"==typeof t&&(t=BG(t)),i=gF(n,t,e);else{let r;r=null==e?iu:BG(e),i=gF(n,t,r)}return i.startAfterSet_=!0,i}(t._queryParams,this._value,this._key);if(BA(e),nf(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new bo(t._repo,t._path,e,t._orderByCalled)}}class see extends cc{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new bo(t._repo,t._path,function aX(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="l",e}(t._queryParams,this._limit),t._orderByCalled)}}class aee extends cc{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new bo(t._repo,t._path,function lX(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="r",e}(t._queryParams,this._limit),t._orderByCalled)}}class cee extends cc{constructor(t){super(),this._path=t}_apply(t){VA(t,"orderByChild");const e=new On(this._path);if(rn(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new hF(e),r=mA(t._queryParams,i);return nf(r),new bo(t._repo,t._path,r,!0)}}class dee extends cc{_apply(t){VA(t,"orderByKey");const e=mA(t._queryParams,ru);return nf(e),new bo(t._repo,t._path,e,!0)}}class fee extends cc{_apply(t){VA(t,"orderByPriority");const e=mA(t._queryParams,ri);return nf(e),new bo(t._repo,t._path,e,!0)}}class mee extends cc{_apply(t){VA(t,"orderByValue");const e=mA(t._queryParams,fF);return nf(e),new bo(t._repo,t._path,e,!0)}}class _ee extends cc{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){if(su("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new qz(this._value,this._key)._apply(new Wz(this._value,this._key)._apply(t))}}function uc(n,...t){let e=(0,F.m9)(n);for(const i of t)e=i._apply(e);return e}(function XX(n){(0,F.hu)(!IA,"__referenceConstructor has already been defined"),IA=n})(sl),function iJ(n){(0,F.hu)(!TA,"__referenceConstructor has already been defined"),TA=n}(sl);const iL={};function Zz(n,t,e,i,r){let s=i||n.options.databaseURL;void 0===s&&(n.options.projectId||nu("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Lr("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,_,c=JF(s,r),d=c.repoInfo;typeof process<"u"&&process.env&&(_=process.env.FIREBASE_DATABASE_EMULATOR_HOST),_?(p=!0,s=`http://${_}?ns=${d.namespace}`,c=JF(s,r),d=c.repoInfo):p=!c.repoInfo.secure;const w=r&&p?new Q0(Q0.OWNER):new hQ(n.name,n.options,t);Dz("Invalid Firebase Database URL",c),rn(c.path)||nu("Database URL must point to the root of a Firebase Database (not including a child path).");const I=function Cee(n,t,e,i){let r=iL[t.name];r||(r={},iL[t.name]=r);let s=r[n.toURLString()];return s&&nu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new kJ(n,false,e,i),r[n.toURLString()]=s,s}(d,n,w,new dQ(n.name,e));return new Dee(I,n)}class Dee{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function xJ(n,t,e){if(n.stats_=iF(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new gA(n.repoInfo_,(i,r,s,c)=>{Mz(n,i,r,s,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>kz(n,!0),0);else{if(typeof e<"u"&&null!==e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,F.Pz)(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new am(n.repoInfo_,t,(i,r,s,c)=>{Mz(n,i,r,s,c)},i=>{kz(n,i)},i=>{!function RJ(n,t){Vr(t,(e,i)=>{WF(n,e,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function mQ(n,t){const e=n.toString();return nF[e]||(nF[e]=t()),nF[e]}(n.repoInfo_,()=>new gX(n.stats_,n.server_)),n.infoData_=new dX,n.infoSyncTree_=new fz({startListening:(i,r,s,c)=>{let d=[];const p=n.infoData_.getNode(i._path);return p.isEmpty()||(d=cC(n.infoSyncTree_,i._path,p),setTimeout(()=>{c("ok")},0)),d},stopListening:()=>{}}),WF(n,"connected",!1),n.serverSyncTree_=new fz({startListening:(i,r,s,c)=>(n.server_.listen(i,s,r,(d,p)=>{const _=c(d,p);na(n.eventQueue_,i._path,_)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new sl(this._repo,An())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function wee(n,t){const e=iL[t];(!e||e[n.key]!==n)&&nu(`Database ${t}(${n.repoInfo_}) has already been deleted.`),Rz(n),delete e[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&nu("Cannot call "+t+" on a deleted database.")}}function Kz(){mG.IS_TRANSPORT_INITIALIZED&&_s("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Iee(){Kz(),Yh.forceDisallow()}function See(){Kz(),X_.forceDisallow(),Yh.forceAllow()}function kee(n,t){Z$(n,t)}const Ree={".sv":"timestamp"};class Nee{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}am.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)},am.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)},function xee(n){G$(Vs.SDK_VERSION),(0,Vs._registerComponent)(new nc.wA("database",(t,{instanceIdentifier:e})=>Zz(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,Vs.registerVersion)(j$,"0.13.6",n),(0,Vs.registerVersion)(j$,"0.13.6","esm2017")}();const Bee=new ic.Yd("@firebase/database-compat"),Qz=function(n){Bee.warn("FIREBASE WARNING: "+n)};class jee{constructor(t){this._delegate=t}cancel(t){(0,F.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,F.Wj)("OnDisconnect.cancel","onComplete",t,!0);const e=this._delegate.cancel();return t&&e.then(()=>t(null),i=>t(i)),e}remove(t){(0,F.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,F.Wj)("OnDisconnect.remove","onComplete",t,!0);const e=this._delegate.remove();return t&&e.then(()=>t(null),i=>t(i)),e}set(t,e){(0,F.Dv)("OnDisconnect.set",1,2,arguments.length),(0,F.Wj)("OnDisconnect.set","onComplete",e,!0);const i=this._delegate.set(t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){(0,F.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,F.Wj)("OnDisconnect.setWithPriority","onComplete",i,!0);const r=this._delegate.setWithPriority(t,e);return i&&r.then(()=>i(null),s=>i(s)),r}update(t,e){if((0,F.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){const r={};for(let s=0;s<t.length;++s)r[""+s]=t[s];t=r,Qz("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,F.Wj)("OnDisconnect.update","onComplete",e,!0);const i=this._delegate.update(t);return e&&i.then(()=>e(null),r=>e(r)),i}}class $ee{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return(0,F.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class rf{constructor(t,e){this._database=t,this._delegate=e}val(){return(0,F.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,F.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,F.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,F.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return(0,F.Dv)("DataSnapshot.child",0,1,arguments.length),t=String(t),gC("DataSnapshot.child","path",t,!1),new rf(this._database,this._delegate.child(t))}hasChild(t){return(0,F.Dv)("DataSnapshot.hasChild",1,1,arguments.length),gC("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return(0,F.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return(0,F.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,F.Wj)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(e=>t(new rf(this._database,e)))}hasChildren(){return(0,F.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,F.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,F.Dv)("DataSnapshot.ref",0,0,arguments.length),new ia(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ts{constructor(t,e){this.database=t,this._delegate=e}on(t,e,i,r){var s;(0,F.Dv)("Query.on",2,4,arguments.length),(0,F.Wj)("Query.on","callback",e,!1);const c=ts.getCancelAndContextArgs_("Query.on",i,r),d=(_,w)=>{e.call(c.context,new rf(this.database,_),w)};d.userCallback=e,d.context=c.context;const p=null===(s=c.cancel)||void 0===s?void 0:s.bind(c.context);switch(t){case"value":return nL(this._delegate,d,p),e;case"child_added":return Hz(this._delegate,d,p),e;case"child_removed":return Gz(this._delegate,d,p),e;case"child_changed":return jz(this._delegate,d,p),e;case"child_moved":return $z(this._delegate,d,p),e;default:throw new Error((0,F.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,e,i){if((0,F.Dv)("Query.off",0,3,arguments.length),function(n,t,e){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,F.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,t),(0,F.Wj)("Query.off","callback",e,!0),(0,F.lb)("Query.off","context",i,!0),e){const r=()=>{};r.userCallback=e,r.context=i,zz(this._delegate,t,r)}else zz(this._delegate,t)}get(){return XJ(this._delegate).then(t=>new rf(this.database,t))}once(t,e,i,r){(0,F.Dv)("Query.once",1,4,arguments.length),(0,F.Wj)("Query.once","callback",e,!0);const s=ts.getCancelAndContextArgs_("Query.once",i,r),c=new F.BH,d=(_,w)=>{const I=new rf(this.database,_);e&&e.call(s.context,I,w),c.resolve(I)};d.userCallback=e,d.context=s.context;const p=_=>{s.cancel&&s.cancel.call(s.context,_),c.reject(_)};switch(t){case"value":nL(this._delegate,d,p,{onlyOnce:!0});break;case"child_added":Hz(this._delegate,d,p,{onlyOnce:!0});break;case"child_removed":Gz(this._delegate,d,p,{onlyOnce:!0});break;case"child_changed":jz(this._delegate,d,p,{onlyOnce:!0});break;case"child_moved":$z(this._delegate,d,p,{onlyOnce:!0});break;default:throw new Error((0,F.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(t){return(0,F.Dv)("Query.limitToFirst",1,1,arguments.length),new ts(this.database,uc(this._delegate,function oee(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new see(n)}(t)))}limitToLast(t){return(0,F.Dv)("Query.limitToLast",1,1,arguments.length),new ts(this.database,uc(this._delegate,function lee(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new aee(n)}(t)))}orderByChild(t){return(0,F.Dv)("Query.orderByChild",1,1,arguments.length),new ts(this.database,uc(this._delegate,function uee(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return gC("orderByChild","path",n,!1),new cee(n)}(t)))}orderByKey(){return(0,F.Dv)("Query.orderByKey",0,0,arguments.length),new ts(this.database,uc(this._delegate,function hee(){return new dee}()))}orderByPriority(){return(0,F.Dv)("Query.orderByPriority",0,0,arguments.length),new ts(this.database,uc(this._delegate,function pee(){return new fee}()))}orderByValue(){return(0,F.Dv)("Query.orderByValue",0,0,arguments.length),new ts(this.database,uc(this._delegate,function gee(){return new mee}()))}startAt(t=null,e){return(0,F.Dv)("Query.startAt",0,2,arguments.length),new ts(this.database,uc(this._delegate,function nee(n=null,t){return mC("startAt","key",t,!0),new Wz(n,t)}(t,e)))}startAfter(t=null,e){return(0,F.Dv)("Query.startAfter",0,2,arguments.length),new ts(this.database,uc(this._delegate,function ree(n,t){return mC("startAfter","key",t,!0),new iee(n,t)}(t,e)))}endAt(t=null,e){return(0,F.Dv)("Query.endAt",0,2,arguments.length),new ts(this.database,uc(this._delegate,function JJ(n,t){return mC("endAt","key",t,!0),new qz(n,t)}(t,e)))}endBefore(t=null,e){return(0,F.Dv)("Query.endBefore",0,2,arguments.length),new ts(this.database,uc(this._delegate,function tee(n,t){return mC("endBefore","key",t,!0),new eee(n,t)}(t,e)))}equalTo(t,e){return(0,F.Dv)("Query.equalTo",1,2,arguments.length),new ts(this.database,uc(this._delegate,function yee(n,t){return mC("equalTo","key",t,!0),new _ee(n,t)}(t,e)))}toString(){return(0,F.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,F.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if((0,F.Dv)("Query.isEqual",1,1,arguments.length),!(t instanceof ts))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,e,i){const r={cancel:void 0,context:void 0};if(e&&i)r.cancel=e,(0,F.Wj)(t,"cancel",r.cancel,!0),r.context=i,(0,F.lb)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error((0,F.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r}get ref(){return new ia(this.database,new sl(this._delegate._repo,this._delegate._path))}}class ia extends ts{constructor(t,e){super(t,new bo(e._repo,e._path,new pA,!1)),this.database=t,this._delegate=e}getKey(){return(0,F.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return(0,F.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new ia(this.database,fm(this._delegate,t))}getParent(){(0,F.Dv)("Reference.parent",0,0,arguments.length);const t=this._delegate.parent;return t?new ia(this.database,t):null}getRoot(){return(0,F.Dv)("Reference.root",0,0,arguments.length),new ia(this.database,this._delegate.root)}set(t,e){(0,F.Dv)("Reference.set",1,2,arguments.length),(0,F.Wj)("Reference.set","onComplete",e,!0);const i=tL(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}update(t,e){if((0,F.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){const r={};for(let s=0;s<t.length;++s)r[""+s]=t[s];t=r,Qz("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}rl("Reference.update",this._delegate._path),(0,F.Wj)("Reference.update","onComplete",e,!0);const i=QJ(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){(0,F.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,F.Wj)("Reference.setWithPriority","onComplete",i,!0);const r=function KJ(n,t,e){if(rl("setWithPriority",n._path),su("setWithPriority",t,n._path,!1),qF("setWithPriority",e,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const i=new F.BH;return YF(n._repo,n._path,t,e,i.wrapCallback(()=>{})),i.promise}(this._delegate,t,e);return i&&r.then(()=>i(null),s=>i(s)),r}remove(t){(0,F.Dv)("Reference.remove",0,1,arguments.length),(0,F.Wj)("Reference.remove","onComplete",t,!0);const e=function YJ(n){return rl("remove",n._path),tL(n,null)}(this._delegate);return t&&e.then(()=>t(null),i=>t(i)),e}transaction(t,e,i){(0,F.Dv)("Reference.transaction",1,3,arguments.length),(0,F.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,F.Wj)("Reference.transaction","onComplete",e,!0),function(n,t,e,i){if(void 0!==e&&"boolean"!=typeof e)throw new Error((0,F.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,i);const r=function Fee(n,t,e){var i;if(n=(0,F.m9)(n),rl("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const r=null===(i=e?.applyLocally)||void 0===i||i,s=new F.BH,d=nL(n,()=>{});return function HJ(n,t,e,i,r,s){ay(n,"transaction on "+t);const c={path:t,update:e,onComplete:i,status:null,order:q$(),applyLocally:s,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},d=KF(n,t,void 0);c.currentInputSnapshot=d;const p=c.update(d.val());if(void 0===p)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{pC("transaction failed: Data returned ",p,c.path),c.status=0;const _=xA(n.transactionQueueTree_,t),w=dm(_)||[];let I;w.push(c),$F(_,w),"object"==typeof p&&null!==p&&(0,F.r3)(p,".priority")?(I=(0,F.DV)(p,".priority"),(0,F.hu)(fC(I),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):I=(MA(n.serverSyncTree_,t)||Qt.EMPTY_NODE).getPriority().val();const M=_C(n),O=Mi(p,I),N=UF(O,d,M);c.currentOutputSnapshotRaw=O,c.currentOutputSnapshotResolved=N,c.currentWriteId=NA(n);const z=OF(n.serverSyncTree_,t,N,c.currentWriteId,c.applyLocally);na(n.eventQueue_,t,z),FA(n,n.transactionQueueTree_)}}(n._repo,n._path,t,(p,_,w)=>{let I=null;p?s.reject(p):(I=new hm(w,new sl(n._repo,n._path),ri),s.resolve(new Nee(_,I)))},d,r),s.promise}(this._delegate,t,{applyLocally:i}).then(s=>new $ee(s.committed,new rf(this.database,s.snapshot)));return e&&r.then(s=>e(null,s.committed,s.snapshot),s=>e(s,!1,null)),r}setPriority(t,e){(0,F.Dv)("Reference.setPriority",1,2,arguments.length),(0,F.Wj)("Reference.setPriority","onComplete",e,!0);const i=function ZJ(n,t){n=(0,F.m9)(n),rl("setPriority",n._path),qF("setPriority",t,!1);const e=new F.BH;return YF(n._repo,Ei(n._path,".priority"),t,null,e.wrapCallback(()=>{})),e.promise}(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}push(t,e){(0,F.Dv)("Reference.push",0,2,arguments.length),(0,F.Wj)("Reference.push","onComplete",e,!0);const i=function WJ(n,t){n=(0,F.m9)(n),rl("push",n._path),su("push",t,n._path,!0);const e=Az(n._repo),i=iX(e),r=fm(n,i),s=fm(n,i);let c;return c=null!=t?tL(s,t).then(()=>s):Promise.resolve(s),r.then=c.then.bind(c),r.catch=c.then.bind(c,void 0),r}(this._delegate,t),r=i.then(c=>new ia(this.database,c));e&&r.then(()=>e(null),c=>e(c));const s=new ia(this.database,i);return s.then=r.then.bind(r),s.catch=r.catch.bind(r,void 0),s}onDisconnect(){return rl("Reference.onDisconnect",this._delegate._path),new jee(new Vz(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class bC{constructor(t,e){this._delegate=t,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Iee,forceLongPolling:See}}useEmulator(t,e,i={}){!function Tee(n,t,e,i={}){(n=(0,F.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&nu("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&nu('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Q0(Q0.OWNER);else if(i.mockUserToken){const c="string"==typeof i.mockUserToken?i.mockUserToken:(0,F.Sg)(i.mockUserToken,n.app.options.projectId);s=new Q0(c)}!function bee(n,t,e,i){n.repoInfo_=new eF(`${t}:${e}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),i&&(n.authTokenProvider_=i)}(r,t,e,s)}(this._delegate,t,e,i)}ref(t){if((0,F.Dv)("database.ref",0,1,arguments.length),t instanceof ia){const e=Uz(this._delegate,t.toString());return new ia(this,e)}{const e=Bz(this._delegate,t);return new ia(this,e)}}refFromURL(t){(0,F.Dv)("database.refFromURL",1,1,arguments.length);const i=Uz(this._delegate,t);return new ia(this,i)}goOffline(){return(0,F.Dv)("database.goOffline",0,0,arguments.length),function Aee(n){(n=(0,F.m9)(n))._checkNotDeleted("goOffline"),Rz(n._repo)}(this._delegate)}goOnline(){return(0,F.Dv)("database.goOnline",0,0,arguments.length),function Mee(n){(n=(0,F.m9)(n))._checkNotDeleted("goOnline"),function UJ(n){n.persistentConnection_&&n.persistentConnection_.resume(Tz)}(n._repo)}(this._delegate)}}bC.ServerValue={TIMESTAMP:function Oee(){return Ree}(),increment:n=>function Pee(n){return{".sv":{increment:n}}}(n)};var zee=Object.freeze({__proto__:null,initStandalone:function Gee({app:n,url:t,version:e,customAuthImpl:i,namespace:r,nodeAdmin:s=!1}){G$(e);const c=new nc.zt("auth-internal",new nc.H0("database-standalone"));return c.setComponent(new nc.wA("auth-internal",()=>i,"PRIVATE")),{instance:new bC(Zz(n,c,void 0,t,s),n),namespace:r}}});const qee=bC.ServerValue;function Xz(n){return null==n}function Jz(n){return"function"==typeof n.set}function eq(n,t){return Jz(t)?t:n.ref(t)}function tq(n,t){if(function Yee(n){return"string"==typeof n}(n))return t.stringCase();if(Jz(n))return t.firebaseCase();if(function Zee(n){return"function"==typeof n.exportVal}(n))return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function wC(n,t,e="on",i=Nc.z){return new Zi.y(r=>{let s=null;return s=n[e](t,(c,d)=>{i.schedule(()=>{r.next({snapshot:c,prevKey:d})}),"once"===e&&i.schedule(()=>r.complete())},c=>{i.schedule(()=>r.error(c))}),"on"===e?{unsubscribe(){null!=s&&n.off(t,s)}}:{unsubscribe(){}}}).pipe((0,ct.U)(r=>{const{snapshot:s,prevKey:c}=r;let d=null;return s.exists()&&(d=s.key),{type:t,payload:s,prevKey:c,key:d}}),(0,Kg.B)())}function nq(n,t){const e=n.length;for(let i=0;i<e;i++)if(n[i].payload.key===t)return i;return-1}function Xee(n,t){const{payload:e,prevKey:i,key:r}=t,s=nq(n,r),c=function Qee(n,t){if(Xz(t))return 0;{const e=nq(n,t);return-1===e?n.length:e+1}}(n,i);switch(t.type){case"value":if(t.payload&&t.payload.exists()){let d=null;t.payload.forEach(p=>{const _={payload:p,type:"value",prevKey:d,key:p.key};return d=p.key,n=[...n,_],!1})}return n;case"child_added":if(s>-1){const d=n[s-1];(d&&d.key||null)!==i&&(n=n.filter(p=>p.payload.key!==e.key)).splice(c,0,t)}else{if(null==i)return[t,...n];(n=n.slice()).splice(c,0,t)}return n;case"child_removed":return n.filter(d=>d.payload.key!==e.key);case"child_changed":return n.map(d=>d.payload.key===r?t:d);case"child_moved":if(s>-1){const d=n.splice(s,1)[0];return(n=n.slice()).splice(c,0,d),n}return n;default:return n}}function iq(n){return(Xz(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function rq(n,t,e){return function Kee(n,t,e){return wC(n,"value","once",e).pipe(Kn(i=>{const r=[et(i)];return t.forEach(s=>r.push(wC(n,s,"on",e))),(0,fs.T)(...r).pipe(Ip(Xee,[]))}),Zd())}(n,t=iq(t),e)}function sq(n,t,e){const i=(t=iq(t)).map(r=>wC(n,r,"on",e));return(0,fs.T)(...i)}function oq(n,t){return function(i,r){return tq(i,{stringCase:()=>n.child(i)[t](r),firebaseCase:()=>i[t](r),snapshotCase:()=>i.ref[t](r)})}}function nte(n){return function(e){return e?tq(e,{stringCase:()=>n.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):n.remove()}}function aq(n,t){return function(){return wC(n,"value","on",t)}}!function Wee(n){n.INTERNAL.registerComponent(new nc.wA("database-compat",(t,{instanceIdentifier:e})=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("database").getImmediate({identifier:e});return new bC(r,i)},"PUBLIC").setServiceProps({Reference:ia,Query:ts,Database:bC,DataSnapshot:rf,enableLogging:kee,INTERNAL:zee,ServerValue:qee}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.6")}(VO.Z);const ste=new l.OlP("angularfire2.realtimeDatabaseURL"),ote=new l.OlP("angularfire2.database.use-emulator");let ate=(()=>{class n{constructor(e,i,r,s,c,d,p,_,w,I,M,O,N,z,ie){this.schedulers=d;const Me=p,ze=(0,wr.on)(e,c,i);_&&LO(ze,c,w,M,O,N,I,z),this.database=(0,wr.cc)(`${ze.name}.database.${r}`,"AngularFireDatabase",ze.name,()=>{const Xe=c.runOutsideAngular(()=>ze.database(r||void 0));return Me&&Xe.useEmulator(...Me),Xe},[Me])}list(e,i){const r=this.schedulers.ngZone.runOutsideAngular(()=>eq(this.database,e));let s=r;return i&&(s=i(r)),function ite(n,t){const e=t.schedulers.outsideAngular,i=t.schedulers.ngZone.run(()=>n.ref);return{query:n,update:oq(i,"update"),set:oq(i,"set"),push:r=>i.push(r),remove:nte(i),snapshotChanges:r=>rq(n,r,e).pipe(Tn.iC),stateChanges:r=>sq(n,r,e).pipe(Tn.iC),auditTrail:r=>function Jee(n,t,e){return function tte(n,t,e){return function ete(n,t){return wC(n,"value","on",t).pipe((0,ct.U)(e=>{let i;return e.payload.forEach(r=>(i=r.key,!1)),{data:e,lastKeyToLoad:i}}))}(n,e).pipe(function J9(...n){const t=(0,xs.jO)(n);return(0,_i.e)((e,i)=>{const r=n.length,s=new Array(r);let c=n.map(()=>!1),d=!1;for(let p=0;p<r;p++)(0,Hl.Xf)(n[p]).subscribe((0,Zn.x)(i,_=>{s[p]=_,!d&&!c[p]&&(c[p]=!0,(d=c.every(Yd.y))&&(c=null))},jl.Z));e.subscribe((0,Zn.x)(i,p=>{if(d){const _=[p,...s];i.next(t?t(..._):_)}}))})}(t),(0,ct.U)(([r,s])=>{const c=r.lastKeyToLoad,d=s.map(p=>p.key);return{actions:s,lastKeyToLoad:c,loadedKeys:d}}),function eQ(n){return(0,_i.e)((t,e)=>{let i=!1,r=0;t.subscribe((0,Zn.x)(e,s=>(i||(i=!n(s,r++)))&&e.next(s)))})}(r=>-1===r.loadedKeys.indexOf(r.lastKeyToLoad)),(0,ct.U)(r=>r.actions))}(n,sq(n,t).pipe(Ip((r,s)=>[...r,s],[])),e)}(n,r,e).pipe(Tn.iC),valueChanges:(r,s)=>rq(n,r,e).pipe((0,ct.U)(d=>d.map(p=>s&&s.idField?Object.assign(Object.assign({},p.payload.val()),{[s.idField]:p.key}):p.payload.val())),Tn.iC)}}(s,this)}object(e){return function rte(n,t){return{query:n,snapshotChanges:()=>aq(n,t.schedulers.outsideAngular)().pipe(Tn.iC),update:e=>n.ref.update(e),set:e=>n.ref.set(e),remove:()=>n.ref.remove(),valueChanges:()=>aq(n,t.schedulers.outsideAngular)().pipe(Tn.iC,(0,ct.U)(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>eq(this.database,e)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(wr.Dh),l.LFG(wr.xv,8),l.LFG(ste,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(Tn.HU),l.LFG(ote,8),l.LFG(Lw,8),l.LFG(xO,8),l.LFG(RO,8),l.LFG(OO,8),l.LFG(PO,8),l.LFG(NO,8),l.LFG(FO,8),l.LFG(Fw,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),lte=(()=>{class n{constructor(){NS.Z.registerVersion("angularfire",Tn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[ate]}),n})();var cte=L(9635);function rL(){return(0,_i.e)((n,t)=>{let e=null;n._refCount++;const i=(0,Zn.x)(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(e=null);const r=n._connection,s=e;e=null,r&&(!s||r===s)&&r.unsubscribe(),t.unsubscribe()});n.subscribe(i),i.closed||(e=n.connect())})}class lq extends Zi.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,(0,_i.A)(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Sn.w0;const e=this.getSubject();t.add(this.source.subscribe((0,Zn.x)(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Sn.w0.EMPTY)}return t}refCount(){return rL()(this)}}function sL(n){return n<=0?()=>Ul.E:(0,_i.e)((t,e)=>{let i=[];t.subscribe((0,Zn.x)(e,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function cq(n,t){const e=arguments.length>=2;return i=>i.pipe(n?yi((r,s)=>n(r,s,i)):Yd.y,sL(1),e?SS(t):YB(()=>new IS))}const sn="primary",CC=Symbol("RouteTitle");class ute{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function cy(n){return new ute(n)}function dte(n,t,e){const i=e.path.split("/");if(i.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const c=i[s],d=n[s];if(c.startsWith(":"))r[c.substring(1)]=d;else if(c!==d.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function ou(n,t){const e=n?Object.keys(n):void 0,i=t?Object.keys(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!uq(n[r],t[r]))return!1;return!0}function uq(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),i=[...t].sort();return e.every((r,s)=>i[s]===r)}return n===t}function dq(n){return Array.prototype.concat.apply([],n)}function hq(n){return n.length>0?n[n.length-1]:null}function ns(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function sf(n){return(0,l.CqO)(n)?n:(0,l.QGY)(n)?(0,mn.D)(Promise.resolve(n)):et(n)}const pte={exact:function mq(n,t,e){if(!mm(n.segments,t.segments)||!HA(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const i in t.children)if(!n.children[i]||!mq(n.children[i],t.children[i],e))return!1;return!0},subset:gq},fq={exact:function mte(n,t){return ou(n,t)},subset:function gte(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>uq(n[e],t[e]))},ignored:()=>!0};function pq(n,t,e){return pte[e.paths](n.root,t.root,e.matrixParams)&&fq[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function gq(n,t,e){return _q(n,t,t.segments,e)}function _q(n,t,e,i){if(n.segments.length>e.length){const r=n.segments.slice(0,e.length);return!(!mm(r,e)||t.hasChildren()||!HA(r,e,i))}if(n.segments.length===e.length){if(!mm(n.segments,e)||!HA(n.segments,e,i))return!1;for(const r in t.children)if(!n.children[r]||!gq(n.children[r],t.children[r],i))return!1;return!0}{const r=e.slice(0,n.segments.length),s=e.slice(n.segments.length);return!!(mm(n.segments,r)&&HA(n.segments,r,i)&&n.children[sn])&&_q(n.children[sn],t,s,i)}}function HA(n,t,e){return t.every((i,r)=>fq[e](n[r].parameters,i.parameters))}class pm{constructor(t,e,i){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=cy(this.queryParams)),this._queryParamMap}toString(){return vte.serialize(this)}}class hn{constructor(t,e){this.segments=t,this.children=e,this.parent=null,ns(e,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return jA(this)}}class EC{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=cy(this.parameters)),this._parameterMap}toString(){return wq(this)}}function mm(n,t){return n.length===t.length&&n.every((e,i)=>e.path===t[i].path)}let yq=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return new aL},providedIn:"root"}),n})();class aL{parse(t){const e=new Ate(t);return new pm(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${DC(t.root,!0)}`,i=function Cte(n){const t=Object.keys(n).map(e=>{const i=n[e];return Array.isArray(i)?i.map(r=>`${$A(e)}=${$A(r)}`).join("&"):`${$A(e)}=${$A(i)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams),r="string"==typeof t.fragment?`#${function bte(n){return encodeURI(n)}(t.fragment)}`:"";return`${e}${i}${r}`}}const vte=new aL;function jA(n){return n.segments.map(t=>wq(t)).join("/")}function DC(n,t){if(!n.hasChildren())return jA(n);if(t){const e=n.children[sn]?DC(n.children[sn],!1):"",i=[];return ns(n.children,(r,s)=>{s!==sn&&i.push(`${s}:${DC(r,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function yte(n,t){let e=[];return ns(n.children,(i,r)=>{r===sn&&(e=e.concat(t(i,r)))}),ns(n.children,(i,r)=>{r!==sn&&(e=e.concat(t(i,r)))}),e}(n,(i,r)=>r===sn?[DC(n.children[sn],!1)]:[`${r}:${DC(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[sn]?`${jA(n)}/${e[0]}`:`${jA(n)}/(${e.join("//")})`}}function vq(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function $A(n){return vq(n).replace(/%3B/gi,";")}function lL(n){return vq(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function GA(n){return decodeURIComponent(n)}function bq(n){return GA(n.replace(/\+/g,"%20"))}function wq(n){return`${lL(n.path)}${function wte(n){return Object.keys(n).map(t=>`;${lL(t)}=${lL(n[t])}`).join("")}(n.parameters)}`}const Ete=/^[^\/()?;=#]+/;function zA(n){const t=n.match(Ete);return t?t[0]:""}const Dte=/^[^=?&#]+/,Ste=/^[^&#]+/;class Ate{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new hn([],{}):new hn([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[sn]=new hn(t,e)),i}parseSegment(){const t=zA(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new l.vHH(4009,!1);return this.capture(t),new EC(GA(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=zA(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const r=zA(this.remaining);r&&(i=r,this.capture(i))}t[GA(e)]=GA(i)}parseQueryParam(t){const e=function Ite(n){const t=n.match(Dte);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const c=function Tte(n){const t=n.match(Ste);return t?t[0]:""}(this.remaining);c&&(i=c,this.capture(i))}const r=bq(e),s=bq(i);if(t.hasOwnProperty(r)){let c=t[r];Array.isArray(c)||(c=[c],t[r]=c),c.push(s)}else t[r]=s}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=zA(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new l.vHH(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=sn);const c=this.parseChildren();e[s]=1===Object.keys(c).length?c[sn]:new hn([],c),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new l.vHH(4011,!1)}}function cL(n){return n.segments.length>0?new hn([],{[sn]:n}):n}function qA(n){const t={};for(const i of Object.keys(n.children)){const s=qA(n.children[i]);(s.segments.length>0||s.hasChildren())&&(t[i]=s)}return function Mte(n){if(1===n.numberOfChildren&&n.children[sn]){const t=n.children[sn];return new hn(n.segments.concat(t.segments),t.children)}return n}(new hn(n.segments,t))}function gm(n){return n instanceof pm}function Rte(n,t,e,i,r){if(0===e.length)return uy(t.root,t.root,t.root,i,r);const s=function Dq(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Eq(!0,0,n);let t=0,e=!1;const i=n.reduce((r,s,c)=>{if("object"==typeof s&&null!=s){if(s.outlets){const d={};return ns(s.outlets,(p,_)=>{d[_]="string"==typeof p?p.split("/"):p}),[...r,{outlets:d}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===c?(s.split("/").forEach((d,p)=>{0==p&&"."===d||(0==p&&""===d?e=!0:".."===d?t++:""!=d&&r.push(d))}),r):[...r,s]},[]);return new Eq(e,t,i)}(e);return s.toRoot()?uy(t.root,t.root,new hn([],{}),i,r):function c(p){const _=function Pte(n,t,e,i){if(n.isAbsolute)return new dy(t.root,!0,0);if(-1===i)return new dy(e,e===t.root,0);return function Iq(n,t,e){let i=n,r=t,s=e;for(;s>r;){if(s-=r,i=i.parent,!i)throw new l.vHH(4005,!1);r=i.segments.length}return new dy(i,!1,r-s)}(e,i+(IC(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,t,n.snapshot?._urlSegment,p),w=_.processChildren?TC(_.segmentGroup,_.index,s.commands):dL(_.segmentGroup,_.index,s.commands);return uy(t.root,_.segmentGroup,w,i,r)}(n.snapshot?._lastPathIndex)}function IC(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function SC(n){return"object"==typeof n&&null!=n&&n.outlets}function uy(n,t,e,i,r){let c,s={};i&&ns(i,(p,_)=>{s[_]=Array.isArray(p)?p.map(w=>`${w}`):`${p}`}),c=n===t?e:Cq(n,t,e);const d=cL(qA(c));return new pm(d,s,r)}function Cq(n,t,e){const i={};return ns(n.children,(r,s)=>{i[s]=r===t?e:Cq(r,t,e)}),new hn(n.segments,i)}class Eq{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&IC(i[0]))throw new l.vHH(4003,!1);const r=i.find(SC);if(r&&r!==hq(i))throw new l.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class dy{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}}function dL(n,t,e){if(n||(n=new hn([],{})),0===n.segments.length&&n.hasChildren())return TC(n,t,e);const i=function Fte(n,t,e){let i=0,r=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return s;const c=n.segments[r],d=e[i];if(SC(d))break;const p=`${d}`,_=i<e.length-1?e[i+1]:null;if(r>0&&void 0===p)break;if(p&&_&&"object"==typeof _&&void 0===_.outlets){if(!Tq(p,_,c))return s;i+=2}else{if(!Tq(p,{},c))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new hn(n.segments.slice(0,i.pathIndex),{});return s.children[sn]=new hn(n.segments.slice(i.pathIndex),n.children),TC(s,0,r)}return i.match&&0===r.length?new hn(n.segments,{}):i.match&&!n.hasChildren()?hL(n,t,e):i.match?TC(n,0,r):hL(n,t,e)}function TC(n,t,e){if(0===e.length)return new hn(n.segments,{});{const i=function Nte(n){return SC(n[0])?n[0].outlets:{[sn]:n}}(e),r={};return ns(i,(s,c)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[c]=dL(n.children[c],t,s))}),ns(n.children,(s,c)=>{void 0===i[c]&&(r[c]=s)}),new hn(n.segments,r)}}function hL(n,t,e){const i=n.segments.slice(0,t);let r=0;for(;r<e.length;){const s=e[r];if(SC(s)){const p=Lte(s.outlets);return new hn(i,p)}if(0===r&&IC(e[0])){i.push(new EC(n.segments[t].path,Sq(e[0]))),r++;continue}const c=SC(s)?s.outlets[sn]:`${s}`,d=r<e.length-1?e[r+1]:null;c&&d&&IC(d)?(i.push(new EC(c,Sq(d))),r+=2):(i.push(new EC(c,{})),r++)}return new hn(i,{})}function Lte(n){const t={};return ns(n,(e,i)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[i]=hL(new hn([],{}),0,e))}),t}function Sq(n){const t={};return ns(n,(e,i)=>t[i]=`${e}`),t}function Tq(n,t,e){return n==e.path&&ou(t,e.parameters)}class md{constructor(t,e){this.id=t,this.url=e}}class fL extends md{constructor(t,e,i="imperative",r=null){super(t,e),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class _m extends md{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class WA extends md{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Aq extends md{constructor(t,e,i,r){super(t,e),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Vte extends md{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Bte extends md{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ute extends md{constructor(t,e,i,r,s){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Hte extends md{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jte extends md{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $te{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Gte{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class zte{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qte{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Wte{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Yte{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mq{constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class kq{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=pL(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){const e=pL(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=mL(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return mL(t,this._root).map(e=>e.value)}}function pL(n,t){if(n===t.value)return t;for(const e of t.children){const i=pL(n,e);if(i)return i}return null}function mL(n,t){if(n===t.value)return[t];for(const e of t.children){const i=mL(n,e);if(i.length)return i.unshift(t),i}return[]}class gd{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function hy(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class xq extends kq{constructor(t,e){super(t),this.snapshot=e,gL(this,t)}toString(){return this.snapshot.toString()}}function Rq(n,t){const e=function Kte(n,t){const c=new YA([],{},{},"",{},sn,t,null,n.root,-1,{});return new Pq("",new gd(c,[]))}(n,t),i=new Ai([new EC("",{})]),r=new Ai({}),s=new Ai({}),c=new Ai({}),d=new Ai(""),p=new af(i,r,c,d,s,sn,t,e.root);return p.snapshot=e.root,new xq(new gd(p,[]),e)}class af{constructor(t,e,i,r,s,c,d,p){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=c,this.component=d,this.title=this.data?.pipe((0,ct.U)(_=>_[CC]))??et(void 0),this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ct.U)(t=>cy(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ct.U)(t=>cy(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Oq(n,t="emptyOnly"){const e=n.pathFromRoot;let i=0;if("always"!==t)for(i=e.length-1;i>=1;){const r=e[i],s=e[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function Qte(n){return n.reduce((t,e)=>({params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(i))}class YA{constructor(t,e,i,r,s,c,d,p,_,w,I,M){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=c,this.component=d,this.title=this.data?.[CC],this.routeConfig=p,this._urlSegment=_,this._lastPathIndex=w,this._correctedLastPathIndex=M??w,this._resolve=I}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=cy(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=cy(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Pq extends kq{constructor(t,e){super(e),this.url=t,gL(this,e)}toString(){return Nq(this._root)}}function gL(n,t){t.value._routerState=n,t.children.forEach(e=>gL(n,e))}function Nq(n){const t=n.children.length>0?` { ${n.children.map(Nq).join(", ")} } `:"";return`${n.value}${t}`}function _L(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,ou(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),ou(t.params,e.params)||n.params.next(e.params),function hte(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!ou(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),ou(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function yL(n,t){const e=ou(n.params,t.params)&&function _te(n,t){return mm(n,t)&&n.every((e,i)=>ou(e.parameters,t[i].parameters))}(n.url,t.url);return e&&!(!n.parent!=!t.parent)&&(!n.parent||yL(n.parent,t.parent))}function AC(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=t.value;const r=function Jte(n,t,e){return t.children.map(i=>{for(const r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return AC(n,i,r);return AC(n,i)})}(n,t,e);return new gd(i,r)}{if(n.shouldAttach(t.value)){const s=n.retrieve(t.value);if(null!==s){const c=s.route;return c.value._futureSnapshot=t.value,c.children=t.children.map(d=>AC(n,d)),c}}const i=function ene(n){return new af(new Ai(n.url),new Ai(n.params),new Ai(n.queryParams),new Ai(n.fragment),new Ai(n.data),n.outlet,n.component,n)}(t.value),r=t.children.map(s=>AC(n,s));return new gd(i,r)}}const vL="ngNavigationCancelingError";function Fq(n,t){const{redirectTo:e,navigationBehaviorOptions:i}=gm(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=Lq(!1,0,t);return r.url=e,r.navigationBehaviorOptions=i,r}function Lq(n,t,e){const i=new Error("NavigationCancelingError: "+(n||""));return i[vL]=!0,i.cancellationCode=t,e&&(i.url=e),i}function Vq(n){return Bq(n)&&gm(n.url)}function Bq(n){return n&&n[vL]}class tne{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new MC,this.attachRef=null}}let MC=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(e,i){const r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){const i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new tne,this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ZA=!1;let bL=(()=>{class n{constructor(e,i,r,s,c){this.parentContexts=e,this.location=i,this.changeDetector=s,this.environmentInjector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new l.vpe,this.deactivateEvents=new l.vpe,this.attachEvents=new l.vpe,this.detachEvents=new l.vpe,this.name=r||sn,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new l.vHH(4012,ZA);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new l.vHH(4012,ZA);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new l.vHH(4012,ZA);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new l.vHH(4013,ZA);this._activatedRoute=e;const r=this.location,c=e._futureSnapshot.component,d=this.parentContexts.getOrCreateContext(this.name).children,p=new nne(e,d,r.injector);if(i&&function ine(n){return!!n.resolveComponentFactory}(i)){const _=i.resolveComponentFactory(c);this.activated=r.createComponent(_,r.length,p)}else this.activated=r.createComponent(c,{index:r.length,injector:p,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(MC),l.Y36(l.s_b),l.$8M("name"),l.Y36(l.sBO),l.Y36(l.lqb))},n.\u0275dir=l.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class nne{constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===af?this.route:t===MC?this.childContexts:this.parent.get(t,e)}}let wL=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[l.jDz],decls:1,vars:0,template:function(e,i){1&e&&l._UZ(0,"router-outlet")},dependencies:[bL],encapsulation:2}),n})();function Uq(n,t){return n.providers&&!n._injector&&(n._injector=(0,l.MMx)(n.providers,t,`Route: ${n.path}`)),n._injector??t}function EL(n){const t=n.children&&n.children.map(EL),e=t?{...n,children:t}:{...n};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==sn&&(e.component=wL),e}function ol(n){return n.outlet||sn}function Hq(n,t){const e=n.filter(i=>ol(i)===t);return e.push(...n.filter(i=>ol(i)!==t)),e}function kC(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class lne{constructor(t,e,i,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r}activate(t){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),_L(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){const r=hy(e);t.children.forEach(s=>{const c=s.value.outlet;this.deactivateRoutes(s,r[c],i),delete r[c]}),ns(r,(s,c)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(r===s)if(r.component){const c=i.getContext(r.outlet);c&&this.deactivateChildRoutes(t,e,c.children)}else this.deactivateChildRoutes(t,e,i);else s&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=hy(t);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],r);if(i&&i.outlet){const c=i.outlet.detach(),d=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:c,route:t,contexts:d})}}deactivateRouteAndOutlet(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=hy(t);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(t,e,i){const r=hy(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new Yte(s.value.snapshot))}),t.children.length&&this.forwardEvent(new qte(t.value.snapshot))}activateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(_L(r),r===s)if(r.component){const c=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,c.children)}else this.activateChildRoutes(t,e,i);else if(r.component){const c=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const d=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),c.children.onOutletReAttached(d.contexts),c.attachRef=d.componentRef,c.route=d.route.value,c.outlet&&c.outlet.attach(d.componentRef,d.route.value),_L(d.route.value),this.activateChildRoutes(t,null,c.children)}else{const d=kC(r.snapshot),p=d?.get(l._Vd)??null;c.attachRef=null,c.route=r,c.resolver=p,c.injector=d,c.outlet&&c.outlet.activateWith(r,c.injector),this.activateChildRoutes(t,null,c.children)}}else this.activateChildRoutes(t,null,i)}}class jq{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class KA{constructor(t,e){this.component=t,this.route=e}}function cne(n,t,e){const i=n._root;return xC(i,t?t._root:null,e,[i.value])}function fy(n,t){const e=Symbol(),i=t.get(n,e);return i===e?"function"!=typeof n||(0,l.Z0I)(n)?t.get(n):n:i}function xC(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=hy(t);return n.children.forEach(c=>{(function dne(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,c=t?t.value:null,d=e?e.getContext(n.value.outlet):null;if(c&&s.routeConfig===c.routeConfig){const p=function hne(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!mm(n.url,t.url);case"pathParamsOrQueryParamsChange":return!mm(n.url,t.url)||!ou(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!yL(n,t)||!ou(n.queryParams,t.queryParams);default:return!yL(n,t)}}(c,s,s.routeConfig.runGuardsAndResolvers);p?r.canActivateChecks.push(new jq(i)):(s.data=c.data,s._resolvedData=c._resolvedData),xC(n,t,s.component?d?d.children:null:e,i,r),p&&d&&d.outlet&&d.outlet.isActivated&&r.canDeactivateChecks.push(new KA(d.outlet.component,c))}else c&&RC(t,d,r),r.canActivateChecks.push(new jq(i)),xC(n,null,s.component?d?d.children:null:e,i,r)})(c,s[c.value.outlet],e,i.concat([c.value]),r),delete s[c.value.outlet]}),ns(s,(c,d)=>RC(c,e.getContext(d),r)),r}function RC(n,t,e){const i=hy(n),r=n.value;ns(i,(s,c)=>{RC(s,r.component?t?t.children.getContext(c):null:t,e)}),e.canDeactivateChecks.push(new KA(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}function OC(n){return"function"==typeof n}function DL(n){return n instanceof IS||"EmptyError"===n?.name}const QA=Symbol("INITIAL_VALUE");function py(){return Kn(n=>Mu(n.map(t=>t.pipe(ni(1),yr(QA)))).pipe((0,ct.U)(t=>{for(const e of t)if(!0!==e){if(e===QA)return QA;if(!1===e||e instanceof pm)return e}return!0}),yi(t=>t!==QA),ni(1)))}function $q(n){return(0,cte.z)((0,Yn.b)(t=>{if(gm(t))throw Fq(0,t)}),(0,ct.U)(t=>!0===t))}const IL={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Gq(n,t,e,i,r){const s=SL(n,t,e);return s.matched?function Mne(n,t,e,i){const r=t.canMatch;return r&&0!==r.length?et(r.map(c=>{const d=fy(c,n);return sf(function yne(n){return n&&OC(n.canMatch)}(d)?d.canMatch(t,e):n.runInContext(()=>d(t,e)))})).pipe(py(),$q()):et(!0)}(i=Uq(t,i),t,e).pipe((0,ct.U)(c=>!0===c?s:{...IL})):et(s)}function SL(n,t,e){if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?{...IL}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const r=(t.matcher||dte)(e,n,t);if(!r)return{...IL};const s={};ns(r.posParams,(d,p)=>{s[p]=d.path});const c=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:c,positionalParamSegments:r.posParams??{}}}function XA(n,t,e,i,r="corrected"){if(e.length>0&&function Rne(n,t,e){return e.some(i=>JA(n,t,i)&&ol(i)!==sn)}(n,e,i)){const c=new hn(t,function xne(n,t,e,i){const r={};r[sn]=i,i._sourceSegment=n,i._segmentIndexShift=t.length;for(const s of e)if(""===s.path&&ol(s)!==sn){const c=new hn([],{});c._sourceSegment=n,c._segmentIndexShift=t.length,r[ol(s)]=c}return r}(n,t,i,new hn(e,n.children)));return c._sourceSegment=n,c._segmentIndexShift=t.length,{segmentGroup:c,slicedSegments:[]}}if(0===e.length&&function One(n,t,e){return e.some(i=>JA(n,t,i))}(n,e,i)){const c=new hn(n.segments,function kne(n,t,e,i,r,s){const c={};for(const d of i)if(JA(n,e,d)&&!r[ol(d)]){const p=new hn([],{});p._sourceSegment=n,p._segmentIndexShift="legacy"===s?n.segments.length:t.length,c[ol(d)]=p}return{...r,...c}}(n,t,e,i,n.children,r));return c._sourceSegment=n,c._segmentIndexShift=t.length,{segmentGroup:c,slicedSegments:e}}const s=new hn(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:e}}function JA(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function zq(n,t,e,i){return!!(ol(n)===i||i!==sn&&JA(t,e,n))&&("**"===n.path||SL(t,n,e).matched)}function qq(n,t,e){return 0===t.length&&!n.children[e]}const eM=!1;class tM{constructor(t){this.segmentGroup=t||null}}class Wq{constructor(t){this.urlTree=t}}function PC(n){return Ch(new tM(n))}function Yq(n){return Ch(new Wq(n))}class Lne{constructor(t,e,i,r,s){this.injector=t,this.configLoader=e,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const t=XA(this.urlTree.root,[],[],this.config).segmentGroup,e=new hn(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,e,sn).pipe((0,ct.U)(s=>this.createUrlTree(qA(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Xl(s=>{if(s instanceof Wq)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof tM?this.noMatchError(s):s}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,sn).pipe((0,ct.U)(r=>this.createUrlTree(qA(r),t.queryParams,t.fragment))).pipe(Xl(r=>{throw r instanceof tM?this.noMatchError(r):r}))}noMatchError(t){return new l.vHH(4002,eM)}createUrlTree(t,e,i){const r=cL(t);return new pm(r,e,i)}expandSegmentGroup(t,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(t,e,i).pipe((0,ct.U)(s=>new hn([],s))):this.expandSegment(t,i,e,i.segments,r,!0)}expandChildren(t,e,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return(0,mn.D)(r).pipe(Jl(s=>{const c=i.children[s],d=Hq(e,s);return this.expandSegmentGroup(t,d,c,s).pipe((0,ct.U)(p=>({segment:p,outlet:s})))}),Ip((s,c)=>(s[c.outlet]=c.segment,s),{}),cq())}expandSegment(t,e,i,r,s,c){return(0,mn.D)(i).pipe(Jl(d=>this.expandSegmentAgainstRoute(t,e,i,d,r,s,c).pipe(Xl(_=>{if(_ instanceof tM)return et(null);throw _}))),nd(d=>!!d),Xl((d,p)=>{if(DL(d))return qq(e,r,s)?et(new hn([],{})):PC(e);throw d}))}expandSegmentAgainstRoute(t,e,i,r,s,c,d){return zq(r,e,s,c)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,s,c):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c):PC(e):PC(e)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,i,r,c):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?Yq(s):this.lineralizeSegments(i,s).pipe((0,br.z)(c=>{const d=new hn(c,{});return this.expandSegment(t,d,e,c,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c){const{matched:d,consumedSegments:p,remainingSegments:_,positionalParamSegments:w}=SL(e,r,s);if(!d)return PC(e);const I=this.applyRedirectCommands(p,r.redirectTo,w);return r.redirectTo.startsWith("/")?Yq(I):this.lineralizeSegments(r,I).pipe((0,br.z)(M=>this.expandSegment(t,e,i,M.concat(_),c,!1)))}matchSegmentAgainstRoute(t,e,i,r,s){return"**"===i.path?(t=Uq(i,t),i.loadChildren?(i._loadedRoutes?et({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(t,i)).pipe((0,ct.U)(d=>(i._loadedRoutes=d.routes,i._loadedInjector=d.injector,new hn(r,{})))):et(new hn(r,{}))):Gq(e,i,r,t).pipe(Kn(({matched:c,consumedSegments:d,remainingSegments:p})=>c?this.getChildConfig(t=i._injector??t,i,r).pipe((0,br.z)(w=>{const I=w.injector??t,M=w.routes,{segmentGroup:O,slicedSegments:N}=XA(e,d,p,M),z=new hn(O.segments,O.children);if(0===N.length&&z.hasChildren())return this.expandChildren(I,M,z).pipe((0,ct.U)(Xe=>new hn(d,Xe)));if(0===M.length&&0===N.length)return et(new hn(d,{}));const ie=ol(i)===s;return this.expandSegment(I,z,M,N,ie?sn:s,!0).pipe((0,ct.U)(ze=>new hn(d.concat(ze.segments),ze.children)))})):PC(e)))}getChildConfig(t,e,i){return e.children?et({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?et({routes:e._loadedRoutes,injector:e._loadedInjector}):function Ane(n,t,e,i){const r=t.canLoad;return void 0===r||0===r.length?et(!0):et(r.map(c=>{const d=fy(c,n);return sf(function pne(n){return n&&OC(n.canLoad)}(d)?d.canLoad(t,e):n.runInContext(()=>d(t,e)))})).pipe(py(),$q())}(t,e,i).pipe((0,br.z)(r=>r?this.configLoader.loadChildren(t,e).pipe((0,Yn.b)(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):function Nne(n){return Ch(Lq(eM,3))}())):et({routes:[],injector:t})}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return et(i);if(r.numberOfChildren>1||!r.children[sn])return Ch(new l.vHH(4e3,eM));r=r.children[sn]}}applyRedirectCommands(t,e,i){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i)}applyRedirectCreateUrlTree(t,e,i,r){const s=this.createSegmentGroup(t,e.root,i,r);return new pm(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const i={};return ns(t,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const d=r.substring(1);i[s]=e[d]}else i[s]=r}),i}createSegmentGroup(t,e,i,r){const s=this.createSegments(t,e.segments,i,r);let c={};return ns(e.children,(d,p)=>{c[p]=this.createSegmentGroup(t,d,i,r)}),new hn(s,c)}createSegments(t,e,i,r){return e.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,r):this.findOrReturn(s,i))}findPosParam(t,e,i){const r=i[e.path.substring(1)];if(!r)throw new l.vHH(4001,eM);return r}findOrReturn(t,e){let i=0;for(const r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}}class Bne{}class jne{constructor(t,e,i,r,s,c,d,p){this.injector=t,this.rootComponentType=e,this.config=i,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=d,this.urlSerializer=p}recognize(){const t=XA(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,sn).pipe((0,ct.U)(e=>{if(null===e)return null;const i=new YA([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},sn,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new gd(i,e),s=new Pq(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(t){const e=t.value,i=Oq(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(t,e,i):this.processSegment(t,e,i,i.segments,r)}processChildren(t,e,i){return(0,mn.D)(Object.keys(i.children)).pipe(Jl(r=>{const s=i.children[r],c=Hq(e,r);return this.processSegmentGroup(t,c,s,r)}),Ip((r,s)=>r&&s?(r.push(...s),r):null),YI(r=>null!==r),SS(null),cq(),(0,ct.U)(r=>{if(null===r)return null;const s=Zq(r);return function $ne(n){n.sort((t,e)=>t.value.outlet===sn?-1:e.value.outlet===sn?1:t.value.outlet.localeCompare(e.value.outlet))}(s),s}))}processSegment(t,e,i,r,s){return(0,mn.D)(e).pipe(Jl(c=>this.processSegmentAgainstRoute(c._injector??t,c,i,r,s)),nd(c=>!!c),Xl(c=>{if(DL(c))return qq(i,r,s)?et([]):et(null);throw c}))}processSegmentAgainstRoute(t,e,i,r,s){if(e.redirectTo||!zq(e,i,r,s))return et(null);let c;if("**"===e.path){const d=r.length>0?hq(r).parameters:{},p=Qq(i)+r.length;c=et({snapshot:new YA(r,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Jq(e),ol(e),e.component??e._loadedComponent??null,e,Kq(i),p,e6(e),p),consumedSegments:[],remainingSegments:[]})}else c=Gq(i,e,r,t).pipe((0,ct.U)(({matched:d,consumedSegments:p,remainingSegments:_,parameters:w})=>{if(!d)return null;const I=Qq(i)+p.length;return{snapshot:new YA(p,w,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Jq(e),ol(e),e.component??e._loadedComponent??null,e,Kq(i),I,e6(e),I),consumedSegments:p,remainingSegments:_}}));return c.pipe(Kn(d=>{if(null===d)return et(null);const{snapshot:p,consumedSegments:_,remainingSegments:w}=d;t=e._injector??t;const I=e._loadedInjector??t,M=function Gne(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(e),{segmentGroup:O,slicedSegments:N}=XA(i,_,w,M.filter(ie=>void 0===ie.redirectTo),this.relativeLinkResolution);if(0===N.length&&O.hasChildren())return this.processChildren(I,M,O).pipe((0,ct.U)(ie=>null===ie?null:[new gd(p,ie)]));if(0===M.length&&0===N.length)return et([new gd(p,[])]);const z=ol(e)===s;return this.processSegment(I,M,O,N,z?sn:s).pipe((0,ct.U)(ie=>null===ie?null:[new gd(p,ie)]))}))}}function zne(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function Zq(n){const t=[],e=new Set;for(const i of n){if(!zne(i)){t.push(i);continue}const r=t.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),e.add(r)):t.push(i)}for(const i of e){const r=Zq(i.children);t.push(new gd(i.value,r))}return t.filter(i=>!e.has(i))}function Kq(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function Qq(n){let t=n,e=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift??0;return e-1}function Jq(n){return n.data||{}}function e6(n){return n.resolve||{}}function t6(n){return"string"==typeof n.title||null===n.title}function TL(n){return Kn(t=>{const e=n(t);return e?(0,mn.D)(e).pipe((0,ct.U)(()=>t)):et(t)})}let n6=(()=>{class n{buildTitle(e){let i,r=e.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===sn);return i}getResolvedTitleForRoute(e){return e.data[CC]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return(0,l.f3M)(i6)},providedIn:"root"}),n})(),i6=(()=>{class n extends n6{constructor(e){super(),this.title=e}updateTitle(e){const i=this.buildTitle(e);void 0!==i&&this.title.setTitle(i)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ls))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Jne{}class tie extends class eie{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const iM=new l.OlP("",{providedIn:"root",factory:()=>({})}),AL=new l.OlP("ROUTES");let ML=(()=>{class n{constructor(e,i){this.injector=e,this.compiler=i,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return et(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const i=sf(e.loadComponent()).pipe((0,Yn.b)(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),zc(()=>{this.componentLoaders.delete(e)})),r=new lq(i,()=>new St.x).pipe(rL());return this.componentLoaders.set(e,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return et({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe((0,ct.U)(d=>{this.onLoadEndListener&&this.onLoadEndListener(i);let p,_,w=!1;Array.isArray(d)?_=d:(p=d.create(e).injector,_=dq(p.get(AL,[],l.XFs.Self|l.XFs.Optional)));return{routes:_.map(EL),injector:p}}),zc(()=>{this.childrenLoaders.delete(i)})),c=new lq(s,()=>new St.x).pipe(rL());return this.childrenLoaders.set(i,c),c}loadModuleFactoryOrRoutes(e){return sf(e()).pipe((0,br.z)(i=>i instanceof l.YKP||Array.isArray(i)?et(i):(0,mn.D)(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(l.zs3),l.LFG(l.Sil))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class iie{}class rie{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function sie(n){throw n}function oie(n,t,e){return t.parse("/")}const aie={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},lie={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function s6(){const n=(0,l.f3M)(yq),t=(0,l.f3M)(MC),e=(0,l.f3M)(Fe),i=(0,l.f3M)(l.zs3),r=(0,l.f3M)(l.Sil),s=(0,l.f3M)(AL,{optional:!0})??[],c=(0,l.f3M)(iM,{optional:!0})??{},d=(0,l.f3M)(i6),p=(0,l.f3M)(n6,{optional:!0}),_=(0,l.f3M)(iie,{optional:!0}),w=(0,l.f3M)(Jne,{optional:!0}),I=new er(null,n,t,e,i,r,dq(s));return _&&(I.urlHandlingStrategy=_),w&&(I.routeReuseStrategy=w),I.titleStrategy=p??d,function cie(n,t){n.errorHandler&&(t.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(t.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(t.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(t.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(t.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(t.canceledNavigationResolution=n.canceledNavigationResolution)}(c,I),I}let er=(()=>{class n{constructor(e,i,r,s,c,d,p){this.rootComponentType=e,this.urlSerializer=i,this.rootContexts=r,this.location=s,this.config=p,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new St.x,this.errorHandler=sie,this.malformedUriErrorHandler=oie,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>et(void 0),this.urlHandlingStrategy=new rie,this.routeReuseStrategy=new tie,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=c.get(ML),this.configLoader.onLoadEndListener=M=>this.triggerEvent(new Gte(M)),this.configLoader.onLoadStartListener=M=>this.triggerEvent(new $te(M)),this.ngModule=c.get(l.h0i),this.console=c.get(l.c2e);const I=c.get(l.R0b);this.isNgZoneEnabled=I instanceof l.R0b&&l.R0b.isInAngularZone(),this.resetConfig(p),this.currentUrlTree=function fte(){return new pm(new hn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Rq(this.currentUrlTree,this.rootComponentType),this.transitions=new Ai({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(e){const i=this.events;return e.pipe(yi(r=>0!==r.id),(0,ct.U)(r=>({...r,extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),Kn(r=>{let s=!1,c=!1;return et(r).pipe((0,Yn.b)(d=>{this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Kn(d=>{const p=this.browserUrlTree.toString(),_=!this.navigated||d.extractedUrl.toString()!==p||p!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||_)&&this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return o6(d.source)&&(this.browserUrlTree=d.extractedUrl),et(d).pipe(Kn(I=>{const M=this.transitions.getValue();return i.next(new fL(I.id,this.serializeUrl(I.extractedUrl),I.source,I.restoredState)),M!==this.transitions.getValue()?Ul.E:Promise.resolve(I)}),function Vne(n,t,e,i){return Kn(r=>function Fne(n,t,e,i,r){return new Lne(n,t,e,i,r).apply()}(n,t,e,r.extractedUrl,i).pipe((0,ct.U)(s=>({...r,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Yn.b)(I=>{this.currentNavigation={...this.currentNavigation,finalUrl:I.urlAfterRedirects},r.urlAfterRedirects=I.urlAfterRedirects}),function Wne(n,t,e,i,r,s){return(0,br.z)(c=>function Hne(n,t,e,i,r,s,c="emptyOnly",d="legacy"){return new jne(n,t,e,i,r,c,d,s).recognize().pipe(Kn(p=>null===p?function Une(n){return new Zi.y(t=>t.error(n))}(new Bne):et(p)))}(n,t,e,c.urlAfterRedirects,i.serialize(c.urlAfterRedirects),i,r,s).pipe((0,ct.U)(d=>({...c,targetSnapshot:d}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Yn.b)(I=>{if(r.targetSnapshot=I.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!I.extras.skipLocationChange){const O=this.urlHandlingStrategy.merge(I.urlAfterRedirects,I.rawUrl);this.setBrowserUrl(O,I)}this.browserUrlTree=I.urlAfterRedirects}const M=new Vte(I.id,this.serializeUrl(I.extractedUrl),this.serializeUrl(I.urlAfterRedirects),I.targetSnapshot);i.next(M)}));if(_&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:M,extractedUrl:O,source:N,restoredState:z,extras:ie}=d,Me=new fL(M,this.serializeUrl(O),N,z);i.next(Me);const ze=Rq(O,this.rootComponentType).snapshot;return et(r={...d,targetSnapshot:ze,urlAfterRedirects:O,extras:{...ie,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=d.rawUrl,d.resolve(null),Ul.E}),(0,Yn.b)(d=>{const p=new Bte(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(p)}),(0,ct.U)(d=>r={...d,guards:cne(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),function bne(n,t){return(0,br.z)(e=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:c}}=e;return 0===c.length&&0===s.length?et({...e,guardsResult:!0}):function wne(n,t,e,i){return(0,mn.D)(n).pipe((0,br.z)(r=>function Tne(n,t,e,i,r){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?et(s.map(d=>{const p=kC(t)??r,_=fy(d,p);return sf(function _ne(n){return n&&OC(n.canDeactivate)}(_)?_.canDeactivate(n,t,e,i):p.runInContext(()=>_(n,t,e,i))).pipe(nd())})).pipe(py()):et(!0)}(r.component,r.route,e,t,i)),nd(r=>!0!==r,!0))}(c,i,r,n).pipe((0,br.z)(d=>d&&function fne(n){return"boolean"==typeof n}(d)?function Cne(n,t,e,i){return(0,mn.D)(t).pipe(Jl(r=>jm(function Dne(n,t){return null!==n&&t&&t(new zte(n)),et(!0)}(r.route.parent,i),function Ene(n,t){return null!==n&&t&&t(new Wte(n)),et(!0)}(r.route,i),function Sne(n,t,e){const i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(c=>function une(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(c)).filter(c=>null!==c).map(c=>wS(()=>et(c.guards.map(p=>{const _=kC(c.node)??e,w=fy(p,_);return sf(function gne(n){return n&&OC(n.canActivateChild)}(w)?w.canActivateChild(i,n):_.runInContext(()=>w(i,n))).pipe(nd())})).pipe(py())));return et(s).pipe(py())}(n,r.path,e),function Ine(n,t,e){const i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||0===i.length)return et(!0);const r=i.map(s=>wS(()=>{const c=kC(t)??e,d=fy(s,c);return sf(function mne(n){return n&&OC(n.canActivate)}(d)?d.canActivate(t,n):c.runInContext(()=>d(t,n))).pipe(nd())}));return et(r).pipe(py())}(n,r.route,e))),nd(r=>!0!==r,!0))}(i,s,n,t):et(d)),(0,ct.U)(d=>({...e,guardsResult:d})))})}(this.ngModule.injector,d=>this.triggerEvent(d)),(0,Yn.b)(d=>{if(r.guardsResult=d.guardsResult,gm(d.guardsResult))throw Fq(0,d.guardsResult);const p=new Ute(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.triggerEvent(p)}),yi(d=>!!d.guardsResult||(this.restoreHistory(d),this.cancelNavigationTransition(d,"",3),!1)),TL(d=>{if(d.guards.canActivateChecks.length)return et(d).pipe((0,Yn.b)(p=>{const _=new Hte(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(_)}),Kn(p=>{let _=!1;return et(p).pipe(function Yne(n,t){return(0,br.z)(e=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return et(e);let s=0;return(0,mn.D)(r).pipe(Jl(c=>function Zne(n,t,e,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!t6(r)&&(s[CC]=r.title),function Kne(n,t,e,i){const r=function Qne(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return et({});const s={};return(0,mn.D)(r).pipe((0,br.z)(c=>function Xne(n,t,e,i){const r=kC(t)??i,s=fy(n,r);return sf(s.resolve?s.resolve(t,e):r.runInContext(()=>s(t,e)))}(n[c],t,e,i).pipe(nd(),(0,Yn.b)(d=>{s[c]=d}))),sL(1),dS(s),Xl(c=>DL(c)?Ul.E:Ch(c)))}(s,n,t,i).pipe((0,ct.U)(c=>(n._resolvedData=c,n.data=Oq(n,e).resolve,r&&t6(r)&&(n.data[CC]=r.title),null)))}(c.route,i,n,t)),(0,Yn.b)(()=>s++),sL(1),(0,br.z)(c=>s===r.length?et(e):Ul.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Yn.b)({next:()=>_=!0,complete:()=>{_||(this.restoreHistory(p),this.cancelNavigationTransition(p,"",2))}}))}),(0,Yn.b)(p=>{const _=new jte(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(_)}))}),TL(d=>{const p=_=>{const w=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&w.push(this.configLoader.loadComponent(_.routeConfig).pipe((0,Yn.b)(I=>{_.component=I}),(0,ct.U)(()=>{})));for(const I of _.children)w.push(...p(I));return w};return Mu(p(d.targetSnapshot.root)).pipe(SS(),ni(1))}),TL(()=>this.afterPreactivation()),(0,ct.U)(d=>{const p=function Xte(n,t,e){const i=AC(n,t._root,e?e._root:void 0);return new xq(i,t)}(this.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return r={...d,targetRouterState:p}}),(0,Yn.b)(d=>{this.currentUrlTree=d.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),this.routerState=d.targetRouterState,"deferred"===this.urlUpdateStrategy&&(d.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,d),this.browserUrlTree=d.urlAfterRedirects)}),((n,t,e)=>(0,ct.U)(i=>(new lne(t,i.targetRouterState,i.currentRouterState,e).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,d=>this.triggerEvent(d)),(0,Yn.b)({next(){s=!0},complete(){s=!0}}),zc(()=>{s||c||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Xl(d=>{if(c=!0,Bq(d)){Vq(d)||(this.navigated=!0,this.restoreHistory(r,!0));const p=new WA(r.id,this.serializeUrl(r.extractedUrl),d.message,d.cancellationCode);if(i.next(p),Vq(d)){const _=this.urlHandlingStrategy.merge(d.url,this.rawUrlTree),w={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||o6(r.source)};this.scheduleNavigation(_,"imperative",null,w,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{this.restoreHistory(r,!0);const p=new Aq(r.id,this.serializeUrl(r.extractedUrl),d,r.targetSnapshot??void 0);i.next(p);try{r.resolve(this.errorHandler(d))}catch(_){r.reject(_)}}return Ul.E}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next({...this.transitions.value,...e})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i="popstate"===e.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{const r={replaceUrl:!0},s=e.state?.navigationId?e.state:null;if(s){const d={...s};delete d.navigationId,delete d.\u0275routerPageId,0!==Object.keys(d).length&&(r.state=d)}const c=this.parseUrl(e.url);this.scheduleNavigation(c,i,s,r)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){this.config=e.map(EL),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,i={}){const{relativeTo:r,queryParams:s,fragment:c,queryParamsHandling:d,preserveFragment:p}=i,_=r||this.routerState.root,w=p?this.currentUrlTree.fragment:c;let I=null;switch(d){case"merge":I={...this.currentUrlTree.queryParams,...s};break;case"preserve":I=this.currentUrlTree.queryParams;break;default:I=s||null}return null!==I&&(I=this.removeEmptyProps(I)),Rte(_,this.currentUrlTree,e,I,w??null)}navigateByUrl(e,i={skipLocationChange:!1}){const r=gm(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(e,i={skipLocationChange:!1}){return function uie(n){for(let t=0;t<n.length;t++){if(null==n[t])throw new l.vHH(4008,false)}}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return i}isActive(e,i){let r;if(r=!0===i?{...aie}:!1===i?{...lie}:i,gm(e))return pq(this.currentUrlTree,e,r);const s=this.parseUrl(e);return pq(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.keys(e).reduce((i,r)=>{const s=e[r];return null!=s&&(i[r]=s),i},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new _m(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,i,r,s,c){if(this.disposed)return Promise.resolve(!1);let d,p,_;c?(d=c.resolve,p=c.reject,_=c.promise):_=new Promise((M,O)=>{d=M,p=O});const w=++this.navigationId;let I;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),I=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):I=0,this.setTransition({id:w,targetPageId:I,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:s,resolve:d,reject:p,promise:_,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),_.catch(M=>Promise.reject(M))}setBrowserUrl(e,i){const r=this.urlSerializer.serialize(e),s={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(e,i=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===r?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===r&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,i,r){const s=new WA(e.id,this.serializeUrl(e.extractedUrl),i,r);this.triggerEvent(s),e.resolve(!1)}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}}return n.\u0275fac=function(e){l.$Z()},n.\u0275prov=l.Yz7({token:n,factory:function(){return s6()},providedIn:"root"}),n})();function o6(n){return"imperative"!==n}let my=(()=>{class n{constructor(e,i,r,s,c){this.router=e,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=c,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new St.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(e){this._preserveFragment=(0,l.D6c)(e)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(e){this._skipLocationChange=(0,l.D6c)(e)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(e){this._replaceUrl=(0,l.D6c)(e)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(e){if(null!=this.tabIndexAttribute)return;const i=this.renderer,r=this.el.nativeElement;null!==e?i.setAttribute(r,"tabindex",e):i.removeAttribute(r,"tabindex")}ngOnChanges(e){this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(er),l.Y36(af),l.$8M("tabindex"),l.Y36(l.Qsj),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,i){1&e&&l.NdJ("click",function(){return i.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[l.TTD]}),n})(),_d=(()=>{class n{constructor(e,i,r){this.router=e,this.route=i,this.locationStrategy=r,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new St.x,this.subscription=e.events.subscribe(s=>{s instanceof _m&&this.updateTargetUrlAndHref()})}set preserveFragment(e){this._preserveFragment=(0,l.D6c)(e)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(e){this._skipLocationChange=(0,l.D6c)(e)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(e){this._replaceUrl=(0,l.D6c)(e)}get replaceUrl(){return this._replaceUrl}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:null}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,i,r,s,c){return!!(0!==e||i||r||s||c||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(er),l.Y36(af),l.Y36(Ee))},n.\u0275dir=l.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,i){1&e&&l.NdJ("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&e&&l.uIk("target",i.target)("href",i.href,l.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[l.TTD]}),n})(),ym=(()=>{class n{constructor(e,i,r,s,c,d){this.router=e,this.element=i,this.renderer=r,this.cdr=s,this.link=c,this.linkWithHref=d,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new l.vpe,this.routerEventsSubscription=e.events.subscribe(p=>{p instanceof _m&&this.update()})}ngAfterContentInit(){et(this.links.changes,this.linksWithHrefs.changes,et(null)).pipe((0,$l.J)()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const e=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=(0,mn.D)(e).pipe((0,$l.J)()).subscribe(i=>{this.isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(e){const i=Array.isArray(e)?e:e.split(" ");this.classes=i.filter(r=>!!r)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const e=this.hasActiveLinks();this.isActive!==e&&(this.isActive=e,this.cdr.markForCheck(),this.classes.forEach(i=>{e?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),e&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(e))})}isLinkActive(e){const i=function die(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>!!r.urlTree&&e.isActive(r.urlTree,i)}hasActiveLinks(){const e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.linkWithHref&&e(this.linkWithHref)||this.links.some(e)||this.linksWithHrefs.some(e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(er),l.Y36(l.SBq),l.Y36(l.Qsj),l.Y36(l.sBO),l.Y36(my,8),l.Y36(_d,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(e,i,r){if(1&e&&(l.Suo(r,my,5),l.Suo(r,_d,5)),2&e){let s;l.iGM(s=l.CRH())&&(i.links=s),l.iGM(s=l.CRH())&&(i.linksWithHrefs=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[l.TTD]}),n})();class a6{}let hie=(()=>{class n{constructor(e,i,r,s,c){this.router=e,this.injector=r,this.preloadingStrategy=s,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(yi(e=>e instanceof _m),Jl(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=(0,l.MMx)(s.providers,e,`Route: ${s.path}`));const c=s._injector??e,d=s._loadedInjector??c;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?r.push(this.preloadConfig(c,s)):(s.children||s._loadedRoutes)&&r.push(this.processRoutes(d,s.children??s._loadedRoutes))}return(0,mn.D)(r).pipe((0,$l.J)())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(e,i):et(null);const s=r.pipe((0,br.z)(c=>null===c?et(void 0):(i._loadedRoutes=c.routes,i._loadedInjector=c.injector,this.processRoutes(c.injector??e,c.routes))));if(i.loadComponent&&!i._loadedComponent){const c=this.loader.loadComponent(i);return(0,mn.D)([s,c]).pipe((0,$l.J)())}return s})}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(er),l.LFG(l.Sil),l.LFG(l.lqb),l.LFG(a6),l.LFG(ML))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const kL=new l.OlP("");let l6=(()=>{class n{constructor(e,i,r={}){this.router=e,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof fL?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof _m&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Mq&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.router.triggerEvent(new Mq(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(e){l.$Z()},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function gy(n,t){return{\u0275kind:n,\u0275providers:t}}function xL(n){return[{provide:AL,multi:!0,useValue:n}]}function u6(){const n=(0,l.f3M)(l.zs3);return t=>{const e=n.get(l.z2F);if(t!==e.components[0])return;const i=n.get(er),r=n.get(d6);1===n.get(RL)&&i.initialNavigation(),n.get(h6,null,l.XFs.Optional)?.setUpPreloading(),n.get(kL,null,l.XFs.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.next(),r.complete()}}const d6=new l.OlP("",{factory:()=>new St.x}),RL=new l.OlP("",{providedIn:"root",factory:()=>1});const h6=new l.OlP("");function gie(n){return gy(0,[{provide:h6,useExisting:hie},{provide:a6,useExisting:n}])}const f6=new l.OlP("ROUTER_FORROOT_GUARD"),_ie=[Fe,{provide:yq,useClass:aL},{provide:er,useFactory:s6},MC,{provide:af,useFactory:function c6(n){return n.routerState.root},deps:[er]},ML];function yie(){return new l.PXZ("Router",er)}let p6=(()=>{class n{constructor(e){}static forRoot(e,i){return{ngModule:n,providers:[_ie,[],xL(e),{provide:f6,useFactory:Cie,deps:[[er,new l.FiY,new l.tp0]]},{provide:iM,useValue:i||{}},i?.useHash?{provide:Ee,useClass:rt}:{provide:Ee,useClass:it},{provide:kL,useFactory:()=>{const n=(0,l.f3M)(er),t=(0,l.f3M)(Sd),e=(0,l.f3M)(iM);return e.scrollOffset&&t.setOffset(e.scrollOffset),new l6(n,t,e)}},i?.preloadingStrategy?gie(i.preloadingStrategy).\u0275providers:[],{provide:l.PXZ,multi:!0,useFactory:yie},i?.initialNavigation?Eie(i):[],[{provide:m6,useFactory:u6},{provide:l.tb,multi:!0,useExisting:m6}]]}}static forChild(e){return{ngModule:n,providers:[xL(e)]}}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(f6,8))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[wL]}),n})();function Cie(n){return"guarded"}function Eie(n){return["disabled"===n.initialNavigation?gy(3,[{provide:l.ip1,multi:!0,useFactory:()=>{const t=(0,l.f3M)(er);return()=>{t.setUpLocationChangeListener()}}},{provide:RL,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?gy(2,[{provide:RL,useValue:0},{provide:l.ip1,multi:!0,deps:[l.zs3],useFactory:t=>{const e=t.get(W,Promise.resolve(null));let i=!1;return()=>e.then(()=>new Promise(s=>{const c=t.get(er),d=t.get(d6);(function r(s){t.get(er).events.pipe(yi(d=>d instanceof _m||d instanceof WA||d instanceof Aq),(0,ct.U)(d=>d instanceof _m||d instanceof WA&&(0===d.code||1===d.code)&&null),yi(d=>null!==d),ni(1)).subscribe(()=>{s()})})(()=>{s(!0),i=!0}),c.afterPreactivation=()=>(s(!0),i||d.closed?et(void 0):d),c.initialNavigation()}))}}]).\u0275providers:[]]}const m6=new l.OlP("");var Iie=L(8554);let NC=(()=>{class n{constructor(e,i){this.router=e,this._snackBar=i}navigateTo(e){this.router.navigateByUrl(e).then(i=>{},i=>{this._snackBar.open("Algo errado n\xe3o est\xe1 certo: falhou","fechar")})}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(er),l.LFG(XR))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ra=(()=>{class n{constructor(e,i,r,s,c,d){this.afs=e,this.auth=i,this.router=r,this.ngZone=s,this._snackBar=c,this._nav=d,this.userDoc=null,this.user=et(null),this.userData=null,this.hasLoggedin=new Ai(!1),this.auth.authState.subscribe(p=>{p?(this.userDoc=e.doc(`users/${p.uid}`),this.user=this.userDoc.valueChanges().pipe((0,Yn.b)(_=>{this.userData=_,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))})),this.hasLoggedin.next(!0)):(this.user=et(null),localStorage.setItem("user","null"),this.userData=null,JSON.parse(localStorage.getItem("user")),this.hasLoggedin.next(!1))})}signIn(e,i){return this.auth.signInWithEmailAndPassword(e,i).then(r=>{this.auth.authState.subscribe(s=>{s&&(this.hasLoggedin.next(!0),this._nav.navigateTo("/"))})}).catch(r=>{console.log("Something went wrong: ",r.message),this._snackBar.open("Algo errado n\xe3o est\xe1 certo: login falhou","fechar")})}setUserData(e){return this.afs.doc(`users/${e.uid}`).set({uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,emailVerified:e.emailVerified,curriculosUID:e.curriculosUID},{merge:!0})}signUp(e,i){return this.auth.createUserWithEmailAndPassword(e,i).then(r=>{this.sendVerificationMail(),this.setUserData(r.user)}).catch(r=>{this._snackBar.open("Algo errado n\xe3o est\xe1 certo: cadastro falhou","fechar"),console.log("Something went wrong: ",r)})}sendVerificationMail(){return this.auth.currentUser.then(e=>e.sendEmailVerification()).then(()=>{this._snackBar.open("Verifica\xe7\xe3o de email enviada, verifique","fechar"),this._nav.navigateTo("/verificar-email")})}forgotPassword(e){return this.auth.sendPasswordResetEmail(e).then(()=>{this._snackBar.open("Email para recupera\xe7\xe3o de senha enviado, verifique","fechar")}).catch(i=>{this._snackBar.open("Algo errado n\xe3o est\xe1 certo: email de recupera\xe7\xe3o falhou","fechar")})}get isLoggedIn(){const e=this.userData;return!!e&&!1!==e.emailVerified}googleLogin(){var e=new Iie.Q;return this.oAuthLogin(e).catch(i=>{this._snackBar.open("Algo errado n\xe3o est\xe1 certo: login goole falhou","fechar"),console.log("Something went wrong: ",i)})}signOut(){var e=this;return(0,De.Z)(function*(){return e.auth.signOut().then(()=>{e.user=et(null),e.userData=null,localStorage.removeItem("user")})})()}oAuthLogin(e){var i=this;return(0,De.Z)(function*(){return i.auth.signInWithPopup(e).then(r=>{}).catch(r=>{i._snackBar.open("Algo errado n\xe3o est\xe1 certo: login oAuth falhou","fechar"),console.log("Something went wrong: ",r)})})()}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(W1),l.LFG(Lw),l.LFG(er),l.LFG(l.R0b),l.LFG(XR),l.LFG(NC))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),FC=(()=>{class n{constructor(e,i){this.authService=e,this.router=i}canActivate(e,i){return!0!==this.authService.isLoggedIn&&(console.log("Acesso negado: AuthGuard"),this.router.navigate(["login"])),!0}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ra),l.LFG(er))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),aM=(()=>{class n{constructor(e,i){this.authService=e,this.router=i}canActivate(e,i){return this.authService.isLoggedIn&&(console.log("Acesso negado: NoAuthGuard"),this.router.navigateByUrl("")),!0}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ra),l.LFG(er))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Sie=(()=>{class n{constructor(e,i){this.authService=e,this._nav=i,this.authService.hasLoggedin.subscribe(r=>{console.log({hasLoggedin:r}),r&&this._nav.navigateTo("/")})}ngOnInit(){}onEnter(e,i){this.authService.signIn(e,i)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(ra),l.Y36(NC))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-email-login"]],decls:30,vars:0,consts:[[1,"container"],[1,"mat-h3"],[1,"my-form"],["appearance","fill",1,"full-width"],["matInput","","value","","required","",3,"keyup.enter"],["userEmail",""],["matInput","","type","password","required","","autocomplete","current-password",3,"keyup.enter"],["userPassword",""],["mat-raised-button","",3,"click"],[1,"or"],[1,"orInner"],["svgIcon","google_logo",2,"width","40px","height","24px"],[1,"forgotPassword"],["routerLink","/esqueceu-senha","routerLinkActive","active"],[1,"redirectToLogin"],["routerLink","/cadastro","routerLinkActive","active"]],template:function(e,i){if(1&e){const r=l.EpF();l.TgZ(0,"div",0)(1,"h3",1),l._uU(2,"Fa\xe7a o Login"),l.qZA(),l.TgZ(3,"form",2)(4,"mat-form-field",3)(5,"mat-label"),l._uU(6,"Email"),l.qZA(),l.TgZ(7,"input",4,5),l.NdJ("keyup.enter",function(){l.CHM(r);const c=l.MAs(8),d=l.MAs(13);return l.KtG(i.onEnter(c.value,d.value))}),l.qZA()(),l.TgZ(9,"mat-form-field",3)(10,"mat-label"),l._uU(11,"Senha"),l.qZA(),l.TgZ(12,"input",6,7),l.NdJ("keyup.enter",function(){l.CHM(r);const c=l.MAs(8),d=l.MAs(13);return l.KtG(i.onEnter(c.value,d.value))}),l.qZA()()(),l.TgZ(14,"button",8),l.NdJ("click",function(){l.CHM(r);const c=l.MAs(8),d=l.MAs(13);return l.KtG(i.authService.signIn(c.value,d.value))}),l._uU(15," Entrar "),l.qZA(),l.TgZ(16,"div",9)(17,"span",10),l._uU(18,"ou"),l.qZA()(),l.TgZ(19,"button",8),l.NdJ("click",function(){return i.authService.googleLogin()}),l._UZ(20,"mat-icon",11),l._uU(21," Entrar com conta Google "),l.qZA(),l.TgZ(22,"div",12)(23,"a",13),l._uU(24,"Esqueceu a senha?"),l.qZA()(),l.TgZ(25,"div",14)(26,"span"),l._uU(27,"N\xe3o tem um cadastro? "),l.TgZ(28,"a",15),l._uU(29,"Cadastrar"),l.qZA()()()()}},dependencies:[_d,ym,lo,Yg,wh,Zg,Dh,op,gh],styles:[".forgotPassword[_ngcontent-%COMP%]{margin-top:15px}"]}),n})(),Tie=(()=>{class n{constructor(e){this.authService=e}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(ra))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-esqueceu-senha"]],decls:18,vars:0,consts:[[1,"container"],[1,"mat-h2"],[1,"text-center"],[1,"my-form"],["appearance","fill",1,"full-width"],["matInput","","value","","required",""],["userEmail",""],["mat-raised-button","",3,"click"],[1,"redirectToLogin"],["routerLink","/login","routerLinkActive","active"]],template:function(e,i){if(1&e){const r=l.EpF();l.TgZ(0,"div",0)(1,"h2",1),l._uU(2,"Recuperar Senha"),l.qZA(),l.TgZ(3,"p",2),l._uU(4,"Informe o email utilizado no cadastro"),l.qZA(),l.TgZ(5,"form",3)(6,"mat-form-field",4)(7,"mat-label"),l._uU(8,"Email"),l.qZA(),l._UZ(9,"input",5,6),l.qZA()(),l.TgZ(11,"button",7),l.NdJ("click",function(){l.CHM(r);const c=l.MAs(10);return l.KtG(i.authService.forgotPassword(c.value))}),l._uU(12," Recuperar "),l.qZA(),l.TgZ(13,"div",8)(14,"span"),l._uU(15,"Voltar e fazer "),l.TgZ(16,"a",9),l._uU(17,"Login?"),l.qZA()()()()}},dependencies:[_d,ym,lo,Yg,wh,Zg,op,gh],styles:[".my-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%;display:flex;flex-direction:column}.full-width[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]{margin-top:10px;width:100%;display:flex;flex-direction:column;align-items:center}.redirectToLogin[_ngcontent-%COMP%]{margin-top:15px}"]}),n})(),g6=(()=>{class n{constructor(e,i){this.afs=e,this.authService=i,this.curriculoListDoc=null,this.curriculoList=void 0;const s=this.authService.userData;s&&(this.curriculoListDoc=e.doc(`curriculos/${s.uid}`),this.curriculoList=this.curriculoListDoc.valueChanges(),!s.curriculosUID)&&this.afs.doc(`curriculos/${s.uid}`).set({uid:s.uid,ownerUID:s.uid,curriculos:[]},{merge:!0}).then(p=>{s.curriculosUID=s.uid,this.authService.setUserData(s).then()})}updateCurriculosList(e){return e?this.afs.doc(`curriculos/${e.uid}`).set(e,{merge:!0}):Promise.reject()}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(W1),l.LFG(ra))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Aie=["dataNascimentoInput"];function Mie(n,t){if(1&n&&(l.TgZ(0,"mat-option",19),l._uU(1),l.qZA()),2&n){const e=t.$implicit;l.Q6J("value",e),l.xp6(1),l.Oqu(e)}}let _6=(()=>{class n{constructor(e,i,r){this.curriculosService=e,this.route=i,this._nav=r,this.curriculosList=void 0,this.curriculoSelected=void 0,this.dataNascimento=new Za(new Date,[Xi.required]),this.uid=null,this.estadoCivisList=["Solteiro","Solteira","Casado","Casada","Vi\xfavo","Vi\xfava","Divorciado","Divorciada"],this.curriculoForm=new Vg({name:new Za("",[Xi.required,Xi.maxLength(35)]),identifier:new Za("",[Xi.required,Xi.maxLength(25)]),email:new Za("",[Xi.required,Xi.email,Xi.maxLength(30)]),estado_civil:new Za("",[Xi.required,n.checkCategoryInput(this.estadoCivisList)]),data_nascimento:new Za("",[Xi.required,n.checkIsValidDate()]),nacionalidade:new Za("",[Xi.required,Xi.maxLength(20)]),telefone:new Za("",[Xi.required,Xi.maxLength(16)]),whatsapp:new Za(!1,[Xi.required])}),this.uid=this.route.snapshot.paramMap.get("id"),this.curriculosService.curriculoList?.subscribe(s=>{this.curriculosList=s,this.curriculoSelected=this.curriculosList?.curriculos.filter(c=>c.uid=this.uid)[0],this.preencheValoresIniciais()})}ngOnInit(){}preencheValoresIniciais(){const e=this.curriculoSelected.data_nascimento;this.curriculoForm.patchValue({name:this.curriculoSelected.name,identifier:this.curriculoSelected.identifier,email:this.curriculoSelected.email,estado_civil:this.curriculoSelected.estado_civil,data_nascimento:e,nacionalidade:this.curriculoSelected.nacionalidade,telefone:this.curriculoSelected.telefone,whatsapp:this.curriculoSelected.whatsapp});const i=new Date(e);i&&this.dataNascimento.setValue(i)}changeDatePicker(){const e=this.dataNascimento.value,s=this.dataInput.nativeElement.value.replace(/(\d{2})\/(\d{2})\/(\d{4})/,"$2/$1/$3")||new Intl.DateTimeFormat("en-US").format(e);this.curriculoForm.controls.data_nascimento.setValue(s)}static checkCategoryInput(e){return i=>{const r=i.value;return e.includes(r)?null:{"not-in-list":r}}}static checkIsValidDate(){return e=>{const i=e.value;return 10==i.length&&n.isValidDate(new Date(i))?null:{"not-valid-date":i}}}static isValidDate(e){return e instanceof Date&&!isNaN(e.getTime())}gravar(){if(this.isFormValid()){const e={uid:this.uid,...this.curriculoForm.getRawValue()};if(console.log({curriculo:e}),this.isEditMode()){const i=this.curriculosList?.curriculos.filter(r=>r.uid!=this.uid);i.push(e),this.curriculoSelected=e,this.curriculosList.curriculos=i}else this.curriculosList?.curriculos.push(e);this.curriculosService.updateCurriculosList(this.curriculosList).then(i=>{console.log({obj:i}),this._nav.navigateTo("painel")}).catch(i=>{console.log({err:i})})}}isEditMode(){return!!this.uid}pageTitle(){return this.isEditMode()?"Edi\xe7\xe3o de Curr\xedculo":"Cadastro de Curr\xedculo"}isFormValid(){return this.curriculoForm.valid}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(g6),l.Y36(af),l.Y36(NC))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-formulario-curriculo"]],viewQuery:function(e,i){if(1&e&&l.Gf(Aie,5),2&e){let r;l.iGM(r=l.CRH())&&(i.dataInput=r.first)}},decls:48,vars:7,consts:[[1,"container"],[1,"mat-h2"],[1,"my-form",3,"formGroup"],["appearance","fill",1,"full-width"],["matInput","","required","","formControlName","identifier"],["matInput","","required","","formControlName","name","autocomplete","full-name"],["matInput","","required","","formControlName","email","autocomplete","current-email"],["appearance","fill"],["formControlName","estado_civil"],[3,"value",4,"ngFor","ngForOf"],["matInput","",3,"matDatepicker","formControl","keyup","onchange","dateChange"],["dataNascimentoInput",""],["matSuffix","",3,"for"],["picker",""],["formControlName","data_nascimento",1,"display-none"],["matInput","","required","","formControlName","nacionalidade","autocomplete","nacionalidade"],["matInput","","required","","formControlName","telefone","autocomplete","telefone"],["color","primary","formControlName","whatsapp"],["mat-raised-button","","color","primary",3,"disabled","click"],[3,"value"]],template:function(e,i){if(1&e&&(l.TgZ(0,"div",0)(1,"h2",1),l._uU(2),l.qZA(),l.TgZ(3,"form",2)(4,"mat-form-field",3)(5,"mat-label"),l._uU(6,"Identificador"),l.qZA(),l._UZ(7,"input",4),l.qZA(),l.TgZ(8,"h3"),l._uU(9,"Dados Pessoais"),l.qZA(),l.TgZ(10,"mat-form-field",3)(11,"mat-label"),l._uU(12,"Nome Completo"),l.qZA(),l._UZ(13,"input",5),l.qZA(),l.TgZ(14,"mat-form-field",3)(15,"mat-label"),l._uU(16,"Email"),l.qZA(),l._UZ(17,"input",6),l.qZA(),l.TgZ(18,"mat-form-field",7)(19,"mat-label"),l._uU(20,"Estado Civil"),l.qZA(),l.TgZ(21,"mat-select",8)(22,"mat-option"),l._uU(23,"N\xe3o selecionado"),l.qZA(),l.YNc(24,Mie,2,2,"mat-option",9),l.qZA()(),l.TgZ(25,"mat-form-field",7)(26,"mat-label"),l._uU(27,"Data de Nascimento"),l.qZA(),l.TgZ(28,"input",10,11),l.NdJ("keyup",function(){return i.changeDatePicker()})("onchange",function(){return i.changeDatePicker()})("dateChange",function(){return i.changeDatePicker()}),l.qZA(),l.TgZ(30,"mat-hint"),l._uU(31,"DD/MM/AAAA"),l.qZA(),l._UZ(32,"mat-datepicker-toggle",12)(33,"mat-datepicker",null,13),l.qZA(),l._UZ(35,"input",14),l.TgZ(36,"mat-form-field",3)(37,"mat-label"),l._uU(38,"Nacionalidade"),l.qZA(),l._UZ(39,"input",15),l.qZA(),l.TgZ(40,"mat-form-field",3)(41,"mat-label"),l._uU(42,"Telefone com DDD"),l.qZA(),l._UZ(43,"input",16),l.qZA(),l.TgZ(44,"mat-checkbox",17),l._uU(45,"Tem whatsapp?"),l.qZA()(),l.TgZ(46,"button",18),l.NdJ("click",function(){return i.gravar()}),l._uU(47," Salvar "),l.qZA()()),2&e){const r=l.MAs(34);l.xp6(2),l.Oqu(i.pageTitle()),l.xp6(1),l.Q6J("formGroup",i.curriculoForm),l.xp6(21),l.Q6J("ngForOf",i.estadoCivisList),l.xp6(4),l.Q6J("matDatepicker",r)("formControl",i.dataNascimento),l.xp6(4),l.Q6J("for",r),l.xp6(14),l.Q6J("disabled",!i.isFormValid())}},dependencies:[Hr,lo,Yg,yI,wh,GV,Zg,Qn,jE,vW,hO,IW,zB,op,Jf,Kv,gh,zg,vh,Yu,vb]}),n})();function kie(n,t){1&n&&(l.TgZ(0,"div",4)(1,"span"),l._uU(2,"Voc\xea est\xe1 Logado. Mas ainda n\xe3o consegue fazer nada. O site ainda est\xe1 em desenvolvimento"),l.qZA()())}function xie(n,t){1&n&&(l.TgZ(0,"div",4)(1,"span"),l._uU(2,"J\xe1 possui um cadastro? "),l.TgZ(3,"a",6),l._uU(4,"Fa\xe7a o Login"),l.qZA()()())}function Rie(n,t){if(1&n&&(l.YNc(0,xie,5,0,"div",5),l.ALo(1,"async")),2&n){const e=l.oxw();l.Q6J("ngIf",!l.lcZ(1,1,e.authService.user))}}let Oie=(()=>{class n{constructor(e){this.authService=e}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(ra))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-inicio"]],decls:7,vars:4,consts:[[1,"container"],[1,"mat-h2"],["class","redirectToLogin",4,"ngIf","ngIfElse"],["loggedOut",""],[1,"redirectToLogin"],["class","redirectToLogin",4,"ngIf"],["routerLink","/login","routerLinkActive","active"]],template:function(e,i){if(1&e&&(l.TgZ(0,"div",0)(1,"h2",1),l._uU(2,"P\xe1gina Inicial"),l.qZA(),l.YNc(3,kie,3,0,"div",2),l.ALo(4,"async"),l.YNc(5,Rie,2,3,"ng-template",null,3,l.W1O),l.qZA()),2&e){const r=l.MAs(6);l.xp6(3),l.Q6J("ngIf",l.lcZ(4,2,i.authService.user))("ngIfElse",r)}},dependencies:[bn,_d,ym,fc]}),n})(),Pie=(()=>{class n{constructor(e,i){this.authService=e,this._nav=i}ngOnInit(){this.authService.hasLoggedin.subscribe(e=>{console.log({hasLoggedin:e}),e&&this._nav.navigateTo("/")})}googleLogin(){this.authService.googleLogin()}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(ra),l.Y36(NC))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-login"]],decls:15,vars:0,consts:[[1,"container"],[1,"form-container"],["mat-raised-button","",1,"google",3,"click"],["svgIcon","google_logo",2,"width","40px","height","24px"],[1,"or"],[1,"orInner"],["mat-raised-button","","routerLink","/email-login",1,"email"],[1,"links"],["routerLink","/cadastro","routerLinkActive","active",1,"create-account-txt"]],template:function(e,i){1&e&&(l.TgZ(0,"div",0)(1,"div",1)(2,"button",2),l.NdJ("click",function(){return i.googleLogin()}),l._UZ(3,"mat-icon",3),l._uU(4," Entrar com conta Google "),l.qZA(),l.TgZ(5,"div",4)(6,"span",5),l._uU(7,"ou"),l.qZA()(),l.TgZ(8,"button",6),l._uU(9," Logar com Email "),l.qZA(),l.TgZ(10,"div",7)(11,"a",8),l._uU(12,"N\xe3o tem cadastro? "),l.TgZ(13,"strong"),l._uU(14,"Crie um"),l.qZA()()()()())},dependencies:[my,_d,ym,lo,Dh],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:center}.form-container[_ngcontent-%COMP%]{margin:20px;display:flex;flex-direction:column;align-items:center}.form-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex-basis:20px}.links[_ngcontent-%COMP%]{margin-top:10px}"]}),n})();function Nie(n,t){if(1&n&&(l.TgZ(0,"li")(1,"div",4)(2,"span"),l._uU(3),l.qZA(),l._UZ(4,"div",3),l.TgZ(5,"button",7)(6,"mat-icon"),l._uU(7,"edit"),l.qZA()()()()),2&n){const e=t.$implicit;l.xp6(3),l.Oqu(e.identifier),l.xp6(2),l.MGl("routerLink","/curriculo/",e.uid,"")}}let Fie=(()=>{class n{constructor(e,i){this.authService=e,this.curriculosService=i,this.userCurriculos=[],this.curriculosService.curriculoList?.subscribe(r=>{console.log({userCurriculos:r}),this.userCurriculos=r?.curriculos})}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(ra),l.Y36(g6))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-painel"]],decls:15,vars:2,consts:[[1,"container"],[1,"flex-row","align-items-center"],["mat-icon-button","","color","primary","routerLink","/curriculo"],[1,"full-width"],[1,"flex-row","align-items-center","painel-row"],[1,"mat-body-2"],[4,"ngFor","ngForOf"],["mat-icon-button","","color","primary",3,"routerLink"]],template:function(e,i){1&e&&(l.TgZ(0,"div",0)(1,"div",1)(2,"div"),l._uU(3),l.qZA(),l.TgZ(4,"button",2)(5,"mat-icon"),l._uU(6,"add_circle"),l.qZA()()(),l.TgZ(7,"div",3)(8,"ul")(9,"li")(10,"div",4)(11,"span",5),l._uU(12,"Identificador"),l.qZA(),l._UZ(13,"div",3),l.qZA()(),l.YNc(14,Nie,8,2,"li",6),l.qZA()()()),2&e&&(l.xp6(3),l.hij("Quantidade de Curr\xedculos: ",i.userCurriculos.length,""),l.xp6(11),l.Q6J("ngForOf",i.userCurriculos))},dependencies:[Hr,my,lo,Dh],styles:["span[_ngcontent-%COMP%]{white-space:pre}.painel-row[_ngcontent-%COMP%]{max-width:320px;margin:0 auto}"]}),n})();function Lie(n,t){if(1&n&&(l.TgZ(0,"div",1)(1,"ul")(2,"li"),l._uU(3," Email: "),l.TgZ(4,"strong"),l._uU(5),l.qZA()(),l.TgZ(6,"li"),l._uU(7," Name: "),l.TgZ(8,"strong"),l._uU(9),l.qZA()(),l.TgZ(10,"li"),l._uU(11," Email verified: "),l.TgZ(12,"strong"),l._uU(13),l.qZA()(),l.TgZ(14,"li"),l._uU(15," Uid: "),l.TgZ(16,"strong"),l._uU(17),l.qZA()()()()),2&n){const e=t.ngIf;l.xp6(5),l.Oqu(e.email),l.xp6(4),l.Oqu(e.displayName?e.displayName:"User"),l.xp6(4),l.Oqu(e.emailVerified),l.xp6(4),l.Oqu(e.uid)}}let Vie=(()=>{class n{constructor(e){this.authService=e}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(ra))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-perfil"]],decls:2,vars:3,consts:[["class","container",4,"ngIf"],[1,"container"]],template:function(e,i){1&e&&(l.YNc(0,Lie,18,4,"div",0),l.ALo(1,"async")),2&e&&l.Q6J("ngIf",l.lcZ(1,1,i.authService.user))},dependencies:[bn,fc]}),n})(),Bie=(()=>{class n{constructor(e){this.authService=e}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(ra))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-registro"]],decls:27,vars:0,consts:[[1,"container"],[1,"mat-h3"],[1,"my-form"],["appearance","fill",1,"full-width"],["matInput","","type","email","value","","required",""],["userEmail",""],["matInput","","type","password","required","","autocomplete","current-password"],["userPassword",""],["mat-raised-button","",1,"google",3,"click"],[1,"or"],[1,"orInner"],["svgIcon","google_logo",2,"width","40px","height","24px"],[1,"redirectToLogin"],["routerLink","/login","routerLinkActive","active"]],template:function(e,i){if(1&e){const r=l.EpF();l.TgZ(0,"div",0)(1,"h3",1),l._uU(2,"Fa\xe7a o seu cadastro"),l.qZA(),l.TgZ(3,"form",2)(4,"mat-form-field",3)(5,"mat-label"),l._uU(6,"Endere\xe7o de Email"),l.qZA(),l._UZ(7,"input",4,5),l.qZA(),l.TgZ(9,"mat-form-field",3)(10,"mat-label"),l._uU(11,"Senha"),l.qZA(),l._UZ(12,"input",6,7),l.qZA()(),l.TgZ(14,"button",8),l.NdJ("click",function(){l.CHM(r);const c=l.MAs(8),d=l.MAs(13);return l.KtG(i.authService.signUp(c.value,d.value))}),l._uU(15," Cadastrar "),l.qZA(),l.TgZ(16,"div",9)(17,"span",10),l._uU(18,"ou"),l.qZA()(),l.TgZ(19,"button",8),l.NdJ("click",function(){return i.authService.googleLogin()}),l._UZ(20,"mat-icon",11),l._uU(21," Continuar com conta Google "),l.qZA(),l.TgZ(22,"div",12)(23,"span"),l._uU(24,"J\xe1 possui um cadastro? "),l.TgZ(25,"a",13),l._uU(26,"Fa\xe7a o Login"),l.qZA()()()()}},dependencies:[_d,ym,lo,Yg,wh,Zg,Dh,op,gh],styles:[".my-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%;display:flex;flex-direction:column}.container[_ngcontent-%COMP%]{margin-top:10px;width:100%;display:flex;flex-direction:column;align-items:center}.redirectToLogin[_ngcontent-%COMP%]{margin-top:15px}"]}),n})();function Uie(n,t){if(1&n&&(l.TgZ(0,"div")(1,"p",6),l._uU(2," N\xf3s enviamos um email de confirmacao para "),l.TgZ(3,"strong"),l._uU(4),l.qZA(),l._uU(5,". "),l.qZA(),l.TgZ(6,"p",6),l._uU(7," Para regularizar seu acesso confira seu email e click no link para verificar seu email. "),l.qZA()()),2&n){const e=t.ngIf;l.xp6(4),l.Oqu(e.email)}}const Hie=[{path:"",component:Oie},{path:"login",component:Pie,canActivate:[aM]},{path:"cadastro",component:Bie,canActivate:[aM]},{path:"perfil",component:Vie,canActivate:[FC]},{path:"email-login",component:Sie,canActivate:[aM]},{path:"painel",component:Fie,canActivate:[FC]},{path:"esqueceu-senha",component:Tie,canActivate:[aM]},{path:"verificar-email",component:(()=>{class n{constructor(e){this.authService=e}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(ra))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-verificar-email"]],decls:12,vars:3,consts:[[1,"container"],[1,"mat-h2"],[4,"ngIf"],["mat-raised-button","",3,"click"],[1,"redirectToLogin","text-center"],["routerLink","/login","routerLinkActive","active"],[1,"text-center"]],template:function(e,i){1&e&&(l.TgZ(0,"div",0)(1,"h2",1),l._uU(2,"Obrigado por se cadastrar"),l.qZA(),l.YNc(3,Uie,8,1,"div",2),l.ALo(4,"async"),l.TgZ(5,"button",3),l.NdJ("click",function(){return i.authService.sendVerificationMail()}),l._uU(6," Reenviar verifica\xe7\xe3o "),l.qZA(),l.TgZ(7,"div",4)(8,"span"),l._uU(9,"Voltar e fazer "),l.TgZ(10,"a",5),l._uU(11,"Login?"),l.qZA()()()()),2&e&&(l.xp6(3),l.Q6J("ngIf",l.lcZ(4,1,i.authService.user)))},dependencies:[bn,_d,ym,lo,fc],styles:[".my-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%;display:flex;flex-direction:column}.full-width[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]{margin-top:10px;width:100%;display:flex;flex-direction:column;align-items:center}.redirectToLogin[_ngcontent-%COMP%]{margin-top:15px}"]}),n})(),canActivate:[FC]},{path:"curriculo",component:_6,canActivate:[FC]},{path:"curriculo/:id",component:_6,canActivate:[FC]}];let jie=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[p6.forRoot(Hie),p6]}),n})();const OL_firebaseConfig={apiKey:"AIzaSyDgzRquxls0_dgaA7t8UwnYXDhZ7416imI",authDomain:"curriculos-seve.firebaseapp.com",databaseURL:"https://curriculos-seve-default-rtdb.firebaseio.com",projectId:"curriculos-seve",storageBucket:"curriculos-seve.appspot.com",messagingSenderId:"963696035317",appId:"1:963696035317:web:2cb36dd541afc99f164cbc",measurementId:"G-2ZDXBRCGC2"};function $ie(n,t){1&n&&(l.TgZ(0,"button",9)(1,"mat-icon"),l._uU(2,"dashboard"),l.qZA(),l.TgZ(3,"span"),l._uU(4,"Painel"),l.qZA()())}function Gie(n,t){1&n&&(l.TgZ(0,"button",10)(1,"mat-icon"),l._uU(2,"person"),l.qZA(),l.TgZ(3,"span"),l._uU(4,"Perfil"),l.qZA()())}function zie(n,t){1&n&&(l.TgZ(0,"button",11)(1,"mat-icon"),l._uU(2,"login"),l.qZA(),l.TgZ(3,"span"),l._uU(4,"Entrar"),l.qZA()())}function qie(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"button",12),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.logout())}),l.TgZ(1,"mat-icon"),l._uU(2,"logout"),l.qZA(),l.TgZ(3,"span"),l._uU(4,"Sair"),l.qZA()()}}let Wie=(()=>{class n{constructor(e,i,r,s){this.matIconRegistry=e,this.domSanitizer=i,this.authService=r,this._nav=s,this.title="curriculo-facil",this.matIconRegistry.addSvgIcon("google_logo",this.domSanitizer.bypassSecurityTrustResourceUrl("/curriculo-facil/assets/svg/google.svg"))}logout(){this.authService.signOut().then(()=>{this._nav.navigateTo("/")})}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(_p),l.Y36(to),l.Y36(ra),l.Y36(NC))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-root"]],decls:24,vars:13,consts:[[1,"full-width"],["mat-icon-button","","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],[1,"mat-body"],["menu","matMenu"],["mat-menu-item","","routerLink","/"],["mat-menu-item","","routerLink","/painel",4,"ngIf"],["mat-menu-item","","routerLink","/perfil",4,"ngIf"],["mat-menu-item","","routerLink","/login",4,"ngIf"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","","routerLink","/painel"],["mat-menu-item","","routerLink","/perfil"],["mat-menu-item","","routerLink","/login"],["mat-menu-item","",3,"click"]],template:function(e,i){if(1&e&&(l.TgZ(0,"mat-toolbar")(1,"span"),l._uU(2,"Curr\xedculo F\xe1cil"),l.qZA(),l._UZ(3,"div",0),l.TgZ(4,"button",1)(5,"mat-icon"),l._uU(6,"menu"),l.qZA()()(),l.TgZ(7,"div",2),l._UZ(8,"router-outlet"),l.qZA(),l.TgZ(9,"mat-menu",null,3)(11,"button",4)(12,"mat-icon"),l._uU(13,"home"),l.qZA(),l.TgZ(14,"span"),l._uU(15,"Inicial"),l.qZA()(),l.YNc(16,$ie,5,0,"button",5),l.ALo(17,"async"),l.YNc(18,Gie,5,0,"button",6),l.ALo(19,"async"),l.YNc(20,zie,5,0,"button",7),l.ALo(21,"async"),l.YNc(22,qie,5,0,"button",8),l.ALo(23,"async"),l.qZA()),2&e){const r=l.MAs(10);l.xp6(4),l.Q6J("matMenuTriggerFor",r),l.xp6(12),l.Q6J("ngIf",l.lcZ(17,5,i.authService.user)),l.xp6(2),l.Q6J("ngIf",l.lcZ(19,7,i.authService.user)),l.xp6(2),l.Q6J("ngIf",!l.lcZ(21,9,i.authService.user)),l.xp6(2),l.Q6J("ngIf",l.lcZ(23,11,i.authService.user))}},dependencies:[bn,bL,my,$E,lo,Dh,tO,f_,nO,fc]}),n})(),Yie=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n,bootstrap:[Wie]}),n.\u0275inj=l.cJS({providers:[ra,{provide:Zm,useValue:"pt-BR"}],imports:[Oo,jie,Dg,ck,Ky,cR,IR,OE,yR,KR,iO,td,SW,BW,cI,wr.hO.initializeApp(OL_firebaseConfig),B4,X9,AZ,lte]}),n})();(0,l.G48)(),Tl().bootstrapModule(Yie).catch(n=>console.error(n))},5867:(ht,ke,L)=>{L.d(ke,{C6:()=>l.getApps,Mq:()=>l.getApp});var l=L(9681);(0,l.registerVersion)("firebase","9.9.4","app")},127:(ht,ke,L)=>{L.d(ke,{Z:()=>l.Z});var l=L(3942);l.Z.registerVersion("firebase","9.9.4","app-compat")},5881:(ht,ke,L)=>{L.r(ke);var l=L(5861),H=L(3942),P=L(8554),ce=L(2090),ae=(L(9681),L(1877),L(4859));function me(){return window}function Y(){return(Y=(0,l.Z)(function*(re,$,q){var Ce;const{BuildInfo:Ye}=me();(0,P.aq)($.sessionId,"AuthEvent did not contain a session ID");const vt=yield _e($.sessionId),It={};return(0,P.ar)()?It.ibi=Ye.packageName:(0,P.as)()?It.apn=Ye.packageName:(0,P.at)(re,"operation-not-supported-in-this-environment"),Ye.displayName&&(It.appDisplayName=Ye.displayName),It.sessionId=vt,(0,P.au)(re,q,$.type,void 0,null!==(Ce=$.eventId)&&void 0!==Ce?Ce:void 0,It)})).apply(this,arguments)}function Ge(){return(Ge=(0,l.Z)(function*(re){const{BuildInfo:$}=me(),q={};(0,P.ar)()?q.iosBundleId=$.packageName:(0,P.as)()?q.androidPackageName=$.packageName:(0,P.at)(re,"operation-not-supported-in-this-environment"),yield(0,P.av)(re,q)})).apply(this,arguments)}function lt(){return(lt=(0,l.Z)(function*(re,$,q){const{cordova:Ce}=me();let Ye=()=>{};try{yield new Promise((vt,It)=>{let Le=null;function at(){var Bt;vt();const vn=null===(Bt=Ce.plugins.browsertab)||void 0===Bt?void 0:Bt.close;"function"==typeof vn&&vn(),"function"==typeof q?.close&&q.close()}function Xt(){Le||(Le=window.setTimeout(()=>{It((0,P.aw)(re,"redirect-cancelled-by-user"))},2e3))}function Nn(){"visible"===document?.visibilityState&&Xt()}$.addPassiveListener(at),document.addEventListener("resume",Xt,!1),(0,P.as)()&&document.addEventListener("visibilitychange",Nn,!1),Ye=()=>{$.removePassiveListener(at),document.removeEventListener("resume",Xt,!1),document.removeEventListener("visibilitychange",Nn,!1),Le&&window.clearTimeout(Le)}})}finally{Ye()}})).apply(this,arguments)}function _e(re){return it.apply(this,arguments)}function it(){return(it=(0,l.Z)(function*(re){const $=rt(re),q=yield crypto.subtle.digest("SHA-256",$);return Array.from(new Uint8Array(q)).map(Ye=>Ye.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function rt(re){if((0,P.aq)(/[0-9a-zA-Z]+/.test(re),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(re);const $=new ArrayBuffer(re.length),q=new Uint8Array($);for(let Ce=0;Ce<re.length;Ce++)q[Ce]=re.charCodeAt(Ce);return q}class Re extends P.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise($=>{this.resolveInialized=$})}addPassiveListener($){this.passiveListeners.add($)}removePassiveListener($){this.passiveListeners.delete($)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent($){return this.resolveInialized(),this.passiveListeners.forEach(q=>q($)),super.onEvent($)}initialized(){var $=this;return(0,l.Z)(function*(){yield $.initPromise})()}}function le(re){return he.apply(this,arguments)}function he(){return(he=(0,l.Z)(function*(re){const $=yield ne()._get(ge(re));return $&&(yield ne()._remove(ge(re))),$})).apply(this,arguments)}function J(){const re=[],$="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let q=0;q<20;q++){const Ce=Math.floor(Math.random()*$.length);re.push($.charAt(Ce))}return re.join("")}function ne(){return(0,P.ay)(P.b)}function ge(re){return(0,P.az)("authEvent",re.config.apiKey,re.name)}function He(re){if(!re?.includes("?"))return{};const[$,...q]=re.split("?");return(0,ce.zd)(q.join("?"))}function Ze(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,P.aw)("no-auth-event")}}function Wt(){var re;return(null===(re=self?.location)||void 0===re?void 0:re.protocol)||null}function xi(re=(0,ce.z$)()){return!("file:"!==Wt()&&"ionic:"!==Wt()&&"capacitor:"!==Wt()||!re.toLowerCase().match(/iphone|ipad|ipod|android/))}function is(){try{const re=self.localStorage,$=P.aI();if(re)return re.setItem($,"1"),re.removeItem($),!function vs(re=(0,ce.z$)()){return function Ri(){return(0,ce.w1)()&&11===document?.documentMode}()||function Pn(re=(0,ce.z$)()){return/Edge\/\d+/.test(re)}(re)}()||(0,ce.hl)()}catch{return dr()&&(0,ce.hl)()}return!1}function dr(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function $n(){return(function Ht(){return"http:"===Wt()||"https:"===Wt()}()||(0,ce.ru)()||xi())&&!function wo(){return(0,ce.b$)()||(0,ce.UG)()}()&&is()&&!dr()}function Ur(){return xi()&&typeof document<"u"}function st(){return(st=(0,l.Z)(function*(){return!!Ur()&&new Promise(re=>{const $=setTimeout(()=>{re(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout($),re(!0)})})})).apply(this,arguments)}const Gn={LOCAL:"local",NONE:"none",SESSION:"session"},yn=P.ax,Ii="persistence";function Mn(re){return kn.apply(this,arguments)}function kn(){return(kn=(0,l.Z)(function*(re){yield re._initializationPromise;const $=pt(),q=P.az(Ii,re.config.apiKey,re.name);$&&$.setItem(q,re._getPersistence())})).apply(this,arguments)}function pt(){var re;try{return(null===(re=function Di(){return typeof window<"u"?window:null}())||void 0===re?void 0:re.sessionStorage)||null}catch{return null}}const mt=P.ax;class Nt{constructor(){this.browserResolver=P.ay(P.k),this.cordovaResolver=P.ay(class en{constructor(){this._redirectPersistence=P.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=P.aB,this._overrideRedirectResult=P.aC}_initialize($){var q=this;return(0,l.Z)(function*(){const Ce=$._key();let Ye=q.eventManagers.get(Ce);return Ye||(Ye=new Re($),q.eventManagers.set(Ce,Ye),q.attachCallbackListeners($,Ye)),Ye})()}_openPopup($){(0,P.at)($,"operation-not-supported-in-this-environment")}_openRedirect($,q,Ce,Ye){var vt=this;return(0,l.Z)(function*(){!function Ee(re){var $,q,Ce,Ye,vt,It,Le,at,Xt,Nn;const Bt=me();(0,P.ax)("function"==typeof(null===($=Bt?.universalLinks)||void 0===$?void 0:$.subscribe),re,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,P.ax)(typeof(null===(q=Bt?.BuildInfo)||void 0===q?void 0:q.packageName)<"u",re,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,P.ax)("function"==typeof(null===(vt=null===(Ye=null===(Ce=Bt?.cordova)||void 0===Ce?void 0:Ce.plugins)||void 0===Ye?void 0:Ye.browsertab)||void 0===vt?void 0:vt.openUrl),re,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.ax)("function"==typeof(null===(at=null===(Le=null===(It=Bt?.cordova)||void 0===It?void 0:It.plugins)||void 0===Le?void 0:Le.browsertab)||void 0===at?void 0:at.isAvailable),re,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.ax)("function"==typeof(null===(Nn=null===(Xt=Bt?.cordova)||void 0===Xt?void 0:Xt.InAppBrowser)||void 0===Nn?void 0:Nn.open),re,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}($);const It=yield vt._initialize($);yield It.initialized(),It.resetRedirect(),(0,P.aD)(),yield vt._originValidation($);const Le=function Se(re,$,q=null){return{type:$,eventId:q,urlResponse:null,sessionId:J(),postBody:null,tenantId:re.tenantId,error:(0,P.aw)(re,"no-auth-event")}}($,Ce,Ye);yield function We(re,$){return ne()._set(ge(re),$)}($,Le);const at=yield function W(re,$,q){return Y.apply(this,arguments)}($,Le,q),Xt=yield function Ne(re){const{cordova:$}=me();return new Promise(q=>{$.plugins.browsertab.isAvailable(Ce=>{let Ye=null;Ce?$.plugins.browsertab.openUrl(re):Ye=$.InAppBrowser.open(re,(0,P.ap)()?"_blank":"_system","location=yes"),q(Ye)})})}(at);return function Ie(re,$,q){return lt.apply(this,arguments)}($,It,Xt)})()}_isIframeWebStorageSupported($,q){throw new Error("Method not implemented.")}_originValidation($){const q=$._key();return this.originValidationPromises[q]||(this.originValidationPromises[q]=function ee(re){return Ge.apply(this,arguments)}($)),this.originValidationPromises[q]}attachCallbackListeners($,q){const{universalLinks:Ce,handleOpenURL:Ye,BuildInfo:vt}=me(),It=setTimeout((0,l.Z)(function*(){yield le($),q.onEvent(Ze())}),500),Le=function(){var Nn=(0,l.Z)(function*(Bt){clearTimeout(It);const vn=yield le($);let bs=null;vn&&Bt?.url&&(bs=function be(re,$){var q,Ce;const Ye=function Ue(re){const $=He(re),q=$.link?decodeURIComponent($.link):void 0,Ce=He(q).link,Ye=$.deep_link_id?decodeURIComponent($.deep_link_id):void 0;return He(Ye).link||Ye||Ce||q||re}($);if(Ye.includes("/__/auth/callback")){const vt=He(Ye),It=vt.firebaseError?function ue(re){try{return JSON.parse(re)}catch{return null}}(decodeURIComponent(vt.firebaseError)):null,Le=null===(Ce=null===(q=It?.code)||void 0===q?void 0:q.split("auth/"))||void 0===Ce?void 0:Ce[1],at=Le?(0,P.aw)(Le):null;return at?{type:re.type,eventId:re.eventId,tenantId:re.tenantId,error:at,urlResponse:null,sessionId:null,postBody:null}:{type:re.type,eventId:re.eventId,tenantId:re.tenantId,sessionId:re.sessionId,urlResponse:Ye,postBody:null}}return null}(vn,Bt.url)),q.onEvent(bs||Ze())});return function(vn){return Nn.apply(this,arguments)}}();typeof Ce<"u"&&"function"==typeof Ce.subscribe&&Ce.subscribe(null,Le);const at=Ye,Xt=`${vt.packageName.toLowerCase()}://`;me().handleOpenURL=function(){var Nn=(0,l.Z)(function*(Bt){if(Bt.toLowerCase().startsWith(Xt)&&Le({url:Bt}),"function"==typeof at)try{at(Bt)}catch(vn){console.error(vn)}});return function(Bt){return Nn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=P.a,this._completeRedirectFn=P.aB,this._overrideRedirectResult=P.aC}_initialize($){var q=this;return(0,l.Z)(function*(){return yield q.selectUnderlyingResolver(),q.assertedUnderlyingResolver._initialize($)})()}_openPopup($,q,Ce,Ye){var vt=this;return(0,l.Z)(function*(){return yield vt.selectUnderlyingResolver(),vt.assertedUnderlyingResolver._openPopup($,q,Ce,Ye)})()}_openRedirect($,q,Ce,Ye){var vt=this;return(0,l.Z)(function*(){return yield vt.selectUnderlyingResolver(),vt.assertedUnderlyingResolver._openRedirect($,q,Ce,Ye)})()}_isIframeWebStorageSupported($,q){this.assertedUnderlyingResolver._isIframeWebStorageSupported($,q)}_originValidation($){return this.assertedUnderlyingResolver._originValidation($)}get _shouldInitProactively(){return Ur()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return mt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var $=this;return(0,l.Z)(function*(){if($.underlyingResolver)return;const q=yield function rs(){return st.apply(this,arguments)}();$.underlyingResolver=q?$.cordovaResolver:$.browserResolver})()}}function nr(re){return re.unwrap()}function Oi(re){return qi(re)}function qi(re){const{_tokenResponse:$}=re instanceof ce.ZR?re.customData:re;if(!$)return null;if(!(re instanceof ce.ZR)&&"temporaryProof"in $&&"phoneNumber"in $)return P.P.credentialFromResult(re);const q=$.providerId;if(!q||q===P.o.PASSWORD)return null;let Ce;switch(q){case P.o.GOOGLE:Ce=P.Q;break;case P.o.FACEBOOK:Ce=P.N;break;case P.o.GITHUB:Ce=P.T;break;case P.o.TWITTER:Ce=P.W;break;default:const{oauthIdToken:Ye,oauthAccessToken:vt,oauthTokenSecret:It,pendingToken:Le,nonce:at}=$;return vt||It||Ye||Le?Le?q.startsWith("saml.")?P.aL._create(q,Le):P.J._fromParams({providerId:q,signInMethod:q,pendingToken:Le,idToken:Ye,accessToken:vt}):new P.U(q).credential({idToken:Ye,accessToken:vt,rawNonce:at}):null}return re instanceof ce.ZR?Ce.credentialFromError(re):Ce.credentialFromResult(re)}function Lt(re,$){return $.catch(q=>{throw q instanceof ce.ZR&&function Mt(re,$){var q,Ce;const Ye=null===(q=$.customData)||void 0===q?void 0:q._tokenResponse;if("auth/multi-factor-auth-required"===(null===(Ce=$)||void 0===Ce?void 0:Ce.code))$.resolver=new X(re,P.an(re,$));else if(Ye){const vt=qi($),It=$;vt&&(It.credential=vt,It.tenantId=Ye.tenantId||void 0,It.email=Ye.email||void 0,It.phoneNumber=Ye.phoneNumber||void 0)}}(re,q),q}).then(q=>{const Ye=q.user;return{operationType:q.operationType,credential:Oi(q),additionalUserInfo:P.al(q),user:G.getOrCreate(Ye)}})}function hr(re,$){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,l.Z)(function*(re,$){const q=yield $;return{verificationId:q.verificationId,confirm:Ce=>Lt(re,q.confirm(Ce))}})).apply(this,arguments)}class X{constructor($,q){this.resolver=q,this.auth=function Si(re){return re.wrapped()}($)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn($){return Lt(nr(this.auth),this.resolver.resolveSignIn($))}}class G{constructor($){this._delegate=$,this.multiFactor=P.ao($)}static getOrCreate($){return G.USER_MAP.has($)||G.USER_MAP.set($,new G($)),G.USER_MAP.get($)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult($){return this._delegate.getIdTokenResult($)}getIdToken($){return this._delegate.getIdToken($)}linkAndRetrieveDataWithCredential($){return this.linkWithCredential($)}linkWithCredential($){var q=this;return(0,l.Z)(function*(){return Lt(q.auth,P.Z(q._delegate,$))})()}linkWithPhoneNumber($,q){var Ce=this;return(0,l.Z)(function*(){return hr(Ce.auth,P.l(Ce._delegate,$,q))})()}linkWithPopup($){var q=this;return(0,l.Z)(function*(){return Lt(q.auth,P.d(q._delegate,$,Nt))})()}linkWithRedirect($){var q=this;return(0,l.Z)(function*(){return yield Mn(P.aE(q.auth)),P.g(q._delegate,$,Nt)})()}reauthenticateAndRetrieveDataWithCredential($){return this.reauthenticateWithCredential($)}reauthenticateWithCredential($){var q=this;return(0,l.Z)(function*(){return Lt(q.auth,P._(q._delegate,$))})()}reauthenticateWithPhoneNumber($,q){return hr(this.auth,P.r(this._delegate,$,q))}reauthenticateWithPopup($){return Lt(this.auth,P.e(this._delegate,$,Nt))}reauthenticateWithRedirect($){var q=this;return(0,l.Z)(function*(){return yield Mn(P.aE(q.auth)),P.h(q._delegate,$,Nt)})()}sendEmailVerification($){return P.ab(this._delegate,$)}unlink($){var q=this;return(0,l.Z)(function*(){return yield P.ak(q._delegate,$),q})()}updateEmail($){return P.ag(this._delegate,$)}updatePassword($){return P.ah(this._delegate,$)}updatePhoneNumber($){return P.u(this._delegate,$)}updateProfile($){return P.af(this._delegate,$)}verifyBeforeUpdateEmail($,q){return P.ac(this._delegate,$,q)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}G.USER_MAP=new WeakMap;const j=P.ax;let Z=(()=>{class re{constructor(q,Ce){if(this.app=q,Ce.isInitialized())return this._delegate=Ce.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ye}=q.options;j(Ye,"invalid-api-key",{appName:q.name}),j(Ye,"invalid-api-key",{appName:q.name});const vt=typeof window<"u"?Nt:void 0;this._delegate=Ce.initialize({options:{persistence:Ae(Ye,q.name),popupRedirectResolver:vt}}),this._delegate._updateErrorMap(P.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?G.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(q){this._delegate.languageCode=q}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(q){this._delegate.tenantId=q}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(q,Ce){P.G(this._delegate,q,Ce)}applyActionCode(q){return P.a2(this._delegate,q)}checkActionCode(q){return P.a3(this._delegate,q)}confirmPasswordReset(q,Ce){return P.a1(this._delegate,q,Ce)}createUserWithEmailAndPassword(q,Ce){var Ye=this;return(0,l.Z)(function*(){return Lt(Ye._delegate,P.a5(Ye._delegate,q,Ce))})()}fetchProvidersForEmail(q){return this.fetchSignInMethodsForEmail(q)}fetchSignInMethodsForEmail(q){return P.aa(this._delegate,q)}isSignInWithEmailLink(q){return P.a8(this._delegate,q)}getRedirectResult(){var q=this;return(0,l.Z)(function*(){j($n(),q._delegate,"operation-not-supported-in-this-environment");const Ce=yield P.j(q._delegate,Nt);return Ce?Lt(q._delegate,Promise.resolve(Ce)):{credential:null,user:null}})()}addFrameworkForLogging(q){!function En(re,$){(0,P.aE)(re)._logFramework($)}(this._delegate,q)}onAuthStateChanged(q,Ce,Ye){const{next:vt,error:It,complete:Le}=K(q,Ce,Ye);return this._delegate.onAuthStateChanged(vt,It,Le)}onIdTokenChanged(q,Ce,Ye){const{next:vt,error:It,complete:Le}=K(q,Ce,Ye);return this._delegate.onIdTokenChanged(vt,It,Le)}sendSignInLinkToEmail(q,Ce){return P.a7(this._delegate,q,Ce)}sendPasswordResetEmail(q,Ce){return P.a0(this._delegate,q,Ce||void 0)}setPersistence(q){var Ce=this;return(0,l.Z)(function*(){let Ye;switch(function ss(re,$){yn(Object.values(Gn).includes($),re,"invalid-persistence-type"),(0,ce.b$)()?yn($!==Gn.SESSION,re,"unsupported-persistence-type"):(0,ce.UG)()?yn($===Gn.NONE,re,"unsupported-persistence-type"):dr()?yn($===Gn.NONE||$===Gn.LOCAL&&(0,ce.hl)(),re,"unsupported-persistence-type"):yn($===Gn.NONE||is(),re,"unsupported-persistence-type")}(Ce._delegate,q),q){case Gn.SESSION:Ye=P.a;break;case Gn.LOCAL:Ye=(yield P.ay(P.i)._isAvailable())?P.i:P.b;break;case Gn.NONE:Ye=P.L;break;default:return P.at("argument-error",{appName:Ce._delegate.name})}return Ce._delegate.setPersistence(Ye)})()}signInAndRetrieveDataWithCredential(q){return this.signInWithCredential(q)}signInAnonymously(){return Lt(this._delegate,P.X(this._delegate))}signInWithCredential(q){return Lt(this._delegate,P.Y(this._delegate,q))}signInWithCustomToken(q){return Lt(this._delegate,P.$(this._delegate,q))}signInWithEmailAndPassword(q,Ce){return Lt(this._delegate,P.a6(this._delegate,q,Ce))}signInWithEmailLink(q,Ce){return Lt(this._delegate,P.a9(this._delegate,q,Ce))}signInWithPhoneNumber(q,Ce){return hr(this._delegate,P.s(this._delegate,q,Ce))}signInWithPopup(q){var Ce=this;return(0,l.Z)(function*(){return j($n(),Ce._delegate,"operation-not-supported-in-this-environment"),Lt(Ce._delegate,P.c(Ce._delegate,q,Nt))})()}signInWithRedirect(q){var Ce=this;return(0,l.Z)(function*(){return j($n(),Ce._delegate,"operation-not-supported-in-this-environment"),yield Mn(Ce._delegate),P.f(Ce._delegate,q,Nt)})()}updateCurrentUser(q){return this._delegate.updateCurrentUser(q)}verifyPasswordResetCode(q){return P.a4(this._delegate,q)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return re.Persistence=Gn,re})();function K(re,$,q){let Ce=re;"function"!=typeof re&&({next:Ce,error:$,complete:q}=re);const Ye=Ce;return{next:It=>Ye(It&&G.getOrCreate(It)),error:$,complete:q}}function Ae(re,$){const q=function Dn(re,$){const q=pt();if(!q)return[];const Ce=P.az(Ii,re,$);switch(q.getItem(Ce)){case Gn.NONE:return[P.L];case Gn.LOCAL:return[P.i,P.a];case Gn.SESSION:return[P.a];default:return[]}}(re,$);if(typeof self<"u"&&!q.includes(P.i)&&q.push(P.i),typeof window<"u")for(const Ce of[P.b,P.a])q.includes(Ce)||q.push(Ce);return q.includes(P.L)||q.push(P.L),q}class qe{constructor(){this.providerId="phone",this._delegate=new P.P(nr(H.Z.auth()))}static credential($,q){return P.P.credential($,q)}verifyPhoneNumber($,q){return this._delegate.verifyPhoneNumber($,q)}unwrap(){return this._delegate}}qe.PHONE_SIGN_IN_METHOD=P.P.PHONE_SIGN_IN_METHOD,qe.PROVIDER_ID=P.P.PROVIDER_ID;const Ct=P.ax;class pn{constructor($,q,Ce=H.Z.app()){var Ye;Ct(null===(Ye=Ce.options)||void 0===Ye?void 0:Ye.apiKey,"invalid-api-key",{appName:Ce.name}),this._delegate=new P.R($,q,Ce.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function oi(re){re.INTERNAL.registerComponent(new ae.wA("auth-compat",$=>{const q=$.getProvider("app-compat").getImmediate(),Ce=$.getProvider("auth");return new Z(q,Ce)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:P.A.EMAIL_SIGNIN,PASSWORD_RESET:P.A.PASSWORD_RESET,RECOVER_EMAIL:P.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:P.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:P.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:P.A.VERIFY_EMAIL}},EmailAuthProvider:P.M,FacebookAuthProvider:P.N,GithubAuthProvider:P.T,GoogleAuthProvider:P.Q,OAuthProvider:P.U,SAMLAuthProvider:P.V,PhoneAuthProvider:qe,PhoneMultiFactorGenerator:P.m,RecaptchaVerifier:pn,TwitterAuthProvider:P.W,Auth:Z,AuthCredential:P.H,Error:ce.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),re.registerVersion("@firebase/auth-compat","0.2.19")}(H.Z)},9751:(ht,ke,L)=>{L.d(ke,{y:()=>me});var l=L(930),H=L(727),P=L(8822),ce=L(9635),de=L(2416),ye=L(576),ae=L(2806);let me=(()=>{class ee{constructor(Ne){Ne&&(this._subscribe=Ne)}lift(Ne){const Ie=new ee;return Ie.source=this,Ie.operator=Ne,Ie}subscribe(Ne,Ie,lt){const Ee=function Y(ee){return ee&&ee instanceof l.Lv||function W(ee){return ee&&(0,ye.m)(ee.next)&&(0,ye.m)(ee.error)&&(0,ye.m)(ee.complete)}(ee)&&(0,H.Nn)(ee)}(Ne)?Ne:new l.Hp(Ne,Ie,lt);return(0,ae.x)(()=>{const{operator:_e,source:it}=this;Ee.add(_e?_e.call(Ee,it):it?this._subscribe(Ee):this._trySubscribe(Ee))}),Ee}_trySubscribe(Ne){try{return this._subscribe(Ne)}catch(Ie){Ne.error(Ie)}}forEach(Ne,Ie){return new(Ie=we(Ie))((lt,Ee)=>{const _e=new l.Hp({next:it=>{try{Ne(it)}catch(rt){Ee(rt),_e.unsubscribe()}},error:Ee,complete:lt});this.subscribe(_e)})}_subscribe(Ne){var Ie;return null===(Ie=this.source)||void 0===Ie?void 0:Ie.subscribe(Ne)}[P.L](){return this}pipe(...Ne){return(0,ce.U)(Ne)(this)}toPromise(Ne){return new(Ne=we(Ne))((Ie,lt)=>{let Ee;this.subscribe(_e=>Ee=_e,_e=>lt(_e),()=>Ie(Ee))})}}return ee.create=Ge=>new ee(Ge),ee})();function we(ee){var Ge;return null!==(Ge=ee??de.v.Promise)&&void 0!==Ge?Ge:Promise}},7579:(ht,ke,L)=>{L.d(ke,{x:()=>ae});var l=L(9751),H=L(727);const ce=(0,L(3888).d)(we=>function(){we(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var de=L(8737),ye=L(2806);let ae=(()=>{class we extends l.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Y){const ee=new me(this,this);return ee.operator=Y,ee}_throwIfClosed(){if(this.closed)throw new ce}next(Y){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ee of this.currentObservers)ee.next(Y)}})}error(Y){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Y;const{observers:ee}=this;for(;ee.length;)ee.shift().error(Y)}})}complete(){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Y}=this;for(;Y.length;)Y.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Y;return(null===(Y=this.observers)||void 0===Y?void 0:Y.length)>0}_trySubscribe(Y){return this._throwIfClosed(),super._trySubscribe(Y)}_subscribe(Y){return this._throwIfClosed(),this._checkFinalizedStatuses(Y),this._innerSubscribe(Y)}_innerSubscribe(Y){const{hasError:ee,isStopped:Ge,observers:Ne}=this;return ee||Ge?H.Lc:(this.currentObservers=null,Ne.push(Y),new H.w0(()=>{this.currentObservers=null,(0,de.P)(Ne,Y)}))}_checkFinalizedStatuses(Y){const{hasError:ee,thrownError:Ge,isStopped:Ne}=this;ee?Y.error(Ge):Ne&&Y.complete()}asObservable(){const Y=new l.y;return Y.source=this,Y}}return we.create=(W,Y)=>new me(W,Y),we})();class me extends ae{constructor(W,Y){super(),this.destination=W,this.source=Y}next(W){var Y,ee;null===(ee=null===(Y=this.destination)||void 0===Y?void 0:Y.next)||void 0===ee||ee.call(Y,W)}error(W){var Y,ee;null===(ee=null===(Y=this.destination)||void 0===Y?void 0:Y.error)||void 0===ee||ee.call(Y,W)}complete(){var W,Y;null===(Y=null===(W=this.destination)||void 0===W?void 0:W.complete)||void 0===Y||Y.call(W)}_subscribe(W){var Y,ee;return null!==(ee=null===(Y=this.source)||void 0===Y?void 0:Y.subscribe(W))&&void 0!==ee?ee:H.Lc}}},930:(ht,ke,L)=>{L.d(ke,{Hp:()=>lt,Lv:()=>ee});var l=L(576),H=L(727),P=L(2416),ce=L(7849),de=L(5032);const ye=we("C",void 0,void 0);function we(Fe,Re,Se){return{kind:Fe,value:Re,error:Se}}var W=L(3410),Y=L(2806);class ee extends H.w0{constructor(Re){super(),this.isStopped=!1,Re?(this.destination=Re,(0,H.Nn)(Re)&&Re.add(this)):this.destination=rt}static create(Re,Se,We){return new lt(Re,Se,We)}next(Re){this.isStopped?it(function me(Fe){return we("N",Fe,void 0)}(Re),this):this._next(Re)}error(Re){this.isStopped?it(function ae(Fe){return we("E",void 0,Fe)}(Re),this):(this.isStopped=!0,this._error(Re))}complete(){this.isStopped?it(ye,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Re){this.destination.next(Re)}_error(Re){try{this.destination.error(Re)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ge=Function.prototype.bind;function Ne(Fe,Re){return Ge.call(Fe,Re)}class Ie{constructor(Re){this.partialObserver=Re}next(Re){const{partialObserver:Se}=this;if(Se.next)try{Se.next(Re)}catch(We){Ee(We)}}error(Re){const{partialObserver:Se}=this;if(Se.error)try{Se.error(Re)}catch(We){Ee(We)}else Ee(Re)}complete(){const{partialObserver:Re}=this;if(Re.complete)try{Re.complete()}catch(Se){Ee(Se)}}}class lt extends ee{constructor(Re,Se,We){let le;if(super(),(0,l.m)(Re)||!Re)le={next:Re??void 0,error:Se??void 0,complete:We??void 0};else{let he;this&&P.v.useDeprecatedNextContext?(he=Object.create(Re),he.unsubscribe=()=>this.unsubscribe(),le={next:Re.next&&Ne(Re.next,he),error:Re.error&&Ne(Re.error,he),complete:Re.complete&&Ne(Re.complete,he)}):le=Re}this.destination=new Ie(le)}}function Ee(Fe){P.v.useDeprecatedSynchronousErrorHandling?(0,Y.O)(Fe):(0,ce.h)(Fe)}function it(Fe,Re){const{onStoppedNotification:Se}=P.v;Se&&W.z.setTimeout(()=>Se(Fe,Re))}const rt={closed:!0,next:de.Z,error:function _e(Fe){throw Fe},complete:de.Z}},727:(ht,ke,L)=>{L.d(ke,{Lc:()=>ye,w0:()=>de,Nn:()=>ae});var l=L(576);const P=(0,L(3888).d)(we=>function(Y){we(this),this.message=Y?`${Y.length} errors occurred during unsubscription:\n${Y.map((ee,Ge)=>`${Ge+1}) ${ee.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Y});var ce=L(8737);class de{constructor(W){this.initialTeardown=W,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let W;if(!this.closed){this.closed=!0;const{_parentage:Y}=this;if(Y)if(this._parentage=null,Array.isArray(Y))for(const Ne of Y)Ne.remove(this);else Y.remove(this);const{initialTeardown:ee}=this;if((0,l.m)(ee))try{ee()}catch(Ne){W=Ne instanceof P?Ne.errors:[Ne]}const{_finalizers:Ge}=this;if(Ge){this._finalizers=null;for(const Ne of Ge)try{me(Ne)}catch(Ie){W=W??[],Ie instanceof P?W=[...W,...Ie.errors]:W.push(Ie)}}if(W)throw new P(W)}}add(W){var Y;if(W&&W!==this)if(this.closed)me(W);else{if(W instanceof de){if(W.closed||W._hasParent(this))return;W._addParent(this)}(this._finalizers=null!==(Y=this._finalizers)&&void 0!==Y?Y:[]).push(W)}}_hasParent(W){const{_parentage:Y}=this;return Y===W||Array.isArray(Y)&&Y.includes(W)}_addParent(W){const{_parentage:Y}=this;this._parentage=Array.isArray(Y)?(Y.push(W),Y):Y?[Y,W]:W}_removeParent(W){const{_parentage:Y}=this;Y===W?this._parentage=null:Array.isArray(Y)&&(0,ce.P)(Y,W)}remove(W){const{_finalizers:Y}=this;Y&&(0,ce.P)(Y,W),W instanceof de&&W._removeParent(this)}}de.EMPTY=(()=>{const we=new de;return we.closed=!0,we})();const ye=de.EMPTY;function ae(we){return we instanceof de||we&&"closed"in we&&(0,l.m)(we.remove)&&(0,l.m)(we.add)&&(0,l.m)(we.unsubscribe)}function me(we){(0,l.m)(we)?we():we.unsubscribe()}},2416:(ht,ke,L)=>{L.d(ke,{v:()=>l});const l={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ht,ke,L)=>{L.d(ke,{E:()=>H});const H=new(L(9751).y)(de=>de.complete())},8996:(ht,ke,L)=>{L.d(ke,{D:()=>Re});var l=L(8421),H=L(5363),P=L(9468),ye=L(9751),me=L(2202),we=L(576),W=L(9672);function ee(Se,We){if(!Se)throw new Error("Iterable cannot be null");return new ye.y(le=>{(0,W.f)(le,We,()=>{const he=Se[Symbol.asyncIterator]();(0,W.f)(le,We,()=>{he.next().then(be=>{be.done?le.complete():le.next(be.value)})},0,!0)})})}var Ge=L(3670),Ne=L(8239),Ie=L(1144),lt=L(6495),Ee=L(2206),_e=L(4532),it=L(3260);function Re(Se,We){return We?function Fe(Se,We){if(null!=Se){if((0,Ge.c)(Se))return function ce(Se,We){return(0,l.Xf)(Se).pipe((0,P.R)(We),(0,H.Q)(We))}(Se,We);if((0,Ie.z)(Se))return function ae(Se,We){return new ye.y(le=>{let he=0;return We.schedule(function(){he===Se.length?le.complete():(le.next(Se[he++]),le.closed||this.schedule())})})}(Se,We);if((0,Ne.t)(Se))return function de(Se,We){return(0,l.Xf)(Se).pipe((0,P.R)(We),(0,H.Q)(We))}(Se,We);if((0,Ee.D)(Se))return ee(Se,We);if((0,lt.T)(Se))return function Y(Se,We){return new ye.y(le=>{let he;return(0,W.f)(le,We,()=>{he=Se[me.h](),(0,W.f)(le,We,()=>{let be,J;try{({value:be,done:J}=he.next())}catch(ne){return void le.error(ne)}J?le.complete():le.next(be)},0,!0)}),()=>(0,we.m)(he?.return)&&he.return()})}(Se,We);if((0,it.L)(Se))return function rt(Se,We){return ee((0,it.Q)(Se),We)}(Se,We)}throw(0,_e.z)(Se)}(Se,We):(0,l.Xf)(Se)}},8421:(ht,ke,L)=>{L.d(ke,{Xf:()=>Ge});var l=L(655),H=L(1144),P=L(8239),ce=L(9751),de=L(3670),ye=L(2206),ae=L(4532),me=L(6495),we=L(3260),W=L(576),Y=L(7849),ee=L(8822);function Ge(Fe){if(Fe instanceof ce.y)return Fe;if(null!=Fe){if((0,de.c)(Fe))return function Ne(Fe){return new ce.y(Re=>{const Se=Fe[ee.L]();if((0,W.m)(Se.subscribe))return Se.subscribe(Re);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Fe);if((0,H.z)(Fe))return function Ie(Fe){return new ce.y(Re=>{for(let Se=0;Se<Fe.length&&!Re.closed;Se++)Re.next(Fe[Se]);Re.complete()})}(Fe);if((0,P.t)(Fe))return function lt(Fe){return new ce.y(Re=>{Fe.then(Se=>{Re.closed||(Re.next(Se),Re.complete())},Se=>Re.error(Se)).then(null,Y.h)})}(Fe);if((0,ye.D)(Fe))return _e(Fe);if((0,me.T)(Fe))return function Ee(Fe){return new ce.y(Re=>{for(const Se of Fe)if(Re.next(Se),Re.closed)return;Re.complete()})}(Fe);if((0,we.L)(Fe))return function it(Fe){return _e((0,we.Q)(Fe))}(Fe)}throw(0,ae.z)(Fe)}function _e(Fe){return new ce.y(Re=>{(function rt(Fe,Re){var Se,We,le,he;return(0,l.mG)(this,void 0,void 0,function*(){try{for(Se=(0,l.KL)(Fe);!(We=yield Se.next()).done;)if(Re.next(We.value),Re.closed)return}catch(be){le={error:be}}finally{try{We&&!We.done&&(he=Se.return)&&(yield he.call(Se))}finally{if(le)throw le.error}}Re.complete()})})(Fe,Re).catch(Se=>Re.error(Se))})}},6451:(ht,ke,L)=>{L.d(ke,{T:()=>ye});var l=L(8189),H=L(8421),P=L(515),ce=L(3269),de=L(8996);function ye(...ae){const me=(0,ce.yG)(ae),we=(0,ce._6)(ae,1/0),W=ae;return W.length?1===W.length?(0,H.Xf)(W[0]):(0,l.J)(we)((0,de.D)(W,me)):P.E}},5403:(ht,ke,L)=>{L.d(ke,{x:()=>H});var l=L(930);function H(ce,de,ye,ae,me){return new P(ce,de,ye,ae,me)}class P extends l.Lv{constructor(de,ye,ae,me,we,W){super(de),this.onFinalize=we,this.shouldUnsubscribe=W,this._next=ye?function(Y){try{ye(Y)}catch(ee){de.error(ee)}}:super._next,this._error=me?function(Y){try{me(Y)}catch(ee){de.error(ee)}finally{this.unsubscribe()}}:super._error,this._complete=ae?function(){try{ae()}catch(Y){de.error(Y)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var de;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ye}=this;super.unsubscribe(),!ye&&(null===(de=this.onFinalize)||void 0===de||de.call(this))}}}},4004:(ht,ke,L)=>{L.d(ke,{U:()=>P});var l=L(4482),H=L(5403);function P(ce,de){return(0,l.e)((ye,ae)=>{let me=0;ye.subscribe((0,H.x)(ae,we=>{ae.next(ce.call(de,we,me++))}))})}},8189:(ht,ke,L)=>{L.d(ke,{J:()=>P});var l=L(5577),H=L(4671);function P(ce=1/0){return(0,l.z)(H.y,ce)}},5577:(ht,ke,L)=>{L.d(ke,{z:()=>me});var l=L(4004),H=L(8421),P=L(4482),ce=L(9672),de=L(5403),ae=L(576);function me(we,W,Y=1/0){return(0,ae.m)(W)?me((ee,Ge)=>(0,l.U)((Ne,Ie)=>W(ee,Ne,Ge,Ie))((0,H.Xf)(we(ee,Ge))),Y):("number"==typeof W&&(Y=W),(0,P.e)((ee,Ge)=>function ye(we,W,Y,ee,Ge,Ne,Ie,lt){const Ee=[];let _e=0,it=0,rt=!1;const Fe=()=>{rt&&!Ee.length&&!_e&&W.complete()},Re=We=>_e<ee?Se(We):Ee.push(We),Se=We=>{Ne&&W.next(We),_e++;let le=!1;(0,H.Xf)(Y(We,it++)).subscribe((0,de.x)(W,he=>{Ge?.(he),Ne?Re(he):W.next(he)},()=>{le=!0},void 0,()=>{if(le)try{for(_e--;Ee.length&&_e<ee;){const he=Ee.shift();Ie?(0,ce.f)(W,Ie,()=>Se(he)):Se(he)}Fe()}catch(he){W.error(he)}}))};return we.subscribe((0,de.x)(W,Re,()=>{rt=!0,Fe()})),()=>{lt?.()}}(ee,Ge,we,Y)))}},5363:(ht,ke,L)=>{L.d(ke,{Q:()=>ce});var l=L(9672),H=L(4482),P=L(5403);function ce(de,ye=0){return(0,H.e)((ae,me)=>{ae.subscribe((0,P.x)(me,we=>(0,l.f)(me,de,()=>me.next(we),ye),()=>(0,l.f)(me,de,()=>me.complete(),ye),we=>(0,l.f)(me,de,()=>me.error(we),ye)))})}},3099:(ht,ke,L)=>{L.d(ke,{B:()=>de});var l=L(8421),H=L(7579),P=L(930),ce=L(4482);function de(ae={}){const{connector:me=(()=>new H.x),resetOnError:we=!0,resetOnComplete:W=!0,resetOnRefCountZero:Y=!0}=ae;return ee=>{let Ge,Ne,Ie,lt=0,Ee=!1,_e=!1;const it=()=>{Ne?.unsubscribe(),Ne=void 0},rt=()=>{it(),Ge=Ie=void 0,Ee=_e=!1},Fe=()=>{const Re=Ge;rt(),Re?.unsubscribe()};return(0,ce.e)((Re,Se)=>{lt++,!_e&&!Ee&&it();const We=Ie=Ie??me();Se.add(()=>{lt--,0===lt&&!_e&&!Ee&&(Ne=ye(Fe,Y))}),We.subscribe(Se),!Ge&&lt>0&&(Ge=new P.Hp({next:le=>We.next(le),error:le=>{_e=!0,it(),Ne=ye(rt,we,le),We.error(le)},complete:()=>{Ee=!0,it(),Ne=ye(rt,W),We.complete()}}),(0,l.Xf)(Re).subscribe(Ge))})(ee)}}function ye(ae,me,...we){if(!0===me)return void ae();if(!1===me)return;const W=new P.Hp({next:()=>{W.unsubscribe(),ae()}});return me(...we).subscribe(W)}},9468:(ht,ke,L)=>{L.d(ke,{R:()=>H});var l=L(4482);function H(P,ce=0){return(0,l.e)((de,ye)=>{ye.add(P.schedule(()=>de.subscribe(ye),ce))})}},8505:(ht,ke,L)=>{L.d(ke,{b:()=>de});var l=L(576),H=L(4482),P=L(5403),ce=L(4671);function de(ye,ae,me){const we=(0,l.m)(ye)||ae||me?{next:ye,error:ae,complete:me}:ye;return we?(0,H.e)((W,Y)=>{var ee;null===(ee=we.subscribe)||void 0===ee||ee.call(we);let Ge=!0;W.subscribe((0,P.x)(Y,Ne=>{var Ie;null===(Ie=we.next)||void 0===Ie||Ie.call(we,Ne),Y.next(Ne)},()=>{var Ne;Ge=!1,null===(Ne=we.complete)||void 0===Ne||Ne.call(we),Y.complete()},Ne=>{var Ie;Ge=!1,null===(Ie=we.error)||void 0===Ie||Ie.call(we,Ne),Y.error(Ne)},()=>{var Ne,Ie;Ge&&(null===(Ne=we.unsubscribe)||void 0===Ne||Ne.call(we)),null===(Ie=we.finalize)||void 0===Ie||Ie.call(we)}))}):ce.y}},4408:(ht,ke,L)=>{L.d(ke,{o:()=>de});var l=L(727);class H extends l.w0{constructor(ae,me){super()}schedule(ae,me=0){return this}}const P={setInterval(ye,ae,...me){const{delegate:we}=P;return we?.setInterval?we.setInterval(ye,ae,...me):setInterval(ye,ae,...me)},clearInterval(ye){const{delegate:ae}=P;return(ae?.clearInterval||clearInterval)(ye)},delegate:void 0};var ce=L(8737);class de extends H{constructor(ae,me){super(ae,me),this.scheduler=ae,this.work=me,this.pending=!1}schedule(ae,me=0){if(this.closed)return this;this.state=ae;const we=this.id,W=this.scheduler;return null!=we&&(this.id=this.recycleAsyncId(W,we,me)),this.pending=!0,this.delay=me,this.id=this.id||this.requestAsyncId(W,this.id,me),this}requestAsyncId(ae,me,we=0){return P.setInterval(ae.flush.bind(ae,this),we)}recycleAsyncId(ae,me,we=0){if(null!=we&&this.delay===we&&!1===this.pending)return me;P.clearInterval(me)}execute(ae,me){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const we=this._execute(ae,me);if(we)return we;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ae,me){let W,we=!1;try{this.work(ae)}catch(Y){we=!0,W=Y||new Error("Scheduled action threw falsy error")}if(we)return this.unsubscribe(),W}unsubscribe(){if(!this.closed){const{id:ae,scheduler:me}=this,{actions:we}=me;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ce.P)(we,this),null!=ae&&(this.id=this.recycleAsyncId(me,ae,null)),this.delay=null,super.unsubscribe()}}}},7565:(ht,ke,L)=>{L.d(ke,{v:()=>P});var l=L(6063);class H{constructor(de,ye=H.now){this.schedulerActionCtor=de,this.now=ye}schedule(de,ye=0,ae){return new this.schedulerActionCtor(this,de).schedule(ae,ye)}}H.now=l.l.now;class P extends H{constructor(de,ye=H.now){super(de,ye),this.actions=[],this._active=!1,this._scheduled=void 0}flush(de){const{actions:ye}=this;if(this._active)return void ye.push(de);let ae;this._active=!0;do{if(ae=de.execute(de.state,de.delay))break}while(de=ye.shift());if(this._active=!1,ae){for(;de=ye.shift();)de.unsubscribe();throw ae}}}},4986:(ht,ke,L)=>{L.d(ke,{P:()=>ce,z:()=>P});var l=L(4408);const P=new(L(7565).v)(l.o),ce=P},6063:(ht,ke,L)=>{L.d(ke,{l:()=>l});const l={now:()=>(l.delegate||Date).now(),delegate:void 0}},3410:(ht,ke,L)=>{L.d(ke,{z:()=>l});const l={setTimeout(H,P,...ce){const{delegate:de}=l;return de?.setTimeout?de.setTimeout(H,P,...ce):setTimeout(H,P,...ce)},clearTimeout(H){const{delegate:P}=l;return(P?.clearTimeout||clearTimeout)(H)},delegate:void 0}},2202:(ht,ke,L)=>{L.d(ke,{h:()=>H});const H=function l(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ht,ke,L)=>{L.d(ke,{L:()=>l});const l="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(ht,ke,L)=>{L.d(ke,{_6:()=>ye,jO:()=>ce,yG:()=>de});var l=L(576),H=L(3532);function P(ae){return ae[ae.length-1]}function ce(ae){return(0,l.m)(P(ae))?ae.pop():void 0}function de(ae){return(0,H.K)(P(ae))?ae.pop():void 0}function ye(ae,me){return"number"==typeof P(ae)?ae.pop():me}},8737:(ht,ke,L)=>{function l(H,P){if(H){const ce=H.indexOf(P);0<=ce&&H.splice(ce,1)}}L.d(ke,{P:()=>l})},3888:(ht,ke,L)=>{function l(H){const ce=H(de=>{Error.call(de),de.stack=(new Error).stack});return ce.prototype=Object.create(Error.prototype),ce.prototype.constructor=ce,ce}L.d(ke,{d:()=>l})},2806:(ht,ke,L)=>{L.d(ke,{O:()=>ce,x:()=>P});var l=L(2416);let H=null;function P(de){if(l.v.useDeprecatedSynchronousErrorHandling){const ye=!H;if(ye&&(H={errorThrown:!1,error:null}),de(),ye){const{errorThrown:ae,error:me}=H;if(H=null,ae)throw me}}else de()}function ce(de){l.v.useDeprecatedSynchronousErrorHandling&&H&&(H.errorThrown=!0,H.error=de)}},9672:(ht,ke,L)=>{function l(H,P,ce,de=0,ye=!1){const ae=P.schedule(function(){ce(),ye?H.add(this.schedule(null,de)):this.unsubscribe()},de);if(H.add(ae),!ye)return ae}L.d(ke,{f:()=>l})},4671:(ht,ke,L)=>{function l(H){return H}L.d(ke,{y:()=>l})},1144:(ht,ke,L)=>{L.d(ke,{z:()=>l});const l=H=>H&&"number"==typeof H.length&&"function"!=typeof H},2206:(ht,ke,L)=>{L.d(ke,{D:()=>H});var l=L(576);function H(P){return Symbol.asyncIterator&&(0,l.m)(P?.[Symbol.asyncIterator])}},576:(ht,ke,L)=>{function l(H){return"function"==typeof H}L.d(ke,{m:()=>l})},3670:(ht,ke,L)=>{L.d(ke,{c:()=>P});var l=L(8822),H=L(576);function P(ce){return(0,H.m)(ce[l.L])}},6495:(ht,ke,L)=>{L.d(ke,{T:()=>P});var l=L(2202),H=L(576);function P(ce){return(0,H.m)(ce?.[l.h])}},8239:(ht,ke,L)=>{L.d(ke,{t:()=>H});var l=L(576);function H(P){return(0,l.m)(P?.then)}},3260:(ht,ke,L)=>{L.d(ke,{L:()=>ce,Q:()=>P});var l=L(655),H=L(576);function P(de){return(0,l.FC)(this,arguments,function*(){const ae=de.getReader();try{for(;;){const{value:me,done:we}=yield(0,l.qq)(ae.read());if(we)return yield(0,l.qq)(void 0);yield yield(0,l.qq)(me)}}finally{ae.releaseLock()}})}function ce(de){return(0,H.m)(de?.getReader)}},3532:(ht,ke,L)=>{L.d(ke,{K:()=>H});var l=L(576);function H(P){return P&&(0,l.m)(P.schedule)}},4482:(ht,ke,L)=>{L.d(ke,{A:()=>H,e:()=>P});var l=L(576);function H(ce){return(0,l.m)(ce?.lift)}function P(ce){return de=>{if(H(de))return de.lift(function(ye){try{return ce(ye,this)}catch(ae){this.error(ae)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(ht,ke,L)=>{function l(){}L.d(ke,{Z:()=>l})},9635:(ht,ke,L)=>{L.d(ke,{U:()=>P,z:()=>H});var l=L(4671);function H(...ce){return P(ce)}function P(ce){return 0===ce.length?l.y:1===ce.length?ce[0]:function(ye){return ce.reduce((ae,me)=>me(ae),ye)}}},7849:(ht,ke,L)=>{L.d(ke,{h:()=>P});var l=L(2416),H=L(3410);function P(ce){H.z.setTimeout(()=>{const{onUnhandledError:de}=l.v;if(!de)throw ce;de(ce)})}},4532:(ht,ke,L)=>{function l(H){return new TypeError(`You provided ${null!==H&&"object"==typeof H?"an invalid object":`'${H}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(ke,{z:()=>l})},655:(ht,ke,L)=>{function ce(J,ne){var ge={};for(var ue in J)Object.prototype.hasOwnProperty.call(J,ue)&&ne.indexOf(ue)<0&&(ge[ue]=J[ue]);if(null!=J&&"function"==typeof Object.getOwnPropertySymbols){var Ue=0;for(ue=Object.getOwnPropertySymbols(J);Ue<ue.length;Ue++)ne.indexOf(ue[Ue])<0&&Object.prototype.propertyIsEnumerable.call(J,ue[Ue])&&(ge[ue[Ue]]=J[ue[Ue]])}return ge}function me(J,ne,ge,ue){return new(ge||(ge=Promise))(function(He,yt){function en(En){try{Ze(ue.next(En))}catch(jn){yt(jn)}}function qt(En){try{Ze(ue.throw(En))}catch(jn){yt(jn)}}function Ze(En){En.done?He(En.value):function Ue(He){return He instanceof ge?He:new ge(function(yt){yt(He)})}(En.value).then(en,qt)}Ze((ue=ue.apply(J,ne||[])).next())})}function Ee(J){return this instanceof Ee?(this.v=J,this):new Ee(J)}function _e(J,ne,ge){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ue,ue=ge.apply(J,ne||[]),He=[];return Ue={},yt("next"),yt("throw"),yt("return"),Ue[Symbol.asyncIterator]=function(){return this},Ue;function yt(an){ue[an]&&(Ue[an]=function(tn){return new Promise(function(Wt,Ht){He.push([an,tn,Wt,Ht])>1||en(an,tn)})})}function en(an,tn){try{!function qt(an){an.value instanceof Ee?Promise.resolve(an.value.v).then(Ze,En):jn(He[0][2],an)}(ue[an](tn))}catch(Wt){jn(He[0][3],Wt)}}function Ze(an){en("next",an)}function En(an){en("throw",an)}function jn(an,tn){an(tn),He.shift(),He.length&&en(He[0][0],He[0][1])}}function rt(J){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ge,ne=J[Symbol.asyncIterator];return ne?ne.call(J):(J=function ee(J){var ne="function"==typeof Symbol&&Symbol.iterator,ge=ne&&J[ne],ue=0;if(ge)return ge.call(J);if(J&&"number"==typeof J.length)return{next:function(){return J&&ue>=J.length&&(J=void 0),{value:J&&J[ue++],done:!J}}};throw new TypeError(ne?"Object is not iterable.":"Symbol.iterator is not defined.")}(J),ge={},ue("next"),ue("throw"),ue("return"),ge[Symbol.asyncIterator]=function(){return this},ge);function ue(He){ge[He]=J[He]&&function(yt){return new Promise(function(en,qt){!function Ue(He,yt,en,qt){Promise.resolve(qt).then(function(Ze){He({value:Ze,done:en})},yt)}(en,qt,(yt=J[He](yt)).done,yt.value)})}}}L.d(ke,{FC:()=>_e,KL:()=>rt,_T:()=>ce,mG:()=>me,qq:()=>Ee})},4650:(ht,ke,L)=>{L.d(ke,{$8M:()=>Sc,$Z:()=>ZE,AFp:()=>OR,ALo:()=>uR,AaK:()=>me,BQk:()=>Xf,CHM:()=>hf,CRH:()=>RI,CZH:()=>iw,CqO:()=>Vv,D6c:()=>IB,EJc:()=>hB,EiD:()=>fM,EpF:()=>hx,F$t:()=>Jf,F4k:()=>Lv,FYo:()=>yr,FiY:()=>Ke,G48:()=>l_,Gf:()=>xI,GfV:()=>lE,Gpc:()=>Y,Gre:()=>rb,Hsn:()=>AD,Ikx:()=>ip,JOm:()=>Ga,JVY:()=>ZC,KtG:()=>ya,L6k:()=>KC,LAX:()=>hM,LFG:()=>Vn,LSH:()=>nE,Lbi:()=>wp,Lck:()=>Xx,MAs:()=>wD,MGl:()=>ep,MMx:()=>Pb,NdJ:()=>Ig,O4$:()=>gu,OlP:()=>xn,Oqu:()=>nb,PXZ:()=>tS,Q6J:()=>Pv,QGY:()=>DD,QP$:()=>Ye,QbO:()=>cB,Qsj:()=>GL,R0b:()=>Ls,RDi:()=>$C,Rgc:()=>fp,SBq:()=>$l,Sil:()=>aw,Suo:()=>n_,TTD:()=>Zs,TgZ:()=>Qf,Udp:()=>Mg,VKq:()=>sR,W1O:()=>bR,WFA:()=>Zl,X6Q:()=>lS,XFs:()=>st,Xpm:()=>Z,Xts:()=>Nc,Y36:()=>rh,YKP:()=>mI,YNc:()=>bD,Yjl:()=>re,Yz7:()=>tn,Z0I:()=>wo,ZZ4:()=>bw,_Bn:()=>pI,_UZ:()=>CD,_Vd:()=>Mu,_c5:()=>EB,_uU:()=>VD,aQg:()=>Cw,c2e:()=>uB,cJS:()=>Ht,cg1:()=>Wu,d8E:()=>cb,dDg:()=>gB,dqk:()=>Nt,eBb:()=>QC,eFA:()=>qR,ekj:()=>kg,eoX:()=>XI,f3M:()=>S,g9A:()=>NR,h0i:()=>bh,hGG:()=>DB,hij:()=>Og,iGM:()=>zb,ifc:()=>mt,ip1:()=>RR,jDz:()=>eR,kL8:()=>db,kcU:()=>Od,lG2:()=>oi,lcZ:()=>wI,lqb:()=>qr,lri:()=>Ih,mCW:()=>se,n5z:()=>eo,n_E:()=>hp,oAB:()=>Ct,oxw:()=>TD,pB0:()=>b,q3G:()=>Bi,q4F:()=>cE,qLn:()=>Of,qOj:()=>Tv,qZA:()=>Dg,qzn:()=>Rc,rWj:()=>jR,sBO:()=>WR,sIi:()=>Hu,s_b:()=>Xu,soG:()=>sw,tb:()=>rw,tp0:()=>kt,uIk:()=>kv,vHH:()=>Ie,vpe:()=>Yo,wAp:()=>xt,xp6:()=>dk,ynx:()=>Fv,z2F:()=>o_,z3N:()=>ja,zSh:()=>gn,zs3:()=>Lc});var l=L(7579),H=L(727),P=L(9751),ce=L(6451),de=L(3099);function ye(o){for(let a in o)if(o[a]===ye)return a;throw Error("Could not find renamed property on target object.")}function ae(o,a){for(const u in a)a.hasOwnProperty(u)&&!o.hasOwnProperty(u)&&(o[u]=a[u])}function me(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(me).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const u=a.indexOf("\n");return-1===u?a:a.substring(0,u)}function we(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const W=ye({__forward_ref__:ye});function Y(o){return o.__forward_ref__=Y,o.toString=function(){return me(this())},o}function ee(o){return Ge(o)?o():o}function Ge(o){return"function"==typeof o&&o.hasOwnProperty(W)&&o.__forward_ref__===Y}class Ie extends Error{constructor(a,u){super(function lt(o,a){return`NG0${Math.abs(o)}${a?": "+a.trim():""}`}(a,u)),this.code=a}}function Ee(o){return"string"==typeof o?o:null==o?"":String(o)}function Re(o,a){throw new Ie(-201,!1)}function qt(o,a){null==o&&function Ze(o,a,u,h){throw new Error(`ASSERTION ERROR: ${o}`+(null==h?"":` [Expected=> ${u} ${h} ${a} <=Actual]`))}(a,o,null,"!=")}function tn(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function Ht(o){return{providers:o.providers||[],imports:o.imports||[]}}function xi(o){return Ri(o,dr)||Ri(o,Ur)}function wo(o){return null!==xi(o)}function Ri(o,a){return o.hasOwnProperty(a)?o[a]:null}function is(o){return o&&(o.hasOwnProperty($n)||o.hasOwnProperty(rs))?o[$n]:null}const dr=ye({\u0275prov:ye}),$n=ye({\u0275inj:ye}),Ur=ye({ngInjectableDef:ye}),rs=ye({ngInjectorDef:ye});var st=(()=>((st=st||{})[st.Default=0]="Default",st[st.Host=1]="Host",st[st.Self=2]="Self",st[st.SkipSelf=4]="SkipSelf",st[st.Optional=8]="Optional",st))();let Di;function yn(o){const a=Di;return Di=o,a}function Ii(o,a,u){const h=xi(o);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:u&st.Optional?null:void 0!==a?a:void Re(me(o))}function Mn(o){return{toString:o}.toString()}var kn=(()=>((kn=kn||{})[kn.OnPush=0]="OnPush",kn[kn.Default=1]="Default",kn))(),mt=(()=>{return(o=mt||(mt={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",mt;var o})();const Nt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Oi={},Mt=[],qi=ye({\u0275cmp:ye}),Lt=ye({\u0275dir:ye}),hr=ye({\u0275pipe:ye}),Zt=ye({\u0275mod:ye}),X=ye({\u0275fac:ye}),G=ye({__NG_ELEMENT_ID__:ye});let j=0;function Z(o){return Mn(()=>{const u=!0===o.standalone,h={},f={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:h,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===kn.OnPush,directiveDefs:null,pipeDefs:null,standalone:u,dependencies:u&&o.dependencies||null,getStandaloneInjector:null,selectors:o.selectors||Mt,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||mt.Emulated,id:"c"+j++,styles:o.styles||Mt,_:null,setInput:null,schemas:o.schemas||null,tView:null},m=o.dependencies,v=o.features;return f.inputs=fn(o.inputs,h),f.outputs=fn(o.outputs),v&&v.forEach(C=>C(f)),f.directiveDefs=m?()=>("function"==typeof m?m():m).map(Ae).filter(qe):null,f.pipeDefs=m?()=>("function"==typeof m?m():m).map(Ce).filter(qe):null,f})}function Ae(o){return $(o)||q(o)}function qe(o){return null!==o}function Ct(o){return Mn(()=>({type:o.type,bootstrap:o.bootstrap||Mt,declarations:o.declarations||Mt,imports:o.imports||Mt,exports:o.exports||Mt,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null}))}function fn(o,a){if(null==o)return Oi;const u={};for(const h in o)if(o.hasOwnProperty(h)){let f=o[h],m=f;Array.isArray(f)&&(m=f[1],f=f[0]),u[f]=h,a&&(a[f]=m)}return u}const oi=Z;function re(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,standalone:!0===o.standalone,onDestroy:o.type.prototype.ngOnDestroy||null}}function $(o){return o[qi]||null}function q(o){return o[Lt]||null}function Ce(o){return o[hr]||null}function Ye(o){const a=$(o)||q(o)||Ce(o);return null!==a&&a.standalone}function vt(o,a){const u=o[Zt]||null;if(!u&&!0===a)throw new Error(`Type ${me(o)} does not have '\u0275mod' property.`);return u}function ai(o){return Array.isArray(o)&&"object"==typeof o[1]}function Dr(o){return Array.isArray(o)&&!0===o[1]}function Es(o){return 0!=(8&o.flags)}function la(o){return 2==(2&o.flags)}function ca(o){return 1==(1&o.flags)}function pr(o){return null!==o.template}function lu(o){return 0!=(256&o[2])}function Pi(o,a){return o.hasOwnProperty(X)?o[X]:null}class fa{constructor(a,u,h){this.previousValue=a,this.currentValue=u,this.firstChange=h}isFirstChange(){return this.firstChange}}function Zs(){return Dd}function Dd(o){return o.type.prototype.ngOnChanges&&(o.setInput=uu),mc}function mc(){const o=pa(this),a=o?.current;if(a){const u=o.previous;if(u===Oi)o.previous=a;else for(let h in a)u[h]=a[h];o.current=null,this.ngOnChanges(a)}}function uu(o,a,u,h){const f=pa(o)||function ma(o,a){return o[Id]=a}(o,{previous:Oi,current:null}),m=f.current||(f.current={}),v=f.previous,C=this.declaredInputs[u],D=v[C];m[C]=new fa(D&&D.currentValue,a,v===Oi),o[h]=a}Zs.ngInherit=!0;const Id="__ngSimpleChanges__";function pa(o){return o[Id]||null}function Bn(o){for(;Array.isArray(o);)o=o[0];return o}function jr(o,a){return Bn(a[o])}function Ni(o,a){return Bn(a[o.index])}function ko(o,a){return o.data[a]}function os(o,a){return o[a]}function cn(o,a){const u=a[o];return ai(u)?u:u[0]}function _c(o){return 4==(4&o[2])}function Ks(o){return 64==(64&o[2])}function Ar(o,a){return null==a?null:o[a]}function hl(o){o[18]=0}function zn(o,a){o[5]+=a;let u=o,h=o[3];for(;null!==h&&(1===a&&1===u[5]||-1===a&&0===u[5]);)h[5]+=a,u=h,h=h[3]}const Pt={lFrame:Cl(null),bindingsEnabled:!0};function xo(){return Pt.bindingsEnabled}function Oe(){return Pt.lFrame.lView}function Kt(){return Pt.lFrame.tView}function hf(o){return Pt.lFrame.contextLView=o,o[8]}function ya(o){return Pt.lFrame.contextLView=null,o}function li(){let o=va();for(;null!==o&&64===o.type;)o=o.parent;return o}function va(){return Pt.lFrame.currentTNode}function ir(o,a){const u=Pt.lFrame;u.currentTNode=o,u.isParent=a}function vc(){return Pt.lFrame.isParent}function ba(){Pt.lFrame.isParent=!1}function ci(){const o=Pt.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}function vl(){return Pt.lFrame.bindingIndex++}function Ts(o){const a=Pt.lFrame,u=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,u}function Md(o,a){const u=Pt.lFrame;u.bindingIndex=u.bindingRootIndex=o,wa(a)}function wa(o){Pt.lFrame.currentDirectiveIndex=o}function pu(o){const a=Pt.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}function bl(){return Pt.lFrame.currentQueryIndex}function mu(o){Pt.lFrame.currentQueryIndex=o}function wl(o){const a=o[1];return 2===a.type?a.declTNode:1===a.type?o[6]:null}function kd(o,a,u){if(u&st.SkipSelf){let f=a,m=o;for(;!(f=f.parent,null!==f||u&st.Host||(f=wl(m),null===f||(m=m[15],10&f.type))););if(null===f)return!1;a=f,o=m}const h=Pt.lFrame=mf();return h.currentTNode=a,h.lView=o,!0}function Ca(o){const a=mf(),u=o[1];Pt.lFrame=a,a.currentTNode=u.firstChild,a.lView=o,a.tView=u,a.contextLView=o,a.bindingIndex=u.bindingStartIndex,a.inI18n=!1}function mf(){const o=Pt.lFrame,a=null===o?null:o.child;return null===a?Cl(o):a}function Cl(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function gf(){const o=Pt.lFrame;return Pt.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const xd=gf;function Qs(){const o=gf();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function Fn(){return Pt.lFrame.selectedIndex}function As(o){Pt.lFrame.selectedIndex=o}function Ln(){const o=Pt.lFrame;return ko(o.tView,o.selectedIndex)}function gu(){Pt.lFrame.currentNamespace="svg"}function Od(){!function yu(){Pt.lFrame.currentNamespace=null}()}function bu(o,a){for(let u=a.directiveStart,h=a.directiveEnd;u<h;u++){const m=o.data[u].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:C,ngAfterViewInit:D,ngAfterViewChecked:A,ngOnDestroy:R}=m;v&&(o.contentHooks||(o.contentHooks=[])).push(-u,v),C&&((o.contentHooks||(o.contentHooks=[])).push(u,C),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(u,C)),D&&(o.viewHooks||(o.viewHooks=[])).push(-u,D),A&&((o.viewHooks||(o.viewHooks=[])).push(u,A),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(u,A)),null!=R&&(o.destroyHooks||(o.destroyHooks=[])).push(u,R)}}function Ea(o,a,u){Ia(o,a,3,u)}function Da(o,a,u,h){(3&o[2])===u&&Ia(o,a,u,h)}function Nd(o,a){let u=o[2];(3&u)===a&&(u&=2047,u+=1,o[2]=u)}function Ia(o,a,u,h){const m=h??-1,v=a.length-1;let C=0;for(let D=void 0!==h?65535&o[18]:0;D<v;D++)if("number"==typeof a[D+1]){if(C=a[D],null!=h&&C>=h)break}else a[D]<0&&(o[18]+=65536),(C<m||-1==m)&&(Fd(o,u,a,D),o[18]=(4294901760&o[18])+D+2),D++}function Fd(o,a,u,h){const f=u[h]<0,m=u[h+1],C=o[f?-u[h]:u[h]];if(f){if(o[2]>>11<o[18]>>16&&(3&o[2])===a){o[2]+=2048;try{m.call(C)}finally{}}}else try{m.call(C)}finally{}}class Mr{constructor(a,u,h){this.factory=a,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=h}}function Ms(o,a,u){let h=0;for(;h<u.length;){const f=u[h];if("number"==typeof f){if(0!==f)break;h++;const m=u[h++],v=u[h++],C=u[h++];o.setAttribute(a,v,C,m)}else{const m=f,v=u[++h];Cu(m)?o.setProperty(a,m,v):o.setAttribute(a,m,v),h++}}return h}function Dl(o){return 3===o||4===o||6===o}function Cu(o){return 64===o.charCodeAt(0)}function Il(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let u=-1;for(let h=0;h<a.length;h++){const f=a[h];"number"==typeof f?u=f:0===u||Vd(o,u,f,null,-1===u||2===u?a[++h]:null)}}return o}function Vd(o,a,u,h,f){let m=0,v=o.length;if(-1===a)v=-1;else for(;m<o.length;){const C=o[m++];if("number"==typeof C){if(C===a){v=-1;break}if(C>a){v=m-1;break}}}for(;m<o.length;){const C=o[m];if("number"==typeof C)break;if(C===u){if(null===h)return void(null!==f&&(o[m+1]=f));if(h===o[m+1])return void(o[m+2]=f)}m++,null!==h&&m++,null!==f&&m++}-1!==v&&(o.splice(v,0,a),m=v+1),o.splice(m++,0,u),null!==h&&o.splice(m++,0,h),null!==f&&o.splice(m++,0,f)}function yf(o){return-1!==o}function ui(o){return 32767&o}function Js(o,a){let u=function vf(o){return o>>16}(o),h=a;for(;u>0;)h=h[15],u--;return h}let Eu=!0;function Sl(o){const a=Eu;return Eu=o,a}let Bd=0;const gr={};function ks(o,a){const u=Ec(o,a);if(-1!==u)return u;const h=a[1];h.firstCreatePass&&(o.injectorIndex=a.length,Du(h.data,o),Du(a,null),Du(h.blueprint,null));const f=Tl(o,a),m=o.injectorIndex;if(yf(f)){const v=ui(f),C=Js(f,a),D=C[1].data;for(let A=0;A<8;A++)a[m+A]=C[v+A]|D[v+A]}return a[m+8]=f,m}function Du(o,a){o.push(0,0,0,0,0,0,0,0,a)}function Ec(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function Tl(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let u=0,h=null,f=a;for(;null!==f;){if(h=Ra(f),null===h)return-1;if(u++,f=f[15],-1!==h.injectorIndex)return h.injectorIndex|u<<16}return-1}function Ro(o,a,u){!function Ud(o,a,u){let h;"string"==typeof u?h=u.charCodeAt(0)||0:u.hasOwnProperty(G)&&(h=u[G]),null==h&&(h=u[G]=Bd++);const f=255&h;a.data[o+(f>>5)]|=1<<f}(o,a,u)}function Ta(o,a,u){if(u&st.Optional)return o;Re()}function Oo(o,a,u,h){if(u&st.Optional&&void 0===h&&(h=null),0==(u&(st.Self|st.Host))){const f=o[9],m=yn(void 0);try{return f?f.get(a,h,u&st.Optional):Ii(a,h,u&st.Optional)}finally{yn(m)}}return Ta(h,0,u)}function Aa(o,a,u,h=st.Default,f){if(null!==o){if(1024&a[2]){const v=function Cf(o,a,u,h,f){let m=o,v=a;for(;null!==m&&null!==v&&1024&v[2]&&!(256&v[2]);){const C=Hd(m,v,u,h|st.Self,gr);if(C!==gr)return C;let D=m.parent;if(!D){const A=v[21];if(A){const R=A.get(u,gr,h);if(R!==gr)return R}D=Ra(v),v=v[15]}m=D}return f}(o,a,u,h,gr);if(v!==gr)return v}const m=Hd(o,a,u,h,gr);if(m!==gr)return m}return Oo(a,u,h,f)}function Hd(o,a,u,h,f){const m=function wf(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(G)?o[G]:void 0;return"number"==typeof a?a>=0?255&a:Iu:a}(u);if("function"==typeof m){if(!kd(a,o,h))return h&st.Host?Ta(f,0,h):Oo(a,u,h,f);try{const v=m(h);if(null!=v||h&st.Optional)return v;Re()}finally{xd()}}else if("number"==typeof m){let v=null,C=Ec(o,a),D=-1,A=h&st.Host?a[16][6]:null;for((-1===C||h&st.SkipSelf)&&(D=-1===C?Tl(o,a):a[C+8],-1!==D&&Ic(h,!1)?(v=a[1],C=ui(D),a=Js(D,a)):C=-1);-1!==C;){const R=a[1];if(Ma(m,C,R.data)){const B=Dc(C,a,u,v,h,A);if(B!==gr)return B}D=a[C+8],-1!==D&&Ic(h,a[1].data[C+8]===A)&&Ma(m,C,a)?(v=R,C=ui(D),a=Js(D,a)):C=-1}}return f}function Dc(o,a,u,h,f,m){const v=a[1],C=v.data[o+8],R=Ml(C,v,u,null==h?la(C)&&Eu:h!=v&&0!=(3&C.type),f&st.Host&&m===C);return null!==R?ls(a,v,R,C):gr}function Ml(o,a,u,h,f){const m=o.providerIndexes,v=a.data,C=1048575&m,D=o.directiveStart,R=m>>20,Q=f?C+R:o.directiveEnd;for(let oe=h?C:C+R;oe<Q;oe++){const Te=v[oe];if(oe<D&&u===Te||oe>=D&&Te.type===u)return oe}if(f){const oe=v[D];if(oe&&pr(oe)&&oe.type===u)return D}return null}function ls(o,a,u,h){let f=o[u];const m=a.data;if(function wu(o){return o instanceof Mr}(f)){const v=f;v.resolving&&function it(o,a){const u=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new Ie(-200,`Circular dependency in DI detected for ${o}${u}`)}(function _e(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():Ee(o)}(m[u]));const C=Sl(v.canSeeViewProviders);v.resolving=!0;const D=v.injectImpl?yn(v.injectImpl):null;kd(o,h,st.Default);try{f=o[u]=v.factory(void 0,m,o,h),a.firstCreatePass&&u>=h.directiveStart&&function Pd(o,a,u){const{ngOnChanges:h,ngOnInit:f,ngDoCheck:m}=a.type.prototype;if(h){const v=Dd(a);(u.preOrderHooks||(u.preOrderHooks=[])).push(o,v),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(o,v)}f&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-o,f),m&&((u.preOrderHooks||(u.preOrderHooks=[])).push(o,m),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(o,m))}(u,m[u],a)}finally{null!==D&&yn(D),Sl(C),v.resolving=!1,xd()}}return f}function Ma(o,a,u){return!!(u[a+(o>>5)]&1<<o)}function Ic(o,a){return!(o&st.Self||o&st.Host&&a)}class ka{constructor(a,u){this._tNode=a,this._lView=u}get(a,u,h){return Aa(this._tNode,this._lView,a,h,u)}}function Iu(){return new ka(li(),Oe())}function eo(o){return Mn(()=>{const a=o.prototype.constructor,u=a[X]||xa(a),h=Object.prototype;let f=Object.getPrototypeOf(o.prototype).constructor;for(;f&&f!==h;){const m=f[X]||xa(f);if(m&&m!==u)return m;f=Object.getPrototypeOf(f)}return m=>new m})}function xa(o){return Ge(o)?()=>{const a=xa(ee(o));return a&&a()}:Pi(o)}function Ra(o){const a=o[1],u=a.type;return 2===u?a.declTNode:1===u?o[6]:null}function Sc(o){return function Al(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const u=o.attrs;if(u){const h=u.length;let f=0;for(;f<h;){const m=u[f];if(Dl(m))break;if(0===m)f+=2;else if("number"==typeof m)for(f++;f<h&&"string"==typeof u[f];)f++;else{if(m===a)return u[f+1];f+=2}}}return null}(li(),o)}const Oa="__parameters__";function Na(o,a,u){return Mn(()=>{const h=function Su(o){return function(...u){if(o){const h=o(...u);for(const f in h)this[f]=h[f]}}}(a);function f(...m){if(this instanceof f)return h.apply(this,m),this;const v=new f(...m);return C.annotation=v,C;function C(D,A,R){const B=D.hasOwnProperty(Oa)?D[Oa]:Object.defineProperty(D,Oa,{value:[]})[Oa];for(;B.length<=R;)B.push(null);return(B[R]=B[R]||[]).push(v),D}}return u&&(f.prototype=Object.create(u.prototype)),f.prototype.ngMetadataName=o,f.annotationCls=f,f})}class xn{constructor(a,u){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=tn({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Fi(o,a){void 0===a&&(a=o);for(let u=0;u<o.length;u++){let h=o[u];Array.isArray(h)?(a===o&&(a=o.slice(0,u)),Fi(h,a)):a!==o&&a.push(h)}return a}function us(o,a){o.forEach(u=>Array.isArray(u)?us(u,a):a(u))}function no(o,a,u){a>=o.length?o.push(u):o.splice(a,0,u)}function Lo(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function Gr(o,a){const u=[];for(let h=0;h<o;h++)u.push(a);return u}function _r(o,a,u){let h=Li(o,a);return h>=0?o[1|h]=u:(h=~h,function If(o,a,u,h){let f=o.length;if(f==a)o.push(u,h);else if(1===f)o.push(h,o[0]),o[0]=u;else{for(f--,o.push(o[f-1],o[f]);f>a;)o[f]=o[f-2],f--;o[a]=u,o[a+1]=h}}(o,h,a,u)),h}function Fa(o,a){const u=Li(o,a);if(u>=0)return o[1|u]}function Li(o,a){return function St(o,a,u){let h=0,f=o.length>>u;for(;f!==h;){const m=h+(f-h>>1),v=o[m<<u];if(a===v)return m<<u;v>a?f=m:h=m+1}return~(f<<u)}(o,a,1)}const Yi={},Tu="__NG_DI_FLAG__",La="ngTempTokenPath",zd=/\n/gm,Ba="__source";let rr;function zr(o){const a=rr;return rr=o,a}function Mc(o,a=st.Default){if(void 0===rr)throw new Ie(-203,!1);return null===rr?Ii(o,void 0,a):rr.get(o,a&st.Optional?null:void 0,a)}function Vn(o,a=st.Default){return(function Gn(){return Di}()||Mc)(ee(o),a)}function S(o,a=st.Default){return"number"!=typeof a&&(a=0|(a.optional&&8)|(a.host&&1)|(a.self&&2)|(a.skipSelf&&4)),Vn(o,a)}function T(o){const a=[];for(let u=0;u<o.length;u++){const h=ee(o[u]);if(Array.isArray(h)){if(0===h.length)throw new Ie(900,!1);let f,m=st.Default;for(let v=0;v<h.length;v++){const C=h[v],D=U(C);"number"==typeof D?-1===D?f=C.token:m|=D:f=C}a.push(Vn(f,m))}else a.push(Vn(h))}return a}function k(o,a){return o[Tu]=a,o.prototype[Tu]=a,o}function U(o){return o[Tu]}const Ke=k(Na("Optional"),8),kt=k(Na("SkipSelf"),4);let xm,Af;function $C(o){xm=o}function Au(o){return function Rm(){if(void 0===Af&&(Af=null,Nt.trustedTypes))try{Af=Nt.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return Af}()?.createHTML(o)||o}class Bl{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Pm extends Bl{getTypeName(){return"HTML"}}class WC extends Bl{getTypeName(){return"Style"}}class Ty extends Bl{getTypeName(){return"Script"}}class YC extends Bl{getTypeName(){return"URL"}}class Nm extends Bl{getTypeName(){return"ResourceURL"}}function ja(o){return o instanceof Bl?o.changingThisBreaksApplicationSecurity:o}function Rc(o,a){const u=function Ay(o){return o instanceof Bl&&o.getTypeName()||null}(o);if(null!=u&&u!==a){if("ResourceURL"===u&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===a}function ZC(o){return new Pm(o)}function KC(o){return new WC(o)}function QC(o){return new Ty(o)}function hM(o){return new YC(o)}function b(o){return new Nm(o)}class y{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const u=(new window.DOMParser).parseFromString(Au(a),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(a):(u.removeChild(u.firstChild),u)}catch{return null}}}class E{constructor(a){if(this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const u=this.inertDocument.createElement("html");this.inertDocument.appendChild(u);const h=this.inertDocument.createElement("body");u.appendChild(h)}}getInertBodyElement(a){const u=this.inertDocument.createElement("template");if("content"in u)return u.innerHTML=Au(a),u;const h=this.inertDocument.createElement("body");return h.innerHTML=Au(a),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(h),h}stripCustomNsAttrs(a){const u=a.attributes;for(let f=u.length-1;0<f;f--){const v=u.item(f).name;("xmlns:ns1"===v||0===v.indexOf("ns1:"))&&a.removeAttribute(v)}let h=a.firstChild;for(;h;)h.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(h),h=h.nextSibling}}const V=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function se(o){return(o=String(o)).match(V)?o:"unsafe:"+o}function Je(o){const a={};for(const u of o.split(","))a[u]=!0;return a}function gt(...o){const a={};for(const u of o)for(const h in u)u.hasOwnProperty(h)&&(a[h]=!0);return a}const Yt=Je("area,br,col,hr,img,wbr"),Un=Je("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),oo=Je("rp,rt"),Wd=gt(Yt,gt(Un,Je("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),gt(oo,Je("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),gt(oo,Un)),kf=Je("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),xf=Je("srcset"),Lm=gt(kf,xf,Je("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Je("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Vm=Je("script,style,template");class ky{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let u=a.firstChild,h=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?h=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,h&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let f=this.checkClobberedElement(u,u.nextSibling);if(f){u=f;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(a){const u=a.nodeName.toLowerCase();if(!Wd.hasOwnProperty(u))return this.sanitizedSomething=!0,!Vm.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const h=a.attributes;for(let f=0;f<h.length;f++){const m=h.item(f),v=m.name,C=v.toLowerCase();if(!Lm.hasOwnProperty(C)){this.sanitizedSomething=!0;continue}let D=m.value;kf[C]&&(D=se(D)),xf[C]&&(o=D,D=(o=String(o)).split(",").map(a=>se(a.trim())).join(", ")),this.buf.push(" ",v,'="',xy(D),'"')}var o;return this.buf.push(">"),!0}endElement(a){const u=a.nodeName.toLowerCase();Wd.hasOwnProperty(u)&&!Yt.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(a){this.buf.push(xy(a))}checkClobberedElement(a,u){if(u&&(a.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return u}}const eE=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Bm=/([^\#-~ |!])/g;function xy(o){return o.replace(/&/g,"&amp;").replace(eE,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(Bm,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Ry;function fM(o,a){let u=null;try{Ry=Ry||function g(o){const a=new E(o);return function x(){try{return!!(new window.DOMParser).parseFromString(Au(""),"text/html")}catch{return!1}}()?new y(a):a}(o);let h=a?String(a):"";u=Ry.getInertBodyElement(h);let f=5,m=h;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,h=m,m=u.innerHTML,u=Ry.getInertBodyElement(h)}while(h!==m);return Au((new ky).sanitizeChildren(tE(u)||u))}finally{if(u){const h=tE(u)||u;for(;h.firstChild;)h.removeChild(h.firstChild)}}}function tE(o){return"content"in o&&function NL(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}var Bi=(()=>((Bi=Bi||{})[Bi.NONE=0]="NONE",Bi[Bi.HTML=1]="HTML",Bi[Bi.STYLE=2]="STYLE",Bi[Bi.SCRIPT=3]="SCRIPT",Bi[Bi.URL=4]="URL",Bi[Bi.RESOURCE_URL=5]="RESOURCE_URL",Bi))();function nE(o){const a=function Yn(){const o=Oe();return o&&o[12]}();return a?a.sanitize(Bi.URL,o)||"":Rc(o,"URL")?ja(o):se(Ee(o))}const Nc=new xn("ENVIRONMENT_INITIALIZER"),_i=new xn("INJECTOR",-1),Zn=new xn("INJECTOR_DEF_TYPES");class Rf{get(a,u=Yi){if(u===Yi){const h=new Error(`NullInjectorError: No provider for ${me(a)}!`);throw h.name="NullInjectorError",h}return u}}function yi(...o){return{\u0275providers:ct(0,o)}}function ct(o,...a){const u=[],h=new Set;let f;return us(a,m=>{const v=m;ni(v,u,[],h)&&(f||(f=[]),f.push(v))}),void 0!==f&&Ul(f,u),u}function Ul(o,a){for(let u=0;u<o.length;u++){const{providers:f}=o[u];us(f,m=>{a.push(m)})}}function ni(o,a,u,h){if(!(o=ee(o)))return!1;let f=null,m=is(o);const v=!m&&$(o);if(m||v){if(v&&!v.standalone)return!1;f=o}else{const D=o.ngModule;if(m=is(D),!m)return!1;f=D}const C=h.has(f);if(v){if(C)return!1;if(h.add(f),v.dependencies){const D="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const A of D)ni(A,a,u,h)}}else{if(!m)return!1;{if(null!=m.imports&&!C){let A;h.add(f);try{us(m.imports,R=>{ni(R,a,u,h)&&(A||(A=[]),A.push(R))})}finally{}void 0!==A&&Ul(A,a)}if(!C){const A=Pi(f)||(()=>new f);a.push({provide:f,useFactory:A,deps:Mt},{provide:Zn,useValue:f,multi:!0},{provide:Nc,useValue:()=>Vn(f),multi:!0})}const D=m.providers;null==D||C||us(D,R=>{a.push(R)})}}return f!==o&&void 0!==o.providers}const Yd=ye({provide:String,useValue:ye});function Zd(o){return null!==o&&"object"==typeof o&&Yd in o}function jl(o){return"function"==typeof o}const gn=new xn("Set Injector scope."),Kd={},gM={};let Qd;function hi(){return void 0===Qd&&(Qd=new Rf),Qd}class qr{}class rE extends qr{constructor(a,u,h,f){super(),this.parent=u,this.source=h,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Um(a,v=>this.processProvider(v)),this.records.set(_i,Fc(void 0,this)),f.has("environment")&&this.records.set(qr,Fc(void 0,this));const m=this.records.get(gn);null!=m&&"string"==typeof m.value&&this.scopes.add(m.value),this.injectorDefTypes=new Set(this.get(Zn.multi,Mt,st.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}runInContext(a){this.assertNotDestroyed();const u=zr(this),h=yn(void 0);try{return a()}finally{zr(u),yn(h)}}get(a,u=Yi,h=st.Default){this.assertNotDestroyed();const f=zr(this),m=yn(void 0);try{if(!(h&st.SkipSelf)){let C=this.records.get(a);if(void 0===C){const D=function bM(o){return"function"==typeof o||"object"==typeof o&&o instanceof xn}(a)&&xi(a);C=D&&this.injectableDefInScope(D)?Fc(Zi(a),Kd):null,this.records.set(a,C)}if(null!=C)return this.hydrate(a,C)}return(h&st.Self?hi():this.parent).get(a,u=h&st.Optional&&u===Yi?null:u)}catch(v){if("NullInjectorError"===v.name){if((v[La]=v[La]||[]).unshift(me(a)),f)throw v;return function te(o,a,u,h){const f=o[La];throw a[Ba]&&f.unshift(a[Ba]),o.message=function fe(o,a,u,h=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.slice(2):o;let f=me(a);if(Array.isArray(a))f=a.map(me).join(" -> ");else if("object"==typeof a){let m=[];for(let v in a)if(a.hasOwnProperty(v)){let C=a[v];m.push(v+":"+("string"==typeof C?JSON.stringify(C):me(C)))}f=`{${m.join(", ")}}`}return`${u}${h?"("+h+")":""}[${f}]: ${o.replace(zd,"\n  ")}`}("\n"+o.message,f,u,h),o.ngTokenPath=f,o[La]=null,o}(v,a,"R3InjectorError",this.source)}throw v}finally{yn(m),zr(f)}}resolveInjectorInitializers(){const a=zr(this),u=yn(void 0);try{const h=this.get(Nc.multi,Mt,st.Self);for(const f of h)f()}finally{zr(a),yn(u)}}toString(){const a=[],u=this.records;for(const h of u.keys())a.push(me(h));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ie(205,!1)}processProvider(a){let u=jl(a=ee(a))?a:ee(a&&a.provide);const h=function _M(o){return Zd(o)?Fc(void 0,o.useValue):Fc(Oy(o),Kd)}(a);if(jl(a)||!0!==a.multi)this.records.get(u);else{let f=this.records.get(u);f||(f=Fc(void 0,Kd,!0),f.factory=()=>T(f.multi),this.records.set(u,f)),u=a,f.multi.push(a)}this.records.set(u,h)}hydrate(a,u){return u.value===Kd&&(u.value=gM,u.value=u.factory()),"object"==typeof u.value&&u.value&&function vM(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(a){if(!a.providedIn)return!1;const u=ee(a.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function Zi(o){const a=xi(o),u=null!==a?a.factory:Pi(o);if(null!==u)return u;if(o instanceof xn)throw new Ie(204,!1);if(o instanceof Function)return function sE(o){const a=o.length;if(a>0)throw Gr(a,"?"),new Ie(204,!1);const u=function Pn(o){const a=o&&(o[dr]||o[Ur]);if(a){const u=function vs(o){if(o.hasOwnProperty("name"))return o.name;const a=(""+o).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),a}return null}(o);return null!==u?()=>u.factory(o):()=>new o}(o);throw new Ie(204,!1)}function Oy(o,a,u){let h;if(jl(o)){const f=ee(o);return Pi(f)||Zi(f)}if(Zd(o))h=()=>ee(o.useValue);else if(function Hl(o){return!(!o||!o.useFactory)}(o))h=()=>o.useFactory(...T(o.deps||[]));else if(function iE(o){return!(!o||!o.useExisting)}(o))h=()=>Vn(ee(o.useExisting));else{const f=ee(o&&(o.useClass||o.provide));if(!function yM(o){return!!o.deps}(o))return Pi(f)||Zi(f);h=()=>new f(...T(o.deps))}return h}function Fc(o,a,u=!1){return{factory:o,value:a,multi:u?[]:void 0}}function wM(o){return!!o.\u0275providers}function Um(o,a){for(const u of o)Array.isArray(u)?Um(u,a):wM(u)?Um(u.\u0275providers,a):a(u)}class oE{}class IM{resolveComponentFactory(a){throw function EM(o){const a=Error(`No component factory found for ${me(o)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=o,a}(a)}}let Mu=(()=>{class o{}return o.NULL=new IM,o})();function SM(){return ku(li(),Oe())}function ku(o,a){return new $l(Ni(o,a))}let $l=(()=>{class o{constructor(u){this.nativeElement=u}}return o.__NG_ELEMENT_ID__=SM,o})();function TM(o){return o instanceof $l?o.nativeElement:o}class yr{}let GL=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function aE(){const o=Oe(),u=cn(li().index,o);return(ai(u)?u:o)[11]}(),o})(),Xd=(()=>{class o{}return o.\u0275prov=tn({token:o,providedIn:"root",factory:()=>null}),o})();class lE{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const cE=new lE("14.2.0"),Py={};function Vy(o){return o.ngOriginalError}class Of{constructor(){this._console=console}handleError(a){const u=this._findOriginalError(a);this._console.error("ERROR",a),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(a){let u=a&&Vy(a);for(;u&&Vy(u);)u=Vy(u);return u||null}}const By=new Map;let LM=0;const Pf="__ngContext__";function or(o,a){ai(a)?(o[Pf]=a[20],function BM(o){By.set(o[20],o)}(a)):o[Pf]=a}function Nf(o){const a=o[Pf];return"number"==typeof a?function vE(o){return By.get(o)||null}(a):a||null}function Uy(o){const a=Nf(o);return a?ai(a)?a:a.lView:null}function $a(o){return o instanceof Function?o():o}var Ga=(()=>((Ga=Ga||{})[Ga.Important=1]="Important",Ga[Ga.DashCase=2]="DashCase",Ga))();function SE(o,a){return undefined(o,a)}function zm(o){const a=o[3];return Dr(a)?a[3]:a}function $y(o){return WM(o[13])}function qm(o){return WM(o[4])}function WM(o){for(;null!==o&&!Dr(o);)o=o[4];return o}function eh(o,a,u,h,f){if(null!=h){let m,v=!1;Dr(h)?m=h:ai(h)&&(v=!0,h=h[0]);const C=Bn(h);0===o&&null!==u?null==f?RE(a,u,C):Ou(a,u,C,f||null,!0):1===o&&null!==u?Ou(a,u,C,f||null,!0):2===o?function LE(o,a,u){const h=zy(o,a);h&&function iV(o,a,u,h){o.removeChild(a,u,h)}(o,h,a,u)}(a,C,v):3===o&&a.destroyNode(C),null!=m&&function QM(o,a,u,h,f){const m=u[7];m!==Bn(u)&&eh(a,o,h,m,f);for(let C=10;C<u.length;C++){const D=u[C];za(D[1],D,o,a,h,m)}}(a,o,m,u,f)}}function TE(o,a,u){return o.createElement(a,u)}function YM(o,a){const u=o[9],h=u.indexOf(a),f=a[3];512&a[2]&&(a[2]&=-513,zn(f,-1)),u.splice(h,1)}function Zm(o,a){if(o.length<=10)return;const u=10+a,h=o[u];if(h){const f=h[17];null!==f&&f!==o&&YM(f,h),a>0&&(o[u-1][4]=h[4]);const m=Lo(o,10+a);!function nV(o,a){za(o,a,a[11],2,null,null),a[0]=null,a[6]=null}(h[1],h);const v=m[19];null!==v&&v.detachView(m[1]),h[3]=null,h[4]=null,h[2]&=-65}return h}function kE(o,a){if(!(128&a[2])){const u=a[11];u.destroyNode&&za(o,a,u,3,null,null),function Ym(o){let a=o[13];if(!a)return Ki(o[1],o);for(;a;){let u=null;if(ai(a))u=a[13];else{const h=a[10];h&&(u=h)}if(!u){for(;a&&!a[4]&&a!==o;)ai(a)&&Ki(a[1],a),a=a[3];null===a&&(a=o),ai(a)&&Ki(a[1],a),u=a&&a[4]}a=u}}(a)}}function Ki(o,a){if(!(128&a[2])){a[2]&=-65,a[2]|=128,function ZM(o,a){let u;if(null!=o&&null!=(u=o.destroyHooks))for(let h=0;h<u.length;h+=2){const f=a[u[h]];if(!(f instanceof Mr)){const m=u[h+1];if(Array.isArray(m))for(let v=0;v<m.length;v+=2){const C=f[m[v]],D=m[v+1];try{D.call(C)}finally{}}else try{m.call(f)}finally{}}}}(o,a),function Ru(o,a){const u=o.cleanup,h=a[7];let f=-1;if(null!==u)for(let m=0;m<u.length-1;m+=2)if("string"==typeof u[m]){const v=u[m+1],C="function"==typeof v?v(a):Bn(a[v]),D=h[f=u[m+2]],A=u[m+3];"boolean"==typeof A?C.removeEventListener(u[m],D,A):A>=0?h[f=A]():h[f=-A].unsubscribe(),m+=2}else{const v=h[f=u[m+1]];u[m].call(v)}if(null!==h){for(let m=f+1;m<h.length;m++)(0,h[m])();a[7]=null}}(o,a),1===a[1].type&&a[11].destroy();const u=a[17];if(null!==u&&Dr(a[3])){u!==a[3]&&YM(u,a);const h=a[19];null!==h&&h.detachView(o)}!function YL(o){By.delete(o[20])}(a)}}function Km(o,a,u){return function xE(o,a,u){let h=a;for(;null!==h&&40&h.type;)h=(a=h).parent;if(null===h)return u[0];if(2&h.flags){const f=o.data[h.directiveStart].encapsulation;if(f===mt.None||f===mt.Emulated)return null}return Ni(h,u)}(o,a.parent,u)}function Ou(o,a,u,h,f){o.insertBefore(a,u,h,f)}function RE(o,a,u){o.appendChild(a,u)}function OE(o,a,u,h,f){null!==h?Ou(o,a,u,h,f):RE(o,a,u)}function zy(o,a){return o.parentNode(a)}function nh(o,a,u){return NE(o,a,u)}let NE=function KM(o,a,u){return 40&o.type?Ni(o,u):null};function ih(o,a,u,h){const f=Km(o,h,a),m=a[11],C=nh(h.parent||a[6],h,a);if(null!=f)if(Array.isArray(u))for(let D=0;D<u.length;D++)OE(m,f,u[D],C,!1);else OE(m,f,u,C,!1)}function Vf(o,a){if(null!==a){const u=a.type;if(3&u)return Ni(a,o);if(4&u)return Wy(-1,o[a.index]);if(8&u){const h=a.child;if(null!==h)return Vf(o,h);{const f=o[a.index];return Dr(f)?Wy(-1,f):Bn(f)}}if(32&u)return SE(a,o)()||Bn(o[a.index]);{const h=qy(o,a);return null!==h?Array.isArray(h)?h[0]:Vf(zm(o[16]),h):Vf(o,a.next)}}return null}function qy(o,a){return null!==a?o[16][6].projection[a.projection]:null}function Wy(o,a){const u=10+o+1;if(u<a.length){const h=a[u],f=h[1].firstChild;if(null!==f)return Vf(h,f)}return a[7]}function Yy(o,a,u,h,f,m,v){for(;null!=u;){const C=h[u.index],D=u.type;if(v&&0===a&&(C&&or(Bn(C),h),u.flags|=4),64!=(64&u.flags))if(8&D)Yy(o,a,u.child,h,f,m,!1),eh(a,o,f,C,m);else if(32&D){const A=SE(u,h);let R;for(;R=A();)eh(a,o,f,R,m);eh(a,o,f,C,m)}else 16&D?VE(o,a,h,u,f,m):eh(a,o,f,C,m);u=v?u.projectionNext:u.next}}function za(o,a,u,h,f,m){Yy(u,h,o.firstChild,a,f,m,!1)}function VE(o,a,u,h,f,m){const v=u[16],D=v[6].projection[h.projection];if(Array.isArray(D))for(let A=0;A<D.length;A++)eh(a,o,f,D[A],m);else Yy(o,a,D,v[3],f,m,!0)}function XM(o,a,u){o.setAttribute(a,"style",u)}function UE(o,a,u){""===u?o.removeAttribute(a,"class"):o.setAttribute(a,"class",u)}function JM(o,a,u){let h=o.length;for(;;){const f=o.indexOf(a,u);if(-1===f)return f;if(0===f||o.charCodeAt(f-1)<=32){const m=a.length;if(f+m===h||o.charCodeAt(f+m)<=32)return f}u=f+1}}const tk="ng-template";function nk(o,a,u){let h=0;for(;h<o.length;){let f=o[h++];if(u&&"class"===f){if(f=o[h],-1!==JM(f.toLowerCase(),a,0))return!0}else if(1===f){for(;h<o.length&&"string"==typeof(f=o[h++]);)if(f.toLowerCase()===a)return!0;return!1}}return!1}function HE(o){return 4===o.type&&o.value!==tk}function ik(o,a,u){return a===(4!==o.type||u?o.value:tk)}function jE(o,a,u){let h=4;const f=o.attrs||[],m=function ok(o){for(let a=0;a<o.length;a++)if(Dl(o[a]))return a;return o.length}(f);let v=!1;for(let C=0;C<a.length;C++){const D=a[C];if("number"!=typeof D){if(!v)if(4&h){if(h=2|1&h,""!==D&&!ik(o,D,u)||""===D&&1===a.length){if(ao(h))return!1;v=!0}}else{const A=8&h?D:a[++C];if(8&h&&null!==o.attrs){if(!nk(o.attrs,A,u)){if(ao(h))return!1;v=!0}continue}const B=rk(8&h?"class":D,f,HE(o),u);if(-1===B){if(ao(h))return!1;v=!0;continue}if(""!==A){let Q;Q=B>m?"":f[B+1].toLowerCase();const oe=8&h?Q:null;if(oe&&-1!==JM(oe,A,0)||2&h&&A!==Q){if(ao(h))return!1;v=!0}}}}else{if(!v&&!ao(h)&&!ao(D))return!1;if(v&&ao(D))continue;v=!1,h=D|1&h}}return ao(h)||v}function ao(o){return 0==(1&o)}function rk(o,a,u,h){if(null===a)return-1;let f=0;if(h||!u){let m=!1;for(;f<a.length;){const v=a[f];if(v===o)return f;if(3===v||6===v)m=!0;else{if(1===v||2===v){let C=a[++f];for(;"string"==typeof C;)C=a[++f];continue}if(4===v)break;if(0===v){f+=4;continue}}f+=m?1:2}return-1}return function ak(o,a){let u=o.indexOf(4);if(u>-1)for(u++;u<o.length;){const h=o[u];if("number"==typeof h)return-1;if(h===a)return u;u++}return-1}(a,o)}function Zy(o,a,u=!1){for(let h=0;h<a.length;h++)if(jE(o,a[h],u))return!0;return!1}function lk(o,a){e:for(let u=0;u<a.length;u++){const h=a[u];if(o.length===h.length){for(let f=0;f<o.length;f++)if(o[f]!==h[f])continue e;return!0}}return!1}function $E(o,a){return o?":not("+a.trim()+")":a}function sV(o){let a=o[0],u=1,h=2,f="",m=!1;for(;u<o.length;){let v=o[u];if("string"==typeof v)if(2&h){const C=o[++u];f+="["+v+(C.length>0?'="'+C+'"':"")+"]"}else 8&h?f+="."+v:4&h&&(f+=" "+v);else""!==f&&!ao(v)&&(a+=$E(m,f),f=""),h=v,m=m||!ao(h);u++}return""!==f&&(a+=$E(m,f)),a}const jt={};function dk(o){GE(Kt(),Oe(),Fn()+o,!1)}function GE(o,a,u,h){if(!h)if(3==(3&a[2])){const m=o.preOrderCheckHooks;null!==m&&Ea(a,m,u)}else{const m=o.preOrderHooks;null!==m&&Da(a,m,0,u)}As(u)}function Os(o,a=null,u=null,h){const f=mk(o,a,u,h);return f.resolveInjectorInitializers(),f}function mk(o,a=null,u=null,h,f=new Set){const m=[u||Mt,yi(o)];return h=h||("object"==typeof o?void 0:me(o)),new rE(m,a||hi(),h||null,f)}let Lc=(()=>{class o{static create(u,h){if(Array.isArray(u))return Os({name:""},h,u,"");{const f=u.name??"";return Os({name:f},u.parent,u.providers,f)}}}return o.THROW_IF_NOT_FOUND=Yi,o.NULL=new Rf,o.\u0275prov=tn({token:o,providedIn:"any",factory:()=>Vn(_i)}),o.__NG_ELEMENT_ID__=-1,o})();function rh(o,a=st.Default){const u=Oe();return null===u?Vn(o,a):Aa(li(),u,ee(o),a)}function ZE(){throw new Error("invalid")}function eg(o,a){return o<<17|a<<2}function Uo(o){return o>>17&32767}function tv(o){return 2|o}function zl(o){return(131068&o)>>2}function nv(o,a){return-131069&o|a<<2}function iv(o){return 1|o}function ag(o,a){const u=o.contentQueries;if(null!==u)for(let h=0;h<u.length;h+=2){const f=u[h],m=u[h+1];if(-1!==m){const v=o.data[m];mu(f),v.contentQueries(2,a[m],m)}}}function Uc(o,a,u,h,f,m,v,C,D,A,R){const B=a.blueprint.slice();return B[0]=f,B[2]=76|h,(null!==R||o&&1024&o[2])&&(B[2]|=1024),hl(B),B[3]=B[15]=o,B[8]=u,B[10]=v||o&&o[10],B[11]=C||o&&o[11],B[12]=D||o&&o[12]||null,B[9]=A||o&&o[9]||null,B[6]=m,B[20]=function VM(){return LM++}(),B[21]=R,B[16]=2==a.type?o[16]:B,B}function Fu(o,a,u,h,f){let m=o.data[a];if(null===m)m=function fv(o,a,u,h,f){const m=va(),v=vc(),D=o.data[a]=function Lk(o,a,u,h,f,m){return{type:u,index:h,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?m:m&&m.parent,u,a,h,f);return null===o.firstChild&&(o.firstChild=D),null!==m&&(v?null==m.child&&null!==D.parent&&(m.child=D):null===m.next&&(m.next=D)),D}(o,a,u,h,f),function Ad(){return Pt.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=u,m.value=h,m.attrs=f;const v=function yc(){const o=Pt.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();m.injectorIndex=null===v?-1:v.injectorIndex}return ir(m,!0),m}function Lu(o,a,u,h){if(0===u)return-1;const f=a.length;for(let m=0;m<u;m++)a.push(h),o.blueprint.push(h),o.data.push(null);return f}function jo(o,a,u){Ca(a);try{const h=o.viewQuery;null!==h&&qf(1,h,u);const f=o.template;null!==f&&$o(o,a,f,1,u),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&ag(o,a),o.staticViewQueries&&qf(2,o.viewQuery,u);const m=o.components;null!==m&&function Nk(o,a){for(let u=0;u<a.length;u++)gg(o,a[u])}(a,m)}catch(h){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),h}finally{a[2]&=-5,Qs()}}function ah(o,a,u,h){const f=a[2];if(128!=(128&f)){Ca(a);try{hl(a),function yl(o){return Pt.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==u&&$o(o,a,u,2,h);const v=3==(3&f);if(v){const A=o.preOrderCheckHooks;null!==A&&Ea(a,A,null)}else{const A=o.preOrderHooks;null!==A&&Da(a,A,0,null),Nd(a,0)}if(function Bu(o){for(let a=$y(o);null!==a;a=qm(a)){if(!a[2])continue;const u=a[9];for(let h=0;h<u.length;h++){const f=u[h],m=f[3];0==(512&f[2])&&zn(m,1),f[2]|=512}}}(a),function Gk(o){for(let a=$y(o);null!==a;a=qm(a))for(let u=10;u<a.length;u++){const h=a[u],f=h[1];Ks(h)&&ah(f,h,f.template,h[8])}}(a),null!==o.contentQueries&&ag(o,a),v){const A=o.contentCheckHooks;null!==A&&Ea(a,A)}else{const A=o.contentHooks;null!==A&&Da(a,A,1),Nd(a,1)}!function Bc(o,a){const u=o.hostBindingOpCodes;if(null!==u)try{for(let h=0;h<u.length;h++){const f=u[h];if(f<0)As(~f);else{const m=f,v=u[++h],C=u[++h];Md(v,m),C(2,a[m])}}}finally{As(-1)}}(o,a);const C=o.components;null!==C&&function lg(o,a){for(let u=0;u<a.length;u++)bv(o,a[u])}(a,C);const D=o.viewQuery;if(null!==D&&qf(2,D,h),v){const A=o.viewCheckHooks;null!==A&&Ea(a,A)}else{const A=o.viewHooks;null!==A&&Da(a,A,2),Nd(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),a[2]&=-41,512&a[2]&&(a[2]&=-513,zn(a[3],-1))}finally{Qs()}}}function rD(o,a,u,h){const f=a[10],v=_c(a);try{!v&&f.begin&&f.begin(),v&&jo(o,a,h),ah(o,a,u,h)}finally{!v&&f.end&&f.end()}}function $o(o,a,u,h,f){const m=Fn(),v=2&h;try{As(-1),v&&a.length>22&&GE(o,a,22,!1),u(h,f)}finally{As(m)}}function Hc(o,a,u){if(Es(a)){const f=a.directiveEnd;for(let m=a.directiveStart;m<f;m++){const v=o.data[m];v.contentQueries&&v.contentQueries(1,u[m],m)}}}function Vu(o,a,u){!xo()||(function pg(o,a,u,h){const f=u.directiveStart,m=u.directiveEnd;o.firstCreatePass||ks(u,a),or(h,a);const v=u.initialInputs;for(let C=f;C<m;C++){const D=o.data[C],A=pr(D);A&&yv(a,u,D);const R=ls(a,o,C,u);or(R,a),null!==v&&jk(0,C-f,R,D,0,v),A&&(cn(u.index,a)[8]=R)}}(o,a,u,Ni(u,a)),128==(128&u.flags)&&function Uk(o,a,u){const h=u.directiveStart,f=u.directiveEnd,m=u.index,v=function pf(){return Pt.lFrame.currentDirectiveIndex}();try{As(m);for(let C=h;C<f;C++){const D=o.data[C],A=a[C];wa(C),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&aD(D,A)}}finally{As(-1),wa(v)}}(o,a,u))}function pv(o,a,u=Ni){const h=a.localNames;if(null!==h){let f=a.index+1;for(let m=0;m<h.length;m+=2){const v=h[m+1],C=-1===v?u(a,o):o[v];o[f++]=C}}}function cg(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=ug(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function ug(o,a,u,h,f,m,v,C,D,A){const R=22+h,B=R+f,Q=function dg(o,a){const u=[];for(let h=0;h<a;h++)u.push(h<o?null:jt);return u}(R,B),oe="function"==typeof A?A():A;return Q[1]={type:o,blueprint:Q,template:u,queries:null,viewQuery:C,declTNode:a,data:Q.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:B,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:D,consts:oe,incompleteFirstPass:!1}}function hg(o,a,u,h){const f=dD(a);null===u?f.push(h):(f.push(u),o.firstCreatePass&&Iv(o).push(h,f.length-1))}function sD(o,a,u){for(let h in o)if(o.hasOwnProperty(h)){const f=o[h];(u=null===u?{}:u).hasOwnProperty(h)?u[h].push(a,f):u[h]=[a,f]}return u}function oD(o,a){const h=a.directiveEnd,f=o.data,m=a.attrs,v=[];let C=null,D=null;for(let A=a.directiveStart;A<h;A++){const R=f[A],B=R.inputs,Q=null===m||HE(a)?null:$k(B,m);v.push(Q),C=sD(B,A,C),D=sD(R.outputs,A,D)}null!==C&&(C.hasOwnProperty("class")&&(a.flags|=16),C.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=v,a.inputs=C,a.outputs=D}function hs(o,a,u,h,f,m,v,C){const D=Ni(a,u);let R,A=a.inputs;!C&&null!=A&&(R=A[h])?(Wf(o,u,R,h,f),la(a)&&$f(u,a.index)):3&a.type&&(h=function Fs(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(h),f=null!=v?v(f,a.value||"",h):f,m.setProperty(D,h,f))}function $f(o,a){const u=cn(a,o);16&u[2]||(u[2]|=32)}function gv(o,a,u,h){let f=!1;if(xo()){const m=function Hk(o,a,u){const h=o.directiveRegistry;let f=null;if(h)for(let m=0;m<h.length;m++){const v=h[m];Zy(u,v.selectors,!1)&&(f||(f=[]),Ro(ks(u,a),o,v.type),pr(v)?(Gf(o,u),f.unshift(v)):f.push(v))}return f}(o,a,u),v=null===h?null:{"":-1};if(null!==m){f=!0,_v(u,o.data.length,m.length);for(let R=0;R<m.length;R++){const B=m[R];B.providersResolver&&B.providersResolver(B)}let C=!1,D=!1,A=Lu(o,a,m.length,null);for(let R=0;R<m.length;R++){const B=m[R];u.mergedAttrs=Il(u.mergedAttrs,B.hostAttrs),cD(o,u,a,A,B),lD(A,B,v),null!==B.contentQueries&&(u.flags|=8),(null!==B.hostBindings||null!==B.hostAttrs||0!==B.hostVars)&&(u.flags|=128);const Q=B.type.prototype;!C&&(Q.ngOnChanges||Q.ngOnInit||Q.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(u.index),C=!0),!D&&(Q.ngOnChanges||Q.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(u.index),D=!0),A++}oD(o,u)}v&&function mg(o,a,u){if(a){const h=o.localNames=[];for(let f=0;f<a.length;f+=2){const m=u[a[f+1]];if(null==m)throw new Ie(-301,!1);h.push(a[f],m)}}}(u,h,v)}return u.mergedAttrs=Il(u.mergedAttrs,u.attrs),f}function Bk(o,a,u,h,f,m){const v=m.hostBindings;if(v){let C=o.hostBindingOpCodes;null===C&&(C=o.hostBindingOpCodes=[]);const D=~a.index;(function gV(o){let a=o.length;for(;a>0;){const u=o[--a];if("number"==typeof u&&u<0)return u}return 0})(C)!=D&&C.push(D),C.push(h,f,v)}}function aD(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function Gf(o,a){a.flags|=2,(o.components||(o.components=[])).push(a.index)}function lD(o,a,u){if(u){if(a.exportAs)for(let h=0;h<a.exportAs.length;h++)u[a.exportAs[h]]=o;pr(a)&&(u[""]=o)}}function _v(o,a,u){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+u,o.providerIndexes=a}function cD(o,a,u,h,f){o.data[h]=f;const m=f.factory||(f.factory=Pi(f.type)),v=new Mr(m,pr(f),rh);o.blueprint[h]=v,u[h]=v,Bk(o,a,0,h,Lu(o,u,f.hostVars,jt),f)}function yv(o,a,u){const h=Ni(a,o),f=cg(u),m=o[10],v=_g(o,Uc(o,f,null,u.onPush?32:16,h,a,m,m.createRenderer(h,u),null,null,null));o[a.index]=v}function Go(o,a,u,h,f,m){const v=Ni(o,a);!function vv(o,a,u,h,f,m,v){if(null==m)o.removeAttribute(a,f,u);else{const C=null==v?Ee(m):v(m,h||"",f);o.setAttribute(a,f,C,u)}}(a[11],v,m,o.value,u,h,f)}function jk(o,a,u,h,f,m){const v=m[a];if(null!==v){const C=h.setInput;for(let D=0;D<v.length;){const A=v[D++],R=v[D++],B=v[D++];null!==C?h.setInput(u,B,A,R):u[R]=B}}}function $k(o,a){let u=null,h=0;for(;h<a.length;){const f=a[h];if(0!==f)if(5!==f){if("number"==typeof f)break;o.hasOwnProperty(f)&&(null===u&&(u=[]),u.push(f,o[f],a[h+1])),h+=2}else h+=2;else h+=4}return u}function uD(o,a,u,h){return new Array(o,!0,!1,a,null,0,h,u,null,null)}function bv(o,a){const u=cn(a,o);if(Ks(u)){const h=u[1];48&u[2]?ah(h,u,h.template,u[8]):u[5]>0&&zf(u)}}function zf(o){for(let h=$y(o);null!==h;h=qm(h))for(let f=10;f<h.length;f++){const m=h[f];if(Ks(m))if(512&m[2]){const v=m[1];ah(v,m,v.template,m[8])}else m[5]>0&&zf(m)}const u=o[1].components;if(null!==u)for(let h=0;h<u.length;h++){const f=cn(u[h],o);Ks(f)&&f[5]>0&&zf(f)}}function gg(o,a){const u=cn(a,o),h=u[1];(function zk(o,a){for(let u=a.length;u<o.blueprint.length;u++)a.push(o.blueprint[u])})(h,u),jo(h,u,u[8])}function _g(o,a){return o[13]?o[14][4]=a:o[13]=a,o[14]=a,a}function wv(o){for(;o;){o[2]|=32;const a=zm(o);if(lu(o)&&!a)return o;o=a}return null}function qf(o,a,u){mu(0),a(o,u)}function dD(o){return o[7]||(o[7]=[])}function Iv(o){return o.cleanup||(o.cleanup=[])}function hD(o,a,u){return(null===o||pr(o))&&(u=function Sd(o){for(;Array.isArray(o);){if("object"==typeof o[1])return o;o=o[0]}return null}(u[a.index])),u[11]}function Wk(o,a){const u=o[9],h=u?u.get(Of,null):null;h&&h.handleError(a)}function Wf(o,a,u,h,f){for(let m=0;m<u.length;){const v=u[m++],C=u[m++],D=a[v],A=o.data[v];null!==A.setInput?A.setInput(D,f,h,C):D[C]=f}}function vg(o,a,u){let h=u?o.styles:null,f=u?o.classes:null,m=0;if(null!==a)for(let v=0;v<a.length;v++){const C=a[v];"number"==typeof C?m=C:1==m?f=we(f,C):2==m&&(h=we(h,C+": "+a[++v]+";"))}u?o.styles=h:o.stylesWithoutHost=h,u?o.classes=f:o.classesWithoutHost=f}function bg(o,a,u,h,f=!1){for(;null!==u;){const m=a[u.index];if(null!==m&&h.push(Bn(m)),Dr(m))for(let C=10;C<m.length;C++){const D=m[C],A=D[1].firstChild;null!==A&&bg(D[1],D,A,h)}const v=u.type;if(8&v)bg(o,a,u.child,h);else if(32&v){const C=SE(u,a);let D;for(;D=C();)h.push(D)}else if(16&v){const C=qy(a,u);if(Array.isArray(C))h.push(...C);else{const D=zm(a[16]);bg(D[1],D,C,h,!0)}}u=f?u.projectionNext:u.next}return h}class lh{constructor(a,u){this._lView=a,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,u=a[1];return bg(u,a,u.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(Dr(a)){const u=a[8],h=u?u.indexOf(this):-1;h>-1&&(Zm(a,h),Lo(u,h))}this._attachedToViewContainer=!1}kE(this._lView[1],this._lView)}onDestroy(a){hg(this._lView[1],this._lView,null,a)}markForCheck(){wv(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function Cv(o,a,u){const h=a[10];h.begin&&h.begin();try{ah(o,a,o.template,u)}catch(f){throw Wk(a,f),f}finally{h.end&&h.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ie(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function th(o,a){za(o,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Ie(902,!1);this._appRef=a}}class Sv extends lh{constructor(a){super(a),this._view=a}detectChanges(){!function yg(o){!function qk(o){for(let a=0;a<o.components.length;a++){const u=o.components[a],h=Uy(u);if(null!==h){const f=h[1];rD(f,h,f.template,u)}}}(o[8])}(this._view)}checkNoChanges(){}get context(){return null}}class wg extends Mu{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const u=$(a);return new Yf(u,this.ngModule)}}function Yk(o){const a=[];for(let u in o)o.hasOwnProperty(u)&&a.push({propName:o[u],templateName:u});return a}class Kk{constructor(a,u){this.injector=a,this.parentInjector=u}get(a,u,h){const f=this.injector.get(a,Py,h);return f!==Py||u===Py?f:this.parentInjector.get(a,u,h)}}class Yf extends oE{constructor(a,u){super(),this.componentDef=a,this.ngModule=u,this.componentType=a.type,this.selector=function ck(o){return o.map(sV).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return Yk(this.componentDef.inputs)}get outputs(){return Yk(this.componentDef.outputs)}create(a,u,h,f){let m=(f=f||this.ngModule)instanceof qr?f:f?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const v=m?new Kk(a,m):a,C=v.get(yr,null);if(null===C)throw new Ie(407,!1);const D=v.get(Xd,null),A=C.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",B=h?function Fk(o,a,u){return o.selectRootElement(a,u===mt.ShadowDom)}(A,h,this.componentDef.encapsulation):TE(C.createRenderer(null,this.componentDef),R,function Zk(o){const a=o.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(R)),Q=this.componentDef.onPush?288:272,oe={components:[]},Te=ug(0,null,null,1,0,null,null,null,null,null),je=Uc(null,Te,oe,Q,null,null,C,A,D,v,null);let tt,ut;Ca(je);try{const Rt=function ex(o,a,u,h,f,m){const v=u[1];u[22]=o;const D=Fu(v,22,2,"#host",null),A=D.mergedAttrs=a.hostAttrs;null!==A&&(vg(D,A,!0),null!==o&&(Ms(f,o,A),null!==D.classes&&UE(f,o,D.classes),null!==D.styles&&XM(f,o,D.styles)));const R=h.createRenderer(o,a),B=Uc(u,cg(a),null,a.onPush?32:16,u[22],D,h,R,m||null,null,null);return v.firstCreatePass&&(Ro(ks(D,u),v,a.type),Gf(v,D),_v(D,u.length,1)),_g(u,B),u[22]=B}(B,this.componentDef,je,C,A);if(B)if(h)Ms(A,B,["ng-version",cE.full]);else{const{attrs:Ve,classes:Tt}=function uk(o){const a=[],u=[];let h=1,f=2;for(;h<o.length;){let m=o[h];if("string"==typeof m)2===f?""!==m&&a.push(m,o[++h]):8===f&&u.push(m);else{if(!ao(f))break;f=m}h++}return{attrs:a,classes:u}}(this.componentDef.selectors[0]);Ve&&Ms(A,B,Ve),Tt&&Tt.length>0&&UE(A,B,Tt.join(" "))}if(ut=ko(Te,22),void 0!==u){const Ve=ut.projection=[];for(let Tt=0;Tt<this.ngContentSelectors.length;Tt++){const un=u[Tt];Ve.push(null!=un?Array.from(un):null)}}tt=function tx(o,a,u,h,f){const m=u[1],v=function Vk(o,a,u){const h=li();o.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),cD(o,h,a,Lu(o,a,1,null),u),oD(o,h));const f=ls(a,o,h.directiveStart,h);or(f,a);const m=Ni(h,a);return m&&or(m,a),f}(m,u,a);if(h.components.push(v),o[8]=v,null!==f)for(const D of f)D(v,a);if(a.contentQueries){const D=li();a.contentQueries(1,v,D.directiveStart)}const C=li();return!m.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(As(C.index),Bk(u[1],C,0,C.directiveStart,C.directiveEnd,a),aD(a,v)),v}(Rt,this.componentDef,je,oe,[nx]),jo(Te,je,null)}finally{Qs()}return new Xk(this.componentType,tt,ku(ut,je),je,ut)}}class Xk extends class CM{}{constructor(a,u,h,f,m){super(),this.location=h,this._rootLView=f,this._tNode=m,this.instance=u,this.hostView=this.changeDetectorRef=new Sv(f),this.componentType=a}setInput(a,u){const h=this._tNode.inputs;let f;if(null!==h&&(f=h[a])){const m=this._rootLView;Wf(m[1],m,f,a,u),$f(m,this._tNode.index)}}get injector(){return new ka(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function nx(){const o=li();bu(Oe()[1],o)}function Tv(o){let a=function Cg(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),u=!0;const h=[o];for(;a;){let f;if(pr(o))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Ie(903,!1);f=a.\u0275dir}if(f){if(u){h.push(f);const v=o;v.inputs=Av(o.inputs),v.declaredInputs=Av(o.declaredInputs),v.outputs=Av(o.outputs);const C=f.hostBindings;C&&sx(o,C);const D=f.viewQuery,A=f.contentQueries;if(D&&rx(o,D),A&&pD(o,A),ae(o.inputs,f.inputs),ae(o.declaredInputs,f.declaredInputs),ae(o.outputs,f.outputs),pr(f)&&f.data.animation){const R=o.data;R.animation=(R.animation||[]).concat(f.data.animation)}}const m=f.features;if(m)for(let v=0;v<m.length;v++){const C=m[v];C&&C.ngInherit&&C(o),C===Tv&&(u=!1)}}a=Object.getPrototypeOf(a)}!function ix(o){let a=0,u=null;for(let h=o.length-1;h>=0;h--){const f=o[h];f.hostVars=a+=f.hostVars,f.hostAttrs=Il(f.hostAttrs,u=Il(u,f.hostAttrs))}}(h)}function Av(o){return o===Oi?{}:o===Mt?[]:o}function rx(o,a){const u=o.viewQuery;o.viewQuery=u?(h,f)=>{a(h,f),u(h,f)}:a}function pD(o,a){const u=o.contentQueries;o.contentQueries=u?(h,f,m)=>{a(h,f,m),u(h,f,m)}:a}function sx(o,a){const u=o.hostBindings;o.hostBindings=u?(h,f)=>{a(h,f),u(h,f)}:a}let ch=null;function Uu(){if(!ch){const o=Nt.Symbol;if(o&&o.iterator)ch=o.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<a.length;++u){const h=a[u];"entries"!==h&&"size"!==h&&Map.prototype[h]===Map.prototype.entries&&(ch=h)}}}return ch}function Hu(o){return!!uh(o)&&(Array.isArray(o)||!(o instanceof Map)&&Uu()in o)}function uh(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function vr(o,a,u){return!Object.is(o[a],u)&&(o[a]=u,!0)}function kv(o,a,u,h){const f=Oe();return vr(f,vl(),a)&&(Kt(),Go(Ln(),f,o,a,u,h)),kv}function hh(o,a,u,h){return vr(o,vl(),u)?a+Ee(u)+h:jt}function bD(o,a,u,h,f,m,v,C){const D=Oe(),A=Kt(),R=o+22,B=A.firstCreatePass?function ux(o,a,u,h,f,m,v,C,D){const A=a.consts,R=Fu(a,o,4,v||null,Ar(A,C));gv(a,u,R,Ar(A,D)),bu(a,R);const B=R.tViews=ug(2,R,h,f,m,a.directiveRegistry,a.pipeRegistry,null,a.schemas,A);return null!==a.queries&&(a.queries.template(a,R),B.queries=a.queries.embeddedTView(R)),R}(R,A,D,a,u,h,f,m,v):A.data[R];ir(B,!1);const Q=D[11].createComment("");ih(A,D,Q,B),or(Q,D),_g(D,D[R]=uD(Q,D,Q,B)),ca(B)&&Vu(A,D,B),null!=v&&pv(D,B,C)}function wD(o){return os(function _l(){return Pt.lFrame.contextLView}(),22+o)}function Pv(o,a,u){const h=Oe();return vr(h,vl(),a)&&hs(Kt(),Ln(),h,o,a,h[11],u,!1),Pv}function Eg(o,a,u,h,f){const v=f?"class":"style";Wf(o,u,a.inputs[v],v,h)}function Qf(o,a,u,h){const f=Oe(),m=Kt(),v=22+o,C=f[11],D=f[v]=TE(C,a,function vu(){return Pt.lFrame.currentNamespace}()),A=m.firstCreatePass?function Nv(o,a,u,h,f,m,v){const C=a.consts,A=Fu(a,o,2,f,Ar(C,m));return gv(a,u,A,Ar(C,v)),null!==A.attrs&&vg(A,A.attrs,!1),null!==A.mergedAttrs&&vg(A,A.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,A),A}(v,m,f,0,a,u,h):m.data[v];ir(A,!0);const R=A.mergedAttrs;null!==R&&Ms(C,D,R);const B=A.classes;null!==B&&UE(C,D,B);const Q=A.styles;return null!==Q&&XM(C,D,Q),64!=(64&A.flags)&&ih(m,f,D,A),0===function pl(){return Pt.lFrame.elementDepthCount}()&&or(D,f),function Td(){Pt.lFrame.elementDepthCount++}(),ca(A)&&(Vu(m,f,A),Hc(m,A,f)),null!==h&&pv(f,A),Qf}function Dg(){let o=li();vc()?ba():(o=o.parent,ir(o,!1));const a=o;!function ml(){Pt.lFrame.elementDepthCount--}();const u=Kt();return u.firstCreatePass&&(bu(u,o),Es(o)&&u.queries.elementEnd(o)),null!=a.classesWithoutHost&&function wc(o){return 0!=(16&o.flags)}(a)&&Eg(u,a,Oe(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function Cc(o){return 0!=(32&o.flags)}(a)&&Eg(u,a,Oe(),a.stylesWithoutHost,!1),Dg}function CD(o,a,u,h){return Qf(o,a,u,h),Dg(),CD}function Fv(o,a,u){const h=Oe(),f=Kt(),m=o+22,v=f.firstCreatePass?function wV(o,a,u,h,f){const m=a.consts,v=Ar(m,h),C=Fu(a,o,8,"ng-container",v);return null!==v&&vg(C,v,!0),gv(a,u,C,Ar(m,f)),null!==a.queries&&a.queries.elementStart(a,C),C}(m,f,h,a,u):f.data[m];ir(v,!0);const C=h[m]=h[11].createComment("");return ih(f,h,C,v),or(C,h),ca(v)&&(Vu(f,h,v),Hc(f,v,h)),null!=u&&pv(h,v),Fv}function Xf(){let o=li();const a=Kt();return vc()?ba():(o=o.parent,ir(o,!1)),a.firstCreatePass&&(bu(a,o),Es(o)&&a.queries.elementEnd(o)),Xf}function hx(){return Oe()}function DD(o){return!!o&&"function"==typeof o.then}function Lv(o){return!!o&&"function"==typeof o.subscribe}const Vv=Lv;function Ig(o,a,u,h){const f=Oe(),m=Kt(),v=li();return ID(m,f,f[11],v,o,a,0,h),Ig}function Zl(o,a){const u=li(),h=Oe(),f=Kt();return ID(f,h,hD(pu(f.data),u,h),u,o,a),Zl}function ID(o,a,u,h,f,m,v,C){const D=ca(h),R=o.firstCreatePass&&Iv(o),B=a[8],Q=dD(a);let oe=!0;if(3&h.type||C){const tt=Ni(h,a),ut=C?C(tt):tt,Rt=Q.length,Ve=C?un=>C(Bn(un[h.index])):h.index;let Tt=null;if(!C&&D&&(Tt=function fo(o,a,u,h){const f=o.cleanup;if(null!=f)for(let m=0;m<f.length-1;m+=2){const v=f[m];if(v===u&&f[m+1]===h){const C=a[7],D=f[m+2];return C.length>D?C[D]:null}"string"==typeof v&&(m+=2)}return null}(o,a,f,h.index)),null!==Tt)(Tt.__ngLastListenerFn__||Tt).__ngNextListenerFn__=m,Tt.__ngLastListenerFn__=m,oe=!1;else{m=SD(h,a,B,m,!1);const un=u.listen(ut,f,m);Q.push(m,un),R&&R.push(f,Ve,Rt,Rt+1)}}else m=SD(h,a,B,m,!1);const Te=h.outputs;let je;if(oe&&null!==Te&&(je=Te[f])){const tt=je.length;if(tt)for(let ut=0;ut<tt;ut+=2){const Qn=a[je[ut]][je[ut+1]].subscribe(m),td=Q.length;Q.push(m,Qn),R&&R.push(f,h.index,td,-(td+1))}}}function Bv(o,a,u,h){try{return!1!==u(h)}catch(f){return Wk(o,f),!1}}function SD(o,a,u,h,f){return function m(v){if(v===Function)return h;wv(2&o.flags?cn(o.index,a):a);let D=Bv(a,0,h,v),A=m.__ngNextListenerFn__;for(;A;)D=Bv(a,0,A,v)&&D,A=A.__ngNextListenerFn__;return f&&!1===D&&(v.preventDefault(),v.returnValue=!1),D}}function TD(o=1){return function Xs(o){return(Pt.lFrame.contextLView=function Rd(o,a){for(;o>0;)a=a[15],o--;return a}(o,Pt.lFrame.contextLView))[8]}(o)}function fx(o,a){let u=null;const h=function sk(o){const a=o.attrs;if(null!=a){const u=a.indexOf(5);if(0==(1&u))return a[u+1]}return null}(o);for(let f=0;f<a.length;f++){const m=a[f];if("*"!==m){if(null===h?Zy(o,m,!0):lk(h,m))return f}else u=f}return u}function Jf(o){const a=Oe()[16][6];if(!a.projection){const h=a.projection=Gr(o?o.length:1,null),f=h.slice();let m=a.child;for(;null!==m;){const v=o?fx(m,o):0;null!==v&&(f[v]?f[v].projectionNext=m:h[v]=m,f[v]=m),m=m.next}}}function AD(o,a=0,u){const h=Oe(),f=Kt(),m=Fu(f,22+o,16,null,u||null);null===m.projection&&(m.projection=a),ba(),64!=(64&m.flags)&&function Xm(o,a,u){VE(a[11],0,a,u,Km(o,u,a),nh(u.parent||a[6],u,a))}(f,h,m)}function ep(o,a,u,h,f){const m=Oe(),v=hh(m,a,u,h);return v!==jt&&hs(Kt(),Ln(),m,o,v,m[11],f,!1),ep}function Gv(o,a,u,h,f){const m=o[u+1],v=null===a;let C=h?Uo(m):zl(m),D=!1;for(;0!==C&&(!1===D||v);){const R=o[C+1];Sg(o[C],a)&&(D=!0,o[C+1]=h?iv(R):tv(R)),C=h?Uo(R):zl(R)}D&&(o[u+1]=h?tv(m):iv(m))}function Sg(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&Li(o,a)>=0}const Ui={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function zv(o){return o.substring(Ui.key,Ui.keyEnd)}function PD(o,a){const u=Ui.textEnd;return u===a?-1:(a=Ui.keyEnd=function Wv(o,a,u){for(;a<u&&o.charCodeAt(a)>32;)a++;return a}(o,Ui.key=a,u),zu(o,a,u))}function zu(o,a,u){for(;a<u&&o.charCodeAt(a)<=32;)a++;return a}function Mg(o,a,u){return Wa(o,a,u,!1),Mg}function kg(o,a){return Wa(o,a,null,!0),kg}function Wo(o,a){for(let u=function OD(o){return function Tg(o){Ui.key=0,Ui.keyEnd=0,Ui.value=0,Ui.valueEnd=0,Ui.textEnd=o.length}(o),PD(o,zu(o,0,Ui.textEnd))}(a);u>=0;u=PD(a,u))_r(o,zv(a),!0)}function Wa(o,a,u,h){const f=Oe(),m=Kt(),v=Ts(2);m.firstUpdatePass&&gh(m,o,v,h),a!==jt&&vr(f,v,a)&&_x(m,m.data[Fn()],f,f[11],o,f[v+1]=function vx(o,a){return null==o||("string"==typeof a?o+=a:"object"==typeof o&&(o=me(ja(o)))),o}(a,u),h,v)}function Kv(o,a){return a>=o.expandoStartIndex}function gh(o,a,u,h){const f=o.data;if(null===f[u+1]){const m=f[Fn()],v=Kv(o,u);tb(m,h)&&null===a&&!v&&(a=!1),a=function Qv(o,a,u,h){const f=pu(o);let m=h?a.residualClasses:a.residualStyles;if(null===f)0===(h?a.classBindings:a.styleBindings)&&(u=Rg(u=Jv(null,o,a,u,h),a.attrs,h),m=null);else{const v=a.directiveStylingLast;if(-1===v||o[v]!==f)if(u=Jv(f,o,a,u,h),null===m){let D=function xg(o,a,u){const h=u?a.classBindings:a.styleBindings;if(0!==zl(h))return o[Uo(h)]}(o,a,h);void 0!==D&&Array.isArray(D)&&(D=Jv(null,o,a,D[1],h),D=Rg(D,a.attrs,h),function mx(o,a,u,h){o[Uo(u?a.classBindings:a.styleBindings)]=h}(o,a,h,D))}else m=function Xv(o,a,u){let h;const f=a.directiveEnd;for(let m=1+a.directiveStylingLast;m<f;m++)h=Rg(h,o[m].hostAttrs,u);return Rg(h,a.attrs,u)}(o,a,h)}return void 0!==m&&(h?a.residualClasses=m:a.residualStyles=m),u}(f,m,a,h),function kD(o,a,u,h,f,m){let v=m?a.classBindings:a.styleBindings,C=Uo(v),D=zl(v);o[h]=u;let R,A=!1;if(Array.isArray(u)){const B=u;R=B[1],(null===R||Li(B,R)>0)&&(A=!0)}else R=u;if(f)if(0!==D){const Q=Uo(o[C+1]);o[h+1]=eg(Q,C),0!==Q&&(o[Q+1]=nv(o[Q+1],h)),o[C+1]=function Mk(o,a){return 131071&o|a<<17}(o[C+1],h)}else o[h+1]=eg(C,0),0!==C&&(o[C+1]=nv(o[C+1],h)),C=h;else o[h+1]=eg(D,0),0===C?C=h:o[D+1]=nv(o[D+1],h),D=h;A&&(o[h+1]=tv(o[h+1])),Gv(o,R,h,!0),Gv(o,R,h,!1),function xD(o,a,u,h,f){const m=f?o.residualClasses:o.residualStyles;null!=m&&"string"==typeof a&&Li(m,a)>=0&&(u[h+1]=iv(u[h+1]))}(a,R,o,h,m),v=eg(C,D),m?a.classBindings=v:a.styleBindings=v}(f,m,a,u,v,h)}}function Jv(o,a,u,h,f){let m=null;const v=u.directiveEnd;let C=u.directiveStylingLast;for(-1===C?C=u.directiveStart:C++;C<v&&(m=a[C],h=Rg(h,m.hostAttrs,f),m!==o);)C++;return null!==o&&(u.directiveStylingLast=C),h}function Rg(o,a,u){const h=u?1:2;let f=-1;if(null!==a)for(let m=0;m<a.length;m++){const v=a[m];"number"==typeof v?f=v:f===h&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),_r(o,v,!!u||a[++m]))}return void 0===o?null:o}function _x(o,a,u,h,f,m,v,C){if(!(3&a.type))return;const D=o.data,A=D[C+1];eb(function XE(o){return 1==(1&o)}(A)?yx(D,a,u,f,zl(A),v):void 0)||(eb(m)||function QE(o){return 2==(2&o)}(A)&&(m=yx(D,null,u,f,C,v)),function BE(o,a,u,h,f){if(a)f?o.addClass(u,h):o.removeClass(u,h);else{let m=-1===h.indexOf("-")?void 0:Ga.DashCase;null==f?o.removeStyle(u,h,m):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),m|=Ga.Important),o.setStyle(u,h,f,m))}}(h,v,jr(Fn(),u),f,m))}function yx(o,a,u,h,f,m){const v=null===a;let C;for(;f>0;){const D=o[f],A=Array.isArray(D),R=A?D[1]:D,B=null===R;let Q=u[f+1];Q===jt&&(Q=B?Mt:void 0);let oe=B?Fa(Q,h):R===h?Q:void 0;if(A&&!eb(oe)&&(oe=Fa(D,h)),eb(oe)&&(C=oe,v))return C;const Te=o[f+1];f=v?Uo(Te):zl(Te)}if(null!==a){let D=m?a.residualClasses:a.residualStyles;null!=D&&(C=Fa(D,h))}return C}function eb(o){return void 0!==o}function tb(o,a){return 0!=(o.flags&(a?16:32))}function VD(o,a=""){const u=Oe(),h=Kt(),f=o+22,m=h.firstCreatePass?Fu(h,f,1,a,null):h.data[f],v=u[f]=function Gy(o,a){return o.createText(a)}(u[11],a);ih(h,u,v,m),ir(m,!1)}function nb(o){return Og("",o,""),nb}function Og(o,a,u){const h=Oe(),f=hh(h,o,a,u);return f!==jt&&function jc(o,a,u){const h=jr(a,o);!function fi(o,a,u){o.setValue(a,u)}(o[11],h,u)}(h,Fn(),f),Og}function rb(o,a,u){!function Ya(o,a,u,h){const f=Kt(),m=Ts(2);f.firstUpdatePass&&gh(f,null,m,h);const v=Oe();if(u!==jt&&vr(v,m,u)){const C=f.data[Fn()];if(tb(C,h)&&!Kv(f,m)){let D=h?C.classesWithoutHost:C.stylesWithoutHost;null!==D&&(u=we(D,u||"")),Eg(f,C,v,u,h)}else!function EV(o,a,u,h,f,m,v,C){f===jt&&(f=Mt);let D=0,A=0,R=0<f.length?f[0]:null,B=0<m.length?m[0]:null;for(;null!==R||null!==B;){const Q=D<f.length?f[D+1]:void 0,oe=A<m.length?m[A+1]:void 0;let je,Te=null;R===B?(D+=2,A+=2,Q!==oe&&(Te=B,je=oe)):null===B||null!==R&&R<B?(D+=2,Te=R):(A+=2,Te=B,je=oe),null!==Te&&_x(o,a,u,h,Te,je,v,C),R=D<f.length?f[D]:null,B=A<m.length?m[A]:null}}(f,C,v,v[11],v[m+1],v[m+1]=function CV(o,a,u){if(null==u||""===u)return Mt;const h=[],f=ja(u);if(Array.isArray(f))for(let m=0;m<f.length;m++)o(h,f[m],!0);else if("object"==typeof f)for(const m in f)f.hasOwnProperty(m)&&o(h,m,f[m]);else"string"==typeof f&&a(h,f);return h}(o,a,u),h,m)}}(_r,Wo,hh(Oe(),o,a,u),!0)}function ip(o,a,u){const h=Oe();return vr(h,vl(),a)&&hs(Kt(),Ln(),h,o,a,h[11],u,!0),ip}function cb(o,a,u){const h=Oe();if(vr(h,vl(),a)){const m=Kt(),v=Ln();hs(m,v,h,o,a,hD(pu(m.data),v,h),u,!0)}return cb}const Gc=void 0;var Ix=["en",[["a","p"],["AM","PM"],Gc],[["AM","PM"],Gc,Gc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Gc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Gc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Gc,"{1} 'at' {0}",Gc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function ub(o){const u=Math.floor(Math.abs(o)),h=o.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===h?1:5}];let rp={};function Wu(o){const a=function Sx(o){return o.toLowerCase().replace(/_/g,"-")}(o);let u=hb(a);if(u)return u;const h=a.split("-")[0];if(u=hb(h),u)return u;if("en"===h)return Ix;throw new Ie(701,!1)}function db(o){return Wu(o)[xt.PluralCase]}function hb(o){return o in rp||(rp[o]=Nt.ng&&Nt.ng.common&&Nt.ng.common.locales&&Nt.ng.common.locales[o]),rp[o]}var xt=(()=>((xt=xt||{})[xt.LocaleId=0]="LocaleId",xt[xt.DayPeriodsFormat=1]="DayPeriodsFormat",xt[xt.DayPeriodsStandalone=2]="DayPeriodsStandalone",xt[xt.DaysFormat=3]="DaysFormat",xt[xt.DaysStandalone=4]="DaysStandalone",xt[xt.MonthsFormat=5]="MonthsFormat",xt[xt.MonthsStandalone=6]="MonthsStandalone",xt[xt.Eras=7]="Eras",xt[xt.FirstDayOfWeek=8]="FirstDayOfWeek",xt[xt.WeekendRange=9]="WeekendRange",xt[xt.DateFormat=10]="DateFormat",xt[xt.TimeFormat=11]="TimeFormat",xt[xt.DateTimeFormat=12]="DateTimeFormat",xt[xt.NumberSymbols=13]="NumberSymbols",xt[xt.NumberFormats=14]="NumberFormats",xt[xt.CurrencyCode=15]="CurrencyCode",xt[xt.CurrencySymbol=16]="CurrencySymbol",xt[xt.CurrencyName=17]="CurrencyName",xt[xt.Currencies=18]="Currencies",xt[xt.Directionality=19]="Directionality",xt[xt.PluralCase=20]="PluralCase",xt[xt.ExtraData=21]="ExtraData",xt))();const sp="en-US";let pb=sp;function Mb(o,a,u,h,f){if(o=ee(o),Array.isArray(o))for(let m=0;m<o.length;m++)Mb(o[m],a,u,h,f);else{const m=Kt(),v=Oe();let C=jl(o)?o:ee(o.provide),D=Oy(o);const A=li(),R=1048575&A.providerIndexes,B=A.directiveStart,Q=A.providerIndexes>>20;if(jl(o)||!o.multi){const oe=new Mr(D,f,rh),Te=xb(C,a,f?R:R+Q,B);-1===Te?(Ro(ks(A,v),m,C),kb(m,o,a.length),a.push(C),A.directiveStart++,A.directiveEnd++,f&&(A.providerIndexes+=1048576),u.push(oe),v.push(oe)):(u[Te]=oe,v[Te]=oe)}else{const oe=xb(C,a,R+Q,B),Te=xb(C,a,R,R+Q),je=oe>=0&&u[oe],tt=Te>=0&&u[Te];if(f&&!tt||!f&&!je){Ro(ks(A,v),m,C);const ut=function Qx(o,a,u,h,f){const m=new Mr(o,u,rh);return m.multi=[],m.index=a,m.componentProviders=0,fI(m,f,h&&!u),m}(f?Kx:Zx,u.length,f,h,D);!f&&tt&&(u[Te].providerFactory=ut),kb(m,o,a.length,0),a.push(C),A.directiveStart++,A.directiveEnd++,f&&(A.providerIndexes+=1048576),u.push(ut),v.push(ut)}else kb(m,o,oe>-1?oe:Te,fI(u[f?Te:oe],D,!f&&h));!f&&h&&tt&&u[Te].componentProviders++}}}function kb(o,a,u,h){const f=jl(a),m=function sr(o){return!!o.useClass}(a);if(f||m){const D=(m?ee(a.useClass):a).prototype.ngOnDestroy;if(D){const A=o.destroyHooks||(o.destroyHooks=[]);if(!f&&a.multi){const R=A.indexOf(u);-1===R?A.push(u,[h,D]):A[R+1].push(h,D)}else A.push(u,D)}}}function fI(o,a,u){return u&&o.componentProviders++,o.multi.push(a)-1}function xb(o,a,u,h){for(let f=u;f<h;f++)if(a[f]===o)return f;return-1}function Zx(o,a,u,h){return Rb(this.multi,[])}function Kx(o,a,u,h){const f=this.multi;let m;if(this.providerFactory){const v=this.providerFactory.componentProviders,C=ls(u,u[1],this.providerFactory.index,h);m=C.slice(0,v),Rb(f,m);for(let D=v;D<C.length;D++)m.push(C[D])}else m=[],Rb(f,m);return m}function Rb(o,a){for(let u=0;u<o.length;u++)a.push((0,o[u])());return a}function pI(o,a=[]){return u=>{u.providersResolver=(h,f)=>function Yx(o,a,u){const h=Kt();if(h.firstCreatePass){const f=pr(o);Mb(u,h.data,h.blueprint,f,!0),Mb(a,h.data,h.blueprint,f,!1)}}(h,f?f(o):o,a)}}class bh{}class mI{}function Xx(o,a){return new Jx(o,a??null)}class Jx extends bh{constructor(a,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new wg(this);const h=vt(a);this._bootstrapComponents=$a(h.bootstrap),this._r3Injector=mk(a,u,[{provide:bh,useValue:this},{provide:Mu,useValue:this.componentFactoryResolver}],me(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class Ob extends mI{constructor(a){super(),this.moduleType=a}create(a){return new Jx(this.moduleType,a)}}class jV extends bh{constructor(a,u,h){super(),this.componentFactoryResolver=new wg(this),this.instance=null;const f=new rE([...a,{provide:bh,useValue:this},{provide:Mu,useValue:this.componentFactoryResolver}],u||hi(),h,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function Pb(o,a,u=null){return new jV(o,a,u).injector}let qg=(()=>{class o{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const h=ct(0,u.type),f=h.length>0?Pb([h],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,f)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return o.\u0275prov=tn({token:o,providedIn:"environment",factory:()=>new o(Vn(qr))}),o})();function eR(o){o.getStandaloneInjector=a=>a.get(qg).getOrCreateStandaloneInjector(o)}function sR(o,a,u,h){return Kg(Oe(),ci(),o,a,u,h)}function Kg(o,a,u,h,f,m){const v=a+u;return vr(o,v,f)?function zo(o,a,u){return o[a]=u}(o,v+1,m?h.call(m,f):h(f)):function zc(o,a){const u=o[a];return u===jt?void 0:u}(o,v+1)}function uR(o,a){const u=Kt();let h;const f=o+22;u.firstCreatePass?(h=function dR(o,a){if(a)for(let u=a.length-1;u>=0;u--){const h=a[u];if(o===h.name)return h}}(a,u.pipeRegistry),u.data[f]=h,h.onDestroy&&(u.destroyHooks||(u.destroyHooks=[])).push(f,h.onDestroy)):h=u.data[f];const m=h.factory||(h.factory=Pi(h.type)),v=yn(rh);try{const C=Sl(!1),D=m();return Sl(C),function dx(o,a,u,h){u>=o.data.length&&(o.data[u]=null,o.blueprint[u]=null),a[u]=h}(u,Oe(),f,D),D}finally{yn(v)}}function wI(o,a,u){const h=o+22,f=Oe(),m=os(f,h);return function Xg(o,a){return o[1].data[a].pure}(f,h)?Kg(f,ci(),a,m.transform,u,m):m.transform(u)}function Hb(o){return a=>{setTimeout(o,void 0,a)}}const Yo=class fR extends l.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,u,h){let f=a,m=u||(()=>null),v=h;if(a&&"object"==typeof a){const D=a;f=D.next?.bind(D),m=D.error?.bind(D),v=D.complete?.bind(D)}this.__isAsync&&(m=Hb(m),f&&(f=Hb(f)),v&&(v=Hb(v)));const C=super.subscribe({next:f,error:m,complete:v});return a instanceof H.w0&&a.add(C),C}};function EI(){return this._results[Uu()]()}class hp{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Uu(),h=hp.prototype;h[u]||(h[u]=EI)}get changes(){return this._changes||(this._changes=new Yo)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,u){return this._results.reduce(a,u)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,u){const h=this;h.dirty=!1;const f=Fi(a);(this._changesDetected=!function Fo(o,a,u){if(o.length!==a.length)return!1;for(let h=0;h<o.length;h++){let f=o[h],m=a[h];if(u&&(f=u(f),m=u(m)),m!==f)return!1}return!0}(h._results,f,u))&&(h._results=f,h.length=f.length,h.last=f[this.length-1],h.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let fp=(()=>{class o{}return o.__NG_ELEMENT_ID__=jb,o})();const pp=fp,Hi=class extends pp{constructor(a,u,h){super(),this._declarationLView=a,this._declarationTContainer=u,this.elementRef=h}createEmbeddedView(a,u){const h=this._declarationTContainer.tViews,f=Uc(this._declarationLView,h,a,16,null,h.declTNode,null,null,null,null,u||null);f[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(f[19]=v.createEmbeddedView(h)),jo(h,f,a),new lh(f)}};function jb(){return Eh(li(),Oe())}function Eh(o,a){return 4&o.type?new Hi(a,o,ku(o,a)):null}let Xu=(()=>{class o{}return o.__NG_ELEMENT_ID__=DI,o})();function DI(){return II(li(),Oe())}const $b=Xu,Jg=class extends $b{constructor(a,u,h){super(),this._lContainer=a,this._hostTNode=u,this._hostLView=h}get element(){return ku(this._hostTNode,this._hostLView)}get injector(){return new ka(this._hostTNode,this._hostLView)}get parentInjector(){const a=Tl(this._hostTNode,this._hostLView);if(yf(a)){const u=Js(a,this._hostLView),h=ui(a);return new ka(u[1].data[h+8],u)}return new ka(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const u=Gb(this._lContainer);return null!==u&&u[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,u,h){let f,m;"number"==typeof h?f=h:null!=h&&(f=h.index,m=h.injector);const v=a.createEmbeddedView(u||{},m);return this.insert(v,f),v}createComponent(a,u,h,f,m){const v=a&&!function ti(o){return"function"==typeof o}(a);let C;if(v)C=u;else{const B=u||{};C=B.index,h=B.injector,f=B.projectableNodes,m=B.environmentInjector||B.ngModuleRef}const D=v?a:new Yf($(a)),A=h||this.parentInjector;if(!m&&null==D.ngModule){const Q=(v?A:this.parentInjector).get(qr,null);Q&&(m=Q)}const R=D.create(A,f,void 0,m);return this.insert(R.hostView,C),R}insert(a,u){const h=a._lView,f=h[1];if(function hu(o){return Dr(o[3])}(h)){const R=this.indexOf(a);if(-1!==R)this.detach(R);else{const B=h[3],Q=new Jg(B,B[6],B[3]);Q.detach(Q.indexOf(a))}}const m=this._adjustIndex(u),v=this._lContainer;!function AE(o,a,u,h){const f=10+h,m=u.length;h>0&&(u[f-1][4]=a),h<m-10?(a[4]=u[f],no(u,10+h,a)):(u.push(a),a[4]=null),a[3]=u;const v=a[17];null!==v&&u!==v&&function ME(o,a){const u=o[9];a[16]!==a[3][3][16]&&(o[2]=!0),null===u?o[9]=[a]:u.push(a)}(v,a);const C=a[19];null!==C&&C.insertView(o),a[2]|=64}(f,h,v,m);const C=Wy(m,v),D=h[11],A=zy(D,v[7]);return null!==A&&function Wm(o,a,u,h,f,m){h[0]=f,h[6]=a,za(o,h,u,1,f,m)}(f,v[6],D,h,A,C),a.attachToViewContainerRef(),no(e_(v),m,a),a}move(a,u){return this.insert(a,u)}indexOf(a){const u=Gb(this._lContainer);return null!==u?u.indexOf(a):-1}remove(a){const u=this._adjustIndex(a,-1),h=Zm(this._lContainer,u);h&&(Lo(e_(this._lContainer),u),kE(h[1],h))}detach(a){const u=this._adjustIndex(a,-1),h=Zm(this._lContainer,u);return h&&null!=Lo(e_(this._lContainer),u)?new lh(h):null}_adjustIndex(a,u=0){return a??this.length+u}};function Gb(o){return o[8]}function e_(o){return o[8]||(o[8]=[])}function II(o,a){let u;const h=a[o.index];if(Dr(h))u=h;else{let f;if(8&o.type)f=Bn(h);else{const m=a[11];f=m.createComment("");const v=Ni(o,a);Ou(m,zy(m,v),f,function rV(o,a){return o.nextSibling(a)}(m,v),!1)}a[o.index]=u=uD(h,a,f,o),_g(a,u)}return new Jg(u,o,a)}class SI{constructor(a){this.queryList=a,this.matches=null}clone(){return new SI(this.queryList)}setDirty(){this.queryList.setDirty()}}class TI{constructor(a=[]){this.queries=a}createEmbeddedView(a){const u=a.queries;if(null!==u){const h=null!==a.contentQueries?a.contentQueries[0]:u.length,f=[];for(let m=0;m<h;m++){const v=u.getByIndex(m);f.push(this.queries[v.indexInDeclarationView].clone())}return new TI(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let u=0;u<this.queries.length;u++)null!==vR(a,u).matches&&this.queries[u].setDirty()}}class pR{constructor(a,u,h=null){this.predicate=a,this.flags=u,this.read=h}}class AI{constructor(a=[]){this.queries=a}elementStart(a,u){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(a,u)}elementEnd(a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(a)}embeddedTView(a){let u=null;for(let h=0;h<this.length;h++){const f=null!==u?u.length:0,m=this.getByIndex(h).embeddedTView(a,f);m&&(m.indexInDeclarationView=h,null!==u?u.push(m):u=[m])}return null!==u?new AI(u):null}template(a,u){for(let h=0;h<this.queries.length;h++)this.queries[h].template(a,u)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class MI{constructor(a,u=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(a,u){this.isApplyingToNode(u)&&this.matchTNode(a,u)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,u){this.elementStart(a,u)}embeddedTView(a,u){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,u),new MI(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let h=a.parent;for(;null!==h&&8&h.type&&h.index!==u;)h=h.parent;return u===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(a,u){const h=this.metadata.predicate;if(Array.isArray(h))for(let f=0;f<h.length;f++){const m=h[f];this.matchTNodeWithReadOption(a,u,KV(u,m)),this.matchTNodeWithReadOption(a,u,Ml(u,a,m,!1,!1))}else h===fp?4&u.type&&this.matchTNodeWithReadOption(a,u,-1):this.matchTNodeWithReadOption(a,u,Ml(u,a,h,!1,!1))}matchTNodeWithReadOption(a,u,h){if(null!==h){const f=this.metadata.read;if(null!==f)if(f===$l||f===Xu||f===fp&&4&u.type)this.addMatch(u.index,-2);else{const m=Ml(u,a,f,!1,!1);null!==m&&this.addMatch(u.index,m)}else this.addMatch(u.index,h)}}addMatch(a,u){null===this.matches?this.matches=[a,u]:this.matches.push(a,u)}}function KV(o,a){const u=o.localNames;if(null!==u)for(let h=0;h<u.length;h+=2)if(u[h]===a)return u[h+1];return null}function gR(o,a,u,h){return-1===u?function mR(o,a){return 11&o.type?ku(o,a):4&o.type?Eh(o,a):null}(a,o):-2===u?function kI(o,a,u){return u===$l?ku(a,o):u===fp?Eh(a,o):u===Xu?II(a,o):void 0}(o,a,h):ls(o,o[1],u,a)}function t_(o,a,u,h){const f=a[19].queries[h];if(null===f.matches){const m=o.data,v=u.matches,C=[];for(let D=0;D<v.length;D+=2){const A=v[D];C.push(A<0?null:gR(a,m[A],v[D+1],u.metadata.read))}f.matches=C}return f.matches}function mp(o,a,u,h){const f=o.queries.getByIndex(u),m=f.matches;if(null!==m){const v=t_(o,a,f,u);for(let C=0;C<m.length;C+=2){const D=m[C];if(D>0)h.push(v[C/2]);else{const A=m[C+1],R=a[-D];for(let B=10;B<R.length;B++){const Q=R[B];Q[17]===Q[3]&&mp(Q[1],Q,A,h)}if(null!==R[9]){const B=R[9];for(let Q=0;Q<B.length;Q++){const oe=B[Q];mp(oe[1],oe,A,h)}}}}}return h}function zb(o){const a=Oe(),u=Kt(),h=bl();mu(h+1);const f=vR(u,h);if(o.dirty&&_c(a)===(2==(2&f.metadata.flags))){if(null===f.matches)o.reset([]);else{const m=f.crossesNgTemplate?mp(u,a,h,[]):t_(u,a,f,h);o.reset(m,TM),o.notifyOnChanges()}return!0}return!1}function xI(o,a,u){const h=Kt();h.firstCreatePass&&(OI(h,new pR(o,a,u),-1),2==(2&a)&&(h.staticViewQueries=!0)),_R(h,Oe(),a)}function n_(o,a,u,h){const f=Kt();if(f.firstCreatePass){const m=li();OI(f,new pR(a,u,h),m.index),function yR(o,a){const u=o.contentQueries||(o.contentQueries=[]);a!==(u.length?u[u.length-1]:-1)&&u.push(o.queries.length-1,a)}(f,o),2==(2&u)&&(f.staticContentQueries=!0)}_R(f,Oe(),u)}function RI(){return function QV(o,a){return o[19].queries[a].queryList}(Oe(),bl())}function _R(o,a,u){const h=new hp(4==(4&u));hg(o,a,h,h.destroy),null===a[19]&&(a[19]=new TI),a[19].queries.push(new SI(h))}function OI(o,a,u){null===o.queries&&(o.queries=new AI),o.queries.track(new MI(a,u))}function vR(o,a){return o.queries.getByIndex(a)}function bR(o,a){return Eh(o,a)}function nw(...o){}const RR=new xn("Application Initializer");let iw=(()=>{class o{constructor(u){this.appInits=u,this.resolve=nw,this.reject=nw,this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,f)=>{this.resolve=h,this.reject=f})}runInitializers(){if(this.initialized)return;const u=[],h=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const m=this.appInits[f]();if(DD(m))u.push(m);else if(Vv(m)){const v=new Promise((C,D)=>{m.subscribe({complete:C,error:D})});u.push(v)}}Promise.all(u).then(()=>{h()}).catch(f=>{this.reject(f)}),0===u.length&&h(),this.initialized=!0}}return o.\u0275fac=function(u){return new(u||o)(Vn(RR,8))},o.\u0275prov=tn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const OR=new xn("AppId",{providedIn:"root",factory:function PR(){return`${zI()}${zI()}${zI()}`}});function zI(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const NR=new xn("Platform Initializer"),wp=new xn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),rw=new xn("appBootstrapListener"),cB=new xn("AnimationModuleType");let uB=(()=>{class o{log(u){console.log(u)}warn(u){console.warn(u)}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=tn({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();const sw=new xn("LocaleId",{providedIn:"root",factory:()=>S(sw,st.Optional|st.SkipSelf)||function dB(){return typeof $localize<"u"&&$localize.locale||sp}()}),hB=new xn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class FR{constructor(a,u){this.ngModuleFactory=a,this.componentFactories=u}}let aw=(()=>{class o{compileModuleSync(u){return new Ob(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const h=this.compileModuleSync(u),m=$a(vt(u).declarations).reduce((v,C)=>{const D=$(C);return D&&v.push(new Yf(D)),v},[]);return new FR(h,m)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=tn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const cw=(()=>Promise.resolve(0))();function WI(o){typeof Zone>"u"?cw.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class Ls{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Yo(!1),this.onMicrotaskEmpty=new Yo(!1),this.onStable=new Yo(!1),this.onError=new Yo(!1),typeof Zone>"u")throw new Ie(908,!1);Zone.assertZonePatched();const f=this;if(f._nesting=0,f._outer=f._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const m=Zone.AsyncStackTaggingZoneSpec;f._inner=f._inner.fork(new m("Angular"))}Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!h&&u,f.shouldCoalesceRunChangeDetection=h,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function YI(){let o=Nt.requestAnimationFrame,a=Nt.cancelAnimationFrame;if(typeof Zone<"u"&&o&&a){const u=o[Zone.__symbol__("OriginalDelegate")];u&&(o=u);const h=a[Zone.__symbol__("OriginalDelegate")];h&&(a=h)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function KI(o){const a=()=>{!function UR(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(Nt,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,Cp(o),o.isCheckStableRunning=!0,ZI(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),Cp(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,h,f,m,v,C)=>{try{return uw(o),u.invokeTask(f,m,v,C)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||o.shouldCoalesceRunChangeDetection)&&a(),QI(o)}},onInvoke:(u,h,f,m,v,C,D)=>{try{return uw(o),u.invoke(f,m,v,C,D)}finally{o.shouldCoalesceRunChangeDetection&&a(),QI(o)}},onHasTask:(u,h,f,m)=>{u.hasTask(f,m),h===f&&("microTask"==m.change?(o._hasPendingMicrotasks=m.microTask,Cp(o),ZI(o)):"macroTask"==m.change&&(o.hasPendingMacrotasks=m.macroTask))},onHandleError:(u,h,f,m)=>(u.handleError(f,m),o.runOutsideAngular(()=>o.onError.emit(m)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ls.isInAngularZone())throw new Ie(909,!1)}static assertNotInAngularZone(){if(Ls.isInAngularZone())throw new Ie(909,!1)}run(a,u,h){return this._inner.run(a,u,h)}runTask(a,u,h,f){const m=this._inner,v=m.scheduleEventTask("NgZoneEvent: "+f,a,BR,nw,nw);try{return m.runTask(v,u,h)}finally{m.cancelTask(v)}}runGuarded(a,u,h){return this._inner.runGuarded(a,u,h)}runOutsideAngular(a){return this._outer.run(a)}}const BR={};function ZI(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function Cp(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function uw(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function QI(o){o._nesting--,ZI(o)}class HR{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Yo,this.onMicrotaskEmpty=new Yo,this.onStable=new Yo,this.onError=new Yo}run(a,u,h){return a.apply(u,h)}runGuarded(a,u,h){return a.apply(u,h)}runOutsideAngular(a){return a()}runTask(a,u,h,f){return a.apply(u,h)}}const Ih=new xn(""),jR=new xn("");let JI,gB=(()=>{class o{constructor(u,h,f){this._ngZone=u,this.registry=h,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,JI||(function _B(o){JI=o}(f),f.addToWindow(h)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ls.assertNotInAngularZone(),WI(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())WI(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(u)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,h,f){let m=-1;h&&h>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==m),u(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:u,timeoutId:m,updateCb:f})}whenStable(u,h,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,h,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,h,f){return[]}}return o.\u0275fac=function(u){return new(u||o)(Vn(Ls),Vn(XI),Vn(jR))},o.\u0275prov=tn({token:o,factory:o.\u0275fac}),o})(),XI=(()=>{class o{constructor(){this._applications=new Map}registerApplication(u,h){this._applications.set(u,h)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,h=!0){return JI?.findTestabilityInTree(this,u,h)??null}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=tn({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})(),tc=null;const eS=new xn("AllowMultipleToken"),dw=new xn("PlatformDestroyListeners");class tS{constructor(a,u){this.name=a,this.token=u}}function qR(o,a,u=[]){const h=`Platform: ${a}`,f=new xn(h);return(m=[])=>{let v=fw();if(!v||v.injector.get(eS,!1)){const C=[...u,...m,{provide:f,useValue:!0}];o?o(C):function Ju(o){if(tc&&!tc.get(eS,!1))throw new Ie(400,!1);tc=o;const a=o.get(Ko);(function hw(o){const a=o.get(NR,null);a&&a.forEach(u=>u())})(o)}(function rS(o=[],a){return Lc.create({name:a,providers:[{provide:gn,useValue:"platform"},{provide:dw,useValue:new Set([()=>tc=null])},...o]})}(C,h))}return function iS(o){const a=fw();if(!a)throw new Ie(401,!1);return a}()}}function fw(){return tc?.get(Ko)??null}let Ko=(()=>{class o{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,h){const f=function pw(o,a){let u;return u="noop"===o?new HR:("zone.js"===o?void 0:o)||new Ls(a),u}(h?.ngZone,function sS(o){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!o||!o.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!o||!o.ngZoneRunCoalescing)||!1}}(h)),m=[{provide:Ls,useValue:f}];return f.run(()=>{const v=Lc.create({providers:m,parent:this.injector,name:u.moduleType.name}),C=u.create(v),D=C.injector.get(Of,null);if(!D)throw new Ie(402,!1);return f.runOutsideAngular(()=>{const A=f.onError.subscribe({next:R=>{D.handleError(R)}});C.onDestroy(()=>{a_(this._modules,C),A.unsubscribe()})}),function mw(o,a,u){try{const h=u();return DD(h)?h.catch(f=>{throw a.runOutsideAngular(()=>o.handleError(f)),f}):h}catch(h){throw a.runOutsideAngular(()=>o.handleError(h)),h}}(D,f,()=>{const A=C.injector.get(iw);return A.runInitializers(),A.donePromise.then(()=>(function mb(o){qt(o,"Expected localeId to be defined"),"string"==typeof o&&(pb=o.toLowerCase().replace(/_/g,"-"))}(C.injector.get(sw,sp)||sp),this._moduleDoBootstrap(C),C))})})}bootstrapModule(u,h=[]){const f=gw({},h);return function $R(o,a,u){const h=new Ob(u);return Promise.resolve(h)}(0,0,u).then(m=>this.bootstrapModuleFactory(m,f))}_moduleDoBootstrap(u){const h=u.injector.get(o_);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(f=>h.bootstrap(f));else{if(!u.instance.ngDoBootstrap)throw new Ie(403,!1);u.instance.ngDoBootstrap(h)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ie(404,!1);this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h());const u=this._injector.get(dw,null);u&&(u.forEach(h=>h()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(u){return new(u||o)(Vn(Lc))},o.\u0275prov=tn({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();function gw(o,a){return Array.isArray(a)?a.reduce(gw,o):{...o,...a}}let o_=(()=>{class o{constructor(u,h,f){this._zone=u,this._injector=h,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new P.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),v=new P.y(C=>{let D;this._zone.runOutsideAngular(()=>{D=this._zone.onStable.subscribe(()=>{Ls.assertNotInAngularZone(),WI(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const A=this._zone.onUnstable.subscribe(()=>{Ls.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{D.unsubscribe(),A.unsubscribe()}});this.isStable=(0,ce.T)(m,v.pipe((0,de.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,h){const f=u instanceof oE;if(!this._injector.get(iw).done)throw!f&&Ye(u),new Ie(405,false);let v;v=f?u:this._injector.get(Mu).resolveComponentFactory(u),this.componentTypes.push(v.componentType);const C=function zR(o){return o.isBoundToModule}(v)?void 0:this._injector.get(bh),A=v.create(Lc.NULL,[],h||v.selector,C),R=A.location.nativeElement,B=A.injector.get(Ih,null);return B?.registerApplication(R),A.onDestroy(()=>{this.detachView(A.hostView),a_(this.components,A),B?.unregisterApplication(R)}),this._loadComponent(A),A}tick(){if(this._runningTick)throw new Ie(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const h=u;this._views.push(h),h.attachToAppRef(this)}detachView(u){const h=u;a_(this._views,h),h.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(rw,[]).concat(this._bootstrapListeners).forEach(f=>f(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>a_(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new Ie(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return o.\u0275fac=function(u){return new(u||o)(Vn(Ls),Vn(qr),Vn(Of))},o.\u0275prov=tn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function a_(o,a){const u=o.indexOf(a);u>-1&&o.splice(u,1)}let oS=!0,aS=!1;function lS(){return aS=!0,oS}function l_(){if(aS)throw new Error("Cannot enable prod mode after platform setup.");oS=!1}let WR=(()=>{class o{}return o.__NG_ELEMENT_ID__=YR,o})();function YR(o){return function ZR(o,a,u){if(la(o)&&!u){const h=cn(o.index,a);return new lh(h,h)}return 47&o.type?new lh(a[16],a):null}(li(),Oe(),16==(16&o))}class JR{constructor(){}supports(a){return Hu(a)}create(a){return new eO(a)}}const vw=(o,a)=>a;class eO{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||vw}forEachItem(a){let u;for(u=this._itHead;null!==u;u=u._next)a(u)}forEachOperation(a){let u=this._itHead,h=this._removalsHead,f=0,m=null;for(;u||h;){const v=!h||u&&u.currentIndex<yS(h,f,m)?u:h,C=yS(v,f,m),D=v.currentIndex;if(v===h)f--,h=h._nextRemoved;else if(u=u._next,null==v.previousIndex)f++;else{m||(m=[]);const A=C-f,R=D-f;if(A!=R){for(let Q=0;Q<A;Q++){const oe=Q<m.length?m[Q]:m[Q]=0,Te=oe+Q;R<=Te&&Te<A&&(m[Q]=oe+1)}m[v.previousIndex]=R-A}}C!==D&&a(v,C,D)}}forEachPreviousItem(a){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachMovedItem(a){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}forEachIdentityChange(a){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)a(u)}diff(a){if(null==a&&(a=[]),!Hu(a))throw new Ie(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,m,v,u=this._itHead,h=!1;if(Array.isArray(a)){this.length=a.length;for(let C=0;C<this.length;C++)m=a[C],v=this._trackByFn(C,m),null!==u&&Object.is(u.trackById,v)?(h&&(u=this._verifyReinsertion(u,m,v,C)),Object.is(u.item,m)||this._addIdentityChange(u,m)):(u=this._mismatch(u,m,v,C),h=!0),u=u._next}else f=0,function ax(o,a){if(Array.isArray(o))for(let u=0;u<o.length;u++)a(o[u]);else{const u=o[Uu()]();let h;for(;!(h=u.next()).done;)a(h.value)}}(a,C=>{v=this._trackByFn(f,C),null!==u&&Object.is(u.trackById,v)?(h&&(u=this._verifyReinsertion(u,C,v,f)),Object.is(u.item,C)||this._addIdentityChange(u,C)):(u=this._mismatch(u,C,v,f),h=!0),u=u._next,f++}),this.length=f;return this._truncate(u),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,u,h,f){let m;return null===a?m=this._itTail:(m=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._reinsertAfter(a,m,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(h,f))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._moveAfter(a,m,f)):a=this._addAfter(new f_(u,h),m,f),a}_verifyReinsertion(a,u,h,f){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==m?a=this._reinsertAfter(m,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const u=a._next;this._addToRemovals(this._unlink(a)),a=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,u,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,m=a._nextRemoved;return null===f?this._removalsHead=m:f._nextRemoved=m,null===m?this._removalsTail=f:m._prevRemoved=f,this._insertAfter(a,u,h),this._addToMoves(a,h),a}_moveAfter(a,u,h){return this._unlink(a),this._insertAfter(a,u,h),this._addToMoves(a,h),a}_addAfter(a,u,h){return this._insertAfter(a,u,h),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,u,h){const f=null===u?this._itHead:u._next;return a._next=f,a._prev=u,null===f?this._itTail=a:f._prev=a,null===u?this._itHead=a:u._next=a,null===this._linkedRecords&&(this._linkedRecords=new _S),this._linkedRecords.put(a),a.currentIndex=h,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const u=a._prev,h=a._next;return null===u?this._itHead=h:u._next=h,null===h?this._itTail=u:h._prev=u,a}_addToMoves(a,u){return a.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new _S),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,u){return a.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class f_{constructor(a,u){this.item=a,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class gS{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,u){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===u||u<=h.currentIndex)&&Object.is(h.trackById,a))return h;return null}remove(a){const u=a._prevDup,h=a._nextDup;return null===u?this._head=h:u._nextDup=h,null===h?this._tail=u:h._prevDup=u,null===this._head}}class _S{constructor(){this.map=new Map}put(a){const u=a.trackById;let h=this.map.get(u);h||(h=new gS,this.map.set(u,h)),h.add(a)}get(a,u){const f=this.map.get(a);return f?f.get(a,u):null}remove(a){const u=a.trackById;return this.map.get(u).remove(a)&&this.map.delete(u),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function yS(o,a,u){const h=o.previousIndex;if(null===h)return h;let f=0;return u&&h<u.length&&(f=u[h]),h+a+f}class Sh{constructor(){}supports(a){return a instanceof Map||uh(a)}create(){return new tO}}class tO{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let u;for(u=this._mapHead;null!==u;u=u._next)a(u)}forEachPreviousItem(a){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)a(u)}forEachChangedItem(a){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}diff(a){if(a){if(!(a instanceof Map||uh(a)))throw new Ie(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(a,(h,f)=>{if(u&&u.key===f)this._maybeAddToChanges(u,h),this._appendAfter=u,u=u._next;else{const m=this._getOrCreateRecordForKey(f,h);u=this._insertBeforeOrAppend(u,m)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let h=u;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,u){if(a){const h=a._prev;return u._next=a,u._prev=h,a._prev=u,h&&(h._next=u),a===this._mapHead&&(this._mapHead=u),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(a,u){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,u);const m=f._prev,v=f._next;return m&&(m._next=v),v&&(v._prev=m),f._next=null,f._prev=null,f}const h=new vS(a);return this._records.set(a,h),h.currentValue=u,this._addToAdditions(h),h}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,u){Object.is(u,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=u,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,u){a instanceof Map?a.forEach(u):Object.keys(a).forEach(h=>u(a[h],h))}}class vS{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function bS(){return new bw([new JR])}let bw=(()=>{class o{constructor(u){this.factories=u}static create(u,h){if(null!=h){const f=h.factories.slice();u=u.concat(f)}return new o(u)}static extend(u){return{provide:o,useFactory:h=>o.create(u,h||bS()),deps:[[o,new kt,new Ke]]}}find(u){const h=this.factories.find(f=>f.supports(u));if(null!=h)return h;throw new Ie(901,!1)}}return o.\u0275prov=tn({token:o,providedIn:"root",factory:bS}),o})();function ww(){return new Cw([new Sh])}let Cw=(()=>{class o{constructor(u){this.factories=u}static create(u,h){if(h){const f=h.factories.slice();u=u.concat(f)}return new o(u)}static extend(u){return{provide:o,useFactory:h=>o.create(u,h||ww()),deps:[[o,new kt,new Ke]]}}find(u){const h=this.factories.find(f=>f.supports(u));if(h)return h;throw new Ie(901,!1)}}return o.\u0275prov=tn({token:o,providedIn:"root",factory:ww}),o})();const EB=qR(null,"core",[]);let DB=(()=>{class o{constructor(u){}}return o.\u0275fac=function(u){return new(u||o)(Vn(o_))},o.\u0275mod=Ct({type:o}),o.\u0275inj=Ht({}),o})();function IB(o){return"boolean"==typeof o?o:null!=o&&"false"!==o}},3942:(ht,ke,L)=>{L.d(ke,{Z:()=>Ie});var l=L(2090),H=L(4859),P=L(9681),ce=L(1877);class de{constructor(Ee,_e){this._delegate=Ee,this.firebase=_e,(0,P._addComponent)(Ee,new H.wA("app-compat",()=>this,"PUBLIC")),this.container=Ee.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ee){this._delegate.automaticDataCollectionEnabled=Ee}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ee=>{this._delegate.checkDestroyed(),Ee()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(Ee,_e=P._DEFAULT_ENTRY_NAME){var it;this._delegate.checkDestroyed();const rt=this._delegate.container.getProvider(Ee);return!rt.isInitialized()&&"EXPLICIT"===(null===(it=rt.getComponent())||void 0===it?void 0:it.instantiationMode)&&rt.initialize(),rt.getImmediate({identifier:_e})}_removeServiceInstance(Ee,_e=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ee).clearInstance(_e)}_addComponent(Ee){(0,P._addComponent)(this._delegate,Ee)}_addOrOverwriteComponent(Ee){(0,P._addOrOverwriteComponent)(this._delegate,Ee)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ae=new l.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),W=function we(){const lt=function me(lt){const Ee={},_e={__esModule:!0,initializeApp:function Fe(le,he={}){const be=P.initializeApp(le,he);if((0,l.r3)(Ee,be.name))return Ee[be.name];const J=new lt(be,_e);return Ee[be.name]=J,J},app:rt,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function Se(le){const he=le.name,be=he.replace("-compat","");if(P._registerComponent(le)&&"PUBLIC"===le.type){const J=(ne=rt())=>{if("function"!=typeof ne[be])throw ae.create("invalid-app-argument",{appName:he});return ne[be]()};void 0!==le.serviceProps&&(0,l.ZB)(J,le.serviceProps),_e[be]=J,lt.prototype[be]=function(...ne){return this._getService.bind(this,he).apply(this,le.multipleInstances?ne:[])}}return"PUBLIC"===le.type?_e[be]:null},removeApp:function it(le){delete Ee[le]},useAsService:function We(le,he){return"serverAuth"===he?null:he},modularAPIs:P}};function rt(le){if(!(0,l.r3)(Ee,le=le||P._DEFAULT_ENTRY_NAME))throw ae.create("no-app",{appName:le});return Ee[le]}return _e.default=_e,Object.defineProperty(_e,"apps",{get:function Re(){return Object.keys(Ee).map(le=>Ee[le])}}),rt.App=lt,_e}(de);return lt.INTERNAL=Object.assign(Object.assign({},lt.INTERNAL),{createFirebaseNamespace:we,extendNamespace:function Ee(_e){(0,l.ZB)(lt,_e)},createSubscribe:l.ne,ErrorFactory:l.LL,deepExtend:l.ZB}),lt}(),Y=new ce.Yd("@firebase/app-compat");if((0,l.jU)()&&void 0!==self.firebase){Y.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const lt=self.firebase.SDK_VERSION;lt&&lt.indexOf("LITE")>=0&&Y.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ie=W;!function Ne(lt){(0,P.registerVersion)("@firebase/app-compat","0.1.33",lt)}()},9681:(ht,ke,L)=>{L.r(ke),L.d(ke,{FirebaseError:()=>ce.ZR,SDK_VERSION:()=>is,_DEFAULT_ENTRY_NAME:()=>qt,_addComponent:()=>an,_addOrOverwriteComponent:()=>tn,_apps:()=>En,_clearComponents:()=>wo,_components:()=>jn,_getProvider:()=>Ht,_registerComponent:()=>Wt,_removeServiceInstance:()=>xi,deleteApp:()=>rs,getApp:()=>$n,getApps:()=>Ur,initializeApp:()=>dr,onLog:()=>Gn,registerVersion:()=>Di,setLogLevel:()=>yn});var l=L(5861),H=L(4859),P=L(1877),ce=L(2090),de=L(8766);class ye{constructor(Z){this.container=Z}getPlatformInfoString(){return this.container.getProviders().map(K=>{if(function ae(j){return"VERSION"===j.getComponent()?.type}(K)){const Ae=K.getImmediate();return`${Ae.library}/${Ae.version}`}return null}).filter(K=>K).join(" ")}}const me="@firebase/app",W=new P.Yd("@firebase/app"),qt="[DEFAULT]",Ze={[me]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},En=new Map,jn=new Map;function an(j,Z){try{j.container.addComponent(Z)}catch(K){W.debug(`Component ${Z.name} failed to register with FirebaseApp ${j.name}`,K)}}function tn(j,Z){j.container.addOrOverwriteComponent(Z)}function Wt(j){const Z=j.name;if(jn.has(Z))return W.debug(`There were multiple attempts to register component ${Z}.`),!1;jn.set(Z,j);for(const K of En.values())an(K,j);return!0}function Ht(j,Z){const K=j.container.getProvider("heartbeat").getImmediate({optional:!0});return K&&K.triggerHeartbeat(),j.container.getProvider(Z)}function xi(j,Z,K=qt){Ht(j,Z).clearInstance(K)}function wo(){jn.clear()}const Pn=new ce.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class vs{constructor(Z,K,Ae){this._isDeleted=!1,this._options=Object.assign({},Z),this._config=Object.assign({},K),this._name=K.name,this._automaticDataCollectionEnabled=K.automaticDataCollectionEnabled,this._container=Ae,this.container.addComponent(new H.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Z){this.checkDestroyed(),this._automaticDataCollectionEnabled=Z}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Z){this._isDeleted=Z}checkDestroyed(){if(this.isDeleted)throw Pn.create("app-deleted",{appName:this._name})}}const is="9.9.4";function dr(j,Z={}){"object"!=typeof Z&&(Z={name:Z});const K=Object.assign({name:qt,automaticDataCollectionEnabled:!1},Z),Ae=K.name;if("string"!=typeof Ae||!Ae)throw Pn.create("bad-app-name",{appName:String(Ae)});const qe=En.get(Ae);if(qe){if((0,ce.vZ)(j,qe.options)&&(0,ce.vZ)(K,qe.config))return qe;throw Pn.create("duplicate-app",{appName:Ae})}const Ct=new H.H0(Ae);for(const fn of jn.values())Ct.addComponent(fn);const pn=new vs(j,K,Ct);return En.set(Ae,pn),pn}function $n(j=qt){const Z=En.get(j);if(!Z)throw Pn.create("no-app",{appName:j});return Z}function Ur(){return Array.from(En.values())}function rs(j){return st.apply(this,arguments)}function st(){return(st=(0,l.Z)(function*(j){const Z=j.name;En.has(Z)&&(En.delete(Z),yield Promise.all(j.container.getProviders().map(K=>K.delete())),j.isDeleted=!0)})).apply(this,arguments)}function Di(j,Z,K){var Ae;let qe=null!==(Ae=Ze[j])&&void 0!==Ae?Ae:j;K&&(qe+=`-${K}`);const Ct=qe.match(/\s|\//),pn=Z.match(/\s|\//);if(Ct||pn){const fn=[`Unable to register library "${qe}" with version "${Z}":`];return Ct&&fn.push(`library name "${qe}" contains illegal characters (whitespace or "/")`),Ct&&pn&&fn.push("and"),pn&&fn.push(`version name "${Z}" contains illegal characters (whitespace or "/")`),void W.warn(fn.join(" "))}Wt(new H.wA(`${qe}-version`,()=>({library:qe,version:Z}),"VERSION"))}function Gn(j,Z){if(null!==j&&"function"!=typeof j)throw Pn.create("invalid-log-argument");(0,P.Am)(j,Z)}function yn(j){(0,P.Ub)(j)}const Mn="firebase-heartbeat-store";let kn=null;function Dn(){return kn||(kn=(0,de.X3)("firebase-heartbeat-database",1,{upgrade:(j,Z)=>{0===Z&&j.createObjectStore(Mn)}}).catch(j=>{throw Pn.create("idb-open",{originalErrorMessage:j.message})})),kn}function mt(){return(mt=(0,l.Z)(function*(j){var Z;try{return(yield Dn()).transaction(Mn).objectStore(Mn).get(Si(j))}catch(K){if(K instanceof ce.ZR)W.warn(K.message);else{const Ae=Pn.create("idb-get",{originalErrorMessage:null===(Z=K)||void 0===Z?void 0:Z.message});W.warn(Ae.message)}}})).apply(this,arguments)}function Nt(j,Z){return nr.apply(this,arguments)}function nr(){return(nr=(0,l.Z)(function*(j,Z){var K;try{const qe=(yield Dn()).transaction(Mn,"readwrite");return yield qe.objectStore(Mn).put(Z,Si(j)),qe.done}catch(Ae){if(Ae instanceof ce.ZR)W.warn(Ae.message);else{const qe=Pn.create("idb-set",{originalErrorMessage:null===(K=Ae)||void 0===K?void 0:K.message});W.warn(qe.message)}}})).apply(this,arguments)}function Si(j){return`${j.name}!${j.options.appId}`}class qi{constructor(Z){this.container=Z,this._heartbeatsCache=null;const K=this.container.getProvider("app").getImmediate();this._storage=new Zt(K),this._heartbeatsCachePromise=this._storage.read().then(Ae=>(this._heartbeatsCache=Ae,Ae))}triggerHeartbeat(){var Z=this;return(0,l.Z)(function*(){const Ae=Z.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),qe=Lt();if(null===Z._heartbeatsCache&&(Z._heartbeatsCache=yield Z._heartbeatsCachePromise),Z._heartbeatsCache.lastSentHeartbeatDate!==qe&&!Z._heartbeatsCache.heartbeats.some(Ct=>Ct.date===qe))return Z._heartbeatsCache.heartbeats.push({date:qe,agent:Ae}),Z._heartbeatsCache.heartbeats=Z._heartbeatsCache.heartbeats.filter(Ct=>{const pn=new Date(Ct.date).valueOf();return Date.now()-pn<=2592e6}),Z._storage.overwrite(Z._heartbeatsCache)})()}getHeartbeatsHeader(){var Z=this;return(0,l.Z)(function*(){if(null===Z._heartbeatsCache&&(yield Z._heartbeatsCachePromise),null===Z._heartbeatsCache||0===Z._heartbeatsCache.heartbeats.length)return"";const K=Lt(),{heartbeatsToSend:Ae,unsentEntries:qe}=function hr(j,Z=1024){const K=[];let Ae=j.slice();for(const qe of j){const Ct=K.find(pn=>pn.agent===qe.agent);if(Ct){if(Ct.dates.push(qe.date),X(K)>Z){Ct.dates.pop();break}}else if(K.push({agent:qe.agent,dates:[qe.date]}),X(K)>Z){K.pop();break}Ae=Ae.slice(1)}return{heartbeatsToSend:K,unsentEntries:Ae}}(Z._heartbeatsCache.heartbeats),Ct=(0,ce.L)(JSON.stringify({version:2,heartbeats:Ae}));return Z._heartbeatsCache.lastSentHeartbeatDate=K,qe.length>0?(Z._heartbeatsCache.heartbeats=qe,yield Z._storage.overwrite(Z._heartbeatsCache)):(Z._heartbeatsCache.heartbeats=[],Z._storage.overwrite(Z._heartbeatsCache)),Ct})()}}function Lt(){return(new Date).toISOString().substring(0,10)}class Zt{constructor(Z){this.app=Z,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,l.Z)(function*(){return!!(0,ce.hl)()&&(0,ce.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Z=this;return(0,l.Z)(function*(){return(yield Z._canUseIndexedDBPromise)&&(yield function pt(j){return mt.apply(this,arguments)}(Z.app))||{heartbeats:[]}})()}overwrite(Z){var K=this;return(0,l.Z)(function*(){var Ae;if(yield K._canUseIndexedDBPromise){const Ct=yield K.read();return Nt(K.app,{lastSentHeartbeatDate:null!==(Ae=Z.lastSentHeartbeatDate)&&void 0!==Ae?Ae:Ct.lastSentHeartbeatDate,heartbeats:Z.heartbeats})}})()}add(Z){var K=this;return(0,l.Z)(function*(){var Ae;if(yield K._canUseIndexedDBPromise){const Ct=yield K.read();return Nt(K.app,{lastSentHeartbeatDate:null!==(Ae=Z.lastSentHeartbeatDate)&&void 0!==Ae?Ae:Ct.lastSentHeartbeatDate,heartbeats:[...Ct.heartbeats,...Z.heartbeats]})}})()}}function X(j){return(0,ce.L)(JSON.stringify({version:2,heartbeats:j})).length}!function G(j){Wt(new H.wA("platform-logger",Z=>new ye(Z),"PRIVATE")),Wt(new H.wA("heartbeat",Z=>new qi(Z),"PRIVATE")),Di(me,"0.7.32",j),Di(me,"0.7.32","esm2017"),Di("fire-js","")}("")},4859:(ht,ke,L)=>{L.d(ke,{H0:()=>me,wA:()=>P,zt:()=>de});var l=L(5861),H=L(2090);class P{constructor(W,Y,ee){this.name=W,this.instanceFactory=Y,this.type=ee,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(W){return this.instantiationMode=W,this}setMultipleInstances(W){return this.multipleInstances=W,this}setServiceProps(W){return this.serviceProps=W,this}setInstanceCreatedCallback(W){return this.onInstanceCreated=W,this}}const ce="[DEFAULT]";class de{constructor(W,Y){this.name=W,this.container=Y,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(W){const Y=this.normalizeInstanceIdentifier(W);if(!this.instancesDeferred.has(Y)){const ee=new H.BH;if(this.instancesDeferred.set(Y,ee),this.isInitialized(Y)||this.shouldAutoInitialize())try{const Ge=this.getOrInitializeService({instanceIdentifier:Y});Ge&&ee.resolve(Ge)}catch{}}return this.instancesDeferred.get(Y).promise}getImmediate(W){var Y;const ee=this.normalizeInstanceIdentifier(W?.identifier),Ge=null!==(Y=W?.optional)&&void 0!==Y&&Y;if(!this.isInitialized(ee)&&!this.shouldAutoInitialize()){if(Ge)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ee})}catch(Ne){if(Ge)return null;throw Ne}}getComponent(){return this.component}setComponent(W){if(W.name!==this.name)throw Error(`Mismatching Component ${W.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=W,this.shouldAutoInitialize()){if(function ae(we){return"EAGER"===we.instantiationMode}(W))try{this.getOrInitializeService({instanceIdentifier:ce})}catch{}for(const[Y,ee]of this.instancesDeferred.entries()){const Ge=this.normalizeInstanceIdentifier(Y);try{const Ne=this.getOrInitializeService({instanceIdentifier:Ge});ee.resolve(Ne)}catch{}}}}clearInstance(W=ce){this.instancesDeferred.delete(W),this.instancesOptions.delete(W),this.instances.delete(W)}delete(){var W=this;return(0,l.Z)(function*(){const Y=Array.from(W.instances.values());yield Promise.all([...Y.filter(ee=>"INTERNAL"in ee).map(ee=>ee.INTERNAL.delete()),...Y.filter(ee=>"_delete"in ee).map(ee=>ee._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(W=ce){return this.instances.has(W)}getOptions(W=ce){return this.instancesOptions.get(W)||{}}initialize(W={}){const{options:Y={}}=W,ee=this.normalizeInstanceIdentifier(W.instanceIdentifier);if(this.isInitialized(ee))throw Error(`${this.name}(${ee}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ge=this.getOrInitializeService({instanceIdentifier:ee,options:Y});for(const[Ne,Ie]of this.instancesDeferred.entries())ee===this.normalizeInstanceIdentifier(Ne)&&Ie.resolve(Ge);return Ge}onInit(W,Y){var ee;const Ge=this.normalizeInstanceIdentifier(Y),Ne=null!==(ee=this.onInitCallbacks.get(Ge))&&void 0!==ee?ee:new Set;Ne.add(W),this.onInitCallbacks.set(Ge,Ne);const Ie=this.instances.get(Ge);return Ie&&W(Ie,Ge),()=>{Ne.delete(W)}}invokeOnInitCallbacks(W,Y){const ee=this.onInitCallbacks.get(Y);if(ee)for(const Ge of ee)try{Ge(W,Y)}catch{}}getOrInitializeService({instanceIdentifier:W,options:Y={}}){let ee=this.instances.get(W);if(!ee&&this.component&&(ee=this.component.instanceFactory(this.container,{instanceIdentifier:(we=W,we===ce?void 0:we),options:Y}),this.instances.set(W,ee),this.instancesOptions.set(W,Y),this.invokeOnInitCallbacks(ee,W),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,W,ee)}catch{}var we;return ee||null}normalizeInstanceIdentifier(W=ce){return this.component?this.component.multipleInstances?W:ce:W}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class me{constructor(W){this.name=W,this.providers=new Map}addComponent(W){const Y=this.getProvider(W.name);if(Y.isComponentSet())throw new Error(`Component ${W.name} has already been registered with ${this.name}`);Y.setComponent(W)}addOrOverwriteComponent(W){this.getProvider(W.name).isComponentSet()&&this.providers.delete(W.name),this.addComponent(W)}getProvider(W){if(this.providers.has(W))return this.providers.get(W);const Y=new de(W,this);return this.providers.set(W,Y),Y}getProviders(){return Array.from(this.providers.values())}}},1877:(ht,ke,L)=>{L.d(ke,{Am:()=>we,Ub:()=>me,Yd:()=>ae,in:()=>H});const l=[];var H=(()=>{return(W=H||(H={}))[W.DEBUG=0]="DEBUG",W[W.VERBOSE=1]="VERBOSE",W[W.INFO=2]="INFO",W[W.WARN=3]="WARN",W[W.ERROR=4]="ERROR",W[W.SILENT=5]="SILENT",H;var W})();const P={debug:H.DEBUG,verbose:H.VERBOSE,info:H.INFO,warn:H.WARN,error:H.ERROR,silent:H.SILENT},ce=H.INFO,de={[H.DEBUG]:"log",[H.VERBOSE]:"log",[H.INFO]:"info",[H.WARN]:"warn",[H.ERROR]:"error"},ye=(W,Y,...ee)=>{if(Y<W.logLevel)return;const Ge=(new Date).toISOString(),Ne=de[Y];if(!Ne)throw new Error(`Attempted to log a message with an invalid logType (value: ${Y})`);console[Ne](`[${Ge}]  ${W.name}:`,...ee)};class ae{constructor(Y){this.name=Y,this._logLevel=ce,this._logHandler=ye,this._userLogHandler=null,l.push(this)}get logLevel(){return this._logLevel}set logLevel(Y){if(!(Y in H))throw new TypeError(`Invalid value "${Y}" assigned to \`logLevel\``);this._logLevel=Y}setLogLevel(Y){this._logLevel="string"==typeof Y?P[Y]:Y}get logHandler(){return this._logHandler}set logHandler(Y){if("function"!=typeof Y)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Y}get userLogHandler(){return this._userLogHandler}set userLogHandler(Y){this._userLogHandler=Y}debug(...Y){this._userLogHandler&&this._userLogHandler(this,H.DEBUG,...Y),this._logHandler(this,H.DEBUG,...Y)}log(...Y){this._userLogHandler&&this._userLogHandler(this,H.VERBOSE,...Y),this._logHandler(this,H.VERBOSE,...Y)}info(...Y){this._userLogHandler&&this._userLogHandler(this,H.INFO,...Y),this._logHandler(this,H.INFO,...Y)}warn(...Y){this._userLogHandler&&this._userLogHandler(this,H.WARN,...Y),this._logHandler(this,H.WARN,...Y)}error(...Y){this._userLogHandler&&this._userLogHandler(this,H.ERROR,...Y),this._logHandler(this,H.ERROR,...Y)}}function me(W){l.forEach(Y=>{Y.setLogLevel(W)})}function we(W,Y){for(const ee of l){let Ge=null;Y&&Y.level&&(Ge=P[Y.level]),ee.userLogHandler=null===W?null:(Ne,Ie,...lt)=>{const Ee=lt.map(_e=>{if(null==_e)return null;if("string"==typeof _e)return _e;if("number"==typeof _e||"boolean"==typeof _e)return _e.toString();if(_e instanceof Error)return _e.message;try{return JSON.stringify(_e)}catch{return null}}).filter(_e=>_e).join(" ");Ie>=(Ge??Ne.logLevel)&&W({level:H[Ie].toLowerCase(),message:Ee,args:lt,type:Ne.name})}}}},8766:(ht,ke,L)=>{L.d(ke,{Lj:()=>Fe,X3:()=>rt});var l=L(5861);let P,ce;const ae=new WeakMap,me=new WeakMap,we=new WeakMap,W=new WeakMap,Y=new WeakMap;let Ne={get(he,be,J){if(he instanceof IDBTransaction){if("done"===be)return me.get(he);if("objectStoreNames"===be)return he.objectStoreNames||we.get(he);if("store"===be)return J.objectStoreNames[1]?void 0:J.objectStore(J.objectStoreNames[0])}return _e(he[be])},set:(he,be,J)=>(he[be]=J,!0),has:(he,be)=>he instanceof IDBTransaction&&("done"===be||"store"===be)||be in he};function Ee(he){return"function"==typeof he?function lt(he){return he!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ye(){return ce||(ce=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(he)?function(...be){return he.apply(it(this),be),_e(ae.get(this))}:function(...be){return _e(he.apply(it(this),be))}:function(be,...J){const ne=he.call(it(this),be,...J);return we.set(ne,be.sort?be.sort():[be]),_e(ne)}}(he):(he instanceof IDBTransaction&&function Ge(he){if(me.has(he))return;const be=new Promise((J,ne)=>{const ge=()=>{he.removeEventListener("complete",ue),he.removeEventListener("error",Ue),he.removeEventListener("abort",Ue)},ue=()=>{J(),ge()},Ue=()=>{ne(he.error||new DOMException("AbortError","AbortError")),ge()};he.addEventListener("complete",ue),he.addEventListener("error",Ue),he.addEventListener("abort",Ue)});me.set(he,be)}(he),((he,be)=>be.some(J=>he instanceof J))(he,function de(){return P||(P=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(he,Ne):he)}function _e(he){if(he instanceof IDBRequest)return function ee(he){const be=new Promise((J,ne)=>{const ge=()=>{he.removeEventListener("success",ue),he.removeEventListener("error",Ue)},ue=()=>{J(_e(he.result)),ge()},Ue=()=>{ne(he.error),ge()};he.addEventListener("success",ue),he.addEventListener("error",Ue)});return be.then(J=>{J instanceof IDBCursor&&ae.set(J,he)}).catch(()=>{}),Y.set(be,he),be}(he);if(W.has(he))return W.get(he);const be=Ee(he);return be!==he&&(W.set(he,be),Y.set(be,he)),be}const it=he=>Y.get(he);function rt(he,be,{blocked:J,upgrade:ne,blocking:ge,terminated:ue}={}){const Ue=indexedDB.open(he,be),He=_e(Ue);return ne&&Ue.addEventListener("upgradeneeded",yt=>{ne(_e(Ue.result),yt.oldVersion,yt.newVersion,_e(Ue.transaction))}),J&&Ue.addEventListener("blocked",()=>J()),He.then(yt=>{ue&&yt.addEventListener("close",()=>ue()),ge&&yt.addEventListener("versionchange",()=>ge())}).catch(()=>{}),He}function Fe(he,{blocked:be}={}){const J=indexedDB.deleteDatabase(he);return be&&J.addEventListener("blocked",()=>be()),_e(J).then(()=>{})}const Re=["get","getKey","getAll","getAllKeys","count"],Se=["put","add","delete","clear"],We=new Map;function le(he,be){if(!(he instanceof IDBDatabase)||be in he||"string"!=typeof be)return;if(We.get(be))return We.get(be);const J=be.replace(/FromIndex$/,""),ne=be!==J,ge=Se.includes(J);if(!(J in(ne?IDBIndex:IDBObjectStore).prototype)||!ge&&!Re.includes(J))return;const ue=function(){var Ue=(0,l.Z)(function*(He,...yt){const en=this.transaction(He,ge?"readwrite":"readonly");let qt=en.store;return ne&&(qt=qt.index(yt.shift())),(yield Promise.all([qt[J](...yt),ge&&en.done]))[0]});return function(yt){return Ue.apply(this,arguments)}}();return We.set(be,ue),ue}!function Ie(he){Ne=he(Ne)}(he=>({...he,get:(be,J,ne)=>le(be,J)||he.get(be,J,ne),has:(be,J)=>!!le(be,J)||he.has(be,J)}))},5861:(ht,ke,L)=>{function l(P,ce,de,ye,ae,me,we){try{var W=P[me](we),Y=W.value}catch(ee){return void de(ee)}W.done?ce(Y):Promise.resolve(Y).then(ye,ae)}function H(P){return function(){var ce=this,de=arguments;return new Promise(function(ye,ae){var me=P.apply(ce,de);function we(Y){l(me,ye,ae,we,W,"next",Y)}function W(Y){l(me,ye,ae,we,W,"throw",Y)}we(void 0)})}}L.d(ke,{Z:()=>H})}},ht=>{ht(ht.s=8668)}]);