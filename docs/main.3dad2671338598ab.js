"use strict";(self.webpackChunkcurriculo_facil=self.webpackChunkcurriculo_facil||[]).push([[179],{2011:(ut,Ae,L)=>{L.d(Ae,{Dh:()=>ge,GT:()=>ve,cc:()=>Ne,hO:()=>$e,on:()=>K,pX:()=>he,xv:()=>Ee});var u=L(4650),j=L(127),N=L(5813);ut=L.hmd(ut);const ce=["ngOnDestroy"],he=(ye,nt,rt,Fe={})=>new Proxy(ye,{get:(Re,Se)=>rt.runOutsideAngular(()=>{var qe;if(ye[Se])return!(null===(qe=Fe?.spy)||void 0===qe)&&qe.get&&Fe.spy.get(Se,ye[Se]),ye[Se];if(ce.indexOf(Se)>-1)return()=>{};const ae=nt.toPromise().then(fe=>{const we=fe&&fe[Se];return"function"==typeof we?we.bind(fe):we&&we.then?we.then(ee=>rt.run(()=>ee)):rt.run(()=>we)});return new Proxy(()=>{},{get:(fe,we)=>ae[we],apply:(fe,we,ee)=>ae.then(re=>{var _e;const de=re&&re(...ee);return!(null===(_e=Fe?.spy)||void 0===_e)&&_e.apply&&Fe.spy.apply(Se,ee,de),de})})})}),ve=(ye,nt)=>{nt.forEach(rt=>{Object.getOwnPropertyNames(rt.prototype||rt).forEach(Fe=>{Object.defineProperty(ye.prototype,Fe,Object.getOwnPropertyDescriptor(rt.prototype||rt,Fe))})})};class ue{constructor(nt){return nt}}const ge=new u.OlP("angularfire2.app.options"),Ee=new u.OlP("angularfire2.app.name");function K(ye,nt,rt){const Re="object"==typeof rt&&rt||{};Re.name=Re.name||"string"==typeof rt&&rt||"[DEFAULT]";const qe=j.Z.apps.filter(ae=>ae&&ae.name===Re.name)[0]||nt.runOutsideAngular(()=>j.Z.initializeApp(ye,Re));try{JSON.stringify(ye)!==JSON.stringify(qe.options)&&Z("error",`${qe.name} Firebase App already initialized with different options${ut.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ue(qe)}const Z=(ye,...nt)=>{(0,u.X6Q)()&&typeof console<"u"&&console[ye](...nt)},te={provide:ue,useFactory:K,deps:[ge,u.R0b,[new u.FiY,Ee]]};let $e=(()=>{class ye{constructor(rt){j.Z.registerVersion("angularfire",N.q4.full,"core"),j.Z.registerVersion("angularfire",N.q4.full,"app-compat"),j.Z.registerVersion("angular",u.q4F.full,rt.toString())}static initializeApp(rt,Fe){return{ngModule:ye,providers:[{provide:ge,useValue:rt},{provide:Ee,useValue:Fe}]}}}return ye.\u0275fac=function(rt){return new(rt||ye)(u.LFG(u.Lbi))},ye.\u0275mod=u.oAB({type:ye}),ye.\u0275inj=u.cJS({providers:[te]}),ye})();function Ne(ye,nt,rt,Fe,Re){const[,Se,qe]=globalThis.\u0275AngularfireInstanceCache.find(ae=>ae[0]===ye)||[];if(Se)return function De(ye,nt){try{return ye.toString()===nt.toString()}catch{return ye===nt}}(Re,qe)||(Ie("error",`${nt} was already initialized on the ${rt} Firebase App with different settings.${at?" You may need to reload as Firebase is not HMR aware.":""}`),Ie("warn",{is:Re,was:qe})),Se;{const ae=Fe();return globalThis.\u0275AngularfireInstanceCache.push([ye,ae,Re]),ae}}const at=!!ut.hot,Ie=(ye,...nt)=>{(0,u.X6Q)()&&typeof console<"u"&&console[ye](...nt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ut,Ae,L)=>{L.d(Ae,{q4:()=>ii,iC:()=>Do,fc:()=>au,HU:()=>ba,vb:()=>sc,JM:()=>ic});var u=L(4650),j=L(5867),N=L(5861),ce=L(9681),he=L(2090),ve=L(4859),ue=L(1877),ge=L(8766);const Ee="@firebase/installations",K="0.5.12",te=`w:${K}`,$e="FIS_v2",nt=new he.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function rt(S){return S instanceof he.ZR&&S.code.includes("request-failed")}function Fe({projectId:S}){return`https://firebaseinstallations.googleapis.com/v1/projects/${S}/installations`}function Re(S){return{token:S.token,requestStatus:2,expiresIn:re(S.expiresIn),creationTime:Date.now()}}function Se(S,T){return qe.apply(this,arguments)}function qe(){return(qe=(0,N.Z)(function*(S,T){const U=(yield T.json()).error;return nt.create("request-failed",{requestName:S,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function ae({apiKey:S}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":S})}function fe(S,{refreshToken:T}){const R=ae(S);return R.append("Authorization",function _e(S){return`${$e} ${S}`}(T)),R}function we(S){return ee.apply(this,arguments)}function ee(){return(ee=(0,N.Z)(function*(S){const T=yield S();return T.status>=500&&T.status<600?S():T})).apply(this,arguments)}function re(S){return Number(S.replace("s","000"))}function de(S,T){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,N.Z)(function*({appConfig:S,heartbeatServiceProvider:T},{fid:R}){const U=Fe(S),ne=ae(S),pe=T.getImmediate({optional:!0});if(pe){const At=yield pe.getHeartbeatsHeader();At&&ne.append("x-firebase-client",At)}const Ye={method:"POST",headers:ne,body:JSON.stringify({fid:R,authVersion:$e,appId:S.appId,sdkVersion:te})},bt=yield we(()=>fetch(U,Ye));if(bt.ok){const At=yield bt.json();return{fid:At.fid||R,registrationStatus:2,refreshToken:At.refreshToken,authToken:Re(At.authToken)}}throw yield Se("Create Installation",bt)})).apply(this,arguments)}function He(S){return new Promise(T=>{setTimeout(T,S)})}const Jt=/^[cdef][\w-]{21}$/;function Ze(){try{const S=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(S),S[0]=112+S[0]%16;const R=function bn(S){return function _t(S){return btoa(String.fromCharCode(...S)).replace(/\+/g,"-").replace(/\//g,"_")}(S).substr(0,22)}(S);return Jt.test(R)?R:""}catch{return""}}function Vn(S){return`${S.appName}!${S.appId}`}const on=new Map;function en(S,T){const R=Vn(S);Cr(R,T),function so(S,T){const R=function Rn(){return!Ir&&"BroadcastChannel"in self&&(Ir=new BroadcastChannel("[Firebase] FID Change"),Ir.onmessage=S=>{Cr(S.data.key,S.data.fid)}),Ir}();R&&R.postMessage({key:S,fid:T}),function us(){0===on.size&&Ir&&(Ir.close(),Ir=null)}()}(R,T)}function Cr(S,T){const R=on.get(S);if(R)for(const U of R)U(T)}let Ir=null;const Bn="firebase-installations-store";let Ri=null;function Ki(){return Ri||(Ri=(0,ge.X3)("firebase-installations-database",1,{upgrade:(S,T)=>{0===T&&S.createObjectStore(Bn)}})),Ri}function it(S,T){return gr.apply(this,arguments)}function gr(){return(gr=(0,N.Z)(function*(S,T){const R=Vn(S),ne=(yield Ki()).transaction(Bn,"readwrite"),pe=ne.objectStore(Bn),Pe=yield pe.get(R);return yield pe.put(T,R),yield ne.done,(!Pe||Pe.fid!==T.fid)&&en(S,T.fid),T})).apply(this,arguments)}function Un(S){return gn.apply(this,arguments)}function gn(){return(gn=(0,N.Z)(function*(S){const T=Vn(S),U=(yield Ki()).transaction(Bn,"readwrite");yield U.objectStore(Bn).delete(T),yield U.done})).apply(this,arguments)}function _r(S,T){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,N.Z)(function*(S,T){const R=Vn(S),ne=(yield Ki()).transaction(Bn,"readwrite"),pe=ne.objectStore(Bn),Pe=yield pe.get(R),Ye=T(Pe);return void 0===Ye?yield pe.delete(R):yield pe.put(Ye,R),yield ne.done,Ye&&(!Pe||Pe.fid!==Ye.fid)&&en(S,Ye.fid),Ye})).apply(this,arguments)}function Dn(S){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,N.Z)(function*(S){let T;const R=yield _r(S.appConfig,U=>{const ne=wn(U),pe=ht(S,ne);return T=pe.registrationPromise,pe.installationEntry});return""===R.fid?{installationEntry:yield T}:{installationEntry:R,registrationPromise:T}})).apply(this,arguments)}function wn(S){return Tt(S||{fid:Ze(),registrationStatus:0})}function ht(S,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(nt.create("app-offline"))};const R={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},U=function ft(S,T){return kt.apply(this,arguments)}(S,R);return{installationEntry:R,registrationPromise:U}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:qr(S)}:{installationEntry:T}}function kt(){return(kt=(0,N.Z)(function*(S,T){try{const R=yield de(S,T);return it(S.appConfig,R)}catch(R){throw rt(R)&&409===R.customData.serverCode?yield Un(S.appConfig):yield it(S.appConfig,{fid:T.fid,registrationStatus:0}),R}})).apply(this,arguments)}function qr(S){return yr.apply(this,arguments)}function yr(){return(yr=(0,N.Z)(function*(S){let T=yield Dr(S.appConfig);for(;1===T.registrationStatus;)yield He(100),T=yield Dr(S.appConfig);if(0===T.registrationStatus){const{installationEntry:R,registrationPromise:U}=yield Dn(S);return U||R}return T})).apply(this,arguments)}function Dr(S){return _r(S,T=>{if(!T)throw nt.create("installation-not-found");return Tt(T)})}function Tt(S){return function Br(S){return 1===S.registrationStatus&&S.registrationTime+1e4<Date.now()}(S)?{fid:S.fid,registrationStatus:0}:S}function Pt(S,T){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,N.Z)(function*({appConfig:S,heartbeatServiceProvider:T},R){const U=Kt(S,R),ne=fe(S,R),pe=T.getImmediate({optional:!0});if(pe){const At=yield pe.getHeartbeatsHeader();At&&ne.append("x-firebase-client",At)}const Ye={method:"POST",headers:ne,body:JSON.stringify({installation:{sdkVersion:te,appId:S.appId}})},bt=yield we(()=>fetch(U,Ye));if(bt.ok)return Re(yield bt.json());throw yield Se("Generate Auth Token",bt)})).apply(this,arguments)}function Kt(S,{fid:T}){return`${Fe(S)}/${T}/authTokens:generate`}function J(S){return z.apply(this,arguments)}function z(){return(z=(0,N.Z)(function*(S,T=!1){let R;const U=yield _r(S.appConfig,pe=>{if(!wt(pe))throw nt.create("not-registered");const Pe=pe.authToken;if(!T&&hn(Pe))return pe;if(1===Pe.requestStatus)return R=$(S,T),pe;{if(!navigator.onLine)throw nt.create("app-offline");const Ye=Jn(pe);return R=Te(S,Ye),Ye}});return R?yield R:U.authToken})).apply(this,arguments)}function $(S,T){return Y.apply(this,arguments)}function Y(){return(Y=(0,N.Z)(function*(S,T){let R=yield Q(S.appConfig);for(;1===R.authToken.requestStatus;)yield He(100),R=yield Q(S.appConfig);const U=R.authToken;return 0===U.requestStatus?J(S,T):U})).apply(this,arguments)}function Q(S){return _r(S,T=>{if(!wt(T))throw nt.create("not-registered");return function ie(S){return 1===S.requestStatus&&S.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function Te(S,T){return ze.apply(this,arguments)}function ze(){return(ze=(0,N.Z)(function*(S,T){try{const R=yield Pt(S,T),U=Object.assign(Object.assign({},T),{authToken:R});return yield it(S.appConfig,U),R}catch(R){if(!rt(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const U=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield it(S.appConfig,U)}else yield Un(S.appConfig);throw R}})).apply(this,arguments)}function wt(S){return void 0!==S&&2===S.registrationStatus}function hn(S){return 2===S.requestStatus&&!function dn(S){const T=Date.now();return T<S.creationTime||S.creationTime+S.expiresIn<T+36e5}(S)}function Jn(S){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},S),{authToken:T})}function W(){return(W=(0,N.Z)(function*(S){const T=S,{installationEntry:R,registrationPromise:U}=yield Dn(T);return U?U.catch(console.error):J(T).catch(console.error),R.fid})).apply(this,arguments)}function Ke(){return(Ke=(0,N.Z)(function*(S,T=!1){const R=S;return yield yt(R),(yield J(R,T)).token})).apply(this,arguments)}function yt(S){return It.apply(this,arguments)}function It(){return(It=(0,N.Z)(function*(S){const{registrationPromise:T}=yield Dn(S);T&&(yield T)})).apply(this,arguments)}function oo(S){return nt.create("missing-app-config-values",{valueName:S})}const ao="installations",lo=S=>{const T=S.getProvider("app").getImmediate(),R=function Mn(S){if(!S||!S.options)throw oo("App Configuration");if(!S.name)throw oo("App Name");const T=["projectId","apiKey","appId"];for(const R of T)if(!S.options[R])throw oo(R);return{appName:S.name,projectId:S.options.projectId,apiKey:S.options.apiKey,appId:S.options.appId}}(T);return{app:T,appConfig:R,heartbeatServiceProvider:(0,ce._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},qo=S=>{const T=S.getProvider("app").getImmediate(),R=(0,ce._getProvider)(T,ao).getImmediate();return{getId:()=>function G(S){return W.apply(this,arguments)}(R),getToken:ne=>function Ce(S){return Ke.apply(this,arguments)}(R,ne)}};(function Ul(){(0,ce._registerComponent)(new ve.wA(ao,lo,"PUBLIC")),(0,ce._registerComponent)(new ve.wA("installations-internal",qo,"PRIVATE"))})(),(0,ce.registerVersion)(Ee,K),(0,ce.registerVersion)(Ee,K,"esm2017");const hs="@firebase/remote-config",Kn=new he.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Hc{constructor(T,R,U,ne){this.client=T,this.storage=R,this.storageCache=U,this.logger=ne}isCachedDataFresh(T,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-R,ne=U<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${ne}.`),ne}fetch(T){var R=this;return(0,N.Z)(function*(){const[U,ne]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(ne&&R.isCachedDataFresh(T.cacheMaxAgeMillis,U))return ne;T.eTag=ne&&ne.eTag;const pe=yield R.client.fetch(T),Pe=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===pe.status&&Pe.push(R.storage.setLastSuccessfulFetchResponse(pe)),yield Promise.all(Pe),pe})()}}function Wa(S=navigator){return S.languages&&S.languages[0]||S.language}class mo{constructor(T,R,U,ne,pe,Pe){this.firebaseInstallations=T,this.sdkVersion=R,this.namespace=U,this.projectId=ne,this.apiKey=pe,this.appId=Pe}fetch(T){var R=this;return(0,N.Z)(function*(){var U,ne,pe;const[Pe,Ye]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),At=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,Ht={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},Et={sdk_version:R.sdkVersion,app_instance_id:Pe,app_instance_id_token:Ye,app_id:R.appId,language_code:Wa()},ir={method:"POST",headers:Ht,body:JSON.stringify(Et)},Rr=fetch(At,ir),_l=new Promise((bl,Ea)=>{T.signal.addEventListener(()=>{const ac=new Error("The operation was aborted.");ac.name="AbortError",Ea(ac)})});let yl;try{yield Promise.race([Rr,_l]),yl=yield Rr}catch(bl){let Ea="fetch-client-network";throw"AbortError"===(null===(U=bl)||void 0===U?void 0:U.name)&&(Ea="fetch-timeout"),Kn.create(Ea,{originalErrorMessage:null===(ne=bl)||void 0===ne?void 0:ne.message})}let vl=yl.status;const So=yl.headers.get("ETag")||void 0;let qs,oc;if(200===yl.status){let bl;try{bl=yield yl.json()}catch(Ea){throw Kn.create("fetch-client-parse",{originalErrorMessage:null===(pe=Ea)||void 0===pe?void 0:pe.message})}qs=bl.entries,oc=bl.state}if("INSTANCE_STATE_UNSPECIFIED"===oc?vl=500:"NO_CHANGE"===oc?vl=304:("NO_TEMPLATE"===oc||"EMPTY_CONFIG"===oc)&&(qs={}),304!==vl&&200!==vl)throw Kn.create("fetch-status",{httpStatus:vl});return{status:vl,eTag:So,config:qs}})()}}class ps{constructor(T,R){this.client=T,this.storage=R}fetch(T){var R=this;return(0,N.Z)(function*(){const U=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(T,U)})()}attemptFetch(T,{throttleEndTimeMillis:R,backoffCount:U}){var ne=this;return(0,N.Z)(function*(){yield function fi(S,T){return new Promise((R,U)=>{const ne=Math.max(T-Date.now(),0),pe=setTimeout(R,ne);S.addEventListener(()=>{clearTimeout(pe),U(Kn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,R);try{const pe=yield ne.client.fetch(T);return yield ne.storage.deleteThrottleMetadata(),pe}catch(pe){if(!function zp(S){if(!(S instanceof he.ZR&&S.customData))return!1;const T=Number(S.customData.httpStatus);return 429===T||500===T||503===T||504===T}(pe))throw pe;const Pe={throttleEndTimeMillis:Date.now()+(0,he.$s)(U),backoffCount:U+1};return yield ne.storage.setThrottleMetadata(Pe),ne.attemptFetch(T,Pe)}})()}}class $l{constructor(T,R,U,ne,pe){this.app=T,this._client=R,this._storageCache=U,this._storage=ne,this._logger=pe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function qa(S,T){var R;const U=S.target.error||void 0;return Kn.create(T,{originalErrorMessage:U&&(null===(R=U)||void 0===R?void 0:R.message)})}const Ko="app_namespace_store";class Gu{constructor(T,R,U,ne=function Kp(){return new Promise((S,T)=>{var R;try{const U=indexedDB.open("firebase_remote_config",1);U.onerror=ne=>{T(qa(ne,"storage-open"))},U.onsuccess=ne=>{S(ne.target.result)},U.onupgradeneeded=ne=>{0===ne.oldVersion&&ne.target.result.createObjectStore(Ko,{keyPath:"compositeKey"})}}catch(U){T(Kn.create("storage-open",{originalErrorMessage:null===(R=U)||void 0===R?void 0:R.message}))}})}()){this.appId=T,this.appName=R,this.namespace=U,this.openDbPromise=ne}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var R=this;return(0,N.Z)(function*(){const U=yield R.openDbPromise;return new Promise((ne,pe)=>{var Pe;const bt=U.transaction([Ko],"readonly").objectStore(Ko),At=R.createCompositeKey(T);try{const Ht=bt.get(At);Ht.onerror=Et=>{pe(qa(Et,"storage-get"))},Ht.onsuccess=Et=>{const ir=Et.target.result;ne(ir?ir.value:void 0)}}catch(Ht){pe(Kn.create("storage-get",{originalErrorMessage:null===(Pe=Ht)||void 0===Pe?void 0:Pe.message}))}})})()}set(T,R){var U=this;return(0,N.Z)(function*(){const ne=yield U.openDbPromise;return new Promise((pe,Pe)=>{var Ye;const At=ne.transaction([Ko],"readwrite").objectStore(Ko),Ht=U.createCompositeKey(T);try{const Et=At.put({compositeKey:Ht,value:R});Et.onerror=ir=>{Pe(qa(ir,"storage-set"))},Et.onsuccess=()=>{pe()}}catch(Et){Pe(Kn.create("storage-set",{originalErrorMessage:null===(Ye=Et)||void 0===Ye?void 0:Ye.message}))}})})()}delete(T){var R=this;return(0,N.Z)(function*(){const U=yield R.openDbPromise;return new Promise((ne,pe)=>{var Pe;const bt=U.transaction([Ko],"readwrite").objectStore(Ko),At=R.createCompositeKey(T);try{const Ht=bt.delete(At);Ht.onerror=Et=>{pe(qa(Et,"storage-delete"))},Ht.onsuccess=()=>{ne()}}catch(Ht){pe(Kn.create("storage-delete",{originalErrorMessage:null===(Pe=Ht)||void 0===Pe?void 0:Pe.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class Zo{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,N.Z)(function*(){const R=T.storage.getLastFetchStatus(),U=T.storage.getLastSuccessfulFetchTimestampMillis(),ne=T.storage.getActiveConfig(),pe=yield R;pe&&(T.lastFetchStatus=pe);const Pe=yield U;Pe&&(T.lastSuccessfulFetchTimestampMillis=Pe);const Ye=yield ne;Ye&&(T.activeConfig=Ye)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function B_(){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,N.Z)(function*(){if(!(0,he.hl)())return!1;try{return yield(0,he.eu)()}catch{return!1}})).apply(this,arguments)}!function zu(){(0,ce._registerComponent)(new ve.wA("remote-config",function S(T,{instanceIdentifier:R}){const U=T.getProvider("app").getImmediate(),ne=T.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Kn.create("registration-window");if(!(0,he.hl)())throw Kn.create("indexed-db-unavailable");const{projectId:pe,apiKey:Pe,appId:Ye}=U.options;if(!pe)throw Kn.create("registration-project-id");if(!Pe)throw Kn.create("registration-api-key");if(!Ye)throw Kn.create("registration-app-id");const bt=new Gu(Ye,U.name,R=R||"firebase"),At=new Zo(bt),Ht=new ue.Yd(hs);Ht.logLevel=ue.in.ERROR;const Et=new mo(ne,ce.SDK_VERSION,R,pe,Pe,Ye),ir=new ps(Et,bt),Rr=new Hc(ir,bt,At,Ht),_l=new $l(U,Rr,At,bt,Ht);return function Tn(S){const T=(0,he.m9)(S);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(_l),_l},"PUBLIC").setMultipleInstances(!0)),(0,ce.registerVersion)(hs,"0.3.11"),(0,ce.registerVersion)(hs,"0.3.11","esm2017")}();const Sr="/firebase-messaging-sw.js",Qo="/firebase-cloud-messaging-push-scope",Ls="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",zl="google.c.a.c_id",jc="google.c.a.c_l",Ku="google.c.a.ts",Xo="google.c.a.e";var pi=(()=>{return(S=pi||(pi={})).PUSH_RECEIVED="push-received",S.NOTIFICATION_CLICKED="notification-clicked",pi;var S})();function ms(S){const T=new Uint8Array(S);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ni(S){const R=(S+"=".repeat((4-S.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(R),ne=new Uint8Array(U.length);for(let pe=0;pe<U.length;++pe)ne[pe]=U.charCodeAt(pe);return ne}const go="fcm_token_details_db",Jo="fcm_token_object_Store";function Zp(S){return Gc.apply(this,arguments)}function Gc(){return Gc=(0,N.Z)(function*(S){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(pe=>pe.name).includes(go))return null;let T=null;return(yield(0,ge.X3)(go,5,{upgrade:(U=(0,N.Z)(function*(ne,pe,Pe,Ye){var bt;if(pe<2||!ne.objectStoreNames.contains(Jo))return;const At=Ye.objectStore(Jo),Ht=yield At.index("fcmSenderId").get(S);if(yield At.clear(),Ht)if(2===pe){const Et=Ht;if(!Et.auth||!Et.p256dh||!Et.endpoint)return;T={token:Et.fcmToken,createTime:null!==(bt=Et.createTime)&&void 0!==bt?bt:Date.now(),subscriptionOptions:{auth:Et.auth,p256dh:Et.p256dh,endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:"string"==typeof Et.vapidKey?Et.vapidKey:ms(Et.vapidKey)}}}else if(3===pe){const Et=Ht;T={token:Et.fcmToken,createTime:Et.createTime,subscriptionOptions:{auth:ms(Et.auth),p256dh:ms(Et.p256dh),endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:ms(Et.vapidKey)}}}else if(4===pe){const Et=Ht;T={token:Et.fcmToken,createTime:Et.createTime,subscriptionOptions:{auth:ms(Et.auth),p256dh:ms(Et.p256dh),endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:ms(Et.vapidKey)}}}}),function(pe,Pe,Ye,bt){return U.apply(this,arguments)})})).close(),yield(0,ge.Lj)(go),yield(0,ge.Lj)("fcm_vapid_details_db"),yield(0,ge.Lj)("undefined"),Nn(T)?T:null;var U}),Gc.apply(this,arguments)}function Nn(S){if(!S||!S.subscriptionOptions)return!1;const{subscriptionOptions:T}=S;return"number"==typeof S.createTime&&S.createTime>0&&"string"==typeof S.token&&S.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const ki="firebase-messaging-store";let Tr=null;function Wl(){return Tr||(Tr=(0,ge.X3)("firebase-messaging-database",1,{upgrade:(S,T)=>{0===T&&S.createObjectStore(ki)}})),Tr}function _o(S){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,N.Z)(function*(S){const T=gi(S),U=yield(yield Wl()).transaction(ki).objectStore(ki).get(T);if(U)return U;{const ne=yield Zp(S.appConfig.senderId);if(ne)return yield an(S,ne),ne}})).apply(this,arguments)}function an(S,T){return ql.apply(this,arguments)}function ql(){return(ql=(0,N.Z)(function*(S,T){const R=gi(S),ne=(yield Wl()).transaction(ki,"readwrite");return yield ne.objectStore(ki).put(T,R),yield ne.done,T})).apply(this,arguments)}function Vs(S){return zc.apply(this,arguments)}function zc(){return(zc=(0,N.Z)(function*(S){const T=gi(S),U=(yield Wl()).transaction(ki,"readwrite");yield U.objectStore(ki).delete(T),yield U.done})).apply(this,arguments)}function gi({appConfig:S}){return S.appId}const Hn=new he.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Rt(S,T){return Za.apply(this,arguments)}function Za(){return(Za=(0,N.Z)(function*(S,T){var R;const U=yield Xa(S),ne=ke(T),pe={method:"POST",headers:U,body:JSON.stringify(ne)};let Pe;try{Pe=yield(yield fetch(yo(S.appConfig),pe)).json()}catch(Ye){throw Hn.create("token-subscribe-failed",{errorInfo:null===(R=Ye)||void 0===R?void 0:R.toString()})}if(Pe.error)throw Hn.create("token-subscribe-failed",{errorInfo:Pe.error.message});if(!Pe.token)throw Hn.create("token-subscribe-no-token");return Pe.token})).apply(this,arguments)}function Yp(S,T){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,N.Z)(function*(S,T){var R;const U=yield Xa(S),ne=ke(T.subscriptionOptions),pe={method:"PATCH",headers:U,body:JSON.stringify(ne)};let Pe;try{Pe=yield(yield fetch(`${yo(S.appConfig)}/${T.token}`,pe)).json()}catch(Ye){throw Hn.create("token-update-failed",{errorInfo:null===(R=Ye)||void 0===R?void 0:R.toString()})}if(Pe.error)throw Hn.create("token-update-failed",{errorInfo:Pe.error.message});if(!Pe.token)throw Hn.create("token-update-no-token");return Pe.token})).apply(this,arguments)}function Yu(S,T){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,N.Z)(function*(S,T){var R;const ne={method:"DELETE",headers:yield Xa(S)};try{const Pe=yield(yield fetch(`${yo(S.appConfig)}/${T}`,ne)).json();if(Pe.error)throw Hn.create("token-unsubscribe-failed",{errorInfo:Pe.error.message})}catch(pe){throw Hn.create("token-unsubscribe-failed",{errorInfo:null===(R=pe)||void 0===R?void 0:R.toString()})}})).apply(this,arguments)}function yo({projectId:S}){return`https://fcmregistrations.googleapis.com/v1/projects/${S}/registrations`}function Xa(S){return ea.apply(this,arguments)}function ea(){return(ea=(0,N.Z)(function*({appConfig:S,installations:T}){const R=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":S.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function ke({p256dh:S,auth:T,endpoint:R,vapidKey:U}){const ne={web:{endpoint:R,auth:T,p256dh:S}};return U!==Ls&&(ne.web.applicationPubKey=U),ne}const Zt=6048e5;function Mh(S){return ta.apply(this,arguments)}function ta(){return(ta=(0,N.Z)(function*(S){const T=yield xh(S.swRegistration,S.vapidKey),R={vapidKey:S.vapidKey,swScope:S.swRegistration.scope,endpoint:T.endpoint,auth:ms(T.getKey("auth")),p256dh:ms(T.getKey("p256dh"))},U=yield _o(S.firebaseDependencies);if(U){if(Qp(U.subscriptionOptions,R))return Date.now()>=U.createTime+Zt?Kl(S,{token:U.token,createTime:Date.now(),subscriptionOptions:R}):U.token;try{yield Yu(S.firebaseDependencies,U.token)}catch(ne){console.warn(ne)}return Zl(S.firebaseDependencies,R)}return Zl(S.firebaseDependencies,R)})).apply(this,arguments)}function tr(S){return na.apply(this,arguments)}function na(){return(na=(0,N.Z)(function*(S){const T=yield _o(S.firebaseDependencies);T&&(yield Yu(S.firebaseDependencies,T.token),yield Vs(S.firebaseDependencies));const R=yield S.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function Kl(S,T){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,N.Z)(function*(S,T){try{const R=yield Yp(S.firebaseDependencies,T),U=Object.assign(Object.assign({},T),{token:R,createTime:Date.now()});return yield an(S.firebaseDependencies,U),R}catch(R){throw yield tr(S),R}})).apply(this,arguments)}function Zl(S,T){return ra.apply(this,arguments)}function ra(){return(ra=(0,N.Z)(function*(S,T){const U={token:yield Rt(S,T),createTime:Date.now(),subscriptionOptions:T};return yield an(S,U),U.token})).apply(this,arguments)}function xh(S,T){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,N.Z)(function*(S,T){return(yield S.pushManager.getSubscription())||S.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ni(T)})})).apply(this,arguments)}function Qp(S,T){return T.vapidKey===S.vapidKey&&T.endpoint===S.endpoint&&T.auth===S.auth&&T.p256dh===S.p256dh}function gs(S){const T={from:S.from,collapseKey:S.collapse_key,messageId:S.fcmMessageId};return function nr(S,T){if(!T.notification)return;S.notification={};const R=T.notification.title;R&&(S.notification.title=R);const U=T.notification.body;U&&(S.notification.body=U);const ne=T.notification.image;ne&&(S.notification.image=ne)}(T,S),function Qi(S,T){!T.data||(S.data=T.data)}(T,S),function el(S,T){var R,U,ne,pe,Pe;if(!(T.fcmOptions||null!==(R=T.notification)&&void 0!==R&&R.click_action))return;S.fcmOptions={};const Ye=null!==(ne=null===(U=T.fcmOptions)||void 0===U?void 0:U.link)&&void 0!==ne?ne:null===(pe=T.notification)||void 0===pe?void 0:pe.click_action;Ye&&(S.fcmOptions.link=Ye);const bt=null===(Pe=T.fcmOptions)||void 0===Pe?void 0:Pe.analytics_label;bt&&(S.fcmOptions.analyticsLabel=bt)}(T,S),T}function tl(S){return"object"==typeof S&&!!S&&zl in S}function _s(S,T){const R=[];for(let U=0;U<S.length;U++)R.push(S.charAt(U)),U<T.length&&R.push(T.charAt(U));return R.join("")}function Wc(S){return Hn.create("missing-app-config-values",{valueName:S})}_s("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),_s("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Xu{constructor(T,R,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ne=function Qu(S){if(!S||!S.options)throw Wc("App Configuration Object");if(!S.name)throw Wc("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:R}=S;for(const U of T)if(!R[U])throw Wc(U);return{appName:S.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:ne,installations:R,analyticsProvider:U}}_delete(){return Promise.resolve()}}function Rh(S){return ia.apply(this,arguments)}function ia(){return(ia=(0,N.Z)(function*(S){var T;try{S.swRegistration=yield navigator.serviceWorker.register(Sr,{scope:Qo}),S.swRegistration.update().catch(()=>{})}catch(R){throw Hn.create("failed-service-worker-registration",{browserErrorMessage:null===(T=R)||void 0===T?void 0:T.message})}})).apply(this,arguments)}function qc(S,T){return nl.apply(this,arguments)}function nl(){return(nl=(0,N.Z)(function*(S,T){if(!T&&!S.swRegistration&&(yield Rh(S)),T||!S.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw Hn.create("invalid-sw-registration");S.swRegistration=T}})).apply(this,arguments)}function Kc(S,T){return rl.apply(this,arguments)}function rl(){return(rl=(0,N.Z)(function*(S,T){T?S.vapidKey=T:S.vapidKey||(S.vapidKey=Ls)})).apply(this,arguments)}function sa(){return(sa=(0,N.Z)(function*(S,T){if(!navigator)throw Hn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Hn.create("permission-blocked");return yield Kc(S,T?.vapidKey),yield qc(S,T?.serviceWorkerRegistration),Mh(S)})).apply(this,arguments)}function kh(S,T,R){return il.apply(this,arguments)}function il(){return(il=(0,N.Z)(function*(S,T,R){const U=Oh(T);(yield S.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:R[zl],message_name:R[jc],message_time:R[Ku],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Oh(S){switch(S){case pi.NOTIFICATION_CLICKED:return"notification_open";case pi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Bs(){return(Bs=(0,N.Z)(function*(S,T){const R=T.data;if(!R.isFirebaseMessaging)return;S.onMessageHandler&&R.messageType===pi.PUSH_RECEIVED&&("function"==typeof S.onMessageHandler?S.onMessageHandler(gs(R)):S.onMessageHandler.next(gs(R)));const U=R.data;tl(U)&&"1"===U[Xo]&&(yield kh(S,R.messageType,U))})).apply(this,arguments)}const Us="@firebase/messaging",On=S=>{const T=new Xu(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),S.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function ed(S,T){return Bs.apply(this,arguments)}(T,R)),T},ys=S=>{const T=S.getProvider("messaging").getImmediate();return{getToken:U=>function Ju(S,T){return sa.apply(this,arguments)}(T,U)}};function Zc(){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,N.Z)(function*(){try{yield(0,he.eu)()}catch{return!1}return typeof window<"u"&&(0,he.hl)()&&(0,he.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Pn(){(0,ce._registerComponent)(new ve.wA("messaging",On,"PUBLIC")),(0,ce._registerComponent)(new ve.wA("messaging-internal",ys,"PRIVATE")),(0,ce.registerVersion)(Us,"0.9.16"),(0,ce.registerVersion)(Us,"0.9.16","esm2017")}();const la="analytics",id="firebase_id",eu="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",sd="https://www.googletagmanager.com/gtag/js",jn=new ue.Yd("@firebase/analytics");function Yl(S){return Promise.all(S.map(T=>T.catch(R=>R)))}function Ql(S,T){const R=document.createElement("script");R.src=`${sd}?l=${S}&id=${T}`,R.async=!0,document.head.appendChild(R)}function Nh(S,T,R,U,ne,pe){return sl.apply(this,arguments)}function sl(){return(sl=(0,N.Z)(function*(S,T,R,U,ne,pe){const Pe=U[ne];try{if(Pe)yield T[Pe];else{const bt=(yield Yl(R)).find(At=>At.measurementId===ne);bt&&(yield T[bt.appId])}}catch(Ye){jn.error(Ye)}S("config",ne,pe)})).apply(this,arguments)}function vs(S,T,R,U,ne){return ol.apply(this,arguments)}function ol(){return(ol=(0,N.Z)(function*(S,T,R,U,ne){try{let pe=[];if(ne&&ne.send_to){let Pe=ne.send_to;Array.isArray(Pe)||(Pe=[Pe]);const Ye=yield Yl(R);for(const bt of Pe){const At=Ye.find(Et=>Et.measurementId===bt),Ht=At&&T[At.appId];if(!Ht){pe=[];break}pe.push(Ht)}}0===pe.length&&(pe=Object.values(T)),yield Promise.all(pe),S("event",U,ne||{})}catch(pe){jn.error(pe)}})).apply(this,arguments)}function od(){const S=window.document.getElementsByTagName("script");for(const T of Object.values(S))if(T.src&&T.src.includes(sd))return T;return null}const rr=new he.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ll=new class nu{constructor(T={},R=1e3){this.throttleMetadata=T,this.intervalMillis=R}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,R){this.throttleMetadata[T]=R}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function ca(S){return new Headers({Accept:"application/json","x-goog-api-key":S})}function Vh(S){return $n.apply(this,arguments)}function $n(){return($n=(0,N.Z)(function*(S){var T;const{appId:R,apiKey:U}=S,ne={method:"GET",headers:ca(U)},pe=eu.replace("{app-id}",R),Pe=yield fetch(pe,ne);if(200!==Pe.status&&304!==Pe.status){let Ye="";try{const bt=yield Pe.json();null!==(T=bt.error)&&void 0!==T&&T.message&&(Ye=bt.error.message)}catch{}throw rr.create("config-fetch-failed",{httpStatus:Pe.status,responseMessage:Ye})}return Pe.json()})).apply(this,arguments)}function ad(S){return ri.apply(this,arguments)}function ri(){return(ri=(0,N.Z)(function*(S,T=ll,R){const{appId:U,apiKey:ne,measurementId:pe}=S.options;if(!U)throw rr.create("no-app-id");if(!ne){if(pe)return{measurementId:pe,appId:U};throw rr.create("no-api-key")}const Pe=T.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ye=new cl;return setTimeout((0,N.Z)(function*(){Ye.abort()}),void 0!==R?R:6e4),ld({appId:U,apiKey:ne,measurementId:pe},Pe,Ye,T)})).apply(this,arguments)}function ld(S,T,R){return bs.apply(this,arguments)}function bs(){return(bs=(0,N.Z)(function*(S,{throttleEndTimeMillis:T,backoffCount:R},U,ne=ll){var pe,Pe;const{appId:Ye,measurementId:bt}=S;try{yield ru(U,T)}catch(At){if(bt)return jn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${bt} provided in the "measurementId" field in the local Firebase config. [${null===(pe=At)||void 0===pe?void 0:pe.message}]`),{appId:Ye,measurementId:bt};throw At}try{const At=yield Vh(S);return ne.deleteThrottleMetadata(Ye),At}catch(At){const Ht=At;if(!Jl(Ht)){if(ne.deleteThrottleMetadata(Ye),bt)return jn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${bt} provided in the "measurementId" field in the local Firebase config. [${Ht?.message}]`),{appId:Ye,measurementId:bt};throw At}const Et=503===Number(null===(Pe=Ht?.customData)||void 0===Pe?void 0:Pe.httpStatus)?(0,he.$s)(R,ne.intervalMillis,30):(0,he.$s)(R,ne.intervalMillis),ir={throttleEndTimeMillis:Date.now()+Et,backoffCount:R+1};return ne.setThrottleMetadata(Ye,ir),jn.debug(`Calling attemptFetch again in ${Et} millis`),ld(S,ir,U,ne)}})).apply(this,arguments)}function ru(S,T){return new Promise((R,U)=>{const ne=Math.max(T-Date.now(),0),pe=setTimeout(R,ne);S.addEventListener(()=>{clearTimeout(pe),U(rr.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function Jl(S){if(!(S instanceof he.ZR&&S.customData))return!1;const T=Number(S.customData.httpStatus);return 429===T||500===T||503===T||504===T}class cl{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let vo,tc;function ua(){return(ua=(0,N.Z)(function*(S,T,R,U,ne){if(ne&&ne.global)S("event",R,U);else{const pe=yield T;S("event",R,Object.assign(Object.assign({},U),{send_to:pe}))}})).apply(this,arguments)}function fa(S){tc=S}function iu(S){vo=S}function js(){return pa.apply(this,arguments)}function pa(){return(pa=(0,N.Z)(function*(){var S;if(!(0,he.hl)())return jn.warn(rr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,he.eu)()}catch(T){return jn.warn(rr.create("indexeddb-unavailable",{errorInfo:null===(S=T)||void 0===S?void 0:S.toString()}).message),!1}return!0})).apply(this,arguments)}function ma(){return(ma=(0,N.Z)(function*(S,T,R,U,ne,pe,Pe){var Ye;const bt=ad(S);bt.then(Rr=>{R[Rr.measurementId]=Rr.appId,S.options.measurementId&&Rr.measurementId!==S.options.measurementId&&jn.warn(`The measurement ID in the local Firebase config (${S.options.measurementId}) does not match the measurement ID fetched from the server (${Rr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Rr=>jn.error(Rr)),T.push(bt);const At=js().then(Rr=>{if(Rr)return U.getId()}),[Ht,Et]=yield Promise.all([bt,At]);od()||Ql(pe,Ht.measurementId),tc&&(ne("consent","default",tc),fa(void 0)),ne("js",new Date);const ir=null!==(Ye=Pe?.config)&&void 0!==Ye?Ye:{};return ir.origin="firebase",ir.update=!0,null!=Et&&(ir[id]=Et),ne("config",Ht.measurementId,ir),vo&&(ne("set",vo),iu(void 0)),Ht.measurementId})).apply(this,arguments)}class nc{constructor(T){this.app=T}_delete(){return delete Ur[this.app.options.appId],Promise.resolve()}}let Ur={},ga=[];const wo={};let ya,Ji,_a="dataLayer",ud=!1;function Hh(S,T,R){!function Xp(){const S=[];if((0,he.ru)()&&S.push("This is a browser extension environment."),(0,he.zI)()||S.push("Cookies are not available."),S.length>0){const T=S.map((U,ne)=>`(${ne+1}) ${U}`).join(" "),R=rr.create("invalid-analytics-context",{errorInfo:T});jn.warn(R.message)}}();const U=S.options.appId;if(!U)throw rr.create("no-app-id");if(!S.options.apiKey){if(!S.options.measurementId)throw rr.create("no-api-key");jn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${S.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ur[U])throw rr.create("already-exists",{id:U});if(!ud){!function Xl(S){let T=[];Array.isArray(window[S])?T=window[S]:window[S]=T}(_a);const{wrappedGtag:pe,gtagCore:Pe}=function al(S,T,R,U,ne){let pe=function(...Pe){window[U].push(arguments)};return window[ne]&&"function"==typeof window[ne]&&(pe=window[ne]),window[ne]=function tu(S,T,R,U){function pe(){return(pe=(0,N.Z)(function*(Pe,Ye,bt){try{"event"===Pe?yield vs(S,T,R,Ye,bt):"config"===Pe?yield Nh(S,T,R,U,Ye,bt):"consent"===Pe?S("consent","update",bt):S("set",Ye)}catch(At){jn.error(At)}})).apply(this,arguments)}return function ne(Pe,Ye,bt){return pe.apply(this,arguments)}}(pe,S,T,R),{gtagCore:pe,wrappedGtag:window[ne]}}(Ur,ga,wo,_a,"gtag");Ji=pe,ya=Pe,ud=!0}return Ur[U]=function Uh(S,T,R,U,ne,pe,Pe){return ma.apply(this,arguments)}(S,ga,wo,T,ya,_a,R),new nc(S)}function H_(){return jh.apply(this,arguments)}function jh(){return(jh=(0,N.Z)(function*(){if((0,he.ru)()||!(0,he.zI)()||!(0,he.hl)())return!1;try{return yield(0,he.eu)()}catch{return!1}})).apply(this,arguments)}const dd="@firebase/analytics";!function Ar(){(0,ce._registerComponent)(new ve.wA(la,(T,{options:R})=>Hh(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,ce._registerComponent)(new ve.wA("analytics-internal",function S(T){try{const R=T.getProvider(la).getImmediate();return{logEvent:(U,ne,pe)=>function Eo(S,T,R,U){S=(0,he.m9)(S),function ul(S,T,R,U,ne){return ua.apply(this,arguments)}(Ji,Ur[S.app.options.appId],T,R,U).catch(ne=>jn.error(ne))}(R,U,ne,pe)}}catch(R){throw rr.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,ce.registerVersion)(dd,"0.8.0"),(0,ce.registerVersion)(dd,"0.8.0","esm2017")}();var es=L(4408),Io=L(7565);const hl=new class Pi extends Io.v{}(class Gs extends es.o{constructor(T,R){super(T,R),this.scheduler=T,this.work=R}schedule(T,R=0){return R>0?super.schedule(T,R):(this.delay=R,this.state=T,this.scheduler.flush(this),this)}execute(T,R){return R>0||this.closed?super.execute(T,R):this._execute(T,R)}requestAsyncId(T,R,U=0){return null!=U&&U>0||null==U&&this.delay>0?super.requestAsyncId(T,R,U):T.flush(this)}});var $h=L(4986),fl=L(8505),pl=L(5363),hd=L(9468);const ii=new u.GfV("7.4.1"),rc="__angularfire_symbol__analyticsIsSupportedValue",Mr="__angularfire_symbol__analyticsIsSupported",ml="__angularfire_symbol__remoteConfigIsSupportedValue",Bt="__angularfire_symbol__remoteConfigIsSupported",si="__angularfire_symbol__messagingIsSupportedValue",xr="__angularfire_symbol__messagingIsSupported";function ic(S,T,R){if(T){if(1===T.length)return T[0];const pe=T.filter(Pe=>Pe.app===R);if(1===pe.length)return pe[0]}return R.container.getProvider(S).getImmediate({optional:!0})}globalThis[Mr]||(globalThis[Mr]=H_().then(S=>globalThis[rc]=S).catch(()=>globalThis[rc]=!1)),globalThis[xr]||(globalThis[xr]=Zc().then(S=>globalThis[si]=S).catch(()=>globalThis[si]=!1)),globalThis[Bt]||(globalThis[Bt]=B_().then(S=>globalThis[ml]=S).catch(()=>globalThis[ml]=!1));const sc=(S,T)=>{const R=T?[T]:(0,j.C6)(),U=[];return R.forEach(ne=>{ne.container.getProvider(S).instances.forEach(Pe=>{U.includes(Pe)||U.push(Pe)})}),U};function Ws(){}class va{constructor(T,R=hl){this.zone=T,this.delegate=R}now(){return this.delegate.now()}schedule(T,R,U){const ne=this.zone;return this.delegate.schedule(function(Pe){ne.runGuarded(()=>{T.apply(this,[Pe])})},R,U)}}class ou{constructor(T){this.zone=T,this.task=null}call(T,R){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ws,{},Ws,Ws)),R.pipe((0,fl.b)({next:U,complete:U,error:U})).subscribe(T).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ba=(()=>{class S{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new va(Zone.current)),this.insideAngular=R.run(()=>new va(Zone.current,$h.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return S.\u0275fac=function(R){return new(R||S)(u.LFG(u.R0b))},S.\u0275prov=u.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();function Es(){const S=globalThis.\u0275AngularFireScheduler;if(!S)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return S}function au(S){return S.pipe((0,pl.Q)(Es().outsideAngular))}function Do(S){return Es(),function em(S){return function(R){return(R=R.lift(new ou(S.ngZone))).pipe((0,hd.R)(S.outsideAngular),(0,pl.Q)(S.insideAngular))}}(Es())(S)}},8554:(ut,Ae,L)=>{L.d(Ae,{$:()=>yo,A:()=>Z,B:()=>Ne,G:()=>qo,H:()=>ei,J:()=>ps,L:()=>hn,M:()=>Gl,N:()=>qu,P:()=>$h,Q:()=>zl,R:()=>Jp,T:()=>jc,U:()=>Ls,V:()=>pi,W:()=>ms,X:()=>Zp,Y:()=>Ka,Z:()=>Rt,_:()=>Yp,a:()=>Hs,a0:()=>Mh,a1:()=>tr,a2:()=>Kl,a3:()=>Zl,a4:()=>xh,a5:()=>Qp,a6:()=>nr,a7:()=>Qi,a8:()=>tl,a9:()=>_s,aA:()=>Rr,aB:()=>bt,aC:()=>au,aD:()=>wa,aE:()=>vt,aI:()=>ca,aL:()=>Xo,aa:()=>Rh,ab:()=>qc,ac:()=>Kc,af:()=>kh,ag:()=>Oh,ah:()=>ed,ak:()=>ki,al:()=>Qc,an:()=>sd,ao:()=>sl,ap:()=>Qt,aq:()=>we,ar:()=>ot,as:()=>yt,at:()=>rt,au:()=>pd,av:()=>So,aw:()=>Fe,ax:()=>ae,ay:()=>re,az:()=>dn,b:()=>rr,c:()=>si,d:()=>et,e:()=>ws,f:()=>em,g:()=>U,h:()=>S,i:()=>pa,j:()=>Pe,k:()=>Z_,l:()=>Co,m:()=>Ca,o:()=>ge,r:()=>es,s:()=>ar,u:()=>hl});var u=L(5861),j=L(2090),N=L(9681),ce=L(655),he=L(1877),ve=L(4859);const ge={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Z={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ne=function te(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},De=function $e(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},at=new j.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ye=new he.Yd("@firebase/auth");function nt(b,...g){ye.logLevel<=he.in.ERROR&&ye.error(`Auth (${N.SDK_VERSION}): ${b}`,...g)}function rt(b,...g){throw qe(b,...g)}function Fe(b,...g){return qe(b,...g)}function Re(b,g,y){const C=Object.assign(Object.assign({},De()),{[g]:y});return new j.LL("auth","Firebase",C).create(g,{appName:b.name})}function Se(b,g,y){if(!(g instanceof y))throw y.name!==g.constructor.name&&rt(b,"argument-error"),Re(b,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function qe(b,...g){if("string"!=typeof b){const y=g[0],C=[...g.slice(1)];return C[0]&&(C[0].appName=b.name),b._errorFactory.create(y,...C)}return at.create(b,...g)}function ae(b,g,...y){if(!b)throw qe(g,...y)}function fe(b){const g="INTERNAL ASSERTION FAILED: "+b;throw nt(g),new Error(g)}function we(b,g){b||fe(g)}const ee=new Map;function re(b){we(b instanceof Function,"Expected a class definition");let g=ee.get(b);return g?(we(g instanceof b,"Instance stored in cache mismatched with class"),g):(g=new b,ee.set(b,g),g)}function Ue(){var b;return typeof self<"u"&&(null===(b=self.location)||void 0===b?void 0:b.href)||""}function He(){return"http:"===_t()||"https:"===_t()}function _t(){var b;return typeof self<"u"&&(null===(b=self.location)||void 0===b?void 0:b.protocol)||null}class Ze{constructor(g,y){this.shortDelay=g,this.longDelay=y,we(y>g,"Short delay should be less than long delay!"),this.isMobile=(0,j.uI)()||(0,j.b$)()}get(){return function Jt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(He()||(0,j.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function bn(b,g){we(b.emulator,"Emulator should always be set here");const{url:y}=b.emulator;return g?`${y}${g.startsWith("/")?g.slice(1):g}`:y}class Vn{static initialize(g,y,C){this.fetchImpl=g,y&&(this.headersImpl=y),C&&(this.responseImpl=C)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void fe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void fe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void fe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const on={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},en=new Ze(3e4,6e4);function zt(b,g){return b.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:b.tenantId}):g}function Vt(b,g,y,C){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,u.Z)(function*(b,g,y,C,x={}){return so(b,x,(0,u.Z)(function*(){let V={},se={};C&&("GET"===g?se=C:V={body:JSON.stringify(C)});const Me=(0,j.xO)(Object.assign({key:b.config.apiKey},se)).slice(1),Je=yield b._getAdditionalHeaders();return Je["Content-Type"]="application/json",b.languageCode&&(Je["X-Firebase-Locale"]=b.languageCode),Vn.fetch()(qi(b,b.config.apiHost,y,Me),Object.assign({method:g,headers:Je,referrerPolicy:"no-referrer"},V))}))})).apply(this,arguments)}function so(b,g,y){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,u.Z)(function*(b,g,y){b._canInitEmulator=!1;const C=Object.assign(Object.assign({},on),g);try{const x=new Xr(b),V=yield Promise.race([y(),x.promise]);x.clearNetworkTimeout();const se=yield V.json();if("needConfirmation"in se)throw Bn(b,"account-exists-with-different-credential",se);if(V.ok&&!("errorMessage"in se))return se;{const Me=V.ok?se.errorMessage:se.error.message,[Je,pt]=Me.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Je)throw Bn(b,"credential-already-in-use",se);if("EMAIL_EXISTS"===Je)throw Bn(b,"email-already-in-use",se);if("USER_DISABLED"===Je)throw Bn(b,"user-disabled",se);const Wt=C[Je]||Je.toLowerCase().replace(/[_\s]+/g,"-");if(pt)throw Re(b,Wt,pt);rt(b,Wt)}}catch(x){if(x instanceof j.ZR)throw x;rt(b,"network-request-failed")}})).apply(this,arguments)}function Rn(b,g,y,C){return us.apply(this,arguments)}function us(){return(us=(0,u.Z)(function*(b,g,y,C,x={}){const V=yield Vt(b,g,y,C,x);return"mfaPendingCredential"in V&&rt(b,"multi-factor-auth-required",{_serverResponse:V}),V})).apply(this,arguments)}function qi(b,g,y,C){const x=`${g}${y}?${C}`;return b.config.emulator?bn(b.config,x):`${b.config.apiScheme}://${x}`}class Xr{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((y,C)=>{this.timer=setTimeout(()=>C(Fe(this.auth,"network-request-failed")),en.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Bn(b,g,y){const C={appName:b.name};y.email&&(C.email=y.email),y.phoneNumber&&(C.phoneNumber=y.phoneNumber);const x=Fe(b,g,C);return x.customData._tokenResponse=y,x}function Ki(){return(Ki=(0,u.Z)(function*(b,g){return Vt(b,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function it(b,g){return gr.apply(this,arguments)}function gr(){return(gr=(0,u.Z)(function*(b,g){return Vt(b,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Un(b,g){return gn.apply(this,arguments)}function gn(){return(gn=(0,u.Z)(function*(b,g){return Vt(b,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function _r(b){if(b)try{const g=new Date(Number(b));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function Sn(){return(Sn=(0,u.Z)(function*(b,g=!1){const y=(0,j.m9)(b),C=yield y.getIdToken(g),x=ht(C);ae(x&&x.exp&&x.auth_time&&x.iat,y.auth,"internal-error");const V="object"==typeof x.firebase?x.firebase:void 0,se=V?.sign_in_provider;return{claims:x,token:C,authTime:_r(wn(x.auth_time)),issuedAtTime:_r(wn(x.iat)),expirationTime:_r(wn(x.exp)),signInProvider:se||null,signInSecondFactor:V?.sign_in_second_factor||null}})).apply(this,arguments)}function wn(b){return 1e3*Number(b)}function ht(b){var g;const[y,C,x]=b.split(".");if(void 0===y||void 0===C||void 0===x)return nt("JWT malformed, contained fewer than 3 sections"),null;try{const V=(0,j.tV)(C);return V?JSON.parse(V):(nt("Failed to decode base64 JWT payload"),null)}catch(V){return nt("Caught error parsing JWT payload as JSON",null===(g=V)||void 0===g?void 0:g.toString()),null}}function kt(b,g){return qr.apply(this,arguments)}function qr(){return(qr=(0,u.Z)(function*(b,g,y=!1){if(y)return g;try{return yield g}catch(C){throw C instanceof j.ZR&&yr(C)&&b.auth.currentUser===b&&(yield b.auth.signOut()),C}})).apply(this,arguments)}function yr({code:b}){return"auth/user-disabled"===b||"auth/user-token-expired"===b}class Dr{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var y;if(g){const C=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),C}{this.errorBackoff=3e4;const x=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(g=!1){var y=this;if(!this.isRunning)return;const C=this.getInterval(g);this.timerId=setTimeout((0,u.Z)(function*(){yield y.iteration()}),C)}iteration(){var g=this;return(0,u.Z)(function*(){var y;try{yield g.user.getIdToken(!0)}catch(C){return void("auth/network-request-failed"===(null===(y=C)||void 0===y?void 0:y.code)&&g.schedule(!0))}g.schedule()})()}}class Tt{constructor(g,y){this.createdAt=g,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=_r(this.lastLoginAt),this.creationTime=_r(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Br(b){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,u.Z)(function*(b){var g;const y=b.auth,C=yield b.getIdToken(),x=yield kt(b,Un(y,{idToken:C}));ae(x?.users.length,y,"internal-error");const V=x.users[0];b._notifyReloadListener(V);const se=null!==(g=V.providerUserInfo)&&void 0!==g&&g.length?z(V.providerUserInfo):[],Me=J(b.providerData,se),Wt=!!b.isAnonymous&&!(b.email&&V.passwordHash||Me?.length),Fn={uid:V.localId,displayName:V.displayName||null,photoURL:V.photoUrl||null,email:V.email||null,emailVerified:V.emailVerified||!1,phoneNumber:V.phoneNumber||null,tenantId:V.tenantId||null,providerData:Me,metadata:new Tt(V.createdAt,V.lastLoginAt),isAnonymous:Wt};Object.assign(b,Fn)})).apply(this,arguments)}function Kt(){return(Kt=(0,u.Z)(function*(b){const g=(0,j.m9)(b);yield Br(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function J(b,g){return[...b.filter(C=>!g.some(x=>x.providerId===C.providerId)),...g]}function z(b){return b.map(g=>{var{providerId:y}=g,C=(0,ce._T)(g,["providerId"]);return{providerId:y,uid:C.rawId||"",displayName:C.displayName||null,email:C.email||null,phoneNumber:C.phoneNumber||null,photoURL:C.photoUrl||null}})}function Y(){return(Y=(0,u.Z)(function*(b,g){const y=yield so(b,{},(0,u.Z)(function*(){const C=(0,j.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:x,apiKey:V}=b.config,se=qi(b,x,"/v1/token",`key=${V}`),Me=yield b._getAdditionalHeaders();return Me["Content-Type"]="application/x-www-form-urlencoded",Vn.fetch()(se,{method:"POST",headers:Me,body:C})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class Q{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){ae(g.idToken,"internal-error"),ae(typeof g.idToken<"u","internal-error"),ae(typeof g.refreshToken<"u","internal-error");const y="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function ft(b){const g=ht(b);return ae(g,"internal-error"),ae(typeof g.exp<"u","internal-error"),ae(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,y)}getToken(g,y=!1){var C=this;return(0,u.Z)(function*(){return ae(!C.accessToken||C.refreshToken,g,"user-token-expired"),y||!C.accessToken||C.isExpired?C.refreshToken?(yield C.refresh(g,C.refreshToken),C.accessToken):null:C.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,y){var C=this;return(0,u.Z)(function*(){const{accessToken:x,refreshToken:V,expiresIn:se}=yield function $(b,g){return Y.apply(this,arguments)}(g,y);C.updateTokensAndExpiration(x,V,Number(se))})()}updateTokensAndExpiration(g,y,C){this.refreshToken=y||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*C}static fromJSON(g,y){const{refreshToken:C,accessToken:x,expirationTime:V}=y,se=new Q;return C&&(ae("string"==typeof C,"internal-error",{appName:g}),se.refreshToken=C),x&&(ae("string"==typeof x,"internal-error",{appName:g}),se.accessToken=x),V&&(ae("number"==typeof V,"internal-error",{appName:g}),se.expirationTime=V),se}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Q,this.toJSON())}_performRefresh(){return fe("not implemented")}}function Te(b,g){ae("string"==typeof b||typeof b>"u","internal-error",{appName:g})}class ze{constructor(g){var{uid:y,auth:C,stsTokenManager:x}=g,V=(0,ce._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Dr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=C,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=V.displayName||null,this.email=V.email||null,this.emailVerified=V.emailVerified||!1,this.phoneNumber=V.phoneNumber||null,this.photoURL=V.photoURL||null,this.isAnonymous=V.isAnonymous||!1,this.tenantId=V.tenantId||null,this.providerData=V.providerData?[...V.providerData]:[],this.metadata=new Tt(V.createdAt||void 0,V.lastLoginAt||void 0)}getIdToken(g){var y=this;return(0,u.Z)(function*(){const C=yield kt(y,y.stsTokenManager.getToken(y.auth,g));return ae(C,y.auth,"internal-error"),y.accessToken!==C&&(y.accessToken=C,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),C})()}getIdTokenResult(g){return function Dn(b){return Sn.apply(this,arguments)}(this,g)}reload(){return function Jr(b){return Kt.apply(this,arguments)}(this)}_assign(g){this!==g&&(ae(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(y=>Object.assign({},y)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new ze(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,y=!1){var C=this;return(0,u.Z)(function*(){let x=!1;g.idToken&&g.idToken!==C.stsTokenManager.accessToken&&(C.stsTokenManager.updateFromServerResponse(g),x=!0),y&&(yield Br(C)),yield C.auth._persistUserIfCurrent(C),x&&C.auth._notifyListenersIfCurrent(C)})()}delete(){var g=this;return(0,u.Z)(function*(){const y=yield g.getIdToken();return yield kt(g,function Ri(b,g){return Ki.apply(this,arguments)}(g.auth,{idToken:y})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,y){var C,x,V,se,Me,Je,pt,Wt;const Fn=null!==(C=y.displayName)&&void 0!==C?C:void 0,Ks=null!==(x=y.email)&&void 0!==x?x:void 0,uc=null!==(V=y.phoneNumber)&&void 0!==V?V:void 0,om=null!==(se=y.photoURL)&&void 0!==se?se:void 0,aE=null!==(Me=y.tenantId)&&void 0!==Me?Me:void 0,md=null!==(Je=y._redirectEventId)&&void 0!==Je?Je:void 0,Kh=null!==(pt=y.createdAt)&&void 0!==pt?pt:void 0,Zh=null!==(Wt=y.lastLoginAt)&&void 0!==Wt?Wt:void 0,{uid:Q_,emailVerified:lE,isAnonymous:am,providerData:lm,stsTokenManager:X_}=y;ae(Q_&&X_,g,"internal-error");const cE=Q.fromJSON(this.name,X_);ae("string"==typeof Q_,g,"internal-error"),Te(Fn,g.name),Te(Ks,g.name),ae("boolean"==typeof lE,g,"internal-error"),ae("boolean"==typeof am,g,"internal-error"),Te(uc,g.name),Te(om,g.name),Te(aE,g.name),Te(md,g.name),Te(Kh,g.name),Te(Zh,g.name);const cm=new ze({uid:Q_,auth:g,email:Ks,emailVerified:lE,displayName:Fn,isAnonymous:am,photoURL:om,phoneNumber:uc,tenantId:aE,stsTokenManager:cE,createdAt:Kh,lastLoginAt:Zh});return lm&&Array.isArray(lm)&&(cm.providerData=lm.map(J_=>Object.assign({},J_))),md&&(cm._redirectEventId=md),cm}static _fromIdTokenResponse(g,y,C=!1){return(0,u.Z)(function*(){const x=new Q;x.updateFromServerResponse(y);const V=new ze({uid:y.localId,auth:g,stsTokenManager:x,isAnonymous:C});return yield Br(V),V})()}}const hn=(()=>{class b{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,u.Z)(function*(){return!0})()}_set(y,C){var x=this;return(0,u.Z)(function*(){x.storage[y]=C})()}_get(y){var C=this;return(0,u.Z)(function*(){const x=C.storage[y];return void 0===x?null:x})()}_remove(y){var C=this;return(0,u.Z)(function*(){delete C.storage[y]})()}_addListener(y,C){}_removeListener(y,C){}}return b.type="NONE",b})();function dn(b,g,y){return`firebase:${b}:${g}:${y}`}class Jn{constructor(g,y,C){this.persistence=g,this.auth=y,this.userKey=C;const{config:x,name:V}=this.auth;this.fullUserKey=dn(this.userKey,x.apiKey,V),this.fullPersistenceKey=dn("persistence",x.apiKey,V),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,u.Z)(function*(){const y=yield g.persistence._get(g.fullUserKey);return y?ze._fromJSON(g.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var y=this;return(0,u.Z)(function*(){if(y.persistence===g)return;const C=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=g,C?y.setCurrentUser(C):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,y,C="authUser"){return(0,u.Z)(function*(){if(!y.length)return new Jn(re(hn),g,C);const x=(yield Promise.all(y.map(function(){var pt=(0,u.Z)(function*(Wt){if(yield Wt._isAvailable())return Wt});return function(Wt){return pt.apply(this,arguments)}}()))).filter(pt=>pt);let V=x[0]||re(hn);const se=dn(C,g.config.apiKey,g.name);let Me=null;for(const pt of y)try{const Wt=yield pt._get(se);if(Wt){const Fn=ze._fromJSON(g,Wt);pt!==V&&(Me=Fn),V=pt;break}}catch{}const Je=x.filter(pt=>pt._shouldAllowMigration);return V._shouldAllowMigration&&Je.length?(V=Je[0],Me&&(yield V._set(se,Me.toJSON())),yield Promise.all(y.map(function(){var pt=(0,u.Z)(function*(Wt){if(Wt!==V)try{yield Wt._remove(se)}catch{}});return function(Wt){return pt.apply(this,arguments)}}())),new Jn(V,g,C)):new Jn(V,g,C)})()}}function ie(b){const g=b.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Ke(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(G(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(It(g))return"Blackberry";if(Le(g))return"Webos";if(W(g))return"Safari";if((g.includes("chrome/")||Ce(g))&&!g.includes("edge/"))return"Chrome";if(yt(g))return"Android";{const C=b.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===C?.length)return C[1]}return"Other"}function G(b=(0,j.z$)()){return/firefox\//i.test(b)}function W(b=(0,j.z$)()){const g=b.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function Ce(b=(0,j.z$)()){return/crios\//i.test(b)}function Ke(b=(0,j.z$)()){return/iemobile/i.test(b)}function yt(b=(0,j.z$)()){return/android/i.test(b)}function It(b=(0,j.z$)()){return/blackberry/i.test(b)}function Le(b=(0,j.z$)()){return/webos/i.test(b)}function ot(b=(0,j.z$)()){return/iphone|ipad|ipod/i.test(b)||/macintosh/i.test(b)&&/mobile/i.test(b)}function Qt(b=(0,j.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(b)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(b)}function _n(b=(0,j.z$)()){return ot(b)||yt(b)||Le(b)||It(b)||/windows phone/i.test(b)||Ke(b)}function Mn(b,g=[]){let y;switch(b){case"Browser":y=ie((0,j.z$)());break;case"Worker":y=`${ie((0,j.z$)())}-${b}`;break;default:y=b}const C=g.length?g.join(","):"FirebaseCore-web";return`${y}/JsCore/${N.SDK_VERSION}/${C}`}class oo{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,y){const C=V=>new Promise((se,Me)=>{try{se(g(V))}catch(Je){Me(Je)}});C.onAbort=y,this.queue.push(C);const x=this.queue.length-1;return()=>{this.queue[x]=()=>Promise.resolve()}}runMiddleware(g){var y=this;return(0,u.Z)(function*(){var C;if(y.auth.currentUser===g)return;const x=[];try{for(const V of y.queue)yield V(g),V.onAbort&&x.push(V.onAbort)}catch(V){x.reverse();for(const se of x)try{se()}catch{}throw y.auth._errorFactory.create("login-blocked",{originalMessage:null===(C=V)||void 0===C?void 0:C.message})}})()}}class ao{constructor(g,y,C){this.app=g,this.heartbeatServiceProvider=y,this.config=C,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lo(this),this.idTokenSubscription=new lo(this),this.beforeStateQueue=new oo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=at,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=C.sdkClientVersion}_initializeWithPersistence(g,y){var C=this;return y&&(this._popupRedirectResolver=re(y)),this._initializationPromise=this.queue((0,u.Z)(function*(){var x,V;if(!C._deleted&&(C.persistenceManager=yield Jn.create(C,g),!C._deleted)){if(null!==(x=C._popupRedirectResolver)&&void 0!==x&&x._shouldInitProactively)try{yield C._popupRedirectResolver._initialize(C)}catch{}yield C.initializeCurrentUser(y),C.lastNotifiedUid=(null===(V=C.currentUser)||void 0===V?void 0:V.uid)||null,!C._deleted&&(C._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,u.Z)(function*(){if(g._deleted)return;const y=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||y){if(g.currentUser&&y&&g.currentUser.uid===y.uid)return g._currentUser._assign(y),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(y,!0)}})()}initializeCurrentUser(g){var y=this;return(0,u.Z)(function*(){var C;const x=yield y.assertedPersistence.getCurrentUser();let V=x,se=!1;if(g&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const Me=null===(C=y.redirectUser)||void 0===C?void 0:C._redirectEventId,Je=V?._redirectEventId,pt=yield y.tryRedirectSignIn(g);(!Me||Me===Je)&&pt?.user&&(V=pt.user,se=!0)}if(!V)return y.directlySetCurrentUser(null);if(!V._redirectEventId){if(se)try{yield y.beforeStateQueue.runMiddleware(V)}catch(Me){V=x,y._popupRedirectResolver._overrideRedirectResult(y,()=>Promise.reject(Me))}return V?y.reloadAndSetCurrentUserOrClear(V):y.directlySetCurrentUser(null)}return ae(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===V._redirectEventId?y.directlySetCurrentUser(V):y.reloadAndSetCurrentUserOrClear(V)})()}tryRedirectSignIn(g){var y=this;return(0,u.Z)(function*(){let C=null;try{C=yield y._popupRedirectResolver._completeRedirectFn(y,g,!0)}catch{yield y._setRedirectUser(null)}return C})()}reloadAndSetCurrentUserOrClear(g){var y=this;return(0,u.Z)(function*(){var C;try{yield Br(g)}catch(x){if("auth/network-request-failed"!==(null===(C=x)||void 0===C?void 0:C.code))return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function Gt(){if(typeof navigator>"u")return null;const b=navigator;return b.languages&&b.languages[0]||b.language||null}()}_delete(){var g=this;return(0,u.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var y=this;return(0,u.Z)(function*(){const C=g?(0,j.m9)(g):null;return C&&ae(C.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(C&&C._clone(y))})()}_updateCurrentUser(g,y=!1){var C=this;return(0,u.Z)(function*(){if(!C._deleted)return g&&ae(C.tenantId===g.tenantId,C,"tenant-id-mismatch"),y||(yield C.beforeStateQueue.runMiddleware(g)),C.queue((0,u.Z)(function*(){yield C.directlySetCurrentUser(g),C.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,u.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var y=this;return this.queue((0,u.Z)(function*(){yield y.assertedPersistence.setPersistence(re(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new j.LL("auth","Firebase",g())}onAuthStateChanged(g,y,C){return this.registerStateListener(this.authStateSubscription,g,y,C)}beforeAuthStateChanged(g,y){return this.beforeStateQueue.pushCallback(g,y)}onIdTokenChanged(g,y,C){return this.registerStateListener(this.idTokenSubscription,g,y,C)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,y){var C=this;return(0,u.Z)(function*(){const x=yield C.getOrInitRedirectPersistenceManager(y);return null===g?x.removeCurrentUser():x.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var y=this;return(0,u.Z)(function*(){if(!y.redirectPersistenceManager){const C=g&&re(g)||y._popupRedirectResolver;ae(C,y,"argument-error"),y.redirectPersistenceManager=yield Jn.create(y,[re(C._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(g){var y=this;return(0,u.Z)(function*(){var C,x;return y._isInitialized&&(yield y.queue((0,u.Z)(function*(){}))),(null===(C=y._currentUser)||void 0===C?void 0:C._redirectEventId)===g?y._currentUser:(null===(x=y.redirectUser)||void 0===x?void 0:x._redirectEventId)===g?y.redirectUser:null})()}_persistUserIfCurrent(g){var y=this;return(0,u.Z)(function*(){if(g===y.currentUser)return y.queue((0,u.Z)(function*(){return y.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const C=null!==(y=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==C&&(this.lastNotifiedUid=C,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,y,C,x){if(this._deleted)return()=>{};const V="function"==typeof y?y:y.next.bind(y),se=this._isInitialized?Promise.resolve():this._initializationPromise;return ae(se,this,"internal-error"),se.then(()=>V(this.currentUser)),"function"==typeof y?g.addObserver(y,C,x):g.addObserver(y)}directlySetCurrentUser(g){var y=this;return(0,u.Z)(function*(){y.currentUser&&y.currentUser!==g&&y._currentUser._stopProactiveRefresh(),g&&y.isProactiveRefreshEnabled&&g._startProactiveRefresh(),y.currentUser=g,g?yield y.assertedPersistence.setCurrentUser(g):yield y.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Mn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,u.Z)(function*(){var y;const C={"X-Client-Version":g.clientVersion};g.app.options.appId&&(C["X-Firebase-gmpid"]=g.app.options.appId);const x=yield null===(y=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();return x&&(C["X-Firebase-Client"]=x),C})()}}function vt(b){return(0,j.m9)(b)}class lo{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,j.ne)(y=>this.observer=y)}get next(){return ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function qo(b,g,y){const C=vt(b);ae(C._canInitEmulator,C,"emulator-config-failed"),ae(/^https?:\/\//.test(g),C,"invalid-emulator-scheme");const x=!!y?.disableWarnings,V=Ul(g),{host:se,port:Me}=function hs(b){const g=Ul(b),y=/(\/\/)?([^?#/]+)/.exec(b.substr(g.length));if(!y)return{host:"",port:null};const C=y[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(C);if(x){const V=x[1];return{host:V,port:qn(C.substr(V.length+1))}}{const[V,se]=C.split(":");return{host:V,port:qn(se)}}}(g);C.config.emulator={url:`${V}//${se}${null===Me?"":`:${Me}`}/`},C.settings.appVerificationDisabledForTesting=!0,C.emulatorConfig=Object.freeze({host:se,port:Me,protocol:V.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function co(){function b(){const g=document.createElement("p"),y=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",b):b())}()}function Ul(b){const g=b.indexOf(":");return g<0?"":b.substr(0,g+1)}function qn(b){if(!b)return null;const g=Number(b);return isNaN(g)?null:g}class ei{constructor(g,y){this.providerId=g,this.signInMethod=y}toJSON(){return fe("not implemented")}_getIdTokenResponse(g){return fe("not implemented")}_linkToIdToken(g,y){return fe("not implemented")}_getReauthenticationResolver(g){return fe("not implemented")}}function di(b,g){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,u.Z)(function*(b,g){return Vt(b,"POST","/v1/accounts:resetPassword",zt(b,g))})).apply(this,arguments)}function Hl(b,g){return pn.apply(this,arguments)}function pn(){return(pn=(0,u.Z)(function*(b,g){return Vt(b,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Sh(b,g){return $a.apply(this,arguments)}function $a(){return($a=(0,u.Z)(function*(b,g){return Vt(b,"POST","/v1/accounts:update",zt(b,g))})).apply(this,arguments)}function uo(){return(uo=(0,u.Z)(function*(b,g){return Rn(b,"POST","/v1/accounts:signInWithPassword",zt(b,g))})).apply(this,arguments)}function ho(b,g){return fo.apply(this,arguments)}function fo(){return(fo=(0,u.Z)(function*(b,g){return Vt(b,"POST","/v1/accounts:sendOobCode",zt(b,g))})).apply(this,arguments)}function fs(b,g){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,u.Z)(function*(b,g){return ho(b,g)})).apply(this,arguments)}function Th(b,g){return er.apply(this,arguments)}function er(){return(er=(0,u.Z)(function*(b,g){return ho(b,g)})).apply(this,arguments)}function hi(b,g){return po.apply(this,arguments)}function po(){return(po=(0,u.Z)(function*(b,g){return ho(b,g)})).apply(this,arguments)}function jl(b,g){return za.apply(this,arguments)}function za(){return(za=(0,u.Z)(function*(b,g){return ho(b,g)})).apply(this,arguments)}function Uc(){return(Uc=(0,u.Z)(function*(b,g){return Rn(b,"POST","/v1/accounts:signInWithEmailLink",zt(b,g))})).apply(this,arguments)}function Hc(){return(Hc=(0,u.Z)(function*(b,g){return Rn(b,"POST","/v1/accounts:signInWithEmailLink",zt(b,g))})).apply(this,arguments)}class Wa extends ei{constructor(g,y,C,x=null){super("password",C),this._email=g,this._password=y,this._tenantId=x}static _fromEmailAndPassword(g,y){return new Wa(g,y,"password")}static _fromEmailAndCode(g,y,C=null){return new Wa(g,y,"emailLink",C)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g;if(y?.email&&y?.password){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(g){var y=this;return(0,u.Z)(function*(){switch(y.signInMethod){case"password":return function Ga(b,g){return uo.apply(this,arguments)}(g,{returnSecureToken:!0,email:y._email,password:y._password});case"emailLink":return function ti(b,g){return Uc.apply(this,arguments)}(g,{email:y._email,oobCode:y._password});default:rt(g,"internal-error")}})()}_linkToIdToken(g,y){var C=this;return(0,u.Z)(function*(){switch(C.signInMethod){case"password":return Hl(g,{idToken:y,returnSecureToken:!0,email:C._email,password:C._password});case"emailLink":return function Gp(b,g){return Hc.apply(this,arguments)}(g,{idToken:y,email:C._email,oobCode:C._password});default:rt(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function mo(b,g){return fi.apply(this,arguments)}function fi(){return(fi=(0,u.Z)(function*(b,g){return Rn(b,"POST","/v1/accounts:signInWithIdp",zt(b,g))})).apply(this,arguments)}class ps extends ei{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const y=new ps(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(y.idToken=g.idToken),g.accessToken&&(y.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(y.nonce=g.nonce),g.pendingToken&&(y.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(y.accessToken=g.oauthToken,y.secret=g.oauthTokenSecret):rt("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:C,signInMethod:x}=y,V=(0,ce._T)(y,["providerId","signInMethod"]);if(!C||!x)return null;const se=new ps(C,x);return se.idToken=V.idToken||void 0,se.accessToken=V.accessToken||void 0,se.secret=V.secret,se.nonce=V.nonce,se.pendingToken=V.pendingToken||null,se}_getIdTokenResponse(g){return mo(g,this.buildRequest())}_linkToIdToken(g,y){const C=this.buildRequest();return C.idToken=y,mo(g,C)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,mo(g,y)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),g.postBody=(0,j.xO)(y)}return g}}function Wp(b,g){return ju.apply(this,arguments)}function ju(){return(ju=(0,u.Z)(function*(b,g){return Vt(b,"POST","/v1/accounts:sendVerificationCode",zt(b,g))})).apply(this,arguments)}function qa(){return(qa=(0,u.Z)(function*(b,g){return Rn(b,"POST","/v1/accounts:signInWithPhoneNumber",zt(b,g))})).apply(this,arguments)}function $u(){return($u=(0,u.Z)(function*(b,g){const y=yield Rn(b,"POST","/v1/accounts:signInWithPhoneNumber",zt(b,g));if(y.temporaryProof)throw Bn(b,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const qp={USER_NOT_FOUND:"user-not-found"};function Gu(){return(Gu=(0,u.Z)(function*(b,g){return Rn(b,"POST","/v1/accounts:signInWithPhoneNumber",zt(b,Object.assign(Object.assign({},g),{operation:"REAUTH"})),qp)})).apply(this,arguments)}class Zo extends ei{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,y){return new Zo({verificationId:g,verificationCode:y})}static _fromTokenResponse(g,y){return new Zo({phoneNumber:g,temporaryProof:y})}_getIdTokenResponse(g){return function $l(b,g){return qa.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,y){return function Ko(b,g){return $u.apply(this,arguments)}(g,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function Kp(b,g){return Gu.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:y,verificationId:C,verificationCode:x}=this.params;return g&&y?{temporaryProof:g,phoneNumber:y}:{sessionInfo:C,code:x}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:y,verificationCode:C,phoneNumber:x,temporaryProof:V}=g;return C||y||x||V?new Zo({verificationId:y,verificationCode:C,phoneNumber:x,temporaryProof:V}):null}}class Yo{constructor(g){var y,C,x,V,se,Me;const Je=(0,j.zd)((0,j.pd)(g)),pt=null!==(y=Je.apiKey)&&void 0!==y?y:null,Wt=null!==(C=Je.oobCode)&&void 0!==C?C:null,Fn=function zu(b){switch(b){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=Je.mode)&&void 0!==x?x:null);ae(pt&&Wt&&Fn,"argument-error"),this.apiKey=pt,this.operation=Fn,this.code=Wt,this.continueUrl=null!==(V=Je.continueUrl)&&void 0!==V?V:null,this.languageCode=null!==(se=Je.languageCode)&&void 0!==se?se:null,this.tenantId=null!==(Me=Je.tenantId)&&void 0!==Me?Me:null}static parseLink(g){const y=function Wu(b){const g=(0,j.zd)((0,j.pd)(b)).link,y=g?(0,j.zd)((0,j.pd)(g)).deep_link_id:null,C=(0,j.zd)((0,j.pd)(b)).deep_link_id;return(C?(0,j.zd)((0,j.pd)(C)).link:null)||C||y||g||b}(g);try{return new Yo(y)}catch{return null}}}let Gl=(()=>{class b{constructor(){this.providerId=b.PROVIDER_ID}static credential(y,C){return Wa._fromEmailAndPassword(y,C)}static credentialWithLink(y,C){const x=Yo.parseLink(C);return ae(x,"argument-error"),Wa._fromEmailAndCode(y,x.code,x.tenantId)}}return b.PROVIDER_ID="password",b.EMAIL_PASSWORD_SIGN_IN_METHOD="password",b.EMAIL_LINK_SIGN_IN_METHOD="emailLink",b})();class Sr{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Qo extends Sr{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class Ls extends Qo{static credentialFromJSON(g){const y="string"==typeof g?JSON.parse(g):g;return ae("providerId"in y&&"signInMethod"in y,"argument-error"),ps._fromParams(y)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return ae(g.idToken||g.accessToken,"argument-error"),ps._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return Ls.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return Ls.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:y,oauthAccessToken:C,oauthTokenSecret:x,pendingToken:V,nonce:se,providerId:Me}=g;if(!C&&!x&&!y&&!V||!Me)return null;try{return new Ls(Me)._credential({idToken:y,accessToken:C,nonce:se,pendingToken:V})}catch{return null}}}let qu=(()=>{class b extends Qo{constructor(){super("facebook.com")}static credential(y){return ps._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return b.credential(y.oauthAccessToken)}catch{return null}}}return b.FACEBOOK_SIGN_IN_METHOD="facebook.com",b.PROVIDER_ID="facebook.com",b})(),zl=(()=>{class b extends Qo{constructor(){super("google.com"),this.addScope("profile")}static credential(y,C){return ps._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:C})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:C,oauthAccessToken:x}=y;if(!C&&!x)return null;try{return b.credential(C,x)}catch{return null}}}return b.GOOGLE_SIGN_IN_METHOD="google.com",b.PROVIDER_ID="google.com",b})(),jc=(()=>{class b extends Qo{constructor(){super("github.com")}static credential(y){return ps._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return b.credential(y.oauthAccessToken)}catch{return null}}}return b.GITHUB_SIGN_IN_METHOD="github.com",b.PROVIDER_ID="github.com",b})();class Xo extends ei{constructor(g,y){super(g,g),this.pendingToken=y}_getIdTokenResponse(g){return mo(g,this.buildRequest())}_linkToIdToken(g,y){const C=this.buildRequest();return C.idToken=y,mo(g,C)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,mo(g,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:C,signInMethod:x,pendingToken:V}=y;return C&&x&&V&&C===x?new Xo(C,V):null}static _create(g,y){return new Xo(g,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class pi extends Sr{constructor(g){ae(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return pi.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return pi.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const y=Xo.fromJSON(g);return ae(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:y,providerId:C}=g;if(!y||!C)return null;try{return Xo._create(C,y)}catch{return null}}}let ms=(()=>{class b extends Qo{constructor(){super("twitter.com")}static credential(y,C){return ps._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:C})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:C,oauthTokenSecret:x}=y;if(!C||!x)return null;try{return b.credential(C,x)}catch{return null}}}return b.TWITTER_SIGN_IN_METHOD="twitter.com",b.PROVIDER_ID="twitter.com",b})();function ni(b,g){return go.apply(this,arguments)}function go(){return(go=(0,u.Z)(function*(b,g){return Rn(b,"POST","/v1/accounts:signUp",zt(b,g))})).apply(this,arguments)}class mi{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,y,C,x=!1){return(0,u.Z)(function*(){const V=yield ze._fromIdTokenResponse(g,C,x),se=Jo(C);return new mi({user:V,providerId:se,_tokenResponse:C,operationType:y})})()}static _forOperation(g,y,C){return(0,u.Z)(function*(){yield g._updateTokensIfNecessary(C,!0);const x=Jo(C);return new mi({user:g,providerId:x,_tokenResponse:C,operationType:y})})()}}function Jo(b){return b.providerId?b.providerId:"phoneNumber"in b?"phone":null}function Zp(b){return Gc.apply(this,arguments)}function Gc(){return(Gc=(0,u.Z)(function*(b){var g;const y=vt(b);if(yield y._initializationPromise,null!==(g=y.currentUser)&&void 0!==g&&g.isAnonymous)return new mi({user:y.currentUser,providerId:null,operationType:"signIn"});const C=yield ni(y,{returnSecureToken:!0}),x=yield mi._fromIdTokenResponse(y,"signIn",C,!0);return yield y._updateCurrentUser(x.user),x})).apply(this,arguments)}class Nn extends j.ZR{constructor(g,y,C,x){var V;super(y.code,y.message),this.operationType=C,this.user=x,Object.setPrototypeOf(this,Nn.prototype),this.customData={appName:g.name,tenantId:null!==(V=g.tenantId)&&void 0!==V?V:void 0,_serverResponse:y.customData._serverResponse,operationType:C}}static _fromErrorAndOperation(g,y,C,x){return new Nn(g,y,C,x)}}function Zu(b,g,y,C){return("reauthenticate"===g?y._getReauthenticationResolver(b):y._getIdTokenResponse(b)).catch(V=>{throw"auth/multi-factor-auth-required"===V.code?Nn._fromErrorAndOperation(b,V,g,C):V})}function Ah(b){return new Set(b.map(({providerId:g})=>g).filter(g=>!!g))}function ki(b,g){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,u.Z)(function*(b,g){const y=(0,j.m9)(b);yield Yi(!0,y,g);const{providerUserInfo:C}=yield it(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[g]}),x=Ah(C||[]);return y.providerData=y.providerData.filter(V=>x.has(V.providerId)),x.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y})).apply(this,arguments)}function Wl(b,g){return _o.apply(this,arguments)}function _o(){return(_o=(0,u.Z)(function*(b,g,y=!1){const C=yield kt(b,g._linkToIdToken(b.auth,yield b.getIdToken()),y);return mi._forOperation(b,"link",C)})).apply(this,arguments)}function Yi(b,g,y){return an.apply(this,arguments)}function an(){return(an=(0,u.Z)(function*(b,g,y){yield Br(g);const x=!1===b?"provider-already-linked":"no-such-provider";ae(Ah(g.providerData).has(y)===b,g.auth,x)})).apply(this,arguments)}function ql(b,g){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,u.Z)(function*(b,g,y=!1){var C;const{auth:x}=b,V="reauthenticate";try{const se=yield kt(b,Zu(x,V,g,b),y);ae(se.idToken,x,"internal-error");const Me=ht(se.idToken);ae(Me,x,"internal-error");const{sub:Je}=Me;return ae(b.uid===Je,x,"user-mismatch"),mi._forOperation(b,V,se)}catch(se){throw"auth/user-not-found"===(null===(C=se)||void 0===C?void 0:C.code)&&rt(x,"user-mismatch"),se}})).apply(this,arguments)}function zc(b,g){return gi.apply(this,arguments)}function gi(){return(gi=(0,u.Z)(function*(b,g,y=!1){const C="signIn",x=yield Zu(b,C,g),V=yield mi._fromIdTokenResponse(b,C,x);return y||(yield b._updateCurrentUser(V.user)),V})).apply(this,arguments)}function Ka(b,g){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,u.Z)(function*(b,g){return zc(vt(b),g)})).apply(this,arguments)}function Rt(b,g){return Za.apply(this,arguments)}function Za(){return(Za=(0,u.Z)(function*(b,g){const y=(0,j.m9)(b);return yield Yi(!1,y,g.providerId),Wl(y,g)})).apply(this,arguments)}function Yp(b,g){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,u.Z)(function*(b,g){return ql((0,j.m9)(b),g)})).apply(this,arguments)}function Yu(b,g){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,u.Z)(function*(b,g){return Rn(b,"POST","/v1/accounts:signInWithCustomToken",zt(b,g))})).apply(this,arguments)}function yo(b,g){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,u.Z)(function*(b,g){const y=vt(b),C=yield Yu(y,{token:g,returnSecureToken:!0}),x=yield mi._fromIdTokenResponse(y,"signIn",C);return yield y._updateCurrentUser(x.user),x})).apply(this,arguments)}class ea{constructor(g,y){this.factorId=g,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(g,y){return"phoneInfo"in y?ke._fromServerResponse(g,y):rt(g,"internal-error")}}class ke extends ea{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,y){return new ke(y)}}function Zt(b,g,y){var C;ae((null===(C=y.url)||void 0===C?void 0:C.length)>0,b,"invalid-continue-uri"),ae(typeof y.dynamicLinkDomain>"u"||y.dynamicLinkDomain.length>0,b,"invalid-dynamic-link-domain"),g.continueUrl=y.url,g.dynamicLinkDomain=y.dynamicLinkDomain,g.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(ae(y.iOS.bundleId.length>0,b,"missing-ios-bundle-id"),g.iOSBundleId=y.iOS.bundleId),y.android&&(ae(y.android.packageName.length>0,b,"missing-android-pkg-name"),g.androidInstallApp=y.android.installApp,g.androidMinimumVersionCode=y.android.minimumVersion,g.androidPackageName=y.android.packageName)}function Mh(b,g,y){return ta.apply(this,arguments)}function ta(){return(ta=(0,u.Z)(function*(b,g,y){const C=(0,j.m9)(b),x={requestType:"PASSWORD_RESET",email:g};y&&Zt(C,x,y),yield Th(C,x)})).apply(this,arguments)}function tr(b,g,y){return na.apply(this,arguments)}function na(){return(na=(0,u.Z)(function*(b,g,y){yield di((0,j.m9)(b),{oobCode:g,newPassword:y})})).apply(this,arguments)}function Kl(b,g){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,u.Z)(function*(b,g){yield Sh((0,j.m9)(b),{oobCode:g})})).apply(this,arguments)}function Zl(b,g){return ra.apply(this,arguments)}function ra(){return(ra=(0,u.Z)(function*(b,g){const y=(0,j.m9)(b),C=yield di(y,{oobCode:g}),x=C.requestType;switch(ae(x,y,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ae(C.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ae(C.mfaInfo,y,"internal-error");default:ae(C.email,y,"internal-error")}let V=null;return C.mfaInfo&&(V=ea._fromServerResponse(vt(y),C.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.newEmail:C.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.email:C.newEmail)||null,multiFactorInfo:V},operation:x}})).apply(this,arguments)}function xh(b,g){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,u.Z)(function*(b,g){const{data:y}=yield Zl((0,j.m9)(b),g);return y.email})).apply(this,arguments)}function Qp(b,g,y){return gs.apply(this,arguments)}function gs(){return(gs=(0,u.Z)(function*(b,g,y){const C=vt(b),x=yield ni(C,{returnSecureToken:!0,email:g,password:y}),V=yield mi._fromIdTokenResponse(C,"signIn",x);return yield C._updateCurrentUser(V.user),V})).apply(this,arguments)}function nr(b,g,y){return Ka((0,j.m9)(b),Gl.credential(g,y))}function Qi(b,g,y){return el.apply(this,arguments)}function el(){return(el=(0,u.Z)(function*(b,g,y){const C=(0,j.m9)(b),x={requestType:"EMAIL_SIGNIN",email:g};ae(y.handleCodeInApp,C,"argument-error"),y&&Zt(C,x,y),yield hi(C,x)})).apply(this,arguments)}function tl(b,g){return"EMAIL_SIGNIN"===Yo.parseLink(g)?.operation}function _s(b,g,y){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,u.Z)(function*(b,g,y){const C=(0,j.m9)(b),x=Gl.credentialWithLink(g,y||Ue());return ae(x._tenantId===(C.tenantId||null),C,"tenant-id-mismatch"),Ka(C,x)})).apply(this,arguments)}function Wc(b,g){return Xu.apply(this,arguments)}function Xu(){return(Xu=(0,u.Z)(function*(b,g){return Vt(b,"POST","/v1/accounts:createAuthUri",zt(b,g))})).apply(this,arguments)}function Rh(b,g){return ia.apply(this,arguments)}function ia(){return(ia=(0,u.Z)(function*(b,g){const C={identifier:g,continueUri:He()?Ue():"http://localhost"},{signinMethods:x}=yield Wc((0,j.m9)(b),C);return x||[]})).apply(this,arguments)}function qc(b,g){return nl.apply(this,arguments)}function nl(){return(nl=(0,u.Z)(function*(b,g){const y=(0,j.m9)(b),x={requestType:"VERIFY_EMAIL",idToken:yield b.getIdToken()};g&&Zt(y.auth,x,g);const{email:V}=yield fs(y.auth,x);V!==b.email&&(yield b.reload())})).apply(this,arguments)}function Kc(b,g,y){return rl.apply(this,arguments)}function rl(){return(rl=(0,u.Z)(function*(b,g,y){const C=(0,j.m9)(b),V={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield b.getIdToken(),newEmail:g};y&&Zt(C.auth,V,y);const{email:se}=yield jl(C.auth,V);se!==b.email&&(yield b.reload())})).apply(this,arguments)}function Ju(b,g){return sa.apply(this,arguments)}function sa(){return(sa=(0,u.Z)(function*(b,g){return Vt(b,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function kh(b,g){return il.apply(this,arguments)}function il(){return(il=(0,u.Z)(function*(b,{displayName:g,photoURL:y}){if(void 0===g&&void 0===y)return;const C=(0,j.m9)(b),V={idToken:yield C.getIdToken(),displayName:g,photoUrl:y,returnSecureToken:!0},se=yield kt(C,Ju(C.auth,V));C.displayName=se.displayName||null,C.photoURL=se.photoUrl||null;const Me=C.providerData.find(({providerId:Je})=>"password"===Je);Me&&(Me.displayName=C.displayName,Me.photoURL=C.photoURL),yield C._updateTokensIfNecessary(se)})).apply(this,arguments)}function Oh(b,g){return Bs((0,j.m9)(b),g,null)}function ed(b,g){return Bs((0,j.m9)(b),null,g)}function Bs(b,g,y){return Us.apply(this,arguments)}function Us(){return(Us=(0,u.Z)(function*(b,g,y){const{auth:C}=b,V={idToken:yield b.getIdToken(),returnSecureToken:!0};g&&(V.email=g),y&&(V.password=y);const se=yield kt(b,Hl(C,V));yield b._updateTokensIfNecessary(se,!0)})).apply(this,arguments)}class On{constructor(g,y,C={}){this.isNewUser=g,this.providerId=y,this.profile=C}}class ys extends On{constructor(g,y,C,x){super(g,y,C),this.username=x}}class Pn extends On{constructor(g,y){super(g,"facebook.com",y)}}class Zc extends ys{constructor(g,y){super(g,"github.com",y,"string"==typeof y?.login?y?.login:null)}}class Yc extends On{constructor(g,y){super(g,"google.com",y)}}class Ph extends ys{constructor(g,y,C){super(g,"twitter.com",y,C)}}function Qc(b){const{user:g,_tokenResponse:y}=b;return g.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function td(b){var g,y;if(!b)return null;const{providerId:C}=b,x=b.rawUserInfo?JSON.parse(b.rawUserInfo):{},V=b.isNewUser||"identitytoolkit#SignupNewUserResponse"===b.kind;if(!C&&b?.idToken){const se=null===(y=null===(g=ht(b.idToken))||void 0===g?void 0:g.firebase)||void 0===y?void 0:y.sign_in_provider;if(se)return new On(V,"anonymous"!==se&&"custom"!==se?se:null)}if(!C)return null;switch(C){case"facebook.com":return new Pn(V,x);case"github.com":return new Zc(V,x);case"google.com":return new Yc(V,x);case"twitter.com":return new Ph(V,x,b.screenName||null);case"custom":case"anonymous":return new On(V,null);default:return new On(V,C,x)}}(y)}class _i{constructor(g,y){this.type=g,this.credential=y}static _fromIdtoken(g){return new _i("enroll",g)}static _fromMfaPendingCredential(g){return new _i("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var y,C;if(g?.multiFactorSession){if(null!==(y=g.multiFactorSession)&&void 0!==y&&y.pendingCredential)return _i._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(C=g.multiFactorSession)&&void 0!==C&&C.idToken)return _i._fromIdtoken(g.multiFactorSession.idToken)}return null}}class eu{constructor(g,y,C){this.session=g,this.hints=y,this.signInResolver=C}static _fromError(g,y){const C=vt(g),x=y.customData._serverResponse,V=(x.mfaInfo||[]).map(Me=>ea._fromServerResponse(C,Me));ae(x.mfaPendingCredential,C,"internal-error");const se=_i._fromMfaPendingCredential(x.mfaPendingCredential);return new eu(se,V,function(){var Me=(0,u.Z)(function*(Je){const pt=yield Je._process(C,se);delete x.mfaInfo,delete x.mfaPendingCredential;const Wt=Object.assign(Object.assign({},x),{idToken:pt.idToken,refreshToken:pt.refreshToken});switch(y.operationType){case"signIn":const Fn=yield mi._fromIdTokenResponse(C,y.operationType,Wt);return yield C._updateCurrentUser(Fn.user),Fn;case"reauthenticate":return ae(y.user,C,"internal-error"),mi._forOperation(y.user,y.operationType,Wt);default:rt(C,"internal-error")}});return function(Je){return Me.apply(this,arguments)}}())}resolveSignIn(g){var y=this;return(0,u.Z)(function*(){return y.signInResolver(g)})()}}function sd(b,g){var y;const C=(0,j.m9)(b),x=g;return ae(g.customData.operationType,C,"argument-error"),ae(null===(y=x.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,C,"argument-error"),eu._fromError(C,x)}function jn(b,g){return Vt(b,"POST","/v2/accounts/mfaEnrollment:start",zt(b,g))}class Xl{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(C=>ea._fromServerResponse(g.auth,C)))})}static _fromUser(g){return new Xl(g)}getSession(){var g=this;return(0,u.Z)(function*(){return _i._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,y){var C=this;return(0,u.Z)(function*(){const x=g,V=yield C.getSession(),se=yield kt(C.user,x._process(C.user.auth,V,y));return yield C.user._updateTokensIfNecessary(se),C.user.reload()})()}unenroll(g){var y=this;return(0,u.Z)(function*(){var C;const x="string"==typeof g?g:g.uid,V=yield y.user.getIdToken(),se=yield kt(y.user,function Ql(b,g){return Vt(b,"POST","/v2/accounts/mfaEnrollment:withdraw",zt(b,g))}(y.user.auth,{idToken:V,mfaEnrollmentId:x}));y.enrolledFactors=y.enrolledFactors.filter(({uid:Me})=>Me!==x),yield y.user._updateTokensIfNecessary(se);try{yield y.user.reload()}catch(Me){if("auth/user-token-expired"!==(null===(C=Me)||void 0===C?void 0:C.code))throw Me}})()}}const Nh=new WeakMap;function sl(b){const g=(0,j.m9)(b);return Nh.has(g)||Nh.set(g,Xl._fromUser(g)),Nh.get(g)}const vs="__sak";class ol{constructor(g,y){this.storageRetriever=g,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(vs,"1"),this.storage.removeItem(vs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,y){return this.storage.setItem(g,JSON.stringify(y)),Promise.resolve()}_get(g){const y=this.storage.getItem(g);return Promise.resolve(y?JSON.parse(y):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const rr=(()=>{class b extends ol{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,C)=>this.onStorageEvent(y,C),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function tu(){const b=(0,j.z$)();return W(b)||ot(b)}()&&function ds(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=_n(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const C of Object.keys(this.listeners)){const x=this.storage.getItem(C),V=this.localCache[C];x!==V&&y(C,V,x)}}onStorageEvent(y,C=!1){if(!y.key)return void this.forAllChangedKeys((Me,Je,pt)=>{this.notifyListeners(Me,pt)});const x=y.key;if(C?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Me=this.storage.getItem(x);if(y.newValue!==Me)null!==y.newValue?this.storage.setItem(x,y.newValue):this.storage.removeItem(x);else if(this.localCache[x]===y.newValue&&!C)return}const V=()=>{const Me=this.storage.getItem(x);!C&&this.localCache[x]===Me||this.notifyListeners(x,Me)},se=this.storage.getItem(x);!function Ft(){return(0,j.w1)()&&10===document.documentMode}()||se===y.newValue||y.newValue===y.oldValue?V():setTimeout(V,10)}notifyListeners(y,C){this.localCache[y]=C;const x=this.listeners[y];if(x)for(const V of Array.from(x))V(C&&JSON.parse(C))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,C,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:C,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,C){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(C)}_removeListener(y,C){this.listeners[y]&&(this.listeners[y].delete(C),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,C){var x=()=>super._set,V=this;return(0,u.Z)(function*(){yield x().call(V,y,C),V.localCache[y]=JSON.stringify(C)})()}_get(y){var C=()=>super._get,x=this;return(0,u.Z)(function*(){const V=yield C().call(x,y);return x.localCache[y]=JSON.stringify(V),V})()}_remove(y){var C=()=>super._remove,x=this;return(0,u.Z)(function*(){yield C().call(x,y),delete x.localCache[y]})()}}return b.type="LOCAL",b})(),Hs=(()=>{class b extends ol{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,C){}_removeListener(y,C){}}return b.type="SESSION",b})();let ll=(()=>{class b{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const C=this.receivers.find(V=>V.isListeningto(y));if(C)return C;const x=new b(y);return this.receivers.push(x),x}isListeningto(y){return this.eventTarget===y}handleEvent(y){var C=this;return(0,u.Z)(function*(){const x=y,{eventId:V,eventType:se,data:Me}=x.data,Je=C.handlersMap[se];if(!Je?.size)return;x.ports[0].postMessage({status:"ack",eventId:V,eventType:se});const pt=Array.from(Je).map(function(){var Fn=(0,u.Z)(function*(Ks){return Ks(x.origin,Me)});return function(Ks){return Fn.apply(this,arguments)}}()),Wt=yield function nu(b){return Promise.all(b.map(function(){var g=(0,u.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(C){return{fulfilled:!1,reason:C}}});return function(y){return g.apply(this,arguments)}}()))}(pt);x.ports[0].postMessage({status:"done",eventId:V,eventType:se,response:Wt})})()}_subscribe(y,C){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(C)}_unsubscribe(y,C){this.handlersMap[y]&&C&&this.handlersMap[y].delete(C),(!C||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return b.receivers=[],b})();function ca(b="",g=10){let y="";for(let C=0;C<g;C++)y+=Math.floor(10*Math.random());return b+y}class Vh{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,y,C=50){var x=this;return(0,u.Z)(function*(){const V=typeof MessageChannel<"u"?new MessageChannel:null;if(!V)throw new Error("connection_unavailable");let se,Me;return new Promise((Je,pt)=>{const Wt=ca("",20);V.port1.start();const Fn=setTimeout(()=>{pt(new Error("unsupported_event"))},C);Me={messageChannel:V,onMessage(Ks){const uc=Ks;if(uc.data.eventId===Wt)switch(uc.data.status){case"ack":clearTimeout(Fn),se=setTimeout(()=>{pt(new Error("timeout"))},3e3);break;case"done":clearTimeout(se),Je(uc.data.response);break;default:clearTimeout(Fn),clearTimeout(se),pt(new Error("invalid_response"))}}},x.handlers.add(Me),V.port1.addEventListener("message",Me.onMessage),x.target.postMessage({eventType:g,eventId:Wt,data:y},[V.port2])}).finally(()=>{Me&&x.removeMessageHandler(Me)})})()}}function $n(){return window}function ri(){return typeof $n().WorkerGlobalScope<"u"&&"function"==typeof $n().importScripts}function bs(){return(bs=(0,u.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const cl="firebaseLocalStorageDb",ul="firebaseLocalStorage",ua="fbase_key";class bo{constructor(g){this.request=g}toPromise(){return new Promise((g,y)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function da(b,g){return b.transaction([ul],g?"readwrite":"readonly").objectStore(ul)}function ec(){const b=indexedDB.open(cl,1);return new Promise((g,y)=>{b.addEventListener("error",()=>{y(b.error)}),b.addEventListener("upgradeneeded",()=>{const C=b.result;try{C.createObjectStore(ul,{keyPath:ua})}catch(x){y(x)}}),b.addEventListener("success",(0,u.Z)(function*(){const C=b.result;C.objectStoreNames.contains(ul)?g(C):(C.close(),yield function cd(){const b=indexedDB.deleteDatabase(cl);return new bo(b).toPromise()}(),g(yield ec()))}))})}function dl(b,g,y){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,u.Z)(function*(b,g,y){const C=da(b,!0).put({[ua]:g,value:y});return new bo(C).toPromise()})).apply(this,arguments)}function ha(){return(ha=(0,u.Z)(function*(b,g){const y=da(b,!1).get(g),C=yield new bo(y).toPromise();return void 0===C?null:C.value})).apply(this,arguments)}function tc(b,g){const y=da(b,!0).delete(g);return new bo(y).toPromise()}const pa=(()=>{class b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,u.Z)(function*(){return y.db||(y.db=yield ec()),y.db})()}_withRetries(y){var C=this;return(0,u.Z)(function*(){let x=0;for(;;)try{const V=yield C._openDb();return yield y(V)}catch(V){if(x++>3)throw V;C.db&&(C.db.close(),C.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,u.Z)(function*(){return ri()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,u.Z)(function*(){y.receiver=ll._getInstance(function Jl(){return ri()?self:null}()),y.receiver._subscribe("keyChanged",function(){var C=(0,u.Z)(function*(x,V){return{keyProcessed:(yield y._poll()).includes(V.key)}});return function(x,V){return C.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var C=(0,u.Z)(function*(x,V){return["keyChanged"]});return function(x,V){return C.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,u.Z)(function*(){var C,x;if(y.activeServiceWorker=yield function ld(){return bs.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new Vh(y.activeServiceWorker);const V=yield y.sender._send("ping",{},800);!V||(null===(C=V[0])||void 0===C?void 0:C.fulfilled)&&(null===(x=V[0])||void 0===x?void 0:x.value.includes("keyChanged"))&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var C=this;return(0,u.Z)(function*(){if(C.sender&&C.activeServiceWorker&&function ru(){var b;return(null===(b=navigator?.serviceWorker)||void 0===b?void 0:b.controller)||null}()===C.activeServiceWorker)try{yield C.sender._send("keyChanged",{key:y},C.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,u.Z)(function*(){try{if(!indexedDB)return!1;const y=yield ec();return yield dl(y,vs,"1"),yield tc(y,vs),!0}catch{}return!1})()}_withPendingWrite(y){var C=this;return(0,u.Z)(function*(){C.pendingWrites++;try{yield y()}finally{C.pendingWrites--}})()}_set(y,C){var x=this;return(0,u.Z)(function*(){return x._withPendingWrite((0,u.Z)(function*(){return yield x._withRetries(V=>dl(V,y,C)),x.localCache[y]=C,x.notifyServiceWorker(y)}))})()}_get(y){var C=this;return(0,u.Z)(function*(){const x=yield C._withRetries(V=>function Bh(b,g){return ha.apply(this,arguments)}(V,y));return C.localCache[y]=x,x})()}_remove(y){var C=this;return(0,u.Z)(function*(){return C._withPendingWrite((0,u.Z)(function*(){return yield C._withRetries(x=>tc(x,y)),delete C.localCache[y],C.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,u.Z)(function*(){const C=yield y._withRetries(se=>{const Me=da(se,!1).getAll();return new bo(Me).toPromise()});if(!C)return[];if(0!==y.pendingWrites)return[];const x=[],V=new Set;for(const{fbase_key:se,value:Me}of C)V.add(se),JSON.stringify(y.localCache[se])!==JSON.stringify(Me)&&(y.notifyListeners(se,Me),x.push(se));for(const se of Object.keys(y.localCache))y.localCache[se]&&!V.has(se)&&(y.notifyListeners(se,null),x.push(se));return x})()}notifyListeners(y,C){this.localCache[y]=C;const x=this.listeners[y];if(x)for(const V of Array.from(x))V(C)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,u.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,C){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(C)}_removeListener(y,C){this.listeners[y]&&(this.listeners[y].delete(C),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return b.type="LOCAL",b})();function Uh(b,g){return Vt(b,"POST","/v2/accounts/mfaSignIn:start",zt(b,g))}function Ur(){return(Ur=(0,u.Z)(function*(b){return(yield Vt(b,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function wo(b){return new Promise((g,y)=>{const C=document.createElement("script");C.setAttribute("src",b),C.onload=g,C.onerror=x=>{const V=Fe("internal-error");V.customData=x,y(V)},C.type="text/javascript",C.charset="UTF-8",function ga(){var b,g;return null!==(g=null===(b=document.getElementsByTagName("head"))||void 0===b?void 0:b[0])&&void 0!==g?g:document}().appendChild(C)})}function _a(b){return`__${b}${Math.floor(1e6*Math.random())}`}const Ji=1e12;class ud{constructor(g){this.auth=g,this.counter=Ji,this._widgets=new Map}render(g,y){const C=this.counter;return this._widgets.set(C,new An(g,this.auth.name,y||{})),this.counter++,C}reset(g){var y;const C=g||Ji;null===(y=this._widgets.get(C))||void 0===y||y.delete(),this._widgets.delete(C)}getResponse(g){var y;return(null===(y=this._widgets.get(g||Ji))||void 0===y?void 0:y.getResponse())||""}execute(g){var y=this;return(0,u.Z)(function*(){var C;return null===(C=y._widgets.get(g||Ji))||void 0===C||C.execute(),""})()}}class An{constructor(g,y,C){this.params=C,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof g?document.getElementById(g):g;ae(x,"argument-error",{appName:y}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Xp(b){const g=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let C=0;C<b;C++)g.push(y.charAt(Math.floor(Math.random()*y.length)));return g.join("")}(50);const{callback:g,"expired-callback":y}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Hh=_a("rcb"),q0=new Ze(3e4,6e4);class H_{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=$n().grecaptcha)||void 0===g||!g.render)}load(g,y=""){return ae(function jh(b){return b.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(b)}(y),g,"argument-error"),this.shouldResolveImmediately(y)?Promise.resolve($n().grecaptcha):new Promise((C,x)=>{const V=$n().setTimeout(()=>{x(Fe(g,"network-request-failed"))},q0.get());$n()[Hh]=()=>{$n().clearTimeout(V),delete $n()[Hh];const Me=$n().grecaptcha;if(!Me)return void x(Fe(g,"internal-error"));const Je=Me.render;Me.render=(pt,Wt)=>{const Fn=Je(pt,Wt);return this.counter++,Fn},this.hostLanguage=y,C(Me)},wo(`https://www.google.com/recaptcha/api.js??${(0,j.xO)({onload:Hh,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(V),x(Fe(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var y;return!(null===(y=$n().grecaptcha)||void 0===y||!y.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class K0{load(g){return(0,u.Z)(function*(){return new ud(g)})()}clearedOneInstance(){}}const $s="recaptcha",j_={theme:"light",type:"image"};class Jp{constructor(g,y=Object.assign({},j_),C){this.parameters=y,this.type=$s,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=vt(C),this.isInvisible="invisible"===this.parameters.size,ae(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof g?document.getElementById(g):g;ae(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new K0:new H_,this.validateStartingState()}verify(){var g=this;return(0,u.Z)(function*(){g.assertNotDestroyed();const y=yield g.render(),C=g.getAssertedRecaptcha();return C.getResponse(y)||new Promise(V=>{const se=Me=>{!Me||(g.tokenChangeListeners.delete(se),V(Me))};g.tokenChangeListeners.add(se),g.isInvisible&&C.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){ae(!this.parameters.sitekey,this.auth,"argument-error"),ae(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ae(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return y=>{if(this.tokenChangeListeners.forEach(C=>C(y)),"function"==typeof g)g(y);else if("string"==typeof g){const C=$n()[g];"function"==typeof C&&C(y)}}}assertNotDestroyed(){ae(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,u.Z)(function*(){if(yield g.init(),!g.widgetId){let y=g.container;if(!g.isInvisible){const C=document.createElement("div");y.appendChild(C),y=C}g.widgetId=g.getAssertedRecaptcha().render(y,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,u.Z)(function*(){ae(He()&&!ri(),g.auth,"internal-error"),yield function vr(){let b=null;return new Promise(g=>{"complete"!==document.readyState?(b=()=>g(),window.addEventListener("load",b)):g()}).catch(g=>{throw b&&window.removeEventListener("load",b),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const y=yield function nc(b){return Ur.apply(this,arguments)}(g.auth);ae(y,g.auth,"internal-error"),g.parameters.sitekey=y})()}getAssertedRecaptcha(){return ae(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Eo{constructor(g,y){this.verificationId=g,this.onConfirmation=y}confirm(g){const y=Zo._fromVerification(this.verificationId,g);return this.onConfirmation(y)}}function ar(b,g,y){return dd.apply(this,arguments)}function dd(){return(dd=(0,u.Z)(function*(b,g,y){const C=vt(b),x=yield Io(C,g,(0,j.m9)(y));return new Eo(x,V=>Ka(C,V))})).apply(this,arguments)}function Co(b,g,y){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,u.Z)(function*(b,g,y){const C=(0,j.m9)(b);yield Yi(!1,C,"phone");const x=yield Io(C.auth,g,(0,j.m9)(y));return new Eo(x,V=>Rt(C,V))})).apply(this,arguments)}function es(b,g,y){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,u.Z)(function*(b,g,y){const C=(0,j.m9)(b),x=yield Io(C.auth,g,(0,j.m9)(y));return new Eo(x,V=>Yp(C,V))})).apply(this,arguments)}function Io(b,g,y){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,u.Z)(function*(b,g,y){var C;const x=yield y.verify();try{let V;if(ae("string"==typeof x,b,"argument-error"),ae(y.type===$s,b,"argument-error"),V="string"==typeof g?{phoneNumber:g}:g,"session"in V){const se=V.session;if("phoneNumber"in V)return ae("enroll"===se.type,b,"internal-error"),(yield jn(b,{idToken:se.credential,phoneEnrollmentInfo:{phoneNumber:V.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{ae("signin"===se.type,b,"internal-error");const Me=(null===(C=V.multiFactorHint)||void 0===C?void 0:C.uid)||V.multiFactorUid;return ae(Me,b,"missing-multi-factor-info"),(yield Uh(b,{mfaPendingCredential:se.credential,mfaEnrollmentId:Me,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:se}=yield Wp(b,{phoneNumber:V.phoneNumber,recaptchaToken:x});return se}}finally{y._reset()}})).apply(this,arguments)}function hl(b,g){return zs.apply(this,arguments)}function zs(){return(zs=(0,u.Z)(function*(b,g){yield Wl((0,j.m9)(b),g)})).apply(this,arguments)}let $h=(()=>{class b{constructor(y){this.providerId=b.PROVIDER_ID,this.auth=vt(y)}verifyPhoneNumber(y,C){return Io(this.auth,y,(0,j.m9)(C))}static credential(y,C){return Zo._fromVerification(y,C)}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:C,temporaryProof:x}=y;return C&&x?Zo._fromTokenResponse(C,x):null}}return b.PROVIDER_ID="phone",b.PHONE_SIGN_IN_METHOD="phone",b})();function fl(b,g){return g?re(g):(ae(b._popupRedirectResolver,b,"argument-error"),b._popupRedirectResolver)}class pl extends ei{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return mo(g,this._buildIdpRequest())}_linkToIdToken(g,y){return mo(g,this._buildIdpRequest(y))}_getReauthenticationResolver(g){return mo(g,this._buildIdpRequest())}_buildIdpRequest(g){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(y.idToken=g),y}}function hd(b){return zc(b.auth,new pl(b),b.bypassAuthState)}function ii(b){const{auth:g,user:y}=b;return ae(y,g,"internal-error"),ql(y,new pl(b),b.bypassAuthState)}function rc(b){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,u.Z)(function*(b){const{auth:g,user:y}=b;return ae(y,g,"internal-error"),Wl(y,new pl(b),b.bypassAuthState)})).apply(this,arguments)}class ml{constructor(g,y,C,x,V=!1){this.auth=g,this.resolver=C,this.user=x,this.bypassAuthState=V,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var g=this;return new Promise(function(){var y=(0,u.Z)(function*(C,x){g.pendingPromise={resolve:C,reject:x};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(V){g.reject(V)}});return function(C,x){return y.apply(this,arguments)}}())}onAuthEvent(g){var y=this;return(0,u.Z)(function*(){const{urlResponse:C,sessionId:x,postBody:V,tenantId:se,error:Me,type:Je}=g;if(Me)return void y.reject(Me);const pt={auth:y.auth,requestUri:C,sessionId:x,tenantId:se||void 0,postBody:V||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(Je)(pt))}catch(Wt){y.reject(Wt)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return hd;case"linkViaPopup":case"linkViaRedirect":return rc;case"reauthViaPopup":case"reauthViaRedirect":return ii;default:rt(this.auth,"internal-error")}}resolve(g){we(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){we(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Bt=new Ze(2e3,1e4);function si(b,g,y){return xr.apply(this,arguments)}function xr(){return(xr=(0,u.Z)(function*(b,g,y){const C=vt(b);Se(b,g,Sr);const x=fl(C,y);return new ic(C,"signInViaPopup",g,x).executeNotNull()})).apply(this,arguments)}function ws(b,g,y){return fn.apply(this,arguments)}function fn(){return(fn=(0,u.Z)(function*(b,g,y){const C=(0,j.m9)(b);Se(C.auth,g,Sr);const x=fl(C.auth,y);return new ic(C.auth,"reauthViaPopup",g,x,C).executeNotNull()})).apply(this,arguments)}function et(b,g,y){return Gh.apply(this,arguments)}function Gh(){return(Gh=(0,u.Z)(function*(b,g,y){const C=(0,j.m9)(b);Se(C.auth,g,Sr);const x=fl(C.auth,y);return new ic(C.auth,"linkViaPopup",g,x,C).executeNotNull()})).apply(this,arguments)}let ic=(()=>{class b extends ml{constructor(y,C,x,V,se){super(y,C,V,se),this.provider=x,this.authWindow=null,this.pollId=null,b.currentPopupAction&&b.currentPopupAction.cancel(),b.currentPopupAction=this}executeNotNull(){var y=this;return(0,u.Z)(function*(){const C=yield y.execute();return ae(C,y.auth,"internal-error"),C})()}onExecution(){var y=this;return(0,u.Z)(function*(){we(1===y.filter.length,"Popup operations only handle one event");const C=ca();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],C),y.authWindow.associatedEvent=C,y.resolver._originValidation(y.auth).catch(x=>{y.reject(x)}),y.resolver._isIframeWebStorageSupported(y.auth,x=>{x||y.reject(Fe(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(Fe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,b.currentPopupAction=null}pollUserCancellation(){const y=()=>{var C,x;this.pollId=null!==(x=null===(C=this.authWindow)||void 0===C?void 0:C.window)&&void 0!==x&&x.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Fe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(y,Bt.get())};y()}}return b.currentPopupAction=null,b})();const Ws=new Map;class va extends ml{constructor(g,y,C=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,C),this.eventId=null}execute(){var g=()=>super.execute,y=this;return(0,u.Z)(function*(){let C=Ws.get(y.auth._key());if(!C){try{const V=(yield function ou(b,g){return ba.apply(this,arguments)}(y.resolver,y.auth))?yield g().call(y):null;C=()=>Promise.resolve(V)}catch(x){C=()=>Promise.reject(x)}Ws.set(y.auth._key(),C)}return y.bypassAuthState||Ws.set(y.auth._key(),()=>Promise.resolve(null)),C()})()}onAuthEvent(g){var y=()=>super.onAuthEvent,C=this;return(0,u.Z)(function*(){if("signInViaRedirect"===g.type)return y().call(C,g);if("unknown"!==g.type){if(g.eventId){const x=yield C.auth._redirectUserForId(g.eventId);if(x)return C.user=x,y().call(C,g);C.resolve(null)}}else C.resolve(null)})()}onExecution(){return(0,u.Z)(function*(){})()}cleanUp(){}}function ba(){return(ba=(0,u.Z)(function*(b,g){const y=Do(g),C=gl(b);if(!(yield C._isAvailable()))return!1;const x="true"===(yield C._get(y));return yield C._remove(y),x})).apply(this,arguments)}function Es(b,g){return fd.apply(this,arguments)}function fd(){return(fd=(0,u.Z)(function*(b,g){return gl(b)._set(Do(g),"true")})).apply(this,arguments)}function wa(){Ws.clear()}function au(b,g){Ws.set(b._key(),g)}function gl(b){return re(b._redirectPersistence)}function Do(b){return dn("pendingRedirect",b.config.apiKey,b.name)}function em(b,g,y){return function Zn(b,g,y){return lu.apply(this,arguments)}(b,g,y)}function lu(){return(lu=(0,u.Z)(function*(b,g,y){const C=vt(b);Se(b,g,Sr);const x=fl(C,y);return yield Es(x,C),x._openRedirect(C,g,"signInViaRedirect")})).apply(this,arguments)}function S(b,g,y){return function T(b,g,y){return R.apply(this,arguments)}(b,g,y)}function R(){return(R=(0,u.Z)(function*(b,g,y){const C=(0,j.m9)(b);Se(C.auth,g,Sr);const x=fl(C.auth,y);yield Es(x,C.auth);const V=yield Ht(C);return x._openRedirect(C.auth,g,"reauthViaRedirect",V)})).apply(this,arguments)}function U(b,g,y){return function ne(b,g,y){return pe.apply(this,arguments)}(b,g,y)}function pe(){return(pe=(0,u.Z)(function*(b,g,y){const C=(0,j.m9)(b);Se(C.auth,g,Sr);const x=fl(C.auth,y);yield Yi(!1,C,g.providerId),yield Es(x,C.auth);const V=yield Ht(C);return x._openRedirect(C.auth,g,"linkViaRedirect",V)})).apply(this,arguments)}function Pe(b,g){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,u.Z)(function*(b,g){return yield vt(b)._initializationPromise,bt(b,g,!1)})).apply(this,arguments)}function bt(b,g){return At.apply(this,arguments)}function At(){return(At=(0,u.Z)(function*(b,g,y=!1){const C=vt(b),x=fl(C,g),se=yield new va(C,x,y).execute();return se&&!y&&(delete se.user._redirectEventId,yield C._persistUserIfCurrent(se.user),yield C._setRedirectUser(null,g)),se})).apply(this,arguments)}function Ht(b){return Et.apply(this,arguments)}function Et(){return(Et=(0,u.Z)(function*(b){const g=ca(`${b.uid}:::`);return b._redirectEventId=g,yield b.auth._setRedirectUser(b),yield b.auth._persistUserIfCurrent(b),g})).apply(this,arguments)}class Rr{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let y=!1;return this.consumers.forEach(C=>{this.isEventForConsumer(g,C)&&(y=!0,this.sendToConsumer(g,C),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function vl(b){switch(b.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yl(b);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=g,y=!0)),y}sendToConsumer(g,y){var C;if(g.error&&!yl(g)){const x=(null===(C=g.error.code)||void 0===C?void 0:C.split("auth/")[1])||"internal-error";y.onError(Fe(this.auth,x))}else y.onAuthEvent(g)}isEventForConsumer(g,y){const C=null===y.eventId||!!g.eventId&&g.eventId===y.eventId;return y.filter.includes(g.type)&&C}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(_l(g))}saveEventToCache(g){this.cachedEventUids.add(_l(g)),this.lastProcessedEventTime=Date.now()}}function _l(b){return[b.type,b.eventId,b.sessionId,b.tenantId].filter(g=>g).join("-")}function yl({type:b,error:g}){return"unknown"===b&&"auth/no-auth-event"===g?.code}function So(b){return qs.apply(this,arguments)}function qs(){return(qs=(0,u.Z)(function*(b,g={}){return Vt(b,"GET","/v1/projects",g)})).apply(this,arguments)}const oc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bl=/^https?/;function ac(){return(ac=(0,u.Z)(function*(b){if(b.config.emulator)return;const{authorizedDomains:g}=yield So(b);for(const y of g)try{if(fA(y))return}catch{}rt(b,"unauthorized-domain")})).apply(this,arguments)}function fA(b){const g=Ue(),{protocol:y,hostname:C}=new URL(g);if(b.startsWith("chrome-extension://")){const se=new URL(b);return""===se.hostname&&""===C?"chrome-extension:"===y&&b.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===y&&se.hostname===C}if(!bl.test(y))return!1;if(oc.test(b))return C===b;const x=b.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(C)}const Z0=new Ze(3e4,6e4);function $_(){const b=$n().___jsl;if(b?.H)for(const g of Object.keys(b.H))if(b.H[g].r=b.H[g].r||[],b.H[g].L=b.H[g].L||[],b.H[g].r=[...b.H[g].L],b.CP)for(let y=0;y<b.CP.length;y++)b.CP[y]=null}let lc=null;function G_(b){return lc=lc||function Y0(b){return new Promise((g,y)=>{var C,x,V;function se(){$_(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{$_(),y(Fe(b,"network-request-failed"))},timeout:Z0.get()})}if(null!==(x=null===(C=$n().gapi)||void 0===C?void 0:C.iframes)&&void 0!==x&&x.Iframe)g(gapi.iframes.getContext());else{if(null===(V=$n().gapi)||void 0===V||!V.load){const Me=_a("iframefcb");return $n()[Me]=()=>{gapi.load?se():y(Fe(b,"network-request-failed"))},wo(`https://apis.google.com/js/api.js?onload=${Me}`).catch(Je=>y(Je))}se()}}).catch(g=>{throw lc=null,g})}(b),lc}const Q0=new Ze(5e3,15e3),W_={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function tm(b){const g=b.config;ae(g.authDomain,b,"auth-domain-config-required");const y=g.emulator?bn(g,"emulator/auth/iframe"):`https://${b.config.authDomain}/__/auth/iframe`,C={apiKey:g.apiKey,appName:b.name,v:N.SDK_VERSION},x=mA.get(b.config.apiHost);x&&(C.eid=x);const V=b._getFrameworks();return V.length&&(C.fw=V.join(",")),`${y}?${(0,j.xO)(C).slice(1)}`}function zh(){return zh=(0,u.Z)(function*(b){const g=yield G_(b),y=$n().gapi;return ae(y,b,"internal-error"),g.open({where:document.body,url:tm(b),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:W_,dontclear:!0},C=>new Promise(function(){var x=(0,u.Z)(function*(V,se){yield C.restyle({setHideOnLeave:!1});const Me=Fe(b,"network-request-failed"),Je=$n().setTimeout(()=>{se(Me)},Q0.get());function pt(){$n().clearTimeout(Je),V(C)}C.ping(pt).then(pt,()=>{se(Me)})});return function(V,se){return x.apply(this,arguments)}}()))}),zh.apply(this,arguments)}const Wh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class tE{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function pd(b,g,y,C,x,V){ae(b.config.authDomain,b,"auth-domain-config-required"),ae(b.config.apiKey,b,"invalid-api-key");const se={apiKey:b.config.apiKey,appName:b.name,authType:y,redirectUrl:C,v:N.SDK_VERSION,eventId:x};if(g instanceof Sr){g.setDefaultLanguage(b.languageCode),se.providerId=g.providerId||"",(0,j.xb)(g.getCustomParameters())||(se.customParameters=JSON.stringify(g.getCustomParameters()));for(const[Je,pt]of Object.entries(V||{}))se[Je]=pt}if(g instanceof Qo){const Je=g.getScopes().filter(pt=>""!==pt);Je.length>0&&(se.scopes=Je.join(","))}b.tenantId&&(se.tid=b.tenantId);const Me=se;for(const Je of Object.keys(Me))void 0===Me[Je]&&delete Me[Je];return`${function wl({config:b}){return b.emulator?bn(b,"emulator/auth/handler"):`https://${b.authDomain}/__/auth/handler`}(b)}?${(0,j.xO)(Me).slice(1)}`}const im="webStorageSupport",Z_=class nE{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Hs,this._completeRedirectFn=bt,this._overrideRedirectResult=au}_openPopup(g,y,C,x){var V=this;return(0,u.Z)(function*(){var se;we(null===(se=V.eventManagers[g._key()])||void 0===se?void 0:se.manager,"_initialize() not called before _openPopup()");const Me=pd(g,y,C,Ue(),x);return function qh(b,g,y,C=500,x=600){const V=Math.max((window.screen.availHeight-x)/2,0).toString(),se=Math.max((window.screen.availWidth-C)/2,0).toString();let Me="";const Je=Object.assign(Object.assign({},Wh),{width:C.toString(),height:x.toString(),top:V,left:se}),pt=(0,j.z$)().toLowerCase();y&&(Me=Ce(pt)?"_blank":y),G(pt)&&(g=g||"http://localhost",Je.scrollbars="yes");const Wt=Object.entries(Je).reduce((Ks,[uc,om])=>`${Ks}${uc}=${om},`,"");if(function kn(b=(0,j.z$)()){var g;return ot(b)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(pt)&&"_self"!==Me)return function rm(b,g){const y=document.createElement("a");y.href=b,y.target=g;const C=document.createEvent("MouseEvent");C.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(C)}(g||"",Me),new tE(null);const Fn=window.open(g||"",Me,Wt);ae(Fn,b,"popup-blocked");try{Fn.focus()}catch{}return new tE(Fn)}(g,Me,ca())})()}_openRedirect(g,y,C,x){var V=this;return(0,u.Z)(function*(){return yield V._originValidation(g),function ad(b){$n().location.href=b}(pd(g,y,C,Ue(),x)),new Promise(()=>{})})()}_initialize(g){const y=g._key();if(this.eventManagers[y]){const{manager:x,promise:V}=this.eventManagers[y];return x?Promise.resolve(x):(we(V,"If manager is not set, promise should be"),V)}const C=this.initAndGetManager(g);return this.eventManagers[y]={promise:C},C.catch(()=>{delete this.eventManagers[y]}),C}initAndGetManager(g){var y=this;return(0,u.Z)(function*(){const C=yield function X0(b){return zh.apply(this,arguments)}(g),x=new Rr(g);return C.register("authEvent",V=>(ae(V?.authEvent,g,"invalid-auth-event"),{status:x.onEvent(V.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[g._key()]={manager:x},y.iframes[g._key()]=C,x})()}_isIframeWebStorageSupported(g,y){this.iframes[g._key()].send(im,{type:im},x=>{var V;const se=null===(V=x?.[0])||void 0===V?void 0:V[im];void 0!==se&&y(!!se),rt(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const y=g._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function Ea(b){return ac.apply(this,arguments)}(g)),this.originValidationPromises[y]}get _shouldInitProactively(){return _n()||W()||ot()}};class sm extends class rE{constructor(g){this.factorId=g}_process(g,y,C){switch(y.type){case"enroll":return this._finalizeEnroll(g,y.credential,C);case"signin":return this._finalizeSignIn(g,y.credential);default:return fe("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new sm(g)}_finalizeEnroll(g,y,C){return function Yl(b,g){return Vt(b,"POST","/v2/accounts/mfaEnrollment:finalize",zt(b,g))}(g,{idToken:y,displayName:C,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,y){return function ma(b,g){return Vt(b,"POST","/v2/accounts/mfaSignIn:finalize",zt(b,g))}(g,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Ca=(()=>{class b{constructor(){}static assertion(y){return sm._fromCredential(y)}}return b.FACTOR_ID="phone",b})();var cc="@firebase/auth";class iE{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var y=this;return(0,u.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const y=this.auth.onIdTokenChanged(C=>{var x;g((null===(x=C)||void 0===x?void 0:x.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,y),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const y=this.internalListeners.get(g);!y||(this.internalListeners.delete(g),y(),this.updateProactiveRefresh())}assertAuthConfigured(){ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}!function oE(b){(0,N._registerComponent)(new ve.wA("auth",(g,{options:y})=>{const C=g.getProvider("app").getImmediate(),x=g.getProvider("heartbeat"),{apiKey:V,authDomain:se}=C.options;return((Me,Je)=>{ae(V&&!V.includes(":"),"invalid-api-key",{appName:Me.name}),ae(!se?.includes(":"),"argument-error",{appName:Me.name});const pt={apiKey:V,authDomain:se,clientPlatform:b,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Mn(b)},Wt=new ao(Me,Je,pt);return function de(b,g){const y=g?.persistence||[],C=(Array.isArray(y)?y:[y]).map(re);g?.errorMap&&b._updateErrorMap(g.errorMap),b._initializeWithPersistence(C,g?.popupRedirectResolver)}(Wt,y),Wt})(C,x)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,y,C)=>{g.getProvider("auth-internal").initialize()})),(0,N._registerComponent)(new ve.wA("auth-internal",g=>{const y=vt(g.getProvider("auth").getImmediate());return new iE(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,N.registerVersion)(cc,"0.20.6",function sE(b){switch(b){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(b)),(0,N.registerVersion)(cc,"0.20.6","esm2017")}("Browser")},2090:(ut,Ae,L)=>{L.d(Ae,{$s:()=>Br,BH:()=>$e,DV:()=>Vt,Dv:()=>_r,G6:()=>ae,GJ:()=>en,L:()=>ge,LL:()=>Ue,Mn:()=>Se,Pz:()=>Gt,Sg:()=>Ne,UG:()=>Ie,UI:()=>so,US:()=>ve,Wj:()=>Sn,Yr:()=>qe,ZB:()=>Z,ZR:()=>de,b$:()=>rt,cI:()=>Jt,d:()=>Fe,dS:()=>ht,eu:()=>we,g5:()=>N,gK:()=>Zi,gQ:()=>Ri,h$:()=>ue,hl:()=>fe,hu:()=>j,jU:()=>ye,lb:()=>wn,m9:()=>Kt,ne:()=>Ki,p$:()=>K,pd:()=>Bn,r3:()=>zt,ru:()=>nt,tV:()=>Ee,uI:()=>at,ug:()=>ft,vZ:()=>Ir,w1:()=>Re,w9:()=>on,xO:()=>qi,xb:()=>Cr,z$:()=>De,zI:()=>ee,zd:()=>Xr});const j=function(J,z){if(!J)throw N(z)},N=function(J){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+J)},ce=function(J){const z=[];let $=0;for(let Y=0;Y<J.length;Y++){let Q=J.charCodeAt(Y);Q<128?z[$++]=Q:Q<2048?(z[$++]=Q>>6|192,z[$++]=63&Q|128):55296==(64512&Q)&&Y+1<J.length&&56320==(64512&J.charCodeAt(Y+1))?(Q=65536+((1023&Q)<<10)+(1023&J.charCodeAt(++Y)),z[$++]=Q>>18|240,z[$++]=Q>>12&63|128,z[$++]=Q>>6&63|128,z[$++]=63&Q|128):(z[$++]=Q>>12|224,z[$++]=Q>>6&63|128,z[$++]=63&Q|128)}return z},ve={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(J,z){if(!Array.isArray(J))throw Error("encodeByteArray takes an array as a parameter");this.init_();const $=z?this.byteToCharMapWebSafe_:this.byteToCharMap_,Y=[];for(let Q=0;Q<J.length;Q+=3){const Te=J[Q],ze=Q+1<J.length,wt=ze?J[Q+1]:0,hn=Q+2<J.length,dn=hn?J[Q+2]:0;let G=(15&wt)<<2|dn>>6,W=63&dn;hn||(W=64,ze||(G=64)),Y.push($[Te>>2],$[(3&Te)<<4|wt>>4],$[G],$[W])}return Y.join("")},encodeString(J,z){return this.HAS_NATIVE_SUPPORT&&!z?btoa(J):this.encodeByteArray(ce(J),z)},decodeString(J,z){return this.HAS_NATIVE_SUPPORT&&!z?atob(J):function(J){const z=[];let $=0,Y=0;for(;$<J.length;){const Q=J[$++];if(Q<128)z[Y++]=String.fromCharCode(Q);else if(Q>191&&Q<224){const Te=J[$++];z[Y++]=String.fromCharCode((31&Q)<<6|63&Te)}else if(Q>239&&Q<365){const hn=((7&Q)<<18|(63&J[$++])<<12|(63&J[$++])<<6|63&J[$++])-65536;z[Y++]=String.fromCharCode(55296+(hn>>10)),z[Y++]=String.fromCharCode(56320+(1023&hn))}else{const Te=J[$++],ze=J[$++];z[Y++]=String.fromCharCode((15&Q)<<12|(63&Te)<<6|63&ze)}}return z.join("")}(this.decodeStringToByteArray(J,z))},decodeStringToByteArray(J,z){this.init_();const $=z?this.charToByteMapWebSafe_:this.charToByteMap_,Y=[];for(let Q=0;Q<J.length;){const Te=$[J.charAt(Q++)],wt=Q<J.length?$[J.charAt(Q)]:0;++Q;const dn=Q<J.length?$[J.charAt(Q)]:64;++Q;const ie=Q<J.length?$[J.charAt(Q)]:64;if(++Q,null==Te||null==wt||null==dn||null==ie)throw Error();Y.push(Te<<2|wt>>4),64!==dn&&(Y.push(wt<<4&240|dn>>2),64!==ie&&Y.push(dn<<6&192|ie))}return Y},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let J=0;J<this.ENCODED_VALS.length;J++)this.byteToCharMap_[J]=this.ENCODED_VALS.charAt(J),this.charToByteMap_[this.byteToCharMap_[J]]=J,this.byteToCharMapWebSafe_[J]=this.ENCODED_VALS_WEBSAFE.charAt(J),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[J]]=J,J>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(J)]=J,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(J)]=J)}}},ue=function(J){const z=ce(J);return ve.encodeByteArray(z,!0)},ge=function(J){return ue(J).replace(/\./g,"")},Ee=function(J){try{return ve.decodeString(J,!0)}catch(z){console.error("base64Decode failed: ",z)}return null};function K(J){return Z(void 0,J)}function Z(J,z){if(!(z instanceof Object))return z;switch(z.constructor){case Date:return new Date(z.getTime());case Object:void 0===J&&(J={});break;case Array:J=[];break;default:return z}for(const $ in z)!z.hasOwnProperty($)||!te($)||(J[$]=Z(J[$],z[$]));return J}function te(J){return"__proto__"!==J}class $e{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((z,$)=>{this.resolve=z,this.reject=$})}wrapCallback(z){return($,Y)=>{$?this.reject($):this.resolve(Y),"function"==typeof z&&(this.promise.catch(()=>{}),1===z.length?z($):z($,Y))}}}function Ne(J,z){if(J.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Y=z||"demo-project",Q=J.iat||0,Te=J.sub||J.user_id;if(!Te)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ze=Object.assign({iss:`https://securetoken.google.com/${Y}`,aud:Y,iat:Q,exp:Q+3600,auth_time:Q,sub:Te,user_id:Te,firebase:{sign_in_provider:"custom",identities:{}}},J);return[ge(JSON.stringify({alg:"none",type:"JWT"})),ge(JSON.stringify(ze)),""].join(".")}function De(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function at(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(De())}function Ie(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ye(){return"object"==typeof self&&self.self===self}function nt(){const J="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof J&&void 0!==J.id}function rt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Fe(){return De().indexOf("Electron/")>=0}function Re(){const J=De();return J.indexOf("MSIE ")>=0||J.indexOf("Trident/")>=0}function Se(){return De().indexOf("MSAppHost/")>=0}function qe(){return!1}function ae(){return!Ie()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fe(){return"object"==typeof indexedDB}function we(){return new Promise((J,z)=>{try{let $=!0;const Y="validate-browser-context-for-indexeddb-analytics-module",Q=self.indexedDB.open(Y);Q.onsuccess=()=>{Q.result.close(),$||self.indexedDB.deleteDatabase(Y),J(!0)},Q.onupgradeneeded=()=>{$=!1},Q.onerror=()=>{var Te;z((null===(Te=Q.error)||void 0===Te?void 0:Te.message)||"")}}catch($){z($)}})}function ee(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class de extends Error{constructor(z,$,Y){super($),this.code=z,this.customData=Y,this.name="FirebaseError",Object.setPrototypeOf(this,de.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ue.prototype.create)}}class Ue{constructor(z,$,Y){this.service=z,this.serviceName=$,this.errors=Y}create(z,...$){const Y=$[0]||{},Q=`${this.service}/${z}`,Te=this.errors[z],ze=Te?function He(J,z){return J.replace(_t,($,Y)=>{const Q=z[Y];return null!=Q?String(Q):`<${Y}?>`})}(Te,Y):"Error";return new de(Q,`${this.serviceName}: ${ze} (${Q}).`,Y)}}const _t=/\{\$([^}]+)}/g;function Jt(J){return JSON.parse(J)}function Gt(J){return JSON.stringify(J)}const Ze=function(J){let z={},$={},Y={},Q="";try{const Te=J.split(".");z=Jt(Ee(Te[0])||""),$=Jt(Ee(Te[1])||""),Q=Te[2],Y=$.d||{},delete $.d}catch{}return{header:z,claims:$,data:Y,signature:Q}},on=function(J){const $=Ze(J).claims;return!!$&&"object"==typeof $&&$.hasOwnProperty("iat")},en=function(J){const z=Ze(J).claims;return"object"==typeof z&&!0===z.admin};function zt(J,z){return Object.prototype.hasOwnProperty.call(J,z)}function Vt(J,z){if(Object.prototype.hasOwnProperty.call(J,z))return J[z]}function Cr(J){for(const z in J)if(Object.prototype.hasOwnProperty.call(J,z))return!1;return!0}function so(J,z,$){const Y={};for(const Q in J)Object.prototype.hasOwnProperty.call(J,Q)&&(Y[Q]=z.call($,J[Q],Q,J));return Y}function Ir(J,z){if(J===z)return!0;const $=Object.keys(J),Y=Object.keys(z);for(const Q of $){if(!Y.includes(Q))return!1;const Te=J[Q],ze=z[Q];if(Rn(Te)&&Rn(ze)){if(!Ir(Te,ze))return!1}else if(Te!==ze)return!1}for(const Q of Y)if(!$.includes(Q))return!1;return!0}function Rn(J){return null!==J&&"object"==typeof J}function qi(J){const z=[];for(const[$,Y]of Object.entries(J))Array.isArray(Y)?Y.forEach(Q=>{z.push(encodeURIComponent($)+"="+encodeURIComponent(Q))}):z.push(encodeURIComponent($)+"="+encodeURIComponent(Y));return z.length?"&"+z.join("&"):""}function Xr(J){const z={};return J.replace(/^\?/,"").split("&").forEach(Y=>{if(Y){const[Q,Te]=Y.split("=");z[decodeURIComponent(Q)]=decodeURIComponent(Te)}}),z}function Bn(J){const z=J.indexOf("?");if(!z)return"";const $=J.indexOf("#",z);return J.substring(z,$>0?$:void 0)}class Ri{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let z=1;z<this.blockSize;++z)this.pad_[z]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(z,$){$||($=0);const Y=this.W_;if("string"==typeof z)for(let ie=0;ie<16;ie++)Y[ie]=z.charCodeAt($)<<24|z.charCodeAt($+1)<<16|z.charCodeAt($+2)<<8|z.charCodeAt($+3),$+=4;else for(let ie=0;ie<16;ie++)Y[ie]=z[$]<<24|z[$+1]<<16|z[$+2]<<8|z[$+3],$+=4;for(let ie=16;ie<80;ie++){const G=Y[ie-3]^Y[ie-8]^Y[ie-14]^Y[ie-16];Y[ie]=4294967295&(G<<1|G>>>31)}let dn,Jn,Q=this.chain_[0],Te=this.chain_[1],ze=this.chain_[2],wt=this.chain_[3],hn=this.chain_[4];for(let ie=0;ie<80;ie++){ie<40?ie<20?(dn=wt^Te&(ze^wt),Jn=1518500249):(dn=Te^ze^wt,Jn=1859775393):ie<60?(dn=Te&ze|wt&(Te|ze),Jn=2400959708):(dn=Te^ze^wt,Jn=3395469782);const G=(Q<<5|Q>>>27)+dn+hn+Jn+Y[ie]&4294967295;hn=wt,wt=ze,ze=4294967295&(Te<<30|Te>>>2),Te=Q,Q=G}this.chain_[0]=this.chain_[0]+Q&4294967295,this.chain_[1]=this.chain_[1]+Te&4294967295,this.chain_[2]=this.chain_[2]+ze&4294967295,this.chain_[3]=this.chain_[3]+wt&4294967295,this.chain_[4]=this.chain_[4]+hn&4294967295}update(z,$){if(null==z)return;void 0===$&&($=z.length);const Y=$-this.blockSize;let Q=0;const Te=this.buf_;let ze=this.inbuf_;for(;Q<$;){if(0===ze)for(;Q<=Y;)this.compress_(z,Q),Q+=this.blockSize;if("string"==typeof z){for(;Q<$;)if(Te[ze]=z.charCodeAt(Q),++ze,++Q,ze===this.blockSize){this.compress_(Te),ze=0;break}}else for(;Q<$;)if(Te[ze]=z[Q],++ze,++Q,ze===this.blockSize){this.compress_(Te),ze=0;break}}this.inbuf_=ze,this.total_+=$}digest(){const z=[];let $=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Q=this.blockSize-1;Q>=56;Q--)this.buf_[Q]=255&$,$/=256;this.compress_(this.buf_);let Y=0;for(let Q=0;Q<5;Q++)for(let Te=24;Te>=0;Te-=8)z[Y]=this.chain_[Q]>>Te&255,++Y;return z}}function Ki(J,z){const $=new it(J,z);return $.subscribe.bind($)}class it{constructor(z,$){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=$,this.task.then(()=>{z(this)}).catch(Y=>{this.error(Y)})}next(z){this.forEachObserver($=>{$.next(z)})}error(z){this.forEachObserver($=>{$.error(z)}),this.close(z)}complete(){this.forEachObserver(z=>{z.complete()}),this.close()}subscribe(z,$,Y){let Q;if(void 0===z&&void 0===$&&void 0===Y)throw new Error("Missing Observer.");Q=function Un(J,z){if("object"!=typeof J||null===J)return!1;for(const $ of z)if($ in J&&"function"==typeof J[$])return!0;return!1}(z,["next","error","complete"])?z:{next:z,error:$,complete:Y},void 0===Q.next&&(Q.next=gn),void 0===Q.error&&(Q.error=gn),void 0===Q.complete&&(Q.complete=gn);const Te=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Q.error(this.finalError):Q.complete()}catch{}}),this.observers.push(Q),Te}unsubscribeOne(z){void 0===this.observers||void 0===this.observers[z]||(delete this.observers[z],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(z){if(!this.finalized)for(let $=0;$<this.observers.length;$++)this.sendOne($,z)}sendOne(z,$){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[z])try{$(this.observers[z])}catch(Y){typeof console<"u"&&console.error&&console.error(Y)}})}close(z){this.finalized||(this.finalized=!0,void 0!==z&&(this.finalError=z),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gn(){}const _r=function(J,z,$,Y){let Q;if(Y<z?Q="at least "+z:Y>$&&(Q=0===$?"none":"no more than "+$),Q)throw new Error(J+" failed: Was called with "+Y+(1===Y?" argument.":" arguments.")+" Expects "+Q+".")};function Zi(J,z){return`${J} failed: ${z} argument `}function Sn(J,z,$,Y){if((!Y||$)&&"function"!=typeof $)throw new Error(Zi(J,z)+"must be a valid function.")}function wn(J,z,$,Y){if((!Y||$)&&("object"!=typeof $||null===$))throw new Error(Zi(J,z)+"must be a valid context object.")}const ht=function(J){const z=[];let $=0;for(let Y=0;Y<J.length;Y++){let Q=J.charCodeAt(Y);if(Q>=55296&&Q<=56319){const Te=Q-55296;Y++,j(Y<J.length,"Surrogate pair missing trail surrogate."),Q=65536+(Te<<10)+(J.charCodeAt(Y)-56320)}Q<128?z[$++]=Q:Q<2048?(z[$++]=Q>>6|192,z[$++]=63&Q|128):Q<65536?(z[$++]=Q>>12|224,z[$++]=Q>>6&63|128,z[$++]=63&Q|128):(z[$++]=Q>>18|240,z[$++]=Q>>12&63|128,z[$++]=Q>>6&63|128,z[$++]=63&Q|128)}return z},ft=function(J){let z=0;for(let $=0;$<J.length;$++){const Y=J.charCodeAt($);Y<128?z++:Y<2048?z+=2:Y>=55296&&Y<=56319?(z+=4,$++):z+=3}return z};function Br(J,z=1e3,$=2){const Y=z*Math.pow($,J),Q=Math.round(.5*Y*(Math.random()-.5)*2);return Math.min(144e5,Y+Q)}function Kt(J){return J&&J._delegate?J._delegate:J}},1720:(ut,Ae,L)=>{var u=L(4650);let j=null;function N(){return j}const ue=new u.OlP("DocumentToken");let ge=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return function Ee(){return(0,u.LFG)(Z)}()},providedIn:"platform"}),n})();const K=new u.OlP("Location Initialized");let Z=(()=>{class n extends ge{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return N().getBaseHref(this._doc)}onPopState(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){te()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){te()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ue))},n.\u0275prov=u.Yz7({token:n,factory:function(){return function $e(){return new Z((0,u.LFG)(ue))}()},providedIn:"platform"}),n})();function te(){return!!window.history.pushState}function Ne(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function De(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function at(n){return n&&"?"!==n[0]?"?"+n:n}let Ie=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(nt)},providedIn:"root"}),n})();const ye=new u.OlP("appBaseHref");let nt=(()=>{class n extends Ie{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,u.f3M)(ue).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ne(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+at(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const l=this.prepareExternalUrl(i+at(s));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,s){const l=this.prepareExternalUrl(i+at(s));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ge),u.LFG(ye,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),rt=(()=>{class n extends Ie{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ne(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let l=this.prepareExternalUrl(i+at(s));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,s){let l=this.prepareExternalUrl(i+at(s));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ge),u.LFG(ye,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Fe=(()=>{class n{constructor(t){this._subject=new u.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=De(qe(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+at(r))}normalize(t){return n.stripTrailingSlash(function Se(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,qe(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+at(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+at(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=at,n.joinWithSlash=Ne,n.stripTrailingSlash=De,n.\u0275fac=function(t){return new(t||n)(u.LFG(Ie))},n.\u0275prov=u.Yz7({token:n,factory:function(){return function Re(){return new Fe((0,u.LFG)(Ie))}()},providedIn:"root"}),n})();function qe(n){return n.replace(/\/index.html$/,"")}function Hl(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}let pn=(()=>{class n{constructor(t,r,i,s){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,u.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,u.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.ZZ4),u.Y36(u.aQg),u.Y36(u.SBq),u.Y36(u.Qsj))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})(),Tn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Th,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){er("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){er("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Th{constructor(){this.$implicit=null,this.ngIf=null}}function er(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,u.AaK)(e)}'.`)}class hi{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let po=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const r=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let r=0;r<this._defaultViews.length;r++)this._defaultViews[r].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),n})(),jl=(()=>{class n{constructor(t,r,i){this.ngSwitch=i,i._addCase(),this._view=new hi(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(po,9))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),n})();class zp{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}}class ps{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const Wp=new ps,ju=new zp;let $l=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,u.QGY)(t))return Wp;if((0,u.F4k)(t))return ju;throw function fi(n,e){return new u.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.sBO,16))},n.\u0275pipe=u.Yjl({name:"async",type:n,pure:!1,standalone:!0}),n})(),$c=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const pi="browser";function Jo(n){return"server"===n}let Zu=(()=>{class n{}return n.\u0275prov=(0,u.Yz7)({token:n,providedIn:"root",factory:()=>new Ah((0,u.LFG)(ue),window)}),n})();class Ah{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Tr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const l=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ki(this.window.history)||ki(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function ki(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class _o{}class Bs extends class ed extends class ve{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function he(n){j||(j=n)}(new Bs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function td(){return Us=Us||document.querySelector("base"),Us?Us.getAttribute("href"):null}();return null==t?null:function ys(n){On=On||document.createElement("a"),On.setAttribute("href",n);const e=On.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Us=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Hl(document.cookie,e)}}let On,Us=null;const Pn=new u.OlP("TRANSITION_ID"),Yc=[{provide:u.ip1,useFactory:function Zc(n,e,t){return()=>{t.get(u.CZH).donePromise.then(()=>{const r=N(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[Pn,ue,u.zs3],multi:!0}];let Qc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Xc=new u.OlP("EventManagerPlugins");let nd=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const l=i[s];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Xc),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class Jc{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=N().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let oa=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),aa=(()=>{class n extends oa{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(s=>{const l=this._doc.createElement("style");l.textContent=s,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(rd),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(rd))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ue))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function rd(n){N().remove(n)}const la={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},id=/%COMP%/g;function Ql(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Ql(n,i,t):(i=i.replace(id,n),t.push(i))}return t}function Xl(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let sl=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new vs(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case u.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new od(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case u.ifc.ShadowDom:return new Fh(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Ql(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(nd),u.LFG(aa),u.LFG(u.AFp))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class vs{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(la[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(al(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(al(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=la[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=la[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(u.JOm.DashCase|u.JOm.Important)?e.style.setProperty(t,r,i&u.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&u.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Xl(r)):this.eventManager.addEventListener(e,t,Xl(r))}}function al(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class od extends vs{constructor(e,t,r,i){super(e),this.component=r;const s=Ql(i+"-"+r.id,r.styles,[]);t.addStyles(s),this.contentAttr=function jn(n){return"_ngcontent-%COMP%".replace(id,n)}(i+"-"+r.id),this.hostAttr=function Yl(n){return"_nghost-%COMP%".replace(id,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Fh extends vs{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Ql(i.id,i.styles,[]);for(let l=0;l<s.length;l++){const h=document.createElement("style");h.textContent=s[l],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let rr=(()=>{class n extends Jc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ue))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Lh=["alt","control","meta","shift"],Hs={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},nu={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ll=(()=>{class n extends Jc{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),l=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(t,s.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let l="",h=r.indexOf("code");if(h>-1&&(r.splice(h,1),l="code."),Lh.forEach(_=>{const w=r.indexOf(_);w>-1&&(r.splice(w,1),l+=_+".")}),l+=s,0!=r.length||0===s.length)return null;const p={};return p.domEventName=i,p.fullKey=l,p}static matchEventFullKeyCode(t,r){let i=Hs[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Lh.forEach(l=>{l!==i&&(0,nu[l])(t)&&(s+=l+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ue))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const cl=(0,u.eFA)(u._c5,"browser",[{provide:u.Lbi,useValue:pi},{provide:u.g9A,useValue:function ld(){Bs.makeCurrent()},multi:!0},{provide:ue,useFactory:function ru(){return(0,u.RDi)(document),document},deps:[]}]),vo=new u.OlP(""),ul=[{provide:u.rWj,useClass:class Ph{addToWindow(e){u.dqk.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},u.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),u.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),u.dqk.frameworkStabilizers||(u.dqk.frameworkStabilizers=[]),u.dqk.frameworkStabilizers.push(r=>{const i=u.dqk.getAllAngularTestabilities();let s=i.length,l=!1;const h=function(p){l=l||p,s--,0==s&&r(l)};i.forEach(function(p){p.whenStable(h)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?N().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:u.lri,useClass:u.dDg,deps:[u.R0b,u.eoX,u.rWj]},{provide:u.dDg,useClass:u.dDg,deps:[u.R0b,u.eoX,u.rWj]}],ua=[{provide:u.zSh,useValue:"root"},{provide:u.qLn,useFactory:function bs(){return new u.qLn},deps:[]},{provide:Xc,useClass:rr,multi:!0,deps:[ue,u.R0b,u.Lbi]},{provide:Xc,useClass:ll,multi:!0,deps:[ue]},{provide:sl,useClass:sl,deps:[nd,aa,u.AFp]},{provide:u.FYo,useExisting:sl},{provide:oa,useExisting:aa},{provide:aa,useClass:aa,deps:[ue]},{provide:nd,useClass:nd,deps:[Xc,u.R0b]},{provide:_o,useClass:Qc,deps:[]},[]];let bo=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:u.AFp,useValue:t.appId},{provide:Pn,useExisting:u.AFp},Yc]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(vo,12))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[...ua,...ul],imports:[$c,u.hGG]}),n})(),Xi=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ue))},n.\u0275prov=u.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function dl(){return new Xi((0,u.LFG)(ue))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;let Eo,$s=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):u.LFG(Jp),r},providedIn:"root"}),n})(),Jp=(()=>{class n extends $s{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case u.q3G.NONE:return r;case u.q3G.HTML:return(0,u.qzn)(r,"HTML")?(0,u.z3N)(r):(0,u.EiD)(this._doc,String(r)).toString();case u.q3G.STYLE:return(0,u.qzn)(r,"Style")?(0,u.z3N)(r):r;case u.q3G.SCRIPT:if((0,u.qzn)(r,"Script"))return(0,u.z3N)(r);throw new Error("unsafe value used in a script context");case u.q3G.URL:return(0,u.qzn)(r,"URL")?(0,u.z3N)(r):(0,u.mCW)(String(r));case u.q3G.RESOURCE_URL:if((0,u.qzn)(r,"ResourceURL"))return(0,u.z3N)(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,u.JVY)(t)}bypassSecurityTrustStyle(t){return(0,u.L6k)(t)}bypassSecurityTrustScript(t){return(0,u.eBb)(t)}bypassSecurityTrustUrl(t){return(0,u.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,u.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ue))},n.\u0275prov=u.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function j_(n){return new Jp(n.get(ue))}(u.LFG(u.zs3)),r},providedIn:"root"}),n})();try{Eo=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Eo=!1}let Co,ar=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function mi(n){return n===pi}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Eo)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.Lbi))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ar=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function es(){if(Co)return Co;if("object"!=typeof document||!document)return Co=new Set(Ar),Co;let n=document.createElement("input");return Co=new Set(Ar.filter(e=>(n.setAttribute("type",e),n.type===e))),Co}let Gs,zs,pl;function Pi(n){return function Io(){if(null==Gs&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Gs=!0}))}finally{Gs=Gs||!1}return Gs}()?n:!!n.capture}function $h(){if(null==zs){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return zs=!1,zs;if("scrollBehavior"in document.documentElement.style)zs=!0;else{const n=Element.prototype.scrollTo;zs=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return zs}function Mr(n){return n.composedPath?n.composedPath()[0]:n.target}function ml(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var Bt=L(7579),si=L(727);class xr extends Bt.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var ws=L(3269),fn=L(8996);function et(...n){const e=(0,ws.yG)(n);return(0,fn.D)(n,e)}function vA(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}var Gn=L(8505),dc=L(4986),lr=L(4482),zn=L(5403);function Yh(n,e=dc.z){return(0,lr.e)((t,r)=>{let i=null,s=null,l=null;const h=()=>{if(i){i.unsubscribe(),i=null;const _=s;s=null,r.next(_)}};function p(){const _=l+n,w=e.now();if(w<_)return i=this.schedule(void 0,_-w),void r.add(i);h()}t.subscribe((0,zn.x)(r,_=>{s=_,l=e.now(),i||(i=e.schedule(p,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{s=i=null}))})}function Hr(n,e){return(0,lr.e)((t,r)=>{let i=0;t.subscribe((0,zn.x)(r,s=>n.call(e,s,i++)&&r.next(s)))})}var lt=L(4004);function ty(n){return Hr((e,t)=>n<=t)}var hc=L(4671);function hE(n,e=hc.y){return n=n??bA,(0,lr.e)((t,r)=>{let i,s=!0;t.subscribe((0,zn.x)(r,l=>{const h=e(l);(s||!n(i,h))&&(s=!1,i=h,r.next(l))}))})}function bA(n,e){return n===e}var Ia=L(8421),um=L(5032);function To(n){return(0,lr.e)((e,t)=>{(0,Ia.Xf)(n).subscribe((0,zn.x)(t,()=>t.complete(),um.Z)),!t.closed&&e.subscribe(t)})}function yi(n){return null!=n&&"false"!=`${n}`}function uu(n){return Array.isArray(n)?n:[n]}function Or(n){return null==n?"":"string"==typeof n?n:`${n}px`}function Ao(n){return n instanceof u.SBq?n.nativeElement:n}var sr=L(9751);const{isArray:fE}=Array,{getPrototypeOf:iy,prototype:EA,keys:CA}=Object;function sy(n){if(1===n.length){const e=n[0];if(fE(e))return{args:e,keys:null};if(function gd(n){return n&&"object"==typeof n&&iy(n)===EA}(e)){const t=CA(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:IA}=Array;function oy(n){return(0,lt.U)(e=>function DA(n,e){return IA(e)?n(...e):n(e)}(n,e))}function pE(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var ay=L(9672);function ly(...n){const e=(0,ws.yG)(n),t=(0,ws.jO)(n),{args:r,keys:i}=sy(n);if(0===r.length)return(0,fn.D)([],e);const s=new sr.y(function mE(n,e,t=hc.y){return r=>{gE(e,()=>{const{length:i}=n,s=new Array(i);let l=i,h=i;for(let p=0;p<i;p++)gE(e,()=>{const _=(0,fn.D)(n[p],e);let w=!1;_.subscribe((0,zn.x)(r,D=>{s[p]=D,w||(w=!0,h--),h||r.next(t(s.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>pE(i,l):hc.y));return t?s.pipe(oy(t)):s}function gE(n,e,t){n?(0,ay.f)(t,n,e):e()}var _d=L(8189);function Qh(...n){return function W1(){return(0,_d.J)(1)}()((0,fn.D)(n,(0,ws.yG)(n)))}var Zs=L(515);function Ni(n){return n<=0?()=>Zs.E:(0,lr.e)((e,t)=>{let r=0;e.subscribe((0,zn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function vi(...n){const e=(0,ws.yG)(n);return(0,lr.e)((t,r)=>{(e?Qh(n,t,e):Qh(n,t)).subscribe(r)})}const _E=new Set;let Xh,yE=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):TA}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function SA(n){if(!_E.has(n))try{Xh||(Xh=document.createElement("style"),Xh.setAttribute("type","text/css"),document.head.appendChild(Xh)),Xh.sheet&&(Xh.sheet.insertRule(`@media ${n} {body{ }}`,0),_E.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ar))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function TA(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let cy=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new Bt.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return uy(uu(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let s=ly(uy(uu(t)).map(l=>this._registerQuery(l).observable));return s=Qh(s.pipe(Ni(1)),s.pipe(ty(1),Yh(0))),s.pipe((0,lt.U)(l=>{const h={matches:!1,breakpoints:{}};return l.forEach(({matches:p,query:_})=>{h.matches=h.matches||p,h.breakpoints[_]=p}),h}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),s={observable:new sr.y(l=>{const h=p=>this._zone.run(()=>l.next(p));return r.addListener(h),()=>{r.removeListener(h)}}).pipe(vi(r),(0,lt.U)(({matches:l})=>({query:t,matches:l})),To(this._destroySubject)),mql:r};return this._queries.set(t,s),s}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(yE),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function uy(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}class wE extends class Q1{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Bt.x,this._typeaheadSubscription=si.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new Bt.x,this.change=new Bt.x,e instanceof u.n_E&&e.changes.subscribe(t=>{if(this._activeItem){const i=t.toArray().indexOf(this._activeItem);i>-1&&i!==this._activeItemIndex&&(this._activeItemIndex=i)}})}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,Gn.b)(t=>this._pressedLetters.push(t)),Yh(e),Hr(()=>this._pressedLetters.length>0),(0,lt.U)(()=>this._pressedLetters.join(""))).subscribe(t=>{const r=this._getItemsArray();for(let i=1;i<r.length+1;i++){const s=(this._activeItemIndex+i)%r.length,l=r[s];if(!this._skipPredicateFn(l)&&0===l.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,i=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&i){this.setNextItemActive();break}return;case 38:if(this._vertical&&i){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&i){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&i){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&i){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&i){this.setLastItemActive();break}return;default:return void((i||vA(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),r="number"==typeof e?e:t.indexOf(e);this._activeItem=t[r]??null,this._activeItemIndex=r}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let r=1;r<=t.length;r++){const i=(this._activeItemIndex+e*r+t.length)%t.length;if(!this._skipPredicateFn(t[i]))return void this.setActiveItem(i)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const r=this._getItemsArray();if(r[e]){for(;this._skipPredicateFn(r[e]);)if(!r[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof u.n_E?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}function fy(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function oi(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const py=new u.OlP("cdk-input-modality-detector-options"),DE={ignoreKeys:[18,17,224,91,16]},br=Pi({passive:!0,capture:!0});let ef=(()=>{class n{constructor(t,r,i,s){this._platform=t,this._mostRecentTarget=null,this._modality=new xr(null),this._lastTouchMs=0,this._onKeydown=l=>{this._options?.ignoreKeys?.some(h=>h===l.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Mr(l))},this._onMousedown=l=>{Date.now()-this._lastTouchMs<650||(this._modality.next(fy(l)?"keyboard":"mouse"),this._mostRecentTarget=Mr(l))},this._onTouchstart=l=>{oi(l)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Mr(l))},this._options={...DE,...s},this.modalityDetected=this._modality.pipe(ty(1)),this.modalityChanged=this.modalityDetected.pipe(hE()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,br),i.addEventListener("mousedown",this._onMousedown,br),i.addEventListener("touchstart",this._onTouchstart,br)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,br),document.removeEventListener("mousedown",this._onMousedown,br),document.removeEventListener("touchstart",this._onTouchstart,br))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ar),u.LFG(u.R0b),u.LFG(ue),u.LFG(py,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const my=new u.OlP("liveAnnouncerElement",{providedIn:"root",factory:function NA(){return null}}),FA=new u.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let gy=(()=>{class n{constructor(t,r,i,s){this._ngZone=r,this._defaultOptions=s,this._document=i,this._liveElement=t||this._createLiveElement()}announce(t,...r){const i=this._defaultOptions;let s,l;return 1===r.length&&"number"==typeof r[0]?l=r[0]:[s,l]=r,this.clear(),clearTimeout(this._previousTimeout),s||(s=i&&i.politeness?i.politeness:"polite"),null==l&&i&&(l=i.duration),this._liveElement.setAttribute("aria-live",s),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(h=>this._currentResolve=h)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=t,"number"==typeof l&&(this._previousTimeout=setTimeout(()=>this.clear(),l)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const t="cdk-live-announcer-element",r=this._document.getElementsByClassName(t),i=this._document.createElement("div");for(let s=0;s<r.length;s++)r[s].remove();return i.classList.add(t),i.classList.add("cdk-visually-hidden"),i.setAttribute("aria-atomic","true"),i.setAttribute("aria-live","polite"),this._document.body.appendChild(i),i}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(my,8),u.LFG(u.R0b),u.LFG(ue),u.LFG(FA,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const SE=new u.OlP("cdk-focus-monitor-default-options"),mm=Pi({passive:!0,capture:!0});let gm=(()=>{class n{constructor(t,r,i,s,l){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Bt.x,this._rootNodeFocusAndBlurListener=h=>{for(let _=Mr(h);_;_=_.parentElement)"focus"===h.type?this._onFocus(h,_):this._onBlur(h,_)},this._document=s,this._detectionMode=l?.detectionMode||0}monitor(t,r=!1){const i=Ao(t);if(!this._platform.isBrowser||1!==i.nodeType)return et(null);const s=function ii(n){if(function hd(){if(null==pl){const n=typeof document<"u"?document.head:null;pl=!(!n||!n.createShadowRoot&&!n.attachShadow)}return pl}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(i)||this._getDocument(),l=this._elementInfo.get(i);if(l)return r&&(l.checkChildren=!0),l.subject;const h={checkChildren:r,subject:new Bt.x,rootNode:s};return this._elementInfo.set(i,h),this._registerGlobalListeners(h),h.subject}stopMonitoring(t){const r=Ao(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const s=Ao(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([h,p])=>this._originChanged(h,r,p)):(this._setOrigin(r),"function"==typeof s.focus&&s.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),s=Mr(t);!i||!i.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,mm),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,mm)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(To(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,mm),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,mm),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,s)=>{(s===t||i.checkChildren&&s.contains(t))&&r.push([s,i])}),r}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:r,mostRecentModality:i}=this._inputModalityDetector;if("mouse"!==i||!r||r===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const s=t.labels;if(s)for(let l=0;l<s.length;l++)if(s[l].contains(r))return!0;return!1}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.R0b),u.LFG(ar),u.LFG(ef),u.LFG(ue,8),u.LFG(SE,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const TE="cdk-high-contrast-black-on-white",AE="cdk-high-contrast-white-on-black",_y="cdk-high-contrast-active";let LA=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=(0,u.f3M)(cy).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(_y,TE,AE),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(_y,TE):2===r&&t.add(_y,AE)}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ar),u.LFG(ue))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const El=new u.OlP("cdk-dir-doc",{providedIn:"root",factory:function VA(){return(0,u.f3M)(ue)}}),BA=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let ME=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new u.vpe,t){const i=t.documentElement?t.documentElement.dir:null;this.value=function uL(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?BA.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||i||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(El,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),_m=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const vy=new u.OlP("mat-sanity-checks",{providedIn:"root",factory:function yy(){return!0}});let bi=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!ml()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(LA),u.LFG(vy,8),u.LFG(ue))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[_m,_m]}),n})();function by(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=yi(e)}}}function ym(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}function vm(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=yi(e)}}}function jA(n){return class extends n{constructor(...e){super(...e),this.errorState=!1}updateErrorState(){const e=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==e&&(this.errorState=s,this.stateChanges.next())}}}let fc=(()=>{class n{isErrorState(t,r){return!!(t&&t.invalid&&(t.touched||r&&r.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class bm{constructor(e,t,r,i=!1){this._renderer=e,this.element=t,this.config=r,this._animationForciblyDisabledThroughCss=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const NE={enterDuration:225,exitDuration:150},wm=Pi({passive:!0}),wy=["mousedown","touchstart"],Em=["mouseup","mouseleave","touchend","touchcancel"];class LE{constructor(e,t,r,i){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=Ao(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...NE,...r.animation};r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const l=r.radius||function Cm(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),h=e-i.left,p=t-i.top,_=s.enterDuration,w=document.createElement("div");w.classList.add("mat-ripple-element"),w.style.left=h-l+"px",w.style.top=p-l+"px",w.style.height=2*l+"px",w.style.width=2*l+"px",null!=r.color&&(w.style.backgroundColor=r.color),w.style.transitionDuration=`${_}ms`,this._containerElement.appendChild(w);const D=window.getComputedStyle(w),P=D.transitionDuration,F="none"===D.transitionProperty||"0s"===P||"0s, 0s"===P,q=new bm(this,w,r,F);w.style.transform="scale3d(1, 1, 1)",q.state=0,r.persistent||(this._mostRecentTransientRipple=q);let oe=null;return!F&&(_||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const xe=()=>this._finishRippleTransition(q),Ge=()=>this._destroyRipple(q);w.addEventListener("transitionend",xe),w.addEventListener("transitioncancel",Ge),oe={onTransitionEnd:xe,onTransitionCancel:Ge}}),this._activeRipples.set(q,oe),(F||!_)&&this._finishRippleTransition(q),q}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,r={...NE,...e.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Ao(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(wy))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(Em),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=1,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=fy(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!oi(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,wm)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&(wy.forEach(e=>{this._triggerElement.removeEventListener(e,this,wm)}),this._pointerUpEventsRegistered&&Em.forEach(e=>{this._triggerElement.removeEventListener(e,this,wm)}))}}const Im=new u.OlP("mat-ripple-global-options");let Dm=(()=>{class n{constructor(t,r,i,s,l){this._elementRef=t,this._animationMode=l,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new LE(this,r,t,i)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,{...this.rippleConfig,...i}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.R0b),u.Y36(ar),u.Y36(Im,8),u.Y36(u.QbO,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,r){2&t&&u.ekj("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),Sm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[bi,bi]}),n})();const nM=["*",[["mat-toolbar-row"]]],xo=["*","mat-toolbar-row"],rM=ym(class{constructor(n){this._elementRef=n}});let UE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),iM=(()=>{class n extends rM{constructor(t,r,i){super(t),this._platform=r,this._document=i}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(ar),u.Y36(ue))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-toolbar"]],contentQueries:function(t,r,i){if(1&t&&u.Suo(i,UE,5),2&t){let s;u.iGM(s=u.CRH())&&(r._toolbarRows=s)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,r){2&t&&u.ekj("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",0===r._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[u.qOj],ngContentSelectors:xo,decls:2,vars:0,template:function(t,r){1&t&&(u.F$t(nM),u.Hsn(0),u.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),n})(),sM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[bi,bi]}),n})();const oM=["mat-button",""],HE=["*"],lM=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],Ut=ym(by(vm(class{constructor(n){this._elementRef=n}})));let pc=(()=>{class n extends Ut{constructor(t,r,i){super(t),this._focusMonitor=r,this._animationMode=i,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of lM)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,r){t?this._focusMonitor.focusVia(this._getHostElement(),t,r):this._getHostElement().focus(r)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(r=>this._getHostElement().hasAttribute(r))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(gm),u.Y36(u.QbO,8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,r){if(1&t&&u.Gf(Dm,5),2&t){let i;u.iGM(i=u.CRH())&&(r.ripple=i.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,r){2&t&&(u.uIk("disabled",r.disabled||null),u.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-button-disabled",r.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[u.qOj],attrs:oM,ngContentSelectors:HE,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,r){1&t&&(u.F$t(),u.TgZ(0,"span",0),u.Hsn(1),u.qZA(),u._UZ(2,"span",1)(3,"span",2)),2&t&&(u.xp6(2),u.ekj("mat-button-ripple-round",r.isRoundButton||r.isIconButton),u.Q6J("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",r.isIconButton)("matRippleTrigger",r._getHostElement()))},dependencies:[Dm],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}.mat-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.mat-flat-button::before,.mat-raised-button::before,.mat-fab::before,.mat-mini-fab::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-stroked-button::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px) * -1)}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}"],encapsulation:2,changeDetection:0}),n})(),Ey=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[Sm,bi,bi]}),n})();class jE{}const Da="*";function Am(n,e){return{type:7,name:n,definitions:e,options:{}}}function du(n,e=null){return{type:4,styles:e,timings:n}}function $E(n,e=null){return{type:2,steps:n,options:e}}function Ro(n){return{type:6,styles:n,offset:null}}function vd(n,e,t){return{type:0,name:n,styles:e,options:t}}function Ys(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function hM(n){Promise.resolve(null).then(n)}class Mm{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){hM(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class WE{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?hM(()=>this._onFinish()):this.players.forEach(l=>{l.onDone(()=>{++t==s&&this._onFinish()}),l.onDestroy(()=>{++r==s&&this._onDestroy()}),l.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((l,h)=>Math.max(l,h.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function qE(n){return new u.vHH(3e3,!1)}function Pm(){return typeof window<"u"&&typeof window.document<"u"}function sf(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Sa(n){switch(n.length){case 0:return new Mm;case 1:return n[0];default:return new WE(n)}}function Nm(n,e,t,r,i=new Map,s=new Map){const l=[],h=[];let p=-1,_=null;if(r.forEach(w=>{const D=w.get("offset"),M=D==p,P=M&&_||new Map;w.forEach((F,q)=>{let oe=q,xe=F;if("offset"!==q)switch(oe=e.normalizePropertyName(oe,l),xe){case"!":xe=i.get(q);break;case Da:xe=s.get(q);break;default:xe=e.normalizeStyleValue(q,oe,xe,l)}P.set(oe,xe)}),M||h.push(P),_=P,p=D}),l.length)throw function km(n){return new u.vHH(3502,!1)}();return h}function rC(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&Ay(t,"start",n)));break;case"done":n.onDone(()=>r(t&&Ay(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&Ay(t,"destroy",n)))}}function Ay(n,e,t){const s=My(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),l=n._data;return null!=l&&(s._data=l),s}function My(n,e,t,r,i="",s=0,l){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!l}}function Cs(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function iC(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let Fm=(n,e)=>!1,CM=(n,e,t)=>[],sC=null;function oC(n){const e=n.parentNode||n.host;return e===sC?null:e}(sf()||typeof Element<"u")&&(Pm()?(sC=(()=>document.documentElement)(),Fm=(n,e)=>{for(;e;){if(e===n)return!0;e=oC(e)}return!1}):Fm=(n,e)=>n.contains(e),CM=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let hu=null,Lm=!1;const DM=Fm,SM=CM;let TM=(()=>{class n{validateStyleProperty(t){return function FL(n){hu||(hu=function LL(){return typeof document<"u"?document.body:null}()||{},Lm=!!hu.style&&"WebkitAppearance"in hu.style);let e=!0;return hu.style&&!function aC(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in hu.style,!e&&Lm&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in hu.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return DM(t,r)}getParentElement(t){return oC(t)}query(t,r,i){return SM(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,l,h=[],p){return new Mm(i,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),lC=(()=>{class n{}return n.NOOP=new TM,n})();const af="ng-enter",Vm="ng-leave",lf="ng-trigger",Ed=".ng-trigger",xy="ng-animating",cf=".ng-animating";function gc(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Ta(parseFloat(e[1]),e[2])}function Ta(n,e){return"s"===e?1e3*n:n}function uf(n,e,t){return n.hasOwnProperty("duration")?n:function MM(n,e,t){let i,s=0,l="";if("string"==typeof n){const h=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===h)return e.push(qE()),{duration:0,delay:0,easing:""};i=Ta(parseFloat(h[1]),h[2]);const p=h[3];null!=p&&(s=Ta(parseFloat(p),h[4]));const _=h[5];_&&(l=_)}else i=n;if(!t){let h=!1,p=e.length;i<0&&(e.push(function bd(){return new u.vHH(3100,!1)}()),h=!0),s<0&&(e.push(function fM(){return new u.vHH(3101,!1)}()),h=!0),h&&e.splice(p,0,qE())}return{duration:i,delay:s,easing:l}}(n,e,t)}function df(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function Ry(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function Oo(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function fu(n,e,t){return t?e+":"+t+";":""}function Bm(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=fu(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=fu(0,kM(t),n.style[t]));n.setAttribute("style",e)}function Fi(n,e,t){n.style&&(e.forEach((r,i)=>{const s=hf(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r}),sf()&&Bm(n))}function Aa(n,e){n.style&&(e.forEach((t,r)=>{const i=hf(r);n.style[i]=""}),sf()&&Bm(n))}function Il(n){return Array.isArray(n)?1==n.length?n[0]:$E(n):n}const Um=new RegExp("{{\\s*(.+?)\\s*}}","g");function ky(n){let e=[];if("string"==typeof n){let t;for(;t=Um.exec(n);)e.push(t[1]);Um.lastIndex=0}return e}function Cd(n,e,t){const r=n.toString(),i=r.replace(Um,(s,l)=>{let h=e[l];return null==h&&(t.push(function Rm(n){return new u.vHH(3003,!1)}()),h=""),h.toString()});return i==r?n:i}function Id(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const uC=/-+([a-z0-9])/g;function hf(n){return n.replace(uC,(...e)=>e[1].toUpperCase())}function kM(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function ts(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function pM(n){return new u.vHH(3004,!1)}()}}function dC(n,e){return window.getComputedStyle(n)[e]}function Oy(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function fC(n,e,t){if(":"==n[0]){const p=function NM(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function OL(n){return new u.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof p)return void e.push(p);n=p}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function bM(n){return new u.vHH(3015,!1)}()),e;const i=r[1],s=r[2],l=r[3];e.push(Py(i,l));"<"==s[0]&&!("*"==i&&"*"==l)&&e.push(Py(l,i))}(r,t,e)):t.push(n),t}const jm=new Set(["true","1"]),$m=new Set(["false","0"]);function Py(n,e){const t=jm.has(n)||$m.has(n),r=jm.has(e)||$m.has(e);return(i,s)=>{let l="*"==n||n==i,h="*"==e||e==s;return!l&&t&&"boolean"==typeof i&&(l=i?jm.has(n):$m.has(n)),!h&&r&&"boolean"==typeof s&&(h=s?jm.has(e):$m.has(e)),l&&h}}const mC=new RegExp("s*:selfs*,?","g");function Ny(n,e,t,r){return new _C(n).build(e,t,r)}class _C{constructor(e){this._driver=e}build(e,t,r){const i=new Ma(t);return this._resetContextStyleTimingState(i),ts(this,Il(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],l=[];return"@"==e.name.charAt(0)&&t.errors.push(function mM(){return new u.vHH(3006,!1)}()),e.definitions.forEach(h=>{if(this._resetContextStyleTimingState(t),0==h.type){const p=h,_=p.name;_.toString().split(/\s*,\s*/).forEach(w=>{p.name=w,s.push(this.visitState(p,t))}),p.name=_}else if(1==h.type){const p=this.visitTransition(h,t);r+=p.queryCount,i+=p.depCount,l.push(p)}else t.errors.push(function gM(){return new u.vHH(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:l,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,l=i||{};r.styles.forEach(h=>{h instanceof Map&&h.forEach(p=>{ky(p).forEach(_=>{l.hasOwnProperty(_)||s.add(_)})})}),s.size&&(Id(s.values()),t.errors.push(function _M(n,e){return new u.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=ts(this,Il(e.animation),t);return{type:1,matchers:Oy(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:pu(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>ts(this,r,t)),options:pu(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(l=>{t.currentTime=r;const h=ts(this,l,t);return i=Math.max(i,t.currentTime),h});return t.currentTime=i,{type:3,steps:s,options:pu(e.options)}}visitAnimate(e,t){const r=function LM(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return vC(uf(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=vC(0,0,"");return s.dynamic=!0,s.strValue=t,s}const i=uf(t,e);return vC(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:Ro({});if(5==s.type)i=this.visitKeyframes(s,t);else{let l=e.styles,h=!1;if(!l){h=!0;const _={};r.easing&&(_.easing=r.easing),l=Ro(_)}t.currentTime+=r.duration+r.delay;const p=this.visitStyle(l,t);p.isEmptyStep=h,i=p}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let h of i)"string"==typeof h?h===Da?r.push(h):t.errors.push(new u.vHH(3002,!1)):r.push(Ry(h));let s=!1,l=null;return r.forEach(h=>{if(h instanceof Map&&(h.has("easing")&&(l=h.get("easing"),h.delete("easing")),!s))for(let p of h.values())if(p.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:r,easing:l,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(l=>{"string"!=typeof l&&l.forEach((h,p)=>{const _=t.collectedStyles.get(t.currentQuerySelector),w=_.get(p);let D=!0;w&&(s!=i&&s>=w.startTime&&i<=w.endTime&&(t.errors.push(function YE(n,e,t,r,i){return new u.vHH(3010,!1)}()),D=!1),s=w.startTime),D&&_.set(p,{startTime:s,endTime:i}),t.options&&function RM(n,e,t){const r=e.params||{},i=ky(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function KE(n){return new u.vHH(3001,!1)}())})}(h,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function vM(){return new u.vHH(3011,!1)}()),r;let s=0;const l=[];let h=!1,p=!1,_=0;const w=e.steps.map(xe=>{const Ge=this._makeStyleAst(xe,t);let Xe=null!=Ge.offset?Ge.offset:function Fy(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(Ge.styles),Qe=0;return null!=Xe&&(s++,Qe=Ge.offset=Xe),p=p||Qe<0||Qe>1,h=h||Qe<_,_=Qe,l.push(Qe),Ge});p&&t.errors.push(function QE(){return new u.vHH(3012,!1)}()),h&&t.errors.push(function XE(){return new u.vHH(3200,!1)}());const D=e.steps.length;let M=0;s>0&&s<D?t.errors.push(function Cy(){return new u.vHH(3202,!1)}()):0==s&&(M=1/(D-1));const P=D-1,F=t.currentTime,q=t.currentAnimateTimings,oe=q.duration;return w.forEach((xe,Ge)=>{const Xe=M>0?Ge==P?1:M*Ge:l[Ge],Qe=Xe*oe;t.currentTime=F+q.delay+Qe,q.duration=Qe,this._validateStyleAst(xe,t),xe.offset=Xe,r.styles.push(xe)}),r}visitReference(e,t){return{type:8,animation:ts(this,Il(e.animation),t),options:pu(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:pu(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:pu(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,l]=function yC(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(mC,"")),n=n.replace(/@\*/g,Ed).replace(/@\w+/g,t=>Ed+"-"+t.slice(1)).replace(/:animating/g,cf),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,Cs(t.collectedStyles,t.currentQuerySelector,new Map);const h=ts(this,Il(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:l,animation:h,originalSelector:e.selector,options:pu(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function kL(){return new u.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:uf(e.timings,t.errors,!0);return{type:12,animation:ts(this,Il(e.animation),t),timings:r,options:null}}}class Ma{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function pu(n){return n?(n=df(n)).params&&(n.params=function FM(n){return n?df(n):null}(n.params)):n={},n}function vC(n,e,t){return{duration:n,delay:e,easing:t}}function Gm(n,e,t,r,i,s,l=null,h=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:l,subTimeline:h}}class zm{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Ly=new RegExp(":enter","g"),HM=new RegExp(":leave","g");function Dd(n,e,t,r,i,s=new Map,l=new Map,h,p,_=[]){return(new Vy).buildKeyframes(n,e,t,r,i,s,l,h,p,_)}class Vy{buildKeyframes(e,t,r,i,s,l,h,p,_,w=[]){_=_||new zm;const D=new mf(e,t,_,i,s,w,[]);D.options=p;const M=p.delay?gc(p.delay):0;D.currentTimeline.delayNextStep(M),D.currentTimeline.setStyles([l],null,D.errors,p),ts(this,r,D);const P=D.timelines.filter(F=>F.containsAnimation());if(P.length&&h.size){let F;for(let q=P.length-1;q>=0;q--){const oe=P[q];if(oe.element===t){F=oe;break}}F&&!F.allowOnlyTimelineStyles()&&F.setStyles([h],null,D.errors,p)}return P.length?P.map(F=>F.buildKeyframes()):[Gm(t,[],[],[],0,M,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,l=this._visitSubInstructions(r,i,i.options);s!=l&&t.transformIntoNewTimeline(l)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const l=null!=r.duration?gc(r.duration):null,h=null!=r.delay?gc(r.delay):null;return 0!==l&&e.forEach(p=>{const _=t.appendInstructionToTimeline(p,l,h);s=Math.max(s,_.duration+_.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),ts(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Wm);const l=gc(s.delay);i.delayNextStep(l)}e.steps.length&&(e.steps.forEach(l=>ts(this,l,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?gc(e.options.delay):0;e.steps.forEach(l=>{const h=t.createSubContext(e.options);s&&h.delayNextStep(s),ts(this,l,h),i=Math.max(i,h.currentTimeline.currentTime),r.push(h.currentTimeline)}),r.forEach(l=>t.currentTimeline.mergeTimelineCollectedStyles(l)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return uf(t.params?Cd(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,h=t.createSubContext().currentTimeline;h.easing=r.easing,e.styles.forEach(p=>{h.forwardTime((p.offset||0)*s),h.setStyles(p.styles,p.easing,t.errors,t.options),h.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(h),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?gc(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Wm);let l=r;const h=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=h.length;let p=null;h.forEach((_,w)=>{t.currentQueryIndex=w;const D=t.createSubContext(e.options,_);s&&D.delayNextStep(s),_===t.element&&(p=D.currentTimeline),ts(this,e.animation,D),D.currentTimeline.applyStylesToKeyframe(),l=Math.max(l,D.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(l),p&&(t.currentTimeline.mergeTimelineCollectedStyles(p),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,l=Math.abs(s.duration),h=l*(t.currentQueryTotal-1);let p=l*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":p=h-p;break;case"full":p=r.currentStaggerTime}const w=t.currentTimeline;p&&w.delayNextStep(p);const D=w.currentTime;ts(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-D+(i.startTime-r.currentTimeline.startTime)}}const Wm={};class mf{constructor(e,t,r,i,s,l,h,p){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=l,this.timelines=h,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Wm,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=p||new gf(this._driver,t,0),h.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=gc(r.duration)),null!=r.delay&&(i.delay=gc(r.delay));const s=r.params;if(s){let l=i.params;l||(l=this.options.params={}),Object.keys(s).forEach(h=>{(!t||!l.hasOwnProperty(h))&&(l[h]=Cd(s[h],l,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new mf(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=Wm,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new HL(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,l){let h=[];if(i&&h.push(this.element),e.length>0){e=(e=e.replace(Ly,"."+this._enterClassName)).replace(HM,"."+this._leaveClassName);let _=this._driver.query(this.element,e,1!=r);0!==r&&(_=r<0?_.slice(_.length+r,_.length):_.slice(0,r)),h.push(..._)}return!s&&0==h.length&&l.push(function Iy(n){return new u.vHH(3014,!1)}()),h}}class gf{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new gf(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Da),this._currentKeyframe.set(t,Da);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const s=i&&i.params||{},l=function By(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let s of r)t.set(s,Da)}else Oo(i,t)}),t}(e,this._globalTimelineStyles);for(let[h,p]of l){const _=Cd(p,s,r);this._pendingStyles.set(h,_),this._localTimelineStyles.has(h)||this._backFill.set(h,this._globalTimelineStyles.get(h)??Da),this._updateStyle(h,_)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((h,p)=>{const _=Oo(h,new Map,this._backFill);_.forEach((w,D)=>{"!"===w?e.add(D):w===Da&&t.add(D)}),r||_.set("offset",p/this.duration),i.push(_)});const s=e.size?Id(e.values()):[],l=t.size?Id(t.values()):[];if(r){const h=i[0],p=new Map(h);h.set("offset",0),p.set("offset",1),i=[h,p]}return Gm(this.element,i,s,l,this.duration,this.startTime,this.easing,!1)}}class HL extends gf{constructor(e,t,r,i,s,l,h=!1){super(e,t,l.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=h,this.timings={duration:l.duration,delay:l.delay,easing:l.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],l=r+t,h=t/l,p=Oo(e[0]);p.set("offset",0),s.push(p);const _=Oo(e[0]);_.set("offset",jM(h)),s.push(_);const w=e.length-1;for(let D=1;D<=w;D++){let M=Oo(e[D]);const P=M.get("offset");M.set("offset",jM((t+P*r)/l)),s.push(M)}r=l,t=0,i="",e=s}return Gm(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function jM(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class qm{}const bC=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class wC extends qm{normalizePropertyName(e,t){return hf(e)}normalizeStyleValue(e,t,r,i){let s="";const l=r.toString().trim();if(bC.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const h=r.match(/^[+-]?[\d\.]+([a-z]*)$/);h&&0==h[1].length&&i.push(function ZE(n,e){return new u.vHH(3005,!1)}())}return l+s}}function Km(n,e,t,r,i,s,l,h,p,_,w,D,M){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:l,timelines:h,queriedElements:p,preStyleProps:_,postStyleProps:w,totalTime:D,errors:M}}const Po={};class _f{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function yf(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,l,h,p,_,w){const D=[],M=this.ast.options&&this.ast.options.params||Po,F=this.buildStyles(r,h&&h.params||Po,D),q=p&&p.params||Po,oe=this.buildStyles(i,q,D),xe=new Set,Ge=new Map,Xe=new Map,Qe="void"===i,Ct={params:GM(q,M),delay:this.ast.options?.delay},St=w?[]:Dd(e,t,this.ast.animation,s,l,F,oe,Ct,_,D);let sn=0;if(St.forEach(zo=>{sn=Math.max(zo.duration+zo.delay,sn)}),D.length)return Km(t,this._triggerName,r,i,Qe,F,oe,[],[],Ge,Xe,sn,D);St.forEach(zo=>{const Hu=zo.element,_W=Cs(Ge,Hu,new Set);zo.preStyleProps.forEach(jp=>_W.add(jp));const W0=Cs(Xe,Hu,new Set);zo.postStyleProps.forEach(jp=>W0.add(jp)),Hu!==t&&xe.add(Hu)});const Wr=Id(xe.values());return Km(t,this._triggerName,r,i,Qe,F,oe,St,Wr,Ge,Xe,sn)}}function GM(n,e){const t=df(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class Hy{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=df(this.defaultParams);return Object.keys(e).forEach(s=>{const l=e[s];null!==l&&(i[s]=l)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((l,h)=>{l&&(l=Cd(l,i,t));const p=this.normalizer.normalizePropertyName(h,t);l=this.normalizer.normalizeStyleValue(h,p,l,t),r.set(p,l)})}),r}}class zM{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new Hy(i.style,i.options&&i.options.params||{},r))}),Sd(this.states,"true","1"),Sd(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new _f(e,i,this.states))}),this.fallbackTransition=function WM(n,e,t){return new _f(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(l,h)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(l=>l.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function Sd(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const qM=new zm;class jL{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],s=Ny(this._driver,t,r,[]);if(r.length)throw function ko(n){return new u.vHH(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,r){const i=e.element,s=Nm(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations.get(e);let l;const h=new Map;if(s?(l=Dd(this._driver,t,s,af,Vm,new Map,new Map,r,qM,i),l.forEach(w=>{const D=Cs(h,w.element,new Map);w.postStyleProps.forEach(M=>D.set(M,null))})):(i.push(function tC(){return new u.vHH(3300,!1)}()),l=[]),i.length)throw function wM(n){return new u.vHH(3504,!1)}();h.forEach((w,D)=>{w.forEach((M,P)=>{w.set(P,this._driver.computeStyle(D,P,Da))})});const _=Sa(l.map(w=>{const D=h.get(w.element);return this._buildPlayer(w,new Map,D)}));return this._playersById.set(e,_),_.onDestroy(()=>this.destroy(e)),this.players.push(_),_}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function Dy(n){return new u.vHH(3301,!1)}();return t}listen(e,t,r,i){const s=My(t,"","","");return rC(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const CC="ng-animate-queued",jy="ng-animate-disabled",IC=[],Zm={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},QM={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ns="__ng_removed";class $y{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function mu(n){return n??null}(r?e.value:e),r){const s=df(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const vf="void",Gy=new $y(vf);class XM{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Qs(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function Cl(n,e){return new u.vHH(3302,!1)}();if(null==r||0==r.length)throw function Sy(n){return new u.vHH(3303,!1)}();if(!function bf(n){return"start"==n||"done"==n}(r))throw function nC(n,e){return new u.vHH(3400,!1)}();const s=Cs(this._elementListeners,e,[]),l={name:t,phase:r,callback:i};s.push(l);const h=Cs(this._engine.statesByElement,e,new Map);return h.has(t)||(Qs(e,lf),Qs(e,lf+"-"+t),h.set(t,Gy)),()=>{this._engine.afterFlush(()=>{const p=s.indexOf(l);p>=0&&s.splice(p,1),this._triggers.has(t)||h.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function Ty(n){return new u.vHH(3401,!1)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),l=new zy(this.id,t,e);let h=this._engine.statesByElement.get(e);h||(Qs(e,lf),Qs(e,lf+"-"+t),this._engine.statesByElement.set(e,h=new Map));let p=h.get(t);const _=new $y(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&p&&_.absorbOptions(p.options),h.set(t,_),p||(p=Gy),_.value!==vf&&p.value===_.value){if(!function Xm(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(p.params,_.params)){const q=[],oe=s.matchStyles(p.value,p.params,q),xe=s.matchStyles(_.value,_.params,q);q.length?this._engine.reportError(q):this._engine.afterFlush(()=>{Aa(e,oe),Fi(e,xe)})}return}const M=Cs(this._engine.playersByElement,e,[]);M.forEach(q=>{q.namespaceId==this.id&&q.triggerName==t&&q.queued&&q.destroy()});let P=s.matchTransition(p.value,_.value,e,_.params),F=!1;if(!P){if(!i)return;P=s.fallbackTransition,F=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:P,fromState:p,toState:_,player:l,isFallbackTransition:F}),F||(Qs(e,CC),l.onStart(()=>{Li(e,CC)})),l.onDone(()=>{let q=this.players.indexOf(l);q>=0&&this.players.splice(q,1);const oe=this._engine.playersByElement.get(e);if(oe){let xe=oe.indexOf(l);xe>=0&&oe.splice(xe,1)}}),this.players.push(l),M.push(l),l}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,Ed,!0);r.forEach(i=>{if(i[ns])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(l=>l.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),l=new Map;if(s){const h=[];if(s.forEach((p,_)=>{if(l.set(_,p.value),this._triggers.has(_)){const w=this.trigger(e,_,vf,i);w&&h.push(w)}}),h.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,l),r&&Sa(h).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const l=s.name;if(i.has(l))return;i.add(l);const p=this._triggers.get(l).fallbackTransition,_=r.get(l)||Gy,w=new $y(vf),D=new zy(this.id,l,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:l,transition:p,fromState:_,toState:w,player:D,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let l=e;for(;l=l.parentNode;)if(r.statesByElement.get(l)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[ns];(!s||s===Zm)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Qs(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,l=this._elementListeners.get(s);l&&l.forEach(h=>{if(h.name==r.triggerName){const p=My(s,r.triggerName,r.fromState.value,r.toState.value);p._data=e,rC(r.player,h.phase,p,h.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,l=i.transition.ast.depCount;return 0==s||0==l?s-l:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class JM{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new XM(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let l=!1,h=this.driver.getParentElement(t);for(;h;){const p=i.get(h);if(p){const _=r.indexOf(p);r.splice(_+1,0,e),l=!0;break}h=this.driver.getParentElement(h)}l||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}return t}trigger(e,t,r,i){if(Wy(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!Wy(t))return;const s=t[ns];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const l=this.collectedLeaveElements.indexOf(t);l>=0&&this.collectedLeaveElements.splice(l,1)}if(e){const l=this._fetchNamespace(e);l&&l.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Qs(e,jy)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Li(e,jy))}removeNode(e,t,r,i){if(Wy(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const l=this.namespacesByHostElement.get(t);l&&l.id!==e&&l.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[ns]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return Wy(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,Ed,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,cf,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Sa(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[ns];if(t&&t.setForRemoval){if(e[ns]=Zm,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(jy)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Qs(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Sa(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function PL(n){return new u.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new zm,i=[],s=new Map,l=[],h=new Map,p=new Map,_=new Map,w=new Set;this.disabledNodes.forEach(gt=>{w.add(gt);const xt=this.driver.query(gt,".ng-animate-queued",!0);for(let Nt=0;Nt<xt.length;Nt++)w.add(xt[Nt])});const D=this.bodyNode,M=Array.from(this.statesByElement.keys()),P=Qm(M,this.collectedEnterElements),F=new Map;let q=0;P.forEach((gt,xt)=>{const Nt=af+q++;F.set(xt,Nt),gt.forEach(Cn=>Qs(Cn,Nt))});const oe=[],xe=new Set,Ge=new Set;for(let gt=0;gt<this.collectedLeaveElements.length;gt++){const xt=this.collectedLeaveElements[gt],Nt=xt[ns];Nt&&Nt.setForRemoval&&(oe.push(xt),xe.add(xt),Nt.hasAnimation?this.driver.query(xt,".ng-star-inserted",!0).forEach(Cn=>xe.add(Cn)):Ge.add(xt))}const Xe=new Map,Qe=Qm(M,Array.from(xe));Qe.forEach((gt,xt)=>{const Nt=Vm+q++;Xe.set(xt,Nt),gt.forEach(Cn=>Qs(Cn,Nt))}),e.push(()=>{P.forEach((gt,xt)=>{const Nt=F.get(xt);gt.forEach(Cn=>Li(Cn,Nt))}),Qe.forEach((gt,xt)=>{const Nt=Xe.get(xt);gt.forEach(Cn=>Li(Cn,Nt))}),oe.forEach(gt=>{this.processLeaveNode(gt)})});const Ct=[],St=[];for(let gt=this._namespaceList.length-1;gt>=0;gt--)this._namespaceList[gt].drainQueuedTransitions(t).forEach(Nt=>{const Cn=Nt.player,xi=Nt.element;if(Ct.push(Cn),this.collectedEnterElements.length){const cs=xi[ns];if(cs&&cs.setForMove){if(cs.previousTriggersValues&&cs.previousTriggersValues.has(Nt.triggerName)){const $p=cs.previousTriggersValues.get(Nt.triggerName),ja=this.statesByElement.get(Nt.element);if(ja&&ja.has(Nt.triggerName)){const hA=ja.get(Nt.triggerName);hA.value=$p,ja.set(Nt.triggerName,hA)}}return void Cn.destroy()}}const Bc=!D||!this.driver.containsElement(D,xi),Wo=Xe.get(xi),Dh=F.get(xi),Er=this._buildInstruction(Nt,r,Dh,Wo,Bc);if(Er.errors&&Er.errors.length)return void St.push(Er);if(Bc)return Cn.onStart(()=>Aa(xi,Er.fromStyles)),Cn.onDestroy(()=>Fi(xi,Er.toStyles)),void i.push(Cn);if(Nt.isFallbackTransition)return Cn.onStart(()=>Aa(xi,Er.fromStyles)),Cn.onDestroy(()=>Fi(xi,Er.toStyles)),void i.push(Cn);const bW=[];Er.timelines.forEach(cs=>{cs.stretchStartingKeyframe=!0,this.disabledNodes.has(cs.element)||bW.push(cs)}),Er.timelines=bW,r.append(xi,Er.timelines),l.push({instruction:Er,player:Cn,element:xi}),Er.queriedElements.forEach(cs=>Cs(h,cs,[]).push(Cn)),Er.preStyleProps.forEach((cs,$p)=>{if(cs.size){let ja=p.get($p);ja||p.set($p,ja=new Set),cs.forEach((hA,F1)=>ja.add(F1))}}),Er.postStyleProps.forEach((cs,$p)=>{let ja=_.get($p);ja||_.set($p,ja=new Set),cs.forEach((hA,F1)=>ja.add(F1))})});if(St.length){const gt=[];St.forEach(xt=>{gt.push(function NL(n,e){return new u.vHH(3505,!1)}())}),Ct.forEach(xt=>xt.destroy()),this.reportError(gt)}const sn=new Map,Wr=new Map;l.forEach(gt=>{const xt=gt.element;r.has(xt)&&(Wr.set(xt,xt),this._beforeAnimationBuild(gt.player.namespaceId,gt.instruction,sn))}),i.forEach(gt=>{const xt=gt.element;this._getPreviousPlayers(xt,!1,gt.namespaceId,gt.triggerName,null).forEach(Cn=>{Cs(sn,xt,[]).push(Cn),Cn.destroy()})});const zo=oe.filter(gt=>Ds(gt,p,_)),Hu=new Map;SC(Hu,this.driver,Ge,_,Da).forEach(gt=>{Ds(gt,p,_)&&zo.push(gt)});const W0=new Map;P.forEach((gt,xt)=>{SC(W0,this.driver,new Set(gt),p,"!")}),zo.forEach(gt=>{const xt=Hu.get(gt),Nt=W0.get(gt);Hu.set(gt,new Map([...Array.from(xt?.entries()??[]),...Array.from(Nt?.entries()??[])]))});const jp=[],yW=[],vW={};l.forEach(gt=>{const{element:xt,player:Nt,instruction:Cn}=gt;if(r.has(xt)){if(w.has(xt))return Nt.onDestroy(()=>Fi(xt,Cn.toStyles)),Nt.disabled=!0,Nt.overrideTotalTime(Cn.totalTime),void i.push(Nt);let xi=vW;if(Wr.size>1){let Wo=xt;const Dh=[];for(;Wo=Wo.parentNode;){const Er=Wr.get(Wo);if(Er){xi=Er;break}Dh.push(Wo)}Dh.forEach(Er=>Wr.set(Er,xi))}const Bc=this._buildAnimation(Nt.namespaceId,Cn,sn,s,W0,Hu);if(Nt.setRealPlayer(Bc),xi===vW)jp.push(Nt);else{const Wo=this.playersByElement.get(xi);Wo&&Wo.length&&(Nt.parentPlayer=Sa(Wo)),i.push(Nt)}}else Aa(xt,Cn.fromStyles),Nt.onDestroy(()=>Fi(xt,Cn.toStyles)),yW.push(Nt),w.has(xt)&&i.push(Nt)}),yW.forEach(gt=>{const xt=s.get(gt.element);if(xt&&xt.length){const Nt=Sa(xt);gt.setRealPlayer(Nt)}}),i.forEach(gt=>{gt.parentPlayer?gt.syncPlayerEvents(gt.parentPlayer):gt.destroy()});for(let gt=0;gt<oe.length;gt++){const xt=oe[gt],Nt=xt[ns];if(Li(xt,Vm),Nt&&Nt.hasAnimation)continue;let Cn=[];if(h.size){let Bc=h.get(xt);Bc&&Bc.length&&Cn.push(...Bc);let Wo=this.driver.query(xt,cf,!0);for(let Dh=0;Dh<Wo.length;Dh++){let Er=h.get(Wo[Dh]);Er&&Er.length&&Cn.push(...Er)}}const xi=Cn.filter(Bc=>!Bc.destroyed);xi.length?wf(this,xt,xi):this.processLeaveNode(xt)}return oe.length=0,jp.forEach(gt=>{this.players.push(gt),gt.onDone(()=>{gt.destroy();const xt=this.players.indexOf(gt);this.players.splice(xt,1)}),gt.play()}),jp}elementContainsData(e,t){let r=!1;const i=t[ns];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let l=[];if(t){const h=this.playersByQueriedElement.get(e);h&&(l=h)}else{const h=this.playersByElement.get(e);if(h){const p=!s||s==vf;h.forEach(_=>{_.queued||!p&&_.triggerName!=i||l.push(_)})}}return(r||i)&&(l=l.filter(h=>!(r&&r!=h.namespaceId||i&&i!=h.triggerName))),l}_beforeAnimationBuild(e,t,r){const s=t.element,l=t.isRemovalTransition?void 0:e,h=t.isRemovalTransition?void 0:t.triggerName;for(const p of t.timelines){const _=p.element,w=_!==s,D=Cs(r,_,[]);this._getPreviousPlayers(_,w,l,h,t.toState).forEach(P=>{const F=P.getRealPlayer();F.beforeDestroy&&F.beforeDestroy(),P.destroy(),D.push(P)})}Aa(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,l){const h=t.triggerName,p=t.element,_=[],w=new Set,D=new Set,M=t.timelines.map(F=>{const q=F.element;w.add(q);const oe=q[ns];if(oe&&oe.removedBeforeQueried)return new Mm(F.duration,F.delay);const xe=q!==p,Ge=function wi(n){const e=[];return _c(n,e),e}((r.get(q)||IC).map(sn=>sn.getRealPlayer())).filter(sn=>!!sn.element&&sn.element===q),Xe=s.get(q),Qe=l.get(q),Ct=Nm(0,this._normalizer,0,F.keyframes,Xe,Qe),St=this._buildPlayer(F,Ct,Ge);if(F.subTimeline&&i&&D.add(q),xe){const sn=new zy(e,h,q);sn.setRealPlayer(St),_.push(sn)}return St});_.forEach(F=>{Cs(this.playersByQueriedElement,F.element,[]).push(F),F.onDone(()=>function Ym(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,F.element,F))}),w.forEach(F=>Qs(F,xy));const P=Sa(M);return P.onDestroy(()=>{w.forEach(F=>Li(F,xy)),Fi(p,t.toStyles)}),D.forEach(F=>{Cs(i,F,[]).push(P)}),P}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Mm(e.duration,e.delay)}}class zy{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Mm,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>rC(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Cs(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function Wy(n){return n&&1===n.nodeType}function DC(n,e){const t=n.style.display;return n.style.display=e??"none",t}function SC(n,e,t,r,i){const s=[];t.forEach(p=>s.push(DC(p)));const l=[];r.forEach((p,_)=>{const w=new Map;p.forEach(D=>{const M=e.computeStyle(_,D,i);w.set(D,M),(!M||0==M.length)&&(_[ns]=QM,l.push(_))}),n.set(_,w)});let h=0;return t.forEach(p=>DC(p,s[h++])),l}function Qm(n,e){const t=new Map;if(n.forEach(h=>t.set(h,[])),0==e.length)return t;const i=new Set(e),s=new Map;function l(h){if(!h)return 1;let p=s.get(h);if(p)return p;const _=h.parentNode;return p=t.has(_)?_:i.has(_)?1:l(_),s.set(h,p),p}return e.forEach(h=>{const p=l(h);1!==p&&t.get(p).push(h)}),t}function Qs(n,e){n.classList?.add(e)}function Li(n,e){n.classList?.remove(e)}function wf(n,e,t){Sa(t).onDone(()=>n.processLeaveNode(e))}function _c(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof WE?_c(r.players,e):e.push(r)}}function Ds(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class Td{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new JM(e,t,r),this._timelineEngine=new jL(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const l=e+"-"+i;let h=this._triggerCache[l];if(!h){const p=[],w=Ny(this._driver,s,p,[]);if(p.length)throw function eC(n,e){return new u.vHH(3404,!1)}();h=function EC(n,e,t){return new zM(n,e,t)}(i,w,this._normalizer),this._triggerCache[l]=h}this._transitionEngine.registerTrigger(t,i,h)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,l]=iC(r);this._timelineEngine.command(s,t,l,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[l,h]=iC(r);return this._timelineEngine.listen(l,t,h,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Md=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Fi(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Fi(this._element,this._initialStyles),this._endStyles&&(Fi(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Aa(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Aa(this._element,this._endStyles),this._endStyles=null),Fi(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function yc(n){let e=null;return n.forEach((t,r)=>{(function xd(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class gu{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:dC(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Rd{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return DM(e,t)}getParentElement(e){return oC(e)}query(e,t,r){return SM(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,s,l=[]){const p={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(p.easing=s);const _=new Map,w=l.filter(P=>P instanceof gu);(function BL(n,e){return 0===n||0===e})(r,i)&&w.forEach(P=>{P.currentSnapshot.forEach((F,q)=>_.set(q,F))});let D=function xM(n){return n.length?n[0]instanceof Map?n:n.map(e=>Ry(e)):[]}(t).map(P=>Oo(P));D=function OM(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,l)=>{r.has(l)||i.push(l),r.set(l,s)}),i.length)for(let s=1;s<e.length;s++){let l=e[s];i.forEach(h=>l.set(h,dC(n,h)))}}return e}(e,D,_);const M=function Ad(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=yc(e[0]),e.length>1&&(r=yc(e[e.length-1]))):e instanceof Map&&(t=yc(e)),t||r?new Md(n,t,r):null}(e,D);return new gu(e,D,p,M)}}let kd=(()=>{class n extends jE{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:u.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?$E(t):t;return qy(this._renderer,null,r,"register",[i]),new Od(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.FYo),u.LFG(ue))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class Od extends class uM{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Pd(this._id,e,t||{},this._renderer)}}class Pd{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return qy(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function qy(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const Ky="@.disabled";let TC=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(s,l)=>{const h=l?.parentNode(s);h&&l.removeChild(h,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let w=this._rendererCache.get(s);return w||(w=new Zy("",s,this.engine),this._rendererCache.set(s,w)),w}const l=r.id,h=r.id+"-"+this._currentId;this._currentId++,this.engine.register(h,t);const p=w=>{Array.isArray(w)?w.forEach(p):this.engine.registerTrigger(l,h,t,w.name,w)};return r.data.animation.forEach(p),new AC(this,h,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[l,h]=s;l(h)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.FYo),u.LFG(Td),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class Zy{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==Ky?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class AC extends Zy{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==Ky?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function MC(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),l="";return"@"!=s.charAt(0)&&([s,l]=function xC(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,l,h=>{this.factory.scheduleListenerCallback(h._data||-1,r,h)})}return this.delegate.listen(e,t,r)}}let RC=(()=>{class n extends Td{constructor(t,r,i,s){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ue),u.LFG(lC),u.LFG(qm),u.LFG(u.z2F))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Yy=[{provide:jE,useClass:kd},{provide:qm,useFactory:function ex(){return new wC}},{provide:Td,useClass:RC},{provide:u.FYo,useFactory:function tx(n,e,t){return new TC(n,e,t)},deps:[sl,Td,u.R0b]}],Qy=[{provide:lC,useFactory:()=>new Rd},{provide:u.QbO,useValue:"BrowserAnimations"},...Yy],Xy=[{provide:lC,useClass:TM},{provide:u.QbO,useValue:"NoopAnimations"},...Yy];let Jy=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?Xy:Qy}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:Qy,imports:[bo]}),n})();const Cf=Pi({passive:!0});let tv=(()=>{class n{constructor(t,r){this._platform=t,this._ngZone=r,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return Zs.E;const r=Ao(t),i=this._monitoredElements.get(r);if(i)return i.subject;const s=new Bt.x,l="cdk-text-field-autofilled",h=p=>{"cdk-text-field-autofill-start"!==p.animationName||r.classList.contains(l)?"cdk-text-field-autofill-end"===p.animationName&&r.classList.contains(l)&&(r.classList.remove(l),this._ngZone.run(()=>s.next({target:p.target,isAutofilled:!1}))):(r.classList.add(l),this._ngZone.run(()=>s.next({target:p.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{r.addEventListener("animationstart",h,Cf),r.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(r,{subject:s,unlisten:()=>{r.removeEventListener("animationstart",h,Cf)}}),s}stopMonitoring(t){const r=Ao(t),i=this._monitoredElements.get(r);i&&(i.unlisten(),i.subject.complete(),r.classList.remove("cdk-text-field-autofill-monitored"),r.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(r))}ngOnDestroy(){this._monitoredElements.forEach((t,r)=>this.stopMonitoring(r))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ar),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),If=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();function rv(...n){const e=(0,ws.jO)(n),{args:t,keys:r}=sy(n),i=new sr.y(s=>{const{length:l}=t;if(!l)return void s.complete();const h=new Array(l);let p=l,_=l;for(let w=0;w<l;w++){let D=!1;(0,Ia.Xf)(t[w]).subscribe((0,zn.x)(s,M=>{D||(D=!0,_--),h[w]=M},()=>p--,void 0,()=>{(!p||!D)&&(_||s.next(r?pE(r,h):h),s.complete())}))}});return e?i.pipe(oy(e)):i}function Sl(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function FC(n){return null!=n&&"number"==typeof n.length}const ai=new u.OlP("NgValidators"),Tl=new u.OlP("NgAsyncValidators"),LC=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class ov{static min(e){return function av(n){return e=>{if(Sl(e.value)||Sl(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function lv(n){return e=>{if(Sl(e.value)||Sl(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function cv(n){return Sl(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function uv(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function dv(n){return Sl(n.value)||LC.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function hv(n){return e=>Sl(e.value)||!FC(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function fv(n){return e=>FC(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function pv(n){if(!n)return mv;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Sl(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return HC(e)}static composeAsync(e){return vv(e)}}function mv(n){return null}function VC(n){return null!=n}function BC(n){return(0,u.QGY)(n)?(0,fn.D)(n):n}function gv(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function UC(n,e){return e.map(t=>t(n))}function _v(n){return n.map(e=>function jr(n){return!n.validate}(e)?e:t=>e.validate(t))}function HC(n){if(!n)return null;const e=n.filter(VC);return 0==e.length?null:function(t){return gv(UC(t,e))}}function yv(n){return null!=n?HC(_v(n)):null}function vv(n){if(!n)return null;const e=n.filter(VC);return 0==e.length?null:function(t){return rv(UC(t,e).map(BC)).pipe((0,lt.U)(gv))}}function bv(n){return null!=n?vv(_v(n)):null}function wv(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Ev(n){return n._rawValidators}function _u(n){return n._rawAsyncValidators}function Cv(n){return n?Array.isArray(n)?n:[n]:[]}function tg(n,e){return Array.isArray(n)?n.includes(e):n===e}function Iv(n,e){const t=Cv(e);return Cv(n).forEach(i=>{tg(t,i)||t.push(i)}),t}function jC(n,e){return Cv(e).filter(t=>!tg(n,t))}class Dv{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=yv(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=bv(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class rs extends Dv{get formDirective(){return null}get path(){return null}}class xa extends Dv{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}const Nd="VALID",Fd="INVALID",Ml="PENDING",Ld="DISABLED";function ag(n){return(Df(n)?n.validators:n)||null}function Tv(n){return Array.isArray(n)?yv(n):n||null}function lg(n,e){return(Df(e)?e.asyncValidators:n)||null}function Av(n){return Array.isArray(n)?bv(n):n||null}function Df(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class WC{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Tv(this._rawValidators),this._composedAsyncValidatorFn=Av(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Nd}get invalid(){return this.status===Fd}get pending(){return this.status==Ml}get disabled(){return this.status===Ld}get enabled(){return this.status!==Ld}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Tv(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Av(e)}addValidators(e){this.setValidators(Iv(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Iv(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(jC(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(jC(e,this._rawAsyncValidators))}hasValidator(e){return tg(this._rawValidators,e)}hasAsyncValidator(e){return tg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ml,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ld,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Nd,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Nd||this.status===Ml)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ld:Nd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ml,this._hasOwnPendingAsyncValidator=!0;const t=BC(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new u.vpe,this.statusChanges=new u.vpe}_calculateStatus(){return this._allControlsDisabled()?Ld:this.errors?Fd:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ml)?Ml:this._anyControlsHaveStatus(Fd)?Fd:Nd}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Df(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class Rv extends WC{constructor(e,t,r){super(ag(t),lg(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function xv(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new u.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function Mv(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new u.vHH(1e3,"");if(!r[t])throw new u.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function Sf(n,e){kv(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function ux(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&qC(n,e)})}(n,e),function hx(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function dx(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&qC(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function cx(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function ug(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),hg(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function dg(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function kv(n,e){const t=Ev(n);null!==e.validator?n.setValidators(wv(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=_u(n);null!==e.asyncValidator?n.setAsyncValidators(wv(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();dg(e._rawValidators,i),dg(e._rawAsyncValidators,i)}function hg(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=Ev(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(l=>l!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=_u(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(l=>l!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return dg(e._rawValidators,r),dg(e._rawAsyncValidators,r),t}function qC(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function KC(n,e){kv(n,e)}function Pv(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}const yu={provide:rs,useExisting:(0,u.Gpc)(()=>mg)},Tf=(()=>Promise.resolve(null))();let mg=(()=>{class n extends rs{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new u.vpe,this.form=new Rv({},yv(t),bv(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Tf.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Sf(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Tf.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Tf.then(()=>{const r=this._findContainer(t.path),i=new Rv({});KC(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Tf.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Tf.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,Pv(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(ai,10),u.Y36(Tl,10))},n.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&u.NdJ("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([yu]),u.qOj]}),n})();function vu(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function mx(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const gg=class extends WC{constructor(e=null,t,r){super(ag(t),lg(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Df(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=mx(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){vu(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){vu(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){mx(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},vx={provide:rs,useExisting:(0,u.Gpc)(()=>_g)};let _g=(()=>{class n extends rs{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new u.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(hg(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Sf(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){ug(t.control||null,t,!1),function Nv(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,Pv(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(ug(r||null,t),(n=>n instanceof gg)(i)&&(Sf(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);KC(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function ZC(n,e){return hg(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){kv(this.form,this),this._oldForm&&hg(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(ai,10),u.Y36(Tl,10))},n.\u0275dir=u.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&u.NdJ("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([vx]),u.qOj,u.TTD]}),n})(),bg=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Vx=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,r)=>this._cleanupObserver(r))}observe(t){const r=Ao(t);return new sr.y(i=>{const l=this._observeElement(r).subscribe(i);return()=>{l.unsubscribe(),this._unobserveElement(r)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const r=new Bt.x,i=this._mutationObserverFactory.create(s=>r.next(s));i&&i.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:i,stream:r,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:r,stream:i}=this._observedElements.get(t);r&&r.disconnect(),i.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(bg))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),yI=(()=>{class n{constructor(t,r,i){this._contentObserver=t,this._elementRef=r,this._ngZone=i,this.event=new u.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=yi(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=function wA(n,e=0){return function ny(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(Yh(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Vx),u.Y36(u.SBq),u.Y36(u.R0b))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),Bx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[bg]}),n})();var vc=L(6451),li=L(5577),Ux=L(1144),ka=L(576);const Hx=["addListener","removeListener"],jx=["addEventListener","removeEventListener"],$x=["on","off"];function Rf(n,e,t,r){if((0,ka.m)(t)&&(r=t,t=void 0),r)return Rf(n,e,t).pipe(oy(r));const[i,s]=function vI(n){return(0,ka.m)(n.addEventListener)&&(0,ka.m)(n.removeEventListener)}(n)?jx.map(l=>h=>n[l](e,h,t)):function Gx(n){return(0,ka.m)(n.addListener)&&(0,ka.m)(n.removeListener)}(n)?Hx.map(Gv(n,e)):function zx(n){return(0,ka.m)(n.on)&&(0,ka.m)(n.off)}(n)?$x.map(Gv(n,e)):[];if(!i&&(0,Ux.z)(n))return(0,li.z)(l=>Rf(l,e,t))((0,Ia.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new sr.y(l=>{const h=(...p)=>l.next(1<p.length?p:p[0]);return i(h),()=>s(h)})}function Gv(n,e){return t=>r=>n[t](e,r)}const Wx=["connectionContainer"],qx=["inputContainer"],Kx=["label"];function zv(n,e){1&n&&(u.ynx(0),u.TgZ(1,"div",14),u._UZ(2,"div",15)(3,"div",16)(4,"div",17),u.qZA(),u.TgZ(5,"div",18),u._UZ(6,"div",15)(7,"div",16)(8,"div",17),u.qZA(),u.BQk())}function Wv(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",19),u.NdJ("cdkObserveContent",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.updateOutlineGap())}),u.Hsn(1,1),u.qZA()}if(2&n){const t=u.oxw();u.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)}}function bI(n,e){if(1&n&&(u.ynx(0),u.Hsn(1,2),u.TgZ(2,"span"),u._uU(3),u.qZA(),u.BQk()),2&n){const t=u.oxw(2);u.xp6(3),u.Oqu(t._control.placeholder)}}function qv(n,e){1&n&&u.Hsn(0,3,["*ngSwitchCase","true"])}function Zx(n,e){1&n&&(u.TgZ(0,"span",23),u._uU(1," *"),u.qZA())}function Yx(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"label",20,21),u.NdJ("cdkObserveContent",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.updateOutlineGap())}),u.YNc(2,bI,4,1,"ng-container",12),u.YNc(3,qv,1,0,"ng-content",12),u.YNc(4,Zx,2,0,"span",22),u.qZA()}if(2&n){const t=u.oxw();u.ekj("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),u.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),u.uIk("for",t._control.id)("aria-owns",t._control.id),u.xp6(2),u.Q6J("ngSwitchCase",!1),u.xp6(1),u.Q6J("ngSwitchCase",!0),u.xp6(1),u.Q6J("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function Kv(n,e){1&n&&(u.TgZ(0,"div",24),u.Hsn(1,4),u.qZA())}function Qx(n,e){if(1&n&&(u.TgZ(0,"div",25),u._UZ(1,"span",26),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.ekj("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function wI(n,e){if(1&n&&(u.TgZ(0,"div"),u.Hsn(1,5),u.qZA()),2&n){const t=u.oxw();u.Q6J("@transitionMessages",t._subscriptAnimationState)}}function jd(n,e){if(1&n&&(u.TgZ(0,"div",30),u._uU(1),u.qZA()),2&n){const t=u.oxw(2);u.Q6J("id",t._hintLabelId),u.xp6(1),u.Oqu(t.hintLabel)}}function EI(n,e){if(1&n&&(u.TgZ(0,"div",27),u.YNc(1,jd,2,2,"div",28),u.Hsn(2,6),u._UZ(3,"div",29),u.Hsn(4,7),u.qZA()),2&n){const t=u.oxw();u.Q6J("@transitionMessages",t._subscriptAnimationState),u.xp6(1),u.Q6J("ngIf",t.hintLabel)}}const Xx=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],hV=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],Zv=new u.OlP("MatError"),Yv={transitionMessages:Am("transitionMessages",[vd("enter",Ro({opacity:1,transform:"translateY(0%)"})),Ys("void => enter",[Ro({opacity:0,transform:"translateY(-5px)"}),du("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let Qv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n}),n})();const II=new u.OlP("MatHint");let kf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["mat-label"]]}),n})(),iR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["mat-placeholder"]]}),n})();const sR=new u.OlP("MatPrefix"),DI=new u.OlP("MatSuffix");let Xv=0;const mV=ym(class{constructor(n){this._elementRef=n}},"primary"),gV=new u.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),TI=new u.OlP("MatFormField");let Jv=(()=>{class n extends mV{constructor(t,r,i,s,l,h,p){super(t),this._changeDetectorRef=r,this._dir=i,this._defaults=s,this._platform=l,this._ngZone=h,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new Bt.x,this._hideRequiredMarker=!1,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+Xv++,this._labelId="mat-form-field-label-"+Xv++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==p,this.appearance=s?.appearance||"legacy",s&&(this._hideRequiredMarker=Boolean(s.hideRequiredMarker),s.color&&(this.color=this.defaultColor=s.color))}get appearance(){return this._appearance}set appearance(t){const r=this._appearance;this._appearance=t||this._defaults?.appearance||"legacy","outline"===this._appearance&&r!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=yi(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(vi(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(To(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(To(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,vc.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(vi(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(vi(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(To(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const r=this._control?this._control.ngControl:null;return r&&r[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,Rf(this._label.nativeElement,"transitionend").pipe(Ni(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const r=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,i=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;r?t.push(r.id):this._hintLabel&&t.push(this._hintLabelId),i&&t.push(i.id)}else this._errorChildren&&t.push(...this._errorChildren.map(r=>r.id));this._control.setDescribedByIds(t)}}_validateControlChild(){}updateOutlineGap(){const t=this._label?this._label.nativeElement:null,r=this._connectionContainerRef.nativeElement,i=".mat-form-field-outline-start",s=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!t||!t.children.length||!t.textContent.trim()){const w=r.querySelectorAll(`${i}, ${s}`);for(let D=0;D<w.length;D++)w[D].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let l=0,h=0;const p=r.querySelectorAll(i),_=r.querySelectorAll(s);if(this._label&&this._label.nativeElement.children.length){const w=r.getBoundingClientRect();if(0===w.width&&0===w.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const D=this._getStartEnd(w),M=t.children,P=this._getStartEnd(M[0].getBoundingClientRect());let F=0;for(let q=0;q<M.length;q++)F+=M[q].offsetWidth;l=Math.abs(P-D)-5,h=F>0?.75*F+10:0}for(let w=0;w<p.length;w++)p[w].style.width=`${l}px`;for(let w=0;w<_.length;w++)_[w].style.width=`${h}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const r=t.getRootNode();return r&&r!==t}return document.documentElement.contains(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.sBO),u.Y36(ME,8),u.Y36(gV,8),u.Y36(ar),u.Y36(u.R0b),u.Y36(u.QbO,8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-form-field"]],contentQueries:function(t,r,i){if(1&t&&(u.Suo(i,Qv,5),u.Suo(i,Qv,7),u.Suo(i,kf,5),u.Suo(i,kf,7),u.Suo(i,iR,5),u.Suo(i,Zv,5),u.Suo(i,II,5),u.Suo(i,sR,5),u.Suo(i,DI,5)),2&t){let s;u.iGM(s=u.CRH())&&(r._controlNonStatic=s.first),u.iGM(s=u.CRH())&&(r._controlStatic=s.first),u.iGM(s=u.CRH())&&(r._labelChildNonStatic=s.first),u.iGM(s=u.CRH())&&(r._labelChildStatic=s.first),u.iGM(s=u.CRH())&&(r._placeholderChild=s.first),u.iGM(s=u.CRH())&&(r._errorChildren=s),u.iGM(s=u.CRH())&&(r._hintChildren=s),u.iGM(s=u.CRH())&&(r._prefixChildren=s),u.iGM(s=u.CRH())&&(r._suffixChildren=s)}},viewQuery:function(t,r){if(1&t&&(u.Gf(Wx,7),u.Gf(qx,5),u.Gf(Kx,5)),2&t){let i;u.iGM(i=u.CRH())&&(r._connectionContainerRef=i.first),u.iGM(i=u.CRH())&&(r._inputContainerRef=i.first),u.iGM(i=u.CRH())&&(r._label=i.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(t,r){2&t&&u.ekj("mat-form-field-appearance-standard","standard"==r.appearance)("mat-form-field-appearance-fill","fill"==r.appearance)("mat-form-field-appearance-outline","outline"==r.appearance)("mat-form-field-appearance-legacy","legacy"==r.appearance)("mat-form-field-invalid",r._control.errorState)("mat-form-field-can-float",r._canLabelFloat())("mat-form-field-should-float",r._shouldLabelFloat())("mat-form-field-has-label",r._hasFloatingLabel())("mat-form-field-hide-placeholder",r._hideControlPlaceholder())("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-focused",r._control.focused)("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))("_mat-animation-noopable",!r._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[u._Bn([{provide:TI,useExisting:n}]),u.qOj],ngContentSelectors:hV,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,r){1&t&&(u.F$t(Xx),u.TgZ(0,"div",0)(1,"div",1,2),u.NdJ("click",function(s){return r._control.onContainerClick&&r._control.onContainerClick(s)}),u.YNc(3,zv,9,0,"ng-container",3),u.YNc(4,Wv,2,1,"div",4),u.TgZ(5,"div",5,6),u.Hsn(7),u.TgZ(8,"span",7),u.YNc(9,Yx,5,16,"label",8),u.qZA()(),u.YNc(10,Kv,2,0,"div",9),u.qZA(),u.YNc(11,Qx,2,4,"div",10),u.TgZ(12,"div",11),u.YNc(13,wI,2,1,"div",12),u.YNc(14,EI,5,2,"div",13),u.qZA()()),2&t&&(u.xp6(3),u.Q6J("ngIf","outline"==r.appearance),u.xp6(1),u.Q6J("ngIf",r._prefixChildren.length),u.xp6(5),u.Q6J("ngIf",r._hasFloatingLabel()),u.xp6(1),u.Q6J("ngIf",r._suffixChildren.length),u.xp6(1),u.Q6J("ngIf","outline"!=r.appearance),u.xp6(1),u.Q6J("ngSwitch",r._getDisplayedMessages()),u.xp6(1),u.Q6J("ngSwitchCase","error"),u.xp6(1),u.Q6J("ngSwitchCase","hint"))},dependencies:[Tn,po,jl,yI],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}','.mat-input-element{font:inherit;background:rgba(0,0,0,0);color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}._mat-animation-noopable .mat-input-element::placeholder{transition:none}._mat-animation-noopable .mat-input-element::-moz-placeholder{transition:none}._mat-animation-noopable .mat-input-element::-webkit-input-placeholder{transition:none}._mat-animation-noopable .mat-input-element:-ms-input-placeholder{transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:rgba(0,0,0,0)}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}"],encapsulation:2,data:{animation:[Yv.transitionMessages]},changeDetection:0}),n})(),AI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[$c,bi,Bx,bi]}),n})();const aR=new u.OlP("MAT_INPUT_VALUE_ACCESSOR"),lR=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let cR=0;const uR=jA(class{constructor(n,e,t,r){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=r,this.stateChanges=new Bt.x}});let eb=(()=>{class n extends uR{constructor(t,r,i,s,l,h,p,_,w,D){super(h,s,l,i),this._elementRef=t,this._platform=r,this._autofillMonitor=_,this._formField=D,this._uid="mat-input-"+cR++,this.focused=!1,this.stateChanges=new Bt.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(F=>es().has(F)),this._iOSKeyupListener=F=>{const q=F.target;!q.value&&0===q.selectionStart&&0===q.selectionEnd&&(q.setSelectionRange(1,1),q.setSelectionRange(0,0))};const M=this._elementRef.nativeElement,P=M.nodeName.toLowerCase();this._inputValueAccessor=p||M,this._previousNativeValue=this.value,this.id=this.id,r.IOS&&w.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===P,this._isTextarea="textarea"===P,this._isInFormField=!!D,this._isNativeSelect&&(this.controlType=M.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=yi(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(ov.required)??!1}set required(t){this._required=yi(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&es().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=yi(t)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){const t=this._formField,r=t&&"legacy"===t.appearance&&!t._hasLabel?.()?null:this.placeholder;if(r!==this._previousPlaceholder){const i=this._elementRef.nativeElement;this._previousPlaceholder=r,r?i.setAttribute("placeholder",r):i.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){lR.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,r=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&r&&r.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(ar),u.Y36(xa,10),u.Y36(mg,8),u.Y36(_g,8),u.Y36(fc),u.Y36(aR,10),u.Y36(tv),u.Y36(u.R0b),u.Y36(TI,8))},n.\u0275dir=u.lG2({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(t,r){1&t&&u.NdJ("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),2&t&&(u.Ikx("disabled",r.disabled)("required",r.required),u.uIk("id",r.id)("data-placeholder",r.placeholder)("name",r.name||null)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required),u.ekj("mat-input-server",r._isServer)("mat-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[u._Bn([{provide:Qv,useExisting:n}]),u.qOj,u.TTD]}),n})(),dR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[fc],imports:[If,AI,bi,If,AI]}),n})();function $d(n,e){const t=(0,ka.m)(n)?n:()=>n,r=i=>i.error(t());return new sr.y(e?i=>e.schedule(r,0,i):r)}function xl(n){return(0,lr.e)((e,t)=>{let s,r=null,i=!1;r=e.subscribe((0,zn.x)(t,void 0,void 0,l=>{s=(0,Ia.Xf)(n(l,xl(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function bc(n){return(0,lr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}var wg=L(3099);function Rl(n,e){return(0,ka.m)(e)?(0,li.z)(n,e,1):(0,li.z)(n,1)}class tb{}class nb{}class Oa{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(l):this.headers.set(s,[l])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Oa?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Oa;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Oa?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let l=this.headers.get(t);if(!l)return;l=l.filter(h=>-1===s.indexOf(h)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class fR{encodeKey(e){return xI(e)}encodeValue(e){return xI(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const MI=/%(\d[a-f0-9])/gi,pR={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function xI(n){return encodeURIComponent(n).replace(MI,(e,t)=>pR[t]??e)}function Eg(n){return`${n}`}class wc{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new fR,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function yV(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[l,h]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],p=t.get(l)||[];p.push(h),t.set(l,p)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(Eg):[Eg(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new wc({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Eg(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(Eg(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class mR{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function Fo(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function RI(n){return typeof Blob<"u"&&n instanceof Blob}function Of(n){return typeof FormData<"u"&&n instanceof FormData}class Nf{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function rb(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Oa),this.context||(this.context=new mR),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const h=t.indexOf("?");this.urlWithParams=t+(-1===h?"?":h<t.length-1?"&":"")+l}}else this.params=new wc,this.urlWithParams=t}serializeBody(){return null===this.body?null:Fo(this.body)||RI(this.body)||Of(this.body)||function Pf(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof wc?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Of(this.body)?null:RI(this.body)?this.body.type||null:Fo(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof wc?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,l=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,h=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let p=e.headers||this.headers,_=e.params||this.params;const w=e.context??this.context;return void 0!==e.setHeaders&&(p=Object.keys(e.setHeaders).reduce((D,M)=>D.set(M,e.setHeaders[M]),p)),e.setParams&&(_=Object.keys(e.setParams).reduce((D,M)=>D.set(M,e.setParams[M]),_)),new Nf(t,r,s,{params:_,headers:p,context:w,reportProgress:h,responseType:i,withCredentials:l})}}var Pr=(()=>((Pr=Pr||{})[Pr.Sent=0]="Sent",Pr[Pr.UploadProgress=1]="UploadProgress",Pr[Pr.ResponseHeader=2]="ResponseHeader",Pr[Pr.DownloadProgress=3]="DownloadProgress",Pr[Pr.Response=4]="Response",Pr[Pr.User=5]="User",Pr))();class ib{constructor(e,t=200,r="OK"){this.headers=e.headers||new Oa,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Gd extends ib{constructor(e={}){super(e),this.type=Pr.ResponseHeader}clone(e={}){return new Gd({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Cu extends ib{constructor(e={}){super(e),this.type=Pr.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Cu({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class kI extends ib{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function sb(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Ig=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof Nf)s=t;else{let p,_;p=i.headers instanceof Oa?i.headers:new Oa(i.headers),i.params&&(_=i.params instanceof wc?i.params:new wc({fromObject:i.params})),s=new Nf(t,r,void 0!==i.body?i.body:null,{headers:p,context:i.context,params:_,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const l=et(s).pipe(Rl(p=>this.handler.handle(p)));if(t instanceof Nf||"events"===i.observe)return l;const h=l.pipe(Hr(p=>p instanceof Cu));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return h.pipe((0,lt.U)(p=>{if(null!==p.body&&!(p.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return p.body}));case"blob":return h.pipe((0,lt.U)(p=>{if(null!==p.body&&!(p.body instanceof Blob))throw new Error("Response is not a Blob.");return p.body}));case"text":return h.pipe((0,lt.U)(p=>{if(null!==p.body&&"string"!=typeof p.body)throw new Error("Response is not a string.");return p.body}));default:return h.pipe((0,lt.U)(p=>p.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new wc).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,sb(i,r))}post(t,r,i={}){return this.request("POST",t,sb(i,r))}put(t,r,i={}){return this.request("PUT",t,sb(i,r))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(tb))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class ob{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const Dg=new u.OlP("HTTP_INTERCEPTORS");let OI=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const _R=/^\)\]\}',?\n/;let VI=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new sr.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((P,F)=>i.setRequestHeader(P,F.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const P=t.detectContentTypeHeader();null!==P&&i.setRequestHeader("Content-Type",P)}if(t.responseType){const P=t.responseType.toLowerCase();i.responseType="json"!==P?P:"text"}const s=t.serializeBody();let l=null;const h=()=>{if(null!==l)return l;const P=i.statusText||"OK",F=new Oa(i.getAllResponseHeaders()),q=function yR(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return l=new Gd({headers:F,status:i.status,statusText:P,url:q}),l},p=()=>{let{headers:P,status:F,statusText:q,url:oe}=h(),xe=null;204!==F&&(xe=typeof i.response>"u"?i.responseText:i.response),0===F&&(F=xe?200:0);let Ge=F>=200&&F<300;if("json"===t.responseType&&"string"==typeof xe){const Xe=xe;xe=xe.replace(_R,"");try{xe=""!==xe?JSON.parse(xe):null}catch(Qe){xe=Xe,Ge&&(Ge=!1,xe={error:Qe,text:xe})}}Ge?(r.next(new Cu({body:xe,headers:P,status:F,statusText:q,url:oe||void 0})),r.complete()):r.error(new kI({error:xe,headers:P,status:F,statusText:q,url:oe||void 0}))},_=P=>{const{url:F}=h(),q=new kI({error:P,status:i.status||0,statusText:i.statusText||"Unknown Error",url:F||void 0});r.error(q)};let w=!1;const D=P=>{w||(r.next(h()),w=!0);let F={type:Pr.DownloadProgress,loaded:P.loaded};P.lengthComputable&&(F.total=P.total),"text"===t.responseType&&!!i.responseText&&(F.partialText=i.responseText),r.next(F)},M=P=>{let F={type:Pr.UploadProgress,loaded:P.loaded};P.lengthComputable&&(F.total=P.total),r.next(F)};return i.addEventListener("load",p),i.addEventListener("error",_),i.addEventListener("timeout",_),i.addEventListener("abort",_),t.reportProgress&&(i.addEventListener("progress",D),null!==s&&i.upload&&i.upload.addEventListener("progress",M)),i.send(s),r.next({type:Pr.Sent}),()=>{i.removeEventListener("error",_),i.removeEventListener("abort",_),i.removeEventListener("load",p),i.removeEventListener("timeout",_),t.reportProgress&&(i.removeEventListener("progress",D),null!==s&&i.upload&&i.upload.removeEventListener("progress",M)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(_o))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Sg=new u.OlP("XSRF_COOKIE_NAME"),Ff=new u.OlP("XSRF_HEADER_NAME");class ab{}let BI=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Hl(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ue),u.LFG(u.Lbi),u.LFG(Sg))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Tg=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const s=this.tokenService.getToken();return null!==s&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,s)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ab),u.LFG(Ff))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),UI=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(Dg,[]);this.chain=r.reduceRight((i,s)=>new ob(i,s),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(nb),u.LFG(u.zs3))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),HI=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:Tg,useClass:OI}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:Sg,useValue:t.cookieName}:[],t.headerName?{provide:Ff,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Tg,{provide:Dg,useExisting:Tg,multi:!0},{provide:ab,useClass:BI},{provide:Sg,useValue:"XSRF-TOKEN"},{provide:Ff,useValue:"X-XSRF-TOKEN"}]}),n})(),bR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Ig,{provide:tb,useClass:UI},VI,{provide:nb,useExisting:VI}],imports:[HI.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})();const Vi=["*"];let kl;function Lf(n){return function CR(){if(void 0===kl&&(kl=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(kl=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return kl}()?.createHTML(n)||n}function IR(n){return Error(`Unable to find icon with the name "${n}"`)}function lb(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function cb(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class Lo{constructor(e,t,r){this.url=e,this.svgText=t,this.options=r}}let Vf=(()=>{class n{constructor(t,r,i,s){this._httpClient=t,this._sanitizer=r,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=i}addSvgIcon(t,r,i){return this.addSvgIconInNamespace("",t,r,i)}addSvgIconLiteral(t,r,i){return this.addSvgIconLiteralInNamespace("",t,r,i)}addSvgIconInNamespace(t,r,i,s){return this._addSvgIconConfig(t,r,new Lo(i,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,i,s){const l=this._sanitizer.sanitize(u.q3G.HTML,i);if(!l)throw cb(i);const h=Lf(l);return this._addSvgIconConfig(t,r,new Lo("",h,s))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,i){return this._addSvgIconSetConfig(t,new Lo(r,null,i))}addSvgIconSetLiteralInNamespace(t,r,i){const s=this._sanitizer.sanitize(u.q3G.HTML,r);if(!s)throw cb(r);const l=Lf(s);return this._addSvgIconSetConfig(t,new Lo("",l,i))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const r=this._sanitizer.sanitize(u.q3G.RESOURCE_URL,t);if(!r)throw lb(t);const i=this._cachedIconsByUrl.get(r);return i?et(Bf(i)):this._loadSvgIconFromConfig(new Lo(t,null)).pipe((0,Gn.b)(s=>this._cachedIconsByUrl.set(r,s)),(0,lt.U)(s=>Bf(s)))}getNamedSvgIcon(t,r=""){const i=jI(r,t);let s=this._svgIconConfigs.get(i);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(r,t),s)return this._svgIconConfigs.set(i,s),this._getSvgFromConfig(s);const l=this._iconSetConfigs.get(r);return l?this._getSvgFromIconSetConfigs(t,l):$d(IR(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?et(Bf(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe((0,lt.U)(r=>Bf(r)))}_getSvgFromIconSetConfigs(t,r){const i=this._extractIconWithNameFromAnySet(t,r);return i?et(i):rv(r.filter(l=>!l.svgText).map(l=>this._loadSvgIconSetFromConfig(l).pipe(xl(h=>{const _=`Loading icon set URL: ${this._sanitizer.sanitize(u.q3G.RESOURCE_URL,l.url)} failed: ${h.message}`;return this._errorHandler.handleError(new Error(_)),et(null)})))).pipe((0,lt.U)(()=>{const l=this._extractIconWithNameFromAnySet(t,r);if(!l)throw IR(t);return l}))}_extractIconWithNameFromAnySet(t,r){for(let i=r.length-1;i>=0;i--){const s=r[i];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const l=this._svgElementFromConfig(s),h=this._extractSvgIconFromSet(l,t,s.options);if(h)return h}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe((0,Gn.b)(r=>t.svgText=r),(0,lt.U)(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?et(null):this._fetchIcon(t).pipe((0,Gn.b)(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,i){const s=t.querySelector(`[id="${r}"]`);if(!s)return null;const l=s.cloneNode(!0);if(l.removeAttribute("id"),"svg"===l.nodeName.toLowerCase())return this._setSvgAttributes(l,i);if("symbol"===l.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(l),i);const h=this._svgElementFromString(Lf("<svg></svg>"));return h.appendChild(l),this._setSvgAttributes(h,i)}_svgElementFromString(t){const r=this._document.createElement("DIV");r.innerHTML=t;const i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(t){const r=this._svgElementFromString(Lf("<svg></svg>")),i=t.attributes;for(let s=0;s<i.length;s++){const{name:l,value:h}=i[s];"id"!==l&&r.setAttribute(l,h)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[s].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){const{url:r,options:i}=t,s=i?.withCredentials??!1;if(!this._httpClient)throw function CV(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const l=this._sanitizer.sanitize(u.q3G.RESOURCE_URL,r);if(!l)throw lb(r);const h=this._inProgressUrlFetches.get(l);if(h)return h;const p=this._httpClient.get(l,{responseType:"text",withCredentials:s}).pipe((0,lt.U)(_=>Lf(_)),bc(()=>this._inProgressUrlFetches.delete(l)),(0,wg.B)());return this._inProgressUrlFetches.set(l,p),p}_addSvgIconConfig(t,r,i){return this._svgIconConfigs.set(jI(t,r),i),this}_addSvgIconSetConfig(t,r){const i=this._iconSetConfigs.get(t);return i?i.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){const r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let i=0;i<this._resolvers.length;i++){const s=this._resolvers[i](r,t);if(s)return DR(s)?new Lo(s.url,null,s.options):new Lo(s,null)}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ig,8),u.LFG($s),u.LFG(ue,8),u.LFG(u.qLn))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Bf(n){return n.cloneNode(!0)}function jI(n,e){return n+":"+e}function DR(n){return!(!n.url||!n.options)}const SR=ym(class{constructor(n){this._elementRef=n}}),db=new u.OlP("MAT_ICON_DEFAULT_OPTIONS"),$I=new u.OlP("mat-icon-location",{providedIn:"root",factory:function GI(){const n=(0,u.f3M)(ue),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),Uf=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],hb=Uf.map(n=>`[${n}]`).join(", "),DV=/^url\(['"]?#(.*?)['"]?\)$/;let Hf=(()=>{class n extends SR{constructor(t,r,i,s,l,h){super(t),this._iconRegistry=r,this._location=s,this._errorHandler=l,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=si.w0.EMPTY,h&&(h.color&&(this.color=this.defaultColor=h.color),h.fontSet&&(this.fontSet=h.fontSet)),i||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=yi(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const i=t.childNodes[r];(1!==i.nodeType||"svg"===i.nodeName.toLowerCase())&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(i=>i.length>0);this._previousFontSetClass.forEach(i=>t.classList.remove(i)),r.forEach(i=>t.classList.add(i)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const r=this._elementsWithExternalReferences;r&&r.forEach((i,s)=>{i.forEach(l=>{s.setAttribute(l.name,`url('${t}#${l.value}')`)})})}_cacheChildrenWithExternalReferences(t){const r=t.querySelectorAll(hb),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<r.length;s++)Uf.forEach(l=>{const h=r[s],p=h.getAttribute(l),_=p?p.match(DV):null;if(_){let w=i.get(h);w||(w=[],i.set(h,w)),w.push({name:l,value:_[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[r,i]=this._splitIconName(t);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe(Ni(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${i}! ${s.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(Vf),u.$8M("aria-hidden"),u.Y36($I),u.Y36(u.qLn),u.Y36(db,8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,r){2&t&&(u.uIk("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet),u.ekj("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[u.qOj],ngContentSelectors:Vi,decls:1,vars:0,template:function(t,r){1&t&&(u.F$t(),u.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),n})(),TR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[bi,bi]}),n})();var fb=L(4408);const Pa={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=Pa;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(s=>{t=void 0,n(s)});return new si.w0(()=>t?.(i))},requestAnimationFrame(...n){const{delegate:e}=Pa;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=Pa;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var pb=L(7565);new class mb extends pb.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class AR extends fb.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=Pa.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);e.actions.some(i=>i.id===t)||(Pa.cancelAnimationFrame(t),e._scheduled=void 0)}});let gb,AV=1;const Ag={};function zI(n){return n in Ag&&(delete Ag[n],!0)}const WI={setImmediate(n){const e=AV++;return Ag[e]=!0,gb||(gb=Promise.resolve()),gb.then(()=>zI(e)&&n()),e},clearImmediate(n){zI(n)}},{setImmediate:xR,clearImmediate:qI}=WI,jf={setImmediate(...n){const{delegate:e}=jf;return(e?.setImmediate||xR)(...n)},clearImmediate(n){const{delegate:e}=jf;return(e?.clearImmediate||qI)(n)},delegate:void 0},Mg=new class kR extends pb.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class RR extends fb.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=jf.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);e.actions.some(i=>i.id===t)||(jf.clearImmediate(t),e._scheduled=void 0)}});var ZI=L(3532);function _b(n=0,e,t=dc.P){let r=-1;return null!=e&&((0,ZI.K)(e)?t=e:r=e),new sr.y(i=>{let s=function YI(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let l=0;return t.schedule(function(){i.closed||(i.next(l++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function QI(n,e=dc.z){return function KI(n){return(0,lr.e)((e,t)=>{let r=!1,i=null,s=null,l=!1;const h=()=>{if(s?.unsubscribe(),s=null,r){r=!1;const _=i;i=null,t.next(_)}l&&t.complete()},p=()=>{s=null,l&&t.complete()};e.subscribe((0,zn.x)(t,_=>{r=!0,i=_,s||(0,Ia.Xf)(n(_)).subscribe(s=(0,zn.x)(t,h,p))},()=>{l=!0,(!r||!s||s.closed)&&t.complete()}))})}(()=>_b(n,e))}let kV=(()=>{class n{constructor(t,r,i){this._ngZone=t,this._platform=r,this._scrolled=new Bt.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new sr.y(r=>{this._globalSubscription||this._addGlobalListener();const i=t>0?this._scrolled.pipe(QI(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):et()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(Hr(s=>!s||i.indexOf(s)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((i,s)=>{this._scrollableContainsElement(s,t)&&r.push(s)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let i=Ao(r),s=t.getElementRef().nativeElement;do{if(i==s)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Rf(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.R0b),u.LFG(ar),u.LFG(ue,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),PR=(()=>{class n{constructor(t,r,i){this._platform=t,this._change=new Bt.x,this._changeListener=s=>{this._change.next(s)},this._document=i,r.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,s=i.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-s.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(QI(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ar),u.LFG(u.R0b),u.LFG(ue,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),bb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),wb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[_m,bb,_m,bb]}),n})();class JI{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class eD extends JI{constructor(e,t,r,i){super(),this.component=e,this.viewContainerRef=t,this.injector=r,this.componentFactoryResolver=i}}class tD extends JI{constructor(e,t,r,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=r,this.injector=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class BR extends JI{constructor(e){super(),this.element=e instanceof u.SBq?e.nativeElement:e}}class Cb{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof eD?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof tD?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof BR?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class BV extends Cb{constructor(e,t,r,i,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=r,this._defaultInjector=i,this.attachDomPortal=l=>{const h=l.element,p=this._document.createComment("dom-portal");h.parentNode.insertBefore(p,h),this.outletElement.appendChild(h),this._attachedPortal=l,super.setDisposeFn(()=>{p.parentNode&&p.parentNode.replaceChild(h,p)})},this._document=s}attachComponentPortal(e){const r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let i;return e.viewContainerRef?(i=e.viewContainerRef.createComponent(r,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>i.destroy())):(i=r.create(e.injector||this._defaultInjector||u.zs3.NULL),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=e,i}attachTemplatePortal(e){let t=e.viewContainerRef,r=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=t.indexOf(r);-1!==i&&t.remove(i)}),this._attachedPortal=e,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let jR=(()=>{class n extends Cb{constructor(t,r,i){super(),this._componentFactoryResolver=t,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new u.vpe,this.attachDomPortal=s=>{const l=s.element,h=this._document.createComment("dom-portal");s.setAttachedHost(this),l.parentNode.insertBefore(h,l),this._getRootNode().appendChild(l),this._attachedPortal=s,super.setDisposeFn(()=>{h.parentNode&&h.parentNode.replaceChild(l,h)})},this._document=i}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const r=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),l=r.createComponent(s,r.length,t.injector||r.injector);return r!==this._viewContainerRef&&this._getRootNode().appendChild(l.hostView.rootNodes[0]),super.setDisposeFn(()=>l.destroy()),this._attachedPortal=t,this._attachedRef=l,this.attached.emit(l),l}attachTemplatePortal(t){t.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u._Vd),u.Y36(u.s_b),u.Y36(ue))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[u.qOj]}),n})(),nD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const iD=$h();class Xs{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Or(-this._previousScrollPosition.left),e.style.top=Or(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,r=e.style,i=this._document.body.style,s=r.scrollBehavior||"",l=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),iD&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),iD&&(r.scrollBehavior=s,i.scrollBehavior=l)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,r=this._viewportRuler.getViewportSize();return t.scrollHeight>r.height||t.scrollWidth>r.width}}class Ib{constructor(e,t,r,i){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class sD{enable(){}disable(){}attach(){}}function Db(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function xg(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class oD{constructor(e,t,r,i){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=r,this._config=i,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();Db(t,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let aD=(()=>{class n{constructor(t,r,i,s){this._scrollDispatcher=t,this._viewportRuler=r,this._ngZone=i,this.noop=()=>new sD,this.close=l=>new Ib(this._scrollDispatcher,this._ngZone,this._viewportRuler,l),this.block=()=>new Xs(this._viewportRuler,this._document),this.reposition=l=>new oD(this._scrollDispatcher,this._viewportRuler,this._ngZone,l),this._document=s}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(kV),u.LFG(PR),u.LFG(u.R0b),u.LFG(ue))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Sb{constructor(e){if(this.scrollStrategy=new sD,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const r of t)void 0!==e[r]&&(this[r]=e[r])}}}class zR{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let Rg=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ue))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ec=(()=>{class n extends Rg{constructor(t,r){super(t),this._ngZone=r,this._keydownListener=i=>{const s=this._attachedOverlays;for(let l=s.length-1;l>-1;l--)if(s[l]._keydownEvents.observers.length>0){const h=s[l]._keydownEvents;this._ngZone?this._ngZone.run(()=>h.next(i)):h.next(i);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ue),u.LFG(u.R0b,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),lD=(()=>{class n extends Rg{constructor(t,r,i){super(t),this._platform=r,this._ngZone=i,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Mr(s)},this._clickListener=s=>{const l=Mr(s),h="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:l;this._pointerDownEventTarget=null;const p=this._attachedOverlays.slice();for(let _=p.length-1;_>-1;_--){const w=p[_];if(w._outsidePointerEvents.observers.length<1||!w.hasAttached())continue;if(w.overlayElement.contains(l)||w.overlayElement.contains(h))break;const D=w._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>D.next(s)):D.next(s)}}}add(t){if(super.add(t),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ue),u.LFG(ar),u.LFG(u.R0b,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),kg=(()=>{class n{constructor(t,r){this._platform=r,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||ml()){const i=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<i.length;s++)i[s].remove()}const r=this._document.createElement("div");r.classList.add(t),ml()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ue),u.LFG(ar))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Ol{constructor(e,t,r,i,s,l,h,p,_,w=!1){this._portalOutlet=e,this._host=t,this._pane=r,this._config=i,this._ngZone=s,this._keyboardDispatcher=l,this._document=h,this._location=p,this._outsideClickDispatcher=_,this._animationsDisabled=w,this._backdropElement=null,this._backdropClick=new Bt.x,this._attachments=new Bt.x,this._detachments=new Bt.x,this._locationChanges=si.w0.EMPTY,this._backdropClickHandler=D=>this._backdropClick.next(D),this._backdropTransitionendHandler=D=>{this._disposeBackdrop(D.target)},this._keydownEvents=new Bt.x,this._outsidePointerEvents=new Bt.x,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Ni(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=Or(this._config.width),e.height=Or(this._config.height),e.minWidth=Or(this._config.minWidth),e.minHeight=Or(this._config.minHeight),e.maxWidth=Or(this._config.maxWidth),e.maxHeight=Or(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,r){const i=uu(t||[]).filter(s=>!!s);i.length&&(r?e.classList.add(...i):e.classList.remove(...i))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(To((0,vc.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const cD="cdk-overlay-connected-position-bounding-box",$V=/([A-Za-z%]+)$/;class qR{constructor(e,t,r,i,s){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Bt.x,this._resizeSubscription=si.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(cD),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,r=this._viewportRect,i=this._containerRect,s=[];let l;for(let h of this._preferredPositions){let p=this._getOriginPoint(e,i,h),_=this._getOverlayPoint(p,t,h),w=this._getOverlayFit(_,t,r,h);if(w.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(h,p);this._canFitWithFlexibleDimensions(w,_,r)?s.push({position:h,origin:p,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(p,h)}):(!l||l.overlayFit.visibleArea<w.visibleArea)&&(l={overlayFit:w,overlayPoint:_,originPoint:p,position:h,overlayRect:t})}if(s.length){let h=null,p=-1;for(const _ of s){const w=_.boundingBoxRect.width*_.boundingBoxRect.height*(_.position.weight||1);w>p&&(p=w,h=_)}return this._isPushed=!1,void this._applyPosition(h.position,h.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(l.position,l.originPoint);this._applyPosition(l.position,l.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Iu(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(cD),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,r){let i,s;if("center"==r.originX)i=e.left+e.width/2;else{const l=this._isRtl()?e.right:e.left,h=this._isRtl()?e.left:e.right;i="start"==r.originX?l:h}return t.left<0&&(i-=t.left),s="center"==r.originY?e.top+e.height/2:"top"==r.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:i,y:s}}_getOverlayPoint(e,t,r){let i,s;return i="center"==r.overlayX?-t.width/2:"start"===r.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==r.overlayY?-t.height/2:"top"==r.overlayY?0:-t.height,{x:e.x+i,y:e.y+s}}_getOverlayFit(e,t,r,i){const s=dD(t);let{x:l,y:h}=e,p=this._getOffset(i,"x"),_=this._getOffset(i,"y");p&&(l+=p),_&&(h+=_);let M=0-h,P=h+s.height-r.height,F=this._subtractOverflows(s.width,0-l,l+s.width-r.width),q=this._subtractOverflows(s.height,M,P),oe=F*q;return{visibleArea:oe,isCompletelyWithinViewport:s.width*s.height===oe,fitsInViewportVertically:q===s.height,fitsInViewportHorizontally:F==s.width}}_canFitWithFlexibleDimensions(e,t,r){if(this._hasFlexibleDimensions){const i=r.bottom-t.y,s=r.right-t.x,l=uD(this._overlayRef.getConfig().minHeight),h=uD(this._overlayRef.getConfig().minWidth),_=e.fitsInViewportHorizontally||null!=h&&h<=s;return(e.fitsInViewportVertically||null!=l&&l<=i)&&_}return!1}_pushOverlayOnScreen(e,t,r){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const i=dD(t),s=this._viewportRect,l=Math.max(e.x+i.width-s.width,0),h=Math.max(e.y+i.height-s.height,0),p=Math.max(s.top-r.top-e.y,0),_=Math.max(s.left-r.left-e.x,0);let w=0,D=0;return w=i.width<=s.width?_||-l:e.x<this._viewportMargin?s.left-r.left-e.x:0,D=i.height<=s.height?p||-h:e.y<this._viewportMargin?s.top-r.top-e.y:0,this._previousPushAmount={x:w,y:D},{x:e.x+w,y:e.y+D}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const r=this._getScrollVisibility(),i=new zR(e,r);this._positionChanges.next(i)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,i=e.overlayY;r="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(e,t){const r=this._viewportRect,i=this._isRtl();let s,l,h,w,D,M;if("top"===t.overlayY)l=e.y,s=r.height-l+this._viewportMargin;else if("bottom"===t.overlayY)h=r.height-e.y+2*this._viewportMargin,s=r.height-h+this._viewportMargin;else{const P=Math.min(r.bottom-e.y+r.top,e.y),F=this._lastBoundingBoxSize.height;s=2*P,l=e.y-P,s>F&&!this._isInitialRender&&!this._growAfterOpen&&(l=e.y-F/2)}if("end"===t.overlayX&&!i||"start"===t.overlayX&&i)M=r.width-e.x+this._viewportMargin,w=e.x-this._viewportMargin;else if("start"===t.overlayX&&!i||"end"===t.overlayX&&i)D=e.x,w=r.right-e.x;else{const P=Math.min(r.right-e.x+r.left,e.x),F=this._lastBoundingBoxSize.width;w=2*P,D=e.x-P,w>F&&!this._isInitialRender&&!this._growAfterOpen&&(D=e.x-F/2)}return{top:l,left:D,bottom:h,right:M,width:w,height:s}}_setBoundingBoxStyles(e,t){const r=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,l=this._overlayRef.getConfig().maxWidth;i.height=Or(r.height),i.top=Or(r.top),i.bottom=Or(r.bottom),i.width=Or(r.width),i.left=Or(r.left),i.right=Or(r.right),i.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",i.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(i.maxHeight=Or(s)),l&&(i.maxWidth=Or(l))}this._lastBoundingBoxSize=r,Iu(this._boundingBox.style,i)}_resetBoundingBoxStyles(){Iu(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Iu(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const r={},i=this._hasExactPosition(),s=this._hasFlexibleDimensions,l=this._overlayRef.getConfig();if(i){const w=this._viewportRuler.getViewportScrollPosition();Iu(r,this._getExactOverlayY(t,e,w)),Iu(r,this._getExactOverlayX(t,e,w))}else r.position="static";let h="",p=this._getOffset(t,"x"),_=this._getOffset(t,"y");p&&(h+=`translateX(${p}px) `),_&&(h+=`translateY(${_}px)`),r.transform=h.trim(),l.maxHeight&&(i?r.maxHeight=Or(l.maxHeight):s&&(r.maxHeight="")),l.maxWidth&&(i?r.maxWidth=Or(l.maxWidth):s&&(r.maxWidth="")),Iu(this._pane.style,r)}_getExactOverlayY(e,t,r){let i={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),"bottom"===e.overlayY?i.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":i.top=Or(s.y),i}_getExactOverlayX(e,t,r){let l,i={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),l=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===l?i.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":i.left=Or(s.x),i}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:xg(e,r),isOriginOutsideView:Db(e,r),isOverlayClipped:xg(t,r),isOverlayOutsideView:Db(t,r)}}_subtractOverflows(e,...t){return t.reduce((r,i)=>r-Math.max(i,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+e-this._viewportMargin,bottom:r.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?e.offsetX??this._offsetX:e.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&uu(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof u.SBq)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,r=e.height||0;return{top:e.y,bottom:e.y+r,left:e.x,right:e.x+t,height:r,width:t}}}function Iu(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function uD(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split($V);return t&&"px"!==t?null:parseFloat(e)}return n||null}function dD(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const Tb="cdk-global-overlay-wrapper";class ZR{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(Tb),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:s,maxWidth:l,maxHeight:h}=r,p=!("100%"!==i&&"100vw"!==i||l&&"100%"!==l&&"100vw"!==l),_=!("100%"!==s&&"100vh"!==s||h&&"100%"!==h&&"100vh"!==h),w=this._xPosition,D=this._xOffset,M="rtl"===this._overlayRef.getConfig().direction;let P="",F="",q="";p?q="flex-start":"center"===w?(q="center",M?F=D:P=D):M?"left"===w||"end"===w?(q="flex-end",P=D):("right"===w||"start"===w)&&(q="flex-start",F=D):"left"===w||"start"===w?(q="flex-start",P=D):("right"===w||"end"===w)&&(q="flex-end",F=D),e.position=this._cssPosition,e.marginLeft=p?"0":P,e.marginTop=_?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=p?"0":F,t.justifyContent=q,t.alignItems=_?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,r=t.style;t.classList.remove(Tb),r.justifyContent=r.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let hD=(()=>{class n{constructor(t,r,i,s){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=s}global(){return new ZR}flexibleConnectedTo(t){return new qR(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(PR),u.LFG(ue),u.LFG(ar),u.LFG(kg))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),GV=0,Cc=(()=>{class n{constructor(t,r,i,s,l,h,p,_,w,D,M,P){this.scrollStrategies=t,this._overlayContainer=r,this._componentFactoryResolver=i,this._positionBuilder=s,this._keyboardDispatcher=l,this._injector=h,this._ngZone=p,this._document=_,this._directionality=w,this._location=D,this._outsideClickDispatcher=M,this._animationsModuleType=P}create(t){const r=this._createHostElement(),i=this._createPaneElement(r),s=this._createPortalOutlet(i),l=new Sb(t);return l.direction=l.direction||this._directionality.value,new Ol(s,r,i,l,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const r=this._document.createElement("div");return r.id="cdk-overlay-"+GV++,r.classList.add("cdk-overlay-pane"),t.appendChild(r),r}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(u.z2F)),new BV(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(aD),u.LFG(kg),u.LFG(u._Vd),u.LFG(hD),u.LFG(Ec),u.LFG(u.zs3),u.LFG(u.R0b),u.LFG(ue),u.LFG(ME),u.LFG(Fe),u.LFG(lD),u.LFG(u.QbO,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Og={provide:new u.OlP("cdk-connected-overlay-scroll-strategy"),deps:[Cc],useFactory:function pD(n){return()=>n.scrollStrategies.reposition()}};let $f=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Cc,Og],imports:[_m,nD,wb,wb]}),n})();function ek(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",2)(1,"button",3),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.action())}),u._uU(2),u.qZA()()}if(2&n){const t=u.oxw();u.xp6(2),u.Oqu(t.data.action)}}function mD(n,e){}const Ab=new u.OlP("MatSnackBarData");class Pg{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}const tk=Math.pow(2,31)-1;class gD{constructor(e,t){this._overlayRef=t,this._afterDismissed=new Bt.x,this._afterOpened=new Bt.x,this._onAction=new Bt.x,this._dismissedByAction=!1,this.containerInstance=e,e._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(e){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(e,tk))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}let zV=(()=>{class n{constructor(t,r){this.snackBarRef=t,this.data=r}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(gD),u.Y36(Ab))},n.\u0275cmp=u.Xpm({type:n,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[[1,"mat-simple-snack-bar-content"],["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(t,r){1&t&&(u.TgZ(0,"span",0),u._uU(1),u.qZA(),u.YNc(2,ek,3,1,"div",1)),2&t&&(u.xp6(1),u.Oqu(r.data.message),u.xp6(1),u.Q6J("ngIf",r.hasAction))},dependencies:[Tn,pc],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}.mat-simple-snack-bar-content{overflow:hidden;text-overflow:ellipsis}"],encapsulation:2,changeDetection:0}),n})();const _D={snackBarState:Am("state",[vd("void, hidden",Ro({transform:"scale(0.8)",opacity:0})),vd("visible",Ro({transform:"scale(1)",opacity:1})),Ys("* => visible",du("150ms cubic-bezier(0, 0, 0.2, 1)")),Ys("* => void, * => hidden",du("75ms cubic-bezier(0.4, 0.0, 1, 1)",Ro({opacity:0})))])};let nk=(()=>{class n extends Cb{constructor(t,r,i,s,l){super(),this._ngZone=t,this._elementRef=r,this._changeDetectorRef=i,this._platform=s,this.snackBarConfig=l,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new Bt.x,this._onExit=new Bt.x,this._onEnter=new Bt.x,this._animationState="void",this.attachDomPortal=h=>{this._assertNotAttached();const p=this._portalOutlet.attachDomPortal(h);return this._afterPortalAttached(),p},this._live="assertive"!==l.politeness||l.announcementMessage?"off"===l.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(t){this._assertNotAttached();const r=this._portalOutlet.attachComponentPortal(t);return this._afterPortalAttached(),r}attachTemplatePortal(t){this._assertNotAttached();const r=this._portalOutlet.attachTemplatePortal(t);return this._afterPortalAttached(),r}onAnimationEnd(t){const{fromState:r,toState:i}=t;if(("void"===i&&"void"!==r||"hidden"===i)&&this._completeExit(),"visible"===i){const s=this._onEnter;this._ngZone.run(()=>{s.next(),s.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe(Ni(1)).subscribe(()=>{this._ngZone.run(()=>{this._onExit.next(),this._onExit.complete()})})}_afterPortalAttached(){const t=this._elementRef.nativeElement,r=this.snackBarConfig.panelClass;r&&(Array.isArray(r)?r.forEach(i=>t.classList.add(i)):t.classList.add(r))}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const t=this._elementRef.nativeElement.querySelector("[aria-hidden]"),r=this._elementRef.nativeElement.querySelector("[aria-live]");if(t&&r){let i=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&t.contains(document.activeElement)&&(i=document.activeElement),t.removeAttribute("aria-hidden"),r.appendChild(t),i?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.R0b),u.Y36(u.SBq),u.Y36(u.sBO),u.Y36(ar),u.Y36(Pg))},n.\u0275dir=u.lG2({type:n,viewQuery:function(t,r){if(1&t&&u.Gf(jR,7),2&t){let i;u.iGM(i=u.CRH())&&(r._portalOutlet=i.first)}},features:[u.qOj]}),n})(),rk=(()=>{class n extends nk{_afterPortalAttached(){super._afterPortalAttached(),"center"===this.snackBarConfig.horizontalPosition&&this._elementRef.nativeElement.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&this._elementRef.nativeElement.classList.add("mat-snack-bar-top")}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275cmp=u.Xpm({type:n,selectors:[["snack-bar-container"]],hostAttrs:[1,"mat-snack-bar-container"],hostVars:1,hostBindings:function(t,r){1&t&&u.WFA("@state.done",function(s){return r.onAnimationEnd(s)}),2&t&&u.d8E("@state",r._animationState)},features:[u.qOj],decls:3,vars:2,consts:[["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.YNc(1,mD,0,0,"ng-template",1),u.qZA(),u._UZ(2,"div")),2&t&&(u.xp6(2),u.uIk("aria-live",r._live)("role",r._role))},dependencies:[jR],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}"],encapsulation:2,data:{animation:[_D.snackBarState]}}),n})(),yD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[$f,nD,$c,Ey,bi,bi]}),n})();const ik=new u.OlP("mat-snack-bar-default-options",{providedIn:"root",factory:function WV(){return new Pg}});let qV=(()=>{class n{constructor(t,r,i,s,l,h){this._overlay=t,this._live=r,this._injector=i,this._breakpointObserver=s,this._parentSnackBar=l,this._defaultConfig=h,this._snackBarRefAtThisLevel=null}get _openedSnackBarRef(){const t=this._parentSnackBar;return t?t._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(t){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=t:this._snackBarRefAtThisLevel=t}openFromComponent(t,r){return this._attach(t,r)}openFromTemplate(t,r){return this._attach(t,r)}open(t,r="",i){const s={...this._defaultConfig,...i};return s.data={message:t,action:r},s.announcementMessage===t&&(s.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,s)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(t,r){const s=u.zs3.create({parent:r&&r.viewContainerRef&&r.viewContainerRef.injector||this._injector,providers:[{provide:Pg,useValue:r}]}),l=new eD(this.snackBarContainerComponent,r.viewContainerRef,s),h=t.attach(l);return h.instance.snackBarConfig=r,h.instance}_attach(t,r){const i={...new Pg,...this._defaultConfig,...r},s=this._createOverlay(i),l=this._attachSnackBarContainer(s,i),h=new gD(l,s);if(t instanceof u.Rgc){const p=new tD(t,null,{$implicit:i.data,snackBarRef:h});h.instance=l.attachTemplatePortal(p)}else{const p=this._createInjector(i,h),_=new eD(t,void 0,p),w=l.attachComponentPortal(_);h.instance=w.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(To(s.detachments())).subscribe(p=>{s.overlayElement.classList.toggle(this.handsetCssClass,p.matches)}),i.announcementMessage&&l._onAnnounce.subscribe(()=>{this._live.announce(i.announcementMessage,i.politeness)}),this._animateSnackBar(h,i),this._openedSnackBarRef=h,this._openedSnackBarRef}_animateSnackBar(t,r){t.afterDismissed().subscribe(()=>{this._openedSnackBarRef==t&&(this._openedSnackBarRef=null),r.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{t.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):t.containerInstance.enter(),r.duration&&r.duration>0&&t.afterOpened().subscribe(()=>t._dismissAfter(r.duration))}_createOverlay(t){const r=new Sb;r.direction=t.direction;let i=this._overlay.position().global();const s="rtl"===t.direction,l="left"===t.horizontalPosition||"start"===t.horizontalPosition&&!s||"end"===t.horizontalPosition&&s,h=!l&&"center"!==t.horizontalPosition;return l?i.left("0"):h?i.right("0"):i.centerHorizontally(),"top"===t.verticalPosition?i.top("0"):i.bottom("0"),r.positionStrategy=i,this._overlay.create(r)}_createInjector(t,r){return u.zs3.create({parent:t&&t.viewContainerRef&&t.viewContainerRef.injector||this._injector,providers:[{provide:gD,useValue:r},{provide:Ab,useValue:t.data}]})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Cc),u.LFG(gy),u.LFG(u.zs3),u.LFG(cy),u.LFG(n,12),u.LFG(ik))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),sk=(()=>{class n extends qV{constructor(t,r,i,s,l,h){super(t,r,i,s,l,h),this.simpleSnackBarComponent=zV,this.snackBarContainerComponent=rk,this.handsetCssClass="mat-snack-bar-handset"}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Cc),u.LFG(gy),u.LFG(u.zs3),u.LFG(cy),u.LFG(n,12),u.LFG(ik))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:yD}),n})();function ur(n,e){return(0,lr.e)((t,r)=>{let i=null,s=0,l=!1;const h=()=>l&&!i&&r.complete();t.subscribe((0,zn.x)(r,p=>{i?.unsubscribe();let _=0;const w=s++;(0,Ia.Xf)(n(p,w)).subscribe(i=(0,zn.x)(r,D=>r.next(e?e(p,D,w,_++):D),()=>{i=null,h()}))},()=>{l=!0,h()}))})}function Gf(n){return(0,lt.U)(()=>n)}function vD(n,e){return e?t=>Qh(e.pipe(Ni(1),function ok(){return(0,lr.e)((n,e)=>{n.subscribe((0,zn.x)(e,um.Z))})}()),t.pipe(vD(n))):(0,li.z)((t,r)=>n(t,r).pipe(Ni(1),Gf(t)))}function bD(n,e=dc.z){const t=_b(n,e);return vD(()=>t)}const wD=["mat-menu-item",""];function Du(n,e){1&n&&(u.O4$(),u.TgZ(0,"svg",2),u._UZ(1,"polygon",3),u.qZA())}const Mb=["*"];function xb(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",0),u.NdJ("keydown",function(i){u.CHM(t);const s=u.oxw();return u.KtG(s._handleKeydown(i))})("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.closed.emit("click"))})("@transformMenu.start",function(i){u.CHM(t);const s=u.oxw();return u.KtG(s._onAnimationStart(i))})("@transformMenu.done",function(i){u.CHM(t);const s=u.oxw();return u.KtG(s._onAnimationDone(i))}),u.TgZ(1,"div",1),u.Hsn(2),u.qZA()()}if(2&n){const t=u.oxw();u.Q6J("id",t.panelId)("ngClass",t._classList)("@transformMenu",t._panelAnimationState),u.uIk("aria-label",t.ariaLabel||null)("aria-labelledby",t.ariaLabelledby||null)("aria-describedby",t.ariaDescribedby||null)}}const zd={transformMenu:Am("transformMenu",[vd("void",Ro({opacity:0,transform:"scale(0.8)"})),Ys("void => enter",du("120ms cubic-bezier(0, 0, 0.2, 1)",Ro({opacity:1,transform:"scale(1)"}))),Ys("* => void",du("100ms 25ms linear",Ro({opacity:0})))]),fadeInItems:Am("fadeInItems",[vd("showing",Ro({opacity:1})),Ys("void => *",[Ro({opacity:0}),du("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},Rb=new u.OlP("MatMenuContent"),Ng=new u.OlP("MAT_MENU_PANEL"),ak=vm(by(class{}));let Fg=(()=>{class n extends ak{constructor(t,r,i,s,l){super(),this._elementRef=t,this._document=r,this._focusMonitor=i,this._parentMenu=s,this._changeDetectorRef=l,this.role="menuitem",this._hovered=new Bt.x,this._focused=new Bt.x,this._highlighted=!1,this._triggersSubmenu=!1,s?.addItem?.(this)}focus(t,r){this._focusMonitor&&t?this._focusMonitor.focusVia(this._getHostElement(),t,r):this._getHostElement().focus(r),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(t){this.disabled&&(t.preventDefault(),t.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){const t=this._elementRef.nativeElement.cloneNode(!0),r=t.querySelectorAll("mat-icon, .material-icons");for(let i=0;i<r.length;i++)r[i].remove();return t.textContent?.trim()||""}_setHighlighted(t){this._highlighted=t,this._changeDetectorRef?.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(ue),u.Y36(gm),u.Y36(Ng,8),u.Y36(u.sBO))},n.\u0275cmp=u.Xpm({type:n,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(t,r){1&t&&u.NdJ("click",function(s){return r._checkDisabled(s)})("mouseenter",function(){return r._handleMouseEnter()}),2&t&&(u.uIk("role",r.role)("tabindex",r._getTabIndex())("aria-disabled",r.disabled.toString())("disabled",r.disabled||null),u.ekj("mat-menu-item",!0)("mat-menu-item-highlighted",r._highlighted)("mat-menu-item-submenu-trigger",r._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[u.qOj],attrs:wD,ngContentSelectors:Mb,decls:3,vars:3,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(t,r){1&t&&(u.F$t(),u.Hsn(0),u._UZ(1,"div",0),u.YNc(2,Du,2,0,"svg",1)),2&t&&(u.xp6(1),u.Q6J("matRippleDisabled",r.disableRipple||r.disabled)("matRippleTrigger",r._getHostElement()),u.xp6(1),u.Q6J("ngIf",r._triggersSubmenu))},dependencies:[Tn,Dm],encapsulation:2,changeDetection:0}),n})();const CD=new u.OlP("mat-menu-default-options",{providedIn:"root",factory:function lk(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let ID=0,Wd=(()=>{class n{constructor(t,r,i,s){this._elementRef=t,this._ngZone=r,this._defaultOptions=i,this._changeDetectorRef=s,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new u.n_E,this._tabSubscription=si.w0.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new Bt.x,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new u.vpe,this.close=this.closed,this.panelId="mat-menu-panel-"+ID++}get xPosition(){return this._xPosition}set xPosition(t){this._xPosition=t,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(t){this._yPosition=t,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(t){this._overlapTrigger=yi(t)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=yi(t)}set panelClass(t){const r=this._previousPanelClass;r&&r.length&&r.split(" ").forEach(i=>{this._classList[i]=!1}),this._previousPanelClass=t,t&&t.length&&(t.split(" ").forEach(i=>{this._classList[i]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(t){this.panelClass=t}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new wE(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(vi(this._directDescendantItems),ur(t=>(0,vc.T)(...t.map(r=>r._focused)))).subscribe(t=>this._keyManager.updateActiveItem(t)),this._directDescendantItems.changes.subscribe(t=>{const r=this._keyManager;if("enter"===this._panelAnimationState&&r.activeItem?._hasFocus()){const i=t.toArray(),s=Math.max(0,Math.min(i.length-1,r.activeItemIndex||0));i[s]&&!i[s].disabled?r.setActiveItem(s):r.setNextItemActive()}})}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe(vi(this._directDescendantItems),ur(r=>(0,vc.T)(...r.map(i=>i._hovered))))}addItem(t){}removeItem(t){}_handleKeydown(t){const r=t.keyCode,i=this._keyManager;switch(r){case 27:vA(t)||(t.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(38===r||40===r)&&i.setFocusOrigin("keyboard"),void i.onKeydown(t)}t.stopPropagation()}focusFirstItem(t="program"){this._ngZone.onStable.pipe(Ni(1)).subscribe(()=>{let r=null;if(this._directDescendantItems.length&&(r=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!r||!r.contains(document.activeElement)){const i=this._keyManager;i.setFocusOrigin(t).setFirstItemActive(),!i.activeItem&&r&&r.focus()}})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(t){const r=Math.min(this._baseElevation+t,24),i=`${this._elevationPrefix}${r}`,s=Object.keys(this._classList).find(l=>l.startsWith(this._elevationPrefix));(!s||s===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[i]=!0,this._previousElevation=i)}setPositionClasses(t=this.xPosition,r=this.yPosition){const i=this._classList;i["mat-menu-before"]="before"===t,i["mat-menu-after"]="after"===t,i["mat-menu-above"]="above"===r,i["mat-menu-below"]="below"===r,this._changeDetectorRef?.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(t){this._animationDone.next(t),this._isAnimating=!1}_onAnimationStart(t){this._isAnimating=!0,"enter"===t.toState&&0===this._keyManager.activeItemIndex&&(t.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(vi(this._allItems)).subscribe(t=>{this._directDescendantItems.reset(t.filter(r=>r._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.R0b),u.Y36(CD),u.Y36(u.sBO))},n.\u0275dir=u.lG2({type:n,contentQueries:function(t,r,i){if(1&t&&(u.Suo(i,Rb,5),u.Suo(i,Fg,5),u.Suo(i,Fg,4)),2&t){let s;u.iGM(s=u.CRH())&&(r.lazyContent=s.first),u.iGM(s=u.CRH())&&(r._allItems=s),u.iGM(s=u.CRH())&&(r.items=s)}},viewQuery:function(t,r){if(1&t&&u.Gf(u.Rgc,5),2&t){let i;u.iGM(i=u.CRH())&&(r.templateRef=i.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),n})(),DD=(()=>{class n extends Wd{constructor(t,r,i,s){super(t,r,i,s),this._elevationPrefix="mat-elevation-z",this._baseElevation=4}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.R0b),u.Y36(CD),u.Y36(u.sBO))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(t,r){2&t&&u.uIk("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[u._Bn([{provide:Ng,useExisting:n}]),u.qOj],ngContentSelectors:Mb,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(t,r){1&t&&(u.F$t(),u.YNc(0,xb,3,6,"ng-template"))},dependencies:[pn],styles:['mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px;position:relative}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.mat-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.mat-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-menu-submenu-icon{fill:CanvasText}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}'],encapsulation:2,data:{animation:[zd.transformMenu,zd.fadeInItems]},changeDetection:0}),n})();const SD=new u.OlP("mat-menu-scroll-strategy"),TD={provide:SD,deps:[Cc],useFactory:function ck(n){return()=>n.scrollStrategies.reposition()}},uk=Pi({passive:!0});let MD=(()=>{class n{constructor(t,r,i,s,l,h,p,_,w){this._overlay=t,this._element=r,this._viewContainerRef=i,this._menuItemInstance=h,this._dir=p,this._focusMonitor=_,this._ngZone=w,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=si.w0.EMPTY,this._hoverSubscription=si.w0.EMPTY,this._menuCloseSubscription=si.w0.EMPTY,this._handleTouchStart=D=>{oi(D)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new u.vpe,this.onMenuOpen=this.menuOpened,this.menuClosed=new u.vpe,this.onMenuClose=this.menuClosed,this._scrollStrategy=s,this._parentMaterialMenu=l instanceof Wd?l:void 0,r.nativeElement.addEventListener("touchstart",this._handleTouchStart,uk),h&&(h._triggersSubmenu=this.triggersSubmenu())}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(t){this.menu=t}get menu(){return this._menu}set menu(t){t!==this._menu&&(this._menu=t,this._menuCloseSubscription.unsubscribe(),t&&(this._menuCloseSubscription=t.close.subscribe(r=>{this._destroyMenu(r),("click"===r||"tab"===r)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(r)})))}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,uk),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){const t=this.menu;if(this._menuOpen||!t)return;const r=this._createOverlay(t),i=r.getConfig(),s=i.positionStrategy;this._setPosition(t,s),i.hasBackdrop=t.hasBackdrop??!this.triggersSubmenu(),r.attach(this._getPortal(t)),t.lazyContent&&t.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(t),t instanceof Wd&&(t._startAnimation(),t._directDescendantItems.changes.pipe(To(t.close)).subscribe(()=>{s.withLockedPosition(!1).reapplyLastPosition(),s.withLockedPosition(!0)}))}closeMenu(){this.menu?.close.emit()}focus(t,r){this._focusMonitor&&t?this._focusMonitor.focusVia(this._element,t,r):this._element.nativeElement.focus(r)}updatePosition(){this._overlayRef?.updatePosition()}_destroyMenu(t){if(!this._overlayRef||!this.menuOpen)return;const r=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===t||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,r instanceof Wd?(r._resetAnimation(),r.lazyContent?r._animationDone.pipe(Hr(i=>"void"===i.toState),Ni(1),To(r.lazyContent._attached)).subscribe({next:()=>r.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),r?.lazyContent?.detach())}_initMenu(t){t.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,t.direction=this.dir,this._setMenuElevation(t),t.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(t){if(t.setElevation){let r=0,i=t.parentMenu;for(;i;)r++,i=i.parentMenu;t.setElevation(r)}}_setIsMenuOpen(t){this._menuOpen=t,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(t)}_createOverlay(t){if(!this._overlayRef){const r=this._getOverlayConfig(t);this._subscribeToPositions(t,r.positionStrategy),this._overlayRef=this._overlay.create(r),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(t){return new Sb({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:t.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:t.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(t,r){t.setPositionClasses&&r.positionChanges.subscribe(i=>{const s="start"===i.connectionPair.overlayX?"after":"before",l="top"===i.connectionPair.overlayY?"below":"above";this._ngZone?this._ngZone.run(()=>t.setPositionClasses(s,l)):t.setPositionClasses(s,l)})}_setPosition(t,r){let[i,s]="before"===t.xPosition?["end","start"]:["start","end"],[l,h]="above"===t.yPosition?["bottom","top"]:["top","bottom"],[p,_]=[l,h],[w,D]=[i,s],M=0;if(this.triggersSubmenu()){if(D=i="before"===t.xPosition?"start":"end",s=w="end"===i?"start":"end",this._parentMaterialMenu){if(null==this._parentInnerPadding){const P=this._parentMaterialMenu.items.first;this._parentInnerPadding=P?P._getHostElement().offsetTop:0}M="bottom"===l?this._parentInnerPadding:-this._parentInnerPadding}}else t.overlapTrigger||(p="top"===l?"bottom":"top",_="top"===h?"bottom":"top");r.withPositions([{originX:i,originY:p,overlayX:w,overlayY:l,offsetY:M},{originX:s,originY:p,overlayX:D,overlayY:l,offsetY:M},{originX:i,originY:_,overlayX:w,overlayY:h,offsetY:-M},{originX:s,originY:_,overlayX:D,overlayY:h,offsetY:-M}])}_menuClosingActions(){const t=this._overlayRef.backdropClick(),r=this._overlayRef.detachments(),i=this._parentMaterialMenu?this._parentMaterialMenu.closed:et(),s=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(Hr(l=>l!==this._menuItemInstance),Hr(()=>this._menuOpen)):et();return(0,vc.T)(t,i,s,r)}_handleMousedown(t){fy(t)||(this._openedBy=0===t.button?"mouse":void 0,this.triggersSubmenu()&&t.preventDefault())}_handleKeydown(t){const r=t.keyCode;(13===r||32===r)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===r&&"ltr"===this.dir||37===r&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(t){this.triggersSubmenu()?(t.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(Hr(t=>t===this._menuItemInstance&&!t.disabled),bD(0,Mg)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof Wd&&this.menu._isAnimating?this.menu._animationDone.pipe(Ni(1),bD(0,Mg),To(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(t){return(!this._portal||this._portal.templateRef!==t.templateRef)&&(this._portal=new tD(t.templateRef,this._viewContainerRef)),this._portal}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Cc),u.Y36(u.SBq),u.Y36(u.s_b),u.Y36(SD),u.Y36(Ng,8),u.Y36(Fg,10),u.Y36(ME,8),u.Y36(gm),u.Y36(u.R0b))},n.\u0275dir=u.lG2({type:n,hostVars:3,hostBindings:function(t,r){1&t&&u.NdJ("click",function(s){return r._handleClick(s)})("mousedown",function(s){return r._handleMousedown(s)})("keydown",function(s){return r._handleKeydown(s)}),2&t&&u.uIk("aria-haspopup",r.menu?"menu":null)("aria-expanded",r.menuOpen||null)("aria-controls",r.menuOpen?r.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),n})(),Ob=(()=>{class n extends MD{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-menu-trigger"],exportAs:["matMenuTrigger"],features:[u.qOj]}),n})(),dk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[TD],imports:[$c,bi,Sm,$f,bb,bi]}),n})();var $r=L(2011),Pb=L(5363),ZV=L(6063);class hk extends Bt.x{constructor(e=1/0,t=1/0,r=ZV.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:l}=this;t||(r.push(e),!i&&r.push(s.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let l=0;l<s.length&&!e.closed;l+=r?1:2)e.next(s[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const l=t.now();let h=0;for(let p=1;p<r.length&&r[p]<=l;p+=2)h=p;h&&r.splice(0,h+1)}}}function xD(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,wg.B)({connector:()=>new hk(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const Nb=(0,L(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Fb(n){return(0,lr.e)((e,t)=>{let r=!1;e.subscribe((0,zn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function pk(n=YV){return(0,lr.e)((e,t)=>{let r=!1;e.subscribe((0,zn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function YV(){return new Nb}function Ic(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Hr((i,s)=>n(i,s,r)):hc.y,Ni(1),t?Fb(e):pk(()=>new Nb))}function RD(n,e){return(0,ka.m)(e)?ur(()=>n,e):ur(()=>n)}var kD=L(9468),En=L(5813);L(5867);var H=L(5861),Oe=L(9681),We=L(4859),k=L(2090),mt=L(1877);const Ve=new Map,Dt={activated:!1,tokenObservers:[]},ln={initialized:!1,enabled:!1};function qt(n){return Ve.get(n)||Dt}function ci(n,e){Ve.set(n,e)}function qd(){return ln}class jb{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,H.Z)(function*(){t.stop();try{t.pending=new k.BH,yield function $b(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new k.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ts=new k.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function XV(n){if(!qt(n).activated)throw Ts.create("use-before-activation",{appName:n.name})}function _k(n,e){return yk.apply(this,arguments)}function yk(){return(yk=(0,H.Z)(function*({url:n,body:e},t){var r,i;const s={"Content-Type":"application/json"},l=t.getImmediate({optional:!0});if(l){const P=yield l.getHeartbeatsHeader();P&&(s["X-Firebase-Client"]=P)}const h={method:"POST",body:JSON.stringify(e),headers:s};let p,_;try{p=yield fetch(n,h)}catch(P){throw Ts.create("fetch-network-error",{originalErrorMessage:null===(r=P)||void 0===r?void 0:r.message})}if(200!==p.status)throw Ts.create("fetch-status-error",{httpStatus:p.status});try{_=yield p.json()}catch(P){throw Ts.create("fetch-parse-error",{originalErrorMessage:null===(i=P)||void 0===i?void 0:i.message})}const w=_.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw Ts.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${_.ttl}`});const D=1e3*Number(w[1]),M=Date.now();return{token:_.token,expireTimeMillis:M+D,issuedAtTimeMillis:M}})).apply(this,arguments)}function tq(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Gb="firebase-app-check-store";let ND=null;function eB(){return ND||(ND=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var s;e(Ts.create("storage-open",{originalErrorMessage:null===(s=i.target.error)||void 0===s?void 0:s.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(Gb,{keyPath:"compositeKey"})}}catch(r){e(Ts.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),ND)}function vk(){return(vk=(0,H.Z)(function*(n,e){const r=(yield eB()).transaction(Gb,"readwrite"),s=r.objectStore(Gb).put({compositeKey:n,value:e});return new Promise((l,h)=>{s.onsuccess=p=>{l()},r.onerror=p=>{var _;h(Ts.create("storage-set",{originalErrorMessage:null===(_=p.target.error)||void 0===_?void 0:_.message}))}})})).apply(this,arguments)}const zb=new mt.Yd("@firebase/app-check");function iB(n,e){return(0,k.hl)()?function sq(n,e){return function tB(n,e){return vk.apply(this,arguments)}(function rB(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{zb.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function sB(){return qd().enabled}function oB(){return Ck.apply(this,arguments)}function Ck(){return(Ck=(0,H.Z)(function*(){const n=qd();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const dq={error:"UNKNOWN_ERROR"};function hq(n){return k.US.encodeString(JSON.stringify(n),!1)}function FD(n){return Ik.apply(this,arguments)}function Ik(){return(Ik=(0,H.Z)(function*(n,e=!1){const t=n.app;XV(t);const r=qt(t);let s,i=r.token;if(!i){const p=yield r.cachedTokenPromise;p&&LD(p)&&(i=p)}if(!e&&i&&LD(i))return{token:i.token};let h,l=!1;if(sB()){r.exchangeTokenPromise||(r.exchangeTokenPromise=_k(tq(t,yield oB()),n.heartbeatServiceProvider).then(_=>(r.exchangeTokenPromise=void 0,_)),l=!0);const p=yield r.exchangeTokenPromise;return yield iB(t,p),ci(t,Object.assign(Object.assign({},r),{token:p})),{token:p.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(p=>(r.exchangeTokenPromise=void 0,p)),l=!0),i=yield r.exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?zb.warn(p.message):zb.error(p),s=p}return i?(h={token:i.token},ci(t,Object.assign(Object.assign({},r),{token:i})),yield iB(t,i)):h=pq(s),l&&lB(t,h),h})).apply(this,arguments)}function Sk(n,e){const t=qt(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),ci(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function aB(n){const{app:e}=n,t=qt(e);let r=t.tokenRefresher;r||(r=function fq(n){const{app:e}=n;return new jb((0,H.Z)(function*(){let r;if(r=qt(e).token?yield FD(n,!0):yield FD(n),r.error)throw r.error}),()=>!0,()=>{const t=qt(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),ci(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function lB(n,e){const t=qt(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function LD(n){return n.expireTimeMillis-Date.now()>0}function pq(n){return{token:hq(dq),error:n}}class mq{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=qt(this.app);for(const t of e)Sk(this.app,t.next);return Promise.resolve()}}const gB="app-check-internal";!function Mq(){(0,Oe._registerComponent)(new We.wA("app-check",n=>function gq(n,e){return new mq(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(gB).initialize()})),(0,Oe._registerComponent)(new We.wA(gB,n=>function _q(n){return{getToken:e=>FD(n,e),addTokenListener:e=>function Dk(n,e,t,r){const{app:i}=n,s=qt(i),l={next:t,error:r,type:e};if(ci(i,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,l]})),s.token&&LD(s.token)){const h=s.token;Promise.resolve().then(()=>{t({token:h.token}),aB(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>aB(n))}(n,"INTERNAL",e),removeTokenListener:e=>Sk(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Oe.registerVersion)("@firebase/app-check","0.5.12")}();class Wb{constructor(){return(0,En.vb)("app-check")}}typeof window<"u"&&window;var BD=L(127);const Rk=new u.OlP("angularfire2.auth.use-emulator"),kk=new u.OlP("angularfire2.auth.settings"),Ok=new u.OlP("angularfire2.auth.tenant-id"),Pk=new u.OlP("angularfire2.auth.langugage-code"),Nk=new u.OlP("angularfire2.auth.use-device-language"),Fk=new u.OlP("angularfire.auth.persistence"),Lk=(n,e,t,r,i,s,l,h)=>(0,$r.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=e.runOutsideAngular(()=>n.auth());if(t&&p.useEmulator(...t),r&&(p.tenantId=r),p.languageCode=i,s&&p.useDeviceLanguage(),l)for(const[_,w]of Object.entries(l))p.settings[_]=w;return h&&p.setPersistence(h),p},[t,r,i,s,l,h]);let qb=(()=>{class n{constructor(t,r,i,s,l,h,p,_,w,D,M,P){const F=new Bt.x,q=et(void 0).pipe((0,Pb.Q)(l.outsideAngular),ur(()=>s.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,5881)))),(0,lt.U)(()=>(0,$r.on)(t,s,r)),(0,lt.U)(oe=>Lk(oe,s,h,_,w,D,p,M)),xD({bufferSize:1,refCount:!1}));if(Jo(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=et(null);else{q.pipe(Ic()).subscribe();const xe=q.pipe(ur(Qe=>Qe.getRedirectResult().then(Ct=>Ct,()=>null)),En.iC,xD({bufferSize:1,refCount:!1})),Ge=q.pipe(ur(Qe=>new sr.y(Ct=>({unsubscribe:s.runOutsideAngular(()=>Qe.onAuthStateChanged(St=>Ct.next(St),St=>Ct.error(St),()=>Ct.complete()))})))),Xe=q.pipe(ur(Qe=>new sr.y(Ct=>({unsubscribe:s.runOutsideAngular(()=>Qe.onIdTokenChanged(St=>Ct.next(St),St=>Ct.error(St),()=>Ct.complete()))}))));this.authState=xe.pipe(RD(Ge),(0,kD.R)(l.outsideAngular),(0,Pb.Q)(l.insideAngular)),this.user=xe.pipe(RD(Xe),(0,kD.R)(l.outsideAngular),(0,Pb.Q)(l.insideAngular)),this.idToken=this.user.pipe(ur(Qe=>Qe?(0,fn.D)(Qe.getIdToken()):et(null))),this.idTokenResult=this.user.pipe(ur(Qe=>Qe?(0,fn.D)(Qe.getIdTokenResult()):et(null))),this.credential=(0,vc.T)(xe,F,this.authState.pipe(Hr(Qe=>!Qe))).pipe((0,lt.U)(Qe=>Qe?.user?Qe:null),(0,kD.R)(l.outsideAngular),(0,Pb.Q)(l.insideAngular))}return(0,$r.pX)(this,q,s,{spy:{apply:(oe,xe,Ge)=>{(oe.startsWith("signIn")||oe.startsWith("createUser"))&&Ge.then(Xe=>F.next(Xe))}}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG($r.Dh),u.LFG($r.xv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(En.HU),u.LFG(Rk,8),u.LFG(kk,8),u.LFG(Ok,8),u.LFG(Pk,8),u.LFG(Nk,8),u.LFG(Fk,8),u.LFG(Wb,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Nq=(()=>{class n{constructor(){BD.Z.registerVersion("angularfire",En.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[qb]}),n})();var Vk=L(3942);const yB="firebasestorage.googleapis.com",vB="storageBucket";class Nr extends k.ZR{constructor(e,t){super(Bk(e),`Firebase Storage: ${t} (${Bk(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Nr.prototype)}_codeEquals(e){return Bk(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function Bk(n){return"storage/"+n}function Uk(){return new Nr("unknown","An unknown error occurred, please check the error payload for server response.")}function bB(){return new Nr("canceled","User canceled the upload/download.")}function wB(){return new Nr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Vg(n){return new Nr("invalid-argument",n)}function EB(){return new Nr("app-deleted","The Firebase app was deleted.")}function CB(n){return new Nr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Kb(n,e){return new Nr("invalid-format","String does not match format '"+n+"': "+e)}function Zb(n){throw new Nr("internal-error","Internal error: "+n)}class ss{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ss.makeFromUrl(e,t)}catch{return new ss(e,"")}if(""===r.path)return r;throw function zq(n){return new Nr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function _(Qe){Qe.path_=decodeURIComponent(Qe.path)}const D=t.replace(/[.]/g,"\\."),Xe=[{regex:h,indices:{bucket:1,path:3},postModify:function s(Qe){"/"===Qe.path.charAt(Qe.path.length-1)&&(Qe.path_=Qe.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${D}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:_},{regex:new RegExp(`^https?://${t===yB?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:_}];for(let Qe=0;Qe<Xe.length;Qe++){const Ct=Xe[Qe],St=Ct.regex.exec(e);if(St){let Wr=St[Ct.indices.path];Wr||(Wr=""),r=new ss(St[Ct.indices.bucket],Wr),Ct.postModify(r);break}}if(null==r)throw function Gq(n){return new Nr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class Zq{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function UD(n){return"string"==typeof n||n instanceof String}function IB(n){return Hk()&&n instanceof Blob}function Hk(){return typeof Blob<"u"}function jk(n,e,t,r){if(r<e)throw Vg(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Vg(`Invalid value for '${n}'. Expected ${t} or less.`)}function Su(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function DB(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Kd=(()=>{return(n=Kd||(Kd={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",Kd;var n})();class t6{constructor(e,t,r,i,s,l,h,p,_,w,D){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=l,this.callback_=h,this.errorCallback_=p,this.timeout_=_,this.progressCallback_=w,this.connectionFactory_=D,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((M,P)=>{this.resolve_=M,this.reject_=P,this.start_()})}start_(){const t=(r,i)=>{const s=this.resolve_,l=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const p=this.callback_(h,h.getResponse());!function Xq(n){return void 0!==n}(p)?s():s(p)}catch(p){l(p)}else if(null!==h){const p=Uk();p.serverResponse=h.getErrorText(),l(this.errorCallback_?this.errorCallback_(h,p):p)}else l(i.canceled?this.appDelete_?EB():bB():function $q(){return new Nr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new HD(!1,null,!0)):this.backoffId_=function Yq(n,e,t){let r=1,i=null,s=null,l=!1,h=0;function p(){return 2===h}let _=!1;function w(...oe){_||(_=!0,e.apply(null,oe))}function D(oe){i=setTimeout(()=>{i=null,n(P,p())},oe)}function M(){s&&clearTimeout(s)}function P(oe,...xe){if(_)return void M();if(oe)return M(),void w.call(null,oe,...xe);if(p()||l)return M(),void w.call(null,oe,...xe);let Xe;r<64&&(r*=2),1===h?(h=2,Xe=0):Xe=1e3*(r+Math.random()),D(Xe)}let F=!1;function q(oe){F||(F=!0,M(),!_&&(null!==i?(oe||(h=2),clearTimeout(i),D(0)):oe||(h=1)))}return D(0),s=setTimeout(()=>{l=!0,q(!0)},t),q}((r,i)=>{if(i)return void r(!1,new HD(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const l=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(l),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(l),this.pendingConnection_=null;const h=s.getErrorCode()===Kd.NO_ERROR,p=s.getStatus();if(!h||this.isRetryStatusCode_(p)){const w=s.getErrorCode()===Kd.ABORT;return void r(!1,new HD(!1,null,w))}const _=-1!==this.successCodes_.indexOf(p);r(!0,new HD(_,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function Qq(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),s=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||s}}class HD{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function l6(...n){const e=function a6(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(Hk())return new Blob(n);throw new Nr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Vo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class $k{constructor(e,t){this.data=e,this.contentType=t||null}}function Gk(n,e){switch(n){case Vo.RAW:return new $k(SB(e));case Vo.BASE64:case Vo.BASE64URL:return new $k(TB(n,e));case Vo.DATA_URL:return new $k(function h6(n){const e=new AB(n);return e.base64?TB(Vo.BASE64,e.rest):function d6(n){let e;try{e=decodeURIComponent(n)}catch{throw Kb(Vo.DATA_URL,"Malformed data URL.")}return SB(e)}(e.rest)}(e),function f6(n){return new AB(n).contentType}(e))}throw Uk()}function SB(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function TB(n,e){switch(n){case Vo.BASE64:{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw Kb(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Vo.BASE64URL:{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw Kb(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function u6(n){return atob(n)}(e)}catch{throw Kb(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class AB{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Kb(Vo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function p6(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Dc{constructor(e,t){let r=0,i="";IB(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(IB(this.data_)){const i=function c6(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Dc(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Dc(r,!0)}}static getBlob(...e){if(Hk()){const t=e.map(r=>r instanceof Dc?r.data_:r);return new Dc(l6.apply(null,t))}{const t=e.map(l=>UD(l)?Gk(Vo.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(l=>{for(let h=0;h<l.length;h++)i[s++]=l[h]}),new Dc(i,!0)}}uploadData(){return this.data_}}function zk(n){let e;try{e=JSON.parse(n)}catch{return null}return function e6(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function MB(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function _6(n,e){return e}class As{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||_6}}let jD=null;function Yb(){if(jD)return jD;const n=[];n.push(new As("bucket")),n.push(new As("generation")),n.push(new As("metageneration")),n.push(new As("name","fullPath",!0));const t=new As("name");t.xform=function e(s,l){return function y6(n){return!UD(n)||n.length<2?n:MB(n)}(l)},n.push(t);const i=new As("size");return i.xform=function r(s,l){return void 0!==l?Number(l):l},n.push(i),n.push(new As("timeCreated")),n.push(new As("updated")),n.push(new As("md5Hash",null,!0)),n.push(new As("cacheControl",null,!0)),n.push(new As("contentDisposition",null,!0)),n.push(new As("contentEncoding",null,!0)),n.push(new As("contentLanguage",null,!0)),n.push(new As("contentType",null,!0)),n.push(new As("metadata","customMetadata",!0)),jD=n,jD}function xB(n,e,t){const r=zk(e);return null===r?null:function b6(n,e,t){const r={type:"file"},i=t.length;for(let s=0;s<i;s++){const l=t[s];r[l.local]=l.xform(r,e[l.server])}return function v6(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new ss(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(r,n),r}(n,r,t)}function Wk(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const RB="prefixes";class Sc{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Tc(n){if(!n)throw Uk()}function $D(n,e){return function t(r,i){const s=xB(n,i,e);return Tc(null!==s),s}}function Bg(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function Hq(){return new Nr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function Uq(){return new Nr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function Bq(n){return new Nr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function jq(n){return new Nr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function Qb(n){const e=Bg(n);return function t(r,i){let s=e(r,i);return 404===r.getStatus()&&(s=function Vq(n){return new Nr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=i.serverResponse,s}}function OB(n,e,t){const i=Su(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new Sc(i,"GET",$D(n,t),l);return h.errorHandler=Qb(e),h}function S6(n,e,t,r,i){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),r&&(s.pageToken=r),i&&(s.maxResults=i);const h=Su(e.bucketOnlyServerUrl(),n.host,n._protocol),_=n.maxOperationRetryTime,w=new Sc(h,"GET",function I6(n,e){return function t(r,i){const s=function C6(n,e,t){const r=zk(t);return null===r?null:function E6(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[RB])for(const i of t[RB]){const s=i.replace(/\/$/,""),l=n._makeStorageReference(new ss(e,s));r.prefixes.push(l)}if(t.items)for(const i of t.items){const s=n._makeStorageReference(new ss(e,i.name));r.items.push(s)}return r}(n,e,r)}(n,e,i);return Tc(null!==s),s}}(n,e.bucket),_);return w.urlParams=s,w.errorHandler=Bg(e),w}function NB(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function x6(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class GD{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function qk(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Tc(!1)}return Tc(!!t&&-1!==(e||["active"]).indexOf(t)),t}const P6={STATE_CHANGED:"state_changed"},Ms={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Kk(n){switch(n){case"running":case"pausing":case"canceling":return Ms.RUNNING;case"paused":return Ms.PAUSED;case"success":return Ms.SUCCESS;case"canceled":return Ms.CANCELED;default:return Ms.ERROR}}class N6{constructor(e,t,r){if(function Jq(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function Ug(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class L6 extends class F6{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Kd.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Kd.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Kd.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Zb("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Zb("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Zb("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Zb("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Zb("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Pl(){return new L6}class BB{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Yb(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function R6(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),l=NB(e,r,i),h={name:l.fullPath},p=Su(s,n.host,n._protocol),w={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},D=Wk(l,t),F=new Sc(p,"POST",function P(q){let oe;qk(q);try{oe=q.getResponseHeader("X-Goog-Upload-URL")}catch{Tc(!1)}return Tc(UD(oe)),oe},n.maxUploadRetryTime);return F.urlParams=h,F.headers=w,F.body=D,F.errorHandler=Bg(e),F}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Pl,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function k6(n,e,t,r){const p=new Sc(t,"POST",function s(_){const w=qk(_,["active","final"]);let D=null;try{D=_.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Tc(!1)}D||Tc(!1);const M=Number(D);return Tc(!isNaN(M)),new GD(M,r.size(),"final"===w)},n.maxUploadRetryTime);return p.headers={"X-Goog-Upload-Command":"query"},p.errorHandler=Bg(e),p}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Pl,t,r);this._request=s,s.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new GD(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let l;try{l=function O6(n,e,t,r,i,s,l,h){const p=new GD(0,0);if(l?(p.current=l.current,p.total=l.total):(p.current=0,p.total=r.size()),r.size()!==p.total)throw function qq(){return new Nr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const _=p.total-p.current;let w=_;i>0&&(w=Math.min(w,i));const D=p.current,F={"X-Goog-Upload-Command":w===_?"upload, finalize":"upload","X-Goog-Upload-Offset":`${p.current}`},q=r.slice(D,D+w);if(null===q)throw wB();const Xe=new Sc(t,"POST",function oe(Qe,Ct){const St=qk(Qe,["active","final"]),sn=p.current+w,Wr=r.size();let zo;return zo="final"===St?$D(e,s)(Qe,Ct):null,new GD(sn,Wr,"final"===St,zo)},e.maxUploadRetryTime);return Xe.headers=F,Xe.body=q.uploadData(),Xe.progressCallback=h||null,Xe.errorHandler=Bg(n),Xe}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(p){return this._error=p,void this._transition("error")}const h=this._ref.storage._makeRequest(l,Pl,i,s);this._request=h,h.getPromise().then(p=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(p.current),p.finalized?(this._metadata=p.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=OB(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Pl,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function FB(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},p=function h(){let Xe="";for(let Qe=0;Qe<2;Qe++)Xe+=Math.random().toString().slice(2);return Xe}();l["Content-Type"]="multipart/related; boundary="+p;const _=NB(e,r,i),w=Wk(_,t),P=Dc.getBlob("--"+p+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+w+"\r\n--"+p+"\r\nContent-Type: "+_.contentType+"\r\n\r\n",r,"\r\n--"+p+"--");if(null===P)throw wB();const F={name:_.fullPath},q=Su(s,n.host,n._protocol),xe=n.maxUploadRetryTime,Ge=new Sc(q,"POST",$D(n,t),xe);return Ge.urlParams=F,Ge.headers=l,Ge.body=P.uploadData(),Ge.errorHandler=Bg(e),Ge}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Pl,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=bB(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=Kk(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const s=new N6(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(Kk(this._state)){case Ms.SUCCESS:Ug(this._resolve.bind(null,this.snapshot))();break;case Ms.CANCELED:case Ms.ERROR:Ug(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Kk(this._state)){case Ms.RUNNING:case Ms.PAUSED:e.next&&Ug(e.next.bind(e,this.snapshot))();break;case Ms.SUCCESS:e.complete&&Ug(e.complete.bind(e))();break;default:e.error&&Ug(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Wf{constructor(e,t){this._service=e,this._location=t instanceof ss?t:ss.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Wf(e,t)}get root(){const e=new ss(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return MB(this._location.path)}get storage(){return this._service}get parent(){const e=function m6(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ss(this._location.bucket,e);return new Wf(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw CB(e)}}function HB(n,e,t){return Zk.apply(this,arguments)}function Zk(){return(Zk=(0,H.Z)(function*(n,e,t){const i=yield jB(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield HB(n,e,i.nextPageToken))})).apply(this,arguments)}function jB(n,e){null!=e&&"number"==typeof e.maxResults&&jk("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=S6(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Pl)}function Z6(n){n._throwIfRoot("getDownloadURL");const e=function T6(n,e,t){const i=Su(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new Sc(i,"GET",function D6(n,e){return function t(r,i){const s=xB(n,i,e);return Tc(null!==s),function w6(n,e,t,r){const i=zk(e);if(null===i||!UD(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const l=encodeURIComponent;return s.split(",").map(_=>{const D=n.fullPath;return Su("/b/"+l(n.bucket)+"/o/"+l(D),t,r)+DB({alt:"media",token:_})})[0]}(s,i,n.host,n._protocol)}}(n,t),l);return h.errorHandler=Qb(e),h}(n.storage,n._location,Yb());return n.storage.makeRequestWithTokens(e,Pl).then(t=>{if(null===t)throw function Kq(){return new Nr("no-download-url","The given file does not have any download URLs.")}();return t})}function $B(n,e){const t=function g6(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new ss(n._location.bucket,t);return new Wf(n.storage,r)}function GB(n,e){if(n instanceof Yk){const t=n;if(null==t._bucket)throw function Wq(){return new Nr("no-default-bucket","No default bucket found. Did you set the '"+vB+"' property when initializing the app?")}();const r=new Wf(t,t._bucket);return null!=e?GB(r,e):r}return void 0!==e?$B(n,e):n}function J6(n,e){if(e&&function Q6(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof Yk)return function X6(n,e){return new Wf(n,e)}(n,e);throw Vg("To use ref(service, url), the first argument must be a Storage instance.")}return GB(n,e)}function zB(n,e){const t=e?.[vB];return null==t?null:ss.makeFromBucketSpec(t,n)}class Yk{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=yB,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ss.makeFromBucketSpec(i,this._host):zB(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ss.makeFromBucketSpec(this._url,e):zB(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){jk("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){jk("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,H.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,H.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Wf(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new Zq(EB());{const s=function o6(n,e,t,r,i,s){const l=DB(n.urlParams),h=n.url+l,p=Object.assign({},n.headers);return function i6(n,e){e&&(n["X-Firebase-GMPID"]=e)}(p,e),function n6(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(p,t),function r6(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(p,s),function s6(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(p,r),new t6(h,n.method,p,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,t){var r=this;return(0,H.Z)(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,s).getPromise()})()}}const WB="@firebase/storage";function ZB(n,e){return J6(n=(0,k.m9)(n),e)}function u4(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Yk(t,r,i,e,Oe.SDK_VERSION)}!function d4(){(0,Oe._registerComponent)(new We.wA("storage",u4,"PUBLIC").setMultipleInstances(!0)),(0,Oe.registerVersion)(WB,"0.9.9",""),(0,Oe.registerVersion)(WB,"0.9.9","esm2017")}();class zD{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class YB{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new zD(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new zD(r,this,this._ref))},t)}on(e,t,r,i){let s;return t&&(s="function"==typeof t?l=>t(new zD(l,this,this._ref)):{next:t.next?l=>t.next(new zD(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class QB{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Tu(e,this._service))}get items(){return this._delegate.items.map(e=>new Tu(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Tu{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function l4(n,e){return $B(n,e)}(this._delegate,e);return new Tu(t,this.storage)}get root(){return new Tu(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Tu(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new YB(function t4(n,e,t){return function G6(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new BB(n,new Dc(e),t)}(n=(0,k.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Vo.RAW,r){this._throwIfRoot("putString");const i=Gk(t,e),s=Object.assign({},r);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),new YB(new BB(this._delegate,new Dc(i.data,!0),s),this)}listAll(){return function s4(n){return function W6(n){const e={prefixes:[],items:[]};return HB(n,e).then(()=>e)}(n=(0,k.m9)(n))}(this._delegate).then(e=>new QB(e,this.storage))}list(e){return function i4(n,e){return jB(n=(0,k.m9)(n),e)}(this._delegate,e||void 0).then(t=>new QB(t,this.storage))}getMetadata(){return function n4(n){return function q6(n){n._throwIfRoot("getMetadata");const e=OB(n.storage,n._location,Yb());return n.storage.makeRequestWithTokens(e,Pl)}(n=(0,k.m9)(n))}(this._delegate)}updateMetadata(e){return function r4(n,e){return function K6(n,e){n._throwIfRoot("updateMetadata");const t=function A6(n,e,t,r){const s=Su(e.fullServerUrl(),n.host,n._protocol),h=Wk(t,r),_=n.maxOperationRetryTime,w=new Sc(s,"PATCH",$D(n,r),_);return w.headers={"Content-Type":"application/json; charset=utf-8"},w.body=h,w.errorHandler=Qb(e),w}(n.storage,n._location,e,Yb());return n.storage.makeRequestWithTokens(t,Pl)}(n=(0,k.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function o4(n){return Z6(n=(0,k.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function a4(n){return function Y6(n){n._throwIfRoot("deleteObject");const e=function M6(n,e){const r=Su(e.fullServerUrl(),n.host,n._protocol),h=new Sc(r,"DELETE",function l(p,_){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=Qb(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Pl)}(n=(0,k.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw CB(e)}}class XB{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(JB(e))throw Vg("ref() expected a child path but got a URL, use refFromURL instead.");return new Tu(ZB(this._delegate,e),this)}refFromURL(e){if(!JB(e))throw Vg("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ss.makeFromUrl(e,this._delegate.host)}catch{throw Vg("refFromUrl() expected a valid full URL but got an invalid one.")}return new Tu(ZB(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function c4(n,e,t,r={}){!function e4(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,k.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function JB(n){return/^[A-Za-z]+:\/\//.test(n)}function m4(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new XB(t,r)}function eU(n){const e=function _4(n){return new sr.y(e=>{const t=l=>e.next(l);t(n.snapshot);const s=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){s()}}).pipe(Yh(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,lt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function WD(n){return{getDownloadURL:()=>et(void 0).pipe(En.fc,ur(()=>n.getDownloadURL()),En.iC),getMetadata:()=>et(void 0).pipe(En.fc,ur(()=>n.getMetadata()),En.iC),delete:()=>(0,fn.D)(n.delete()),child:e=>WD(n.child(e)),updateMetadata:e=>(0,fn.D)(n.updateMetadata(e)),put:(e,t)=>eU(n.put(e,t)),putString:(e,t,r)=>eU(n.putString(e,t,r)),list:e=>(0,fn.D)(n.list(e)),listAll:()=>(0,fn.D)(n.listAll())}}!function g4(n){const e={TaskState:Ms,TaskEvent:P6,StringFormat:Vo,Storage:XB,Reference:Tu};n.INTERNAL.registerComponent(new We.wA("storage-compat",m4,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.17")}(Vk.Z);const y4=new u.OlP("angularfire2.storageBucket"),v4=new u.OlP("angularfire2.storage.maxUploadRetryTime"),b4=new u.OlP("angularfire2.storage.maxOperationRetryTime"),w4=new u.OlP("angularfire2.storage.use-emulator");let E4=(()=>{class n{constructor(t,r,i,s,l,h,p,_,w,D){const M=(0,$r.on)(t,l,r);this.storage=(0,$r.cc)(`${M.name}.storage.${i}`,"AngularFireStorage",M.name,()=>{const P=l.runOutsideAngular(()=>M.storage(i||void 0)),F=w;return F&&P.useEmulator(...F),p&&P.setMaxUploadRetryTime(p),_&&P.setMaxOperationRetryTime(_),P},[p,_])}ref(t){return WD(this.storage.ref(t))}refFromURL(t){return WD(this.storage.refFromURL(t))}upload(t,r,i){return WD(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG($r.Dh),u.LFG($r.xv,8),u.LFG(y4,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(En.HU),u.LFG(v4,8),u.LFG(b4,8),u.LFG(w4,8),u.LFG(Wb,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),C4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),I4=(()=>{class n{constructor(){BD.Z.registerVersion("angularfire",En.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[E4],imports:[C4]}),n})();function Qk(){return(0,lr.e)((n,e)=>{let t,r=!1;n.subscribe((0,zn.x)(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}function D4(n,e,t,r,i){return(s,l)=>{let h=t,p=e,_=0;s.subscribe((0,zn.x)(l,w=>{const D=_++;p=h?n(p,w,D):(h=!0,w),r&&l.next(p)},i&&(()=>{h&&l.next(p),l.complete()})))}}function qf(n,e){return(0,lr.e)(D4(n,e,arguments.length>=2,!0))}L(5881);var ct,S4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Au={},Xk=Xk||{},jt=S4||self;function qD(){}function Jk(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Xb(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var eO="closure_uid_"+(1e9*Math.random()>>>0),A4=0;function M4(n,e,t){return n.call.apply(n.bind,arguments)}function x4(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Bi(n,e,t){return(Bi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?M4:x4).apply(null,arguments)}function KD(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Ui(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,s){for(var l=Array(arguments.length-2),h=2;h<arguments.length;h++)l[h-2]=arguments[h];return e.prototype[i].apply(r,l)}}function Zd(){this.s=this.s,this.o=this.o}var k4={};Zd.prototype.s=!1,Zd.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function T4(n){return Object.prototype.hasOwnProperty.call(n,eO)&&n[eO]||(n[eO]=++A4)}(this);delete k4[n]}},Zd.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const tU=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},nU=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let s=0;s<r;s++)s in i&&e.call(t,i[s],s,n)};function rU(n){return Array.prototype.concat.apply([],arguments)}function tO(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function ZD(n){return/^[\s\xa0]*$/.test(n)}var Rs,iU=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function xs(n,e){return-1!=n.indexOf(e)}function nO(n,e){return n<e?-1:n>e?1:0}e:{var sU=jt.navigator;if(sU){var oU=sU.userAgent;if(oU){Rs=oU;break e}}Rs=""}function rO(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function aU(n){const e={};for(const t in n)e[t]=n[t];return e}var lU="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function cU(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<lU.length;s++)t=lU[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function iO(n){return iO[" "](n),n}iO[" "]=qD;var YD,n,N4=xs(Rs,"Opera"),Hg=xs(Rs,"Trident")||xs(Rs,"MSIE"),uU=xs(Rs,"Edge"),sO=uU||Hg,dU=xs(Rs,"Gecko")&&!(xs(Rs.toLowerCase(),"webkit")&&!xs(Rs,"Edge"))&&!(xs(Rs,"Trident")||xs(Rs,"MSIE"))&&!xs(Rs,"Edge"),F4=xs(Rs.toLowerCase(),"webkit")&&!xs(Rs,"Edge");function hU(){var n=jt.document;return n?n.documentMode:void 0}e:{var oO="",aO=(n=Rs,dU?/rv:([^\);]+)(\)|;)/.exec(n):uU?/Edge\/([\d\.]+)/.exec(n):Hg?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):F4?/WebKit\/(\S+)/.exec(n):N4?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(aO&&(oO=aO?aO[1]:""),Hg){var lO=hU();if(null!=lO&&lO>parseFloat(oO)){YD=String(lO);break e}}YD=oO}var L4={};var B4=jt.document&&Hg&&(hU()||parseInt(YD,10))||void 0,U4=function(){if(!jt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{jt.addEventListener("test",qD,e),jt.removeEventListener("test",qD,e)}catch{}return n}();function os(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Jb(n,e){if(os.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(dU){e:{try{iO(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:H4[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Jb.Z.h.call(this)}}os.prototype.h=function(){this.defaultPrevented=!0},Ui(Jb,os);var H4={2:"touch",3:"pen",4:"mouse"};Jb.prototype.h=function(){Jb.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var ew="closure_listenable_"+(1e6*Math.random()|0),j4=0;function $4(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++j4,this.ca=this.fa=!1}function QD(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function XD(n){this.src=n,this.g={},this.h=0}function uO(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=tU(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(QD(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function dO(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.ca&&s.listener==e&&s.capture==!!t&&s.ia==r)return i}return-1}XD.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var l=dO(n,e,r,i);return-1<l?(e=n[l],t||(e.fa=!1)):((e=new $4(e,this.src,s,!!r,i)).fa=t,n.push(e)),e};var hO="closure_lm_"+(1e6*Math.random()|0),fO={};function pU(n,e,t,r,i){if(r&&r.once)return gU(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)pU(n,e[s],t,r,i);return null}return t=_O(t),n&&n[ew]?n.N(e,t,Xb(r)?!!r.capture:!!r,i):mU(n,e,t,!1,r,i)}function mU(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var l=Xb(i)?!!i.capture:!!i,h=mO(n);if(h||(n[hO]=h=new XD(n)),(t=h.add(e,t,r,l,s)).proxy)return t;if(r=function G4(){var e=z4;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)U4||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(yU(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function gU(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)gU(n,e[s],t,r,i);return null}return t=_O(t),n&&n[ew]?n.O(e,t,Xb(r)?!!r.capture:!!r,i):mU(n,e,t,!0,r,i)}function _U(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)_U(n,e[s],t,r,i);else r=Xb(r)?!!r.capture:!!r,t=_O(t),n&&n[ew]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=dO(s=n.g[e],t,r,i))&&(QD(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=mO(n))&&(e=n.g[e.toString()],n=-1,e&&(n=dO(e,t,r,i)),(t=-1<n?e[n]:null)&&pO(t))}function pO(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[ew])uO(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(yU(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=mO(e))?(uO(t,n),0==t.h&&(t.src=null,e[hO]=null)):QD(n)}}}function yU(n){return n in fO?fO[n]:fO[n]="on"+n}function z4(n,e){if(n.ca)n=!0;else{e=new Jb(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&pO(n),n=t.call(r,e)}return n}function mO(n){return(n=n[hO])instanceof XD?n:null}var gO="__closure_events_fn_"+(1e9*Math.random()>>>0);function _O(n){return"function"==typeof n?n:(n[gO]||(n[gO]=function(e){return n.handleEvent(e)}),n[gO])}function Ei(){Zd.call(this),this.i=new XD(this),this.P=this,this.I=null}function Hi(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new os(e,n);else if(e instanceof os)e.target=e.target||n;else{var i=e;cU(e=new os(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var l=e.g=t[s];i=JD(l,r,!0,e)&&i}if(i=JD(l=e.g=n,r,!0,e)&&i,i=JD(l,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=JD(l=e.g=t[s],r,!1,e)&&i}function JD(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var l=e[s];if(l&&!l.ca&&l.capture==t){var h=l.listener,p=l.ia||l.src;l.fa&&uO(n.i,l),i=!1!==h.call(p,r)&&i}}return i&&!r.defaultPrevented}Ui(Ei,Zd),Ei.prototype[ew]=!0,Ei.prototype.removeEventListener=function(n,e,t,r){_U(this,n,e,t,r)},Ei.prototype.M=function(){if(Ei.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)QD(t[r]);delete n.g[e],n.h--}}this.I=null},Ei.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Ei.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var yO=jt.JSON.stringify;function W4(){var n=bU;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var bO,vU=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new K4,n=>n.reset());class K4{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Z4(n){jt.setTimeout(()=>{throw n},0)}function vO(n,e){bO||function Y4(){var n=jt.Promise.resolve(void 0);bO=function(){n.then(Q4)}}(),wO||(bO(),wO=!0),bU.add(n,e)}var wO=!1,bU=new class q4{constructor(){this.h=this.g=null}add(e,t){const r=vU.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Q4(){for(var n;n=W4();){try{n.h.call(n.g)}catch(t){Z4(t)}var e=vU;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}wO=!1}function eS(n,e){Ei.call(this),this.h=n||1,this.g=e||jt,this.j=Bi(this.kb,this),this.l=Date.now()}function EO(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function CO(n,e,t){if("function"==typeof n)t&&(n=Bi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Bi(n.handleEvent,n)}return 2147483647<Number(e)?-1:jt.setTimeout(n,e||0)}function wU(n){n.g=CO(()=>{n.g=null,n.i&&(n.i=!1,wU(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Ui(eS,Ei),(ct=eS.prototype).da=!1,ct.S=null,ct.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Hi(this,"tick"),this.da&&(EO(this),this.start()))}},ct.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ct.M=function(){eS.Z.M.call(this),EO(this),delete this.g};class X4 extends Zd{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:wU(this)}M(){super.M(),this.g&&(jt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function tw(n){Zd.call(this),this.h=n,this.g={}}Ui(tw,Zd);var EU=[];function CU(n,e,t,r){Array.isArray(t)||(t&&(EU[0]=t.toString()),t=EU);for(var i=0;i<t.length;i++){var s=pU(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function IU(n){rO(n.g,function(e,t){this.g.hasOwnProperty(t)&&pO(e)},n),n.g={}}function tS(){this.g=!0}function jg(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function nK(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var l=1;l<i.length;l++)i[l]=""}}}return yO(t)}catch{return e}}(n,t)+(r?" "+r:"")})}tw.prototype.M=function(){tw.Z.M.call(this),IU(this)},tw.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},tS.prototype.Aa=function(){this.g=!1},tS.prototype.info=function(){};var Kf={},DU=null;function nS(){return DU=DU||new Ei}function SU(n){os.call(this,Kf.Ma,n)}function nw(n){const e=nS();Hi(e,new SU(e,n))}function TU(n,e){os.call(this,Kf.STAT_EVENT,n),this.stat=e}function ks(n){const e=nS();Hi(e,new TU(e,n))}function AU(n,e){os.call(this,Kf.Na,n),this.size=e}function rw(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return jt.setTimeout(function(){n()},e)}Kf.Ma="serverreachability",Ui(SU,os),Kf.STAT_EVENT="statevent",Ui(TU,os),Kf.Na="timingevent",Ui(AU,os);var rS={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},MU={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function IO(){}function RU(){}IO.prototype.h=null;var TO,iw={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function DO(){os.call(this,"d")}function SO(){os.call(this,"c")}function iS(){}function sw(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new tw(this),this.P=rK,this.W=new eS(n=sO?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new kU}function kU(){this.i=null,this.g="",this.h=!1}Ui(DO,os),Ui(SO,os),Ui(iS,IO),iS.prototype.g=function(){return new XMLHttpRequest},iS.prototype.i=function(){return{}},TO=new iS;var rK=45e3,AO={},sS={};function MO(n,e,t){n.K=1,n.v=uS(Mu(e)),n.s=t,n.U=!0,OU(n,null)}function OU(n,e){n.F=Date.now(),ow(n),n.A=Mu(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),jU(t.h,"t",r),n.C=0,t=n.l.H,n.h=new kU,n.g=h2(n.l,t?e:null,!n.s),0<n.O&&(n.L=new X4(Bi(n.Ia,n,n.g),n.O)),CU(n.V,n.g,"readystatechange",n.gb),e=n.H?aU(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),nw(1),function J4(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var l="",h=s.split("&"),p=0;p<h.length;p++){var _=h[p].split("=");if(1<_.length){var w=_[0];_=_[1];var D=w.split("_");l=2<=D.length&&"type"==D[1]?l+(w+"=")+_+"&":l+(w+"=redacted&")}}else l=null;else l=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.X,n.s)}function PU(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function NU(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=iK(n,t),i==sS){4==e&&(n.o=4,ks(14),r=!1),jg(n.j,n.m,null,"[Incomplete Response]");break}if(i==AO){n.o=4,ks(15),jg(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}jg(n.j,n.m,i,null),xO(n,i)}PU(n)&&i!=sS&&i!=AO&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ks(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),HO(e),e.L=!0,ks(11))):(jg(n.j,n.m,t,"[Invalid Chunked Response]"),Zf(n),aw(n))}function iK(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?sS:(t=Number(e.substring(t,r)),isNaN(t)?AO:(r+=1)+t>e.length?sS:(e=e.substr(r,t),n.C=r+t,e))}function ow(n){n.Y=Date.now()+n.P,FU(n,n.P)}function FU(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=rw(Bi(n.eb,n),e)}function oS(n){n.B&&(jt.clearTimeout(n.B),n.B=null)}function aw(n){0==n.l.G||n.I||l2(n.l,n)}function Zf(n){oS(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,EO(n.W),IU(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function xO(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||OO(t.i,n)))if(t.I=n.N,!n.J&&OO(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;gS(t),pS(t)}UO(t),ks(18)}}else t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=rw(Bi(t.ab,t),6e3));if(1>=zU(t.i)&&t.ka){try{t.ka()}catch{}t.ka=void 0}}else Xf(t,11)}else if((n.J||t.g==n)&&gS(t),!ZD(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let _=i[e];if(t.U=_[0],_=_[1],2==t.G)if("c"==_[0]){t.J=_[1],t.la=_[2];const w=_[3];null!=w&&(t.ma=w,t.h.info("VER="+t.ma));const D=_[4];null!=D&&(t.za=D,t.h.info("SVER="+t.za));const M=_[5];null!=M&&"number"==typeof M&&0<M&&(t.K=r=1.5*M,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const P=n.g;if(P){const F=P.g?P.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(F){var s=r.i;!s.g&&(xs(F,"spdy")||xs(F,"quic")||xs(F,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(PO(s,s.h),s.h=null))}if(r.D){const q=P.g?P.g.getResponseHeader("X-HTTP-Session-Id"):null;q&&(r.sa=q,dr(r.F,r.D,q))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var l=n;if((r=t).oa=d2(r,r.H?r.la:null,r.W),l.J){WU(r.i,l);var h=l,p=r.K;p&&h.setTimeout(p),h.B&&(oS(h),ow(h)),r.g=l}else o2(r);0<t.l.length&&mS(t)}else"stop"!=_[0]&&"close"!=_[0]||Xf(t,7);else 3==t.G&&("stop"==_[0]||"close"==_[0]?"stop"==_[0]?Xf(t,7):VO(t):"noop"!=_[0]&&t.j&&t.j.wa(_),t.A=0)}nw(4)}catch{}}function RO(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Jk(n)||"string"==typeof n)nU(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Jk(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function sK(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Jk(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}}function $g(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof $g)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function kO(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Yf(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)Yf(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function Yf(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(ct=sw.prototype).setTimeout=function(n){this.P=n},ct.gb=function(n){n=n.target;const e=this.L;e&&3==xu(n)?e.l():this.Ia(n)},ct.Ia=function(n){try{if(n==this.g)e:{const w=xu(this.g);var e=this.g.Da();const D=this.g.ba();if(!(3>w)&&(3!=w||sO||this.g&&(this.h.h||this.g.ga()||e2(this.g)))){this.I||4!=w||7==e||nw(8==e||0>=D?3:2),oS(this);var t=this.g.ba();this.N=t;t:if(PU(this)){var r=e2(this.g);n="";var i=r.length,s=4==xu(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Zf(this),aw(this);var l="";break t}this.h.i=new jt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ga();if(this.i=200==t,function eK(n,e,t,r,i,s,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+l})}(this.j,this.u,this.A,this.m,this.X,w,t),this.i){if(this.$&&!this.J){t:{if(this.g){var h,p=this.g;if((h=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ZD(h)){var _=h;break t}}_=null}if(!(t=_)){this.i=!1,this.o=3,ks(12),Zf(this),aw(this);break e}jg(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,xO(this,t)}this.U?(NU(this,w,l),sO&&this.i&&3==w&&(CU(this.V,this.W,"tick",this.fb),this.W.start())):(jg(this.j,this.m,l,null),xO(this,l)),4==w&&Zf(this),this.i&&!this.I&&(4==w?l2(this.l,this):(this.i=!1,ow(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,ks(12)):(this.o=0,ks(13)),Zf(this),aw(this)}}}catch{}},ct.fb=function(){if(this.g){var n=xu(this.g),e=this.g.ga();this.C<e.length&&(oS(this),NU(this,n,e),this.i&&4!=n&&ow(this))}},ct.cancel=function(){this.I=!0,Zf(this)},ct.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function tK(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(nw(3),ks(17)),Zf(this),this.o=2,aw(this)):FU(this,this.Y-n)},(ct=$g.prototype).R=function(){kO(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},ct.T=function(){return kO(this),this.g.concat()},ct.get=function(n,e){return Yf(this.h,n)?this.h[n]:e},ct.set=function(n,e){Yf(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},ct.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],s=this.get(i);n.call(e,s,i,this)}};var LU=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Qf(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Qf){this.g=void 0!==e?e:n.g,aS(this,n.j),this.s=n.s,lS(this,n.i),cS(this,n.m),this.l=n.l,e=n.h;var t=new uw;t.i=e.i,e.g&&(t.g=new $g(e.g),t.h=e.h),VU(this,t),this.o=n.o}else n&&(t=String(n).match(LU))?(this.g=!!e,aS(this,t[1]||"",!0),this.s=lw(t[2]||""),lS(this,t[3]||"",!0),cS(this,t[4]),this.l=lw(t[5]||"",!0),VU(this,t[6]||"",!0),this.o=lw(t[7]||"")):(this.g=!!e,this.h=new uw(null,this.g))}function Mu(n){return new Qf(n)}function aS(n,e,t){n.j=t?lw(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function lS(n,e,t){n.i=t?lw(e,!0):e}function cS(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function VU(n,e,t){e instanceof uw?(n.h=e,function pK(n,e){e&&!n.j&&(Yd(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(UU(this,r),jU(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=cw(e,hK)),n.h=new uw(e,n.g))}function dr(n,e,t){n.h.set(e,t)}function uS(n){return dr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function lw(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function cw(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,cK),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function cK(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Qf.prototype.toString=function(){var n=[],e=this.j;e&&n.push(cw(e,BU,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(cw(e,BU,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(cw(t,"/"==t.charAt(0)?dK:uK,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",cw(t,fK)),n.join("")};var BU=/[#\/\?@]/g,uK=/[#\?:]/g,dK=/[#\?]/g,hK=/[#\?@]/g,fK=/#/g;function uw(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Yd(n){n.g||(n.g=new $g,n.h=0,n.i&&function oK(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function UU(n,e){Yd(n),e=Gg(n,e),Yf(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Yf((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&kO(n)))}function HU(n,e){return Yd(n),e=Gg(n,e),Yf(n.g.h,e)}function jU(n,e,t){UU(n,e),0<t.length&&(n.i=null,n.g.set(Gg(n,e),tO(t)),n.h+=t.length)}function Gg(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function $U(n){this.l=n||gK,n=jt.PerformanceNavigationTiming?0<(n=jt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(jt.g&&jt.g.Ea&&jt.g.Ea()&&jt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ct=uw.prototype).add=function(n,e){Yd(this),this.i=null,n=Gg(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ct.forEach=function(n,e){Yd(this),this.g.forEach(function(t,r){nU(t,function(i){n.call(e,i,r,this)},this)},this)},ct.T=function(){Yd(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],s=0;s<i.length;s++)t.push(e[r]);return t},ct.R=function(n){Yd(this);var e=[];if("string"==typeof n)HU(this,n)&&(e=rU(e,this.g.get(Gg(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=rU(e,n[t])}return e},ct.set=function(n,e){return Yd(this),this.i=null,HU(this,n=Gg(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ct.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},ct.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var l=i;""!==r[s]&&(l+="="+encodeURIComponent(String(r[s]))),n.push(l)}}return this.i=n.join("&")};var gK=10;function GU(n){return!!n.h||!!n.g&&n.g.size>=n.j}function zU(n){return n.h?1:n.g?n.g.size:0}function OO(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function PO(n,e){n.g?n.g.add(e):n.h=e}function WU(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function qU(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return tO(n.i)}function NO(){}function _K(){this.g=new NO}function yK(n,e,t){const r=t||"";try{RO(n,function(i,s){let l=i;Xb(i)&&(l=yO(i)),e.push(r+s+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function dS(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function dw(n){this.l=n.$b||null,this.j=n.ib||!1}function hS(n,e){Ei.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=FO,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}$U.prototype.cancel=function(){if(this.i=qU(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},NO.prototype.stringify=function(n){return jt.JSON.stringify(n,void 0)},NO.prototype.parse=function(n){return jt.JSON.parse(n,void 0)},Ui(dw,IO),dw.prototype.g=function(){return new hS(this.l,this.j)},dw.prototype.i=function(n){return function(){return n}}({}),Ui(hS,Ei);var FO=0;function KU(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function hw(n){n.readyState=4,n.l=null,n.j=null,n.A=null,fw(n)}function fw(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ct=hS.prototype).open=function(n,e){if(this.readyState!=FO)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,fw(this)},ct.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||jt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},ct.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,hw(this)),this.readyState=FO},ct.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,fw(this)),this.g&&(this.readyState=3,fw(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof jt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;KU(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},ct.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?hw(this):fw(this),3==this.readyState&&KU(this)}},ct.Ua=function(n){this.g&&(this.response=this.responseText=n,hw(this))},ct.Ta=function(n){this.g&&(this.response=n,hw(this))},ct.ha=function(){this.g&&hw(this)},ct.setRequestHeader=function(n,e){this.v.append(n,e)},ct.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ct.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(hS.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var bK=jt.JSON.parse;function Zr(n){Ei.call(this),this.headers=new $g,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ZU,this.K=this.L=!1}Ui(Zr,Ei);var ZU="",wK=/^https?$/i,EK=["POST","PUT"];function IK(n){return"content-type"==n.toLowerCase()}function YU(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,QU(n),fS(n)}function QU(n){n.D||(n.D=!0,Hi(n,"complete"),Hi(n,"error"))}function XU(n){if(n.h&&typeof Xk<"u"&&(!n.C[1]||4!=xu(n)||2!=n.ba()))if(n.v&&4==xu(n))CO(n.Fa,0,n);else if(Hi(n,"readystatechange"),4==xu(n)){n.h=!1;try{const h=n.ba();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(LU)[1]||null;if(!i&&jt.self&&jt.self.location){var s=jt.self.location.protocol;i=s.substr(0,s.length-1)}r=!wK.test(i?i.toLowerCase():"")}t=r}if(t)Hi(n,"complete"),Hi(n,"success");else{n.m=6;try{var l=2<xu(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.ba()+"]",QU(n)}}finally{fS(n)}}}function fS(n,e){if(n.g){JU(n);const t=n.g,r=n.C[0]?qD:null;n.g=null,n.C=null,e||Hi(n,"ready");try{t.onreadystatechange=r}catch{}}}function JU(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(jt.clearTimeout(n.A),n.A=null)}function xu(n){return n.g?n.g.readyState:0}function e2(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case ZU:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function LO(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function DK(n){let e="";return rO(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):dr(n,e,t))}function pw(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function t2(n){this.za=0,this.l=[],this.h=new tS,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=pw("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=pw("baseRetryDelayMs",5e3,n),this.$a=pw("retryDelaySeedMs",1e4,n),this.Ya=pw("forwardChannelMaxRetries",2,n),this.ra=pw("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new $U(n&&n.concurrentRequestLimit),this.Ca=new _K,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function VO(n){if(n2(n),3==n.G){var e=n.V++,t=Mu(n.F);dr(t,"SID",n.J),dr(t,"RID",e),dr(t,"TYPE","terminate"),mw(n,t),(e=new sw(n,n.h,e,void 0)).K=2,e.v=uS(Mu(t)),t=!1,jt.navigator&&jt.navigator.sendBeacon&&(t=jt.navigator.sendBeacon(e.v.toString(),"")),!t&&jt.Image&&((new Image).src=e.v,t=!0),t||(e.g=h2(e.l,null),e.g.ea(e.v)),e.F=Date.now(),ow(e)}u2(n)}function pS(n){n.g&&(HO(n),n.g.cancel(),n.g=null)}function n2(n){pS(n),n.u&&(jt.clearTimeout(n.u),n.u=null),gS(n),n.i.cancel(),n.m&&("number"==typeof n.m&&jt.clearTimeout(n.m),n.m=null)}function BO(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&mS(n)}function mS(n){GU(n.i)||n.m||(n.m=!0,vO(n.Ha,n),n.C=0)}function r2(n,e){var t;t=e?e.m:n.V++;const r=Mu(n.F);dr(r,"SID",n.J),dr(r,"RID",t),dr(r,"AID",n.U),mw(n,r),n.o&&n.s&&LO(r,n.o,n.s),t=new sw(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=s2(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),PO(n.i,t),MO(t,r,e)}function mw(n,e){n.j&&RO({},function(t,r){dr(e,r,t)})}function s2(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Bi(n.j.Oa,n.j,n):null;e:{var i=n.l;let s=-1;for(;;){const l=["count="+t];-1==s?0<t?(s=i[0].h,l.push("ofs="+s)):s=0:l.push("ofs="+s);let h=!0;for(let p=0;p<t;p++){let _=i[p].h;const w=i[p].g;if(_-=s,0>_)s=Math.max(0,i[p].h-100),h=!1;else try{yK(w,l,"req"+_+"_")}catch{r&&r(w)}}if(h){r=l.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function o2(n){n.g||n.u||(n.Y=1,vO(n.Ga,n),n.A=0)}function UO(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=rw(Bi(n.Ga,n),c2(n,n.A)),n.A++,0))}function HO(n){null!=n.B&&(jt.clearTimeout(n.B),n.B=null)}function a2(n){n.g=new sw(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Mu(n.oa);dr(e,"RID","rpc"),dr(e,"SID",n.J),dr(e,"CI",n.N?"0":"1"),dr(e,"AID",n.U),mw(n,e),dr(e,"TYPE","xmlhttp"),n.o&&n.s&&LO(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=uS(Mu(e)),t.s=null,t.U=!0,OU(t,n)}function gS(n){null!=n.v&&(jt.clearTimeout(n.v),n.v=null)}function l2(n,e){var t=null;if(n.g==e){gS(n),HO(n),n.g=null;var r=2}else{if(!OO(n.i,e))return;t=e.D,WU(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Hi(r=nS(),new AU(r,t,e,i)),mS(n)}else o2(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function SK(n,e){return!(zU(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=rw(Bi(n.Ha,n,e),c2(n,n.C)),n.C++,0)))}(n,e)||2==r&&UO(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Xf(n,5);break;case 4:Xf(n,10);break;case 3:Xf(n,6);break;default:Xf(n,2)}}function c2(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Xf(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Bi(n.jb,n);t||(t=new Qf("//www.google.com/images/cleardot.gif"),jt.location&&"http"==jt.location.protocol||aS(t,"https"),uS(t)),function vK(n,e){const t=new tS;if(jt.Image){const r=new Image;r.onload=KD(dS,t,r,"TestLoadImage: loaded",!0,e),r.onerror=KD(dS,t,r,"TestLoadImage: error",!1,e),r.onabort=KD(dS,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=KD(dS,t,r,"TestLoadImage: timeout",!1,e),jt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ks(2);n.G=0,n.j&&n.j.va(e),u2(n),n2(n)}function u2(n){n.G=0,n.I=-1,n.j&&((0!=qU(n.i).length||0!=n.l.length)&&(n.i.i.length=0,tO(n.l),n.l.length=0),n.j.ua())}function d2(n,e,t){let r=function aK(n){return n instanceof Qf?Mu(n):new Qf(n,void 0)}(t);if(""!=r.i)e&&lS(r,e+"."+r.i),cS(r,r.m);else{const i=jt.location;r=function lK(n,e,t,r){var i=new Qf(null,void 0);return n&&aS(i,n),e&&lS(i,e),t&&cS(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&rO(n.aa,function(i,s){dr(r,s,i)}),t=n.sa,(e=n.D)&&t&&dr(r,e,t),dr(r,"VER",n.ma),mw(n,r),r}function h2(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Zr(t&&n.Ba&&!n.qa?new dw({ib:!0}):n.qa)).L=n.H,e}function f2(){}function _S(){if(Hg&&!(10<=Number(B4)))throw Error("Environmental error: no available transport.")}function Bo(n,e){Ei.call(this),this.g=new t2(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!ZD(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ZD(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new zg(this)}function p2(n){DO.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function m2(){SO.call(this),this.status=1}function zg(n){this.g=n}(ct=Zr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():TO.g(),this.C=function xU(n){return n.h||(n.h=n.i())}(this.u?this.u:TO),this.g.onreadystatechange=Bi(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(s){return void YU(this,s)}n=t||"";const i=new $g(this.headers);r&&RO(r,function(s,l){i.set(l,s)}),r=function O4(n){e:{var e=IK;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=jt.FormData&&n instanceof jt.FormData,!(0<=tU(EK,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(s,l){this.g.setRequestHeader(l,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{JU(this),0<this.B&&((this.K=function CK(n){return Hg&&function V4(){return function P4(n){var e=L4;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=iU(String(YD)).split("."),t=iU("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",s=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;n=nO(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||nO(0==i[2].length,0==s[2].length)||nO(i[2],s[2]),i=i[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Bi(this.pa,this)):this.A=CO(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){YU(this,s)}},ct.pa=function(){typeof Xk<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Hi(this,"timeout"),this.abort(8))},ct.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Hi(this,"complete"),Hi(this,"abort"),fS(this))},ct.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),fS(this,!0)),Zr.Z.M.call(this)},ct.Fa=function(){this.s||(this.F||this.v||this.l?XU(this):this.cb())},ct.cb=function(){XU(this)},ct.ba=function(){try{return 2<xu(this)?this.g.status:-1}catch{return-1}},ct.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},ct.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),bK(e)}},ct.Da=function(){return this.m},ct.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ct=t2.prototype).ma=8,ct.G=1,ct.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch{}},ct.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new sw(this,this.h,n,void 0);let s=this.s;if(this.P&&(s?(s=aU(s),cU(s,this.P)):s=this.P),null===this.o&&(i.H=s),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=s2(this,i,e),dr(t=Mu(this.F),"RID",n),dr(t,"CVER",22),this.D&&dr(t,"X-HTTP-Session-Id",this.D),mw(this,t),this.o&&s&&LO(t,this.o,s),PO(this.i,i),this.Ra&&dr(t,"TYPE","init"),this.ja?(dr(t,"$req",e),dr(t,"SID","null"),i.$=!0,MO(i,t,null)):MO(i,t,e),this.G=2}}else 3==this.G&&(n?r2(this,n):0==this.l.length||GU(this.i)||r2(this))},ct.Ga=function(){if(this.u=null,a2(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=rw(Bi(this.bb,this),n)}},ct.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ks(10),pS(this),a2(this))},ct.ab=function(){null!=this.v&&(this.v=null,pS(this),UO(this),ks(19))},ct.jb=function(n){n?(this.h.info("Successfully pinged google.com"),ks(2)):(this.h.info("Failed to ping google.com"),ks(1))},(ct=f2.prototype).xa=function(){},ct.wa=function(){},ct.va=function(){},ct.ua=function(){},ct.Oa=function(){},_S.prototype.g=function(n,e){return new Bo(n,e)},Ui(Bo,Ei),Bo.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),vO(Bi(n.hb,n,e))),ks(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=d2(n,null,n.W),mS(n)},Bo.prototype.close=function(){VO(this.g)},Bo.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,BO(this.g,e)}else this.v?((e={}).__data__=yO(n),BO(this.g,e)):BO(this.g,n)},Bo.prototype.M=function(){this.g.j=null,delete this.j,VO(this.g),delete this.g,Bo.Z.M.call(this)},Ui(p2,DO),Ui(m2,SO),Ui(zg,f2),zg.prototype.xa=function(){Hi(this.g,"a")},zg.prototype.wa=function(n){Hi(this.g,new p2(n))},zg.prototype.va=function(n){Hi(this.g,new m2(n))},zg.prototype.ua=function(){Hi(this.g,"b")},_S.prototype.createWebChannel=_S.prototype.g,Bo.prototype.send=Bo.prototype.u,Bo.prototype.open=Bo.prototype.m,Bo.prototype.close=Bo.prototype.close,rS.NO_ERROR=0,rS.TIMEOUT=8,rS.HTTP_ERROR=6,MU.COMPLETE="complete",RU.EventType=iw,iw.OPEN="a",iw.CLOSE="b",iw.ERROR="c",iw.MESSAGE="d",Ei.prototype.listen=Ei.prototype.N,Zr.prototype.listenOnce=Zr.prototype.O,Zr.prototype.getLastError=Zr.prototype.La,Zr.prototype.getLastErrorCode=Zr.prototype.Da,Zr.prototype.getStatus=Zr.prototype.ba,Zr.prototype.getResponseJson=Zr.prototype.Qa,Zr.prototype.getResponseText=Zr.prototype.ga,Zr.prototype.send=Zr.prototype.ea;var TK=Au.createWebChannelTransport=function(){return new _S},AK=Au.getStatEventTarget=function(){return nS()},jO=Au.ErrorCode=rS,MK=Au.EventType=MU,xK=Au.Event=Kf,g2=Au.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},RK=Au.FetchXmlHttpFactory=dw,yS=Au.WebChannel=RU,kK=Au.XhrIo=Zr;const _2="@firebase/firestore";class Ci{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ci.UNAUTHENTICATED=new Ci(null),Ci.GOOGLE_CREDENTIALS=new Ci("google-credentials-uid"),Ci.FIRST_PARTY=new Ci("first-party-uid"),Ci.MOCK_USER=new Ci("mock-user");let Wg="9.9.4";const Qd=new mt.Yd("@firebase/firestore");function $O(){return Qd.logLevel}function je(n,...e){if(Qd.logLevel<=mt.in.DEBUG){const t=e.map(GO);Qd.debug(`Firestore (${Wg}): ${n}`,...t)}}function Gr(n,...e){if(Qd.logLevel<=mt.in.ERROR){const t=e.map(GO);Qd.error(`Firestore (${Wg}): ${n}`,...t)}}function Jf(n,...e){if(Qd.logLevel<=mt.in.WARN){const t=e.map(GO);Qd.warn(`Firestore (${Wg}): ${n}`,...t)}}function GO(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function dt(n="Unexpected state"){const e=`FIRESTORE (${Wg}) INTERNAL ASSERTION FAILED: `+n;throw Gr(e),new Error(e)}function Lt(n,e){n||dt()}function st(n,e){return n}const be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Be extends k.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ii{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class y2{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class NK{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ci.UNAUTHENTICATED))}shutdown(){}}class FK{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class LK{constructor(e){this.t=e,this.currentUser=Ci.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=_=>this.i!==i?(i=this.i,t(_)):Promise.resolve();let l=new Ii;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ii,e.enqueueRetryable(()=>s(this.currentUser))};const h=()=>{const _=l;e.enqueueRetryable((0,H.Z)(function*(){yield _.promise,yield s(r.currentUser)}))},p=_=>{je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(_=>p(_)),setTimeout(()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?p(_):(je("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ii)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Lt("string"==typeof r.accessToken),new y2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Lt(null===e||"string"==typeof e),new Ci(e)}}class VK{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=Ci.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Lt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class BK{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new VK(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Ci.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class v2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class UK{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=s=>{null!=s.error&&je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const l=s.token!==this.A;return this.A=s.token,je("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.T.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.T.getImmediate({optional:!0});s?i(s):je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Lt("string"==typeof t.token),this.A=t.token,new v2(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function HK(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class b2{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=HK(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function $t(n,e){return n<e?-1:n>e?1:0}function qg(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function w2(n){return n+"\0"}class hr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Be(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Be(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Be(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Be(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return hr.fromMillis(Date.now())}static fromDate(e){return hr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new hr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?$t(this.nanoseconds,e.nanoseconds):$t(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ot{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ot(e)}static min(){return new Ot(new hr(0,0))}static max(){return new Ot(new hr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class gw{constructor(e,t,r){void 0===t?t=0:t>e.length&&dt(),void 0===r?r=e.length-t:r>e.length-t&&dt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===gw.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof gw?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),l=t.get(i);if(s<l)return-1;if(s>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class yn extends gw{construct(e,t,r){return new yn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Be(be.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new yn(t)}static emptyPath(){return new yn([])}}const jK=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Fr extends gw{construct(e,t,r){return new Fr(e,t,r)}static isValidIdentifier(e){return jK.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Fr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Fr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new Be(be.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Be(be.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[i+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new Be(be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,i+=2}else"`"===h?(l=!l,i++):"."!==h||l?(r+=h,i++):(s(),i++)}if(s(),l)throw new Be(be.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Fr(t)}static emptyPath(){return new Fr([])}}class tt{constructor(e){this.path=e}static fromPath(e){return new tt(yn.fromString(e))}static fromName(e){return new tt(yn.fromString(e).popFirst(5))}static empty(){return new tt(yn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===yn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return yn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new tt(new yn(e.slice()))}}class vS{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function zO(n){return n.fields.find(e=>2===e.kind)}function ep(n){return n.fields.filter(e=>2!==e.kind)}vS.UNKNOWN_ID=-1;class bS{constructor(e,t){this.fieldPath=e,this.kind=t}}class _w{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new _w(0,Uo.min())}}function E2(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ot.fromTimestamp(1e9===r?new hr(t+1,0):new hr(t,r));return new Uo(i,tt.empty(),e)}function C2(n){return new Uo(n.readTime,n.key,-1)}class Uo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Uo(Ot.min(),tt.empty(),-1)}static max(){return new Uo(Ot.max(),tt.empty(),-1)}}function WO(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=tt.comparator(n.documentKey,e.documentKey),0!==t?t:$t(n.largestBatchId,e.largestBatchId))}const I2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class D2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Xd(n){return qO.apply(this,arguments)}function qO(){return qO=(0,H.Z)(function*(n){if(n.code!==be.FAILED_PRECONDITION||n.message!==I2)throw n;je("LocalStore","Unexpectedly lost primary lease")}),qO.apply(this,arguments)}class me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&dt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new me((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof me?t:me.resolve(t)}catch(t){return me.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):me.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):me.reject(t)}static resolve(e){return new me((t,r)=>{t(e)})}static reject(e){return new me((t,r)=>{r(e)})}static waitFor(e){return new me((t,r)=>{let i=0,s=0,l=!1;e.forEach(h=>{++i,h.next(()=>{++s,l&&s===i&&t()},p=>r(p))}),l=!0,s===i&&t()})}static or(e){let t=me.resolve(!1);for(const r of e)t=t.next(i=>i?me.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new me((r,i)=>{const s=e.length,l=new Array(s);let h=0;for(let p=0;p<s;p++){const _=p;t(e[_]).next(w=>{l[_]=w,++h,h===s&&r(l)},w=>i(w))}})}static doWhile(e,t){return new me((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class wS{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Ii,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new yw(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=KO(r.target.error);this.P.reject(new yw(e,i))}}static open(e,t,r,i){try{return new wS(t,e.transaction(i,r))}catch(s){throw new yw(t,s)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(je("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new WK(t)}}class Nl{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Nl.D((0,k.z$)())&&Gr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return je("SimpleDb","Removing database:",e),tp(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,k.hl)())return!1;if(Nl.N())return!0;const e=(0,k.z$)(),t=Nl.D(e),r=0<t&&t<10,i=Nl.k(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.M)}static O(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,H.Z)(function*(){return t.db||(je("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=l=>{r(l.target.result)},s.onblocked=()=>{i(new yw(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=l=>{const h=l.target.error;i("VersionError"===h.name?new Be(be.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Be(be.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new yw(e,h))},s.onupgradeneeded=l=>{je("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.$(l.target.result,s.transaction,l.oldVersion,t.version).next(()=>{je("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,H.Z)(function*(){const l="readonly"===t;let h=0;for(;;){++h;try{s.db=yield s.F(e);const p=wS.open(s.db,e,l?"readonly":"readwrite",r),_=i(p).next(w=>(p.V(),w)).catch(w=>(p.abort(w),me.reject(w))).toPromise();return _.catch(()=>{}),yield p.v,_}catch(p){const _=p,w="FirebaseError"!==_.name&&h<3;if(je("SimpleDb","Transaction failed with error:",_.message,"Retrying:",w),s.close(),!w)return Promise.reject(_)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class zK{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return tp(this.U.delete())}}class yw extends Be{constructor(e,t){super(be.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Jd(n){return"IndexedDbTransactionError"===n.name}class WK{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(je("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(je("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),tp(r)}add(e){return je("SimpleDb","ADD",this.store.name,e,e),tp(this.store.add(e))}get(e){return tp(this.store.get(e)).next(t=>(void 0===t&&(t=null),je("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return je("SimpleDb","DELETE",this.store.name,e),tp(this.store.delete(e))}count(){return je("SimpleDb","COUNT",this.store.name),tp(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.H(i,(l,h)=>{s.push(h)}).next(()=>s)}{const i=this.store.getAll(r.range);return new me((s,l)=>{i.onerror=h=>{l(h.target.error)},i.onsuccess=h=>{s(h.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new me((i,s)=>{r.onerror=l=>{s(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}Y(e,t){je("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(s,l,h)=>h.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new me((r,i)=>{t.onerror=s=>{const l=KO(s.target.error);i(l)},t.onsuccess=s=>{const l=s.target.result;l?e(l.primaryKey,l.value).next(h=>{h?l.continue():r()}):r()}})}H(e,t){const r=[];return new me((i,s)=>{e.onerror=l=>{s(l.target.error)},e.onsuccess=l=>{const h=l.target.result;if(!h)return void i();const p=new zK(h),_=t(h.primaryKey,h.value,p);if(_ instanceof me){const w=_.catch(D=>(p.done(),me.reject(D)));r.push(w)}p.isDone?i():null===p.G?h.continue():h.continue(p.G)}}).next(()=>me.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function tp(n){return new me((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=KO(r.target.error);t(i)}})}let S2=!1;function KO(n){const e=Nl.D((0,k.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Be("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return S2||(S2=!0,setTimeout(()=>{throw r},0)),r}}return n}class qK{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;je("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,H.Z)(function*(){t.task=null;try{je("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Jd(r)?je("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Xd(r)}yield t.nt(1)}))}}class KK{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,H.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,s=!0;return me.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return je("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,i).next(h=>{i-=h,r.add(l)});s=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const l=s.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(i,s)).next(h=>(je("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>l.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,s)=>{const l=C2(s);WO(l,r)>0&&(r=l)}),new Uo(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Js{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function T2(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function np(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function A2(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Js.at=-1;class Lr{constructor(e,t){this.comparator=e,this.root=t||ji.EMPTY}insert(e,t){return new Lr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ji.BLACK,null,null))}remove(e){return new Lr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ji.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ES(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ES(this.root,e,this.comparator,!1)}getReverseIterator(){return new ES(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ES(this.root,e,this.comparator,!0)}}class ES{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ji{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??ji.RED,this.left=i??ji.EMPTY,this.right=s??ji.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new ji(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ji.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ji.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ji.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ji.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw dt();const e=this.left.check();if(e!==this.right.check())throw dt();return e+(this.isRed()?0:1)}}ji.EMPTY=null,ji.RED=!0,ji.BLACK=!1,ji.EMPTY=new class{constructor(){this.size=0}get key(){throw dt()}get value(){throw dt()}get color(){throw dt()}get left(){throw dt()}get right(){throw dt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new ji(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ln{constructor(e){this.comparator=e,this.data=new Lr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new M2(this.data.getIterator())}getIteratorFrom(e){return new M2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Ln)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ln(this.comparator);return t.data=e,t}}class M2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Kg(n){return n.hasNext()?n.getNext():void 0}class Ho{constructor(e){this.fields=e,e.sort(Fr.comparator)}static empty(){return new Ho([])}unionWith(e){let t=new Ln(Fr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ho(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return qg(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class ui{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new ui(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new ui(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $t(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ui.EMPTY_BYTE_STRING=new ui("");const YK=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function eh(n){if(Lt(!!n),"string"==typeof n){let e=0;const t=YK.exec(n);if(Lt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Vr(n.seconds),nanos:Vr(n.nanos)}}function Vr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function rp(n){return"string"==typeof n?ui.fromBase64String(n):ui.fromUint8Array(n)}function ZO(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function x2(n){const e=n.mapValue.fields.__previous_value__;return ZO(e)?x2(e):e}function vw(n){const e=eh(n.mapValue.fields.__local_write_time__.timestampValue);return new hr(e.seconds,e.nanos)}class QK{constructor(e,t,r,i,s,l,h,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.useFetchStreams=p}}class th{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new th("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof th&&e.projectId===this.projectId&&e.database===this.database}}function bw(n){return null==n}function ww(n){return 0===n&&1/n==-1/0}function R2(n){return"number"==typeof n&&Number.isInteger(n)&&!ww(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const nh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},CS={nullValue:"NULL_VALUE"};function ip(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ZO(n)?4:N2(n)?9007199254740991:10:dt()}function Ac(n,e){if(n===e)return!0;const t=ip(n);if(t!==ip(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return vw(n).isEqual(vw(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=eh(r.timestampValue),l=eh(i.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,rp(n.bytesValue).isEqual(rp(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Vr(r.geoPointValue.latitude)===Vr(i.geoPointValue.latitude)&&Vr(r.geoPointValue.longitude)===Vr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Vr(r.integerValue)===Vr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=Vr(r.doubleValue),l=Vr(i.doubleValue);return s===l?ww(s)===ww(l):isNaN(s)&&isNaN(l)}return!1}(n,e);case 9:return qg(n.arrayValue.values||[],e.arrayValue.values||[],Ac);case 10:return function(r,i){const s=r.mapValue.fields||{},l=i.mapValue.fields||{};if(T2(s)!==T2(l))return!1;for(const h in s)if(s.hasOwnProperty(h)&&(void 0===l[h]||!Ac(s[h],l[h])))return!1;return!0}(n,e);default:return dt()}var i}function Ew(n,e){return void 0!==(n.values||[]).find(t=>Ac(t,e))}function rh(n,e){if(n===e)return 0;const t=ip(n),r=ip(e);if(t!==r)return $t(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return $t(n.booleanValue,e.booleanValue);case 2:return function(i,s){const l=Vr(i.integerValue||i.doubleValue),h=Vr(s.integerValue||s.doubleValue);return l<h?-1:l>h?1:l===h?0:isNaN(l)?isNaN(h)?0:-1:1}(n,e);case 3:return k2(n.timestampValue,e.timestampValue);case 4:return k2(vw(n),vw(e));case 5:return $t(n.stringValue,e.stringValue);case 6:return function(i,s){const l=rp(i),h=rp(s);return l.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,s){const l=i.split("/"),h=s.split("/");for(let p=0;p<l.length&&p<h.length;p++){const _=$t(l[p],h[p]);if(0!==_)return _}return $t(l.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,s){const l=$t(Vr(i.latitude),Vr(s.latitude));return 0!==l?l:$t(Vr(i.longitude),Vr(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,s){const l=i.values||[],h=s.values||[];for(let p=0;p<l.length&&p<h.length;++p){const _=rh(l[p],h[p]);if(_)return _}return $t(l.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===nh.mapValue&&s===nh.mapValue)return 0;if(i===nh.mapValue)return 1;if(s===nh.mapValue)return-1;const l=i.fields||{},h=Object.keys(l),p=s.fields||{},_=Object.keys(p);h.sort(),_.sort();for(let w=0;w<h.length&&w<_.length;++w){const D=$t(h[w],_[w]);if(0!==D)return D;const M=rh(l[h[w]],p[_[w]]);if(0!==M)return M}return $t(h.length,_.length)}(n.mapValue,e.mapValue);default:throw dt()}}function k2(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return $t(n,e);const t=eh(n),r=eh(e),i=$t(t.seconds,r.seconds);return 0!==i?i:$t(t.nanos,r.nanos)}function Zg(n){return YO(n)}function YO(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=eh(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?rp(n.bytesValue).toBase64():"referenceValue"in n?tt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",s=!0;for(const l of r.values||[])s?s=!1:i+=",",i+=YO(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",l=!0;for(const h of i)l?l=!1:s+=",",s+=`${h}:${YO(r.fields[h])}`;return s+"}"}(n.mapValue):dt();var e}function sp(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function QO(n){return!!n&&"integerValue"in n}function Cw(n){return!!n&&"arrayValue"in n}function O2(n){return!!n&&"nullValue"in n}function P2(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function IS(n){return!!n&&"mapValue"in n}function Iw(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return np(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Iw(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Iw(n.arrayValue.values[t]);return e}return Object.assign({},n)}function N2(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function XK(n){return"nullValue"in n?CS:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?sp(th.empty(),tt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:dt()}function JK(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?sp(th.empty(),tt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?nh:dt()}function F2(n,e){const t=rh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function L2(n,e){const t=rh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class $i{constructor(e){this.value=e}static empty(){return new $i({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!IS(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Iw(t)}setAll(e){let t=Fr.emptyPath(),r={},i=[];e.forEach((l,h)=>{if(!t.isImmediateParentOf(h)){const p=this.getFieldsMap(t);this.applyChanges(p,r,i),r={},i=[],t=h.popLast()}l?r[h.lastSegment()]=Iw(l):i.push(h.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());IS(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ac(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];IS(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){np(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new $i(Iw(this.value))}}function V2(n){const e=[];return np(n.fields,(t,r)=>{const i=new Fr([t]);if(IS(r)){const s=V2(r.mapValue).fields;if(0===s.length)e.push(i);else for(const l of s)e.push(i.child(l))}else e.push(i)}),new Ho(e)}class Yn{constructor(e,t,r,i,s,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=s,this.documentState=l}static newInvalidDocument(e){return new Yn(e,0,Ot.min(),Ot.min(),$i.empty(),0)}static newFoundDocument(e,t,r){return new Yn(e,1,t,Ot.min(),r,0)}static newNoDocument(e,t){return new Yn(e,2,t,Ot.min(),$i.empty(),0)}static newUnknownDocument(e,t){return new Yn(e,3,t,Ot.min(),$i.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$i.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$i.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ot.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Yn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Yn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class eZ{constructor(e,t=null,r=[],i=[],s=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=l,this.endAt=h,this.ht=null}}function B2(n,e=null,t=[],r=[],i=null,s=null,l=null){return new eZ(n,e,t,r,i,s,l)}function op(n){const e=st(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Zg(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),bw(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Zg(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Zg(r)).join(",")),e.ht=t}return e.ht}function Dw(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!cZ(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Ac(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!G2(n.startAt,e.startAt)&&G2(n.endAt,e.endAt)}function DS(n){return tt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function SS(n,e){return n.filters.filter(t=>t instanceof Gi&&t.field.isEqual(e))}function U2(n,e,t){let r=CS,i=!0;for(const s of SS(n,e)){let l=CS,h=!0;switch(s.op){case"<":case"<=":l=XK(s.value);break;case"==":case"in":case">=":l=s.value;break;case">":l=s.value,h=!1;break;case"!=":case"not-in":l=CS}F2({value:r,inclusive:i},{value:l,inclusive:h})<0&&(r=l,i=h)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const l=t.position[s];F2({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function H2(n,e,t){let r=nh,i=!0;for(const s of SS(n,e)){let l=nh,h=!0;switch(s.op){case">=":case">":l=JK(s.value),h=!1;break;case"==":case"in":case"<=":l=s.value;break;case"<":l=s.value,h=!1;break;case"!=":case"not-in":l=nh}L2({value:r,inclusive:i},{value:l,inclusive:h})>0&&(r=l,i=h)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const l=t.position[s];L2({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class Gi extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new nZ(e,t,r):"array-contains"===t?new sZ(e,r):"in"===t?new oZ(e,r):"not-in"===t?new aZ(e,r):"array-contains-any"===t?new lZ(e,r):new Gi(e,t,r)}static lt(e,t,r){return"in"===t?new rZ(e,r):new iZ(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(rh(t,this.value)):null!==t&&ip(this.value)===ip(t)&&this.ft(rh(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return dt()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class nZ extends Gi{constructor(e,t,r){super(e,t,r),this.key=tt.fromName(r.referenceValue)}matches(e){const t=tt.comparator(e.key,this.key);return this.ft(t)}}class rZ extends Gi{constructor(e,t){super(e,"in",t),this.keys=j2(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class iZ extends Gi{constructor(e,t){super(e,"not-in",t),this.keys=j2(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function j2(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>tt.fromName(r.referenceValue))}class sZ extends Gi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Cw(t)&&Ew(t.arrayValue,this.value)}}class oZ extends Gi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ew(this.value.arrayValue,t)}}class aZ extends Gi{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ew(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Ew(this.value.arrayValue,t)}}class lZ extends Gi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Cw(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Ew(this.value.arrayValue,r))}}class ih{constructor(e,t){this.position=e,this.inclusive=t}}class Yg{constructor(e,t="asc"){this.field=e,this.dir=t}}function cZ(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function $2(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],l=n.position[i];if(r=s.field.isKeyField()?tt.comparator(tt.fromName(l.referenceValue),t.key):rh(l,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function G2(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ac(n.position[t],e.position[t]))return!1;return!0}class Ru{constructor(e,t=null,r=[],i=[],s=null,l="F",h=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=l,this.startAt=h,this.endAt=p,this._t=null,this.wt=null}}function z2(n,e,t,r,i,s,l,h){return new Ru(n,e,t,r,i,s,l,h)}function Qg(n){return new Ru(n)}function W2(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function XO(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function JO(n){for(const e of n.filters)if(e.dt())return e.field;return null}function eP(n){return null!==n.collectionGroup}function Xg(n){const e=st(n);if(null===e._t){e._t=[];const t=JO(e),r=XO(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new Yg(t)),e._t.push(new Yg(Fr.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e._t.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Yg(Fr.keyField(),s))}}}return e._t}function eo(n){const e=st(n);if(!e.wt)if("F"===e.limitType)e.wt=B2(e.path,e.collectionGroup,Xg(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of Xg(e))t.push(new Yg(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new ih(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new ih(e.startAt.position,e.startAt.inclusive):null;e.wt=B2(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function TS(n,e,t){return new Ru(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Sw(n,e){return Dw(eo(n),eo(e))&&n.limitType===e.limitType}function q2(n){return`${op(eo(n))}|lt:${n.limitType}`}function tP(n){return`Query(target=${function tZ(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Zg(r.value)}`;var r}).join(", ")}]`),bw(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Zg(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Zg(t)).join(",")),`Target(${e})`}(eo(n))}; limitType=${n.limitType})`}function nP(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):tt.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,s,l){const h=$2(i,s,l);return i.inclusive?h<=0:h<0}(t.startAt,Xg(t),r)||t.endAt&&!function(i,s,l){const h=$2(i,s,l);return i.inclusive?h>=0:h>0}(t.endAt,Xg(t),r)));var t,r}function K2(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Z2(n){return(e,t)=>{let r=!1;for(const i of Xg(n)){const s=uZ(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function uZ(n,e,t){const r=n.field.isKeyField()?tt.comparator(e.key,t.key):function(i,s,l){const h=s.data.field(i),p=l.data.field(i);return null!==h&&null!==p?rh(h,p):dt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return dt()}}function Y2(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ww(e)?"-0":e}}function Q2(n){return{integerValue:""+n}}function X2(n,e){return R2(e)?Q2(e):Y2(n,e)}class AS{constructor(){this._=void 0}}function dZ(n,e,t){return n instanceof Jg?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):n instanceof ap?eH(n,e):n instanceof lp?tH(n,e):function(r,i){const s=J2(r,i),l=nH(s)+nH(r.yt);return QO(s)&&QO(r.yt)?Q2(l):Y2(r.It,l)}(n,e)}function hZ(n,e,t){return n instanceof ap?eH(n,e):n instanceof lp?tH(n,e):t}function J2(n,e){return n instanceof e_?QO(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Jg extends AS{}class ap extends AS{constructor(e){super(),this.elements=e}}function eH(n,e){const t=rH(e);for(const r of n.elements)t.some(i=>Ac(i,r))||t.push(r);return{arrayValue:{values:t}}}class lp extends AS{constructor(e){super(),this.elements=e}}function tH(n,e){let t=rH(e);for(const r of n.elements)t=t.filter(i=>!Ac(i,r));return{arrayValue:{values:t}}}class e_ extends AS{constructor(e,t){super(),this.It=e,this.yt=t}}function nH(n){return Vr(n.integerValue||n.doubleValue)}function rH(n){return Cw(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Tw{constructor(e,t){this.field=e,this.transform=t}}class pZ{constructor(e,t){this.version=e,this.transformResults=t}}class fr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new fr}static exists(e){return new fr(void 0,e)}static updateTime(e){return new fr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function MS(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class xS{}function iH(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new n_(n.key,fr.none()):new t_(n.key,n.data,fr.none());{const t=n.data,r=$i.empty();let i=new Ln(Fr.comparator);for(let s of e.fields)if(!i.has(s)){let l=t.field(s);null===l&&s.length>1&&(s=s.popLast(),l=t.field(s)),null===l?r.delete(s):r.set(s,l),i=i.add(s)}return new ku(n.key,r,new Ho(i.toArray()),fr.none())}}function mZ(n,e,t){n instanceof t_?function(r,i,s){const l=r.value.clone(),h=aH(r.fieldTransforms,i,s.transformResults);l.setAll(h),i.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,e,t):n instanceof ku?function(r,i,s){if(!MS(r.precondition,i))return void i.convertToUnknownDocument(s.version);const l=aH(r.fieldTransforms,i,s.transformResults),h=i.data;h.setAll(oH(r)),h.setAll(l),i.convertToFoundDocument(s.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Aw(n,e,t,r){return n instanceof t_?function(i,s,l,h){if(!MS(i.precondition,s))return l;const p=i.value.clone(),_=lH(i.fieldTransforms,h,s);return p.setAll(_),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),null}(n,e,t,r):n instanceof ku?function(i,s,l,h){if(!MS(i.precondition,s))return l;const p=lH(i.fieldTransforms,h,s),_=s.data;return _.setAll(oH(i)),_.setAll(p),s.convertToFoundDocument(s.version,_).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(w=>w.field))}(n,e,t,r):(l=t,MS(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l);var s,l}function gZ(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=J2(r.transform,i||null);null!=s&&(null===t&&(t=$i.empty()),t.set(r.field,s))}return t||null}function sH(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&qg(t,r,(i,s)=>function fZ(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof ap&&r instanceof ap||t instanceof lp&&r instanceof lp?qg(t.elements,r.elements,Ac):t instanceof e_&&r instanceof e_?Ac(t.yt,r.yt):t instanceof Jg&&r instanceof Jg);var t,r}(i,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class t_ extends xS{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ku extends xS{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function oH(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function aH(n,e,t){const r=new Map;Lt(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],l=s.transform,h=e.data.field(s.field);r.set(s.field,hZ(l,h,t[i]))}return r}function lH(n,e,t){const r=new Map;for(const i of n){const s=i.transform,l=t.data.field(i.field);r.set(i.field,dZ(s,l,e))}return r}class n_ extends xS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rP extends xS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class _Z{constructor(e){this.count=e}}var Yr,vn;function cH(n){switch(n){default:return dt();case be.CANCELLED:case be.UNKNOWN:case be.DEADLINE_EXCEEDED:case be.RESOURCE_EXHAUSTED:case be.INTERNAL:case be.UNAVAILABLE:case be.UNAUTHENTICATED:return!1;case be.INVALID_ARGUMENT:case be.NOT_FOUND:case be.ALREADY_EXISTS:case be.PERMISSION_DENIED:case be.FAILED_PRECONDITION:case be.ABORTED:case be.OUT_OF_RANGE:case be.UNIMPLEMENTED:case be.DATA_LOSS:return!0}}function uH(n){if(void 0===n)return Gr("GRPC error has no .code"),be.UNKNOWN;switch(n){case Yr.OK:return be.OK;case Yr.CANCELLED:return be.CANCELLED;case Yr.UNKNOWN:return be.UNKNOWN;case Yr.DEADLINE_EXCEEDED:return be.DEADLINE_EXCEEDED;case Yr.RESOURCE_EXHAUSTED:return be.RESOURCE_EXHAUSTED;case Yr.INTERNAL:return be.INTERNAL;case Yr.UNAVAILABLE:return be.UNAVAILABLE;case Yr.UNAUTHENTICATED:return be.UNAUTHENTICATED;case Yr.INVALID_ARGUMENT:return be.INVALID_ARGUMENT;case Yr.NOT_FOUND:return be.NOT_FOUND;case Yr.ALREADY_EXISTS:return be.ALREADY_EXISTS;case Yr.PERMISSION_DENIED:return be.PERMISSION_DENIED;case Yr.FAILED_PRECONDITION:return be.FAILED_PRECONDITION;case Yr.ABORTED:return be.ABORTED;case Yr.OUT_OF_RANGE:return be.OUT_OF_RANGE;case Yr.UNIMPLEMENTED:return be.UNIMPLEMENTED;case Yr.DATA_LOSS:return be.DATA_LOSS;default:return dt()}}(vn=Yr||(Yr={}))[vn.OK=0]="OK",vn[vn.CANCELLED=1]="CANCELLED",vn[vn.UNKNOWN=2]="UNKNOWN",vn[vn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vn[vn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vn[vn.NOT_FOUND=5]="NOT_FOUND",vn[vn.ALREADY_EXISTS=6]="ALREADY_EXISTS",vn[vn.PERMISSION_DENIED=7]="PERMISSION_DENIED",vn[vn.UNAUTHENTICATED=16]="UNAUTHENTICATED",vn[vn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vn[vn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vn[vn.ABORTED=10]="ABORTED",vn[vn.OUT_OF_RANGE=11]="OUT_OF_RANGE",vn[vn.UNIMPLEMENTED=12]="UNIMPLEMENTED",vn[vn.INTERNAL=13]="INTERNAL",vn[vn.UNAVAILABLE=14]="UNAVAILABLE",vn[vn.DATA_LOSS=15]="DATA_LOSS";class sh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){np(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return A2(this.inner)}size(){return this.innerSize}}const yZ=new Lr(tt.comparator);function to(){return yZ}const dH=new Lr(tt.comparator);function Mw(...n){let e=dH;for(const t of n)e=e.insert(t.key,t);return e}function hH(n){let e=dH;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Mc(){return xw()}function fH(){return xw()}function xw(){return new sh(n=>n.toString(),(n,e)=>n.isEqual(e))}const vZ=new Lr(tt.comparator),bZ=new Ln(tt.comparator);function Xt(...n){let e=bZ;for(const t of n)e=e.add(t);return e}const wZ=new Ln($t);function RS(){return wZ}class Rw{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,kw.createSynthesizedTargetChangeForCurrentChange(e,t)),new Rw(Ot.min(),r,RS(),to(),Xt())}}class kw{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t){return new kw(ui.EMPTY_BYTE_STRING,t,Xt(),Xt(),Xt())}}class kS{constructor(e,t,r,i){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=i}}class pH{constructor(e,t){this.targetId=e,this.At=t}}class mH{constructor(e,t,r=ui.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class gH{constructor(){this.Rt=0,this.bt=yH(),this.Pt=ui.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Xt(),t=Xt(),r=Xt();return this.bt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:dt()}}),new kw(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=yH()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Mt(e){this.Vt=!0,this.bt=this.bt.remove(e)}Ot(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class EZ{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=to(),this.qt=_H(),this.Kt=new Ln($t)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:dt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,i)=>{this.Ht(i)&&t(i)})}Yt(e){const t=e.targetId,r=e.At.count,i=this.Xt(t);if(i){const s=i.target;if(DS(s))if(0===r){const l=new tt(s.path);this.jt(t,l,Yn.newNoDocument(l,Ot.min()))}else Lt(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((s,l)=>{const h=this.Xt(l);if(h){if(s.current&&DS(h.target)){const p=new tt(h.target.path);null!==this.Ut.get(p)||this.ee(l,p)||this.jt(l,p,Yn.newNoDocument(p,e))}s.Dt&&(t.set(l,s.xt()),s.Nt())}});let r=Xt();this.qt.forEach((s,l)=>{let h=!0;l.forEachWhile(p=>{const _=this.Xt(p);return!_||2===_.purpose||(h=!1,!1)}),h&&(r=r.add(s))}),this.Ut.forEach((s,l)=>l.setReadTime(e));const i=new Rw(e,t,this.Kt,this.Ut,r);return this.Ut=to(),this.qt=_H(),this.Kt=new Ln($t),i}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const i=this.zt(e);this.ee(e,t)?i.kt(t,1):i.Mt(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.zt(e).Ot()}zt(e){let t=this.Lt.get(e);return t||(t=new gH,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new Ln($t),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||je("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new gH),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function _H(){return new Lr(tt.comparator)}function yH(){return new Lr(tt.comparator)}const CZ={asc:"ASCENDING",desc:"DESCENDING"},IZ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class DZ{constructor(e,t){this.databaseId=e,this.gt=t}}function Ow(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vH(n,e){return n.gt?e.toBase64():e.toUint8Array()}function SZ(n,e){return Ow(n,e.toTimestamp())}function Di(n){return Lt(!!n),Ot.fromTimestamp(function(e){const t=eh(e);return new hr(t.seconds,t.nanos)}(n))}function iP(n,e){return(t=n,new yn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function bH(n){const e=yn.fromString(n);return Lt(MH(e)),e}function Pw(n,e){return iP(n.databaseId,e.path)}function xc(n,e){const t=bH(e);if(t.get(1)!==n.databaseId.projectId)throw new Be(be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Be(be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new tt(EH(t))}function sP(n,e){return iP(n.databaseId,e)}function wH(n){const e=bH(n);return 4===e.length?yn.emptyPath():EH(e)}function Nw(n){return new yn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function EH(n){return Lt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function CH(n,e,t){return{name:Pw(n,e),fields:t.value.mapValue.fields}}function IH(n,e,t){const r=xc(n,e.name),i=Di(e.updateTime),s=new $i({mapValue:{fields:e.fields}}),l=Yn.newFoundDocument(r,i,s);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function Fw(n,e){let t;if(e instanceof t_)t={update:CH(n,e.key,e.value)};else if(e instanceof n_)t={delete:Pw(n,e.key)};else if(e instanceof ku)t={update:CH(n,e.key,e.data),updateMask:NZ(e.fieldMask)};else{if(!(e instanceof rP))return dt();t={verify:Pw(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const l=s.transform;if(l instanceof Jg)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ap)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof lp)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof e_)return{fieldPath:s.field.canonicalString(),increment:l.yt};throw dt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:SZ(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:dt()),t;var i}function oP(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?fr.updateTime(Di(i.updateTime)):void 0!==i.exists?fr.exists(i.exists):fr.none():fr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,l){let h=null;"setToServerValue"in l?(Lt("REQUEST_TIME"===l.setToServerValue),h=new Jg):"appendMissingElements"in l?h=new ap(l.appendMissingElements.values||[]):"removeAllFromArray"in l?h=new lp(l.removeAllFromArray.values||[]):"increment"in l?h=new e_(s,l.increment):dt();const p=Fr.fromServerFormat(l.fieldPath);return new Tw(p,h)}(n,i)):[];var i;if(e.update){const i=xc(n,e.update.name),s=new $i({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Ho((e.updateMask.fieldPaths||[]).map(_=>Fr.fromServerFormat(_)));return new ku(i,s,l,t,r)}return new t_(i,s,t,r)}if(e.delete){const i=xc(n,e.delete);return new n_(i,t)}if(e.verify){const i=xc(n,e.verify);return new rP(i,t)}return dt()}function DH(n,e){return{documents:[sP(n,e.path)]}}function SH(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=sP(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=sP(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(p){if(0===p.length)return;const _=p.map(w=>function(D){if("=="===D.op){if(P2(D.value))return{unaryFilter:{field:r_(D.field),op:"IS_NAN"}};if(O2(D.value))return{unaryFilter:{field:r_(D.field),op:"IS_NULL"}}}else if("!="===D.op){if(P2(D.value))return{unaryFilter:{field:r_(D.field),op:"IS_NOT_NAN"}};if(O2(D.value))return{unaryFilter:{field:r_(D.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:r_(D.field),op:kZ(D.op),value:D.value}}}(w));return 1===_.length?_[0]:{compositeFilter:{op:"AND",filters:_}}}(e.filters);i&&(t.structuredQuery.where=i);const s=function(p){if(0!==p.length)return p.map(_=>{return{field:r_((w=_).field),direction:RZ(w.dir)};var w})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const l=(_=e.limit,n.gt||bw(_)?_:{value:_});var _,h,p;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(p=e.endAt).inclusive,values:p.position}),t}function TH(n){let e=wH(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Lt(1===r);const w=t.from[0];w.allDescendants?i=w.collectionId:e=e.child(w.collectionId)}let s=[];t.where&&(s=AH(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(w=>{return new Yg(i_((D=w).field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction));var D}));let h=null;t.limit&&(h=function(w){let D;return D="object"==typeof w?w.value:w,bw(D)?null:D}(t.limit));let p=null;var w;t.startAt&&(p=new ih((w=t.startAt).values||[],!!w.before));let _=null;return t.endAt&&(_=function(w){return new ih(w.values||[],!w.before)}(t.endAt)),z2(e,i,l,s,h,"F",p,_)}function AH(n){return n?void 0!==n.unaryFilter?[PZ(n)]:void 0!==n.fieldFilter?[OZ(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>AH(e)).reduce((e,t)=>e.concat(t)):dt():[]}function RZ(n){return CZ[n]}function kZ(n){return IZ[n]}function r_(n){return{fieldPath:n.canonicalString()}}function i_(n){return Fr.fromServerFormat(n.fieldPath)}function OZ(n){return Gi.create(i_(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return dt()}}(n.fieldFilter.op),n.fieldFilter.value)}function PZ(n){switch(n.unaryFilter.op){case"IS_NAN":const e=i_(n.unaryFilter.field);return Gi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=i_(n.unaryFilter.field);return Gi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=i_(n.unaryFilter.field);return Gi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=i_(n.unaryFilter.field);return Gi.create(i,"!=",{nullValue:"NULL_VALUE"});default:return dt()}}function NZ(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function MH(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Os(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=xH(e)),e=FZ(n.get(t),e);return xH(e)}function FZ(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function xH(n){return n+"\x01\x01"}function Rc(n){const e=n.length;if(Lt(e>=2),2===e)return Lt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),yn.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const l=n.indexOf("\x01",s);switch((l<0||l>t)&&dt(),n.charAt(l+1)){case"\x01":const h=n.substring(s,l);let p;0===i.length?p=h:(i+=h,p=i,i=""),r.push(p);break;case"\x10":i+=n.substring(s,l),i+="\0";break;case"\x11":i+=n.substring(s,l+1);break;default:dt()}s=l+2}return new yn(r)}const RH=["userId","batchId"];function OS(n,e){return[n,Os(e)]}function kH(n,e,t){return[n,Os(e),t]}const LZ={},VZ=["prefixPath","collectionGroup","readTime","documentId"],BZ=["prefixPath","collectionGroup","documentId"],UZ=["collectionGroup","readTime","prefixPath","documentId"],HZ=["canonicalId","targetId"],jZ=["targetId","path"],$Z=["path","targetId"],GZ=["collectionId","parent"],zZ=["indexId","uid"],WZ=["uid","sequenceNumber"],qZ=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],KZ=["indexId","uid","orderedDocumentKey"],ZZ=["userId","collectionPath","documentId"],YZ=["userId","collectionPath","largestBatchId"],QZ=["userId","collectionGroup","largestBatchId"],OH=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],XZ=[...OH,"documentOverlays"],PH=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],NH=PH,JZ=[...NH,"indexConfiguration","indexState","indexEntries"];class aP extends D2{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Si(n,e){const t=st(n);return Nl.O(t.ie,e)}class lP{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&mZ(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Aw(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Aw(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=fH();return this.mutations.forEach(i=>{const s=e.get(i.key),l=s.overlayedDocument;let h=this.applyToLocalView(l,s.mutatedFields);h=t.has(i.key)?null:h;const p=iH(l,h);null!==p&&r.set(i.key,p),l.isValidDocument()||l.convertToNoDocument(Ot.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Xt())}isEqual(e){return this.batchId===e.batchId&&qg(this.mutations,e.mutations,(t,r)=>sH(t,r))&&qg(this.baseMutations,e.baseMutations,(t,r)=>sH(t,r))}}class cP{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Lt(e.mutations.length===r.length);let i=vZ;const s=e.mutations;for(let l=0;l<s.length;l++)i=i.insert(s[l].key,r[l].version);return new cP(e,t,r,i)}}class uP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class oh{constructor(e,t,r,i,s=Ot.min(),l=Ot.min(),h=ui.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h}withSequenceNumber(e){return new oh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new oh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new oh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class FH{constructor(e){this.re=e}}function LH(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:PS(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Pw(i=n.re,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:Ow(i,s.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:cp(e.version)};else{if(!e.isUnknownDocument())return dt();r.unknownDocument={path:t.path.toArray(),version:cp(e.version)}}var i,s;return r}function PS(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function cp(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function up(n){const e=new hr(n.seconds,n.nanoseconds);return Ot.fromTimestamp(e)}function dp(n,e){const t=(e.baseMutations||[]).map(s=>oP(n.re,s));for(let s=0;s<e.mutations.length-1;++s){const l=e.mutations[s];s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(l.updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s)}const r=e.mutations.map(s=>oP(n.re,s)),i=hr.fromMillis(e.localWriteTimeMs);return new lP(e.batchId,i,t,r)}function Lw(n){const e=up(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?up(n.lastLimboFreeSnapshotVersion):Ot.min();let r;var i;return void 0!==n.query.documents?(Lt(1===(i=n.query).documents.length),r=eo(Qg(wH(i.documents[0])))):r=eo(TH(n.query)),new oh(r,n.targetId,0,n.lastListenSequenceNumber,e,t,ui.fromBase64String(n.resumeToken))}function VH(n,e){const t=cp(e.snapshotVersion),r=cp(e.lastLimboFreeSnapshotVersion);let i;i=DS(e.target)?DH(n.re,e.target):SH(n.re,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:op(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function dP(n){const e=TH({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?TS(e,e.limit,"L"):e}function hP(n,e){return new uP(e.largestBatchId,oP(n.re,e.overlayMutation))}function BH(n,e){const t=e.path.lastSegment();return[n,Os(e.path.popLast()),t]}function UH(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:cp(r.readTime),documentKey:Os(r.documentKey.path),largestBatchId:r.largestBatchId}}class t8{getBundleMetadata(e,t){return HH(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:up(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return HH(e).put({bundleId:(r=t).id,createTime:cp(Di(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return jH(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:dP(i.bundledQuery),readTime:up(i.readTime)};var i})}saveNamedQuery(e,t){return jH(e).put({name:(r=t).name,readTime:cp(Di(r.readTime)),bundledQuery:r.bundledQuery});var r}}function HH(n){return Si(n,"bundles")}function jH(n){return Si(n,"namedQueries")}class NS{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new NS(e,t.uid||"")}getOverlay(e,t){return Vw(e).get(BH(this.userId,t)).next(r=>r?hP(this.It,r):null)}getOverlays(e,t){const r=Mc();return me.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,l)=>{const h=new uP(t,l);i.push(this.ue(e,h))}),me.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Os(l.getCollectionPath())));const s=[];return i.forEach(l=>{const h=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);s.push(Vw(e).Y("collectionPathOverlayIndex",h))}),me.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Mc(),s=Os(t),l=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Vw(e).W("collectionPathOverlayIndex",l).next(h=>{for(const p of h){const _=hP(this.It,p);i.set(_.getKey(),_)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=Mc();let l;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Vw(e).Z({index:"collectionGroupOverlayIndex",range:h},(p,_,w)=>{const D=hP(this.It,_);s.size()<i||D.largestBatchId===l?(s.set(D.getKey(),D),l=D.largestBatchId):w.done()}).next(()=>s)}ue(e,t){return Vw(e).put(function(r,i,s){const[l,h,p]=BH(i,s.mutation.key);return{userId:i,collectionPath:h,documentId:p,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Fw(r.re,s.mutation)}}(this.It,this.userId,t))}}function Vw(n){return Si(n,"documentOverlays")}class hp{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Vr(e.integerValue));else if("doubleValue"in e){const r=Vr(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),ww(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(rp(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?N2(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):dt()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const i of Object.keys(r))this._e(i,t),this.ae(r[i],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const i of r)this.ae(i,t)}ge(e,t){this.le(t,37),tt.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function n8(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function $H(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const s=n8(255&t[i]);if(r+=s,8!==s)break}return r}(n);return Math.ceil(e/8)}hp.Te=new hp;class r8{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=t.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.ve()}De(e){const t=this.Ce(e),r=$H(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ne(e){const t=this.Ce(e),r=$H(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}ke(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Me(0),this.Me(1)}ve(){this.Fe(0),this.Fe(1)}Me(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class i8{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class s8{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Oe()}}class Bw{constructor(){this.Be=new r8,this.Le=new i8(this.Be),this.Ue=new s8(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class fp{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new fp(this.indexId,this.documentKey,this.arrayValue,r)}}function pp(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=GH(n.arrayValue,e.arrayValue),0!==t?t:(t=GH(n.directionalValue,e.directionalValue),0!==t?t:tt.comparator(n.documentKey,e.documentKey)))}function GH(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class o8{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=zO(e);if(void 0!==t&&!this.ze(t))return!1;const r=ep(e);let i=0,s=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.je){const l=r[i];if(!this.He(this.je,l)||!this.Je(this.Ge[s++],l))return!1;++i}for(;i<r.length;++i){const l=r[i];if(s>=this.Ge.length||!this.Je(this.Ge[s++],l))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class a8{constructor(){this.Ye=new fP}addToCollectionParentIndex(e,t){return this.Ye.add(t),me.resolve()}getCollectionParents(e,t){return me.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return me.resolve()}deleteFieldIndex(e,t){return me.resolve()}getDocumentsMatchingTarget(e,t){return me.resolve(null)}getIndexType(e,t){return me.resolve(0)}getFieldIndexes(e,t){return me.resolve([])}getNextCollectionGroupToUpdate(e){return me.resolve(null)}getMinOffset(e,t){return me.resolve(Uo.min())}getMinOffsetFromCollectionGroup(e,t){return me.resolve(Uo.min())}updateCollectionGroup(e,t,r){return me.resolve()}updateIndexEntries(e,t){return me.resolve()}}class fP{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ln(yn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ln(yn.comparator)).toArray()}}const FS=new Uint8Array(0);class l8{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new fP,this.Ze=new sh(r=>op(r),(r,i)=>Dw(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const s={collectionId:r,parent:Os(i)};return zH(e).put(s)}return me.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[w2(t),""],!1,!0);return zH(e).W(i).next(s=>{for(const l of s){if(l.collectionId!==t)break;r.push(Rc(l.parent))}return r})}addFieldIndex(e,t){const r=LS(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var l;delete i.indexId;const s=r.add(i);if(t.indexState){const l=Hw(e);return s.next(h=>{l.put(UH(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=LS(e),i=Hw(e),s=Uw(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Uw(e);let i=!0;const s=new Map;return me.forEach(this.tn(t),l=>this.en(e,l).next(h=>{i&&(i=!!h),s.set(l,h)})).next(()=>{if(i){let l=Xt();const h=[];return me.forEach(s,(p,_)=>{var w;je("IndexedDbIndexManager",`Using index ${w=p,`id=${w.indexId}|cg=${w.collectionGroup}|f=${w.fields.map(Xe=>`${Xe.fieldPath}:${Xe.kind}`).join(",")}`} to execute ${op(t)}`);const D=function(Xe,Qe){const Ct=zO(Qe);if(void 0===Ct)return null;for(const St of SS(Xe,Ct.fieldPath))switch(St.op){case"array-contains-any":return St.value.arrayValue.values||[];case"array-contains":return[St.value]}return null}(_,p),M=function(Xe,Qe){const Ct=new Map;for(const St of ep(Qe))for(const sn of SS(Xe,St.fieldPath))switch(sn.op){case"==":case"in":Ct.set(St.fieldPath.canonicalString(),sn.value);break;case"not-in":case"!=":return Ct.set(St.fieldPath.canonicalString(),sn.value),Array.from(Ct.values())}return null}(_,p),P=function(Xe,Qe){const Ct=[];let St=!0;for(const sn of ep(Qe)){const Wr=0===sn.kind?U2(Xe,sn.fieldPath,Xe.startAt):H2(Xe,sn.fieldPath,Xe.startAt);Ct.push(Wr.value),St&&(St=Wr.inclusive)}return new ih(Ct,St)}(_,p),F=function(Xe,Qe){const Ct=[];let St=!0;for(const sn of ep(Qe)){const Wr=0===sn.kind?H2(Xe,sn.fieldPath,Xe.endAt):U2(Xe,sn.fieldPath,Xe.endAt);Ct.push(Wr.value),St&&(St=Wr.inclusive)}return new ih(Ct,St)}(_,p),q=this.nn(p,_,P),oe=this.nn(p,_,F),xe=this.sn(p,_,M),Ge=this.rn(p.indexId,D,q,P.inclusive,oe,F.inclusive,xe);return me.forEach(Ge,Xe=>r.J(Xe,t.limit).next(Qe=>{Qe.forEach(Ct=>{const St=tt.fromSegments(Ct.documentKey);l.has(St)||(l=l.add(St),h.push(St))})}))}).next(()=>h)}return me.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,i,s,l,h){const p=(null!=t?t.length:1)*Math.max(r.length,s.length),_=p/(null!=t?t.length:1),w=[];for(let D=0;D<p;++D){const M=t?this.on(t[D/_]):FS,P=this.un(e,M,r[D%_],i),F=this.cn(e,M,s[D%_],l),q=h.map(oe=>this.un(e,M,oe,!0));w.push(...this.createRange(P,F,q))}return w}un(e,t,r,i){const s=new fp(e,tt.empty(),t,r);return i?s:s.Ke()}cn(e,t,r,i){const s=new fp(e,tt.empty(),t,r);return i?s.Ke():s}en(e,t){const r=new o8(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let l=null;for(const h of s)r.We(h)&&(!l||h.fields.length>l.fields.length)&&(l=h);return l})}getIndexType(e,t){let r=2;return me.forEach(this.tn(t),i=>this.en(e,i).next(s=>{s?0!==r&&s.fields.length<function(l){let h=new Ln(Fr.comparator),p=!1;for(const _ of l.filters){const w=_;w.field.isKeyField()||("array-contains"===w.op||"array-contains-any"===w.op?p=!0:h=h.add(w.field))}for(const _ of l.orderBy)_.field.isKeyField()||(h=h.add(_.field));return h.size+(p?1:0)}(i)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new Bw;for(const i of ep(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const l=r.qe(i.kind);hp.Te.ce(s,l)}return r.$e()}on(e){const t=new Bw;return hp.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new Bw;return hp.Te.ce(sp(this.databaseId,t),r.qe(function(i){const s=ep(i);return 0===s.length?0:s[s.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let i=[];i.push(new Bw);let s=0;for(const l of ep(e)){const h=r[s++];for(const p of i)if(this.ln(t,l.fieldPath)&&Cw(h))i=this.fn(i,l,h);else{const _=p.qe(l.kind);hp.Te.ce(h,_)}}return this.dn(i)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const i=[...e],s=[];for(const l of r.arrayValue.values||[])for(const h of i){const p=new Bw;p.seed(h.$e()),hp.Te.ce(l,p.qe(t.kind)),s.push(p)}return s}ln(e,t){return!!e.filters.find(r=>r instanceof Gi&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=LS(e),i=Hw(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(s=>{const l=[];return me.forEach(s,h=>i.get([h.indexId,this.uid]).next(p=>{l.push(function(_,w){const D=w?new _w(w.sequenceNumber,new Uo(up(w.readTime),new tt(Rc(w.documentKey)),w.largestBatchId)):_w.empty(),M=_.fields.map(([P,F])=>new bS(Fr.fromServerFormat(P),F));return new vS(_.indexId,_.collectionGroup,M,D)}(h,p))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:$t(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=LS(e),s=Hw(e);return this._n(e).next(l=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>me.forEach(h,p=>s.put(UH(p.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return me.forEach(t,(i,s)=>{const l=r.get(i.collectionGroup);return(l?me.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),me.forEach(h,p=>this.wn(e,i,p).next(_=>{const w=this.mn(s,p);return _.isEqual(w)?me.resolve():this.gn(e,s,p,_,w)}))))})}yn(e,t,r,i){return Uw(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,i){return Uw(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=Uw(e);let s=new Ln(pp);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(l,h)=>{s=s.add(new fp(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>s)}mn(e,t){let r=new Ln(pp);const i=this.an(t,e);if(null==i)return r;const s=zO(t);if(null!=s){const l=e.data.field(s.fieldPath);if(Cw(l))for(const h of l.arrayValue.values||[])r=r.add(new fp(t.indexId,e.key,this.on(h),i))}else r=r.add(new fp(t.indexId,e.key,FS,i));return r}gn(e,t,r,i,s){je("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(h,p,_,w,D){const M=h.getIterator(),P=p.getIterator();let F=Kg(M),q=Kg(P);for(;F||q;){let oe=!1,xe=!1;if(F&&q){const Ge=_(F,q);Ge<0?xe=!0:Ge>0&&(oe=!0)}else null!=F?xe=!0:oe=!0;oe?(w(q),q=Kg(P)):xe?(D(F),F=Kg(M)):(F=Kg(M),q=Kg(P))}}(i,s,pp,h=>{l.push(this.yn(e,t,r,h))},h=>{l.push(this.pn(e,t,r,h))}),me.waitFor(l)}_n(e){let t=1;return Hw(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,h)=>pp(l,h)).filter((l,h,p)=>!h||0!==pp(l,p[h-1]));const i=[];i.push(e);for(const l of r){const h=pp(l,e),p=pp(l,t);if(0===h)i[0]=e.Ke();else if(h>0&&p<0)i.push(l),i.push(l.Ke());else if(p>0)break}i.push(t);const s=[];for(let l=0;l<i.length;l+=2)s.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,FS,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,FS,[]]));return s}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(WH)}getMinOffset(e,t){return me.mapArray(this.tn(t),r=>this.en(e,r).next(i=>i||dt())).next(WH)}}function zH(n){return Si(n,"collectionParents")}function Uw(n){return Si(n,"indexEntries")}function LS(n){return Si(n,"indexConfiguration")}function Hw(n){return Si(n,"indexState")}function WH(n){Lt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;WO(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Uo(e.readTime,e.documentKey,t)}const qH={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class no{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new no(e,no.DEFAULT_COLLECTION_PERCENTILE,no.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function KH(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],l=IDBKeyRange.only(t.batchId);let h=0;const p=r.Z({range:l},(w,D,M)=>(h++,M.delete()));s.push(p.next(()=>{Lt(1===h)}));const _=[];for(const w of t.mutations){const D=kH(e,w.key.path,t.batchId);s.push(i.delete(D)),_.push(w.key)}return me.waitFor(s).next(()=>_)}function VS(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw dt();e=n.noDocument}return JSON.stringify(e).length}no.DEFAULT_COLLECTION_PERCENTILE=10,no.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,no.DEFAULT=new no(41943040,no.DEFAULT_COLLECTION_PERCENTILE,no.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),no.DISABLED=new no(-1,0,0);class BS{constructor(e,t,r,i){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static oe(e,t,r,i){Lt(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new BS(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ah(e).Z({index:"userMutationsIndex",range:r},(i,s,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=s_(e),l=ah(e);return l.add({}).next(h=>{Lt("number"==typeof h);const p=new lP(h,t,r,i),_=function(M,P,F){const q=F.baseMutations.map(xe=>Fw(M.re,xe)),oe=F.mutations.map(xe=>Fw(M.re,xe));return{userId:P,batchId:F.batchId,localWriteTimeMs:F.localWriteTime.toMillis(),baseMutations:q,mutations:oe}}(this.It,this.userId,p),w=[];let D=new Ln((M,P)=>$t(M.canonicalString(),P.canonicalString()));for(const M of i){const P=kH(this.userId,M.key.path,h);D=D.add(M.key.path.popLast()),w.push(l.put(_)),w.push(s.put(P,LZ))}return D.forEach(M=>{w.push(this.indexManager.addToCollectionParentIndex(e,M))}),e.addOnCommittedListener(()=>{this.In[h]=p.keys()}),me.waitFor(w).next(()=>p)})}lookupMutationBatch(e,t){return ah(e).get(t).next(r=>r?(Lt(r.userId===this.userId),dp(this.It,r)):null)}Tn(e,t){return this.In[t]?me.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return ah(e).Z({index:"userMutationsIndex",range:i},(l,h,p)=>{h.userId===this.userId&&(Lt(h.batchId>=r),s=dp(this.It,h)),p.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ah(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,s,l)=>{r=s.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ah(e).W("userMutationsIndex",t).next(r=>r.map(i=>dp(this.It,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=OS(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return s_(e).Z({range:i},(l,h,p)=>{const[_,w,D]=l,M=Rc(w);if(_===this.userId&&t.path.isEqual(M))return ah(e).get(D).next(P=>{if(!P)throw dt();Lt(P.userId===this.userId),s.push(dp(this.It,P))});p.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ln($t);const i=[];return t.forEach(s=>{const l=OS(this.userId,s.path),h=IDBKeyRange.lowerBound(l),p=s_(e).Z({range:h},(_,w,D)=>{const[M,P,F]=_,q=Rc(P);M===this.userId&&s.path.isEqual(q)?r=r.add(F):D.done()});i.push(p)}),me.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=OS(this.userId,r),l=IDBKeyRange.lowerBound(s);let h=new Ln($t);return s_(e).Z({range:l},(p,_,w)=>{const[D,M,P]=p,F=Rc(M);D===this.userId&&r.isPrefixOf(F)?F.length===i&&(h=h.add(P)):w.done()}).next(()=>this.En(e,h))}En(e,t){const r=[],i=[];return t.forEach(s=>{i.push(ah(e).get(s).next(l=>{if(null===l)throw dt();Lt(l.userId===this.userId),r.push(dp(this.It,l))}))}),me.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return KH(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),me.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return me.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return s_(e).Z({range:r},(s,l,h)=>{if(s[0]===this.userId){const p=Rc(s[1]);i.push(p)}else h.done()}).next(()=>{Lt(0===i.length)})})}containsKey(e,t){return ZH(e,this.userId,t)}Rn(e){return YH(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function ZH(n,e,t){const r=OS(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let l=!1;return s_(n).Z({range:s,X:!0},(h,p,_)=>{const[w,D,M]=h;w===e&&D===i&&(l=!0),_.done()}).next(()=>l)}function ah(n){return Si(n,"mutations")}function s_(n){return Si(n,"documentMutations")}function YH(n){return Si(n,"mutationQueues")}class mp{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new mp(0)}static vn(){return new mp(-1)}}class c8{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new mp(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Ot.fromTimestamp(new hr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>o_(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Lt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return o_(e).Z((l,h)=>{const p=Lw(h);p.sequenceNumber<=t&&null===r.get(p.targetId)&&(i++,s.push(this.removeTargetData(e,p)))}).next(()=>me.waitFor(s)).next(()=>i)}forEachTarget(e,t){return o_(e).Z((r,i)=>{const s=Lw(i);t(s)})}Vn(e){return QH(e).get("targetGlobalKey").next(t=>(Lt(null!==t),t))}Sn(e,t){return QH(e).put("targetGlobalKey",t)}Dn(e,t){return o_(e).put(VH(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=op(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return o_(e).Z({range:i,index:"queryTargetsIndex"},(l,h,p)=>{const _=Lw(h);Dw(t,_.target)&&(s=_,p.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=lh(e);return t.forEach(l=>{const h=Os(l.path);i.push(s.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,l))}),me.waitFor(i)}removeMatchingKeys(e,t,r){const i=lh(e);return me.forEach(t,s=>{const l=Os(s.path);return me.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=lh(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=lh(e);let s=Xt();return i.Z({range:r,X:!0},(l,h,p)=>{const _=Rc(l[1]),w=new tt(_);s=s.add(w)}).next(()=>s)}containsKey(e,t){const r=Os(t.path),i=IDBKeyRange.bound([r],[w2(r)],!1,!0);let s=0;return lh(e).Z({index:"documentTargetsIndex",X:!0,range:i},([l,h],p,_)=>{0!==l&&(s++,_.done())}).next(()=>s>0)}se(e,t){return o_(e).get(t).next(r=>r?Lw(r):null)}}function o_(n){return Si(n,"targets")}function QH(n){return Si(n,"targetGlobal")}function lh(n){return Si(n,"targetDocuments")}function XH([n,e],[t,r]){const i=$t(n,t);return 0===i?$t(e,r):i}class u8{constructor(e){this.xn=e,this.buffer=new Ln(XH),this.Nn=0}kn(){return++this.Nn}Mn(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();XH(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class d8{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}Fn(e){var t=this;je("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,H.Z)(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Jd(r)?je("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Xd(r)}yield t.Fn(3e5)}))}}class h8{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return me.resolve(Js.at);const r=new u8(t);return this.$n.forEachTarget(e,i=>r.Mn(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.Mn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(je("LruGarbageCollector","Garbage collection skipped; disabled"),me.resolve(qH)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(je("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),qH):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,i,s,l,h,p,_;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(D=>(D>this.params.maximumSequenceNumbersToCollect?(je("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${D}`),i=this.params.maximumSequenceNumbersToCollect):i=D,l=Date.now(),this.nthSequenceNumber(e,i))).next(D=>(r=D,h=Date.now(),this.removeTargets(e,r,t))).next(D=>(s=D,p=Date.now(),this.removeOrphanedDocuments(e,r))).next(D=>(_=Date.now(),$O()<=mt.in.DEBUG&&je("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-w}ms\n\tDetermined least recently used ${i} in `+(h-l)+`ms\n\tRemoved ${s} targets in `+(p-h)+`ms\n\tRemoved ${D} documents in `+(_-p)+`ms\nTotal Duration: ${_-w}ms`),me.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:D})))}}class f8{constructor(e,t){this.db=e,this.garbageCollector=new h8(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return US(e,r)}removeReference(e,t,r){return US(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return US(e,t)}Gn(e,t){return function(r,i){let s=!1;return YH(r).tt(l=>ZH(r,l,i).next(h=>(h&&(s=!0),me.resolve(!h)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Kn(e,(l,h)=>{if(h<=t){const p=this.Gn(e,l).next(_=>{if(!_)return s++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Ot.min()),lh(e).delete([0,Os(l.path)])))});i.push(p)}}).next(()=>me.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return US(e,t)}Kn(e,t){const r=lh(e);let i,s=Js.at;return r.Z({index:"documentTargetsIndex"},([l,h],{path:p,sequenceNumber:_})=>{0===l?(s!==Js.at&&t(new tt(Rc(i)),s),s=_,i=p):s=Js.at}).next(()=>{s!==Js.at&&t(new tt(Rc(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function US(n,e){return lh(n).put((r=n.currentSequenceNumber,{targetId:0,path:Os(e.path),sequenceNumber:r}));var r}class JH{constructor(){this.changes=new sh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Yn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?me.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class p8{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return gp(e).put(r)}removeEntry(e,t,r){return gp(e).delete(function(i,s){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],PS(s),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Yn.newInvalidDocument(t);return gp(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(jw(t))},(i,s)=>{r=this.jn(t,s)}).next(()=>r)}Wn(e,t){let r={size:0,document:Yn.newInvalidDocument(t)};return gp(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(jw(t))},(i,s)=>{r={document:this.jn(t,s),size:VS(s)}}).next(()=>r)}getEntries(e,t){let r=to();return this.zn(e,t,(i,s)=>{const l=this.jn(i,s);r=r.insert(i,l)}).next(()=>r)}Hn(e,t){let r=to(),i=new Lr(tt.comparator);return this.zn(e,t,(s,l)=>{const h=this.jn(s,l);r=r.insert(s,h),i=i.insert(s,VS(l))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return me.resolve();let i=new Ln(rj);t.forEach(p=>i=i.add(p));const s=IDBKeyRange.bound(jw(i.first()),jw(i.last())),l=i.getIterator();let h=l.getNext();return gp(e).Z({index:"documentKeyIndex",range:s},(p,_,w)=>{const D=tt.fromSegments([..._.prefixPath,_.collectionGroup,_.documentId]);for(;h&&rj(h,D)<0;)r(h,null),h=l.getNext();h&&h.isEqual(D)&&(r(h,_),h=l.hasNext()?l.getNext():null),h?w.j(jw(h)):w.done()}).next(()=>{for(;h;)r(h,null),h=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),PS(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],s=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return gp(e).W(IDBKeyRange.bound(i,s,!0)).next(l=>{let h=to();for(const p of l){const _=this.jn(tt.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);h=h.insert(_.key,_)}return h})}getAllFromCollectionGroup(e,t,r,i){let s=to();const l=nj(t,r),h=nj(t,Uo.max());return gp(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,h,!0)},(p,_,w)=>{const D=this.jn(tt.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);s=s.insert(D.key,D),s.size===i&&w.done()}).next(()=>s)}newChangeBuffer(e){return new m8(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return tj(e).get("remoteDocumentGlobalKey").next(t=>(Lt(!!t),t))}Qn(e,t){return tj(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function e8(n,e){let t;if(e.document)t=IH(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=tt.fromSegments(e.noDocument.path),i=up(e.noDocument.readTime);t=Yn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return dt();{const r=tt.fromSegments(e.unknownDocument.path),i=up(e.unknownDocument.version);t=Yn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new hr(r[0],r[1]);return Ot.fromTimestamp(i)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(Ot.min()))return r}return Yn.newInvalidDocument(e)}}function ej(n){return new p8(n)}class m8 extends JH{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new sh(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Ln((s,l)=>$t(s.canonicalString(),l.canonicalString()));return this.changes.forEach((s,l)=>{const h=this.Xn.get(s);if(t.push(this.Yn.removeEntry(e,s,h.readTime)),l.isValidDocument()){const p=LH(this.Yn.It,l);i=i.add(s.path.popLast()),r+=VS(p)-h.size,t.push(this.Yn.addEntry(e,s,p))}else if(r-=h.size,this.trackRemovals){const p=LH(this.Yn.It,l.convertToNoDocument(Ot.min()));t.push(this.Yn.addEntry(e,s,p))}}),i.forEach(s=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.Yn.updateMetadata(e,r)),me.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((s,l)=>{this.Xn.set(s,{size:l,readTime:r.get(s).readTime})}),r))}}function tj(n){return Si(n,"remoteDocumentGlobal")}function gp(n){return Si(n,"remoteDocumentsV14")}function jw(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function nj(n,e){const t=e.documentKey.path.toArray();return[n,PS(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function rj(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=$t(t[s],r[s]),i)return i;return i=$t(t.length,r.length),i||(i=$t(t[t.length-2],r[r.length-2]),i||$t(t[t.length-1],r[r.length-1]))}class g8{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ij{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&Aw(r.mutation,i,Ho.empty(),hr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Xt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Xt()){const i=Mc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let l=Mw();return s.forEach((h,p)=>{l=l.insert(h,p.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=Mc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Xt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((l,h)=>{t.set(l,h)})})}computeViews(e,t,r,i){let s=to();const l=xw(),h=xw();return t.forEach((p,_)=>{const w=r.get(_.key);i.has(_.key)&&(void 0===w||w.mutation instanceof ku)?s=s.insert(_.key,_):void 0!==w&&(l.set(_.key,w.mutation.getFieldMask()),Aw(w.mutation,_,w.mutation.getFieldMask(),hr.now()))}),this.recalculateAndSaveOverlays(e,s).next(p=>(p.forEach((_,w)=>l.set(_,w)),t.forEach((_,w)=>{var D;return h.set(_,new g8(w,null!==(D=l.get(_))&&void 0!==D?D:null))}),h))}recalculateAndSaveOverlays(e,t){const r=xw();let i=new Lr((l,h)=>l-h),s=Xt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const h of l)h.keys().forEach(p=>{const _=t.get(p);if(null===_)return;let w=r.get(p)||Ho.empty();w=h.applyToLocalView(_,w),r.set(p,w);const D=(i.get(h.batchId)||Xt()).add(p);i=i.insert(h.batchId,D)})}).next(()=>{const l=[],h=i.getReverseIterator();for(;h.hasNext();){const p=h.getNext(),_=p.key,w=p.value,D=fH();w.forEach(M=>{if(!s.has(M)){const P=iH(t.get(M),r.get(M));null!==P&&D.set(M,P),s=s.add(M)}}),l.push(this.documentOverlayCache.saveOverlays(e,_,D))}return me.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return tt.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):eP(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const l=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):me.resolve(Mc());let h=-1,p=s;return l.next(_=>me.forEach(_,(w,D)=>(h<D.largestBatchId&&(h=D.largestBatchId),s.get(w)?me.resolve():this.getBaseDocument(e,w,D).next(M=>{p=p.insert(w,M)}))).next(()=>this.populateOverlays(e,_,s)).next(()=>this.computeViews(e,p,_,Xt())).next(w=>({batchId:h,changes:hH(w)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new tt(t)).next(r=>{let i=Mw();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let s=Mw();return this.indexManager.getCollectionParents(e,i).next(l=>me.forEach(l,h=>{const p=(_=t,w=h.child(i),new Ru(w,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt));var _,w;return this.getDocumentsMatchingCollectionQuery(e,p,r).next(_=>{_.forEach((w,D)=>{s=s.insert(w,D)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(s=>(i=s,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(s=>{s.forEach((h,p)=>{const _=p.getKey();null===i.get(_)&&(i=i.insert(_,Yn.newInvalidDocument(_)))});let l=Mw();return i.forEach((h,p)=>{const _=s.get(h);void 0!==_&&Aw(_.mutation,p,Ho.empty(),hr.now()),nP(t,p)&&(l=l.insert(h,p))}),l})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):me.resolve(Yn.newInvalidDocument(t))}}class _8{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return me.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Di(r.createTime)}),me.resolve()}getNamedQuery(e,t){return me.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:dP(r.bundledQuery),readTime:Di(r.readTime)}),me.resolve();var r}}class y8{constructor(){this.overlays=new Lr(tt.comparator),this.es=new Map}getOverlay(e,t){return me.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Mc();return me.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ue(e,t,s)}),me.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.es.delete(r)),me.resolve()}getOverlaysForCollection(e,t,r){const i=Mc(),s=t.length+1,l=new tt(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const p=h.getNext().value,_=p.getKey();if(!t.isPrefixOf(_.path))break;_.path.length===s&&p.largestBatchId>r&&i.set(p.getKey(),p)}return me.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Lr((_,w)=>_-w);const l=this.overlays.getIterator();for(;l.hasNext();){const _=l.getNext().value;if(_.getKey().getCollectionGroup()===t&&_.largestBatchId>r){let w=s.get(_.largestBatchId);null===w&&(w=Mc(),s=s.insert(_.largestBatchId,w)),w.set(_.getKey(),_)}}const h=Mc(),p=s.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((_,w)=>h.set(_,w)),!(h.size()>=i)););return me.resolve(h)}ue(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new uP(t,r));let s=this.es.get(t);void 0===s&&(s=Xt(),this.es.set(t,s)),this.es.set(t,s.add(r.key))}}class pP{constructor(){this.ns=new Ln(Ti.ss),this.rs=new Ln(Ti.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new Ti(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new Ti(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new tt(new yn([])),r=new Ti(t,e),i=new Ti(t,e+1),s=[];return this.rs.forEachInRange([r,i],l=>{this.cs(l),s.push(l.key)}),s}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new tt(new yn([])),r=new Ti(t,e),i=new Ti(t,e+1);let s=Xt();return this.rs.forEachInRange([r,i],l=>{s=s.add(l.key)}),s}containsKey(e){const t=new Ti(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ti{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return tt.comparator(e.key,t.key)||$t(e._s,t._s)}static os(e,t){return $t(e._s,t._s)||tt.comparator(e.key,t.key)}}class v8{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Ln(Ti.ss)}checkEmpty(e){return me.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.ws;this.ws++;const l=new lP(s,t,r,i);this.mutationQueue.push(l);for(const h of i)this.gs=this.gs.add(new Ti(h.key,s)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return me.resolve(l)}lookupMutationBatch(e,t){return me.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),s=i<0?0:i;return me.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return me.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return me.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ti(t,0),i=new Ti(t,Number.POSITIVE_INFINITY),s=[];return this.gs.forEachInRange([r,i],l=>{const h=this.ys(l._s);s.push(h)}),me.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ln($t);return t.forEach(i=>{const s=new Ti(i,0),l=new Ti(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([s,l],h=>{r=r.add(h._s)})}),me.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;tt.isDocumentKey(s)||(s=s.child(""));const l=new Ti(new tt(s),0);let h=new Ln($t);return this.gs.forEachWhile(p=>{const _=p.key.path;return!!r.isPrefixOf(_)&&(_.length===i&&(h=h.add(p._s)),!0)},l),me.resolve(this.Is(h))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Lt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return me.forEach(t.mutations,i=>{const s=new Ti(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new Ti(t,0),i=this.gs.firstAfterOrEqual(r);return me.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return me.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class b8{constructor(e){this.Es=e,this.docs=new Lr(tt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,l=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return me.resolve(r?r.document.mutableCopy():Yn.newInvalidDocument(t))}getEntries(e,t){let r=to();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Yn.newInvalidDocument(i))}),me.resolve(r)}getAllFromCollection(e,t,r){let i=to();const s=new tt(t.child("")),l=this.docs.getIteratorFrom(s);for(;l.hasNext();){const{key:h,value:{document:p}}=l.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||WO(C2(p),r)<=0||(i=i.insert(p.key,p.mutableCopy()))}return me.resolve(i)}getAllFromCollectionGroup(e,t,r,i){dt()}As(e,t){return me.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new w8(this)}getSize(e){return me.resolve(this.size)}}class w8 extends JH{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),me.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class E8{constructor(e){this.persistence=e,this.Rs=new sh(t=>op(t),Dw),this.lastRemoteSnapshotVersion=Ot.min(),this.highestTargetId=0,this.bs=0,this.Ps=new pP,this.targetCount=0,this.vs=mp.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),me.resolve()}getLastRemoteSnapshotVersion(e){return me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return me.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),me.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),me.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new mp(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,me.resolve()}updateTargetData(e,t){return this.Dn(t),me.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,me.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Rs.forEach((l,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.Rs.delete(l),s.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),me.waitFor(s).next(()=>i)}getTargetCount(e){return me.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return me.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),me.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(l=>{s.push(i.markPotentiallyOrphaned(e,l))}),me.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),me.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return me.resolve(r)}containsKey(e,t){return me.resolve(this.Ps.containsKey(t))}}class sj{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Js(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new E8(this),this.indexManager=new a8,this.remoteDocumentCache=new b8(r=>this.referenceDelegate.xs(r)),this.It=new FH(t),this.Ns=new _8(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new y8,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new v8(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){je("MemoryPersistence","Starting transaction:",e);const i=new C8(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(s=>this.referenceDelegate.Ms(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Os(e,t){return me.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class C8 extends D2{constructor(e){super(),this.currentSequenceNumber=e}}class HS{constructor(e){this.persistence=e,this.Fs=new pP,this.$s=null}static Bs(e){return new HS(e)}get Ls(){if(this.$s)return this.$s;throw dt()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),me.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),me.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),me.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Ls.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Ms(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return me.forEach(this.Ls,r=>{const i=tt.fromPath(r);return this.Us(e,i).next(s=>{s||t.removeEntry(i,Ot.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return me.or([()=>me.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class I8{constructor(e){this.It=e}$(e,t,r,i){const s=new wS("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",RH,{unique:!0}),h.createObjectStore("documentMutations"),oj(e),function(h){h.createObjectStore("remoteDocuments")}(e));let l=me.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),oj(e)),l=l.next(()=>function(h){const p=h.store("targetGlobal"),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ot.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",_)}(s))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(h,p){return p.store("mutations").W().next(_=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",RH,{unique:!0});const w=p.store("mutations"),D=_.map(M=>w.put(M));return me.waitFor(D)})}(e,s))),l=l.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.qs(s))),r<6&&i>=6&&(l=l.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(s)))),r<7&&i>=7&&(l=l.next(()=>this.Gs(s))),r<8&&i>=8&&(l=l.next(()=>this.Qs(e,s))),r<9&&i>=9&&(l=l.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.js(s))),r<11&&i>=11&&(l=l.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(h){const p=h.createObjectStore("documentOverlays",{keyPath:ZZ});p.createIndex("collectionPathOverlayIndex",YZ,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",QZ,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(h){const p=h.createObjectStore("remoteDocumentsV14",{keyPath:VZ});p.createIndex("documentKeyIndex",BZ),p.createIndex("collectionGroupIndex",UZ)}(e)).next(()=>this.Ws(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.zs(e,s))),r<15&&i>=15&&(l=l.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:zZ}).createIndex("sequenceNumberIndex",WZ,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:qZ}).createIndex("documentKeyIndex",KZ,{unique:!1})}(e))),l}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=VS(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>me.forEach(i,s=>{const l=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(h=>me.forEach(h,p=>{Lt(p.userId===s.userId);const _=dp(this.It,p);return KH(e,s.userId,_).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Z((l,h)=>{const p=new yn(l),_=[0,Os(p)];s.push(t.get(_).next(w=>w?me.resolve():t.put({targetId:0,path:Os(p),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>me.waitFor(s))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:GZ});const r=t.store("collectionParents"),i=new fP,s=l=>{if(i.add(l)){const h=l.lastSegment(),p=l.popLast();return r.put({collectionId:h,parent:Os(p)})}};return t.store("remoteDocuments").Z({X:!0},(l,h)=>{const p=new yn(l);return s(p.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([l,h,p],_)=>{const w=Rc(h);return s(w.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const s=Lw(i),l=VH(this.It,s);return t.put(l)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((s,l)=>{const h=t.store("remoteDocumentsV14"),p=(_=l,_.document?new tt(yn.fromString(_.document.name).popFirst(5)):_.noDocument?tt.fromSegments(_.noDocument.path):_.unknownDocument?tt.fromSegments(_.unknownDocument.path):dt()).path.toArray();var _;const w={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(h.put(w))}).next(()=>me.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=ej(this.It),s=new sj(HS.Bs,this.It.re);return r.W().next(l=>{const h=new Map;return l.forEach(p=>{var _;let w=null!==(_=h.get(p.userId))&&void 0!==_?_:Xt();dp(this.It,p).keys().forEach(D=>w=w.add(D)),h.set(p.userId,w)}),me.forEach(h,(p,_)=>{const w=new Ci(_),D=NS.oe(this.It,w),M=s.getIndexManager(w),P=BS.oe(w,this.It,M,s.referenceDelegate);return new ij(i,P,D,M).recalculateAndSaveOverlaysForDocumentKeys(new aP(t,Js.at),p).next()})})}}function oj(n){n.createObjectStore("targetDocuments",{keyPath:jZ}).createIndex("documentTargetsIndex",$Z,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",HZ,{unique:!0}),n.createObjectStore("targetGlobal")}const mP="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class gP{constructor(e,t,r,i,s,l,h,p,_,w,D=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=s,this.window=l,this.document=h,this.Js=_,this.Ys=w,this.Xs=D,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=M=>Promise.resolve(),!gP.C())throw new Be(be.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new f8(this,i),this.ii=t+"main",this.It=new FH(p),this.ri=new Nl(this.ii,this.Xs,new I8(this.It)),this.Cs=new c8(this.referenceDelegate,this.It),this.remoteDocumentCache=ej(this.It),this.Ns=new t8,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===w&&Gr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Be(be.FAILED_PRECONDITION,mP);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Js(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,H.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,H.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,H.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>jS(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Jd(e))return je("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return je("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return $w(e).get("owner").next(t=>me.resolve(this.mi(t)))}gi(e){return jS(e).delete(this.clientId)}yi(){var e=this;return(0,H.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Si(r,"clientMetadata");return i.W().next(s=>{const l=e.Ii(s,18e5),h=s.filter(p=>-1===l.indexOf(p));return me.forEach(h,p=>i.delete(p.clientId)).next(()=>h)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?me.resolve(!0):$w(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Be(be.FAILED_PRECONDITION,mP);return!1}}return!(!this.networkEnabled||!this.inForeground)||jS(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const l=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||l&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&je("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,H.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new aP(t,Js.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>jS(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return BS.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new l8(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return NS.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){je("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=15===(l=this.Xs)?JZ:14===l?NH:13===l?PH:12===l?XZ:11===l?OH:void dt();var l;let h;return this.ri.runTransaction(e,i,s,p=>(h=new aP(p,this.Ss?this.Ss.next():Js.at),"readwrite-primary"===t?this.fi(h).next(_=>!!_||this.di(h)).next(_=>{if(!_)throw Gr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Be(be.FAILED_PRECONDITION,I2);return r(h)}).next(_=>this.wi(h).next(()=>_)):this.Vi(h).next(()=>r(h)))).then(p=>(h.raiseOnCommittedEvent(),p))}Vi(e){return $w(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Be(be.FAILED_PRECONDITION,mP)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return $w(e).put("owner",t)}static C(){return Nl.C()}_i(e){const t=$w(e);return t.get("owner").next(r=>this.mi(r)?(je("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):me.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Gr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,k.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return je("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Gr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Gr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function $w(n){return Si(n,"owner")}function jS(n){return Si(n,"clientMetadata")}function _P(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class yP{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=Xt(),i=Xt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new yP(e,t.fromCache,r,i)}}class aj{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(s=>s||this.Mi(e,t,i,r)).next(s=>s||this.Oi(e,t))}ki(e,t){if(W2(t))return me.resolve(null);let r=eo(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=TS(t,null,"F"),r=eo(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const l=Xt(...s);return this.Ni.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,r).next(p=>{const _=this.Fi(t,h);return this.$i(t,_,l,p.readTime)?this.ki(e,TS(t,null,"F")):this.Bi(e,_,t,p)}))})))}Mi(e,t,r,i){return W2(t)||i.isEqual(Ot.min())?this.Oi(e,t):this.Ni.getDocuments(e,r).next(s=>{const l=this.Fi(t,s);return this.$i(t,l,r,i)?this.Oi(e,t):($O()<=mt.in.DEBUG&&je("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),tP(t)),this.Bi(e,l,t,E2(i,-1)))})}Fi(e,t){let r=new Ln(Z2(e));return t.forEach((i,s)=>{nP(e,s)&&(r=r.add(s))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Oi(e,t){return $O()<=mt.in.DEBUG&&je("QueryEngine","Using full collection scan to execute query:",tP(t)),this.Ni.getDocumentsMatchingQuery(e,t,Uo.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(l=>{s=s.insert(l.key,l)}),s))}}class D8{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.It=i,this.Ui=new Lr($t),this.qi=new sh(s=>op(s),Dw),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ij(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function lj(n,e,t,r){return new D8(n,e,t,r)}function cj(n,e){return vP.apply(this,arguments)}function vP(){return vP=(0,H.Z)(function*(n,e){const t=st(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const l=[],h=[];let p=Xt();for(const _ of i){l.push(_.batchId);for(const w of _.mutations)p=p.add(w.key)}for(const _ of s){h.push(_.batchId);for(const w of _.mutations)p=p.add(w.key)}return t.localDocuments.getDocuments(r,p).next(_=>({ji:_,removedBatchIds:l,addedBatchIds:h}))})})}),vP.apply(this,arguments)}function S8(n,e){const t=st(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Gi.newChangeBuffer({trackRemovals:!0});return function(l,h,p,_){const w=p.batch,D=w.keys();let M=me.resolve();return D.forEach(P=>{M=M.next(()=>_.getEntry(h,P)).next(F=>{const q=p.docVersions.get(P);Lt(null!==q),F.version.compareTo(q)<0&&(w.applyToRemoteDocument(F,p),F.isValidDocument()&&(F.setReadTime(p.commitVersion),_.addEntry(F)))})}),M.next(()=>l.mutationQueue.removeMutationBatch(h,w))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let h=Xt();for(let p=0;p<l.mutationResults.length;++p)l.mutationResults[p].transformResults.length>0&&(h=h.add(l.batch.mutations[p].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function uj(n){const e=st(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function T8(n,e){const t=st(n),r=e.snapshotVersion;let i=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const l=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.Ui;const h=[];e.targetChanges.forEach((w,D)=>{const M=i.get(D);if(!M)return;h.push(t.Cs.removeMatchingKeys(s,w.removedDocuments,D).next(()=>t.Cs.addMatchingKeys(s,w.addedDocuments,D)));let P=M.withSequenceNumber(s.currentSequenceNumber);var F,q,oe;e.targetMismatches.has(D)?P=P.withResumeToken(ui.EMPTY_BYTE_STRING,Ot.min()).withLastLimboFreeSnapshotVersion(Ot.min()):w.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(w.resumeToken,r)),i=i.insert(D,P),q=P,oe=w,(0===(F=M).resumeToken.approximateByteSize()||q.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=3e8||oe.addedDocuments.size+oe.modifiedDocuments.size+oe.removedDocuments.size>0)&&h.push(t.Cs.updateTargetData(s,P))});let p=to(),_=Xt();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(s,w))}),h.push(dj(s,l,e.documentUpdates).next(w=>{p=w.Wi,_=w.zi})),!r.isEqual(Ot.min())){const w=t.Cs.getLastRemoteSnapshotVersion(s).next(D=>t.Cs.setTargetsMetadata(s,s.currentSequenceNumber,r));h.push(w)}return me.waitFor(h).next(()=>l.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,p,_)).next(()=>p)}).then(s=>(t.Ui=i,s))}function dj(n,e,t){let r=Xt(),i=Xt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let l=to();return t.forEach((h,p)=>{const _=s.get(h);p.isFoundDocument()!==_.isFoundDocument()&&(i=i.add(h)),p.isNoDocument()&&p.version.isEqual(Ot.min())?(e.removeEntry(h,p.readTime),l=l.insert(h,p)):!_.isValidDocument()||p.version.compareTo(_.version)>0||0===p.version.compareTo(_.version)&&_.hasPendingWrites?(e.addEntry(p),l=l.insert(h,p)):je("LocalStore","Ignoring outdated watch update for ",h,". Current version:",_.version," Watch version:",p.version)}),{Wi:l,zi:i}})}function A8(n,e){const t=st(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function a_(n,e){const t=st(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(s=>s?(i=s,me.resolve(i)):t.Cs.allocateTargetId(r).next(l=>(i=new oh(e,l,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function l_(n,e,t){return bP.apply(this,arguments)}function bP(){return bP=(0,H.Z)(function*(n,e,t){const r=st(n),i=r.Ui.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Jd(l))throw l;je("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ui=r.Ui.remove(e),r.qi.delete(i.target)}),bP.apply(this,arguments)}function $S(n,e,t){const r=st(n);let i=Ot.min(),s=Xt();return r.persistence.runTransaction("Execute query","readonly",l=>function(h,p,_){const w=st(h),D=w.qi.get(_);return void 0!==D?me.resolve(w.Ui.get(D)):w.Cs.getTargetData(p,_)}(r,l,eo(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(l,h.targetId).next(p=>{s=p})}).next(()=>r.Li.getDocumentsMatchingQuery(l,e,t?i:Ot.min(),t?s:Xt())).next(h=>(pj(r,K2(e),h),{documents:h,Hi:s})))}function hj(n,e){const t=st(n),r=st(t.Cs),i=t.Ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.se(s,e).next(l=>l?l.target:null))}function fj(n,e){const t=st(n),r=t.Ki.get(e)||Ot.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,E2(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(pj(t,e,i),i))}function pj(n,e,t){let r=Ot.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Ki.set(e,r)}function wP(){return wP=(0,H.Z)(function*(n,e,t,r){const i=st(n);let s=Xt(),l=to();for(const _ of t){const w=e.Ji(_.metadata.name);_.document&&(s=s.add(w));const D=e.Yi(_);D.setReadTime(e.Xi(_.metadata.readTime)),l=l.insert(w,D)}const h=i.Gi.newChangeBuffer({trackRemovals:!0}),p=yield a_(i,(_=r,eo(Qg(yn.fromString(`__bundle__/docs/${_}`)))));var _;return i.persistence.runTransaction("Apply bundle documents","readwrite",_=>dj(_,h,l).next(w=>(h.apply(_),w)).next(w=>i.Cs.removeMatchingKeysForTargetId(_,p.targetId).next(()=>i.Cs.addMatchingKeys(_,s,p.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(_,w.Wi,w.zi)).next(()=>w.Wi)))}),wP.apply(this,arguments)}function x8(n,e){return EP.apply(this,arguments)}function EP(){return EP=(0,H.Z)(function*(n,e,t=Xt()){const r=yield a_(n,eo(dP(e.bundledQuery))),i=st(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const l=Di(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Ns.saveNamedQuery(s,e);const h=r.withResumeToken(ui.EMPTY_BYTE_STRING,l);return i.Ui=i.Ui.insert(h.targetId,h),i.Cs.updateTargetData(s,h).next(()=>i.Cs.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Cs.addMatchingKeys(s,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(s,e))})}),EP.apply(this,arguments)}function mj(n,e){return`firestore_clients_${n}_${e}`}function gj(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function CP(n,e){return`firestore_targets_${n}_${e}`}class GS{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let s,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(s=new Be(i.error.code,i.error.message))),l?new GS(e,t,i.state,s):(Gr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gw{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Be(r.error.code,r.error.message))),s?new Gw(e,r.state,i):(Gr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class zS{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=RS();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=R2(r.activeTargetIds[l]),s=s.add(r.activeTargetIds[l]);return i?new zS(e,s):(Gr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class IP{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new IP(t.clientId,t.onlineState):(Gr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class DP{constructor(){this.activeTargetIds=RS()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class SP{constructor(e,t,r,i,s){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Lr($t),this.started=!1,this.cr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ar=mj(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new DP),this.lr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,H.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const s=e.getItem(mj(e.persistenceKey,i));if(s){const l=zS.Zi(i,s);l&&(e.ur=e.ur.insert(l.clientId,l))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(CP(this.persistenceKey,e));if(r){const i=Gw.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(CP(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return je("SharedClientState","READ",e,t),t}setItem(e,t){je("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){je("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(je("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void Gr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,H.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(s){let l=Js.at;if(null!=s)try{const h=JSON.parse(s);Lt("number"==typeof h),l=h}catch(h){Gr("SharedClientState","Failed to read sequence number from WebStorage",h)}return l}(r.newValue);i!==Js.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Mr(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Or(s)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new GS(this.currentUser,e,t,r),s=gj(this.persistenceKey,this.currentUser,e);this.setItem(s,i.tr())}Er(e){const t=gj(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=CP(this.persistenceKey,e),s=new Gw(e,t,r);this.setItem(i,s.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return zS.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return GS.Zi(new Ci(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return Gw.Zi(i,t)}yr(e){return IP.Zi(e)}Mr(e){return JSON.parse(e)}Cr(e){var t=this;return(0,H.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);je("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),s=this.Ir(r),l=[],h=[];return s.forEach(p=>{i.has(p)||l.push(p)}),i.forEach(p=>{s.has(p)||h.push(p)}),this.syncEngine.Br(l,h).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=RS();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class _j{constructor(){this.Lr=new DP,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new DP,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class R8{qr(e){}shutdown(){}}class yj{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){je("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){je("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const k8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class O8{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class P8 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,i,s){const l=this.ao(e,t);je("RestConnection","Sending: ",l,r);const h={};return this.ho(h,i,s),this.lo(e,l,h,r).then(p=>(je("RestConnection","Received: ",p),p),p=>{throw Jf("RestConnection",`${e} failed with error: `,p,"url: ",l,"request:",r),p})}fo(e,t,r,i,s,l){return this.co(e,t,r,i,s)}ho(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Wg,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}ao(e,t){return`${this.oo}/v1/${t}:${k8[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,r,i){return new Promise((s,l)=>{const h=new kK;h.listenOnce(MK.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case jO.NO_ERROR:const _=h.getResponseJson();je("Connection","XHR received:",JSON.stringify(_)),s(_);break;case jO.TIMEOUT:je("Connection",'RPC "'+e+'" timed out'),l(new Be(be.DEADLINE_EXCEEDED,"Request time out"));break;case jO.HTTP_ERROR:const w=h.getStatus();if(je("Connection",'RPC "'+e+'" failed with status:',w,"response text:",h.getResponseText()),w>0){const D=h.getResponseJson().error;if(D&&D.status&&D.message){const M=function(P){const F=P.toLowerCase().replace(/_/g,"-");return Object.values(be).indexOf(F)>=0?F:be.UNKNOWN}(D.status);l(new Be(M,D.message))}else l(new Be(be.UNKNOWN,"Server responded with status "+h.getStatus()))}else l(new Be(be.UNAVAILABLE,"Connection failed."));break;default:dt()}}finally{je("Connection",'RPC "'+e+'" completed.')}});const p=JSON.stringify(i);h.send(t,"POST",p,r,15)})}_o(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=TK(),l=AK(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new RK({})),this.ho(h.initMessageHeaders,t,r),(0,k.uI)()||(0,k.b$)()||(0,k.d)()||(0,k.w1)()||(0,k.Mn)()||(0,k.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const p=i.join("");je("Connection","Creating WebChannel: "+p,h);const _=s.createWebChannel(p,h);let w=!1,D=!1;const M=new O8({Hr:F=>{D?je("Connection","Not sending because WebChannel is closed:",F):(w||(je("Connection","Opening WebChannel transport."),_.open(),w=!0),je("Connection","WebChannel sending:",F),_.send(F))},Jr:()=>_.close()}),P=(F,q,oe)=>{F.listen(q,xe=>{try{oe(xe)}catch(Ge){setTimeout(()=>{throw Ge},0)}})};return P(_,yS.EventType.OPEN,()=>{D||je("Connection","WebChannel transport opened.")}),P(_,yS.EventType.CLOSE,()=>{D||(D=!0,je("Connection","WebChannel transport closed"),M.io())}),P(_,yS.EventType.ERROR,F=>{D||(D=!0,Jf("Connection","WebChannel transport errored:",F),M.io(new Be(be.UNAVAILABLE,"The operation could not be completed")))}),P(_,yS.EventType.MESSAGE,F=>{var q;if(!D){const oe=F.data[0];Lt(!!oe);const xe=oe,Ge=xe.error||(null===(q=xe[0])||void 0===q?void 0:q.error);if(Ge){je("Connection","WebChannel received error:",Ge);const Xe=Ge.status;let Qe=function(St){const sn=Yr[St];if(void 0!==sn)return uH(sn)}(Xe),Ct=Ge.message;void 0===Qe&&(Qe=be.INTERNAL,Ct="Unknown error status: "+Xe+" with message "+Ge.message),D=!0,M.io(new Be(Qe,Ct)),_.close()}else je("Connection","WebChannel received:",oe),M.ro(oe)}}),P(l,xK.STAT_EVENT,F=>{F.stat===g2.PROXY?je("Connection","Detected buffering proxy"):F.stat===g2.NOPROXY&&je("Connection","Detected no buffering proxy")}),setTimeout(()=>{M.so()},0),M}}function vj(){return typeof window<"u"?window:null}function WS(){return typeof document<"u"?document:null}function zw(n){return new DZ(n,!0)}class TP{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Hs=e,this.timerId=t,this.wo=r,this.mo=i,this.yo=s,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),i=Math.max(0,t-r);i>0&&je("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Io=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}bo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class bj{constructor(e,t,r,i,s,l,h,p){this.Hs=e,this.Po=r,this.vo=i,this.Vo=s,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new TP(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,H.Z)(function*(){e.No()&&(yield e.close(0))})()}Oo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,H.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,H.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===be.RESOURCE_EXHAUSTED?(Gr(t.toString()),Gr("Using maximum backoff delay to prevent overloading the backend."),r.xo.Eo()):t&&t.code===be.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new Be(be.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Mo(){var e=this;this.state=5,this.xo.Ao((0,H.Z)(function*(){e.state=0,e.start()}))}Qo(e){return je("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(je("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class N8 extends bj{constructor(e,t,r,i,s,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.It=s}jo(e,t){return this.Vo._o("Listen",e,t)}onMessage(e){this.xo.reset();const t=function AZ(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(p=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:dt(),i=e.targetChange.targetIds||[],s=function(p,_){return p.gt?(Lt(void 0===_||"string"==typeof _),ui.fromBase64String(_||"")):(Lt(void 0===_||_ instanceof Uint8Array),ui.fromUint8Array(_||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(p){const _=void 0===p.code?be.UNKNOWN:uH(p.code);return new Be(_,p.message||"")}(l);t=new mH(r,i,s,h||null)}else if("documentChange"in e){const r=e.documentChange,i=xc(n,r.document.name),s=Di(r.document.updateTime),l=new $i({mapValue:{fields:r.document.fields}}),h=Yn.newFoundDocument(i,s,l);t=new kS(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=xc(n,r.document),s=r.readTime?Di(r.readTime):Ot.min(),l=Yn.newNoDocument(i,s);t=new kS([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=xc(n,r.document);t=new kS([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return dt();{const r=e.filter,s=new _Z(r.count||0);t=new pH(r.targetId,s)}}var p;return t}(this.It,e),r=function(i){if(!("targetChange"in i))return Ot.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?Ot.min():s.readTime?Di(s.readTime):Ot.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=Nw(this.It),t.addTarget=function(i,s){let l;const h=s.target;return l=DS(h)?{documents:DH(i,h)}:{query:SH(i,h)},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?l.resumeToken=vH(i,s.resumeToken):s.snapshotVersion.compareTo(Ot.min())>0&&(l.readTime=Ow(i,s.snapshotVersion.toTimestamp())),l}(this.It,e);const r=function xZ(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return dt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=Nw(this.It),t.removeTarget=e,this.Bo(t)}}class F8 extends bj{constructor(e,t,r,i,s,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.It=s,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.Vo._o("Write",e,t)}onMessage(e){if(Lt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function MZ(n,e){return n&&n.length>0?(Lt(void 0!==e),n.map(t=>function(r,i){let s=Di(r.updateTime?r.updateTime:i);return s.isEqual(Ot.min())&&(s=Di(i)),new pZ(s,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Di(e.commitTime);return this.listener.Zo(r,t)}return Lt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Nw(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Fw(this.It,r))};this.Bo(t)}}class L8 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.Vo=r,this.It=i,this.nu=!1}su(){if(this.nu)throw new Be(be.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.Vo.co(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Be(be.UNKNOWN,i.toString())})}fo(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,l])=>this.Vo.fo(e,t,r,s,l,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Be(be.UNKNOWN,s.toString())})}terminate(){this.nu=!0}}class V8{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Gr(t),this.ou=!1):je("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class B8{constructor(e,t,r,i,s){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=s,this.mu.qr(h=>{r.enqueueAndForget((0,H.Z)(function*(){var p;ch(l)&&(je("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,H.Z)(function*(_){const w=st(_);w._u.add(4),yield c_(w),w.gu.set("Unknown"),w._u.delete(4),yield Ww(w)}),function(_){return p.apply(this,arguments)})(l))}))}),this.gu=new V8(r,i)}}function Ww(n){return AP.apply(this,arguments)}function AP(){return AP=(0,H.Z)(function*(n){if(ch(n))for(const e of n.wu)yield e(!0)}),AP.apply(this,arguments)}function c_(n){return MP.apply(this,arguments)}function MP(){return MP=(0,H.Z)(function*(n){for(const e of n.wu)yield e(!1)}),MP.apply(this,arguments)}function qS(n,e){const t=st(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),kP(t)?RP(t):d_(t).ko()&&xP(t,e))}function qw(n,e){const t=st(n),r=d_(t);t.du.delete(e),r.ko()&&wj(t,e),0===t.du.size&&(r.ko()?r.Fo():ch(t)&&t.gu.set("Unknown"))}function xP(n,e){n.yu.Ot(e.targetId),d_(n).zo(e)}function wj(n,e){n.yu.Ot(e),d_(n).Ho(e)}function RP(n){n.yu=new EZ({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),d_(n).start(),n.gu.uu()}function kP(n){return ch(n)&&!d_(n).No()&&n.du.size>0}function ch(n){return 0===st(n)._u.size}function Ej(n){n.yu=void 0}function U8(n){return OP.apply(this,arguments)}function OP(){return OP=(0,H.Z)(function*(n){n.du.forEach((e,t)=>{xP(n,e)})}),OP.apply(this,arguments)}function H8(n,e){return PP.apply(this,arguments)}function PP(){return PP=(0,H.Z)(function*(n,e){Ej(n),kP(n)?(n.gu.hu(e),RP(n)):n.gu.set("Unknown")}),PP.apply(this,arguments)}function j8(n,e,t){return NP.apply(this,arguments)}function NP(){return NP=(0,H.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof mH&&2===e.state&&e.cause)try{yield(r=(0,H.Z)(function*(i,s){const l=s.cause;for(const h of s.targetIds)i.du.has(h)&&(yield i.remoteSyncer.rejectListen(h,l),i.du.delete(h),i.yu.removeTarget(h))}),function(i,s){return r.apply(this,arguments)})(n,e)}catch(r){je("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield KS(n,r)}else if(e instanceof kS?n.yu.Gt(e):e instanceof pH?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(Ot.min()))try{const r=yield uj(n.localStore);t.compareTo(r)>=0&&(yield function(i,s){const l=i.yu.te(s);return l.targetChanges.forEach((h,p)=>{if(h.resumeToken.approximateByteSize()>0){const _=i.du.get(p);_&&i.du.set(p,_.withResumeToken(h.resumeToken,s))}}),l.targetMismatches.forEach(h=>{const p=i.du.get(h);if(!p)return;i.du.set(h,p.withResumeToken(ui.EMPTY_BYTE_STRING,p.snapshotVersion)),wj(i,h);const _=new oh(p.target,h,1,p.sequenceNumber);xP(i,_)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){je("RemoteStore","Failed to raise snapshot:",r),yield KS(n,r)}var r}),NP.apply(this,arguments)}function KS(n,e,t){return FP.apply(this,arguments)}function FP(){return FP=(0,H.Z)(function*(n,e,t){if(!Jd(e))throw e;n._u.add(1),yield c_(n),n.gu.set("Offline"),t||(t=()=>uj(n.localStore)),n.asyncQueue.enqueueRetryable((0,H.Z)(function*(){je("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield Ww(n)}))}),FP.apply(this,arguments)}function Cj(n,e){return e().catch(t=>KS(n,t,e))}function u_(n){return LP.apply(this,arguments)}function LP(){return LP=(0,H.Z)(function*(n){const e=st(n),t=uh(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;$8(e);)try{const i=yield A8(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,G8(e,i)}catch(i){yield KS(e,i)}Ij(e)&&Dj(e)}),LP.apply(this,arguments)}function $8(n){return ch(n)&&n.fu.length<10}function G8(n,e){n.fu.push(e);const t=uh(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function Ij(n){return ch(n)&&!uh(n).No()&&n.fu.length>0}function Dj(n){uh(n).start()}function z8(n){return VP.apply(this,arguments)}function VP(){return VP=(0,H.Z)(function*(n){uh(n).eu()}),VP.apply(this,arguments)}function W8(n){return BP.apply(this,arguments)}function BP(){return BP=(0,H.Z)(function*(n){const e=uh(n);for(const t of n.fu)e.Xo(t.mutations)}),BP.apply(this,arguments)}function q8(n,e,t){return UP.apply(this,arguments)}function UP(){return UP=(0,H.Z)(function*(n,e,t){const r=n.fu.shift(),i=cP.from(r,e,t);yield Cj(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield u_(n)}),UP.apply(this,arguments)}function K8(n,e){return HP.apply(this,arguments)}function HP(){return HP=(0,H.Z)(function*(n,e){var t;e&&uh(n).Yo&&(yield(t=(0,H.Z)(function*(r,i){if(cH(s=i.code)&&s!==be.ABORTED){const l=r.fu.shift();uh(r).Oo(),yield Cj(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield u_(r)}var s}),function(r,i){return t.apply(this,arguments)})(n,e)),Ij(n)&&Dj(n)}),HP.apply(this,arguments)}function Sj(n,e){return jP.apply(this,arguments)}function jP(){return jP=(0,H.Z)(function*(n,e){const t=st(n);t.asyncQueue.verifyOperationInProgress(),je("RemoteStore","RemoteStore received new credentials");const r=ch(t);t._u.add(3),yield c_(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield Ww(t)}),jP.apply(this,arguments)}function $P(n,e){return GP.apply(this,arguments)}function GP(){return GP=(0,H.Z)(function*(n,e){const t=st(n);e?(t._u.delete(2),yield Ww(t)):e||(t._u.add(2),yield c_(t),t.gu.set("Unknown"))}),GP.apply(this,arguments)}function d_(n){return n.pu||(n.pu=function(e,t,r){const i=st(e);return i.su(),new N8(t,i.Vo,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:U8.bind(null,n),Zr:H8.bind(null,n),Wo:j8.bind(null,n)}),n.wu.push(function(){var e=(0,H.Z)(function*(t){t?(n.pu.Oo(),kP(n)?RP(n):n.gu.set("Unknown")):(yield n.pu.stop(),Ej(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function uh(n){return n.Iu||(n.Iu=function(e,t,r){const i=st(e);return i.su(),new F8(t,i.Vo,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:z8.bind(null,n),Zr:K8.bind(null,n),tu:W8.bind(null,n),Zo:q8.bind(null,n)}),n.wu.push(function(){var e=(0,H.Z)(function*(t){t?(n.Iu.Oo(),yield u_(n)):(yield n.Iu.stop(),n.fu.length>0&&(je("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class zP{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ii,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,s){const l=Date.now()+r,h=new zP(e,t,l,i,s);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Be(be.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function h_(n,e){if(Gr("AsyncQueue",`${e}: ${n}`),Jd(n))return new Be(be.UNAVAILABLE,`${e}: ${n}`);throw n}class f_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||tt.comparator(t.key,r.key):(t,r)=>tt.comparator(t.key,r.key),this.keyedMap=Mw(),this.sortedSet=new Lr(this.comparator)}static emptySet(e){return new f_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof f_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new f_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Tj{constructor(){this.Tu=new Lr(tt.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):dt():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class p_{constructor(e,t,r,i,s,l,h,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=p}static fromInitialDocuments(e,t,r,i){const s=[];return t.forEach(l=>{s.push({type:0,doc:l})}),new p_(e,t,f_.emptySet(t),s,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Sw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class Z8{constructor(){this.Au=void 0,this.listeners=[]}}class Y8{constructor(){this.queries=new sh(e=>q2(e),Sw),this.onlineState="Unknown",this.Ru=new Set}}function WP(n,e){return qP.apply(this,arguments)}function qP(){return qP=(0,H.Z)(function*(n,e){const t=st(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new Z8),i)try{s.Au=yield t.onListen(r)}catch(l){const h=h_(l,`Initialization of query '${tP(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,s),s.listeners.push(e),e.bu(t.onlineState),s.Au&&e.Pu(s.Au)&&YP(t)}),qP.apply(this,arguments)}function KP(n,e){return ZP.apply(this,arguments)}function ZP(){return ZP=(0,H.Z)(function*(n,e){const t=st(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const l=s.listeners.indexOf(e);l>=0&&(s.listeners.splice(l,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),ZP.apply(this,arguments)}function Q8(n,e){const t=st(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const h of l.listeners)h.Pu(i)&&(r=!0);l.Au=i}}r&&YP(t)}function X8(n,e,t){const r=st(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function YP(n){n.Ru.forEach(e=>{e.next()})}class QP{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new p_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||!(this.options.Nu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=p_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Vu=!0,this.vu.next(e)}}class J8{constructor(e,t){this.payload=e,this.byteLength=t}ku(){return"metadata"in this.payload}}class Aj{constructor(e){this.It=e}Ji(e){return xc(this.It,e)}Yi(e){return e.metadata.exists?IH(this.It,e.document,!1):Yn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Di(e)}}class e5{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Mj(e)}Ou(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=yn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Fu(e){const t=new Map,r=new Aj(this.It);for(const i of e)if(i.metadata.queries){const s=r.Ji(i.metadata.name);for(const l of i.metadata.queries){const h=(t.get(l)||Xt()).add(s);t.set(l,h)}}return t}complete(){var e=this;return(0,H.Z)(function*(){const t=yield function M8(n,e,t,r){return wP.apply(this,arguments)}(e.localStore,new Aj(e.It),e.documents,e.Mu.id),r=e.Fu(e.documents);for(const i of e.queries)yield x8(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,$u:e.collectionGroups,Bu:t}})()}}function Mj(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class xj{constructor(e){this.key=e}}class Rj{constructor(e){this.key=e}}class kj{constructor(e,t){this.query=e,this.Lu=t,this.Uu=null,this.current=!1,this.qu=Xt(),this.mutatedKeys=Xt(),this.Ku=Z2(e),this.Gu=new f_(this.Ku)}get Qu(){return this.Lu}ju(e,t){const r=t?t.Wu:new Tj,i=t?t.Gu:this.Gu;let s=t?t.mutatedKeys:this.mutatedKeys,l=i,h=!1;const p="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,_="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((w,D)=>{const M=i.get(w),P=nP(this.query,D)?D:null,F=!!M&&this.mutatedKeys.has(M.key),q=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let oe=!1;M&&P?M.data.isEqual(P.data)?F!==q&&(r.track({type:3,doc:P}),oe=!0):this.zu(M,P)||(r.track({type:2,doc:P}),oe=!0,(p&&this.Ku(P,p)>0||_&&this.Ku(P,_)<0)&&(h=!0)):!M&&P?(r.track({type:0,doc:P}),oe=!0):M&&!P&&(r.track({type:1,doc:M}),oe=!0,(p||_)&&(h=!0)),oe&&(P?(l=l.add(P),s=q?s.add(w):s.delete(w)):(l=l.delete(w),s=s.delete(w)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const w="F"===this.query.limitType?l.last():l.first();l=l.delete(w.key),s=s.delete(w.key),r.track({type:1,doc:w})}return{Gu:l,Wu:r,$i:h,mutatedKeys:s}}zu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const s=e.Wu.Eu();s.sort((_,w)=>function(D,M){const P=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return dt()}};return P(D)-P(M)}(_.type,w.type)||this.Ku(_.doc,w.doc)),this.Hu(r);const l=t?this.Ju():[],h=0===this.qu.size&&this.current?1:0,p=h!==this.Uu;return this.Uu=h,0!==s.length||p?{snapshot:new p_(this.query,e.Gu,i,s,e.mutatedKeys,0===h,p,!1),Yu:l}:{Yu:l}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new Tj,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}Xu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.qu;this.qu=Xt(),this.Gu.forEach(r=>{this.Xu(r.key)&&(this.qu=this.qu.add(r.key))});const t=[];return e.forEach(r=>{this.qu.has(r)||t.push(new Rj(r))}),this.qu.forEach(r=>{e.has(r)||t.push(new xj(r))}),t}Zu(e){this.Lu=e.Hi,this.qu=Xt();const t=this.ju(e.documents);return this.applyChanges(t,!0)}tc(){return p_.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.Uu)}}class t5{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class n5{constructor(e){this.key=e,this.ec=!1}}class r5{constructor(e,t,r,i,s,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=l,this.nc={},this.sc=new sh(h=>q2(h),Sw),this.ic=new Map,this.rc=new Set,this.oc=new Lr(tt.comparator),this.uc=new Map,this.cc=new pP,this.ac={},this.hc=new Map,this.lc=mp.vn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function s5(n,e){return XP.apply(this,arguments)}function XP(){return XP=(0,H.Z)(function*(n,e){const t=wN(n);let r,i;const s=t.sc.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.tc();else{const l=yield a_(t.localStore,eo(e));t.isPrimaryClient&&qS(t.remoteStore,l);const h=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield JP(t,e,r,"current"===h)}return i}),XP.apply(this,arguments)}function JP(n,e,t,r){return eN.apply(this,arguments)}function eN(){return eN=(0,H.Z)(function*(n,e,t,r){n.dc=(w,D,M)=>{return(P=(0,H.Z)(function*(F,q,oe,xe){let Ge=q.view.ju(oe);Ge.$i&&(Ge=yield $S(F.localStore,q.query,!1).then(({documents:Ct})=>q.view.ju(Ct,Ge)));const Xe=xe&&xe.targetChanges.get(q.targetId),Qe=q.view.applyChanges(Ge,F.isPrimaryClient,Xe);return uN(F,q.targetId,Qe.Yu),Qe.snapshot}),function(F,q,oe,xe){return P.apply(this,arguments)})(n,w,D,M);var P};const i=yield $S(n.localStore,e,!0),s=new kj(e,i.Hi),l=s.ju(i.documents),h=kw.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),p=s.applyChanges(l,n.isPrimaryClient,h);uN(n,t,p.Yu);const _=new t5(e,t,s);return n.sc.set(e,_),n.ic.has(t)?n.ic.get(t).push(e):n.ic.set(t,[e]),p.snapshot}),eN.apply(this,arguments)}function o5(n,e){return tN.apply(this,arguments)}function tN(){return tN=(0,H.Z)(function*(n,e){const t=st(n),r=t.sc.get(e),i=t.ic.get(r.targetId);if(i.length>1)return t.ic.set(r.targetId,i.filter(s=>!Sw(s,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield l_(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),qw(t.remoteStore,r.targetId),m_(t,r.targetId)}).catch(Xd))):(m_(t,r.targetId),yield l_(t.localStore,r.targetId,!0))}),tN.apply(this,arguments)}function nN(){return nN=(0,H.Z)(function*(n,e,t){const r=EN(n);try{const i=yield function(s,l){const h=st(s),p=hr.now(),_=l.reduce((M,P)=>M.add(P.key),Xt());let w,D;return h.persistence.runTransaction("Locally write mutations","readwrite",M=>{let P=to(),F=Xt();return h.Gi.getEntries(M,_).next(q=>{P=q,P.forEach((oe,xe)=>{xe.isValidDocument()||(F=F.add(oe))})}).next(()=>h.localDocuments.getOverlayedDocuments(M,P)).next(q=>{w=q;const oe=[];for(const xe of l){const Ge=gZ(xe,w.get(xe.key).overlayedDocument);null!=Ge&&oe.push(new ku(xe.key,Ge,V2(Ge.value.mapValue),fr.exists(!0)))}return h.mutationQueue.addMutationBatch(M,p,oe,l)}).next(q=>{D=q;const oe=q.applyToLocalDocumentSet(w,F);return h.documentOverlayCache.saveOverlays(M,q.batchId,oe)})}).then(()=>({batchId:D.batchId,changes:hH(w)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,l,h){let p=s.ac[s.currentUser.toKey()];p||(p=new Lr($t)),p=p.insert(l,h),s.ac[s.currentUser.toKey()]=p}(r,i.batchId,t),yield Ou(r,i.changes),yield u_(r.remoteStore)}catch(i){const s=h_(i,"Failed to persist write");t.reject(s)}}),nN.apply(this,arguments)}function Oj(n,e){return rN.apply(this,arguments)}function rN(){return rN=(0,H.Z)(function*(n,e){const t=st(n);try{const r=yield T8(t.localStore,e);e.targetChanges.forEach((i,s)=>{const l=t.uc.get(s);l&&(Lt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.ec=!0:i.modifiedDocuments.size>0?Lt(l.ec):i.removedDocuments.size>0&&(Lt(l.ec),l.ec=!1))}),yield Ou(t,r,e)}catch(r){yield Xd(r)}}),rN.apply(this,arguments)}function Pj(n,e,t){const r=st(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.sc.forEach((s,l)=>{const h=l.view.bu(e);h.snapshot&&i.push(h.snapshot)}),function(s,l){const h=st(s);h.onlineState=l;let p=!1;h.queries.forEach((_,w)=>{for(const D of w.listeners)D.bu(l)&&(p=!0)}),p&&YP(h)}(r.eventManager,e),i.length&&r.nc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function l5(n,e,t){return iN.apply(this,arguments)}function iN(){return iN=(0,H.Z)(function*(n,e,t){const r=st(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.uc.get(e),s=i&&i.key;if(s){let l=new Lr(tt.comparator);l=l.insert(s,Yn.newNoDocument(s,Ot.min()));const h=Xt().add(s),p=new Rw(Ot.min(),new Map,new Ln($t),l,h);yield Oj(r,p),r.oc=r.oc.remove(s),r.uc.delete(e),dN(r)}else yield l_(r.localStore,e,!1).then(()=>m_(r,e,t)).catch(Xd)}),iN.apply(this,arguments)}function c5(n,e){return sN.apply(this,arguments)}function sN(){return sN=(0,H.Z)(function*(n,e){const t=st(n),r=e.batch.batchId;try{const i=yield S8(t.localStore,e);cN(t,r,null),lN(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ou(t,i)}catch(i){yield Xd(i)}}),sN.apply(this,arguments)}function u5(n,e,t){return oN.apply(this,arguments)}function oN(){return oN=(0,H.Z)(function*(n,e,t){const r=st(n);try{const i=yield function(s,l){const h=st(s);return h.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let _;return h.mutationQueue.lookupMutationBatch(p,l).next(w=>(Lt(null!==w),_=w.keys(),h.mutationQueue.removeMutationBatch(p,w))).next(()=>h.mutationQueue.performConsistencyCheck(p)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(p,_,l)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_)).next(()=>h.localDocuments.getDocuments(p,_))})}(r.localStore,e);cN(r,e,t),lN(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ou(r,i)}catch(i){yield Xd(i)}}),oN.apply(this,arguments)}function aN(){return aN=(0,H.Z)(function*(n,e){const t=st(n);ch(t.remoteStore)||je("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const l=st(s);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>l.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.hc.get(r)||[];i.push(e),t.hc.set(r,i)}catch(r){const i=h_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),aN.apply(this,arguments)}function lN(n,e){(n.hc.get(e)||[]).forEach(t=>{t.resolve()}),n.hc.delete(e)}function cN(n,e,t){const r=st(n);let i=r.ac[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.ac[r.currentUser.toKey()]=i}}function m_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ic.get(e))n.sc.delete(r),t&&n.nc._c(r,t);n.ic.delete(e),n.isPrimaryClient&&n.cc.ls(e).forEach(r=>{n.cc.containsKey(r)||Nj(n,r)})}function Nj(n,e){n.rc.delete(e.path.canonicalString());const t=n.oc.get(e);null!==t&&(qw(n.remoteStore,t),n.oc=n.oc.remove(e),n.uc.delete(t),dN(n))}function uN(n,e,t){for(const r of t)r instanceof xj?(n.cc.addReference(r.key,e),h5(n,r)):r instanceof Rj?(je("SyncEngine","Document no longer in limbo: "+r.key),n.cc.removeReference(r.key,e),n.cc.containsKey(r.key)||Nj(n,r.key)):dt()}function h5(n,e){const t=e.key,r=t.path.canonicalString();n.oc.get(t)||n.rc.has(r)||(je("SyncEngine","New document in limbo: "+t),n.rc.add(r),dN(n))}function dN(n){for(;n.rc.size>0&&n.oc.size<n.maxConcurrentLimboResolutions;){const e=n.rc.values().next().value;n.rc.delete(e);const t=new tt(yn.fromString(e)),r=n.lc.next();n.uc.set(r,new n5(t)),n.oc=n.oc.insert(t,r),qS(n.remoteStore,new oh(eo(Qg(t.path)),r,2,Js.at))}}function Ou(n,e,t){return hN.apply(this,arguments)}function hN(){return hN=(0,H.Z)(function*(n,e,t){const r=st(n),i=[],s=[],l=[];var h;r.sc.isEmpty()||(r.sc.forEach((h,p)=>{l.push(r.dc(p,e,t).then(_=>{if(_){r.isPrimaryClient&&r.sharedClientState.updateQueryState(p.targetId,_.fromCache?"not-current":"current"),i.push(_);const w=yP.Ci(p.targetId,_);s.push(w)}}))}),yield Promise.all(l),r.nc.Wo(i),yield(h=(0,H.Z)(function*(p,_){const w=st(p);try{yield w.persistence.runTransaction("notifyLocalViewChanges","readwrite",D=>me.forEach(_,M=>me.forEach(M.Si,P=>w.persistence.referenceDelegate.addReference(D,M.targetId,P)).next(()=>me.forEach(M.Di,P=>w.persistence.referenceDelegate.removeReference(D,M.targetId,P)))))}catch(D){if(!Jd(D))throw D;je("LocalStore","Failed to update sequence numbers: "+D)}for(const D of _){const M=D.targetId;if(!D.fromCache){const P=w.Ui.get(M),q=P.withLastLimboFreeSnapshotVersion(P.snapshotVersion);w.Ui=w.Ui.insert(M,q)}}}),function(p,_){return h.apply(this,arguments)})(r.localStore,s))}),hN.apply(this,arguments)}function f5(n,e){return fN.apply(this,arguments)}function fN(){return fN=(0,H.Z)(function*(n,e){const t=st(n);if(!t.currentUser.isEqual(e)){je("SyncEngine","User change. New user:",e.toKey());const r=yield cj(t.localStore,e);t.currentUser=e,(i=t).hc.forEach(l=>{l.forEach(h=>{h.reject(new Be(be.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.hc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ou(t,r.ji)}var i}),fN.apply(this,arguments)}function p5(n,e){const t=st(n),r=t.uc.get(e);if(r&&r.ec)return Xt().add(r.key);{let i=Xt();const s=t.ic.get(e);if(!s)return i;for(const l of s){const h=t.sc.get(l);i=i.unionWith(h.view.Qu)}return i}}function m5(n,e){return pN.apply(this,arguments)}function pN(){return pN=(0,H.Z)(function*(n,e){const t=st(n),r=yield $S(t.localStore,e.query,!0),i=e.view.Zu(r);return t.isPrimaryClient&&uN(t,e.targetId,i.Yu),i}),pN.apply(this,arguments)}function g5(n,e){return mN.apply(this,arguments)}function mN(){return mN=(0,H.Z)(function*(n,e){const t=st(n);return fj(t.localStore,e).then(r=>Ou(t,r))}),mN.apply(this,arguments)}function _5(n,e,t,r){return gN.apply(this,arguments)}function gN(){return gN=(0,H.Z)(function*(n,e,t,r){const i=st(n),s=yield function(l,h){const p=st(l),_=st(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",w=>_.Tn(w,h).next(D=>D?p.localDocuments.getDocuments(w,D):me.resolve(null)))}(i.localStore,e);var h;null!==s?("pending"===t?yield u_(i.remoteStore):"acknowledged"===t||"rejected"===t?(cN(i,e,r||null),lN(i,e),h=e,st(st(i.localStore).mutationQueue).An(h)):dt(),yield Ou(i,s)):je("SyncEngine","Cannot apply mutation batch with id: "+e)}),gN.apply(this,arguments)}function _N(){return _N=(0,H.Z)(function*(n,e){const t=st(n);if(wN(t),EN(t),!0===e&&!0!==t.fc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield Fj(t,r.toArray());t.fc=!0,yield $P(t.remoteStore,!0);for(const s of i)qS(t.remoteStore,s)}else if(!1===e&&!1!==t.fc){const r=[];let i=Promise.resolve();t.ic.forEach((s,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(m_(t,l),l_(t.localStore,l,!0))),qw(t.remoteStore,l)}),yield i,yield Fj(t,r),function(s){const l=st(s);l.uc.forEach((h,p)=>{qw(l.remoteStore,p)}),l.cc.fs(),l.uc=new Map,l.oc=new Lr(tt.comparator)}(t),t.fc=!1,yield $P(t.remoteStore,!1)}}),_N.apply(this,arguments)}function Fj(n,e,t){return yN.apply(this,arguments)}function yN(){return yN=(0,H.Z)(function*(n,e,t){const r=st(n),i=[],s=[];for(const l of e){let h;const p=r.ic.get(l);if(p&&0!==p.length){h=yield a_(r.localStore,eo(p[0]));for(const _ of p){const w=r.sc.get(_),D=yield m5(r,w);D.snapshot&&s.push(D.snapshot)}}else{const _=yield hj(r.localStore,l);h=yield a_(r.localStore,_),yield JP(r,Lj(_),l,!1)}i.push(h)}return r.nc.Wo(s),i}),yN.apply(this,arguments)}function Lj(n){return z2(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function v5(n){const e=st(n);return st(st(e.localStore).persistence).vi()}function b5(n,e,t,r){return vN.apply(this,arguments)}function vN(){return vN=(0,H.Z)(function*(n,e,t,r){const i=st(n);if(i.fc)return void je("SyncEngine","Ignoring unexpected query state notification.");const s=i.ic.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const l=yield fj(i.localStore,K2(s[0])),h=Rw.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Ou(i,l,h);break}case"rejected":yield l_(i.localStore,e,!0),m_(i,e,r);break;default:dt()}}),vN.apply(this,arguments)}function w5(n,e,t){return bN.apply(this,arguments)}function bN(){return bN=(0,H.Z)(function*(n,e,t){const r=wN(n);if(r.fc){for(const i of e){if(r.ic.has(i)){je("SyncEngine","Adding an already active target "+i);continue}const s=yield hj(r.localStore,i),l=yield a_(r.localStore,s);yield JP(r,Lj(s),l.targetId,!1),qS(r.remoteStore,l)}for(const i of t)r.ic.has(i)&&(yield l_(r.localStore,i,!1).then(()=>{qw(r.remoteStore,i),m_(r,i)}).catch(Xd))}}),bN.apply(this,arguments)}function wN(n){const e=st(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Oj.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=p5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=l5.bind(null,e),e.nc.Wo=Q8.bind(null,e.eventManager),e.nc._c=X8.bind(null,e.eventManager),e}function EN(n){const e=st(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=c5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=u5.bind(null,e),e}class Vj{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,H.Z)(function*(){t.It=zw(e.databaseInfo.databaseId),t.sharedClientState=t.mc(e),t.persistence=t.gc(e),yield t.persistence.start(),t.localStore=t.yc(e),t.gcScheduler=t.Ic(e,t.localStore),t.indexBackfillerScheduler=t.Tc(e,t.localStore)})()}Ic(e,t){return null}Tc(e,t){return null}yc(e){return lj(this.persistence,new aj,e.initialUser,this.It)}gc(e){return new sj(HS.Bs,this.It)}mc(e){return new _j}terminate(){var e=this;return(0,H.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Bj extends Vj{constructor(e,t,r){super(),this.Ec=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,H.Z)(function*(){yield t().call(r,e),yield r.Ec.initialize(r,e),yield EN(r.Ec.syncEngine),yield u_(r.Ec.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}yc(e){return lj(this.persistence,new aj,e.initialUser,this.It)}Ic(e,t){return new d8(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Tc(e,t){const r=new KK(t,this.persistence);return new qK(e.asyncQueue,r)}gc(e){const t=_P(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?no.withCacheSize(this.cacheSizeBytes):no.DEFAULT;return new gP(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,vj(),WS(),this.It,this.sharedClientState,!!this.forceOwnership)}mc(e){return new _j}}class C5 extends Bj{constructor(e,t){super(e,t,!1),this.Ec=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,H.Z)(function*(){yield t().call(r,e);const i=r.Ec.syncEngine;r.sharedClientState instanceof SP&&(r.sharedClientState.syncEngine={Fr:_5.bind(null,i),$r:b5.bind(null,i),Br:w5.bind(null,i),vi:v5.bind(null,i),Or:g5.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var s=(0,H.Z)(function*(l){yield function y5(n,e){return _N.apply(this,arguments)}(r.Ec.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return s.apply(this,arguments)}}())})()}mc(e){const t=vj();if(!SP.C(t))throw new Be(be.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=_P(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new SP(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class CN{initialize(e,t){var r=this;return(0,H.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>Pj(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=f5.bind(null,r.syncEngine),yield $P(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Y8}createDatastore(e){const t=zw(e.databaseInfo.databaseId),r=new P8(e.databaseInfo);return new L8(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,s=h=>Pj(this.syncEngine,h,0),l=yj.C()?new yj:new R8,new B8(t,r,i,s,l);var t,r,i,s,l}createSyncEngine(e,t){return function(r,i,s,l,h,p,_){const w=new r5(r,i,s,l,h,p);return _&&(w.fc=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,H.Z)(function*(t){const r=st(t);je("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield c_(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Uj(n,e=10240){let t=0;return{read:()=>(0,H.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,H.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class ZS{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ac(this.observer.next,e)}error(e){this.observer.error?this.Ac(this.observer.error,e):Gr("Uncaught Error in snapshot listener:",e)}Rc(){this.muted=!0}Ac(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class I5{constructor(e,t){this.bc=e,this.It=t,this.metadata=new Ii,this.buffer=new Uint8Array,this.Pc=new TextDecoder("utf-8"),this.vc().then(r=>{r&&r.ku()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.bc.cancel()}getMetadata(){var e=this;return(0,H.Z)(function*(){return e.metadata.promise})()}wc(){var e=this;return(0,H.Z)(function*(){return yield e.getMetadata(),e.vc()})()}vc(){var e=this;return(0,H.Z)(function*(){const t=yield e.Vc();if(null===t)return null;const r=e.Pc.decode(t),i=Number(r);isNaN(i)&&e.Sc(`length string (${r}) is not valid number`);const s=yield e.Dc(i);return new J8(JSON.parse(s),t.length+i)})()}Cc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Vc(){var e=this;return(0,H.Z)(function*(){for(;e.Cc()<0&&!(yield e.xc()););if(0===e.buffer.length)return null;const t=e.Cc();t<0&&e.Sc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Dc(e){var t=this;return(0,H.Z)(function*(){for(;t.buffer.length<e;)(yield t.xc())&&t.Sc("Reached the end of bundle when more is expected.");const r=t.Pc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Sc(e){throw this.bc.cancel(),new Error(`Invalid bundle format: ${e}`)}xc(){var e=this;return(0,H.Z)(function*(){const t=yield e.bc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class D5{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,H.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Be(be.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,H.Z)(function*(s,l){const h=st(s),p=Nw(h.It)+"/documents",_={documents:l.map(P=>Pw(h.It,P))},w=yield h.fo("BatchGetDocuments",p,_,l.length),D=new Map;w.forEach(P=>{const F=function TZ(n,e){return"found"in e?function(t,r){Lt(!!r.found);const i=xc(t,r.found.name),s=Di(r.found.updateTime),l=new $i({mapValue:{fields:r.found.fields}});return Yn.newFoundDocument(i,s,l)}(n,e):"missing"in e?function(t,r){Lt(!!r.missing),Lt(!!r.readTime);const i=xc(t,r.missing),s=Di(r.readTime);return Yn.newNoDocument(i,s)}(n,e):dt()}(h.It,P);D.set(F.key.toString(),F)});const M=[];return l.forEach(P=>{const F=D.get(P.toString());Lt(!!F),M.push(F)}),M}),function(s,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new n_(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,H.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=tt.fromPath(i);e.mutations.push(new rP(s,e.precondition(s)))}),yield(r=(0,H.Z)(function*(i,s){const l=st(i),h=Nw(l.It)+"/documents",p={writes:s.map(_=>Fw(l.It,_))};yield l.co("Commit",h,p)}),function(i,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw dt();t=Ot.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Be(be.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ot.min())?fr.exists(!1):fr.updateTime(t):fr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ot.min()))throw new Be(be.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return fr.updateTime(t)}return fr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class S5{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.Nc=r.maxAttempts,this.xo=new TP(this.asyncQueue,"transaction_retry")}run(){this.Nc-=1,this.kc()}kc(){var e=this;this.xo.Ao((0,H.Z)(function*(){const t=new D5(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.Oc(s)}))}).catch(i=>{e.Oc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!bw(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Oc(e){this.Nc>0&&this.Fc(e)?(this.Nc-=1,this.asyncQueue.enqueueAndForget(()=>(this.kc(),Promise.resolve()))):this.deferred.reject(e)}Fc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!cH(t)}return!1}}class T5{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ci.UNAUTHENTICATED,this.clientId=b2.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,H.Z)(function*(h){je("FirestoreClient","Received user=",h.uid),yield s.authCredentialListener(h),s.user=h});return function(h){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(je("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,H.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Be(be.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ii;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,H.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=h_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function Hj(n,e){return IN.apply(this,arguments)}function IN(){return IN=(0,H.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),je("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,H.Z)(function*(s){r.isEqual(s)||(yield cj(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),IN.apply(this,arguments)}function jj(n,e){return DN.apply(this,arguments)}function DN(){return DN=(0,H.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield SN(n);je("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>Sj(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>Sj(e.remoteStore,s)),n.onlineComponents=e}),DN.apply(this,arguments)}function SN(n){return TN.apply(this,arguments)}function TN(){return TN=(0,H.Z)(function*(n){return n.offlineComponents||(je("FirestoreClient","Using default OfflineComponentProvider"),yield Hj(n,new Vj)),n.offlineComponents}),TN.apply(this,arguments)}function YS(n){return AN.apply(this,arguments)}function AN(){return AN=(0,H.Z)(function*(n){return n.onlineComponents||(je("FirestoreClient","Using default OnlineComponentProvider"),yield jj(n,new CN)),n.onlineComponents}),AN.apply(this,arguments)}function $j(n){return SN(n).then(e=>e.persistence)}function QS(n){return SN(n).then(e=>e.localStore)}function Gj(n){return YS(n).then(e=>e.remoteStore)}function MN(n){return YS(n).then(e=>e.syncEngine)}function g_(n){return xN.apply(this,arguments)}function xN(){return xN=(0,H.Z)(function*(n){const e=yield YS(n),t=e.eventManager;return t.onListen=s5.bind(null,e.syncEngine),t.onUnlisten=o5.bind(null,e.syncEngine),t}),xN.apply(this,arguments)}function zj(n,e,t={}){const r=new Ii;return n.asyncQueue.enqueueAndForget((0,H.Z)(function*(){return function(i,s,l,h,p){const _=new ZS({next:D=>{s.enqueueAndForget(()=>KP(i,w));const M=D.docs.has(l);!M&&D.fromCache?p.reject(new Be(be.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&D.fromCache&&h&&"server"===h.source?p.reject(new Be(be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(D)},error:D=>p.reject(D)}),w=new QP(Qg(l.path),_,{includeMetadataChanges:!0,Nu:!0});return WP(i,w)}(yield g_(n),n.asyncQueue,e,t,r)})),r.promise}function Wj(n,e,t={}){const r=new Ii;return n.asyncQueue.enqueueAndForget((0,H.Z)(function*(){return function(i,s,l,h,p){const _=new ZS({next:D=>{s.enqueueAndForget(()=>KP(i,w)),D.fromCache&&"server"===h.source?p.reject(new Be(be.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(D)},error:D=>p.reject(D)}),w=new QP(l,_,{includeMetadataChanges:!0,Nu:!0});return WP(i,w)}(yield g_(n),n.asyncQueue,e,t,r)})),r.promise}const qj=new Map;function RN(n,e,t){if(!t)throw new Be(be.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Kj(n,e,t,r){if(!0===e&&!0===r)throw new Be(be.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Zj(n){if(!tt.isDocumentKey(n))throw new Be(be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Yj(n){if(tt.isDocumentKey(n))throw new Be(be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function XS(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":dt()}function mn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Be(be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=XS(n);throw new Be(be.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Qj(n,e){if(e<=0)throw new Be(be.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class Xj{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Be(be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Be(be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Kj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Kw{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xj({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Be(be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Be(be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xj(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new NK;switch(t.type){case"gapi":return new BK(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Be(be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=qj.get(e);t&&(je("ComponentProvider","Removing Datastore"),qj.delete(e),t.terminate())}(this),Promise.resolve()}}class or{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new kc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new or(this.firestore,e,this._key)}}class as{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new as(this.firestore,e,this._query)}}class kc extends as{constructor(e,t,r){super(e,t,Qg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new or(this.firestore,null,new tt(e))}withConverter(e){return new kc(this.firestore,e,this._path)}}function Jj(n,e,...t){if(n=(0,k.m9)(n),RN("collection","path",e),n instanceof Kw){const r=yn.fromString(e,...t);return Yj(r),new kc(n,null,r)}{if(!(n instanceof or||n instanceof kc))throw new Be(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(yn.fromString(e,...t));return Yj(r),new kc(n.firestore,null,r)}}function JS(n,e,...t){if(n=(0,k.m9)(n),1===arguments.length&&(e=b2.R()),RN("doc","path",e),n instanceof Kw){const r=yn.fromString(e,...t);return Zj(r),new or(n,null,new tt(r))}{if(!(n instanceof or||n instanceof kc))throw new Be(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(yn.fromString(e,...t));return Zj(r),new or(n.firestore,n instanceof kc?n.converter:null,new tt(r))}}function e$(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),(n instanceof or||n instanceof kc)&&(e instanceof or||e instanceof kc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function t$(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),n instanceof as&&e instanceof as&&n.firestore===e.firestore&&Sw(n._query,e._query)&&n.converter===e.converter}class V5{constructor(){this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new TP(this,"async_queue_retry"),this.jc=()=>{const t=WS();t&&je("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.bo()};const e=WS();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.jc)}get isShuttingDown(){return this.Lc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Wc(),this.zc(e)}enterRestrictedMode(e){if(!this.Lc){this.Lc=!0,this.Gc=e||!1;const t=WS();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.jc)}}enqueue(e){if(this.Wc(),this.Lc)return new Promise(()=>{});const t=new Ii;return this.zc(()=>this.Lc&&this.Gc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Bc.push(e),this.Hc()))}Hc(){var e=this;return(0,H.Z)(function*(){if(0!==e.Bc.length){try{yield e.Bc[0](),e.Bc.shift(),e.xo.reset()}catch(t){if(!Jd(t))throw t;je("AsyncQueue","Operation failed with retryable error: "+t)}e.Bc.length>0&&e.xo.Ao(()=>e.Hc())}})()}zc(e){const t=this.$c.then(()=>(this.Kc=!0,e().catch(r=>{throw this.qc=r,this.Kc=!1,Gr("INTERNAL UNHANDLED ERROR: ",function(s){let l=s.message||"";return s.stack&&(l=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),l}(r)),r}).then(r=>(this.Kc=!1,r))));return this.$c=t,t}enqueueAfterDelay(e,t,r){this.Wc(),this.Qc.indexOf(e)>-1&&(t=0);const i=zP.createAndSchedule(this,e,t,r,s=>this.Jc(s));return this.Uc.push(i),i}Wc(){this.qc&&dt()}verifyOperationInProgress(){}Yc(){var e=this;return(0,H.Z)(function*(){let t;do{t=e.$c,yield t}while(t!==e.$c)})()}Xc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}Zc(e){return this.Yc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Yc()})}ta(e){this.Qc.push(e)}Jc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function kN(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class B5{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ii,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class pr extends Kw{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new V5,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||n$(this),this._firestoreClient.terminate()}}function Qr(n){return n._firestoreClient||n$(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function n$(n){var e;const t=n._freezeSettings(),r=(s=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new QK(n._databaseId,s,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var s,h;n._firestoreClient=new T5(n._authCredentials,n._appCheckCredentials,n._queue,r)}function r$(n,e,t){const r=new Ii;return n.asyncQueue.enqueue((0,H.Z)(function*(){try{yield Hj(n,t),yield jj(n,e),r.resolve()}catch(i){const s=i;if(!("FirebaseError"===(l=s).name?l.code===be.FAILED_PRECONDITION||l.code===be.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw s;Jf("Error enabling offline persistence. Falling back to persistence disabled: "+s),r.reject(s)}var l})).then(()=>r.promise)}function i$(n){if(n._initialized||n._terminated)throw new Be(be.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Pu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Be(be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Oc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Oc(ui.fromBase64String(e))}catch(t){throw new Be(be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Oc(ui.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class _p{constructor(e){this._methodName=e}}class eT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Be(be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Be(be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return $t(this._lat,e._lat)||$t(this._long,e._long)}}const Z5=/^__.*__$/;class Y5{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ku(e,this.data,this.fieldMask,t,this.fieldTransforms):new t_(e,this.data,t,this.fieldTransforms)}}class s${constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ku(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function o$(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw dt()}}class tT{constructor(e,t,r,i,s,l){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=i,void 0===s&&this.ea(),this.fieldTransforms=s||[],this.fieldMask=l||[]}get path(){return this.settings.path}get na(){return this.settings.na}sa(e){return new tT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.sa({path:r,ra:!1});return i.oa(e),i}ua(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.sa({path:r,ra:!1});return i.ea(),i}ca(e){return this.sa({path:void 0,ra:!0})}aa(e){return iT(e,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ea(){if(this.path)for(let e=0;e<this.path.length;e++)this.oa(this.path.get(e))}oa(e){if(0===e.length)throw this.aa("Document fields must not be empty");if(o$(this.na)&&Z5.test(e))throw this.aa('Document fields cannot begin and end with "__"')}}class Q5{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||zw(e)}fa(e,t,r,i=!1){return new tT({na:e,methodName:t,la:r,path:Fr.emptyPath(),ra:!1,ha:i},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function yp(n){const e=n._freezeSettings(),t=zw(n._databaseId);return new Q5(n._databaseId,!!e.ignoreUndefinedProperties,t)}function nT(n,e,t,r,i,s={}){const l=n.fa(s.merge||s.mergeFields?2:0,e,t,i);FN("Data must be an object, but it was:",l,r);const h=c$(r,l);let p,_;if(s.merge)p=new Ho(l.fieldMask),_=l.fieldTransforms;else if(s.mergeFields){const w=[];for(const D of s.mergeFields){const M=LN(e,D,t);if(!l.contains(M))throw new Be(be.INVALID_ARGUMENT,`Field '${M}' is specified in your field mask but missing from your input data.`);d$(w,M)||w.push(M)}p=new Ho(w),_=l.fieldTransforms.filter(D=>p.covers(D.field))}else p=null,_=l.fieldTransforms;return new Y5(new $i(h),p,_)}class Zw extends _p{_toFieldTransform(e){if(2!==e.na)throw e.aa(1===e.na?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Zw}}function a$(n,e,t){return new tT({na:3,la:e.settings.la,methodName:n._methodName,ra:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class ON extends _p{_toFieldTransform(e){return new Tw(e.path,new Jg)}isEqual(e){return e instanceof ON}}class X5 extends _p{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=a$(this,e,!0),r=this.da.map(s=>vp(s,t)),i=new ap(r);return new Tw(e.path,i)}isEqual(e){return this===e}}class J5 extends _p{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=a$(this,e,!0),r=this.da.map(s=>vp(s,t)),i=new lp(r);return new Tw(e.path,i)}isEqual(e){return this===e}}class eY extends _p{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=new e_(e.It,X2(e.It,this._a));return new Tw(e.path,t)}isEqual(e){return this===e}}function PN(n,e,t,r){const i=n.fa(1,e,t);FN("Data must be an object, but it was:",i,r);const s=[],l=$i.empty();np(r,(p,_)=>{const w=rT(e,p,t);_=(0,k.m9)(_);const D=i.ua(w);if(_ instanceof Zw)s.push(w);else{const M=vp(_,D);null!=M&&(s.push(w),l.set(w,M))}});const h=new Ho(s);return new s$(l,h,i.fieldTransforms)}function NN(n,e,t,r,i,s){const l=n.fa(1,e,t),h=[LN(e,r,t)],p=[i];if(s.length%2!=0)throw new Be(be.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let M=0;M<s.length;M+=2)h.push(LN(e,s[M])),p.push(s[M+1]);const _=[],w=$i.empty();for(let M=h.length-1;M>=0;--M)if(!d$(_,h[M])){const P=h[M];let F=p[M];F=(0,k.m9)(F);const q=l.ua(P);if(F instanceof Zw)_.push(P);else{const oe=vp(F,q);null!=oe&&(_.push(P),w.set(P,oe))}}const D=new Ho(_);return new s$(w,D,l.fieldTransforms)}function l$(n,e,t,r=!1){return vp(t,n.fa(r?4:3,e))}function vp(n,e){if(u$(n=(0,k.m9)(n)))return FN("Unsupported field value:",e,n),c$(n,e);if(n instanceof _p)return function(t,r){if(!o$(r.na))throw r.aa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.aa(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ra&&4!==e.na)throw e.aa("Nested arrays are not supported");return function(t,r){const i=[];let s=0;for(const l of t){let h=vp(l,r.ca(s));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),s++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,k.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return X2(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=hr.fromDate(t);return{timestampValue:Ow(r.It,i)}}if(t instanceof hr){const i=new hr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ow(r.It,i)}}if(t instanceof eT)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Oc)return{bytesValue:vH(r.It,t._byteString)};if(t instanceof or){const i=r.databaseId,s=t.firestore._databaseId;if(!s.isEqual(i))throw r.aa(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:iP(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.aa(`Unsupported field value: ${XS(t)}`)}(n,e)}function c$(n,e){const t={};return A2(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):np(n,(r,i)=>{const s=vp(i,e.ia(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function u$(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof hr||n instanceof eT||n instanceof Oc||n instanceof or||n instanceof _p)}function FN(n,e,t){if(!u$(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=XS(t);throw e.aa("an object"===r?n+" a custom object":n+" "+r)}var r}function LN(n,e,t){if((e=(0,k.m9)(e))instanceof Pu)return e._internalPath;if("string"==typeof e)return rT(n,e);throw iT("Field path arguments must be of type string or ",n,!1,void 0,t)}const tY=new RegExp("[~\\*/\\[\\]]");function rT(n,e,t){if(e.search(tY)>=0)throw iT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Pu(...e.split("."))._internalPath}catch{throw iT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function iT(n,e,t,r,i){const s=r&&!r.isEmpty(),l=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(s||l)&&(p+=" (found",s&&(p+=` in field ${r}`),l&&(p+=` in document ${i}`),p+=")"),new Be(be.INVALID_ARGUMENT,h+n+p)}function d$(n,e){return n.some(t=>t.isEqual(e))}class Yw{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new or(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new nY(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(sT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class nY extends Yw{data(){return super.data()}}function sT(n,e){return"string"==typeof e?rT(n,e):e instanceof Pu?e._internalPath:e._delegate._internalPath}class bp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Nu extends Yw{constructor(e,t,r,i,s,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Qw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(sT("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Qw extends Nu{data(e={}){return super.data(e)}}class dh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new bp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Qw(this._firestore,this._userDataWriter,r.key,r,new bp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Be(be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new Qw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new bp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const h=new Qw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new bp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,_=-1;return 0!==l.type&&(p=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),1!==l.type&&(s=s.add(l.doc),_=s.indexOf(l.doc.key)),{type:rY(l.type),doc:h,oldIndex:p,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function rY(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return dt()}}function h$(n,e){return n instanceof Nu&&e instanceof Nu?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof dh&&e instanceof dh&&n._firestore===e._firestore&&t$(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function f$(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Be(be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Xw{}function hh(n,...e){for(const t of e)n=t._apply(n);return n}class iY extends Xw{constructor(e,t,r){super(),this.wa=e,this.ma=t,this.ga=r,this.type="where"}_apply(e){const t=yp(e.firestore),r=function(i,s,l,h,p,_,w){let D;if(p.isKeyField()){if("array-contains"===_||"array-contains-any"===_)throw new Be(be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if("in"===_||"not-in"===_){v$(w,_);const P=[];for(const F of w)P.push(y$(h,i,F));D={arrayValue:{values:P}}}else D=y$(h,i,w)}else"in"!==_&&"not-in"!==_&&"array-contains-any"!==_||v$(w,_),D=l$(l,"where",w,"in"===_||"not-in"===_);const M=Gi.create(p,_,D);return function(P,F){if(F.dt()){const oe=JO(P);if(null!==oe&&!oe.isEqual(F.field))throw new Be(be.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${oe.toString()}' and '${F.field.toString()}'`);const xe=XO(P);null!==xe&&b$(0,F.field,xe)}const q=function(oe,xe){for(const Ge of oe.filters)if(xe.indexOf(Ge.op)>=0)return Ge.op;return null}(P,function(oe){switch(oe){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(F.op));if(null!==q)throw new Be(be.INVALID_ARGUMENT,q===F.op?`Invalid query. You cannot use more than one '${F.op.toString()}' filter.`:`Invalid query. You cannot use '${F.op.toString()}' filters with '${q.toString()}' filters.`)}(i,M),M}(e._query,0,t,e.firestore._databaseId,this.wa,this.ma,this.ga);return new as(e.firestore,e.converter,function(i,s){const l=i.filters.concat([s]);return new Ru(i.path,i.collectionGroup,i.explicitOrderBy.slice(),l,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class oY extends Xw{constructor(e,t){super(),this.wa=e,this.ya=t,this.type="orderBy"}_apply(e){const t=function(r,i,s){if(null!==r.startAt)throw new Be(be.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Be(be.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Yg(i,s);return function(h,p){if(null===XO(h)){const _=JO(h);null!==_&&b$(0,_,p.field)}}(r,l),l}(e._query,this.wa,this.ya);return new as(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new Ru(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class p$ extends Xw{constructor(e,t,r){super(),this.type=e,this.pa=t,this.Ia=r}_apply(e){return new as(e.firestore,e.converter,TS(e._query,this.pa,this.Ia))}}class m$ extends Xw{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=_$(e,this.type,this.Ta,this.Ea);return new as(e.firestore,e.converter,(i=t,new Ru((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class g$ extends Xw{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=_$(e,this.type,this.Ta,this.Ea);return new as(e.firestore,e.converter,(i=t,new Ru((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function _$(n,e,t,r){if(t[0]=(0,k.m9)(t[0]),t[0]instanceof Yw)return function(i,s,l,h,p){if(!h)throw new Be(be.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const _=[];for(const w of Xg(i))if(w.field.isKeyField())_.push(sp(s,h.key));else{const D=h.data.field(w.field);if(ZO(D))throw new Be(be.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+w.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===D){const M=w.field.canonicalString();throw new Be(be.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${M}' (used as the orderBy) does not exist.`)}_.push(D)}return new ih(_,p)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=yp(n.firestore);return function(s,l,h,p,_,w){const D=s.explicitOrderBy;if(_.length>D.length)throw new Be(be.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const M=[];for(let P=0;P<_.length;P++){const F=_[P];if(D[P].field.isKeyField()){if("string"!=typeof F)throw new Be(be.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof F}`);if(!eP(s)&&-1!==F.indexOf("/"))throw new Be(be.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${F}' contains a slash.`);const q=s.path.child(yn.fromString(F));if(!tt.isDocumentKey(q))throw new Be(be.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${q}' is not because it contains an odd number of segments.`);const oe=new tt(q);M.push(sp(l,oe))}else{const q=l$(h,p,F);M.push(q)}}return new ih(M,w)}(n._query,n.firestore._databaseId,i,e,t,r)}}function y$(n,e,t){if("string"==typeof(t=(0,k.m9)(t))){if(""===t)throw new Be(be.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!eP(e)&&-1!==t.indexOf("/"))throw new Be(be.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(yn.fromString(t));if(!tt.isDocumentKey(r))throw new Be(be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return sp(n,new tt(r))}if(t instanceof or)return sp(n,t._key);throw new Be(be.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${XS(t)}.`)}function v$(n,e){if(!Array.isArray(n)||0===n.length)throw new Be(be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Be(be.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function b$(n,e,t){if(!t.isEqual(e))throw new Be(be.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const pY={maxAttempts:5};class VN{convertValue(e,t="none"){switch(ip(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(rp(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw dt()}}convertObject(e,t){const r={};return np(e.fields,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new eT(Vr(e.latitude),Vr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=x2(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(vw(e));default:return null}}convertTimestamp(e){const t=eh(e);return new hr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=yn.fromString(e);Lt(MH(r));const i=new th(r.get(1),r.get(3)),s=new tt(r.popFirst(5));return i.isEqual(t)||Gr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function oT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class mY extends VN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Oc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new or(this.firestore,null,t)}}class w${constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=yp(e)}set(e,t,r){this._verifyNotCommitted();const i=fh(e,this._firestore),s=oT(i.converter,t,r),l=nT(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,fr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=fh(e,this._firestore);let l;return l="string"==typeof(t=(0,k.m9)(t))||t instanceof Pu?NN(this._dataReader,"WriteBatch.update",s._key,t,r,i):PN(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(l.toMutation(s._key,fr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=fh(e,this._firestore);return this._mutations=this._mutations.concat(new n_(t._key,fr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Be(be.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function fh(n,e){if((n=(0,k.m9)(n)).firestore!==e)throw new Be(be.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class wp extends VN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Oc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new or(this.firestore,null,t)}}function E$(n,e,t){n=mn(n,or);const r=mn(n.firestore,pr),i=oT(n.converter,e,t);return __(r,[nT(yp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,fr.none())])}function C$(n,e,t,...r){n=mn(n,or);const i=mn(n.firestore,pr),s=yp(i);let l;return l="string"==typeof(e=(0,k.m9)(e))||e instanceof Pu?NN(s,"updateDoc",n._key,e,t,r):PN(s,"updateDoc",n._key,e),__(i,[l.toMutation(n._key,fr.exists(!0))])}function I$(n,...e){var t,r,i;n=(0,k.m9)(n);let s={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||kN(e[l])||(s=e[l],l++);const h={includeMetadataChanges:s.includeMetadataChanges};if(kN(e[l])){const D=e[l];e[l]=null===(t=D.next)||void 0===t?void 0:t.bind(D),e[l+1]=null===(r=D.error)||void 0===r?void 0:r.bind(D),e[l+2]=null===(i=D.complete)||void 0===i?void 0:i.bind(D)}let p,_,w;if(n instanceof or)_=mn(n.firestore,pr),w=Qg(n._key.path),p={next:D=>{e[l]&&e[l](BN(_,n,D))},error:e[l+1],complete:e[l+2]};else{const D=mn(n,as);_=mn(D.firestore,pr),w=D._query;const M=new wp(_);p={next:P=>{e[l]&&e[l](new dh(_,M,D,P))},error:e[l+1],complete:e[l+2]},f$(n._query)}return function(D,M,P,F){const q=new ZS(F),oe=new QP(M,q,P);return D.asyncQueue.enqueueAndForget((0,H.Z)(function*(){return WP(yield g_(D),oe)})),()=>{q.Rc(),D.asyncQueue.enqueueAndForget((0,H.Z)(function*(){return KP(yield g_(D),oe)}))}}(Qr(_),w,h,p)}function __(n,e){return function(t,r){const i=new Ii;return t.asyncQueue.enqueueAndForget((0,H.Z)(function*(){return function a5(n,e,t){return nN.apply(this,arguments)}(yield MN(t),r,i)})),i.promise}(Qr(n),e)}function BN(n,e,t){const r=t.docs.get(e._key),i=new wp(n);return new Nu(n,i,e._key,r,new bp(t.hasPendingWrites,t.fromCache),e.converter)}class DY extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=yp(e)}get(e){const t=fh(e,this._firestore),r=new mY(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return dt();const s=i[0];if(s.isFoundDocument())return new Yw(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new Yw(this._firestore,r,t._key,null,t.converter);throw dt()})}set(e,t,r){const i=fh(e,this._firestore),s=oT(i.converter,t,r),l=nT(this._dataReader,"Transaction.set",i._key,s,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const s=fh(e,this._firestore);let l;return l="string"==typeof(t=(0,k.m9)(t))||t instanceof Pu?NN(this._dataReader,"Transaction.update",s._key,t,r,i):PN(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,l),this}delete(e){const t=fh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=fh(e,this._firestore),r=new wp(this._firestore);return super.get(e).then(i=>new Nu(this._firestore,r,t._key,i._document,new bp(!1,!1),t.converter))}}function UN(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Be("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function S$(){if(typeof Uint8Array>"u")throw new Be("unimplemented","Uint8Arrays are not available in this environment.")}function T$(){if(!function ZK(){return typeof atob<"u"}())throw new Be("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Wg=Oe.SDK_VERSION,(0,Oe._registerComponent)(new We.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const s=t.getProvider("app").getImmediate(),l=new pr(new LK(t.getProvider("auth-internal")),new UK(t.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Be(be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new th(h.options.projectId,p)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,Oe.registerVersion)(_2,"3.4.15",n),(0,Oe.registerVersion)(_2,"3.4.15","esm2017")}();class Jw{constructor(e){this._delegate=e}static fromBase64String(e){return T$(),new Jw(Oc.fromBase64String(e))}static fromUint8Array(e){return S$(),new Jw(Oc.fromUint8Array(e))}toBase64(){return T$(),this._delegate.toBase64()}toUint8Array(){return S$(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function HN(n){return function PY(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class NY{enableIndexedDbPersistence(e,t){return function H5(n,e){i$(n=mn(n,pr));const t=Qr(n),r=n._freezeSettings(),i=new CN;return r$(t,i,new Bj(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function j5(n){i$(n=mn(n,pr));const e=Qr(n),t=n._freezeSettings(),r=new CN;return r$(e,r,new C5(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function $5(n){if(n._initialized&&!n._terminated)throw new Be(be.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ii;return n._queue.enqueueAndForgetEvenWhileRestricted((0,H.Z)(function*(){try{yield(t=(0,H.Z)(function*(r){if(!Nl.C())return Promise.resolve();const i=r+"main";yield Nl.delete(i)}),function(r){return t.apply(this,arguments)})(_P(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class A${constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof th||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Jf("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function F5(n,e,t,r={}){var i;const s=(n=mn(n,Kw))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&Jf("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,h;if("string"==typeof r.mockUserToken)l=r.mockUserToken,h=Ci.MOCK_USER;else{l=(0,k.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new Be(be.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Ci(p)}n._authCredentials=new FK(new y2(l,h))}}(this._delegate,e,t,r)}enableNetwork(){return function z5(n){return function A5(n){return n.asyncQueue.enqueue((0,H.Z)(function*(){const e=yield $j(n),t=yield Gj(n);return e.setNetworkEnabled(!0),function(r){const i=st(r);return i._u.delete(0),Ww(i)}(t)}))}(Qr(n=mn(n,pr)))}(this._delegate)}disableNetwork(){return function W5(n){return function M5(n){return n.asyncQueue.enqueue((0,H.Z)(function*(){const e=yield $j(n),t=yield Gj(n);return e.setNetworkEnabled(!1),(r=(0,H.Z)(function*(i){const s=st(i);s._u.add(0),yield c_(s),s.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Qr(n=mn(n,pr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Kj("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function G5(n){return function(e){const t=new Ii;return e.asyncQueue.enqueueAndForget((0,H.Z)(function*(){return function d5(n,e){return aN.apply(this,arguments)}(yield MN(e),t)})),t.promise}(Qr(n=mn(n,pr)))}(this._delegate)}onSnapshotsInSync(e){return function IY(n,e){return function k5(n,e){const t=new ZS(e);return n.asyncQueue.enqueueAndForget((0,H.Z)(function*(){return r=yield g_(n),i=t,st(r).Ru.add(i),void i.next();var r,i})),()=>{t.Rc(),n.asyncQueue.enqueueAndForget((0,H.Z)(function*(){return r=yield g_(n),i=t,void st(r).Ru.delete(i);var r,i}))}}(Qr(n=mn(n,pr)),kN(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Be("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new y_(this,Jj(this._delegate,e))}catch(t){throw Ps(t,"collection()","Firestore.collection()")}}doc(e){try{return new Fa(this,JS(this._delegate,e))}catch(t){throw Ps(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ns(this,function L5(n,e){if(n=mn(n,Kw),RN("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Be(be.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new as(n,null,(t=e,new Ru(yn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ps(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function SY(n,e,t){n=mn(n,pr);const r=Object.assign(Object.assign({},pY),t);return function(i){if(i.maxAttempts<1)throw new Be(be.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function O5(n,e,t){const r=new Ii;return n.asyncQueue.enqueueAndForget((0,H.Z)(function*(){const i=yield(s=n,YS(s).then(l=>l.datastore));var s;new S5(n.asyncQueue,i,t,e,r).run()})),r.promise}(Qr(n),i=>e(new DY(n,i)),r)}(this._delegate,t=>e(new M$(this,t)))}batch(){return Qr(this._delegate),new x$(new w$(this._delegate,e=>__(this._delegate,e)))}loadBundle(e){return function q5(n,e){const t=Qr(n=mn(n,pr)),r=new B5;return function P5(n,e,t,r){const i=function(s,l){let h;return h="string"==typeof s?(new TextEncoder).encode(s):s,p=function(p,_){if(p instanceof Uint8Array)return Uj(p,_);if(p instanceof ArrayBuffer)return Uj(new Uint8Array(p),_);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new I5(p,l);var p}(t,zw(e));n.asyncQueue.enqueueAndForget((0,H.Z)(function*(){!function E5(n,e,t){const r=st(n);var i;(i=(0,H.Z)(function*(s,l,h){try{const p=yield l.getMetadata();if(yield function(M,P){const F=st(M),q=Di(P.createTime);return F.persistence.runTransaction("hasNewerBundle","readonly",oe=>F.Ns.getBundleMetadata(oe,P.id)).then(oe=>!!oe&&oe.createTime.compareTo(q)>=0)}(s.localStore,p))return yield l.close(),h._completeWith({taskState:"Success",documentsLoaded:(M=p).totalDocuments,bytesLoaded:M.totalBytes,totalDocuments:M.totalDocuments,totalBytes:M.totalBytes}),Promise.resolve(new Set);h._updateProgress(Mj(p));const _=new e5(p,s.localStore,l.It);let w=yield l.wc();for(;w;){const M=yield _.Ou(w);M&&h._updateProgress(M),w=yield l.wc()}const D=yield _.complete();return yield Ou(s,D.Bu,void 0),yield function(M,P){const F=st(M);return F.persistence.runTransaction("Save bundle","readwrite",q=>F.Ns.saveBundleMetadata(q,P))}(s.localStore,p),h._completeWith(D.progress),Promise.resolve(D.$u)}catch(p){return Jf("SyncEngine",`Loading bundle failed with ${p}`),h._failWith(p),Promise.resolve(new Set)}var M}),function(s,l,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield MN(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function K5(n,e){return function N5(n,e){return n.asyncQueue.enqueue((0,H.Z)(function*(){return function(t,r){const i=st(t);return i.persistence.runTransaction("Get named query","readonly",s=>i.Ns.getNamedQuery(s,r))}(yield QS(n),e)}))}(Qr(n=mn(n,pr)),e).then(t=>t?new as(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ns(this,t):null)}}class aT extends VN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jw(new Oc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Fa.forKey(t,this.firestore,null)}}class M${constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new aT(e)}get(e){const t=Cp(e);return this._delegate.get(t).then(r=>new e0(this._firestore,new Nu(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Cp(e);return r?(UN("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Cp(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Cp(e);return this._delegate.delete(t),this}}class x${constructor(e){this._delegate=e}set(e,t,r){const i=Cp(e);return r?(UN("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Cp(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Cp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Ep{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Qw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new t0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Ep.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new Ep(e,new aT(e),t),i.set(t,s)),s}}Ep.INSTANCES=new WeakMap;class Fa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new aT(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Be("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Fa(t,new or(t._delegate,r,new tt(e)))}static forKey(e,t,r){return new Fa(t,new or(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new y_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new y_(this.firestore,Jj(this._delegate,e))}catch(t){throw Ps(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,k.m9)(e))instanceof or&&e$(this._delegate,e)}set(e,t){t=UN("DocumentReference.set",t);try{return t?E$(this._delegate,e,t):E$(this._delegate,e)}catch(r){throw Ps(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?C$(this._delegate,e):C$(this._delegate,e,t,...r)}catch(i){throw Ps(i,"updateDoc()","DocumentReference.update()")}}delete(){return function EY(n){return __(mn(n.firestore,pr),[new n_(n._key,fr.none())])}(this._delegate)}onSnapshot(...e){const t=R$(e),r=k$(e,i=>new e0(this.firestore,new Nu(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return I$(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function _Y(n){n=mn(n,or);const e=mn(n.firestore,pr),t=Qr(e),r=new wp(e);return function x5(n,e){const t=new Ii;return n.asyncQueue.enqueueAndForget((0,H.Z)(function*(){return(r=(0,H.Z)(function*(i,s,l){try{const h=yield function(p,_){const w=st(p);return w.persistence.runTransaction("read document","readonly",D=>w.localDocuments.getDocument(D,_))}(i,s);h.isFoundDocument()?l.resolve(h):h.isNoDocument()?l.resolve(null):l.reject(new Be(be.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const p=h_(h,`Failed to get document '${s} from cache`);l.reject(p)}}),function(i,s,l){return r.apply(this,arguments)})(yield QS(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Nu(e,r,n._key,i,new bp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function yY(n){n=mn(n,or);const e=mn(n.firestore,pr);return zj(Qr(e),n._key,{source:"server"}).then(t=>BN(e,n,t))}(this._delegate):function gY(n){n=mn(n,or);const e=mn(n.firestore,pr);return zj(Qr(e),n._key).then(t=>BN(e,n,t))}(this._delegate),t.then(r=>new e0(this.firestore,new Nu(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Fa(this.firestore,this._delegate.withConverter(e?Ep.getInstance(this.firestore,e):null))}}function Ps(n,e,t){return n.message=n.message.replace(e,t),n}function R$(n){for(const e of n)if("object"==typeof e&&!HN(e))return e;return{}}function k$(n,e){var t,r;let i;return i=HN(n[0])?n[0]:HN(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class e0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Fa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return h$(this._delegate,e._delegate)}}class t0 extends e0{data(e){const t=this._delegate.data(e);return function PK(n,e){n||dt()}(void 0!==t),t}}class Ns{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new aT(e)}where(e,t,r){try{return new Ns(this.firestore,hh(this._delegate,function sY(n,e,t){const r=e,i=sT("where",n);return new iY(i,r,t)}(e,t,r)))}catch(i){throw Ps(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ns(this.firestore,hh(this._delegate,function aY(n,e="asc"){const t=e,r=sT("orderBy",n);return new oY(r,t)}(e,t)))}catch(r){throw Ps(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ns(this.firestore,hh(this._delegate,function lY(n){return Qj("limit",n),new p$("limit",n,"F")}(e)))}catch(t){throw Ps(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ns(this.firestore,hh(this._delegate,function cY(n){return Qj("limitToLast",n),new p$("limitToLast",n,"L")}(e)))}catch(t){throw Ps(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ns(this.firestore,hh(this._delegate,function uY(...n){return new m$("startAt",n,!0)}(...e)))}catch(t){throw Ps(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ns(this.firestore,hh(this._delegate,function dY(...n){return new m$("startAfter",n,!1)}(...e)))}catch(t){throw Ps(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ns(this.firestore,hh(this._delegate,function hY(...n){return new g$("endBefore",n,!1)}(...e)))}catch(t){throw Ps(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ns(this.firestore,hh(this._delegate,function fY(...n){return new g$("endAt",n,!0)}(...e)))}catch(t){throw Ps(t,"endAt()","Query.endAt()")}}isEqual(e){return t$(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function bY(n){n=mn(n,as);const e=mn(n.firestore,pr),t=Qr(e),r=new wp(e);return function R5(n,e){const t=new Ii;return n.asyncQueue.enqueueAndForget((0,H.Z)(function*(){return(r=(0,H.Z)(function*(i,s,l){try{const h=yield $S(i,s,!0),p=new kj(s,h.Hi),_=p.ju(h.documents),w=p.applyChanges(_,!1);l.resolve(w.snapshot)}catch(h){const p=h_(h,`Failed to execute query '${s} against cache`);l.reject(p)}}),function(i,s,l){return r.apply(this,arguments)})(yield QS(n),e,t);var r})),t.promise}(t,n._query).then(i=>new dh(e,r,n,i))}(this._delegate):"server"===e?.source?function wY(n){n=mn(n,as);const e=mn(n.firestore,pr),t=Qr(e),r=new wp(e);return Wj(t,n._query,{source:"server"}).then(i=>new dh(e,r,n,i))}(this._delegate):function vY(n){n=mn(n,as);const e=mn(n.firestore,pr),t=Qr(e),r=new wp(e);return f$(n._query),Wj(t,n._query).then(i=>new dh(e,r,n,i))}(this._delegate),t.then(r=>new jN(this.firestore,new dh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=R$(e),r=k$(e,i=>new jN(this.firestore,new dh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return I$(this._delegate,t,r)}withConverter(e){return new Ns(this.firestore,this._delegate.withConverter(e?Ep.getInstance(this.firestore,e):null))}}class LY{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new t0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class jN{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ns(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new t0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new LY(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new t0(this._firestore,r))})}isEqual(e){return h$(this._delegate,e._delegate)}}class y_ extends Ns{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Fa(this.firestore,e):null}doc(e){try{return new Fa(this.firestore,void 0===e?JS(this._delegate):JS(this._delegate,e))}catch(t){throw Ps(t,"doc()","CollectionReference.doc()")}}add(e){return function CY(n,e){const t=mn(n.firestore,pr),r=JS(n),i=oT(n.converter,e);return __(t,[nT(yp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,fr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Fa(this.firestore,t))}isEqual(e){return e$(this._delegate,e._delegate)}withConverter(e){return new y_(this.firestore,this._delegate.withConverter(e?Ep.getInstance(this.firestore,e):null))}}function Cp(n){return mn(n,or)}class $N{constructor(...e){this._delegate=new Pu(...e)}static documentId(){return new $N(Fr.keyField().canonicalString())}isEqual(e){return(e=(0,k.m9)(e))instanceof Pu&&this._delegate._internalPath.isEqual(e._internalPath)}}class Ip{constructor(e){this._delegate=e}static serverTimestamp(){const e=function AY(){return new ON("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Ip(e)}static delete(){const e=function TY(){return new Zw("deleteField")}();return e._methodName="FieldValue.delete",new Ip(e)}static arrayUnion(...e){const t=function MY(...n){return new X5("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Ip(t)}static arrayRemove(...e){const t=function xY(...n){return new J5("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Ip(t)}static increment(e){const t=function RY(n){return new eY("increment",n)}(e);return t._methodName="FieldValue.increment",new Ip(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const VY={Firestore:A$,GeoPoint:eT,Timestamp:hr,Blob:Jw,Transaction:M$,WriteBatch:x$,DocumentReference:Fa,DocumentSnapshot:e0,Query:Ns,QueryDocumentSnapshot:t0,QuerySnapshot:jN,CollectionReference:y_,FieldPath:$N,FieldValue:Ip,setLogLevel:function FY(n){!function OK(n){Qd.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function O$(n,e){return function HY(n,e=dc.z){return new sr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function GN(n,e){return O$(n,e).pipe((0,lt.U)(t=>({payload:t,type:"query"})))}function lT(n,e){return GN(n,e).pipe(vi(void 0),Qk(),(0,lt.U)(([t,r])=>{const i=r.payload.docChanges(),s=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,h)=>{const p=i.find(w=>w.doc.ref.isEqual(l.ref)),_=t?.payload.docs.find(w=>w.ref.isEqual(l.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(l.metadata)||!p&&_&&JSON.stringify(_.metadata)===JSON.stringify(l.metadata)||s.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:l}})}),s}))}function P$(n,e,t){return lT(n,t).pipe(qf((r,i)=>function $Y(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function GY(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return zN(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return zN(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return zN(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),hE(),(0,lt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function zN(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function N$(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function UY(n){(function BY(n,e){n.INTERNAL.registerComponent(new We.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},VY)))})(n,(e,t)=>new A$(e,t,new NY)),n.registerVersion("@firebase/firestore-compat","0.1.24")}(Vk.Z);class F${constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=lT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,lt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(vi(void 0),Qk(),Hr(([r,i])=>i.length>0||!r),(0,lt.U)(([r,i])=>i),En.iC)}auditTrail(e){return this.stateChanges(e).pipe(qf((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=N$(e);return P$(this.query,t,this.afs.schedulers.outsideAngular).pipe(En.iC)}valueChanges(e={}){return GN(this.query,this.afs.schedulers.outsideAngular).pipe((0,lt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),En.iC)}get(e){return(0,fn.D)(this.query.get(e)).pipe(En.iC)}add(e){return this.ref.add(e)}doc(e){return new L$(this.ref.doc(e),this.afs)}}class L${constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=U$(r,t);return new F$(i,s,this.afs)}snapshotChanges(){return function jY(n,e){return O$(n,e).pipe(vi(void 0),Qk(),(0,lt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(En.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,lt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,fn.D)(this.ref.get(e)).pipe(En.iC)}}class zY{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?lT(this.query,this.afs.schedulers.outsideAngular).pipe((0,lt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Hr(t=>t.length>0),En.iC):lT(this.query,this.afs.schedulers.outsideAngular).pipe(En.iC)}auditTrail(e){return this.stateChanges(e).pipe(qf((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=N$(e);return P$(this.query,t,this.afs.schedulers.outsideAngular).pipe(En.iC)}valueChanges(e={}){return GN(this.query,this.afs.schedulers.outsideAngular).pipe((0,lt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),En.iC)}get(e){return(0,fn.D)(this.query.get(e)).pipe(En.iC)}}const V$=new u.OlP("angularfire2.enableFirestorePersistence"),B$=new u.OlP("angularfire2.firestore.persistenceSettings"),WY=new u.OlP("angularfire2.firestore.settings"),qY=new u.OlP("angularfire2.firestore.use-emulator");function U$(n,e=(t=>t)){return{query:e(n),ref:n}}let WN=(()=>{class n{constructor(t,r,i,s,l,h,p,_,w,D,M,P,F,q,oe,xe,Ge){this.schedulers=p;const Xe=(0,$r.on)(t,h,r),Qe=w;D&&Lk(Xe,h,M,F,q,oe,P,xe),[this.firestore,this.persistenceEnabled$]=(0,$r.cc)(`${Xe.name}.firestore`,"AngularFirestore",Xe.name,()=>{const Ct=h.runOutsideAngular(()=>Xe.firestore());if(s&&Ct.settings(s),Qe&&Ct.useEmulator(...Qe),i&&!Jo(l)){const St=()=>{try{return(0,fn.D)(Ct.enablePersistence(_||void 0).then(()=>!0,()=>!1))}catch(sn){return typeof console<"u"&&console.warn(sn),et(!1)}};return[Ct,h.runOutsideAngular(St)]}return[Ct,et(!1)]},[s,Qe,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:l}=U$(i,r),h=this.schedulers.ngZone.run(()=>s);return new F$(h,l,this)}collectionGroup(t,r){const i=r||(l=>l),s=this.firestore.collectionGroup(t);return new zY(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new L$(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(u.LFG($r.Dh),u.LFG($r.xv,8),u.LFG(V$,8),u.LFG(WY,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(En.HU),u.LFG(B$,8),u.LFG(qY,8),u.LFG(qb,8),u.LFG(Rk,8),u.LFG(kk,8),u.LFG(Ok,8),u.LFG(Pk,8),u.LFG(Nk,8),u.LFG(Fk,8),u.LFG(Wb,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),KY=(()=>{class n{constructor(){BD.Z.registerVersion("angularfire",En.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:V$,useValue:!0},{provide:B$,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[WN]}),n})();const H$="@firebase/database";let qN="";function $$(n){qN=n}class QY{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,k.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,k.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class XY{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,k.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const G$=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new QY(e)}}catch{}return new XY},Dp=G$("localStorage"),KN=G$("sessionStorage"),v_=new mt.Yd("@firebase/database"),z$=function(){let n=1;return function(){return n++}}(),W$=function(n){const e=(0,k.dS)(n),t=new k.gQ;t.update(e);const r=t.digest();return k.US.encodeByteArray(r)},n0=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=n0.apply(null,r):e+="object"==typeof r?(0,k.Pz)(r):r,e+=" "}return e};let Sp=null,q$=!0;const K$=function(n,e){(0,k.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(v_.logLevel=mt.in.VERBOSE,Sp=v_.log.bind(v_),e&&KN.set("logging_enabled",!0)):"function"==typeof n?Sp=n:(Sp=null,KN.remove("logging_enabled"))},Ai=function(...n){if(!0===q$&&(q$=!1,null===Sp&&!0===KN.get("logging_enabled")&&K$(!0)),Sp){const e=n0.apply(null,n);Sp(e)}},r0=function(n){return function(...e){Ai(n,...e)}},ZN=function(...n){const e="FIREBASE INTERNAL ERROR: "+n0(...n);v_.error(e)},Pc=function(...n){const e=`FIREBASE FATAL ERROR: ${n0(...n)}`;throw v_.error(e),new Error(e)},ls=function(...n){const e="FIREBASE WARNING: "+n0(...n);v_.warn(e)},cT=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Fu="[MIN_NAME]",Nc="[MAX_NAME]",Tp=function(n,e){if(n===e)return 0;if(n===Fu||e===Nc)return-1;if(e===Fu||n===Nc)return 1;{const t=uT(n),r=uT(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},t7=function(n,e){return n===e?0:n<e?-1:1},s0=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,k.Pz)(e))},YN=function(n){if("object"!=typeof n||null===n)return(0,k.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,k.Pz)(e[r]),t+=":",t+=YN(n[e[r]]);return t+="}",t},Z$=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Mi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const Y$=function(n){(0,k.hu)(!cT(n),"Invalid JSON number");const r=1023;let i,s,l,h,p;0===n?(s=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=h+r,l=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(s=0,l=Math.round(n/Math.pow(2,-1074))));const _=[];for(p=52;p;p-=1)_.push(l%2?1:0),l=Math.floor(l/2);for(p=11;p;p-=1)_.push(s%2?1:0),s=Math.floor(s/2);_.push(i?1:0),_.reverse();const w=_.join("");let D="";for(p=0;p<64;p+=8){let M=parseInt(w.substr(p,8),2).toString(16);1===M.length&&(M="0"+M),D+=M}return D.toLowerCase()},s7=new RegExp("^-?(0*)\\d{1,10}$"),Q$=-2147483648,QN=2147483647,uT=function(n){if(s7.test(n)){const e=Number(n);if(e>=Q$&&e<=QN)return e}return null},b_=function(n){try{n()}catch(e){setTimeout(()=>{throw ls("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},o0=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class a7{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ls(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class l7{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Ai("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ls(e)}}let a0=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const nG=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,sG="websocket",oG="long_polling";class JN{constructor(e,t,r,i,s=!1,l="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=l,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Dp.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Dp.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function aG(n,e,t){let r;if((0,k.hu)("string"==typeof e,"typeof type must == string"),(0,k.hu)("object"==typeof t,"typeof params must == object"),e===sG)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==oG)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function c7(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Mi(t,(s,l)=>{i.push(s+"="+l)}),r+i.join("&")}class u7{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,k.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,k.p$)(this.counters_)}}const eF={},tF={};function nF(n){const e=n.toString();return eF[e]||(eF[e]=new u7),eF[e]}class h7{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&b_(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class ph{constructor(e,t,r,i,s,l,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=l,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=r0(e),this.stats_=nF(t),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),aG(t,oG,p))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new h7(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,k.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new rF((...s)=>{const[l,h,p,_,w]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=h,this.password=p;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[l,h]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(l,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&nG.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ph.forceAllow_=!0}static forceDisallow(){ph.forceDisallow_=!0}static isAvailable(){return!((0,k.Yr)()||!ph.forceAllow_&&(ph.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,k.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,k.h$)(t),i=Z$(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,k.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,k.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class rF{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,k.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=z$(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=rF.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(h){Ai("frame writing exception"),h.stack&&Ai(h.stack),Ai(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ai("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,k.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Ai("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let hT=null;typeof MozWebSocket<"u"?hT=MozWebSocket:typeof WebSocket<"u"&&(hT=WebSocket);let w_=(()=>{class n{constructor(t,r,i,s,l,h,p){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=r0(this.connId),this.stats_=nF(r),this.connURL=n.connectionURL_(r,h,p,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,l){const h={v:"5"};return!(0,k.Yr)()&&typeof location<"u"&&location.hostname&&nG.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),s&&(h.ac=s),l&&(h.p=l),aG(t,sG,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Dp.set("previous_websocket_failure",!0);try{let i;if((0,k.Yr)()){i={headers:{"User-Agent":`Firebase/5/${qN}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,h=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new hT(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==hT&&!n.forceDisallow_}static previouslyFailed(){return Dp.isInMemoryStorage||!0===Dp.get("previous_websocket_failure")}markConnectionHealthy(){Dp.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,k.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,k.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,k.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=Z$(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),pG=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[ph,w_]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=w_&&w_.isAvailable();let i=r&&!w_.previouslyFailed();if(t.webSocketOnly&&(r||ls("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[w_];else{const s=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&s.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class wG{constructor(e,t,r,i,s,l,h,p,_,w){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=l,this.onReady_=h,this.onDisconnect_=p,this.onKill_=_,this.lastSessionId=w,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=r0("c:"+this.id+":"),this.transportManager_=new pG(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=o0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=s0("t",e),r=s0("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=s0("t",e),r=s0("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=s0("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?ZN("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ZN("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&ls("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),o0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):o0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Dp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class EG{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class CG{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,k.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){(0,k.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class fT extends CG{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,k.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new fT}getInitialEvent(e){return(0,k.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class xn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function In(){return new xn("")}function tn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function mh(n){return n.pieces_.length-n.pieceNum_}function Wn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new xn(n.pieces_,e)}function sF(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function l0(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function SG(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new xn(e,0)}function mr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof xn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new xn(t,0)}function nn(n){return n.pieceNum_>=n.pieces_.length}function Fs(n,e){const t=tn(n),r=tn(e);if(null===t)return e;if(t===r)return Fs(Wn(n),Wn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function P7(n,e){const t=l0(n,0),r=l0(e,0);for(let i=0;i<t.length&&i<r.length;i++){const s=Tp(t[i],r[i]);if(0!==s)return s}return t.length===r.length?0:t.length<r.length?-1:1}function oF(n,e){if(mh(n)!==mh(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function La(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(mh(n)>mh(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class N7{constructor(e,t){this.errorPrefix_=t,this.parts_=l0(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,k.ug)(this.parts_[r]);TG(this)}}function TG(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Ap(n))}function Ap(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class aF extends CG{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new aF}getInitialEvent(e){return(0,k.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const c0=1e3;let mT,Mp=(()=>{class n extends EG{constructor(t,r,i,s,l,h,p,_){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=l,this.authTokenProvider_=h,this.appCheckTokenProvider_=p,this.authOverride_=_,this.id=n.nextPersistentConnectionId_++,this.log_=r0("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=c0,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,_&&!(0,k.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");aF.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&fT.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,l={r:s,a:t,b:r};this.log_((0,k.Pz)(l)),(0,k.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new k.BH,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:h=>{const p=h.d;"ok"===h.s?r.resolve(p):r.reject(p)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,s){this.initConnection_();const l=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+l),this.listens.has(h)||this.listens.set(h,new Map),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,k.hu)(!this.listens.get(h).has(l),"listen() called twice for same path/queryId.");const p={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(h).set(l,p),this.connected_&&this.sendListen_(p)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,p=>{const _=p.d,w=p.s;n.warnOnListenWarnings_(_,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",p),"ok"!==w&&this.removeListen_(i,s),t.onComplete&&t.onComplete(w,_))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,k.r3)(t,"w")){const i=(0,k.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();ls(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,k.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,k.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const l=s.s,h=s.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const l={p:t};s&&(l.q=i,l.t=s),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,h=>{s&&setTimeout(()=>{s(h.s,h.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,l){this.initConnection_();const h={p:r,d:i};void 0!==l&&(h.h=l),this.outstandingPuts_.push({action:t,request:h,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,k.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):ZN("Unrecognized action received from server: "+(0,k.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,k.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=c0,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=c0,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=c0),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,H.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let p=!1,_=null;const w=function(){_?_.close():(p=!0,s())};t.realtime_={close:w,sendRequest:function(P){(0,k.hu)(_,"sendRequest call when we're not connected not allowed."),_.sendRequest(P)}};const M=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[P,F]=yield Promise.all([t.authTokenProvider_.getToken(M),t.appCheckTokenProvider_.getToken(M)]);p?Ai("getToken() completed but was canceled"):(Ai("getToken() completed. Creating connection."),t.authToken_=P&&P.accessToken,t.appCheckToken_=F&&F.token,_=new wG(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,q=>{ls(q+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(P){t.log_("Failed to get token: "+P),p||(t.repoInfo_.nodeAdmin&&ls(P),w())}}})()}interrupt(t){Ai("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ai("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,k.xb)(this.interruptReasons_)&&(this.reconnectDelay_=c0,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>YN(l)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new xn(t).toString();let s;if(this.listens.has(i)){const l=this.listens.get(i);s=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){Ai("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Ai("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,k.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+qN.replace(/\./g,"-")]=1,(0,k.uI)()?t["framework.cordova"]=1:(0,k.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=fT.getInstance().currentlyOnline();return(0,k.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class cn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new cn(e,t)}}class pT{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new cn(Fu,e),i=new cn(Fu,t);return 0!==this.compare(r,i)}minPost(){return cn.MIN}}class xG extends pT{static get __EMPTY_NODE(){return mT}static set __EMPTY_NODE(e){mT=e}compare(e,t){return Tp(e.name,t.name)}isDefinedOn(e){throw(0,k.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return cn.MIN}maxPost(){return new cn(Nc,mT)}makePost(e,t){return(0,k.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new cn(e,mT)}toString(){return".key"}}const Fc=new xG;class gT{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let cF,Fl=(()=>{class n{constructor(t,r,i,s,l){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??ro.EMPTY_NODE,this.right=l??ro.EMPTY_NODE}copy(t,r,i,s,l){return new n(t??this.key,r??this.value,i??this.color,s??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const l=i(t,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===l?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return ro.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return ro.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class ro{constructor(e,t=ro.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new ro(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Fl.BLACK,null,null))}remove(e){return new ro(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Fl.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new gT(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new gT(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new gT(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new gT(this.root_,null,this.comparator_,!0,e)}}function $7(n,e){return Tp(n.name,e.name)}function lF(n,e){return Tp(n,e)}ro.EMPTY_NODE=new class j7{copy(e,t,r,i,s){return this}insert(e,t,r){return new Fl(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const RG=function(n){return"number"==typeof n?"number:"+Y$(n):"string:"+n},kG=function(n){if(n.isLeafNode()){const e=n.val();(0,k.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,k.r3)(e,".sv"),"Priority must be a string or number.")}else(0,k.hu)(n===cF||n.isEmpty(),"priority of unexpected type.");(0,k.hu)(n===cF||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let OG,PG,NG,E_=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,k.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),kG(this.priorityNode_)}static set __childrenNodeConstructor(t){OG=t}static get __childrenNodeConstructor(){return OG}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return nn(t)?this:".priority"===tn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=tn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,k.hu)(".priority"!==i||1===mh(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Wn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+RG(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?Y$(this.value_):this.value_,this.lazyHash_=W$(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,k.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,k.hu)(s>=0,"Unknown leaf type: "+r),(0,k.hu)(l>=0,"Unknown leaf type: "+i),s===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Qn=new class q7 extends pT{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?Tp(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return cn.MIN}maxPost(){return new cn(Nc,new E_("[PRIORITY-POST]",NG))}makePost(e,t){const r=PG(e);return new cn(t,new E_("[PRIORITY-POST]",r))}toString(){return".priority"}},K7=Math.log(2);class Z7{constructor(e){this.count=parseInt(Math.log(e+1)/K7,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const _T=function(n,e,t,r){n.sort(e);const i=function(p,_){const w=_-p;let D,M;if(0===w)return null;if(1===w)return D=n[p],M=t?t(D):D,new Fl(M,D.node,Fl.BLACK,null,null);{const P=parseInt(w/2,10)+p,F=i(p,P),q=i(P+1,_);return D=n[P],M=t?t(D):D,new Fl(M,D.node,Fl.BLACK,F,q)}},h=function(p){let _=null,w=null,D=n.length;const M=function(F,q){const oe=D-F,xe=D;D-=F;const Ge=i(oe+1,xe),Xe=n[oe],Qe=t?t(Xe):Xe;P(new Fl(Qe,Xe.node,q,null,Ge))},P=function(F){_?(_.left=F,_=F):(w=F,_=F)};for(let F=0;F<p.count;++F){const q=p.nextBitIsOne(),oe=Math.pow(2,p.count-(F+1));q?M(oe,Fl.BLACK):(M(oe,Fl.BLACK),M(oe,Fl.RED))}return w}(new Z7(n.length));return new ro(r||e,h)};let uF;const C_={};class Lu{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,k.hu)(C_&&Qn,"ChildrenNode.ts has not been loaded"),uF=uF||new Lu({".priority":C_},{".priority":Qn}),uF}get(e){const t=(0,k.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ro?t:null}hasIndex(e){return(0,k.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,k.hu)(e!==Fc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(cn.Wrap);let h,l=s.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=s.getNext();h=i?_T(r,e.getCompare()):C_;const p=e.toString(),_=Object.assign({},this.indexSet_);_[p]=e;const w=Object.assign({},this.indexes_);return w[p]=h,new Lu(w,_)}addToIndexes(e,t){const r=(0,k.UI)(this.indexes_,(i,s)=>{const l=(0,k.DV)(this.indexSet_,s);if((0,k.hu)(l,"Missing index implementation for "+s),i===C_){if(l.isDefinedOn(e.node)){const h=[],p=t.getIterator(cn.Wrap);let _=p.getNext();for(;_;)_.name!==e.name&&h.push(_),_=p.getNext();return h.push(e),_T(h,l.getCompare())}return C_}{const h=t.get(e.name);let p=i;return h&&(p=p.remove(new cn(e.name,h))),p.insert(e,e.node)}});return new Lu(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,k.UI)(this.indexes_,i=>{if(i===C_)return i;{const s=t.get(e.name);return s?i.remove(new cn(e.name,s)):i}});return new Lu(r,this.indexSet_)}}let u0,Yt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&kG(this.priorityNode_),this.children_.isEmpty()&&(0,k.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return u0||(u0=new n(new ro(lF),null,Lu.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||u0}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?u0:r}}getChild(t){const r=tn(t);return null===r?this:this.getImmediateChild(r).getChild(Wn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,k.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new cn(t,r);let s,l;r.isEmpty()?(s=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const h=s.isEmpty()?u0:this.priorityNode_;return new n(s,h,l)}}updateChild(t,r){const i=tn(t);if(null===i)return r;{(0,k.hu)(".priority"!==tn(t)||1===mh(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(Wn(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,l=!0;if(this.forEachChild(Qn,(h,p)=>{r[h]=p.val(t),i++,l&&n.INTEGER_REGEXP_.test(h)?s=Math.max(s,Number(h)):l=!1}),!t&&l&&s<2*i){const h=[];for(const p in r)h[p]=r[p];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+RG(this.getPriority().val())+":"),this.forEachChild(Qn,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":W$(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const l=s.getPredecessorKey(new cn(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new cn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new cn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,cn.Wrap);let l=s.peek();for(;null!=l&&r.compare(l,t)<0;)s.getNext(),l=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,cn.Wrap);let l=s.peek();for(;null!=l&&r.compare(l,t)>0;)s.getNext(),l=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===d0?-1:0}withIndex(t){if(t===Fc||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Fc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Qn),s=r.getIterator(Qn);let l=i.getNext(),h=s.getNext();for(;l&&h;){if(l.name!==h.name||!l.node.equals(h.node))return!1;l=i.getNext(),h=s.getNext()}return null===l&&null===h}return!1}return!1}}resolveIndex_(t){return t===Fc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const d0=new class Y7 extends Yt{constructor(){super(new ro(lF),Yt.EMPTY_NODE,Lu.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Yt.EMPTY_NODE}isEmpty(){return!1}};function wr(n,e=null){if(null===n)return Yt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,k.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new E_(n,wr(e));if(n instanceof Array){let t=Yt.EMPTY_NODE;return Mi(n,(r,i)=>{if((0,k.r3)(n,r)&&"."!==r.substring(0,1)){const s=wr(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(wr(e))}{const t=[];let r=!1;if(Mi(n,(l,h)=>{if("."!==l.substring(0,1)){const p=wr(h);p.isEmpty()||(r=r||!p.getPriority().isEmpty(),t.push(new cn(l,p)))}}),0===t.length)return Yt.EMPTY_NODE;const s=_T(t,$7,l=>l.name,lF);if(r){const l=_T(t,Qn.getCompare());return new Yt(s,wr(e),new Lu({".priority":l},{".priority":Qn}))}return new Yt(s,wr(e),Lu.Default)}}Object.defineProperties(cn,{MIN:{value:new cn(Fu,Yt.EMPTY_NODE)},MAX:{value:new cn(Nc,d0)}}),xG.__EMPTY_NODE=Yt.EMPTY_NODE,E_.__childrenNodeConstructor=Yt,function G7(n){cF=n}(d0),function W7(n){NG=n}(d0),function z7(n){PG=n}(wr);class dF extends pT{constructor(e){super(),this.indexPath_=e,(0,k.hu)(!nn(e)&&".priority"!==tn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?Tp(e.name,t.name):s}makePost(e,t){const r=wr(e),i=Yt.EMPTY_NODE.updateChild(this.indexPath_,r);return new cn(t,i)}maxPost(){const e=Yt.EMPTY_NODE.updateChild(this.indexPath_,d0);return new cn(Nc,e)}toString(){return l0(this.indexPath_,0).join("/")}}const hF=new class X7 extends pT{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Tp(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return cn.MIN}maxPost(){return cn.MAX}makePost(e,t){const r=wr(e);return new cn(t,r)}toString(){return".value"}},I_="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",J7=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const s=new Array(8);for(i=7;i>=0;i--)s[i]=I_.charAt(t%64),t=Math.floor(t/64);(0,k.hu)(0===t,"Cannot push at time == 0");let l=s.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=I_.charAt(e[i]);return(0,k.hu)(20===l.length,"nextPushId: Length should be 20."),l}}(),VG=function(n){if(n===""+QN)return"-";const e=uT(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let l=0;l<t.length;l++)t[l]=n.charAt(l);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Nc;const s=I_.charAt(I_.indexOf(t[r])+1);return t[r]=s,t.slice(0,r+1).join("")},BG=function(n){if(n===""+Q$)return Fu;const e=uT(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+QN:(delete t[t.length-1],t.join("")):(t[t.length-1]=I_.charAt(I_.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function UG(n){return{type:"value",snapshotNode:n}}function D_(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function h0(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function f0(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class pF{constructor(e){this.index_=e}updateChild(e,t,r,i,s,l){(0,k.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(h0(t,h)):(0,k.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?l.trackChildChange(D_(t,r)):l.trackChildChange(f0(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Qn,(i,s)=>{t.hasChild(i)||r.trackChildChange(h0(i,s))}),t.isLeafNode()||t.forEachChild(Qn,(i,s)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(s)||r.trackChildChange(f0(i,s,l))}else r.trackChildChange(D_(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Yt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class p0{constructor(e){this.indexedFilter_=new pF(e.getIndex()),this.index_=e.getIndex(),this.startPost_=p0.getStartPost_(e),this.endPost_=p0.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,s,l){return this.matches(new cn(t,r))||(r=Yt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Yt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Yt.EMPTY_NODE);const s=this;return t.forEachChild(Qn,(l,h)=>{s.matches(new cn(l,h))||(i=i.updateImmediateChild(l,Yt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class t9{constructor(e){this.rangedFilter_=new p0(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,s,l){return this.rangedFilter_.matches(new cn(t,r))||(r=Yt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,l):this.fullLimitUpdateChild_(e,t,r,s,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Yt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;i=Yt.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;s.hasNext()&&l<this.limit_;){const h=s.getNext();let p;if(p=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!p)break;i=i.updateImmediateChild(h.name,h.node),l++}}else{let s,l,h,p;if(i=t.withIndex(this.index_),i=i.updatePriority(Yt.EMPTY_NODE),this.reverse_){p=i.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();const D=this.index_.getCompare();h=(M,P)=>D(P,M)}else p=i.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let _=0,w=!1;for(;p.hasNext();){const D=p.getNext();!w&&h(s,D)<=0&&(w=!0),w&&_<this.limit_&&h(D,l)<=0?_++:i=i.updateImmediateChild(D.name,Yt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let l;if(this.reverse_){const D=this.index_.getCompare();l=(M,P)=>D(P,M)}else l=this.index_.getCompare();const h=e;(0,k.hu)(h.numChildren()===this.limit_,"");const p=new cn(t,r),_=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),w=this.rangedFilter_.matches(p);if(h.hasChild(t)){const D=h.getImmediateChild(t);let M=i.getChildAfterChild(this.index_,_,this.reverse_);for(;null!=M&&(M.name===t||h.hasChild(M.name));)M=i.getChildAfterChild(this.index_,M,this.reverse_);const P=null==M?1:l(M,p);if(w&&!r.isEmpty()&&P>=0)return s?.trackChildChange(f0(t,r,D)),h.updateImmediateChild(t,r);{s?.trackChildChange(h0(t,D));const q=h.updateImmediateChild(t,Yt.EMPTY_NODE);return null!=M&&this.rangedFilter_.matches(M)?(s?.trackChildChange(D_(M.name,M.node)),q.updateImmediateChild(M.name,M.node)):q}}return r.isEmpty()?e:w&&l(_,p)>=0?(null!=s&&(s.trackChildChange(h0(_.name,_.node)),s.trackChildChange(D_(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(_.name,Yt.EMPTY_NODE)):e}}class yT{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Qn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Fu}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Nc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,k.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Qn}copy(){const e=new yT;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function mF(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function gF(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function vT(n,e){const t=n.copy();return t.index_=e,t}function HG(n){const e={};if(n.isDefault())return e;let t;return n.index_===Qn?t="$priority":n.index_===hF?t="$value":n.index_===Fc?t="$key":((0,k.hu)(n.index_ instanceof dF,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,k.Pz)(t),n.startSet_&&(e.startAt=(0,k.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,k.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,k.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,k.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function jG(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Qn&&(e.i=n.index_.toString()),e}class bT extends EG{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=r0("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,k.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const l=bT.getListenId_(e,r),h={};this.listens_[l]=h;const p=HG(e._queryParams);this.restRequest_(s+".json",p,(_,w)=>{let D=w;if(404===_&&(D=null,_=null),null===_&&this.onDataUpdate_(s,D,!1,r),(0,k.DV)(this.listens_,l)===h){let M;M=_?401===_?"permission_denied":"rest_error:"+_:"ok",i(M,null)}})}unlisten(e,t){const r=bT.getListenId_(e,t);delete this.listens_[r]}get(e){const t=HG(e._queryParams),r=e._path.toString(),i=new k.BH;return this.restRequest_(r+".json",t,(s,l)=>{let h=l;404===s&&(h=null,s=null),null===s?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,k.xO)(t);this.log_("Sending REST request for "+l);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);let p=null;if(h.status>=200&&h.status<300){try{p=(0,k.cI)(h.responseText)}catch{ls("Failed to parse JSON response for "+l+": "+h.responseText)}r(null,p)}else 401!==h.status&&404!==h.status&&ls("Got unsuccessful REST response for "+l+" Status: "+h.status),r(h.status);r=null}},h.open("GET",l,!0),h.send()})}}class a9{constructor(){this.rootNode_=Yt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function wT(){return{value:null,children:new Map}}function S_(n,e,t){if(nn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=tn(e);n.children.has(r)||n.children.set(r,wT()),S_(n.children.get(r),e=Wn(e),t)}}function _F(n,e){if(nn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Qn,(r,i)=>{S_(n,new xn(r),i)}),_F(n,e)}}if(n.children.size>0){const t=tn(e);return e=Wn(e),n.children.has(t)&&_F(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function yF(n,e,t){null!==n.value?t(e,n.value):function l9(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{yF(i,new xn(e.toString()+"/"+r),t)})}class c9{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Mi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class h9{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new c9(e);const r=1e4+2e4*Math.random();o0(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Mi(e,(i,s)=>{s>0&&(0,k.r3)(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),o0(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Va=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Va||(Va={})),Va))();function wF(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class ET{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Va.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(nn(this.path)){if(null!=this.affectedTree.value)return(0,k.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new xn(e));return new ET(In(),t,this.revert)}}return(0,k.hu)(tn(this.path)===e,"operationForChild called for unrelated child."),new ET(Wn(this.path),this.affectedTree,this.revert)}}class m0{constructor(e,t){this.source=e,this.path=t,this.type=Va.LISTEN_COMPLETE}operationForChild(e){return nn(this.path)?new m0(this.source,In()):new m0(this.source,Wn(this.path))}}class xp{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Va.OVERWRITE}operationForChild(e){return nn(this.path)?new xp(this.source,In(),this.snap.getImmediateChild(e)):new xp(this.source,Wn(this.path),this.snap)}}class T_{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Va.MERGE}operationForChild(e){if(nn(this.path)){const t=this.children.subtree(new xn(e));return t.isEmpty()?null:t.value?new xp(this.source,In(),t.value):new T_(this.source,In(),t)}return(0,k.hu)(tn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new T_(this.source,Wn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class gh{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(nn(e))return this.isFullyInitialized()&&!this.filtered_;const t=tn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class f9{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function g0(n,e,t,r,i,s){const l=r.filter(h=>h.type===t);l.sort((h,p)=>function g9(n,e,t){if(null==e.childName||null==t.childName)throw(0,k.g5)("Should only compare child_ events.");const r=new cn(e.childName,e.snapshotNode),i=new cn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,p)),l.forEach(h=>{const p=function m9(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,s);i.forEach(_=>{_.respondsTo(h.type)&&e.push(_.createEvent(p,n.query_))})})}function CT(n,e){return{eventCache:n,serverCache:e}}function _0(n,e,t,r){return CT(new gh(e,t,r),n.serverCache)}function GG(n,e,t,r){return CT(n.eventCache,new gh(e,t,r))}function IT(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Rp(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let EF;class Xn{constructor(e,t=(()=>(EF||(EF=new ro(t7)),EF))()){this.value=e,this.children=t}static fromObject(e){let t=new Xn(null);return Mi(e,(r,i)=>{t=t.set(new xn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:In(),value:this.value};if(nn(e))return null;{const r=tn(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(Wn(e),t);return null!=s?{path:mr(new xn(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(nn(e))return this;{const t=tn(e),r=this.children.get(t);return null!==r?r.subtree(Wn(e)):new Xn(null)}}set(e,t){if(nn(e))return new Xn(t,this.children);{const r=tn(e),s=(this.children.get(r)||new Xn(null)).set(Wn(e),t),l=this.children.insert(r,s);return new Xn(this.value,l)}}remove(e){if(nn(e))return this.children.isEmpty()?new Xn(null):new Xn(null,this.children);{const t=tn(e),r=this.children.get(t);if(r){const i=r.remove(Wn(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new Xn(null):new Xn(this.value,s)}return this}}get(e){if(nn(e))return this.value;{const t=tn(e),r=this.children.get(t);return r?r.get(Wn(e)):null}}setTree(e,t){if(nn(e))return t;{const r=tn(e),s=(this.children.get(r)||new Xn(null)).setTree(Wn(e),t);let l;return l=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new Xn(this.value,l)}}fold(e){return this.fold_(In(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(mr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,In(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(nn(e))return null;{const s=tn(e),l=this.children.get(s);return l?l.findOnPath_(Wn(e),mr(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,In(),t)}foreachOnPath_(e,t,r){if(nn(e))return this;{this.value&&r(t,this.value);const i=tn(e),s=this.children.get(i);return s?s.foreachOnPath_(Wn(e),mr(t,i),r):new Xn(null)}}foreach(e){this.foreach_(In(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(mr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Ll{constructor(e){this.writeTree_=e}static empty(){return new Ll(new Xn(null))}}function y0(n,e,t){if(nn(e))return new Ll(new Xn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const l=Fs(i,e);return s=s.updateChild(l,t),new Ll(n.writeTree_.set(i,s))}{const i=new Xn(t),s=n.writeTree_.setTree(e,i);return new Ll(s)}}}function CF(n,e,t){let r=n;return Mi(t,(i,s)=>{r=y0(r,mr(e,i),s)}),r}function zG(n,e){if(nn(e))return Ll.empty();{const t=n.writeTree_.setTree(e,new Xn(null));return new Ll(t)}}function IF(n,e){return null!=kp(n,e)}function kp(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Fs(t.path,e)):null}function WG(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Qn,(r,i)=>{e.push(new cn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new cn(r,i.value))}),e}function _h(n,e){if(nn(e))return n;{const t=kp(n,e);return new Ll(null!=t?new Xn(t):n.writeTree_.subtree(e))}}function DF(n){return n.writeTree_.isEmpty()}function A_(n,e){return qG(In(),n.writeTree_,e)}function qG(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?((0,k.hu)(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=qG(mr(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(mr(n,".priority"),r)),t}}function DT(n,e){return XG(e,n)}function E9(n,e){if(n.snap)return La(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&La(mr(n.path,t),e))return!0;return!1}function I9(n){return n.visible}function KG(n,e,t){let r=Ll.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const l=s.path;let h;if(s.snap)La(t,l)?(h=Fs(t,l),r=y0(r,h,s.snap)):La(l,t)&&(h=Fs(l,t),r=y0(r,In(),s.snap.getChild(h)));else{if(!s.children)throw(0,k.g5)("WriteRecord should have .snap or .children");if(La(t,l))h=Fs(t,l),r=CF(r,h,s.children);else if(La(l,t))if(h=Fs(l,t),nn(h))r=CF(r,In(),s.children);else{const p=(0,k.DV)(s.children,tn(h));if(p){const _=p.getChild(Wn(h));r=y0(r,In(),_)}}}}}return r}function ZG(n,e,t,r,i){if(r||i){const s=_h(n.visibleWrites,e);return!i&&DF(s)?t:i||null!=t||IF(s,In())?A_(KG(n.allWrites,function(_){return(_.visible||i)&&(!r||!~r.indexOf(_.writeId))&&(La(_.path,e)||La(e,_.path))},e),t||Yt.EMPTY_NODE):null}{const s=kp(n.visibleWrites,e);if(null!=s)return s;{const l=_h(n.visibleWrites,e);return DF(l)?t:null!=t||IF(l,In())?A_(l,t||Yt.EMPTY_NODE):null}}}function ST(n,e,t,r){return ZG(n.writeTree,n.treePath,e,t,r)}function SF(n,e){return function D9(n,e,t){let r=Yt.EMPTY_NODE;const i=kp(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Qn,(s,l)=>{r=r.updateImmediateChild(s,l)}),r;if(t){const s=_h(n.visibleWrites,e);return t.forEachChild(Qn,(l,h)=>{const p=A_(_h(s,new xn(l)),h);r=r.updateImmediateChild(l,p)}),WG(s).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return WG(_h(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function YG(n,e,t,r){return function S9(n,e,t,r,i){(0,k.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=mr(e,t);if(IF(n.visibleWrites,s))return null;{const l=_h(n.visibleWrites,s);return DF(l)?i.getChild(t):A_(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function TT(n,e){return function A9(n,e){return kp(n.visibleWrites,e)}(n.writeTree,mr(n.treePath,e))}function TF(n,e,t){return function T9(n,e,t,r){const i=mr(e,t),s=kp(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?A_(_h(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function QG(n,e){return XG(mr(n.treePath,e),n.writeTree)}function XG(n,e){return{treePath:n,writeTree:e}}class k9{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,k.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,k.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,f0(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,h0(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,D_(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,k.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,f0(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const JG=new class O9{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class AF{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new gh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return TF(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Rp(this.viewCache_),s=function R9(n,e,t,r,i,s){return function M9(n,e,t,r,i,s,l){let h;const p=_h(n.visibleWrites,e),_=kp(p,In());if(null!=_)h=_;else{if(null==t)return[];h=A_(p,t)}if(h=h.withIndex(l),h.isEmpty()||h.isLeafNode())return[];{const w=[],D=l.getCompare(),M=s?h.getReverseIteratorFrom(r,l):h.getIteratorFrom(r,l);let P=M.getNext();for(;P&&w.length<i;)0!==D(P,r)&&w.push(P),P=M.getNext();return w}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function ez(n,e,t,r,i,s){const l=e.eventCache;if(null!=TT(r,t))return e;{let h,p;if(nn(t))if((0,k.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const _=Rp(e),D=SF(r,_ instanceof Yt?_:Yt.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),D,s)}else{const _=ST(r,Rp(e));h=n.filter.updateFullNode(e.eventCache.getNode(),_,s)}else{const _=tn(t);if(".priority"===_){(0,k.hu)(1===mh(t),"Can't have a priority with additional path components");const w=l.getNode();p=e.serverCache.getNode();const D=YG(r,t,w,p);h=null!=D?n.filter.updatePriority(w,D):l.getNode()}else{const w=Wn(t);let D;if(l.isCompleteForChild(_)){p=e.serverCache.getNode();const M=YG(r,t,l.getNode(),p);D=null!=M?l.getNode().getImmediateChild(_).updateChild(w,M):l.getNode().getImmediateChild(_)}else D=TF(r,_,e.serverCache);h=null!=D?n.filter.updateChild(l.getNode(),_,D,w,i,s):l.getNode()}}return _0(e,h,l.isFullyInitialized()||nn(t),n.filter.filtersNodes())}}function AT(n,e,t,r,i,s,l,h){const p=e.serverCache;let _;const w=l?n.filter:n.filter.getIndexedFilter();if(nn(t))_=w.updateFullNode(p.getNode(),r,null);else if(w.filtersNodes()&&!p.isFiltered()){const P=p.getNode().updateChild(t,r);_=w.updateFullNode(p.getNode(),P,null)}else{const P=tn(t);if(!p.isCompleteForPath(t)&&mh(t)>1)return e;const F=Wn(t),oe=p.getNode().getImmediateChild(P).updateChild(F,r);_=".priority"===P?w.updatePriority(p.getNode(),oe):w.updateChild(p.getNode(),P,oe,F,JG,null)}const D=GG(e,_,p.isFullyInitialized()||nn(t),w.filtersNodes());return ez(n,D,t,i,new AF(i,D,s),h)}function MF(n,e,t,r,i,s,l){const h=e.eventCache;let p,_;const w=new AF(i,e,s);if(nn(t))_=n.filter.updateFullNode(e.eventCache.getNode(),r,l),p=_0(e,_,!0,n.filter.filtersNodes());else{const D=tn(t);if(".priority"===D)_=n.filter.updatePriority(e.eventCache.getNode(),r),p=_0(e,_,h.isFullyInitialized(),h.isFiltered());else{const M=Wn(t),P=h.getNode().getImmediateChild(D);let F;if(nn(M))F=r;else{const q=w.getCompleteChild(D);F=null!=q?".priority"===sF(M)&&q.getChild(SG(M)).isEmpty()?q:q.updateChild(M,r):Yt.EMPTY_NODE}p=P.equals(F)?e:_0(e,n.filter.updateChild(h.getNode(),D,F,M,w,l),h.isFullyInitialized(),n.filter.filtersNodes())}}return p}function tz(n,e){return n.eventCache.isCompleteForChild(e)}function nz(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function xF(n,e,t,r,i,s,l,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let _,p=e;_=nn(t)?r:new Xn(null).setTree(t,r);const w=e.serverCache.getNode();return _.children.inorderTraversal((D,M)=>{if(w.hasChild(D)){const F=nz(0,e.serverCache.getNode().getImmediateChild(D),M);p=AT(n,p,new xn(D),F,i,s,l,h)}}),_.children.inorderTraversal((D,M)=>{const P=!e.serverCache.isCompleteForChild(D)&&null===M.value;if(!w.hasChild(D)&&!P){const q=nz(0,e.serverCache.getNode().getImmediateChild(D),M);p=AT(n,p,new xn(D),q,i,s,l,h)}}),p}class j9{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new pF(r.getIndex()),s=function n9(n){return n.loadsAllData()?new pF(n.getIndex()):n.hasLimit()?new t9(n):new p0(n)}(r);this.processor_=function P9(n){return{filter:n}}(s);const l=t.serverCache,h=t.eventCache,p=i.updateFullNode(Yt.EMPTY_NODE,l.getNode(),null),_=s.updateFullNode(Yt.EMPTY_NODE,h.getNode(),null),w=new gh(p,l.isFullyInitialized(),i.filtersNodes()),D=new gh(_,h.isFullyInitialized(),s.filtersNodes());this.viewCache_=CT(D,w),this.eventGenerator_=new f9(this.query_)}get query(){return this.query_}}function z9(n,e){const t=Rp(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!nn(e)&&!t.getImmediateChild(tn(e)).isEmpty())?t.getChild(e):null}function rz(n){return 0===n.eventRegistrations_.length}function iz(n,e,t){const r=[];if(t){(0,k.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(s=>{const l=s.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){const l=n.eventRegistrations_[s];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function sz(n,e,t,r){e.type===Va.MERGE&&null!==e.source.queryId&&((0,k.hu)(Rp(n.viewCache_),"We should always have a full cache before handling merges"),(0,k.hu)(IT(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function F9(n,e,t,r,i){const s=new k9;let l,h;if(t.type===Va.OVERWRITE){const _=t;_.source.fromUser?l=MF(n,e,_.path,_.snap,r,i,s):((0,k.hu)(_.source.fromServer,"Unknown source."),h=_.source.tagged||e.serverCache.isFiltered()&&!nn(_.path),l=AT(n,e,_.path,_.snap,r,i,h,s))}else if(t.type===Va.MERGE){const _=t;_.source.fromUser?l=function V9(n,e,t,r,i,s,l){let h=e;return r.foreach((p,_)=>{const w=mr(t,p);tz(e,tn(w))&&(h=MF(n,h,w,_,i,s,l))}),r.foreach((p,_)=>{const w=mr(t,p);tz(e,tn(w))||(h=MF(n,h,w,_,i,s,l))}),h}(n,e,_.path,_.children,r,i,s):((0,k.hu)(_.source.fromServer,"Unknown source."),h=_.source.tagged||e.serverCache.isFiltered(),l=xF(n,e,_.path,_.children,r,i,h,s))}else if(t.type===Va.ACK_USER_WRITE){const _=t;l=_.revert?function H9(n,e,t,r,i,s){let l;if(null!=TT(r,t))return e;{const h=new AF(r,e,i),p=e.eventCache.getNode();let _;if(nn(t)||".priority"===tn(t)){let w;if(e.serverCache.isFullyInitialized())w=ST(r,Rp(e));else{const D=e.serverCache.getNode();(0,k.hu)(D instanceof Yt,"serverChildren would be complete if leaf node"),w=SF(r,D)}_=n.filter.updateFullNode(p,w,s)}else{const w=tn(t);let D=TF(r,w,e.serverCache);null==D&&e.serverCache.isCompleteForChild(w)&&(D=p.getImmediateChild(w)),_=null!=D?n.filter.updateChild(p,w,D,Wn(t),h,s):e.eventCache.getNode().hasChild(w)?n.filter.updateChild(p,w,Yt.EMPTY_NODE,Wn(t),h,s):p,_.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=ST(r,Rp(e)),l.isLeafNode()&&(_=n.filter.updateFullNode(_,l,s)))}return l=e.serverCache.isFullyInitialized()||null!=TT(r,In()),_0(e,_,l,n.filter.filtersNodes())}}(n,e,_.path,r,i,s):function B9(n,e,t,r,i,s,l){if(null!=TT(i,t))return e;const h=e.serverCache.isFiltered(),p=e.serverCache;if(null!=r.value){if(nn(t)&&p.isFullyInitialized()||p.isCompleteForPath(t))return AT(n,e,t,p.getNode().getChild(t),i,s,h,l);if(nn(t)){let _=new Xn(null);return p.getNode().forEachChild(Fc,(w,D)=>{_=_.set(new xn(w),D)}),xF(n,e,t,_,i,s,h,l)}return e}{let _=new Xn(null);return r.foreach((w,D)=>{const M=mr(t,w);p.isCompleteForPath(M)&&(_=_.set(w,p.getNode().getChild(M)))}),xF(n,e,t,_,i,s,h,l)}}(n,e,_.path,_.affectedTree,r,i,s)}else{if(t.type!==Va.LISTEN_COMPLETE)throw(0,k.g5)("Unknown operation type: "+t.type);l=function U9(n,e,t,r,i){const s=e.serverCache;return ez(n,GG(e,s.getNode(),s.isFullyInitialized()||nn(t),s.isFiltered()),t,r,JG,i)}(n,e,t.path,r,s)}const p=s.getChanges();return function L9(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=IT(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(UG(IT(e)))}}(e,l,p),{viewCache:l,changes:p}}(n.processor_,i,e,t,r);return function N9(n,e){(0,k.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,k.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,k.hu)(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,oz(n,s.changes,s.viewCache.eventCache.getNode(),null)}function oz(n,e,t,r){return function p9(n,e,t,r){const i=[],s=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&s.push(function e9(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),g0(n,i,"child_removed",e,r,t),g0(n,i,"child_added",e,r,t),g0(n,i,"child_moved",s,r,t),g0(n,i,"child_changed",e,r,t),g0(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let MT,RT;class az{constructor(){this.views=new Map}}function RF(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return(0,k.hu)(null!=s,"SyncTree gave us an op for an invalid query."),sz(s,e,t,r)}{let s=[];for(const l of n.views.values())s=s.concat(sz(l,e,t,r));return s}}function lz(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let h=ST(t,i?r:null),p=!1;h?p=!0:r instanceof Yt?(h=SF(t,r),p=!1):(h=Yt.EMPTY_NODE,p=!1);const _=CT(new gh(h,p,!1),new gh(r,i,!1));return new j9(e,_)}return l}function cz(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function yh(n,e){let t=null;for(const r of n.views.values())t=t||z9(r,e);return t}function uz(n,e){return e._queryParams.loadsAllData()?xT(n):n.views.get(e._queryIdentifier)}function dz(n,e){return null!=uz(n,e)}function vh(n){return null!=xT(n)}function xT(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let tQ=1;class hz{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Xn(null),this.pendingWriteTree_=function x9(){return{visibleWrites:Ll.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function kF(n,e,t,r,i){return function y9(n,e,t,r,i){(0,k.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=y0(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?M_(n,new xp({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function bh(n,e,t=!1){const r=function b9(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function w9(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,k.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const h=n.allWrites[l];h.visible&&(l>=t&&E9(h,r.path)?i=!1:La(r.path,h.path)&&(s=!0)),l--}return!!i&&(s?(function C9(n){n.visibleWrites=KG(n.allWrites,I9,In()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=zG(n.visibleWrites,r.path):Mi(r.children,p=>{n.visibleWrites=zG(n.visibleWrites,mr(r.path,p))}),!0))}(n.pendingWriteTree_,e)){let s=new Xn(null);return null!=r.snap?s=s.set(In(),!0):Mi(r.children,l=>{s=s.set(new xn(l),!0)}),M_(n,new ET(r.path,s,t))}return[]}function v0(n,e,t){return M_(n,new xp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function kT(n,e,t,r,i=!1){const s=e._path,l=n.syncPointTree_.get(s);let h=[];if(l&&("default"===e._queryIdentifier||dz(l,e))){const p=function X9(n,e,t,r){const i=e._queryIdentifier,s=[];let l=[];const h=vh(n);if("default"===i)for(const[p,_]of n.views.entries())l=l.concat(iz(_,t,r)),rz(_)&&(n.views.delete(p),_.query._queryParams.loadsAllData()||s.push(_.query));else{const p=n.views.get(i);p&&(l=l.concat(iz(p,t,r)),rz(p)&&(n.views.delete(i),p.query._queryParams.loadsAllData()||s.push(p.query)))}return h&&!vh(n)&&s.push(new(function Z9(){return(0,k.hu)(MT,"Reference.ts has not been loaded"),MT}())(e._repo,e._path)),{removed:s,events:l}}(l,e,t,r);(function Y9(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const _=p.removed;if(h=p.events,!i){const w=-1!==_.findIndex(M=>M._queryParams.loadsAllData()),D=n.syncPointTree_.findOnPath(s,(M,P)=>vh(P));if(w&&!D){const M=n.syncPointTree_.subtree(s);if(!M.isEmpty()){const P=function lQ(n){return n.fold((e,t,r)=>{if(t&&vh(t))return[xT(t)];{let i=[];return t&&(i=cz(t)),Mi(r,(s,l)=>{i=i.concat(l)}),i}})}(M);for(let F=0;F<P.length;++F){const q=P[F],oe=q.query,xe=gz(n,q);n.listenProvider_.startListening(w0(oe),b0(n,oe),xe.hashFn,xe.onComplete)}}}!D&&_.length>0&&!r&&(w?n.listenProvider_.stopListening(w0(e),null):_.forEach(M=>{const P=n.queryToTagMap.get(PT(M));n.listenProvider_.stopListening(w0(M),P)}))}!function cQ(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=PT(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}(n,_)}return h}function fz(n,e,t,r){const i=PF(n,r);if(null!=i){const s=NF(i),l=s.path,h=s.queryId,p=Fs(l,e);return FF(n,l,new xp(wF(h),p,t))}return[]}function OF(n,e,t,r=!1){const i=e._path;let s=null,l=!1;n.syncPointTree_.foreachOnPath(i,(M,P)=>{const F=Fs(M,i);s=s||yh(P,F),l=l||vh(P)});let p,h=n.syncPointTree_.get(i);h?(l=l||vh(h),s=s||yh(h,In())):(h=new az,n.syncPointTree_=n.syncPointTree_.set(i,h)),null!=s?p=!0:(p=!1,s=Yt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((P,F)=>{const q=yh(F,In());q&&(s=s.updateImmediateChild(P,q))}));const _=dz(h,e);if(!_&&!e._queryParams.loadsAllData()){const M=PT(e);(0,k.hu)(!n.queryToTagMap.has(M),"View does not exist, but we have a tag");const P=function uQ(){return tQ++}();n.queryToTagMap.set(M,P),n.tagToQueryMap.set(P,M)}let D=function Q9(n,e,t,r,i,s){const l=lz(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function W9(n,e){n.eventRegistrations_.push(e)}(l,t),function q9(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Qn,(s,l)=>{r.push(D_(s,l))}),t.isFullyInitialized()&&r.push(UG(t.getNode())),oz(n,r,t.getNode(),e)}(l,t)}(h,e,t,DT(n.pendingWriteTree_,i),s,p);if(!_&&!l&&!r){const M=uz(h,e);D=D.concat(function dQ(n,e,t){const r=e._path,i=b0(n,e),s=gz(n,t),l=n.listenProvider_.startListening(w0(e),i,s.hashFn,s.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,k.hu)(!vh(h.value),"If we're adding a query, it shouldn't be shadowed");else{const p=h.fold((_,w,D)=>{if(!nn(_)&&w&&vh(w))return[xT(w).query];{let M=[];return w&&(M=M.concat(cz(w).map(P=>P.query))),Mi(D,(P,F)=>{M=M.concat(F)}),M}});for(let _=0;_<p.length;++_){const w=p[_];n.listenProvider_.stopListening(w0(w),b0(n,w))}}return l}(n,e,M))}return D}function OT(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(l,h)=>{const _=yh(h,Fs(l,e));if(_)return _});return ZG(i,e,s,t,!0)}function M_(n,e){return pz(e,n.syncPointTree_,null,DT(n.pendingWriteTree_,In()))}function pz(n,e,t,r){if(nn(n.path))return mz(n,e,t,r);{const i=e.get(In());null==t&&null!=i&&(t=yh(i,In()));let s=[];const l=tn(n.path),h=n.operationForChild(l),p=e.children.get(l);if(p&&h){const _=t?t.getImmediateChild(l):null,w=QG(r,l);s=s.concat(pz(h,p,_,w))}return i&&(s=s.concat(RF(i,n,r,t))),s}}function mz(n,e,t,r){const i=e.get(In());null==t&&null!=i&&(t=yh(i,In()));let s=[];return e.children.inorderTraversal((l,h)=>{const p=t?t.getImmediateChild(l):null,_=QG(r,l),w=n.operationForChild(l);w&&(s=s.concat(mz(w,h,p,_)))}),i&&(s=s.concat(RF(i,n,r,t))),s}function gz(n,e){const t=e.query,r=b0(n,t);return{hashFn:()=>(function $9(n){return n.viewCache_.serverCache.getNode()}(e)||Yt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function sQ(n,e,t){const r=PF(n,t);if(r){const i=NF(r),s=i.path,l=i.queryId,h=Fs(s,e);return FF(n,s,new m0(wF(l),h))}return[]}(n,t._path,r):function iQ(n,e){return M_(n,new m0({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function i7(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return kT(n,t,null,s)}}}}function b0(n,e){const t=PT(e);return n.queryToTagMap.get(t)}function PT(n){return n._path.toString()+"$"+n._queryIdentifier}function PF(n,e){return n.tagToQueryMap.get(e)}function NF(n){const e=n.indexOf("$");return(0,k.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new xn(n.substr(0,e))}}function FF(n,e,t){const r=n.syncPointTree_.get(e);return(0,k.hu)(r,"Missing sync point for query tag that we're tracking"),RF(r,t,DT(n.pendingWriteTree_,e),null)}function w0(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function eQ(){return(0,k.hu)(RT,"Reference.ts has not been loaded"),RT}())(n._repo,n._path):n}class LF{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new LF(t)}node(){return this.node_}}class VF{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=mr(this.path_,e);return new VF(this.syncTree_,t)}node(){return OT(this.syncTree_,this.path_)}}const _z=function(n,e,t){return n&&"object"==typeof n?((0,k.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?fQ(n[".sv"],e,t):"object"==typeof n[".sv"]?pQ(n[".sv"],e):void(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},fQ=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,k.hu)(!1,"Unexpected server value: "+n)},pQ=function(n,e,t){n.hasOwnProperty("increment")||(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,k.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,k.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},yz=function(n,e,t,r){return UF(e,new VF(t,n),r)},BF=function(n,e,t){return UF(n,new LF(e),t)};function UF(n,e,t){const r=n.getPriority().val(),i=_z(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const l=n,h=_z(l.getValue(),e,t);return h!==l.getValue()||i!==l.getPriority().val()?new E_(h,wr(i)):n}{const l=n;return s=l,i!==l.getPriority().val()&&(s=s.updatePriority(new E_(i))),l.forEachChild(Qn,(h,p)=>{const _=UF(p,e.getImmediateChild(h),t);_!==p&&(s=s.updateImmediateChild(h,_))}),s}}class HF{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function NT(n,e){let t=e instanceof xn?e:new xn(e),r=n,i=tn(t);for(;null!==i;){const s=(0,k.DV)(r.node.children,i)||{children:{},childCount:0};r=new HF(i,r,s),t=Wn(t),i=tn(t)}return r}function Op(n){return n.node.value}function jF(n,e){n.node.value=e,$F(n)}function vz(n){return n.node.childCount>0}function FT(n,e){Mi(n.node.children,(t,r)=>{e(new HF(t,n,r))})}function bz(n,e,t,r){t&&!r&&e(n),FT(n,i=>{bz(i,e,!0,r)}),t&&r&&e(n)}function E0(n){return new xn(null===n.parent?n.name:E0(n.parent)+"/"+n.name)}function $F(n){null!==n.parent&&function _Q(n,e,t){const r=function mQ(n){return void 0===Op(n)&&!vz(n)}(t),i=(0,k.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,$F(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,$F(n))}(n.parent,n.name,n)}const yQ=/[\[\].#$\/\u0000-\u001F\u007F]/,vQ=/[\[\].#$\u0000-\u001F\u007F]/,GF=10485760,LT=function(n){return"string"==typeof n&&0!==n.length&&!yQ.test(n)},wz=function(n){return"string"==typeof n&&0!==n.length&&!vQ.test(n)},C0=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!cT(n)||n&&"object"==typeof n&&(0,k.r3)(n,".sv")},Lc=function(n,e,t,r){r&&void 0===e||I0((0,k.gK)(n,"value"),e,t)},I0=function(n,e,t){const r=t instanceof xn?new N7(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Ap(r));if("function"==typeof e)throw new Error(n+"contains a function "+Ap(r)+" with contents = "+e.toString());if(cT(e))throw new Error(n+"contains "+e.toString()+" "+Ap(r));if("string"==typeof e&&e.length>GF/3&&(0,k.ug)(e)>GF)throw new Error(n+"contains a string greater than "+GF+" utf8 bytes "+Ap(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(Mi(e,(l,h)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(s=!0,!LT(l)))throw new Error(n+" contains an invalid key ("+l+") "+Ap(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function F7(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,k.ug)(e),TG(n)})(r,l),I0(n,h,r),function L7(n){const e=n.parts_.pop();n.byteLength_-=(0,k.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+Ap(r)+" in addition to actual children.")}},Ez=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,k.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];Mi(e,(l,h)=>{const p=new xn(l);if(I0(i,h,mr(t,p)),".priority"===sF(p)&&!C0(h))throw new Error(i+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(p)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const s=l0(r);for(let l=0;l<s.length;l++)if((".priority"!==s[l]||l!==s.length-1)&&!LT(s[l]))throw new Error(n+"contains an invalid key ("+s[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(P7);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&La(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},zF=function(n,e,t){if(!t||void 0!==e){if(cT(e))throw new Error((0,k.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!C0(e))throw new Error((0,k.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},D0=function(n,e,t,r){if(!(r&&void 0===t||LT(t)))throw new Error((0,k.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},S0=function(n,e,t,r){if(!(r&&void 0===t||wz(t)))throw new Error((0,k.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ba=function(n,e){if(".info"===tn(e))throw new Error(n+" failed = Can't modify data under /.info/")},Cz=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!LT(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),wz(n)}(t))throw new Error((0,k.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class CQ{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function VT(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!oF(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function Iz(n,e,t){VT(n,t),Dz(n,r=>oF(r,e))}function jo(n,e,t){VT(n,t),Dz(n,r=>La(r,e)||La(e,r))}function Dz(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(IQ(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function IQ(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Sp&&Ai("event: "+t.toString()),b_(r)}}}const Sz="repo_interrupt";class SQ{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new CQ,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=wT(),this.transactionQueueTree_=new HF,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Tz(n){const t=n.infoData_.getNode(new xn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function T0(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:Tz(n)})}function Az(n,e,t,r,i){n.dataUpdateCount++;const s=new xn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const p=(0,k.UI)(t,_=>wr(_));l=function oQ(n,e,t,r){const i=PF(n,r);if(i){const s=NF(i),l=s.path,h=s.queryId,p=Fs(l,e),_=Xn.fromObject(t);return FF(n,l,new T_(wF(h),p,_))}return[]}(n.serverSyncTree_,s,p,i)}else{const p=wr(t);l=fz(n.serverSyncTree_,s,p,i)}else if(r){const p=(0,k.UI)(t,_=>wr(_));l=function rQ(n,e,t){const r=Xn.fromObject(t);return M_(n,new T_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,p)}else{const p=wr(t);l=v0(n.serverSyncTree_,s,p)}let h=s;l.length>0&&(h=R_(n,s)),jo(n.eventQueue_,h,l)}function Mz(n,e){WF(n,"connected",e),!1===e&&function RQ(n){x_(n,"onDisconnectEvents");const e=T0(n),t=wT();yF(n.onDisconnect_,In(),(i,s)=>{const l=yz(i,s,n.serverSyncTree_,e);S_(t,i,l)});let r=[];yF(t,In(),(i,s)=>{r=r.concat(v0(n.serverSyncTree_,i,s));const l=YF(n,i);R_(n,l)}),n.onDisconnect_=wT(),jo(n.eventQueue_,In(),r)}(n)}function WF(n,e,t){const r=new xn("/.info/"+e),i=wr(t);n.infoData_.updateSnapshot(r,i);const s=v0(n.infoSyncTree_,r,i);jo(n.eventQueue_,r,s)}function BT(n){return n.nextWriteId_++}function qF(n,e,t,r,i){x_(n,"set",{path:e.toString(),value:t,priority:r});const s=T0(n),l=wr(t,r),h=OT(n.serverSyncTree_,e),p=BF(l,h,s),_=BT(n),w=kF(n.serverSyncTree_,e,p,_,!0);VT(n.eventQueue_,w),n.server_.put(e.toString(),l.val(!0),(M,P)=>{const F="ok"===M;F||ls("set at "+e+" failed: "+M);const q=bh(n.serverSyncTree_,_,!F);jo(n.eventQueue_,e,q),wh(0,i,M,P)});const D=YF(n,e);R_(n,D),jo(n.eventQueue_,D,[])}function kQ(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&_F(n.onDisconnect_,e),wh(0,t,r,i)})}function xz(n,e,t,r){const i=wr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(s,l)=>{"ok"===s&&S_(n.onDisconnect_,e,i),wh(0,r,s,l)})}function KF(n,e,t){let r;r=".info"===tn(e._path)?kT(n.infoSyncTree_,e,t):kT(n.serverSyncTree_,e,t),Iz(n.eventQueue_,e._path,r)}function Rz(n){n.persistentConnection_&&n.persistentConnection_.interrupt(Sz)}function x_(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Ai(t,...e)}function wh(n,e,t,r){e&&b_(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let s=i;r&&(s+=": "+r);const l=new Error(s);l.code=i,e(l)}})}function ZF(n,e,t){return OT(n.serverSyncTree_,e,t)||Yt.EMPTY_NODE}function UT(n,e=n.transactionQueueTree_){if(e||HT(n,e),Op(e)){const t=Oz(n,e);(0,k.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function VQ(n,e,t){const r=t.map(_=>_.currentWriteId),i=ZF(n,e,r);let s=i;const l=i.hash();for(let _=0;_<t.length;_++){const w=t[_];(0,k.hu)(0===w.status,"tryToSendTransactionQueue_: items in queue should all be run."),w.status=1,w.retryCount++;const D=Fs(e,w.path);s=s.updateChild(D,w.currentOutputSnapshotRaw)}const h=s.val(!0),p=e;n.server_.put(p.toString(),h,_=>{x_(n,"transaction put response",{path:p.toString(),status:_});let w=[];if("ok"===_){const D=[];for(let M=0;M<t.length;M++)t[M].status=2,w=w.concat(bh(n.serverSyncTree_,t[M].currentWriteId)),t[M].onComplete&&D.push(()=>t[M].onComplete(null,!0,t[M].currentOutputSnapshotResolved)),t[M].unwatcher();HT(n,NT(n.transactionQueueTree_,e)),UT(n,n.transactionQueueTree_),jo(n.eventQueue_,e,w);for(let M=0;M<D.length;M++)b_(D[M])}else{if("datastale"===_)for(let D=0;D<t.length;D++)t[D].status=3===t[D].status?4:0;else{ls("transaction at "+p.toString()+" failed: "+_);for(let D=0;D<t.length;D++)t[D].status=4,t[D].abortReason=_}R_(n,e)}},l)}(n,E0(e),t)}else vz(e)&&FT(e,t=>{UT(n,t)})}function R_(n,e){const t=kz(n,e),r=E0(t);return function BQ(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const p=e[h],_=Fs(t,p.path);let D,w=!1;if((0,k.hu)(null!==_,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)w=!0,D=p.abortReason,i=i.concat(bh(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=25)w=!0,D="maxretry",i=i.concat(bh(n.serverSyncTree_,p.currentWriteId,!0));else{const M=ZF(n,p.path,l);p.currentInputSnapshot=M;const P=e[h].update(M.val());if(void 0!==P){I0("transaction failed: Data returned ",P,p.path);let F=wr(P);"object"==typeof P&&null!=P&&(0,k.r3)(P,".priority")||(F=F.updatePriority(M.getPriority()));const oe=p.currentWriteId,xe=T0(n),Ge=BF(F,M,xe);p.currentOutputSnapshotRaw=F,p.currentOutputSnapshotResolved=Ge,p.currentWriteId=BT(n),l.splice(l.indexOf(oe),1),i=i.concat(kF(n.serverSyncTree_,p.path,Ge,p.currentWriteId,p.applyLocally)),i=i.concat(bh(n.serverSyncTree_,oe,!0))}else w=!0,D="nodata",i=i.concat(bh(n.serverSyncTree_,p.currentWriteId,!0))}jo(n.eventQueue_,t,i),i=[],w&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===D?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(D),!1,null)))}HT(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)b_(r[h]);UT(n,n.transactionQueueTree_)}(n,Oz(n,t),r),r}function kz(n,e){let t,r=n.transactionQueueTree_;for(t=tn(e);null!==t&&void 0===Op(r);)r=NT(r,t),t=tn(e=Wn(e));return r}function Oz(n,e){const t=[];return Pz(n,e,t),t.sort((r,i)=>r.order-i.order),t}function Pz(n,e,t){const r=Op(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);FT(e,i=>{Pz(n,i,t)})}function HT(n,e){const t=Op(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,jF(e,t.length>0?t:void 0)}FT(e,r=>{HT(n,r)})}function YF(n,e){const t=E0(kz(n,e)),r=NT(n.transactionQueueTree_,e);return function gQ(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{QF(n,i)}),QF(n,r),bz(r,i=>{QF(n,i)}),t}function QF(n,e){const t=Op(e);if(t){const r=[];let i=[],s=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,k.hu)(s===l-1,"All SENT items should be at beginning of queue."),s=l,t[l].status=3,t[l].abortReason="set"):((0,k.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(bh(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===s?jF(e,void 0):t.length=s+1,jo(n.eventQueue_,E0(e),i);for(let l=0;l<r.length;l++)b_(r[l])}}const XF=function(n,e){const t=jQ(n),r=t.namespace;return"firebase.com"===t.domain&&Pc(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Pc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ls("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new JN(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new xn(t.pathString)}},jQ=function(n){let e="",t="",r="",i="",s="",l=!0,h="https",p=443;if("string"==typeof n){let _=n.indexOf("//");_>=0&&(h=n.substring(0,_-1),n=n.substring(_+2));let w=n.indexOf("/");-1===w&&(w=n.length);let D=n.indexOf("?");-1===D&&(D=n.length),e=n.substring(0,Math.min(w,D)),w<D&&(i=function UQ(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(w,D)));const M=function HQ(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ls(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,D)));_=e.indexOf(":"),_>=0?(l="https"===h||"wss"===h,p=parseInt(e.substring(_+1),10)):_=e.length;const P=e.slice(0,_);if("localhost"===P.toLowerCase())t="localhost";else if(P.split(".").length<=2)t=P;else{const F=e.indexOf(".");r=e.substring(0,F).toLowerCase(),t=e.substring(F+1),s=r}"ns"in M&&(s=M.ns)}return{host:e,port:p,domain:t,subdomain:r,secure:l,scheme:h,pathString:i,namespace:s}};class Nz{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,k.Pz)(this.snapshot.exportVal())}}class Fz{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class JF{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,k.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Lz{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new k.BH;return kQ(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Ba("OnDisconnect.remove",this._path);const e=new k.BH;return xz(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Ba("OnDisconnect.set",this._path),Lc("OnDisconnect.set",e,this._path,!1);const t=new k.BH;return xz(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Ba("OnDisconnect.setWithPriority",this._path),Lc("OnDisconnect.setWithPriority",e,this._path,!1),zF("OnDisconnect.setWithPriority",t,!1);const r=new k.BH;return function OQ(n,e,t,r,i){const s=wr(t,r);n.server_.onDisconnectPut(e.toString(),s.val(!0),(l,h)=>{"ok"===l&&S_(n.onDisconnect_,e,s),wh(0,i,l,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Ba("OnDisconnect.update",this._path),Ez("OnDisconnect.update",e,this._path,!1);const t=new k.BH;return function PQ(n,e,t,r){if((0,k.xb)(t))return Ai("onDisconnect().update() called with empty data.  Don't do anything."),void wh(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,s)=>{"ok"===i&&Mi(t,(l,h)=>{const p=wr(h);S_(n.onDisconnect_,mr(e,l),p)}),wh(0,r,i,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class io{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return nn(this._path)?null:sF(this._path)}get ref(){return new Ua(this._repo,this._path)}get _queryIdentifier(){const e=jG(this._queryParams),t=YN(e);return"{}"===t?"default":t}get _queryObject(){return jG(this._queryParams)}isEqual(e){if(!((e=(0,k.m9)(e))instanceof io))return!1;const t=this._repo===e._repo,r=oF(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function O7(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function jT(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Eh(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Fc){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Fu)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Nc)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Qn){if(null!=e&&!C0(e)||null!=t&&!C0(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,k.hu)(n.getIndex()instanceof dF||n.getIndex()===hF,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function $T(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Ua extends io{constructor(e,t){super(e,t,new yT,!1)}get parent(){const e=SG(this._path);return null===e?null:new Ua(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Pp{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new xn(e),r=Np(this.ref,e);return new Pp(this._node.getChild(t),r,Qn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Pp(i,Np(this.ref,r),Qn)))}hasChild(e){const t=new xn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Vz(n,e){return(n=(0,k.m9)(n))._checkNotDeleted("ref"),void 0!==e?Np(n._root,e):n._root}function Bz(n,e){(n=(0,k.m9)(n))._checkNotDeleted("refFromURL");const t=XF(e,n._repo.repoInfo_.nodeAdmin);Cz("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Pc("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),Vz(n,t.path.toString())}function Np(n,e){return null===tn((n=(0,k.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),S0("child","path",t,!1)):S0("child","path",e,!1),new Ua(n._repo,mr(n._path,e));var t}function e1(n,e){n=(0,k.m9)(n),Ba("set",n._path),Lc("set",e,n._path,!1);const t=new k.BH;return qF(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function qQ(n,e){Ez("update",e,n._path,!1);const t=new k.BH;return function xQ(n,e,t,r){x_(n,"update",{path:e.toString(),value:t});let i=!0;const s=T0(n),l={};if(Mi(t,(h,p)=>{i=!1,l[h]=yz(mr(e,h),wr(p),n.serverSyncTree_,s)}),i)Ai("update() called with empty data.  Don't do anything."),wh(0,r,"ok",void 0);else{const h=BT(n),p=function nQ(n,e,t,r){!function v9(n,e,t,r){(0,k.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=CF(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Xn.fromObject(t);return M_(n,new T_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,h);VT(n.eventQueue_,p),n.server_.merge(e.toString(),t,(_,w)=>{const D="ok"===_;D||ls("update at "+e+" failed: "+_);const M=bh(n.serverSyncTree_,h,!D),P=M.length>0?R_(n,e):e;jo(n.eventQueue_,P,M),wh(0,r,_,w)}),Mi(t,_=>{const w=YF(n,mr(e,_));R_(n,w)}),jo(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function KQ(n){n=(0,k.m9)(n);const e=new JF(()=>{}),t=new A0(e);return function MQ(n,e,t){const r=function aQ(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(_,w)=>{const D=Fs(_,t);r=r||yh(w,D)});let i=n.syncPointTree_.get(t);i?r=r||yh(i,In()):(i=new az,n.syncPointTree_=n.syncPointTree_.set(t,i));const s=null!=r,l=s?new gh(r,!0,!1):null;return function G9(n){return IT(n.viewCache_)}(lz(i,e,DT(n.pendingWriteTree_,e._path),s?l.getNode():Yt.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const s=wr(i).withIndex(e._queryParams.getIndex());let l;if(OF(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())l=v0(n.serverSyncTree_,e._path,s);else{const h=b0(n.serverSyncTree_,e);l=fz(n.serverSyncTree_,e._path,s,h)}return jo(n.eventQueue_,e._path,l),kT(n.serverSyncTree_,e,t,null,!0),s},i=>(x_(n,"get for query "+(0,k.Pz)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Pp(r,new Ua(n._repo,n._path),n._queryParams.getIndex()))}class A0{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new Nz("value",this,new Pp(e.snapshotNode,new Ua(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Fz(this,e,t):null}matches(e){return e instanceof A0&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class GT{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Fz(this,e,t):null}createEvent(e,t){(0,k.hu)(null!=e.childName,"Child events should have a childName.");const r=Np(new Ua(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new Nz(e.type,this,new Pp(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof GT&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function M0(n,e,t,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const p=t,_=(w,D)=>{KF(n._repo,n,h),p(w,D)};_.userCallback=t.userCallback,_.context=t.context,t=_}const l=new JF(t,s||void 0),h="value"===e?new A0(l):new GT(e,l);return function NQ(n,e,t){let r;r=".info"===tn(e._path)?OF(n.infoSyncTree_,e,t):OF(n.serverSyncTree_,e,t),Iz(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>KF(n._repo,n,h)}function t1(n,e,t,r){return M0(n,"value",e,t,r)}function Uz(n,e,t,r){return M0(n,"child_added",e,t,r)}function Hz(n,e,t,r){return M0(n,"child_changed",e,t,r)}function jz(n,e,t,r){return M0(n,"child_moved",e,t,r)}function $z(n,e,t,r){return M0(n,"child_removed",e,t,r)}function Gz(n,e,t){let r=null;const i=t?new JF(t):null;"value"===e?r=new A0(i):e&&(r=new GT(e,i)),KF(n._repo,n,r)}class Vl{}class zz extends Vl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Lc("endAt",this._value,e._path,!0);const t=gF(e._queryParams,this._value,this._key);if($T(t),Eh(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new io(e._repo,e._path,t,e._orderByCalled)}}class YQ extends Vl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Lc("endBefore",this._value,e._path,!1);const t=function o9(n,e,t){let r,i;return n.index_===Fc?("string"==typeof e&&(e=BG(e)),i=gF(n,e,t)):(r=null==t?Fu:BG(t),i=gF(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if($T(t),Eh(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new io(e._repo,e._path,t,e._orderByCalled)}}class Wz extends Vl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Lc("startAt",this._value,e._path,!0);const t=mF(e._queryParams,this._value,this._key);if($T(t),Eh(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new io(e._repo,e._path,t,e._orderByCalled)}}class JQ extends Vl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Lc("startAfter",this._value,e._path,!1);const t=function s9(n,e,t){let r;if(n.index_===Fc)"string"==typeof e&&(e=VG(e)),r=mF(n,e,t);else{let i;i=null==t?Nc:VG(t),r=mF(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if($T(t),Eh(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new io(e._repo,e._path,t,e._orderByCalled)}}class tX extends Vl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new io(e._repo,e._path,function r9(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class rX extends Vl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new io(e._repo,e._path,function i9(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class sX extends Vl{constructor(e){super(),this._path=e}_apply(e){jT(e,"orderByChild");const t=new xn(this._path);if(nn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new dF(t),i=vT(e._queryParams,r);return Eh(i),new io(e._repo,e._path,i,!0)}}class aX extends Vl{_apply(e){jT(e,"orderByKey");const t=vT(e._queryParams,Fc);return Eh(t),new io(e._repo,e._path,t,!0)}}class cX extends Vl{_apply(e){jT(e,"orderByPriority");const t=vT(e._queryParams,Qn);return Eh(t),new io(e._repo,e._path,t,!0)}}class dX extends Vl{_apply(e){jT(e,"orderByValue");const t=vT(e._queryParams,hF);return Eh(t),new io(e._repo,e._path,t,!0)}}class fX extends Vl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Lc("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new zz(this._value,this._key)._apply(new Wz(this._value,this._key)._apply(e))}}function Bl(n,...e){let t=(0,k.m9)(n);for(const r of e)t=r._apply(t);return t}(function K9(n){(0,k.hu)(!MT,"__referenceConstructor has already been defined"),MT=n})(Ua),function J9(n){(0,k.hu)(!RT,"__referenceConstructor has already been defined"),RT=n}(Ua);const n1={};function Kz(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||Pc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ai("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,_,l=XF(s,i),h=l.repoInfo;typeof process<"u"&&process.env&&(_=process.env.FIREBASE_DATABASE_EMULATOR_HOST),_?(p=!0,s=`http://${_}?ns=${h.namespace}`,l=XF(s,i),h=l.repoInfo):p=!l.repoInfo.secure;const w=i&&p?new a0(a0.OWNER):new l7(n.name,n.options,e);Cz("Invalid Firebase Database URL",l),nn(l.path)||Pc("Database URL must point to the root of a Firebase Database (not including a child path).");const D=function yX(n,e,t,r){let i=n1[e.name];i||(i={},n1[e.name]=i);let s=i[n.toURLString()];return s&&Pc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new SQ(n,false,t,r),i[n.toURLString()]=s,s}(h,n,w,new a7(n.name,t));return new bX(D,n)}class bX{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function TQ(n,e,t){if(n.stats_=nF(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new bT(n.repoInfo_,(r,i,s,l)=>{Az(n,r,i,s,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Mz(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,k.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Mp(n.repoInfo_,e,(r,i,s,l)=>{Az(n,r,i,s,l)},r=>{Mz(n,r)},r=>{!function AQ(n,e){Mi(e,(t,r)=>{WF(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function d7(n,e){const t=n.toString();return tF[t]||(tF[t]=e()),tF[t]}(n.repoInfo_,()=>new h9(n.stats_,n.server_)),n.infoData_=new a9,n.infoSyncTree_=new hz({startListening:(r,i,s,l)=>{let h=[];const p=n.infoData_.getNode(r._path);return p.isEmpty()||(h=v0(n.infoSyncTree_,r._path,p),setTimeout(()=>{l("ok")},0)),h},stopListening:()=>{}}),WF(n,"connected",!1),n.serverSyncTree_=new hz({startListening:(r,i,s,l)=>(n.server_.listen(r,s,i,(h,p)=>{const _=l(h,p);jo(n.eventQueue_,r._path,_)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ua(this._repo,In())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function _X(n,e){const t=n1[e];(!t||t[n.key]!==n)&&Pc(`Database ${e}(${n.repoInfo_}) has already been deleted.`),Rz(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Pc("Cannot call "+e+" on a deleted database.")}}function Zz(){pG.IS_TRANSPORT_INITIALIZED&&ls("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function wX(){Zz(),ph.forceDisallow()}function EX(){Zz(),w_.forceDisallow(),ph.forceAllow()}function SX(n,e){K$(n,e)}const AX={".sv":"timestamp"};class RX{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Mp.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Mp.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function TX(n){$$(Oe.SDK_VERSION),(0,Oe._registerComponent)(new We.wA("database",(e,{instanceIdentifier:t})=>Kz(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Oe.registerVersion)(H$,"0.13.6",n),(0,Oe.registerVersion)(H$,"0.13.6","esm2017")}();const NX=new mt.Yd("@firebase/database-compat"),Yz=function(n){NX.warn("FIREBASE WARNING: "+n)};class VX{constructor(e){this._delegate=e}cancel(e){(0,k.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,k.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,k.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,k.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,k.Dv)("OnDisconnect.set",1,2,arguments.length),(0,k.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,k.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,t){if((0,k.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,Yz("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,k.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class BX{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,k.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Ch{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,k.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,k.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,k.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,k.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,k.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),S0("DataSnapshot.child","path",e,!1),new Ch(this._database,this._delegate.child(e))}hasChild(e){return(0,k.Dv)("DataSnapshot.hasChild",1,1,arguments.length),S0("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,k.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,k.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,k.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Ch(this._database,t)))}hasChildren(){return(0,k.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,k.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,k.Dv)("DataSnapshot.ref",0,0,arguments.length),new $o(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class zi{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var s;(0,k.Dv)("Query.on",2,4,arguments.length),(0,k.Wj)("Query.on","callback",t,!1);const l=zi.getCancelAndContextArgs_("Query.on",r,i),h=(_,w)=>{t.call(l.context,new Ch(this.database,_),w)};h.userCallback=t,h.context=l.context;const p=null===(s=l.cancel)||void 0===s?void 0:s.bind(l.context);switch(e){case"value":return t1(this._delegate,h,p),t;case"child_added":return Uz(this._delegate,h,p),t;case"child_removed":return $z(this._delegate,h,p),t;case"child_changed":return Hz(this._delegate,h,p),t;case"child_moved":return jz(this._delegate,h,p),t;default:throw new Error((0,k.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,k.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,k.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,k.Wj)("Query.off","callback",t,!0),(0,k.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,Gz(this._delegate,e,i)}else Gz(this._delegate,e)}get(){return KQ(this._delegate).then(e=>new Ch(this.database,e))}once(e,t,r,i){(0,k.Dv)("Query.once",1,4,arguments.length),(0,k.Wj)("Query.once","callback",t,!0);const s=zi.getCancelAndContextArgs_("Query.once",r,i),l=new k.BH,h=(_,w)=>{const D=new Ch(this.database,_);t&&t.call(s.context,D,w),l.resolve(D)};h.userCallback=t,h.context=s.context;const p=_=>{s.cancel&&s.cancel.call(s.context,_),l.reject(_)};switch(e){case"value":t1(this._delegate,h,p,{onlyOnce:!0});break;case"child_added":Uz(this._delegate,h,p,{onlyOnce:!0});break;case"child_removed":$z(this._delegate,h,p,{onlyOnce:!0});break;case"child_changed":Hz(this._delegate,h,p,{onlyOnce:!0});break;case"child_moved":jz(this._delegate,h,p,{onlyOnce:!0});break;default:throw new Error((0,k.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,k.Dv)("Query.limitToFirst",1,1,arguments.length),new zi(this.database,Bl(this._delegate,function nX(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new tX(n)}(e)))}limitToLast(e){return(0,k.Dv)("Query.limitToLast",1,1,arguments.length),new zi(this.database,Bl(this._delegate,function iX(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new rX(n)}(e)))}orderByChild(e){return(0,k.Dv)("Query.orderByChild",1,1,arguments.length),new zi(this.database,Bl(this._delegate,function oX(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return S0("orderByChild","path",n,!1),new sX(n)}(e)))}orderByKey(){return(0,k.Dv)("Query.orderByKey",0,0,arguments.length),new zi(this.database,Bl(this._delegate,function lX(){return new aX}()))}orderByPriority(){return(0,k.Dv)("Query.orderByPriority",0,0,arguments.length),new zi(this.database,Bl(this._delegate,function uX(){return new cX}()))}orderByValue(){return(0,k.Dv)("Query.orderByValue",0,0,arguments.length),new zi(this.database,Bl(this._delegate,function hX(){return new dX}()))}startAt(e=null,t){return(0,k.Dv)("Query.startAt",0,2,arguments.length),new zi(this.database,Bl(this._delegate,function XQ(n=null,e){return D0("startAt","key",e,!0),new Wz(n,e)}(e,t)))}startAfter(e=null,t){return(0,k.Dv)("Query.startAfter",0,2,arguments.length),new zi(this.database,Bl(this._delegate,function eX(n,e){return D0("startAfter","key",e,!0),new JQ(n,e)}(e,t)))}endAt(e=null,t){return(0,k.Dv)("Query.endAt",0,2,arguments.length),new zi(this.database,Bl(this._delegate,function ZQ(n,e){return D0("endAt","key",e,!0),new zz(n,e)}(e,t)))}endBefore(e=null,t){return(0,k.Dv)("Query.endBefore",0,2,arguments.length),new zi(this.database,Bl(this._delegate,function QQ(n,e){return D0("endBefore","key",e,!0),new YQ(n,e)}(e,t)))}equalTo(e,t){return(0,k.Dv)("Query.equalTo",1,2,arguments.length),new zi(this.database,Bl(this._delegate,function pX(n,e){return D0("equalTo","key",e,!0),new fX(n,e)}(e,t)))}toString(){return(0,k.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,k.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,k.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof zi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,k.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,k.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,k.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new $o(this.database,new Ua(this._delegate._repo,this._delegate._path))}}class $o extends zi{constructor(e,t){super(e,new io(t._repo,t._path,new yT,!1)),this.database=e,this._delegate=t}getKey(){return(0,k.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,k.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new $o(this.database,Np(this._delegate,e))}getParent(){(0,k.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new $o(this.database,e):null}getRoot(){return(0,k.Dv)("Reference.root",0,0,arguments.length),new $o(this.database,this._delegate.root)}set(e,t){(0,k.Dv)("Reference.set",1,2,arguments.length),(0,k.Wj)("Reference.set","onComplete",t,!0);const r=e1(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,k.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,Yz("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ba("Reference.update",this._delegate._path),(0,k.Wj)("Reference.update","onComplete",t,!0);const r=qQ(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,k.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function WQ(n,e,t){if(Ba("setWithPriority",n._path),Lc("setWithPriority",e,n._path,!1),zF("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new k.BH;return qF(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){(0,k.Dv)("Reference.remove",0,1,arguments.length),(0,k.Wj)("Reference.remove","onComplete",e,!0);const t=function GQ(n){return Ba("remove",n._path),e1(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,k.Dv)("Reference.transaction",1,3,arguments.length),(0,k.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,k.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,k.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function kX(n,e,t){var r;if(n=(0,k.m9)(n),Ba("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,s=new k.BH,h=t1(n,()=>{});return function LQ(n,e,t,r,i,s){x_(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:z$(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=ZF(n,e,void 0);l.currentInputSnapshot=h;const p=l.update(h.val());if(void 0===p)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{I0("transaction failed: Data returned ",p,l.path),l.status=0;const _=NT(n.transactionQueueTree_,e),w=Op(_)||[];let D;w.push(l),jF(_,w),"object"==typeof p&&null!==p&&(0,k.r3)(p,".priority")?(D=(0,k.DV)(p,".priority"),(0,k.hu)(C0(D),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):D=(OT(n.serverSyncTree_,e)||Yt.EMPTY_NODE).getPriority().val();const M=T0(n),P=wr(p,D),F=BF(P,h,M);l.currentOutputSnapshotRaw=P,l.currentOutputSnapshotResolved=F,l.currentWriteId=BT(n);const q=kF(n.serverSyncTree_,e,F,l.currentWriteId,l.applyLocally);jo(n.eventQueue_,e,q),UT(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(p,_,w)=>{let D=null;p?s.reject(p):(D=new Pp(w,new Ua(n._repo,n._path),Qn),s.resolve(new RX(_,D)))},h,i),s.promise}(this._delegate,e,{applyLocally:r}).then(s=>new BX(s.committed,new Ch(this.database,s.snapshot)));return t&&i.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),i}setPriority(e,t){(0,k.Dv)("Reference.setPriority",1,2,arguments.length),(0,k.Wj)("Reference.setPriority","onComplete",t,!0);const r=function zQ(n,e){n=(0,k.m9)(n),Ba("setPriority",n._path),zF("setPriority",e,!1);const t=new k.BH;return qF(n._repo,mr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,k.Dv)("Reference.push",0,2,arguments.length),(0,k.Wj)("Reference.push","onComplete",t,!0);const r=function $Q(n,e){n=(0,k.m9)(n),Ba("push",n._path),Lc("push",e,n._path,!0);const t=Tz(n._repo),r=J7(t),i=Np(n,r),s=Np(n,r);let l;return l=null!=e?e1(s,e).then(()=>s):Promise.resolve(s),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new $o(this.database,l));t&&i.then(()=>t(null),l=>t(l));const s=new $o(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return Ba("Reference.onDisconnect",this._delegate._path),new VX(new Lz(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class x0{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:wX,forceLongPolling:EX}}useEmulator(e,t,r={}){!function CX(n,e,t,r={}){(n=(0,k.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Pc("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Pc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new a0(a0.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,k.Sg)(r.mockUserToken,n.app.options.projectId);s=new a0(l)}!function gX(n,e,t,r){n.repoInfo_=new JN(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,s)}(this._delegate,e,t,r)}ref(e){if((0,k.Dv)("database.ref",0,1,arguments.length),e instanceof $o){const t=Bz(this._delegate,e.toString());return new $o(this,t)}{const t=Vz(this._delegate,e);return new $o(this,t)}}refFromURL(e){(0,k.Dv)("database.refFromURL",1,1,arguments.length);const r=Bz(this._delegate,e);return new $o(this,r)}goOffline(){return(0,k.Dv)("database.goOffline",0,0,arguments.length),function IX(n){(n=(0,k.m9)(n))._checkNotDeleted("goOffline"),Rz(n._repo)}(this._delegate)}goOnline(){return(0,k.Dv)("database.goOnline",0,0,arguments.length),function DX(n){(n=(0,k.m9)(n))._checkNotDeleted("goOnline"),function FQ(n){n.persistentConnection_&&n.persistentConnection_.resume(Sz)}(n._repo)}(this._delegate)}}x0.ServerValue={TIMESTAMP:function MX(){return AX}(),increment:n=>function xX(n){return{".sv":{increment:n}}}(n)};var HX=Object.freeze({__proto__:null,initStandalone:function UX({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:s=!1}){$$(t);const l=new We.zt("auth-internal",new We.H0("database-standalone"));return l.setComponent(new We.wA("auth-internal",()=>r,"PRIVATE")),{instance:new x0(Kz(n,l,void 0,e,s),n),namespace:i}}});const jX=x0.ServerValue;function Qz(n){return null==n}function Xz(n){return"function"==typeof n.set}function Jz(n,e){return Xz(e)?e:n.ref(e)}function e3(n,e){if(function GX(n){return"string"==typeof n}(n))return e.stringCase();if(Xz(n))return e.firebaseCase();if(function zX(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function R0(n,e,t="on",r=dc.z){return new sr.y(i=>{let s=null;return s=n[t](e,(l,h)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=s&&n.off(e,s)}}:{unsubscribe(){}}}).pipe((0,lt.U)(i=>{const{snapshot:s,prevKey:l}=i;let h=null;return s.exists()&&(h=s.key),{type:e,payload:s,prevKey:l,key:h}}),(0,wg.B)())}function t3(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function KX(n,e){const{payload:t,prevKey:r,key:i}=e,s=t3(n,i),l=function qX(n,e){if(Qz(e))return 0;{const t=t3(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(p=>{const _={payload:p,type:"value",prevKey:h,key:p.key};return h=p.key,n=[...n,_],!1})}return n;case"child_added":if(s>-1){const h=n[s-1];(h&&h.key||null)!==r&&(n=n.filter(p=>p.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(s>-1){const h=n.splice(s,1)[0];return(n=n.slice()).splice(l,0,h),n}return n;default:return n}}function n3(n){return(Qz(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function r3(n,e,t){return function WX(n,e,t){return R0(n,"value","once",t).pipe(ur(r=>{const i=[et(r)];return e.forEach(s=>i.push(R0(n,s,"on",t))),(0,vc.T)(...i).pipe(qf(KX,[]))}),hE())}(n,e=n3(e),t)}function s3(n,e,t){const r=(e=n3(e)).map(i=>R0(n,i,"on",t));return(0,vc.T)(...r)}function o3(n,e){return function(r,i){return e3(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function XX(n){return function(t){return t?e3(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function a3(n,e){return function(){return R0(n,"value","on",e)}}!function $X(n){n.INTERNAL.registerComponent(new We.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new x0(i,r)},"PUBLIC").setServiceProps({Reference:$o,Query:zi,Database:x0,DataSnapshot:Ch,enableLogging:SX,INTERNAL:HX,ServerValue:jX}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.6")}(Vk.Z);const tJ=new u.OlP("angularfire2.realtimeDatabaseURL"),nJ=new u.OlP("angularfire2.database.use-emulator");let rJ=(()=>{class n{constructor(t,r,i,s,l,h,p,_,w,D,M,P,F,q,oe){this.schedulers=h;const xe=p,Ge=(0,$r.on)(t,l,r);_&&Lk(Ge,l,w,M,P,F,D,q),this.database=(0,$r.cc)(`${Ge.name}.database.${i}`,"AngularFireDatabase",Ge.name,()=>{const Xe=l.runOutsideAngular(()=>Ge.database(i||void 0));return xe&&Xe.useEmulator(...xe),Xe},[xe])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>Jz(this.database,t));let s=i;return r&&(s=r(i)),function JX(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:o3(r,"update"),set:o3(r,"set"),push:i=>r.push(i),remove:XX(r),snapshotChanges:i=>r3(n,i,t).pipe(En.iC),stateChanges:i=>s3(n,i,t).pipe(En.iC),auditTrail:i=>function ZX(n,e,t){return function QX(n,e,t){return function YX(n,e){return R0(n,"value","on",e).pipe((0,lt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function ZY(...n){const e=(0,ws.jO)(n);return(0,lr.e)((t,r)=>{const i=n.length,s=new Array(i);let l=n.map(()=>!1),h=!1;for(let p=0;p<i;p++)(0,Ia.Xf)(n[p]).subscribe((0,zn.x)(r,_=>{s[p]=_,!h&&!l[p]&&(l[p]=!0,(h=l.every(hc.y))&&(l=null))},um.Z));t.subscribe((0,zn.x)(r,p=>{if(h){const _=[p,...s];r.next(e?e(..._):_)}}))})}(e),(0,lt.U)(([i,s])=>{const l=i.lastKeyToLoad,h=s.map(p=>p.key);return{actions:s,lastKeyToLoad:l,loadedKeys:h}}),function YY(n){return(0,lr.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,zn.x)(t,s=>(r||(r=!n(s,i++)))&&t.next(s)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,lt.U)(i=>i.actions))}(n,s3(n,e).pipe(qf((i,s)=>[...i,s],[])),t)}(n,i,t).pipe(En.iC),valueChanges:(i,s)=>r3(n,i,t).pipe((0,lt.U)(h=>h.map(p=>s&&s.idField?Object.assign(Object.assign({},p.payload.val()),{[s.idField]:p.key}):p.payload.val())),En.iC)}}(s,this)}object(t){return function eJ(n,e){return{query:n,snapshotChanges:()=>a3(n,e.schedulers.outsideAngular)().pipe(En.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>a3(n,e.schedulers.outsideAngular)().pipe(En.iC,(0,lt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Jz(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(u.LFG($r.Dh),u.LFG($r.xv,8),u.LFG(tJ,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(En.HU),u.LFG(nJ,8),u.LFG(qb,8),u.LFG(Rk,8),u.LFG(kk,8),u.LFG(Ok,8),u.LFG(Pk,8),u.LFG(Nk,8),u.LFG(Fk,8),u.LFG(Wb,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),iJ=(()=>{class n{constructor(){BD.Z.registerVersion("angularfire",En.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[rJ]}),n})();function l3(n){return new sr.y(e=>{(0,Ia.Xf)(n()).subscribe(e)})}var sJ=L(9635);function r1(){return(0,lr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,zn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class c3 extends sr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,lr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new si.w0;const t=this.getSubject();e.add(this.source.subscribe((0,zn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=si.w0.EMPTY)}return e}refCount(){return r1()(this)}}function s1(n){return n<=0?()=>Zs.E:(0,lr.e)((e,t)=>{let r=[];e.subscribe((0,zn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function u3(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Hr((i,s)=>n(i,s,r)):hc.y,s1(1),t?Fb(e):pk(()=>new Nb))}const rn="primary",k0=Symbol("RouteTitle");class aJ{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function k_(n){return new aJ(n)}function lJ(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const l=r[s],h=n[s];if(l.startsWith(":"))i[l.substring(1)]=h;else if(l!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Vc(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!d3(n[i],e[i]))return!1;return!0}function d3(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function h3(n){return Array.prototype.concat.apply([],n)}function f3(n){return n.length>0?n[n.length-1]:null}function Wi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Ih(n){return(0,u.CqO)(n)?n:(0,u.QGY)(n)?(0,fn.D)(Promise.resolve(n)):et(n)}const dJ={exact:function g3(n,e,t){if(!Lp(n.segments,e.segments)||!zT(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!g3(n.children[r],e.children[r],t))return!1;return!0},subset:_3},p3={exact:function hJ(n,e){return Vc(n,e)},subset:function fJ(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>d3(n[t],e[t]))},ignored:()=>!0};function m3(n,e,t){return dJ[t.paths](n.root,e.root,t.matrixParams)&&p3[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function _3(n,e,t){return y3(n,e,e.segments,t)}function y3(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Lp(i,t)||e.hasChildren()||!zT(i,t,r))}if(n.segments.length===t.length){if(!Lp(n.segments,t)||!zT(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!_3(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Lp(n.segments,i)&&zT(n.segments,i,r)&&n.children[rn])&&y3(n.children[rn],e,s,r)}}function zT(n,e,t){return e.every((r,i)=>p3[t](n[i].parameters,r.parameters))}class Fp{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=k_(this.queryParams)),this._queryParamMap}toString(){return gJ.serialize(this)}}class un{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Wi(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return WT(this)}}class O0{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=k_(this.parameters)),this._parameterMap}toString(){return E3(this)}}function Lp(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let v3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return new a1},providedIn:"root"}),n})();class a1{parse(e){const t=new DJ(e);return new Fp(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${P0(e.root,!0)}`,r=function vJ(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${qT(t)}=${qT(i)}`).join("&"):`${qT(t)}=${qT(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function _J(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${i}`}}const gJ=new a1;function WT(n){return n.segments.map(e=>E3(e)).join("/")}function P0(n,e){if(!n.hasChildren())return WT(n);if(e){const t=n.children[rn]?P0(n.children[rn],!1):"",r=[];return Wi(n.children,(i,s)=>{s!==rn&&r.push(`${s}:${P0(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function mJ(n,e){let t=[];return Wi(n.children,(r,i)=>{i===rn&&(t=t.concat(e(r,i)))}),Wi(n.children,(r,i)=>{i!==rn&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===rn?[P0(n.children[rn],!1)]:[`${i}:${P0(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[rn]?`${WT(n)}/${t[0]}`:`${WT(n)}/(${t.join("//")})`}}function b3(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function qT(n){return b3(n).replace(/%3B/gi,";")}function l1(n){return b3(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function KT(n){return decodeURIComponent(n)}function w3(n){return KT(n.replace(/\+/g,"%20"))}function E3(n){return`${l1(n.path)}${function yJ(n){return Object.keys(n).map(e=>`;${l1(e)}=${l1(n[e])}`).join("")}(n.parameters)}`}const bJ=/^[^\/()?;=#]+/;function ZT(n){const e=n.match(bJ);return e?e[0]:""}const wJ=/^[^=?&#]+/,CJ=/^[^&#]+/;class DJ{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new un([],{}):new un([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[rn]=new un(e,t)),r}parseSegment(){const e=ZT(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new u.vHH(4009,!1);return this.capture(e),new O0(KT(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=ZT(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=ZT(this.remaining);i&&(r=i,this.capture(r))}e[KT(t)]=KT(r)}parseQueryParam(e){const t=function EJ(n){const e=n.match(wJ);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function IJ(n){const e=n.match(CJ);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=w3(t),s=w3(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=ZT(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new u.vHH(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=rn);const l=this.parseChildren();t[s]=1===Object.keys(l).length?l[rn]:new un([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new u.vHH(4011,!1)}}function c1(n){return n.segments.length>0?new un([],{[rn]:n}):n}function YT(n){const e={};for(const r of Object.keys(n.children)){const s=YT(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function SJ(n){if(1===n.numberOfChildren&&n.children[rn]){const e=n.children[rn];return new un(n.segments.concat(e.segments),e.children)}return n}(new un(n.segments,e))}function Vp(n){return n instanceof Fp}function MJ(n,e,t,r,i){if(0===t.length)return O_(e.root,e.root,e.root,r,i);const s=function D3(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new I3(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,l)=>{if("object"==typeof s&&null!=s){if(s.outlets){const h={};return Wi(s.outlets,(p,_)=>{h[_]="string"==typeof p?p.split("/"):p}),[...i,{outlets:h}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===l?(s.split("/").forEach((h,p)=>{0==p&&"."===h||(0==p&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,s]},[]);return new I3(t,e,r)}(t);return s.toRoot()?O_(e.root,e.root,new un([],{}),r,i):function l(p){const _=function RJ(n,e,t,r){if(n.isAbsolute)return new P_(e.root,!0,0);if(-1===r)return new P_(t,t===e.root,0);return function S3(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new u.vHH(4005,!1);i=r.segments.length}return new P_(r,!1,i-s)}(t,r+(N0(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,e,n.snapshot?._urlSegment,p),w=_.processChildren?L0(_.segmentGroup,_.index,s.commands):d1(_.segmentGroup,_.index,s.commands);return O_(e.root,_.segmentGroup,w,r,i)}(n.snapshot?._lastPathIndex)}function N0(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function F0(n){return"object"==typeof n&&null!=n&&n.outlets}function O_(n,e,t,r,i){let l,s={};r&&Wi(r,(p,_)=>{s[_]=Array.isArray(p)?p.map(w=>`${w}`):`${p}`}),l=n===e?t:C3(n,e,t);const h=c1(YT(l));return new Fp(h,s,i)}function C3(n,e,t){const r={};return Wi(n.children,(i,s)=>{r[s]=i===e?t:C3(i,e,t)}),new un(n.segments,r)}class I3{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&N0(r[0]))throw new u.vHH(4003,!1);const i=r.find(F0);if(i&&i!==f3(r))throw new u.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class P_{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function d1(n,e,t){if(n||(n=new un([],{})),0===n.segments.length&&n.hasChildren())return L0(n,e,t);const r=function OJ(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const l=n.segments[i],h=t[r];if(F0(h))break;const p=`${h}`,_=r<t.length-1?t[r+1]:null;if(i>0&&void 0===p)break;if(p&&_&&"object"==typeof _&&void 0===_.outlets){if(!A3(p,_,l))return s;r+=2}else{if(!A3(p,{},l))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new un(n.segments.slice(0,r.pathIndex),{});return s.children[rn]=new un(n.segments.slice(r.pathIndex),n.children),L0(s,0,i)}return r.match&&0===i.length?new un(n.segments,{}):r.match&&!n.hasChildren()?h1(n,e,t):r.match?L0(n,0,i):h1(n,e,t)}function L0(n,e,t){if(0===t.length)return new un(n.segments,{});{const r=function kJ(n){return F0(n[0])?n[0].outlets:{[rn]:n}}(t),i={};return Wi(r,(s,l)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[l]=d1(n.children[l],e,s))}),Wi(n.children,(s,l)=>{void 0===r[l]&&(i[l]=s)}),new un(n.segments,i)}}function h1(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(F0(s)){const p=PJ(s.outlets);return new un(r,p)}if(0===i&&N0(t[0])){r.push(new O0(n.segments[e].path,T3(t[0]))),i++;continue}const l=F0(s)?s.outlets[rn]:`${s}`,h=i<t.length-1?t[i+1]:null;l&&h&&N0(h)?(r.push(new O0(l,T3(h))),i+=2):(r.push(new O0(l,{})),i++)}return new un(r,{})}function PJ(n){const e={};return Wi(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=h1(new un([],{}),0,t))}),e}function T3(n){const e={};return Wi(n,(t,r)=>e[r]=`${t}`),e}function A3(n,e,t){return n==t.path&&Vc(e,t.parameters)}class Vu{constructor(e,t){this.id=e,this.url=t}}class f1 extends Vu{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Bp extends Vu{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class QT extends Vu{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class M3 extends Vu{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class NJ extends Vu{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class FJ extends Vu{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class LJ extends Vu{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class VJ extends Vu{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class BJ extends Vu{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class UJ{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class HJ{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class jJ{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $J{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class GJ{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zJ{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class x3{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class R3{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=p1(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=p1(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=m1(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return m1(e,this._root).map(t=>t.value)}}function p1(n,e){if(n===e.value)return e;for(const t of e.children){const r=p1(n,t);if(r)return r}return null}function m1(n,e){if(n===e.value)return[e];for(const t of e.children){const r=m1(n,t);if(r.length)return r.unshift(e),r}return[]}class Bu{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function N_(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class k3 extends R3{constructor(e,t){super(e),this.snapshot=t,g1(this,e)}toString(){return this.snapshot.toString()}}function O3(n,e){const t=function qJ(n,e){const l=new XT([],{},{},"",{},rn,e,null,n.root,-1,{});return new N3("",new Bu(l,[]))}(n,e),r=new xr([new O0("",{})]),i=new xr({}),s=new xr({}),l=new xr({}),h=new xr(""),p=new Up(r,i,l,h,s,rn,e,t.root);return p.snapshot=t.root,new k3(new Bu(p,[]),t)}class Up{constructor(e,t,r,i,s,l,h,p){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=l,this.component=h,this.title=this.data?.pipe((0,lt.U)(_=>_[k0]))??et(void 0),this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,lt.U)(e=>k_(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,lt.U)(e=>k_(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function P3(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function KJ(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class XT{constructor(e,t,r,i,s,l,h,p,_,w,D,M){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=l,this.component=h,this.title=this.data?.[k0],this.routeConfig=p,this._urlSegment=_,this._lastPathIndex=w,this._correctedLastPathIndex=M??w,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=k_(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=k_(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class N3 extends R3{constructor(e,t){super(t),this.url=e,g1(this,t)}toString(){return F3(this._root)}}function g1(n,e){e.value._routerState=n,e.children.forEach(t=>g1(n,t))}function F3(n){const e=n.children.length>0?` { ${n.children.map(F3).join(", ")} } `:"";return`${n.value}${e}`}function _1(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Vc(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Vc(e.params,t.params)||n.params.next(t.params),function cJ(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Vc(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Vc(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function y1(n,e){const t=Vc(n.params,e.params)&&function pJ(n,e){return Lp(n,e)&&n.every((t,r)=>Vc(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||y1(n.parent,e.parent))}function V0(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function YJ(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return V0(n,r,i);return V0(n,r)})}(n,e,t);return new Bu(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const l=s.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(h=>V0(n,h)),l}}const r=function QJ(n){return new Up(new xr(n.url),new xr(n.params),new xr(n.queryParams),new xr(n.fragment),new xr(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>V0(n,s));return new Bu(r,i)}}const v1="ngNavigationCancelingError";function L3(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Vp(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=V3(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function V3(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[v1]=!0,r.cancellationCode=e,t&&(r.url=t),r}function B3(n){return U3(n)&&Vp(n.url)}function U3(n){return n&&n[v1]}class XJ{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new B0,this.attachRef=null}}let B0=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new XJ,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const JT=!1;let b1=(()=>{class n{constructor(t,r,i,s,l){this.parentContexts=t,this.location=r,this.changeDetector=s,this.environmentInjector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.attachEvents=new u.vpe,this.detachEvents=new u.vpe,this.name=i||rn,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new u.vHH(4012,JT);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new u.vHH(4012,JT);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new u.vHH(4012,JT);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new u.vHH(4013,JT);this._activatedRoute=t;const i=this.location,l=t._futureSnapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,p=new JJ(t,h,i.injector);if(r&&function eee(n){return!!n.resolveComponentFactory}(r)){const _=r.resolveComponentFactory(l);this.activated=i.createComponent(_,i.length,p)}else this.activated=i.createComponent(l,{index:i.length,injector:p,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(B0),u.Y36(u.s_b),u.$8M("name"),u.Y36(u.sBO),u.Y36(u.lqb))},n.\u0275dir=u.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class JJ{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Up?this.route:e===B0?this.childContexts:this.parent.get(e,t)}}let w1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[u.jDz],decls:1,vars:0,template:function(t,r){1&t&&u._UZ(0,"router-outlet")},dependencies:[b1],encapsulation:2}),n})();function H3(n,e){return n.providers&&!n._injector&&(n._injector=(0,u.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function C1(n){const e=n.children&&n.children.map(C1),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==rn&&(t.component=w1),t}function Ha(n){return n.outlet||rn}function j3(n,e){const t=n.filter(r=>Ha(r)===e);return t.push(...n.filter(r=>Ha(r)!==e)),t}function U0(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class see{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),_1(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=N_(t);e.children.forEach(s=>{const l=s.value.outlet;this.deactivateRoutes(s,i[l],r),delete i[l]}),Wi(i,(s,l)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=N_(e);for(const l of Object.keys(s))this.deactivateRouteAndItsChildren(s[l],i);if(r&&r.outlet){const l=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=N_(e);for(const l of Object.keys(s))this.deactivateRouteAndItsChildren(s[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=N_(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new zJ(s.value.snapshot))}),e.children.length&&this.forwardEvent(new $J(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(_1(i),i===s)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(h.contexts),l.attachRef=h.componentRef,l.route=h.route.value,l.outlet&&l.outlet.attach(h.componentRef,h.route.value),_1(h.route.value),this.activateChildRoutes(e,null,l.children)}else{const h=U0(i.snapshot),p=h?.get(u._Vd)??null;l.attachRef=null,l.route=i,l.resolver=p,l.injector=h,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class $3{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class eA{constructor(e,t){this.component=e,this.route=t}}function oee(n,e,t){const r=n._root;return H0(r,e?e._root:null,t,[r.value])}function F_(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,u.Z0I)(n)?e.get(n):n:r}function H0(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=N_(e);return n.children.forEach(l=>{(function lee(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,l=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(l&&s.routeConfig===l.routeConfig){const p=function cee(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Lp(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Lp(n.url,e.url)||!Vc(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!y1(n,e)||!Vc(n.queryParams,e.queryParams);default:return!y1(n,e)}}(l,s,s.routeConfig.runGuardsAndResolvers);p?i.canActivateChecks.push(new $3(r)):(s.data=l.data,s._resolvedData=l._resolvedData),H0(n,e,s.component?h?h.children:null:t,r,i),p&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new eA(h.outlet.component,l))}else l&&j0(e,h,i),i.canActivateChecks.push(new $3(r)),H0(n,null,s.component?h?h.children:null:t,r,i)})(l,s[l.value.outlet],t,r.concat([l.value]),i),delete s[l.value.outlet]}),Wi(s,(l,h)=>j0(l,t.getContext(h),i)),i}function j0(n,e,t){const r=N_(n),i=n.value;Wi(r,(s,l)=>{j0(s,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new eA(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function $0(n){return"function"==typeof n}function I1(n){return n instanceof Nb||"EmptyError"===n?.name}const tA=Symbol("INITIAL_VALUE");function L_(){return ur(n=>ly(n.map(e=>e.pipe(Ni(1),vi(tA)))).pipe((0,lt.U)(e=>{for(const t of e)if(!0!==t){if(t===tA)return tA;if(!1===t||t instanceof Fp)return t}return!0}),Hr(e=>e!==tA),Ni(1)))}function G3(n){return(0,sJ.z)((0,Gn.b)(e=>{if(Vp(e))throw L3(0,e)}),(0,lt.U)(e=>!0===e))}const D1={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function z3(n,e,t,r,i){const s=S1(n,e,t);return s.matched?function See(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?et(i.map(l=>{const h=F_(l,n);return Ih(function mee(n){return n&&$0(n.canMatch)}(h)?h.canMatch(e,t):n.runInContext(()=>h(e,t)))})).pipe(L_(),G3()):et(!0)}(r=H3(e,r),e,t).pipe((0,lt.U)(l=>!0===l?s:{...D1})):et(s)}function S1(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...D1}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||lJ)(t,n,e);if(!i)return{...D1};const s={};Wi(i.posParams,(h,p)=>{s[p]=h.path});const l=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function nA(n,e,t,r,i="corrected"){if(t.length>0&&function Mee(n,e,t){return t.some(r=>rA(n,e,r)&&Ha(r)!==rn)}(n,t,r)){const l=new un(e,function Aee(n,e,t,r){const i={};i[rn]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&Ha(s)!==rn){const l=new un([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[Ha(s)]=l}return i}(n,e,r,new un(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function xee(n,e,t){return t.some(r=>rA(n,e,r))}(n,t,r)){const l=new un(n.segments,function Tee(n,e,t,r,i,s){const l={};for(const h of r)if(rA(n,t,h)&&!i[Ha(h)]){const p=new un([],{});p._sourceSegment=n,p._segmentIndexShift="legacy"===s?n.segments.length:e.length,l[Ha(h)]=p}return{...i,...l}}(n,e,t,r,n.children,i));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const s=new un(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function rA(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function W3(n,e,t,r){return!!(Ha(n)===r||r!==rn&&rA(e,t,n))&&("**"===n.path||S1(e,n,t).matched)}function q3(n,e,t){return 0===e.length&&!n.children[t]}const iA=!1;class sA{constructor(e){this.segmentGroup=e||null}}class K3{constructor(e){this.urlTree=e}}function G0(n){return $d(new sA(n))}function Z3(n){return $d(new K3(n))}class Pee{constructor(e,t,r,i,s){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0}apply(){const e=nA(this.urlTree.root,[],[],this.config).segmentGroup,t=new un(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,rn).pipe((0,lt.U)(s=>this.createUrlTree(YT(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(xl(s=>{if(s instanceof K3)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof sA?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,rn).pipe((0,lt.U)(i=>this.createUrlTree(YT(i),e.queryParams,e.fragment))).pipe(xl(i=>{throw i instanceof sA?this.noMatchError(i):i}))}noMatchError(e){return new u.vHH(4002,iA)}createUrlTree(e,t,r){const i=c1(e);return new Fp(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,lt.U)(s=>new un([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return(0,fn.D)(i).pipe(Rl(s=>{const l=r.children[s],h=j3(t,s);return this.expandSegmentGroup(e,h,l,s).pipe((0,lt.U)(p=>({segment:p,outlet:s})))}),qf((s,l)=>(s[l.outlet]=l.segment,s),{}),u3())}expandSegment(e,t,r,i,s,l){return(0,fn.D)(r).pipe(Rl(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,s,l).pipe(xl(_=>{if(_ instanceof sA)return et(null);throw _}))),Ic(h=>!!h),xl((h,p)=>{if(I1(h))return q3(t,i,s)?et(new un([],{})):G0(t);throw h}))}expandSegmentAgainstRoute(e,t,r,i,s,l,h){return W3(i,t,s,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,l):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,l):G0(t):G0(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Z3(s):this.lineralizeSegments(r,s).pipe((0,li.z)(l=>{const h=new un(l,{});return this.expandSegment(e,h,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,l){const{matched:h,consumedSegments:p,remainingSegments:_,positionalParamSegments:w}=S1(t,i,s);if(!h)return G0(t);const D=this.applyRedirectCommands(p,i.redirectTo,w);return i.redirectTo.startsWith("/")?Z3(D):this.lineralizeSegments(i,D).pipe((0,li.z)(M=>this.expandSegment(e,t,r,M.concat(_),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){return"**"===r.path?(e=H3(r,e),r.loadChildren?(r._loadedRoutes?et({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,lt.U)(h=>(r._loadedRoutes=h.routes,r._loadedInjector=h.injector,new un(i,{})))):et(new un(i,{}))):z3(t,r,i,e).pipe(ur(({matched:l,consumedSegments:h,remainingSegments:p})=>l?this.getChildConfig(e=r._injector??e,r,i).pipe((0,li.z)(w=>{const D=w.injector??e,M=w.routes,{segmentGroup:P,slicedSegments:F}=nA(t,h,p,M),q=new un(P.segments,P.children);if(0===F.length&&q.hasChildren())return this.expandChildren(D,M,q).pipe((0,lt.U)(Xe=>new un(h,Xe)));if(0===M.length&&0===F.length)return et(new un(h,{}));const oe=Ha(r)===s;return this.expandSegment(D,q,M,F,oe?rn:s,!0).pipe((0,lt.U)(Ge=>new un(h.concat(Ge.segments),Ge.children)))})):G0(t)))}getChildConfig(e,t,r){return t.children?et({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?et({routes:t._loadedRoutes,injector:t._loadedInjector}):function Dee(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?et(!0):et(i.map(l=>{const h=F_(l,n);return Ih(function dee(n){return n&&$0(n.canLoad)}(h)?h.canLoad(e,t):n.runInContext(()=>h(e,t)))})).pipe(L_(),G3())}(e,t,r).pipe((0,li.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,Gn.b)(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function kee(n){return $d(V3(iA,3))}())):et({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return et(r);if(i.numberOfChildren>1||!i.children[rn])return $d(new u.vHH(4e3,iA));i=i.children[rn]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new Fp(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Wi(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[s]=t[h]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let l={};return Wi(t.children,(h,p)=>{l[p]=this.createSegmentGroup(e,h,r,i)}),new un(s,l)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new u.vHH(4001,iA);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class Fee{}class Bee{constructor(e,t,r,i,s,l,h,p){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=s,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=h,this.urlSerializer=p}recognize(){const e=nA(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,rn).pipe((0,lt.U)(t=>{if(null===t)return null;const r=new XT([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},rn,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Bu(r,t),s=new N3(this.url,i);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,r=P3(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,fn.D)(Object.keys(r.children)).pipe(Rl(i=>{const s=r.children[i],l=j3(t,i);return this.processSegmentGroup(e,l,s,i)}),qf((i,s)=>i&&s?(i.push(...s),i):null),function oJ(n,e=!1){return(0,lr.e)((t,r)=>{let i=0;t.subscribe((0,zn.x)(r,s=>{const l=n(s,i++);(l||e)&&r.next(s),!l&&r.complete()}))})}(i=>null!==i),Fb(null),u3(),(0,lt.U)(i=>{if(null===i)return null;const s=Y3(i);return function Uee(n){n.sort((e,t)=>e.value.outlet===rn?-1:t.value.outlet===rn?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,r,i,s){return(0,fn.D)(t).pipe(Rl(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,i,s)),Ic(l=>!!l),xl(l=>{if(I1(l))return q3(r,i,s)?et([]):et(null);throw l}))}processSegmentAgainstRoute(e,t,r,i,s){if(t.redirectTo||!W3(t,r,i,s))return et(null);let l;if("**"===t.path){const h=i.length>0?f3(i).parameters:{},p=X3(r)+i.length;l=et({snapshot:new XT(i,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,eW(t),Ha(t),t.component??t._loadedComponent??null,t,Q3(r),p,tW(t),p),consumedSegments:[],remainingSegments:[]})}else l=z3(r,t,i,e).pipe((0,lt.U)(({matched:h,consumedSegments:p,remainingSegments:_,parameters:w})=>{if(!h)return null;const D=X3(r)+p.length;return{snapshot:new XT(p,w,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,eW(t),Ha(t),t.component??t._loadedComponent??null,t,Q3(r),D,tW(t),D),consumedSegments:p,remainingSegments:_}}));return l.pipe(ur(h=>{if(null===h)return et(null);const{snapshot:p,consumedSegments:_,remainingSegments:w}=h;e=t._injector??e;const D=t._loadedInjector??e,M=function Hee(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:P,slicedSegments:F}=nA(r,_,w,M.filter(oe=>void 0===oe.redirectTo),this.relativeLinkResolution);if(0===F.length&&P.hasChildren())return this.processChildren(D,M,P).pipe((0,lt.U)(oe=>null===oe?null:[new Bu(p,oe)]));if(0===M.length&&0===F.length)return et([new Bu(p,[])]);const q=Ha(t)===s;return this.processSegment(D,M,P,F,q?rn:s).pipe((0,lt.U)(oe=>null===oe?null:[new Bu(p,oe)]))}))}}function jee(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Y3(n){const e=[],t=new Set;for(const r of n){if(!jee(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Y3(r.children);e.push(new Bu(r.value,i))}return e.filter(r=>!t.has(r))}function Q3(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function X3(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function eW(n){return n.data||{}}function tW(n){return n.resolve||{}}function nW(n){return"string"==typeof n.title||null===n.title}function T1(n){return ur(e=>{const t=n(e);return t?(0,fn.D)(t).pipe((0,lt.U)(()=>e)):et(e)})}let rW=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===rn);return r}getResolvedTitleForRoute(t){return t.data[k0]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(iW)},providedIn:"root"}),n})(),iW=(()=>{class n extends rW{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Xi))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Yee{}class Xee extends class Qee{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const aA=new u.OlP("",{providedIn:"root",factory:()=>({})}),A1=new u.OlP("ROUTES");let M1=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return et(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Ih(t.loadComponent()).pipe((0,Gn.b)(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),bc(()=>{this.componentLoaders.delete(t)})),i=new c3(r,()=>new Bt.x).pipe(r1());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return et({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,lt.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(r);let p,_,w=!1;Array.isArray(h)?_=h:(p=h.create(t).injector,_=h3(p.get(A1,[],u.XFs.Self|u.XFs.Optional)));return{routes:_.map(C1),injector:p}}),bc(()=>{this.childrenLoaders.delete(r)})),l=new c3(s,()=>new Bt.x).pipe(r1());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return Ih(t()).pipe((0,li.z)(r=>r instanceof u.YKP||Array.isArray(r)?et(r):(0,fn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.zs3),u.LFG(u.Sil))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class ete{}class tte{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function nte(n){throw n}function rte(n,e,t){return e.parse("/")}const ite={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ste={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function oW(){const n=(0,u.f3M)(v3),e=(0,u.f3M)(B0),t=(0,u.f3M)(Fe),r=(0,u.f3M)(u.zs3),i=(0,u.f3M)(u.Sil),s=(0,u.f3M)(A1,{optional:!0})??[],l=(0,u.f3M)(aA,{optional:!0})??{},h=(0,u.f3M)(iW),p=(0,u.f3M)(rW,{optional:!0}),_=(0,u.f3M)(ete,{optional:!0}),w=(0,u.f3M)(Yee,{optional:!0}),D=new zr(null,n,e,t,r,i,h3(s));return _&&(D.urlHandlingStrategy=_),w&&(D.routeReuseStrategy=w),D.titleStrategy=p??h,function ote(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,D),D}let zr=(()=>{class n{constructor(t,r,i,s,l,h,p){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=s,this.config=p,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Bt.x,this.errorHandler=nte,this.malformedUriErrorHandler=rte,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>et(void 0),this.urlHandlingStrategy=new tte,this.routeReuseStrategy=new Xee,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=l.get(M1),this.configLoader.onLoadEndListener=M=>this.triggerEvent(new HJ(M)),this.configLoader.onLoadStartListener=M=>this.triggerEvent(new UJ(M)),this.ngModule=l.get(u.h0i),this.console=l.get(u.c2e);const D=l.get(u.R0b);this.isNgZoneEnabled=D instanceof u.R0b&&u.R0b.isInAngularZone(),this.resetConfig(p),this.currentUrlTree=function uJ(){return new Fp(new un([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=O3(this.currentUrlTree,this.rootComponentType),this.transitions=new xr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Hr(i=>0!==i.id),(0,lt.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),ur(i=>{let s=!1,l=!1;return et(i).pipe((0,Gn.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.rawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),ur(h=>{const p=this.browserUrlTree.toString(),_=!this.navigated||h.extractedUrl.toString()!==p||p!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||_)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return aW(h.source)&&(this.browserUrlTree=h.extractedUrl),et(h).pipe(ur(D=>{const M=this.transitions.getValue();return r.next(new f1(D.id,this.serializeUrl(D.extractedUrl),D.source,D.restoredState)),M!==this.transitions.getValue()?Zs.E:Promise.resolve(D)}),function Nee(n,e,t,r){return ur(i=>function Oee(n,e,t,r,i){return new Pee(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,lt.U)(s=>({...i,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Gn.b)(D=>{this.currentNavigation={...this.currentNavigation,finalUrl:D.urlAfterRedirects},i.urlAfterRedirects=D.urlAfterRedirects}),function Gee(n,e,t,r,i,s){return(0,li.z)(l=>function Vee(n,e,t,r,i,s,l="emptyOnly",h="legacy"){return new Bee(n,e,t,r,i,l,h,s).recognize().pipe(ur(p=>null===p?function Lee(n){return new sr.y(e=>e.error(n))}(new Fee):et(p)))}(n,e,t,l.urlAfterRedirects,r.serialize(l.urlAfterRedirects),r,i,s).pipe((0,lt.U)(h=>({...l,targetSnapshot:h}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Gn.b)(D=>{if(i.targetSnapshot=D.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!D.extras.skipLocationChange){const P=this.urlHandlingStrategy.merge(D.urlAfterRedirects,D.rawUrl);this.setBrowserUrl(P,D)}this.browserUrlTree=D.urlAfterRedirects}const M=new NJ(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(D.urlAfterRedirects),D.targetSnapshot);r.next(M)}));if(_&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:M,extractedUrl:P,source:F,restoredState:q,extras:oe}=h,xe=new f1(M,this.serializeUrl(P),F,q);r.next(xe);const Ge=O3(P,this.rootComponentType).snapshot;return et(i={...h,targetSnapshot:Ge,urlAfterRedirects:P,extras:{...oe,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=h.rawUrl,h.resolve(null),Zs.E}),(0,Gn.b)(h=>{const p=new FJ(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(p)}),(0,lt.U)(h=>i={...h,guards:oee(h.targetSnapshot,h.currentSnapshot,this.rootContexts)}),function _ee(n,e){return(0,li.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:l}}=t;return 0===l.length&&0===s.length?et({...t,guardsResult:!0}):function yee(n,e,t,r){return(0,fn.D)(n).pipe((0,li.z)(i=>function Iee(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?et(s.map(h=>{const p=U0(e)??i,_=F_(h,p);return Ih(function pee(n){return n&&$0(n.canDeactivate)}(_)?_.canDeactivate(n,e,t,r):p.runInContext(()=>_(n,e,t,r))).pipe(Ic())})).pipe(L_()):et(!0)}(i.component,i.route,t,e,r)),Ic(i=>!0!==i,!0))}(l,r,i,n).pipe((0,li.z)(h=>h&&function uee(n){return"boolean"==typeof n}(h)?function vee(n,e,t,r){return(0,fn.D)(e).pipe(Rl(i=>Qh(function wee(n,e){return null!==n&&e&&e(new jJ(n)),et(!0)}(i.route.parent,r),function bee(n,e){return null!==n&&e&&e(new GJ(n)),et(!0)}(i.route,r),function Cee(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(l=>function aee(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>l3(()=>et(l.guards.map(p=>{const _=U0(l.node)??t,w=F_(p,_);return Ih(function fee(n){return n&&$0(n.canActivateChild)}(w)?w.canActivateChild(r,n):_.runInContext(()=>w(r,n))).pipe(Ic())})).pipe(L_())));return et(s).pipe(L_())}(n,i.path,t),function Eee(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return et(!0);const i=r.map(s=>l3(()=>{const l=U0(e)??t,h=F_(s,l);return Ih(function hee(n){return n&&$0(n.canActivate)}(h)?h.canActivate(e,n):l.runInContext(()=>h(e,n))).pipe(Ic())}));return et(i).pipe(L_())}(n,i.route,t))),Ic(i=>!0!==i,!0))}(r,s,n,e):et(h)),(0,lt.U)(h=>({...t,guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,Gn.b)(h=>{if(i.guardsResult=h.guardsResult,Vp(h.guardsResult))throw L3(0,h.guardsResult);const p=new LJ(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(p)}),Hr(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,"",3),!1)),T1(h=>{if(h.guards.canActivateChecks.length)return et(h).pipe((0,Gn.b)(p=>{const _=new VJ(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(_)}),ur(p=>{let _=!1;return et(p).pipe(function zee(n,e){return(0,li.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return et(t);let s=0;return(0,fn.D)(i).pipe(Rl(l=>function Wee(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!nW(i)&&(s[k0]=i.title),function qee(n,e,t,r){const i=function Kee(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return et({});const s={};return(0,fn.D)(i).pipe((0,li.z)(l=>function Zee(n,e,t,r){const i=U0(e)??r,s=F_(n,i);return Ih(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[l],e,t,r).pipe(Ic(),(0,Gn.b)(h=>{s[l]=h}))),s1(1),Gf(s),xl(l=>I1(l)?Zs.E:$d(l)))}(s,n,e,r).pipe((0,lt.U)(l=>(n._resolvedData=l,n.data=P3(n,t).resolve,i&&nW(i)&&(n.data[k0]=i.title),null)))}(l.route,r,n,e)),(0,Gn.b)(()=>s++),s1(1),(0,li.z)(l=>s===i.length?et(t):Zs.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Gn.b)({next:()=>_=!0,complete:()=>{_||(this.restoreHistory(p),this.cancelNavigationTransition(p,"",2))}}))}),(0,Gn.b)(p=>{const _=new BJ(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(_)}))}),T1(h=>{const p=_=>{const w=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&w.push(this.configLoader.loadComponent(_.routeConfig).pipe((0,Gn.b)(D=>{_.component=D}),(0,lt.U)(()=>{})));for(const D of _.children)w.push(...p(D));return w};return ly(p(h.targetSnapshot.root)).pipe(Fb(),Ni(1))}),T1(()=>this.afterPreactivation()),(0,lt.U)(h=>{const p=function ZJ(n,e,t){const r=V0(n,e._root,t?t._root:void 0);return new k3(r,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return i={...h,targetRouterState:p}}),(0,Gn.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,lt.U)(r=>(new see(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,Gn.b)({next(){s=!0},complete(){s=!0}}),bc(()=>{s||l||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),xl(h=>{if(l=!0,U3(h)){B3(h)||(this.navigated=!0,this.restoreHistory(i,!0));const p=new QT(i.id,this.serializeUrl(i.extractedUrl),h.message,h.cancellationCode);if(r.next(p),B3(h)){const _=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),w={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||aW(i.source)};this.scheduleNavigation(_,"imperative",null,w,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const p=new M3(i.id,this.serializeUrl(i.extractedUrl),h,i.targetSnapshot??void 0);r.next(p);try{i.resolve(this.errorHandler(h))}catch(_){i.reject(_)}}return Zs.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},s=t.state?.navigationId?t.state:null;if(s){const h={...s};delete h.navigationId,delete h.\u0275routerPageId,0!==Object.keys(h).length&&(i.state=h)}const l=this.parseUrl(t.url);this.scheduleNavigation(l,r,s,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(C1),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:l,queryParamsHandling:h,preserveFragment:p}=r,_=i||this.routerState.root,w=p?this.currentUrlTree.fragment:l;let D=null;switch(h){case"merge":D={...this.currentUrlTree.queryParams,...s};break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=s||null}return null!==D&&(D=this.removeEmptyProps(D)),MJ(_,this.currentUrlTree,t,D,w??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Vp(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function ate(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new u.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...ite}:!1===r?{...ste}:r,Vp(t))return m3(this.currentUrlTree,t,i);const s=this.parseUrl(t);return m3(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Bp(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,s,l){if(this.disposed)return Promise.resolve(!1);let h,p,_;l?(h=l.resolve,p=l.reject,_=l.promise):_=new Promise((M,P)=>{h=M,p=P});const w=++this.navigationId;let D;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),D=i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):D=0,this.setTransition({id:w,targetPageId:D,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:h,reject:p,promise:_,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),_.catch(M=>Promise.reject(M))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),s={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const s=new QT(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(s),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){u.$Z()},n.\u0275prov=u.Yz7({token:n,factory:function(){return oW()},providedIn:"root"}),n})();function aW(n){return"imperative"!==n}let z0=(()=>{class n{constructor(t,r,i,s,l){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=l,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new Bt.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,u.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,u.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,u.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(zr),u.Y36(Up),u.$8M("tabindex"),u.Y36(u.Qsj),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&u.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[u.TTD]}),n})(),Uu=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new Bt.x,this.subscription=t.events.subscribe(s=>{s instanceof Bp&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=(0,u.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,u.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,u.D6c)(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,s,l){return!!(0!==t||r||i||s||l||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(zr),u.Y36(Up),u.Y36(Ie))},n.\u0275dir=u.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&u.NdJ("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&u.uIk("target",r.target)("href",r.href,u.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[u.TTD]}),n})(),Hp=(()=>{class n{constructor(t,r,i,s,l,h){this.router=t,this.element=r,this.renderer=i,this.cdr=s,this.link=l,this.linkWithHref=h,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new u.vpe,this.routerEventsSubscription=t.events.subscribe(p=>{p instanceof Bp&&this.update()})}ngAfterContentInit(){et(this.links.changes,this.linksWithHrefs.changes,et(null)).pipe((0,_d.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,fn.D)(t).pipe((0,_d.J)()).subscribe(r=>{this.isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function lte(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(zr),u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(u.sBO),u.Y36(z0,8),u.Y36(Uu,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,i){if(1&t&&(u.Suo(i,z0,5),u.Suo(i,Uu,5)),2&t){let s;u.iGM(s=u.CRH())&&(r.links=s),u.iGM(s=u.CRH())&&(r.linksWithHrefs=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[u.TTD]}),n})();class lW{}let cte=(()=>{class n{constructor(t,r,i,s,l){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(Hr(t=>t instanceof Bp),Rl(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=(0,u.MMx)(s.providers,t,`Route: ${s.path}`));const l=s._injector??t,h=s._loadedInjector??l;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?i.push(this.preloadConfig(l,s)):(s.children||s._loadedRoutes)&&i.push(this.processRoutes(h,s.children??s._loadedRoutes))}return(0,fn.D)(i).pipe((0,_d.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):et(null);const s=i.pipe((0,li.z)(l=>null===l?et(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,fn.D)([s,l]).pipe((0,_d.J)())}return s})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(zr),u.LFG(u.Sil),u.LFG(u.lqb),u.LFG(lW),u.LFG(M1))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const x1=new u.OlP("");let cW=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof f1?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Bp&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof x3&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new x3(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){u.$Z()},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function V_(n,e){return{\u0275kind:n,\u0275providers:e}}function R1(n){return[{provide:A1,multi:!0,useValue:n}]}function dW(){const n=(0,u.f3M)(u.zs3);return e=>{const t=n.get(u.z2F);if(e!==t.components[0])return;const r=n.get(zr),i=n.get(hW);1===n.get(k1)&&r.initialNavigation(),n.get(fW,null,u.XFs.Optional)?.setUpPreloading(),n.get(x1,null,u.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.next(),i.complete()}}const hW=new u.OlP("",{factory:()=>new Bt.x}),k1=new u.OlP("",{providedIn:"root",factory:()=>1});const fW=new u.OlP("");function fte(n){return V_(0,[{provide:fW,useExisting:cte},{provide:lW,useExisting:n}])}const pW=new u.OlP("ROUTER_FORROOT_GUARD"),pte=[Fe,{provide:v3,useClass:a1},{provide:zr,useFactory:oW},B0,{provide:Up,useFactory:function uW(n){return n.routerState.root},deps:[zr]},M1];function mte(){return new u.PXZ("Router",zr)}let mW=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[pte,[],R1(t),{provide:pW,useFactory:vte,deps:[[zr,new u.FiY,new u.tp0]]},{provide:aA,useValue:r||{}},r?.useHash?{provide:Ie,useClass:rt}:{provide:Ie,useClass:nt},{provide:x1,useFactory:()=>{const n=(0,u.f3M)(zr),e=(0,u.f3M)(Zu),t=(0,u.f3M)(aA);return t.scrollOffset&&e.setOffset(t.scrollOffset),new cW(n,e,t)}},r?.preloadingStrategy?fte(r.preloadingStrategy).\u0275providers:[],{provide:u.PXZ,multi:!0,useFactory:mte},r?.initialNavigation?bte(r):[],[{provide:gW,useFactory:dW},{provide:u.tb,multi:!0,useExisting:gW}]]}}static forChild(t){return{ngModule:n,providers:[R1(t)]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(pW,8))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[w1]}),n})();function vte(n){return"guarded"}function bte(n){return["disabled"===n.initialNavigation?V_(3,[{provide:u.ip1,multi:!0,useFactory:()=>{const e=(0,u.f3M)(zr);return()=>{e.setUpLocationChangeListener()}}},{provide:k1,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?V_(2,[{provide:k1,useValue:0},{provide:u.ip1,multi:!0,deps:[u.zs3],useFactory:e=>{const t=e.get(K,Promise.resolve(null));let r=!1;return()=>t.then(()=>new Promise(s=>{const l=e.get(zr),h=e.get(hW);(function i(s){e.get(zr).events.pipe(Hr(h=>h instanceof Bp||h instanceof QT||h instanceof M3),(0,lt.U)(h=>h instanceof Bp||h instanceof QT&&(0===h.code||1===h.code)&&null),Hr(h=>null!==h),Ni(1)).subscribe(()=>{s()})})(()=>{s(!0),r=!0}),l.afterPreactivation=()=>(s(!0),r||h.closed?et(void 0):h),l.initialNavigation()}))}}]).\u0275providers:[]]}const gW=new u.OlP("");var Ete=L(8554);let O1=(()=>{class n{constructor(t,r){this.router=t,this._snackBar=r}navigateTo(t){this.router.navigateByUrl(t).then(r=>{},r=>{this._snackBar.open("Algo errado n\xe3o est\xe1 certo: falhou","fechar")})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(zr),u.LFG(sk))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Go=(()=>{class n{constructor(t,r,i,s,l,h){this.afs=t,this.auth=r,this.router=i,this.ngZone=s,this._snackBar=l,this._nav=h,this.userDoc=null,this.user=et(null),this.userData=null,this.auth.authState.subscribe(p=>{p?(this.userDoc=t.doc(`users/${p.uid}`),this.user=this.userDoc.valueChanges().pipe((0,Gn.b)(_=>{this.userData=_,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))}))):(this.user=et(null),localStorage.setItem("user","null"),this.userData=null,JSON.parse(localStorage.getItem("user")))})}signIn(t,r){return this.auth.signInWithEmailAndPassword(t,r).then(i=>{this.auth.authState.subscribe(s=>{s&&this._nav.navigateTo("/")})}).catch(i=>{console.log("Something went wrong: ",i.message),this._snackBar.open("Algo errado n\xe3o est\xe1 certo: login falhou","fechar")})}setUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified,curriculosUID:t.curriculosUID},{merge:!0})}signUp(t,r){return this.auth.createUserWithEmailAndPassword(t,r).then(i=>{this.sendVerificationMail(),this.setUserData(i.user)}).catch(i=>{this._snackBar.open("Algo errado n\xe3o est\xe1 certo: cadastro falhou","fechar"),console.log("Something went wrong: ",i)})}sendVerificationMail(){return this.auth.currentUser.then(t=>t.sendEmailVerification()).then(()=>{this._snackBar.open("Verifica\xe7\xe3o de email enviada, verifique","fechar"),this._nav.navigateTo("/verificar-email")})}forgotPassword(t){return this.auth.sendPasswordResetEmail(t).then(()=>{this._snackBar.open("Email para recupera\xe7\xe3o de senha enviado, verifique","fechar")}).catch(r=>{this._snackBar.open("Algo errado n\xe3o est\xe1 certo: email de recupera\xe7\xe3o falhou","fechar")})}get isLoggedIn(){const t=this.userData;return!!t&&!1!==t.emailVerified}googleLogin(){var t=new Ete.Q;return this.oAuthLogin(t).catch(r=>{this._snackBar.open("Algo errado n\xe3o est\xe1 certo: login goole falhou","fechar"),console.log("Something went wrong: ",r)})}signOut(){var t=this;return(0,H.Z)(function*(){return t.auth.signOut().then(()=>{t.user=et(null),t.userData=null,localStorage.removeItem("user")})})()}oAuthLogin(t){var r=this;return(0,H.Z)(function*(){return r.auth.signInWithPopup(t).then(i=>{}).catch(i=>{r._snackBar.open("Algo errado n\xe3o est\xe1 certo: login oAuth falhou","fechar"),console.log("Something went wrong: ",i)})})()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(WN),u.LFG(qb),u.LFG(zr),u.LFG(u.R0b),u.LFG(sk),u.LFG(O1))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),P1=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return!0!==this.authService.isLoggedIn&&(console.log("Acesso negado: AuthGuard"),this.router.navigate(["login"])),!0}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Go),u.LFG(zr))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),dA=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return this.authService.isLoggedIn&&(console.log("Acesso negado: NoAuthGuard"),this.router.navigateByUrl("")),!0}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Go),u.LFG(zr))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Cte=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}onEnter(t,r){this.authService.signIn(t,r)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Go))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-email-login"]],decls:30,vars:0,consts:[[1,"container"],[1,"mat-h3"],[1,"my-form"],["appearance","fill",1,"full-width"],["matInput","","value","","required","",3,"keyup.enter"],["userEmail",""],["matInput","","type","password","required","","autocomplete","current-password",3,"keyup.enter"],["userPassword",""],["mat-raised-button","",3,"click"],[1,"or"],[1,"orInner"],["svgIcon","google_logo",2,"width","40px","height","24px"],[1,"forgotPassword"],["routerLink","/esqueceu-senha","routerLinkActive","active"],[1,"redirectToLogin"],["routerLink","/cadastro","routerLinkActive","active"]],template:function(t,r){if(1&t){const i=u.EpF();u.TgZ(0,"div",0)(1,"h3",1),u._uU(2,"Fa\xe7a o Login"),u.qZA(),u.TgZ(3,"form",2)(4,"mat-form-field",3)(5,"mat-label"),u._uU(6,"Email"),u.qZA(),u.TgZ(7,"input",4,5),u.NdJ("keyup.enter",function(){u.CHM(i);const l=u.MAs(8),h=u.MAs(13);return u.KtG(r.onEnter(l.value,h.value))}),u.qZA()(),u.TgZ(9,"mat-form-field",3)(10,"mat-label"),u._uU(11,"Senha"),u.qZA(),u.TgZ(12,"input",6,7),u.NdJ("keyup.enter",function(){u.CHM(i);const l=u.MAs(8),h=u.MAs(13);return u.KtG(r.onEnter(l.value,h.value))}),u.qZA()()(),u.TgZ(14,"button",8),u.NdJ("click",function(){u.CHM(i);const l=u.MAs(8),h=u.MAs(13);return u.KtG(r.authService.signIn(l.value,h.value))}),u._uU(15," Entrar "),u.qZA(),u.TgZ(16,"div",9)(17,"span",10),u._uU(18,"ou"),u.qZA()(),u.TgZ(19,"button",8),u.NdJ("click",function(){return r.authService.googleLogin()}),u._UZ(20,"mat-icon",11),u._uU(21," Entrar com conta Google "),u.qZA(),u.TgZ(22,"div",12)(23,"a",13),u._uU(24,"Esqueceu a senha?"),u.qZA()(),u.TgZ(25,"div",14)(26,"span"),u._uU(27,"N\xe3o tem um cadastro? "),u.TgZ(28,"a",15),u._uU(29,"Cadastrar"),u.qZA()()()()}},dependencies:[Uu,Hp,pc,Jv,kf,eb,Hf],styles:[".forgotPassword[_ngcontent-%COMP%]{margin-top:15px}"]}),n})(),Ite=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Go))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-esqueceu-senha"]],decls:18,vars:0,consts:[[1,"container"],[1,"mat-h2"],[1,"text-center"],[1,"my-form"],["appearance","fill",1,"full-width"],["matInput","","value","","required",""],["userEmail",""],["mat-raised-button","",3,"click"],[1,"redirectToLogin"],["routerLink","/login","routerLinkActive","active"]],template:function(t,r){if(1&t){const i=u.EpF();u.TgZ(0,"div",0)(1,"h2",1),u._uU(2,"Recuperar Senha"),u.qZA(),u.TgZ(3,"p",2),u._uU(4,"Informe o email utilizado no cadastro"),u.qZA(),u.TgZ(5,"form",3)(6,"mat-form-field",4)(7,"mat-label"),u._uU(8,"Email"),u.qZA(),u._UZ(9,"input",5,6),u.qZA()(),u.TgZ(11,"button",7),u.NdJ("click",function(){u.CHM(i);const l=u.MAs(10);return u.KtG(r.authService.forgotPassword(l.value))}),u._uU(12," Recuperar "),u.qZA(),u.TgZ(13,"div",8)(14,"span"),u._uU(15,"Voltar e fazer "),u.TgZ(16,"a",9),u._uU(17,"Login?"),u.qZA()()()()}},dependencies:[Uu,Hp,pc,Jv,kf,eb],styles:[".my-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%;display:flex;flex-direction:column}.full-width[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]{margin-top:10px;width:100%;display:flex;flex-direction:column;align-items:center}.redirectToLogin[_ngcontent-%COMP%]{margin-top:15px}"]}),n})();function Dte(n,e){1&n&&(u.TgZ(0,"div",4)(1,"span"),u._uU(2,"Voc\xea est\xe1 Logado. Mas ainda n\xe3o consegue fazer nada. O site ainda est\xe1 em desenvolvimento"),u.qZA()())}function Ste(n,e){1&n&&(u.TgZ(0,"div",4)(1,"span"),u._uU(2,"J\xe1 possui um cadastro? "),u.TgZ(3,"a",6),u._uU(4,"Fa\xe7a o Login"),u.qZA()()())}function Tte(n,e){if(1&n&&(u.YNc(0,Ste,5,0,"div",5),u.ALo(1,"async")),2&n){const t=u.oxw();u.Q6J("ngIf",!u.lcZ(1,1,t.authService.user))}}let Ate=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Go))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-inicio"]],decls:7,vars:4,consts:[[1,"container"],[1,"mat-h2"],["class","redirectToLogin",4,"ngIf","ngIfElse"],["loggedOut",""],[1,"redirectToLogin"],["class","redirectToLogin",4,"ngIf"],["routerLink","/login","routerLinkActive","active"]],template:function(t,r){if(1&t&&(u.TgZ(0,"div",0)(1,"h2",1),u._uU(2,"P\xe1gina Inicial"),u.qZA(),u.YNc(3,Dte,3,0,"div",2),u.ALo(4,"async"),u.YNc(5,Tte,2,3,"ng-template",null,3,u.W1O),u.qZA()),2&t){const i=u.MAs(6);u.xp6(3),u.Q6J("ngIf",u.lcZ(4,2,r.authService.user))("ngIfElse",i)}},dependencies:[Tn,Uu,Hp,$l]}),n})(),Mte=(()=>{class n{constructor(t,r){this.authService=t,this._nav=r}ngOnInit(){this.authService.user?.subscribe(()=>{this._nav.navigateTo("/")})}googleLogin(){this.authService.googleLogin()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Go),u.Y36(O1))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-login"]],decls:15,vars:0,consts:[[1,"container"],[1,"form-container"],["mat-raised-button","",1,"google",3,"click"],["svgIcon","google_logo",2,"width","40px","height","24px"],[1,"or"],[1,"orInner"],["mat-raised-button","","routerLink","/email-login",1,"email"],[1,"links"],["routerLink","/cadastro","routerLinkActive","active",1,"create-account-txt"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"div",1)(2,"button",2),u.NdJ("click",function(){return r.googleLogin()}),u._UZ(3,"mat-icon",3),u._uU(4," Entrar com conta Google "),u.qZA(),u.TgZ(5,"div",4)(6,"span",5),u._uU(7,"ou"),u.qZA()(),u.TgZ(8,"button",6),u._uU(9," Logar com Email "),u.qZA(),u.TgZ(10,"div",7)(11,"a",8),u._uU(12,"N\xe3o tem cadastro? "),u.TgZ(13,"strong"),u._uU(14,"Crie um"),u.qZA()()()()())},dependencies:[z0,Uu,Hp,pc,Hf],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:center}.form-container[_ngcontent-%COMP%]{margin:20px;display:flex;flex-direction:column;align-items:center}.form-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex-basis:20px}.links[_ngcontent-%COMP%]{margin-top:10px}"]}),n})(),xte=(()=>{class n{constructor(t,r){this.afs=t,this.authService=r,this.curriculoListDoc=null,this.curriculoList=void 0;const s=this.authService.userData;s&&(this.curriculoListDoc=t.doc(`curriculos/${s.uid}`),this.curriculoList=this.curriculoListDoc.valueChanges(),!s.curriculosUID)&&this.afs.doc(`curriculos/${s.uid}`).set({uid:s.uid,ownerUID:s.uid,curriculos:[]},{merge:!0}).then(p=>{s.curriculosUID=s.uid,this.authService.setUserData(s).then()})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(WN),u.LFG(Go))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Rte=(()=>{class n{constructor(t,r){this.authService=t,this.curriculosService=r,this.userCurriculos=[],this.curriculosService.curriculoList?.subscribe(i=>{console.log({userCurriculos:i}),this.userCurriculos=i?.curriculos})}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Go),u.Y36(xte))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-painel"]],decls:3,vars:1,consts:[[1,"container"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"p"),u._uU(2),u.qZA()()),2&t&&(u.xp6(2),u.hij("Quantidade de Curr\xedculos: ",r.userCurriculos.length," "))}}),n})();function kte(n,e){if(1&n&&(u.TgZ(0,"div",1)(1,"ul")(2,"li"),u._uU(3," Email: "),u.TgZ(4,"strong"),u._uU(5),u.qZA()(),u.TgZ(6,"li"),u._uU(7," Name: "),u.TgZ(8,"strong"),u._uU(9),u.qZA()(),u.TgZ(10,"li"),u._uU(11," Email verified: "),u.TgZ(12,"strong"),u._uU(13),u.qZA()(),u.TgZ(14,"li"),u._uU(15," Uid: "),u.TgZ(16,"strong"),u._uU(17),u.qZA()()()()),2&n){const t=e.ngIf;u.xp6(5),u.Oqu(t.email),u.xp6(4),u.Oqu(t.displayName?t.displayName:"User"),u.xp6(4),u.Oqu(t.emailVerified),u.xp6(4),u.Oqu(t.uid)}}let Ote=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Go))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-perfil"]],decls:2,vars:3,consts:[["class","container",4,"ngIf"],[1,"container"]],template:function(t,r){1&t&&(u.YNc(0,kte,18,4,"div",0),u.ALo(1,"async")),2&t&&u.Q6J("ngIf",u.lcZ(1,1,r.authService.user))},dependencies:[Tn,$l],styles:["ul[_ngcontent-%COMP%]{list-style:none}"]}),n})(),Pte=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Go))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-registro"]],decls:27,vars:0,consts:[[1,"container"],[1,"mat-h3"],[1,"my-form"],["appearance","fill",1,"full-width"],["matInput","","type","email","value","","required",""],["userEmail",""],["matInput","","type","password","required","","autocomplete","current-password"],["userPassword",""],["mat-raised-button","",1,"google",3,"click"],[1,"or"],[1,"orInner"],["svgIcon","google_logo",2,"width","40px","height","24px"],[1,"redirectToLogin"],["routerLink","/login","routerLinkActive","active"]],template:function(t,r){if(1&t){const i=u.EpF();u.TgZ(0,"div",0)(1,"h3",1),u._uU(2,"Fa\xe7a o seu cadastro"),u.qZA(),u.TgZ(3,"form",2)(4,"mat-form-field",3)(5,"mat-label"),u._uU(6,"Endere\xe7o de Email"),u.qZA(),u._UZ(7,"input",4,5),u.qZA(),u.TgZ(9,"mat-form-field",3)(10,"mat-label"),u._uU(11,"Senha"),u.qZA(),u._UZ(12,"input",6,7),u.qZA()(),u.TgZ(14,"button",8),u.NdJ("click",function(){u.CHM(i);const l=u.MAs(8),h=u.MAs(13);return u.KtG(r.authService.signUp(l.value,h.value))}),u._uU(15," Cadastrar "),u.qZA(),u.TgZ(16,"div",9)(17,"span",10),u._uU(18,"ou"),u.qZA()(),u.TgZ(19,"button",8),u.NdJ("click",function(){return r.authService.googleLogin()}),u._UZ(20,"mat-icon",11),u._uU(21," Continuar com conta Google "),u.qZA(),u.TgZ(22,"div",12)(23,"span"),u._uU(24,"J\xe1 possui um cadastro? "),u.TgZ(25,"a",13),u._uU(26,"Fa\xe7a o Login"),u.qZA()()()()}},dependencies:[Uu,Hp,pc,Jv,kf,eb,Hf],styles:[".my-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%;display:flex;flex-direction:column}.container[_ngcontent-%COMP%]{margin-top:10px;width:100%;display:flex;flex-direction:column;align-items:center}.redirectToLogin[_ngcontent-%COMP%]{margin-top:15px}"]}),n})();function Nte(n,e){if(1&n&&(u.TgZ(0,"div")(1,"p",6),u._uU(2," N\xf3s enviamos um email de confirmacao para "),u.TgZ(3,"strong"),u._uU(4),u.qZA(),u._uU(5,". "),u.qZA(),u.TgZ(6,"p",6),u._uU(7," Para regularizar seu acesso confira seu email e click no link para verificar seu email. "),u.qZA()()),2&n){const t=e.ngIf;u.xp6(4),u.Oqu(t.email)}}const Fte=[{path:"",component:Ate},{path:"login",component:Mte,canActivate:[dA]},{path:"cadastro",component:Pte,canActivate:[dA]},{path:"perfil",component:Ote,canActivate:[P1]},{path:"email-login",component:Cte,canActivate:[dA]},{path:"painel",component:Rte,canActivate:[P1]},{path:"esqueceu-senha",component:Ite,canActivate:[dA]},{path:"verificar-email",component:(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Go))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-verificar-email"]],decls:12,vars:3,consts:[[1,"container"],[1,"mat-h2"],[4,"ngIf"],["mat-raised-button","",3,"click"],[1,"redirectToLogin","text-center"],["routerLink","/login","routerLinkActive","active"],[1,"text-center"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"h2",1),u._uU(2,"Obrigado por se cadastrar"),u.qZA(),u.YNc(3,Nte,8,1,"div",2),u.ALo(4,"async"),u.TgZ(5,"button",3),u.NdJ("click",function(){return r.authService.sendVerificationMail()}),u._uU(6," Reenviar verifica\xe7\xe3o "),u.qZA(),u.TgZ(7,"div",4)(8,"span"),u._uU(9,"Voltar e fazer "),u.TgZ(10,"a",5),u._uU(11,"Login?"),u.qZA()()()()),2&t&&(u.xp6(3),u.Q6J("ngIf",u.lcZ(4,1,r.authService.user)))},dependencies:[Tn,Uu,Hp,pc,$l],styles:[".my-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%;display:flex;flex-direction:column}.full-width[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]{margin-top:10px;width:100%;display:flex;flex-direction:column;align-items:center}.redirectToLogin[_ngcontent-%COMP%]{margin-top:15px}"]}),n})(),canActivate:[P1]}];let Lte=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[mW.forRoot(Fte),mW]}),n})();const N1_firebaseConfig={apiKey:"AIzaSyDgzRquxls0_dgaA7t8UwnYXDhZ7416imI",authDomain:"curriculos-seve.firebaseapp.com",databaseURL:"https://curriculos-seve-default-rtdb.firebaseio.com",projectId:"curriculos-seve",storageBucket:"curriculos-seve.appspot.com",messagingSenderId:"963696035317",appId:"1:963696035317:web:92249188d6af0697164cbc",measurementId:"G-NKH58G9F4P"};function Vte(n,e){1&n&&(u.TgZ(0,"button",9)(1,"mat-icon"),u._uU(2,"dashboard"),u.qZA(),u.TgZ(3,"span"),u._uU(4,"Painel"),u.qZA()())}function Bte(n,e){1&n&&(u.TgZ(0,"button",10)(1,"mat-icon"),u._uU(2,"person"),u.qZA(),u.TgZ(3,"span"),u._uU(4,"Perfil"),u.qZA()())}function Ute(n,e){1&n&&(u.TgZ(0,"button",11)(1,"mat-icon"),u._uU(2,"login"),u.qZA(),u.TgZ(3,"span"),u._uU(4,"Entrar"),u.qZA()())}function Hte(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",12),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.logout())}),u.TgZ(1,"mat-icon"),u._uU(2,"logout"),u.qZA(),u.TgZ(3,"span"),u._uU(4,"Sair"),u.qZA()()}}let jte=(()=>{class n{constructor(t,r,i,s){this.matIconRegistry=t,this.domSanitizer=r,this.authService=i,this._nav=s,this.title="curriculo-facil",this.matIconRegistry.addSvgIcon("google_logo",this.domSanitizer.bypassSecurityTrustResourceUrl("/curriculo-facil/assets/svg/google.svg"))}logout(){this.authService.signOut().then(()=>{this._nav.navigateTo("/")})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Vf),u.Y36($s),u.Y36(Go),u.Y36(O1))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-root"]],decls:24,vars:13,consts:[[1,"full-width"],["mat-icon-button","","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],[1,"mat-body"],["menu","matMenu"],["mat-menu-item","","routerLink","/"],["mat-menu-item","","routerLink","/painel",4,"ngIf"],["mat-menu-item","","routerLink","/perfil",4,"ngIf"],["mat-menu-item","","routerLink","/login",4,"ngIf"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","","routerLink","/painel"],["mat-menu-item","","routerLink","/perfil"],["mat-menu-item","","routerLink","/login"],["mat-menu-item","",3,"click"]],template:function(t,r){if(1&t&&(u.TgZ(0,"mat-toolbar")(1,"span"),u._uU(2,"Curr\xedculo F\xe1cil"),u.qZA(),u._UZ(3,"div",0),u.TgZ(4,"button",1)(5,"mat-icon"),u._uU(6,"menu"),u.qZA()()(),u.TgZ(7,"div",2),u._UZ(8,"router-outlet"),u.qZA(),u.TgZ(9,"mat-menu",null,3)(11,"button",4)(12,"mat-icon"),u._uU(13,"home"),u.qZA(),u.TgZ(14,"span"),u._uU(15,"Inicial"),u.qZA()(),u.YNc(16,Vte,5,0,"button",5),u.ALo(17,"async"),u.YNc(18,Bte,5,0,"button",6),u.ALo(19,"async"),u.YNc(20,Ute,5,0,"button",7),u.ALo(21,"async"),u.YNc(22,Hte,5,0,"button",8),u.ALo(23,"async"),u.qZA()),2&t){const i=u.MAs(10);u.xp6(4),u.Q6J("matMenuTriggerFor",i),u.xp6(12),u.Q6J("ngIf",u.lcZ(17,5,r.authService.user)),u.xp6(2),u.Q6J("ngIf",u.lcZ(19,7,r.authService.user)),u.xp6(2),u.Q6J("ngIf",!u.lcZ(21,9,r.authService.user)),u.xp6(2),u.Q6J("ngIf",u.lcZ(23,11,r.authService.user))}},dependencies:[Tn,b1,z0,iM,pc,Hf,DD,Fg,Ob,$l]}),n})(),$te=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n,bootstrap:[jte]}),n.\u0275inj=u.cJS({providers:[Go],imports:[bo,Lte,Jy,sM,Ey,dR,TR,bR,yD,dk,$r.hO.initializeApp(N1_firebaseConfig),Nq,KY,I4,iJ]}),n})();(0,u.G48)(),cl().bootstrapModule($te).catch(n=>console.error(n))},5867:(ut,Ae,L)=>{L.d(Ae,{C6:()=>u.getApps,Mq:()=>u.getApp});var u=L(9681);(0,u.registerVersion)("firebase","9.9.4","app")},127:(ut,Ae,L)=>{L.d(Ae,{Z:()=>u.Z});var u=L(3942);u.Z.registerVersion("firebase","9.9.4","app-compat")},5881:(ut,Ae,L)=>{L.r(Ae);var u=L(5861),j=L(3942),N=L(8554),ce=L(2090),ue=(L(9681),L(1877),L(4859));function ge(){return window}function Z(){return(Z=(0,u.Z)(function*(ie,G,W){var Ce;const{BuildInfo:Ke}=ge();(0,N.aq)(G.sessionId,"AuthEvent did not contain a session ID");const yt=yield ye(G.sessionId),It={};return(0,N.ar)()?It.ibi=Ke.packageName:(0,N.as)()?It.apn=Ke.packageName:(0,N.at)(ie,"operation-not-supported-in-this-environment"),Ke.displayName&&(It.appDisplayName=Ke.displayName),It.sessionId=yt,(0,N.au)(ie,W,G.type,void 0,null!==(Ce=G.eventId)&&void 0!==Ce?Ce:void 0,It)})).apply(this,arguments)}function $e(){return($e=(0,u.Z)(function*(ie){const{BuildInfo:G}=ge(),W={};(0,N.ar)()?W.iosBundleId=G.packageName:(0,N.as)()?W.androidPackageName=G.packageName:(0,N.at)(ie,"operation-not-supported-in-this-environment"),yield(0,N.av)(ie,W)})).apply(this,arguments)}function at(){return(at=(0,u.Z)(function*(ie,G,W){const{cordova:Ce}=ge();let Ke=()=>{};try{yield new Promise((yt,It)=>{let Le=null;function ot(){var Ft;yt();const _n=null===(Ft=Ce.plugins.browsertab)||void 0===Ft?void 0:Ft.close;"function"==typeof _n&&_n(),"function"==typeof W?.close&&W.close()}function Qt(){Le||(Le=window.setTimeout(()=>{It((0,N.aw)(ie,"redirect-cancelled-by-user"))},2e3))}function kn(){"visible"===document?.visibilityState&&Qt()}G.addPassiveListener(ot),document.addEventListener("resume",Qt,!1),(0,N.as)()&&document.addEventListener("visibilitychange",kn,!1),Ke=()=>{G.removePassiveListener(ot),document.removeEventListener("resume",Qt,!1),document.removeEventListener("visibilitychange",kn,!1),Le&&window.clearTimeout(Le)}})}finally{Ke()}})).apply(this,arguments)}function ye(ie){return nt.apply(this,arguments)}function nt(){return(nt=(0,u.Z)(function*(ie){const G=rt(ie),W=yield crypto.subtle.digest("SHA-256",G);return Array.from(new Uint8Array(W)).map(Ke=>Ke.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function rt(ie){if((0,N.aq)(/[0-9a-zA-Z]+/.test(ie),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(ie);const G=new ArrayBuffer(ie.length),W=new Uint8Array(G);for(let Ce=0;Ce<ie.length;Ce++)W[Ce]=ie.charCodeAt(Ce);return W}class Re extends N.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(G=>{this.resolveInialized=G})}addPassiveListener(G){this.passiveListeners.add(G)}removePassiveListener(G){this.passiveListeners.delete(G)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(G){return this.resolveInialized(),this.passiveListeners.forEach(W=>W(G)),super.onEvent(G)}initialized(){var G=this;return(0,u.Z)(function*(){yield G.initPromise})()}}function ae(ie){return fe.apply(this,arguments)}function fe(){return(fe=(0,u.Z)(function*(ie){const G=yield re()._get(_e(ie));return G&&(yield re()._remove(_e(ie))),G})).apply(this,arguments)}function ee(){const ie=[],G="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let W=0;W<20;W++){const Ce=Math.floor(Math.random()*G.length);ie.push(G.charAt(Ce))}return ie.join("")}function re(){return(0,N.ay)(N.b)}function _e(ie){return(0,N.az)("authEvent",ie.config.apiKey,ie.name)}function He(ie){if(!ie?.includes("?"))return{};const[G,...W]=ie.split("?");return(0,ce.zd)(W.join("?"))}function Ze(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,N.aw)("no-auth-event")}}function zt(){var ie;return(null===(ie=self?.location)||void 0===ie?void 0:ie.protocol)||null}function Cr(ie=(0,ce.z$)()){return!("file:"!==zt()&&"ionic:"!==zt()&&"capacitor:"!==zt()||!ie.toLowerCase().match(/iphone|ipad|ipod|android/))}function qi(){try{const ie=self.localStorage,G=N.aI();if(ie)return ie.setItem(G,"1"),ie.removeItem(G),!function us(ie=(0,ce.z$)()){return function Ir(){return(0,ce.w1)()&&11===document?.documentMode}()||function Rn(ie=(0,ce.z$)()){return/Edge\/\d+/.test(ie)}(ie)}()||(0,ce.hl)()}catch{return Xr()&&(0,ce.hl)()}return!1}function Xr(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Bn(){return(function Vt(){return"http:"===zt()||"https:"===zt()}()||(0,ce.ru)()||Cr())&&!function so(){return(0,ce.b$)()||(0,ce.UG)()}()&&qi()&&!Xr()}function Ri(){return Cr()&&typeof document<"u"}function it(){return(it=(0,u.Z)(function*(){return!!Ri()&&new Promise(ie=>{const G=setTimeout(()=>{ie(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(G),ie(!0)})})})).apply(this,arguments)}const Un={LOCAL:"local",NONE:"none",SESSION:"session"},gn=N.ax,_r="persistence";function Dn(ie){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,u.Z)(function*(ie){yield ie._initializationPromise;const G=ht(),W=N.az(_r,ie.config.apiKey,ie.name);G&&G.setItem(W,ie._getPersistence())})).apply(this,arguments)}function ht(){var ie;try{return(null===(ie=function gr(){return typeof window<"u"?window:null}())||void 0===ie?void 0:ie.sessionStorage)||null}catch{return null}}const ft=N.ax;class kt{constructor(){this.browserResolver=N.ay(N.k),this.cordovaResolver=N.ay(class Jt{constructor(){this._redirectPersistence=N.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=N.aB,this._overrideRedirectResult=N.aC}_initialize(G){var W=this;return(0,u.Z)(function*(){const Ce=G._key();let Ke=W.eventManagers.get(Ce);return Ke||(Ke=new Re(G),W.eventManagers.set(Ce,Ke),W.attachCallbackListeners(G,Ke)),Ke})()}_openPopup(G){(0,N.at)(G,"operation-not-supported-in-this-environment")}_openRedirect(G,W,Ce,Ke){var yt=this;return(0,u.Z)(function*(){!function Ie(ie){var G,W,Ce,Ke,yt,It,Le,ot,Qt,kn;const Ft=ge();(0,N.ax)("function"==typeof(null===(G=Ft?.universalLinks)||void 0===G?void 0:G.subscribe),ie,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,N.ax)(typeof(null===(W=Ft?.BuildInfo)||void 0===W?void 0:W.packageName)<"u",ie,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,N.ax)("function"==typeof(null===(yt=null===(Ke=null===(Ce=Ft?.cordova)||void 0===Ce?void 0:Ce.plugins)||void 0===Ke?void 0:Ke.browsertab)||void 0===yt?void 0:yt.openUrl),ie,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.ax)("function"==typeof(null===(ot=null===(Le=null===(It=Ft?.cordova)||void 0===It?void 0:It.plugins)||void 0===Le?void 0:Le.browsertab)||void 0===ot?void 0:ot.isAvailable),ie,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.ax)("function"==typeof(null===(kn=null===(Qt=Ft?.cordova)||void 0===Qt?void 0:Qt.InAppBrowser)||void 0===kn?void 0:kn.open),ie,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(G);const It=yield yt._initialize(G);yield It.initialized(),It.resetRedirect(),(0,N.aD)(),yield yt._originValidation(G);const Le=function Se(ie,G,W=null){return{type:G,eventId:W,urlResponse:null,sessionId:ee(),postBody:null,tenantId:ie.tenantId,error:(0,N.aw)(ie,"no-auth-event")}}(G,Ce,Ke);yield function qe(ie,G){return re()._set(_e(ie),G)}(G,Le);const ot=yield function K(ie,G,W){return Z.apply(this,arguments)}(G,Le,W),Qt=yield function Ne(ie){const{cordova:G}=ge();return new Promise(W=>{G.plugins.browsertab.isAvailable(Ce=>{let Ke=null;Ce?G.plugins.browsertab.openUrl(ie):Ke=G.InAppBrowser.open(ie,(0,N.ap)()?"_blank":"_system","location=yes"),W(Ke)})})}(ot);return function De(ie,G,W){return at.apply(this,arguments)}(G,It,Qt)})()}_isIframeWebStorageSupported(G,W){throw new Error("Method not implemented.")}_originValidation(G){const W=G._key();return this.originValidationPromises[W]||(this.originValidationPromises[W]=function te(ie){return $e.apply(this,arguments)}(G)),this.originValidationPromises[W]}attachCallbackListeners(G,W){const{universalLinks:Ce,handleOpenURL:Ke,BuildInfo:yt}=ge(),It=setTimeout((0,u.Z)(function*(){yield ae(G),W.onEvent(Ze())}),500),Le=function(){var kn=(0,u.Z)(function*(Ft){clearTimeout(It);const _n=yield ae(G);let ds=null;_n&&Ft?.url&&(ds=function we(ie,G){var W,Ce;const Ke=function Ue(ie){const G=He(ie),W=G.link?decodeURIComponent(G.link):void 0,Ce=He(W).link,Ke=G.deep_link_id?decodeURIComponent(G.deep_link_id):void 0;return He(Ke).link||Ke||Ce||W||ie}(G);if(Ke.includes("/__/auth/callback")){const yt=He(Ke),It=yt.firebaseError?function de(ie){try{return JSON.parse(ie)}catch{return null}}(decodeURIComponent(yt.firebaseError)):null,Le=null===(Ce=null===(W=It?.code)||void 0===W?void 0:W.split("auth/"))||void 0===Ce?void 0:Ce[1],ot=Le?(0,N.aw)(Le):null;return ot?{type:ie.type,eventId:ie.eventId,tenantId:ie.tenantId,error:ot,urlResponse:null,sessionId:null,postBody:null}:{type:ie.type,eventId:ie.eventId,tenantId:ie.tenantId,sessionId:ie.sessionId,urlResponse:Ke,postBody:null}}return null}(_n,Ft.url)),W.onEvent(ds||Ze())});return function(_n){return kn.apply(this,arguments)}}();typeof Ce<"u"&&"function"==typeof Ce.subscribe&&Ce.subscribe(null,Le);const ot=Ke,Qt=`${yt.packageName.toLowerCase()}://`;ge().handleOpenURL=function(){var kn=(0,u.Z)(function*(Ft){if(Ft.toLowerCase().startsWith(Qt)&&Le({url:Ft}),"function"==typeof ot)try{ot(Ft)}catch(_n){console.error(_n)}});return function(Ft){return kn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=N.a,this._completeRedirectFn=N.aB,this._overrideRedirectResult=N.aC}_initialize(G){var W=this;return(0,u.Z)(function*(){return yield W.selectUnderlyingResolver(),W.assertedUnderlyingResolver._initialize(G)})()}_openPopup(G,W,Ce,Ke){var yt=this;return(0,u.Z)(function*(){return yield yt.selectUnderlyingResolver(),yt.assertedUnderlyingResolver._openPopup(G,W,Ce,Ke)})()}_openRedirect(G,W,Ce,Ke){var yt=this;return(0,u.Z)(function*(){return yield yt.selectUnderlyingResolver(),yt.assertedUnderlyingResolver._openRedirect(G,W,Ce,Ke)})()}_isIframeWebStorageSupported(G,W){this.assertedUnderlyingResolver._isIframeWebStorageSupported(G,W)}_originValidation(G){return this.assertedUnderlyingResolver._originValidation(G)}get _shouldInitProactively(){return Ri()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ft(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var G=this;return(0,u.Z)(function*(){if(G.underlyingResolver)return;const W=yield function Ki(){return it.apply(this,arguments)}();G.underlyingResolver=W?G.cordovaResolver:G.browserResolver})()}}function qr(ie){return ie.unwrap()}function Dr(ie){return Br(ie)}function Br(ie){const{_tokenResponse:G}=ie instanceof ce.ZR?ie.customData:ie;if(!G)return null;if(!(ie instanceof ce.ZR)&&"temporaryProof"in G&&"phoneNumber"in G)return N.P.credentialFromResult(ie);const W=G.providerId;if(!W||W===N.o.PASSWORD)return null;let Ce;switch(W){case N.o.GOOGLE:Ce=N.Q;break;case N.o.FACEBOOK:Ce=N.N;break;case N.o.GITHUB:Ce=N.T;break;case N.o.TWITTER:Ce=N.W;break;default:const{oauthIdToken:Ke,oauthAccessToken:yt,oauthTokenSecret:It,pendingToken:Le,nonce:ot}=G;return yt||It||Ke||Le?Le?W.startsWith("saml.")?N.aL._create(W,Le):N.J._fromParams({providerId:W,signInMethod:W,pendingToken:Le,idToken:Ke,accessToken:yt}):new N.U(W).credential({idToken:Ke,accessToken:yt,rawNonce:ot}):null}return ie instanceof ce.ZR?Ce.credentialFromError(ie):Ce.credentialFromResult(ie)}function Pt(ie,G){return G.catch(W=>{throw W instanceof ce.ZR&&function Tt(ie,G){var W,Ce;const Ke=null===(W=G.customData)||void 0===W?void 0:W._tokenResponse;if("auth/multi-factor-auth-required"===(null===(Ce=G)||void 0===Ce?void 0:Ce.code))G.resolver=new J(ie,N.an(ie,G));else if(Ke){const yt=Br(G),It=G;yt&&(It.credential=yt,It.tenantId=Ke.tenantId||void 0,It.email=Ke.email||void 0,It.phoneNumber=Ke.phoneNumber||void 0)}}(ie,W),W}).then(W=>{const Ke=W.user;return{operationType:W.operationType,credential:Dr(W),additionalUserInfo:N.al(W),user:z.getOrCreate(Ke)}})}function Jr(ie,G){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,u.Z)(function*(ie,G){const W=yield G;return{verificationId:W.verificationId,confirm:Ce=>Pt(ie,W.confirm(Ce))}})).apply(this,arguments)}class J{constructor(G,W){this.resolver=W,this.auth=function yr(ie){return ie.wrapped()}(G)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(G){return Pt(qr(this.auth),this.resolver.resolveSignIn(G))}}class z{constructor(G){this._delegate=G,this.multiFactor=N.ao(G)}static getOrCreate(G){return z.USER_MAP.has(G)||z.USER_MAP.set(G,new z(G)),z.USER_MAP.get(G)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(G){return this._delegate.getIdTokenResult(G)}getIdToken(G){return this._delegate.getIdToken(G)}linkAndRetrieveDataWithCredential(G){return this.linkWithCredential(G)}linkWithCredential(G){var W=this;return(0,u.Z)(function*(){return Pt(W.auth,N.Z(W._delegate,G))})()}linkWithPhoneNumber(G,W){var Ce=this;return(0,u.Z)(function*(){return Jr(Ce.auth,N.l(Ce._delegate,G,W))})()}linkWithPopup(G){var W=this;return(0,u.Z)(function*(){return Pt(W.auth,N.d(W._delegate,G,kt))})()}linkWithRedirect(G){var W=this;return(0,u.Z)(function*(){return yield Dn(N.aE(W.auth)),N.g(W._delegate,G,kt)})()}reauthenticateAndRetrieveDataWithCredential(G){return this.reauthenticateWithCredential(G)}reauthenticateWithCredential(G){var W=this;return(0,u.Z)(function*(){return Pt(W.auth,N._(W._delegate,G))})()}reauthenticateWithPhoneNumber(G,W){return Jr(this.auth,N.r(this._delegate,G,W))}reauthenticateWithPopup(G){return Pt(this.auth,N.e(this._delegate,G,kt))}reauthenticateWithRedirect(G){var W=this;return(0,u.Z)(function*(){return yield Dn(N.aE(W.auth)),N.h(W._delegate,G,kt)})()}sendEmailVerification(G){return N.ab(this._delegate,G)}unlink(G){var W=this;return(0,u.Z)(function*(){return yield N.ak(W._delegate,G),W})()}updateEmail(G){return N.ag(this._delegate,G)}updatePassword(G){return N.ah(this._delegate,G)}updatePhoneNumber(G){return N.u(this._delegate,G)}updateProfile(G){return N.af(this._delegate,G)}verifyBeforeUpdateEmail(G,W){return N.ac(this._delegate,G,W)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}z.USER_MAP=new WeakMap;const $=N.ax;let Y=(()=>{class ie{constructor(W,Ce){if(this.app=W,Ce.isInitialized())return this._delegate=Ce.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ke}=W.options;$(Ke,"invalid-api-key",{appName:W.name}),$(Ke,"invalid-api-key",{appName:W.name});const yt=typeof window<"u"?kt:void 0;this._delegate=Ce.initialize({options:{persistence:Te(Ke,W.name),popupRedirectResolver:yt}}),this._delegate._updateErrorMap(N.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?z.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(W){this._delegate.languageCode=W}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(W){this._delegate.tenantId=W}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(W,Ce){N.G(this._delegate,W,Ce)}applyActionCode(W){return N.a2(this._delegate,W)}checkActionCode(W){return N.a3(this._delegate,W)}confirmPasswordReset(W,Ce){return N.a1(this._delegate,W,Ce)}createUserWithEmailAndPassword(W,Ce){var Ke=this;return(0,u.Z)(function*(){return Pt(Ke._delegate,N.a5(Ke._delegate,W,Ce))})()}fetchProvidersForEmail(W){return this.fetchSignInMethodsForEmail(W)}fetchSignInMethodsForEmail(W){return N.aa(this._delegate,W)}isSignInWithEmailLink(W){return N.a8(this._delegate,W)}getRedirectResult(){var W=this;return(0,u.Z)(function*(){$(Bn(),W._delegate,"operation-not-supported-in-this-environment");const Ce=yield N.j(W._delegate,kt);return Ce?Pt(W._delegate,Promise.resolve(Ce)):{credential:null,user:null}})()}addFrameworkForLogging(W){!function bn(ie,G){(0,N.aE)(ie)._logFramework(G)}(this._delegate,W)}onAuthStateChanged(W,Ce,Ke){const{next:yt,error:It,complete:Le}=Q(W,Ce,Ke);return this._delegate.onAuthStateChanged(yt,It,Le)}onIdTokenChanged(W,Ce,Ke){const{next:yt,error:It,complete:Le}=Q(W,Ce,Ke);return this._delegate.onIdTokenChanged(yt,It,Le)}sendSignInLinkToEmail(W,Ce){return N.a7(this._delegate,W,Ce)}sendPasswordResetEmail(W,Ce){return N.a0(this._delegate,W,Ce||void 0)}setPersistence(W){var Ce=this;return(0,u.Z)(function*(){let Ke;switch(function Zi(ie,G){gn(Object.values(Un).includes(G),ie,"invalid-persistence-type"),(0,ce.b$)()?gn(G!==Un.SESSION,ie,"unsupported-persistence-type"):(0,ce.UG)()?gn(G===Un.NONE,ie,"unsupported-persistence-type"):Xr()?gn(G===Un.NONE||G===Un.LOCAL&&(0,ce.hl)(),ie,"unsupported-persistence-type"):gn(G===Un.NONE||qi(),ie,"unsupported-persistence-type")}(Ce._delegate,W),W){case Un.SESSION:Ke=N.a;break;case Un.LOCAL:Ke=(yield N.ay(N.i)._isAvailable())?N.i:N.b;break;case Un.NONE:Ke=N.L;break;default:return N.at("argument-error",{appName:Ce._delegate.name})}return Ce._delegate.setPersistence(Ke)})()}signInAndRetrieveDataWithCredential(W){return this.signInWithCredential(W)}signInAnonymously(){return Pt(this._delegate,N.X(this._delegate))}signInWithCredential(W){return Pt(this._delegate,N.Y(this._delegate,W))}signInWithCustomToken(W){return Pt(this._delegate,N.$(this._delegate,W))}signInWithEmailAndPassword(W,Ce){return Pt(this._delegate,N.a6(this._delegate,W,Ce))}signInWithEmailLink(W,Ce){return Pt(this._delegate,N.a9(this._delegate,W,Ce))}signInWithPhoneNumber(W,Ce){return Jr(this._delegate,N.s(this._delegate,W,Ce))}signInWithPopup(W){var Ce=this;return(0,u.Z)(function*(){return $(Bn(),Ce._delegate,"operation-not-supported-in-this-environment"),Pt(Ce._delegate,N.c(Ce._delegate,W,kt))})()}signInWithRedirect(W){var Ce=this;return(0,u.Z)(function*(){return $(Bn(),Ce._delegate,"operation-not-supported-in-this-environment"),yield Dn(Ce._delegate),N.f(Ce._delegate,W,kt)})()}updateCurrentUser(W){return this._delegate.updateCurrentUser(W)}verifyPasswordResetCode(W){return N.a4(this._delegate,W)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return ie.Persistence=Un,ie})();function Q(ie,G,W){let Ce=ie;"function"!=typeof ie&&({next:Ce,error:G,complete:W}=ie);const Ke=Ce;return{next:It=>Ke(It&&z.getOrCreate(It)),error:G,complete:W}}function Te(ie,G){const W=function wn(ie,G){const W=ht();if(!W)return[];const Ce=N.az(_r,ie,G);switch(W.getItem(Ce)){case Un.NONE:return[N.L];case Un.LOCAL:return[N.i,N.a];case Un.SESSION:return[N.a];default:return[]}}(ie,G);if(typeof self<"u"&&!W.includes(N.i)&&W.push(N.i),typeof window<"u")for(const Ce of[N.b,N.a])W.includes(Ce)||W.push(Ce);return W.includes(N.L)||W.push(N.L),W}class ze{constructor(){this.providerId="phone",this._delegate=new N.P(qr(j.Z.auth()))}static credential(G,W){return N.P.credential(G,W)}verifyPhoneNumber(G,W){return this._delegate.verifyPhoneNumber(G,W)}unwrap(){return this._delegate}}ze.PHONE_SIGN_IN_METHOD=N.P.PHONE_SIGN_IN_METHOD,ze.PROVIDER_ID=N.P.PROVIDER_ID;const wt=N.ax;class hn{constructor(G,W,Ce=j.Z.app()){var Ke;wt(null===(Ke=Ce.options)||void 0===Ke?void 0:Ke.apiKey,"invalid-api-key",{appName:Ce.name}),this._delegate=new N.R(G,W,Ce.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Jn(ie){ie.INTERNAL.registerComponent(new ue.wA("auth-compat",G=>{const W=G.getProvider("app-compat").getImmediate(),Ce=G.getProvider("auth");return new Y(W,Ce)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:N.A.EMAIL_SIGNIN,PASSWORD_RESET:N.A.PASSWORD_RESET,RECOVER_EMAIL:N.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:N.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:N.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:N.A.VERIFY_EMAIL}},EmailAuthProvider:N.M,FacebookAuthProvider:N.N,GithubAuthProvider:N.T,GoogleAuthProvider:N.Q,OAuthProvider:N.U,SAMLAuthProvider:N.V,PhoneAuthProvider:ze,PhoneMultiFactorGenerator:N.m,RecaptchaVerifier:hn,TwitterAuthProvider:N.W,Auth:Y,AuthCredential:N.H,Error:ce.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),ie.registerVersion("@firebase/auth-compat","0.2.19")}(j.Z)},9751:(ut,Ae,L)=>{L.d(Ae,{y:()=>ge});var u=L(930),j=L(727),N=L(8822),ce=L(9635),he=L(2416),ve=L(576),ue=L(2806);let ge=(()=>{class te{constructor(Ne){Ne&&(this._subscribe=Ne)}lift(Ne){const De=new te;return De.source=this,De.operator=Ne,De}subscribe(Ne,De,at){const Ie=function Z(te){return te&&te instanceof u.Lv||function K(te){return te&&(0,ve.m)(te.next)&&(0,ve.m)(te.error)&&(0,ve.m)(te.complete)}(te)&&(0,j.Nn)(te)}(Ne)?Ne:new u.Hp(Ne,De,at);return(0,ue.x)(()=>{const{operator:ye,source:nt}=this;Ie.add(ye?ye.call(Ie,nt):nt?this._subscribe(Ie):this._trySubscribe(Ie))}),Ie}_trySubscribe(Ne){try{return this._subscribe(Ne)}catch(De){Ne.error(De)}}forEach(Ne,De){return new(De=Ee(De))((at,Ie)=>{const ye=new u.Hp({next:nt=>{try{Ne(nt)}catch(rt){Ie(rt),ye.unsubscribe()}},error:Ie,complete:at});this.subscribe(ye)})}_subscribe(Ne){var De;return null===(De=this.source)||void 0===De?void 0:De.subscribe(Ne)}[N.L](){return this}pipe(...Ne){return(0,ce.U)(Ne)(this)}toPromise(Ne){return new(Ne=Ee(Ne))((De,at)=>{let Ie;this.subscribe(ye=>Ie=ye,ye=>at(ye),()=>De(Ie))})}}return te.create=$e=>new te($e),te})();function Ee(te){var $e;return null!==($e=te??he.v.Promise)&&void 0!==$e?$e:Promise}},7579:(ut,Ae,L)=>{L.d(Ae,{x:()=>ue});var u=L(9751),j=L(727);const ce=(0,L(3888).d)(Ee=>function(){Ee(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var he=L(8737),ve=L(2806);let ue=(()=>{class Ee extends u.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Z){const te=new ge(this,this);return te.operator=Z,te}_throwIfClosed(){if(this.closed)throw new ce}next(Z){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const te of this.currentObservers)te.next(Z)}})}error(Z){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Z;const{observers:te}=this;for(;te.length;)te.shift().error(Z)}})}complete(){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Z}=this;for(;Z.length;)Z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Z;return(null===(Z=this.observers)||void 0===Z?void 0:Z.length)>0}_trySubscribe(Z){return this._throwIfClosed(),super._trySubscribe(Z)}_subscribe(Z){return this._throwIfClosed(),this._checkFinalizedStatuses(Z),this._innerSubscribe(Z)}_innerSubscribe(Z){const{hasError:te,isStopped:$e,observers:Ne}=this;return te||$e?j.Lc:(this.currentObservers=null,Ne.push(Z),new j.w0(()=>{this.currentObservers=null,(0,he.P)(Ne,Z)}))}_checkFinalizedStatuses(Z){const{hasError:te,thrownError:$e,isStopped:Ne}=this;te?Z.error($e):Ne&&Z.complete()}asObservable(){const Z=new u.y;return Z.source=this,Z}}return Ee.create=(K,Z)=>new ge(K,Z),Ee})();class ge extends ue{constructor(K,Z){super(),this.destination=K,this.source=Z}next(K){var Z,te;null===(te=null===(Z=this.destination)||void 0===Z?void 0:Z.next)||void 0===te||te.call(Z,K)}error(K){var Z,te;null===(te=null===(Z=this.destination)||void 0===Z?void 0:Z.error)||void 0===te||te.call(Z,K)}complete(){var K,Z;null===(Z=null===(K=this.destination)||void 0===K?void 0:K.complete)||void 0===Z||Z.call(K)}_subscribe(K){var Z,te;return null!==(te=null===(Z=this.source)||void 0===Z?void 0:Z.subscribe(K))&&void 0!==te?te:j.Lc}}},930:(ut,Ae,L)=>{L.d(Ae,{Hp:()=>at,Lv:()=>te});var u=L(576),j=L(727),N=L(2416),ce=L(7849),he=L(5032);const ve=Ee("C",void 0,void 0);function Ee(Fe,Re,Se){return{kind:Fe,value:Re,error:Se}}var K=L(3410),Z=L(2806);class te extends j.w0{constructor(Re){super(),this.isStopped=!1,Re?(this.destination=Re,(0,j.Nn)(Re)&&Re.add(this)):this.destination=rt}static create(Re,Se,qe){return new at(Re,Se,qe)}next(Re){this.isStopped?nt(function ge(Fe){return Ee("N",Fe,void 0)}(Re),this):this._next(Re)}error(Re){this.isStopped?nt(function ue(Fe){return Ee("E",void 0,Fe)}(Re),this):(this.isStopped=!0,this._error(Re))}complete(){this.isStopped?nt(ve,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Re){this.destination.next(Re)}_error(Re){try{this.destination.error(Re)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const $e=Function.prototype.bind;function Ne(Fe,Re){return $e.call(Fe,Re)}class De{constructor(Re){this.partialObserver=Re}next(Re){const{partialObserver:Se}=this;if(Se.next)try{Se.next(Re)}catch(qe){Ie(qe)}}error(Re){const{partialObserver:Se}=this;if(Se.error)try{Se.error(Re)}catch(qe){Ie(qe)}else Ie(Re)}complete(){const{partialObserver:Re}=this;if(Re.complete)try{Re.complete()}catch(Se){Ie(Se)}}}class at extends te{constructor(Re,Se,qe){let ae;if(super(),(0,u.m)(Re)||!Re)ae={next:Re??void 0,error:Se??void 0,complete:qe??void 0};else{let fe;this&&N.v.useDeprecatedNextContext?(fe=Object.create(Re),fe.unsubscribe=()=>this.unsubscribe(),ae={next:Re.next&&Ne(Re.next,fe),error:Re.error&&Ne(Re.error,fe),complete:Re.complete&&Ne(Re.complete,fe)}):ae=Re}this.destination=new De(ae)}}function Ie(Fe){N.v.useDeprecatedSynchronousErrorHandling?(0,Z.O)(Fe):(0,ce.h)(Fe)}function nt(Fe,Re){const{onStoppedNotification:Se}=N.v;Se&&K.z.setTimeout(()=>Se(Fe,Re))}const rt={closed:!0,next:he.Z,error:function ye(Fe){throw Fe},complete:he.Z}},727:(ut,Ae,L)=>{L.d(Ae,{Lc:()=>ve,w0:()=>he,Nn:()=>ue});var u=L(576);const N=(0,L(3888).d)(Ee=>function(Z){Ee(this),this.message=Z?`${Z.length} errors occurred during unsubscription:\n${Z.map((te,$e)=>`${$e+1}) ${te.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Z});var ce=L(8737);class he{constructor(K){this.initialTeardown=K,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let K;if(!this.closed){this.closed=!0;const{_parentage:Z}=this;if(Z)if(this._parentage=null,Array.isArray(Z))for(const Ne of Z)Ne.remove(this);else Z.remove(this);const{initialTeardown:te}=this;if((0,u.m)(te))try{te()}catch(Ne){K=Ne instanceof N?Ne.errors:[Ne]}const{_finalizers:$e}=this;if($e){this._finalizers=null;for(const Ne of $e)try{ge(Ne)}catch(De){K=K??[],De instanceof N?K=[...K,...De.errors]:K.push(De)}}if(K)throw new N(K)}}add(K){var Z;if(K&&K!==this)if(this.closed)ge(K);else{if(K instanceof he){if(K.closed||K._hasParent(this))return;K._addParent(this)}(this._finalizers=null!==(Z=this._finalizers)&&void 0!==Z?Z:[]).push(K)}}_hasParent(K){const{_parentage:Z}=this;return Z===K||Array.isArray(Z)&&Z.includes(K)}_addParent(K){const{_parentage:Z}=this;this._parentage=Array.isArray(Z)?(Z.push(K),Z):Z?[Z,K]:K}_removeParent(K){const{_parentage:Z}=this;Z===K?this._parentage=null:Array.isArray(Z)&&(0,ce.P)(Z,K)}remove(K){const{_finalizers:Z}=this;Z&&(0,ce.P)(Z,K),K instanceof he&&K._removeParent(this)}}he.EMPTY=(()=>{const Ee=new he;return Ee.closed=!0,Ee})();const ve=he.EMPTY;function ue(Ee){return Ee instanceof he||Ee&&"closed"in Ee&&(0,u.m)(Ee.remove)&&(0,u.m)(Ee.add)&&(0,u.m)(Ee.unsubscribe)}function ge(Ee){(0,u.m)(Ee)?Ee():Ee.unsubscribe()}},2416:(ut,Ae,L)=>{L.d(Ae,{v:()=>u});const u={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ut,Ae,L)=>{L.d(Ae,{E:()=>j});const j=new(L(9751).y)(he=>he.complete())},8996:(ut,Ae,L)=>{L.d(Ae,{D:()=>Re});var u=L(8421),j=L(5363),N=L(9468),ve=L(9751),ge=L(2202),Ee=L(576),K=L(9672);function te(Se,qe){if(!Se)throw new Error("Iterable cannot be null");return new ve.y(ae=>{(0,K.f)(ae,qe,()=>{const fe=Se[Symbol.asyncIterator]();(0,K.f)(ae,qe,()=>{fe.next().then(we=>{we.done?ae.complete():ae.next(we.value)})},0,!0)})})}var $e=L(3670),Ne=L(8239),De=L(1144),at=L(6495),Ie=L(2206),ye=L(4532),nt=L(3260);function Re(Se,qe){return qe?function Fe(Se,qe){if(null!=Se){if((0,$e.c)(Se))return function ce(Se,qe){return(0,u.Xf)(Se).pipe((0,N.R)(qe),(0,j.Q)(qe))}(Se,qe);if((0,De.z)(Se))return function ue(Se,qe){return new ve.y(ae=>{let fe=0;return qe.schedule(function(){fe===Se.length?ae.complete():(ae.next(Se[fe++]),ae.closed||this.schedule())})})}(Se,qe);if((0,Ne.t)(Se))return function he(Se,qe){return(0,u.Xf)(Se).pipe((0,N.R)(qe),(0,j.Q)(qe))}(Se,qe);if((0,Ie.D)(Se))return te(Se,qe);if((0,at.T)(Se))return function Z(Se,qe){return new ve.y(ae=>{let fe;return(0,K.f)(ae,qe,()=>{fe=Se[ge.h](),(0,K.f)(ae,qe,()=>{let we,ee;try{({value:we,done:ee}=fe.next())}catch(re){return void ae.error(re)}ee?ae.complete():ae.next(we)},0,!0)}),()=>(0,Ee.m)(fe?.return)&&fe.return()})}(Se,qe);if((0,nt.L)(Se))return function rt(Se,qe){return te((0,nt.Q)(Se),qe)}(Se,qe)}throw(0,ye.z)(Se)}(Se,qe):(0,u.Xf)(Se)}},8421:(ut,Ae,L)=>{L.d(Ae,{Xf:()=>$e});var u=L(655),j=L(1144),N=L(8239),ce=L(9751),he=L(3670),ve=L(2206),ue=L(4532),ge=L(6495),Ee=L(3260),K=L(576),Z=L(7849),te=L(8822);function $e(Fe){if(Fe instanceof ce.y)return Fe;if(null!=Fe){if((0,he.c)(Fe))return function Ne(Fe){return new ce.y(Re=>{const Se=Fe[te.L]();if((0,K.m)(Se.subscribe))return Se.subscribe(Re);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Fe);if((0,j.z)(Fe))return function De(Fe){return new ce.y(Re=>{for(let Se=0;Se<Fe.length&&!Re.closed;Se++)Re.next(Fe[Se]);Re.complete()})}(Fe);if((0,N.t)(Fe))return function at(Fe){return new ce.y(Re=>{Fe.then(Se=>{Re.closed||(Re.next(Se),Re.complete())},Se=>Re.error(Se)).then(null,Z.h)})}(Fe);if((0,ve.D)(Fe))return ye(Fe);if((0,ge.T)(Fe))return function Ie(Fe){return new ce.y(Re=>{for(const Se of Fe)if(Re.next(Se),Re.closed)return;Re.complete()})}(Fe);if((0,Ee.L)(Fe))return function nt(Fe){return ye((0,Ee.Q)(Fe))}(Fe)}throw(0,ue.z)(Fe)}function ye(Fe){return new ce.y(Re=>{(function rt(Fe,Re){var Se,qe,ae,fe;return(0,u.mG)(this,void 0,void 0,function*(){try{for(Se=(0,u.KL)(Fe);!(qe=yield Se.next()).done;)if(Re.next(qe.value),Re.closed)return}catch(we){ae={error:we}}finally{try{qe&&!qe.done&&(fe=Se.return)&&(yield fe.call(Se))}finally{if(ae)throw ae.error}}Re.complete()})})(Fe,Re).catch(Se=>Re.error(Se))})}},6451:(ut,Ae,L)=>{L.d(Ae,{T:()=>ve});var u=L(8189),j=L(8421),N=L(515),ce=L(3269),he=L(8996);function ve(...ue){const ge=(0,ce.yG)(ue),Ee=(0,ce._6)(ue,1/0),K=ue;return K.length?1===K.length?(0,j.Xf)(K[0]):(0,u.J)(Ee)((0,he.D)(K,ge)):N.E}},5403:(ut,Ae,L)=>{L.d(Ae,{x:()=>j});var u=L(930);function j(ce,he,ve,ue,ge){return new N(ce,he,ve,ue,ge)}class N extends u.Lv{constructor(he,ve,ue,ge,Ee,K){super(he),this.onFinalize=Ee,this.shouldUnsubscribe=K,this._next=ve?function(Z){try{ve(Z)}catch(te){he.error(te)}}:super._next,this._error=ge?function(Z){try{ge(Z)}catch(te){he.error(te)}finally{this.unsubscribe()}}:super._error,this._complete=ue?function(){try{ue()}catch(Z){he.error(Z)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var he;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ve}=this;super.unsubscribe(),!ve&&(null===(he=this.onFinalize)||void 0===he||he.call(this))}}}},4004:(ut,Ae,L)=>{L.d(Ae,{U:()=>N});var u=L(4482),j=L(5403);function N(ce,he){return(0,u.e)((ve,ue)=>{let ge=0;ve.subscribe((0,j.x)(ue,Ee=>{ue.next(ce.call(he,Ee,ge++))}))})}},8189:(ut,Ae,L)=>{L.d(Ae,{J:()=>N});var u=L(5577),j=L(4671);function N(ce=1/0){return(0,u.z)(j.y,ce)}},5577:(ut,Ae,L)=>{L.d(Ae,{z:()=>ge});var u=L(4004),j=L(8421),N=L(4482),ce=L(9672),he=L(5403),ue=L(576);function ge(Ee,K,Z=1/0){return(0,ue.m)(K)?ge((te,$e)=>(0,u.U)((Ne,De)=>K(te,Ne,$e,De))((0,j.Xf)(Ee(te,$e))),Z):("number"==typeof K&&(Z=K),(0,N.e)((te,$e)=>function ve(Ee,K,Z,te,$e,Ne,De,at){const Ie=[];let ye=0,nt=0,rt=!1;const Fe=()=>{rt&&!Ie.length&&!ye&&K.complete()},Re=qe=>ye<te?Se(qe):Ie.push(qe),Se=qe=>{Ne&&K.next(qe),ye++;let ae=!1;(0,j.Xf)(Z(qe,nt++)).subscribe((0,he.x)(K,fe=>{$e?.(fe),Ne?Re(fe):K.next(fe)},()=>{ae=!0},void 0,()=>{if(ae)try{for(ye--;Ie.length&&ye<te;){const fe=Ie.shift();De?(0,ce.f)(K,De,()=>Se(fe)):Se(fe)}Fe()}catch(fe){K.error(fe)}}))};return Ee.subscribe((0,he.x)(K,Re,()=>{rt=!0,Fe()})),()=>{at?.()}}(te,$e,Ee,Z)))}},5363:(ut,Ae,L)=>{L.d(Ae,{Q:()=>ce});var u=L(9672),j=L(4482),N=L(5403);function ce(he,ve=0){return(0,j.e)((ue,ge)=>{ue.subscribe((0,N.x)(ge,Ee=>(0,u.f)(ge,he,()=>ge.next(Ee),ve),()=>(0,u.f)(ge,he,()=>ge.complete(),ve),Ee=>(0,u.f)(ge,he,()=>ge.error(Ee),ve)))})}},3099:(ut,Ae,L)=>{L.d(Ae,{B:()=>he});var u=L(8421),j=L(7579),N=L(930),ce=L(4482);function he(ue={}){const{connector:ge=(()=>new j.x),resetOnError:Ee=!0,resetOnComplete:K=!0,resetOnRefCountZero:Z=!0}=ue;return te=>{let $e,Ne,De,at=0,Ie=!1,ye=!1;const nt=()=>{Ne?.unsubscribe(),Ne=void 0},rt=()=>{nt(),$e=De=void 0,Ie=ye=!1},Fe=()=>{const Re=$e;rt(),Re?.unsubscribe()};return(0,ce.e)((Re,Se)=>{at++,!ye&&!Ie&&nt();const qe=De=De??ge();Se.add(()=>{at--,0===at&&!ye&&!Ie&&(Ne=ve(Fe,Z))}),qe.subscribe(Se),!$e&&at>0&&($e=new N.Hp({next:ae=>qe.next(ae),error:ae=>{ye=!0,nt(),Ne=ve(rt,Ee,ae),qe.error(ae)},complete:()=>{Ie=!0,nt(),Ne=ve(rt,K),qe.complete()}}),(0,u.Xf)(Re).subscribe($e))})(te)}}function ve(ue,ge,...Ee){if(!0===ge)return void ue();if(!1===ge)return;const K=new N.Hp({next:()=>{K.unsubscribe(),ue()}});return ge(...Ee).subscribe(K)}},9468:(ut,Ae,L)=>{L.d(Ae,{R:()=>j});var u=L(4482);function j(N,ce=0){return(0,u.e)((he,ve)=>{ve.add(N.schedule(()=>he.subscribe(ve),ce))})}},8505:(ut,Ae,L)=>{L.d(Ae,{b:()=>he});var u=L(576),j=L(4482),N=L(5403),ce=L(4671);function he(ve,ue,ge){const Ee=(0,u.m)(ve)||ue||ge?{next:ve,error:ue,complete:ge}:ve;return Ee?(0,j.e)((K,Z)=>{var te;null===(te=Ee.subscribe)||void 0===te||te.call(Ee);let $e=!0;K.subscribe((0,N.x)(Z,Ne=>{var De;null===(De=Ee.next)||void 0===De||De.call(Ee,Ne),Z.next(Ne)},()=>{var Ne;$e=!1,null===(Ne=Ee.complete)||void 0===Ne||Ne.call(Ee),Z.complete()},Ne=>{var De;$e=!1,null===(De=Ee.error)||void 0===De||De.call(Ee,Ne),Z.error(Ne)},()=>{var Ne,De;$e&&(null===(Ne=Ee.unsubscribe)||void 0===Ne||Ne.call(Ee)),null===(De=Ee.finalize)||void 0===De||De.call(Ee)}))}):ce.y}},4408:(ut,Ae,L)=>{L.d(Ae,{o:()=>he});var u=L(727);class j extends u.w0{constructor(ue,ge){super()}schedule(ue,ge=0){return this}}const N={setInterval(ve,ue,...ge){const{delegate:Ee}=N;return Ee?.setInterval?Ee.setInterval(ve,ue,...ge):setInterval(ve,ue,...ge)},clearInterval(ve){const{delegate:ue}=N;return(ue?.clearInterval||clearInterval)(ve)},delegate:void 0};var ce=L(8737);class he extends j{constructor(ue,ge){super(ue,ge),this.scheduler=ue,this.work=ge,this.pending=!1}schedule(ue,ge=0){if(this.closed)return this;this.state=ue;const Ee=this.id,K=this.scheduler;return null!=Ee&&(this.id=this.recycleAsyncId(K,Ee,ge)),this.pending=!0,this.delay=ge,this.id=this.id||this.requestAsyncId(K,this.id,ge),this}requestAsyncId(ue,ge,Ee=0){return N.setInterval(ue.flush.bind(ue,this),Ee)}recycleAsyncId(ue,ge,Ee=0){if(null!=Ee&&this.delay===Ee&&!1===this.pending)return ge;N.clearInterval(ge)}execute(ue,ge){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ee=this._execute(ue,ge);if(Ee)return Ee;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ue,ge){let K,Ee=!1;try{this.work(ue)}catch(Z){Ee=!0,K=Z||new Error("Scheduled action threw falsy error")}if(Ee)return this.unsubscribe(),K}unsubscribe(){if(!this.closed){const{id:ue,scheduler:ge}=this,{actions:Ee}=ge;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ce.P)(Ee,this),null!=ue&&(this.id=this.recycleAsyncId(ge,ue,null)),this.delay=null,super.unsubscribe()}}}},7565:(ut,Ae,L)=>{L.d(Ae,{v:()=>N});var u=L(6063);class j{constructor(he,ve=j.now){this.schedulerActionCtor=he,this.now=ve}schedule(he,ve=0,ue){return new this.schedulerActionCtor(this,he).schedule(ue,ve)}}j.now=u.l.now;class N extends j{constructor(he,ve=j.now){super(he,ve),this.actions=[],this._active=!1,this._scheduled=void 0}flush(he){const{actions:ve}=this;if(this._active)return void ve.push(he);let ue;this._active=!0;do{if(ue=he.execute(he.state,he.delay))break}while(he=ve.shift());if(this._active=!1,ue){for(;he=ve.shift();)he.unsubscribe();throw ue}}}},4986:(ut,Ae,L)=>{L.d(Ae,{P:()=>ce,z:()=>N});var u=L(4408);const N=new(L(7565).v)(u.o),ce=N},6063:(ut,Ae,L)=>{L.d(Ae,{l:()=>u});const u={now:()=>(u.delegate||Date).now(),delegate:void 0}},3410:(ut,Ae,L)=>{L.d(Ae,{z:()=>u});const u={setTimeout(j,N,...ce){const{delegate:he}=u;return he?.setTimeout?he.setTimeout(j,N,...ce):setTimeout(j,N,...ce)},clearTimeout(j){const{delegate:N}=u;return(N?.clearTimeout||clearTimeout)(j)},delegate:void 0}},2202:(ut,Ae,L)=>{L.d(Ae,{h:()=>j});const j=function u(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ut,Ae,L)=>{L.d(Ae,{L:()=>u});const u="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(ut,Ae,L)=>{L.d(Ae,{_6:()=>ve,jO:()=>ce,yG:()=>he});var u=L(576),j=L(3532);function N(ue){return ue[ue.length-1]}function ce(ue){return(0,u.m)(N(ue))?ue.pop():void 0}function he(ue){return(0,j.K)(N(ue))?ue.pop():void 0}function ve(ue,ge){return"number"==typeof N(ue)?ue.pop():ge}},8737:(ut,Ae,L)=>{function u(j,N){if(j){const ce=j.indexOf(N);0<=ce&&j.splice(ce,1)}}L.d(Ae,{P:()=>u})},3888:(ut,Ae,L)=>{function u(j){const ce=j(he=>{Error.call(he),he.stack=(new Error).stack});return ce.prototype=Object.create(Error.prototype),ce.prototype.constructor=ce,ce}L.d(Ae,{d:()=>u})},2806:(ut,Ae,L)=>{L.d(Ae,{O:()=>ce,x:()=>N});var u=L(2416);let j=null;function N(he){if(u.v.useDeprecatedSynchronousErrorHandling){const ve=!j;if(ve&&(j={errorThrown:!1,error:null}),he(),ve){const{errorThrown:ue,error:ge}=j;if(j=null,ue)throw ge}}else he()}function ce(he){u.v.useDeprecatedSynchronousErrorHandling&&j&&(j.errorThrown=!0,j.error=he)}},9672:(ut,Ae,L)=>{function u(j,N,ce,he=0,ve=!1){const ue=N.schedule(function(){ce(),ve?j.add(this.schedule(null,he)):this.unsubscribe()},he);if(j.add(ue),!ve)return ue}L.d(Ae,{f:()=>u})},4671:(ut,Ae,L)=>{function u(j){return j}L.d(Ae,{y:()=>u})},1144:(ut,Ae,L)=>{L.d(Ae,{z:()=>u});const u=j=>j&&"number"==typeof j.length&&"function"!=typeof j},2206:(ut,Ae,L)=>{L.d(Ae,{D:()=>j});var u=L(576);function j(N){return Symbol.asyncIterator&&(0,u.m)(N?.[Symbol.asyncIterator])}},576:(ut,Ae,L)=>{function u(j){return"function"==typeof j}L.d(Ae,{m:()=>u})},3670:(ut,Ae,L)=>{L.d(Ae,{c:()=>N});var u=L(8822),j=L(576);function N(ce){return(0,j.m)(ce[u.L])}},6495:(ut,Ae,L)=>{L.d(Ae,{T:()=>N});var u=L(2202),j=L(576);function N(ce){return(0,j.m)(ce?.[u.h])}},8239:(ut,Ae,L)=>{L.d(Ae,{t:()=>j});var u=L(576);function j(N){return(0,u.m)(N?.then)}},3260:(ut,Ae,L)=>{L.d(Ae,{L:()=>ce,Q:()=>N});var u=L(655),j=L(576);function N(he){return(0,u.FC)(this,arguments,function*(){const ue=he.getReader();try{for(;;){const{value:ge,done:Ee}=yield(0,u.qq)(ue.read());if(Ee)return yield(0,u.qq)(void 0);yield yield(0,u.qq)(ge)}}finally{ue.releaseLock()}})}function ce(he){return(0,j.m)(he?.getReader)}},3532:(ut,Ae,L)=>{L.d(Ae,{K:()=>j});var u=L(576);function j(N){return N&&(0,u.m)(N.schedule)}},4482:(ut,Ae,L)=>{L.d(Ae,{A:()=>j,e:()=>N});var u=L(576);function j(ce){return(0,u.m)(ce?.lift)}function N(ce){return he=>{if(j(he))return he.lift(function(ve){try{return ce(ve,this)}catch(ue){this.error(ue)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(ut,Ae,L)=>{function u(){}L.d(Ae,{Z:()=>u})},9635:(ut,Ae,L)=>{L.d(Ae,{U:()=>N,z:()=>j});var u=L(4671);function j(...ce){return N(ce)}function N(ce){return 0===ce.length?u.y:1===ce.length?ce[0]:function(ve){return ce.reduce((ue,ge)=>ge(ue),ve)}}},7849:(ut,Ae,L)=>{L.d(Ae,{h:()=>N});var u=L(2416),j=L(3410);function N(ce){j.z.setTimeout(()=>{const{onUnhandledError:he}=u.v;if(!he)throw ce;he(ce)})}},4532:(ut,Ae,L)=>{function u(j){return new TypeError(`You provided ${null!==j&&"object"==typeof j?"an invalid object":`'${j}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(Ae,{z:()=>u})},655:(ut,Ae,L)=>{function ce(ee,re){var _e={};for(var de in ee)Object.prototype.hasOwnProperty.call(ee,de)&&re.indexOf(de)<0&&(_e[de]=ee[de]);if(null!=ee&&"function"==typeof Object.getOwnPropertySymbols){var Ue=0;for(de=Object.getOwnPropertySymbols(ee);Ue<de.length;Ue++)re.indexOf(de[Ue])<0&&Object.prototype.propertyIsEnumerable.call(ee,de[Ue])&&(_e[de[Ue]]=ee[de[Ue]])}return _e}function ge(ee,re,_e,de){return new(_e||(_e=Promise))(function(He,_t){function Jt(bn){try{Ze(de.next(bn))}catch(Vn){_t(Vn)}}function Gt(bn){try{Ze(de.throw(bn))}catch(Vn){_t(Vn)}}function Ze(bn){bn.done?He(bn.value):function Ue(He){return He instanceof _e?He:new _e(function(_t){_t(He)})}(bn.value).then(Jt,Gt)}Ze((de=de.apply(ee,re||[])).next())})}function Ie(ee){return this instanceof Ie?(this.v=ee,this):new Ie(ee)}function ye(ee,re,_e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ue,de=_e.apply(ee,re||[]),He=[];return Ue={},_t("next"),_t("throw"),_t("return"),Ue[Symbol.asyncIterator]=function(){return this},Ue;function _t(on){de[on]&&(Ue[on]=function(en){return new Promise(function(zt,Vt){He.push([on,en,zt,Vt])>1||Jt(on,en)})})}function Jt(on,en){try{!function Gt(on){on.value instanceof Ie?Promise.resolve(on.value.v).then(Ze,bn):Vn(He[0][2],on)}(de[on](en))}catch(zt){Vn(He[0][3],zt)}}function Ze(on){Jt("next",on)}function bn(on){Jt("throw",on)}function Vn(on,en){on(en),He.shift(),He.length&&Jt(He[0][0],He[0][1])}}function rt(ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _e,re=ee[Symbol.asyncIterator];return re?re.call(ee):(ee=function te(ee){var re="function"==typeof Symbol&&Symbol.iterator,_e=re&&ee[re],de=0;if(_e)return _e.call(ee);if(ee&&"number"==typeof ee.length)return{next:function(){return ee&&de>=ee.length&&(ee=void 0),{value:ee&&ee[de++],done:!ee}}};throw new TypeError(re?"Object is not iterable.":"Symbol.iterator is not defined.")}(ee),_e={},de("next"),de("throw"),de("return"),_e[Symbol.asyncIterator]=function(){return this},_e);function de(He){_e[He]=ee[He]&&function(_t){return new Promise(function(Jt,Gt){!function Ue(He,_t,Jt,Gt){Promise.resolve(Gt).then(function(Ze){He({value:Ze,done:Jt})},_t)}(Jt,Gt,(_t=ee[He](_t)).done,_t.value)})}}}L.d(Ae,{FC:()=>ye,KL:()=>rt,_T:()=>ce,mG:()=>ge,qq:()=>Ie})},4650:(ut,Ae,L)=>{L.d(Ae,{$8M:()=>nc,$Z:()=>JE,AFp:()=>FR,ALo:()=>hR,AaK:()=>ge,BQk:()=>If,CHM:()=>Mh,CRH:()=>UI,CZH:()=>vb,CqO:()=>OC,D6c:()=>fk,EJc:()=>LV,EiD:()=>_A,EpF:()=>iv,F$t:()=>ai,F4k:()=>No,FYo:()=>yE,FiY:()=>Ye,G48:()=>tk,Gf:()=>BI,GfV:()=>uy,Gpc:()=>Z,Hsn:()=>Tl,Ikx:()=>Nv,JOm:()=>Mo,JVY:()=>iE,KtG:()=>ta,L6k:()=>sE,LAX:()=>gA,LFG:()=>Zn,LSH:()=>dE,Lbi:()=>bb,Lck:()=>Xx,MAs:()=>Xy,MMx:()=>Yv,NdJ:()=>Jm,O4$:()=>Zc,OlP:()=>An,Oqu:()=>Fd,PXZ:()=>Iu,Q6J:()=>Jy,QGY:()=>Dl,QP$:()=>Ke,QbO:()=>PV,Qsj:()=>SA,R0b:()=>Xs,RDi:()=>X0,Rgc:()=>Pf,SBq:()=>dm,Sil:()=>Cb,Suo:()=>Tg,TTD:()=>Ls,TgZ:()=>ev,W1O:()=>ER,WFA:()=>sv,X6Q:()=>Pg,XFs:()=>it,Xpm:()=>Y,Xts:()=>dc,Y36:()=>wd,YKP:()=>EI,YNc:()=>Yy,Yjl:()=>ie,Yz7:()=>en,Z0I:()=>so,ZZ4:()=>AD,_Bn:()=>wI,_UZ:()=>tv,_Vd:()=>Zs,_c5:()=>hk,_uU:()=>Nd,aQg:()=>Ob,c2e:()=>NV,cJS:()=>Vt,cg1:()=>gg,d8E:()=>XC,dDg:()=>zR,dqk:()=>kt,eBb:()=>oE,eFA:()=>Tb,ekj:()=>ng,eoX:()=>WR,f3M:()=>S,g9A:()=>VR,h0i:()=>jd,hGG:()=>xD,hij:()=>Ml,iGM:()=>ab,ifc:()=>ft,ip1:()=>NR,jDz:()=>eR,kL8:()=>JC,lG2:()=>Jn,lcZ:()=>MI,lqb:()=>sr,lri:()=>$R,mCW:()=>se,n5z:()=>js,n_E:()=>Of,oAB:()=>wt,oxw:()=>Sl,pB0:()=>b,q3G:()=>kr,q4F:()=>vE,qLn:()=>Jh,qOj:()=>Zm,qZA:()=>Cf,qzn:()=>cc,rWj:()=>GR,sBO:()=>nk,sIi:()=>bf,s_b:()=>Cu,soG:()=>Eb,tb:()=>wb,tp0:()=>At,uIk:()=>Td,vHH:()=>De,vpe:()=>Fo,wAp:()=>Mt,xp6:()=>pc,ynx:()=>nv,z2F:()=>Og,z3N:()=>Ca,zSh:()=>ny,zs3:()=>Ys});var u=L(7579),j=L(727),N=L(9751),ce=L(6451),he=L(3099);function ve(o){for(let a in o)if(o[a]===ve)return a;throw Error("Could not find renamed property on target object.")}function ue(o,a){for(const c in a)a.hasOwnProperty(c)&&!o.hasOwnProperty(c)&&(o[c]=a[c])}function ge(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(ge).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const c=a.indexOf("\n");return-1===c?a:a.substring(0,c)}function Ee(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const K=ve({__forward_ref__:ve});function Z(o){return o.__forward_ref__=Z,o.toString=function(){return ge(this())},o}function te(o){return $e(o)?o():o}function $e(o){return"function"==typeof o&&o.hasOwnProperty(K)&&o.__forward_ref__===Z}class De extends Error{constructor(a,c){super(function at(o,a){return`NG0${Math.abs(o)}${a?": "+a.trim():""}`}(a,c)),this.code=a}}function Ie(o){return"string"==typeof o?o:null==o?"":String(o)}function Re(o,a){throw new De(-201,!1)}function Gt(o,a){null==o&&function Ze(o,a,c,d){throw new Error(`ASSERTION ERROR: ${o}`+(null==d?"":` [Expected=> ${c} ${d} ${a} <=Actual]`))}(a,o,null,"!=")}function en(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function Vt(o){return{providers:o.providers||[],imports:o.imports||[]}}function Cr(o){return Ir(o,Xr)||Ir(o,Ri)}function so(o){return null!==Cr(o)}function Ir(o,a){return o.hasOwnProperty(a)?o[a]:null}function qi(o){return o&&(o.hasOwnProperty(Bn)||o.hasOwnProperty(Ki))?o[Bn]:null}const Xr=ve({\u0275prov:ve}),Bn=ve({\u0275inj:ve}),Ri=ve({ngInjectableDef:ve}),Ki=ve({ngInjectorDef:ve});var it=(()=>((it=it||{})[it.Default=0]="Default",it[it.Host=1]="Host",it[it.Self=2]="Self",it[it.SkipSelf=4]="SkipSelf",it[it.Optional=8]="Optional",it))();let gr;function gn(o){const a=gr;return gr=o,a}function _r(o,a,c){const d=Cr(o);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:c&it.Optional?null:void 0!==a?a:void Re(ge(o))}function Dn(o){return{toString:o}.toString()}var Sn=(()=>((Sn=Sn||{})[Sn.OnPush=0]="OnPush",Sn[Sn.Default=1]="Default",Sn))(),ft=(()=>{return(o=ft||(ft={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",ft;var o})();const kt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Dr={},Tt=[],Br=ve({\u0275cmp:ve}),Pt=ve({\u0275dir:ve}),Jr=ve({\u0275pipe:ve}),Kt=ve({\u0275mod:ve}),J=ve({\u0275fac:ve}),z=ve({__NG_ELEMENT_ID__:ve});let $=0;function Y(o){return Dn(()=>{const c=!0===o.standalone,d={},f={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:d,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===Sn.OnPush,directiveDefs:null,pipeDefs:null,standalone:c,dependencies:c&&o.dependencies||null,getStandaloneInjector:null,selectors:o.selectors||Tt,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||ft.Emulated,id:"c"+$++,styles:o.styles||Tt,_:null,setInput:null,schemas:o.schemas||null,tView:null},m=o.dependencies,v=o.features;return f.inputs=dn(o.inputs,d),f.outputs=dn(o.outputs),v&&v.forEach(E=>E(f)),f.directiveDefs=m?()=>("function"==typeof m?m():m).map(Te).filter(ze):null,f.pipeDefs=m?()=>("function"==typeof m?m():m).map(Ce).filter(ze):null,f})}function Te(o){return G(o)||W(o)}function ze(o){return null!==o}function wt(o){return Dn(()=>({type:o.type,bootstrap:o.bootstrap||Tt,declarations:o.declarations||Tt,imports:o.imports||Tt,exports:o.exports||Tt,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null}))}function dn(o,a){if(null==o)return Dr;const c={};for(const d in o)if(o.hasOwnProperty(d)){let f=o[d],m=f;Array.isArray(f)&&(m=f[1],f=f[0]),c[f]=d,a&&(a[f]=m)}return c}const Jn=Y;function ie(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,standalone:!0===o.standalone,onDestroy:o.type.prototype.ngOnDestroy||null}}function G(o){return o[Br]||null}function W(o){return o[Pt]||null}function Ce(o){return o[Jr]||null}function Ke(o){const a=G(o)||W(o)||Ce(o);return null!==a&&a.standalone}function yt(o,a){const c=o[Kt]||null;if(!c&&!0===a)throw new Error(`Type ${ge(o)} does not have '\u0275mod' property.`);return c}function er(o){return Array.isArray(o)&&"object"==typeof o[1]}function hi(o){return Array.isArray(o)&&!0===o[1]}function po(o){return 0!=(8&o.flags)}function jl(o){return 2==(2&o.flags)}function za(o){return 1==(1&o.flags)}function ti(o){return null!==o.template}function Uc(o){return 0!=(256&o[2])}function Sr(o,a){return o.hasOwnProperty(J)?o[J]:null}class Qo{constructor(a,c,d){this.previousValue=a,this.currentValue=c,this.firstChange=d}isFirstChange(){return this.firstChange}}function Ls(){return qu}function qu(o){return o.type.prototype.ngOnChanges&&(o.setInput=jc),zl}function zl(){const o=Xo(this),a=o?.current;if(a){const c=o.previous;if(c===Dr)o.previous=a;else for(let d in a)c[d]=a[d];o.current=null,this.ngOnChanges(a)}}function jc(o,a,c,d){const f=Xo(o)||function $c(o,a){return o[Ku]=a}(o,{previous:Dr,current:null}),m=f.current||(f.current={}),v=f.previous,E=this.declaredInputs[c],I=v[E];m[E]=new Qo(I&&I.currentValue,a,v===Dr),o[d]=a}Ls.ngInherit=!0;const Ku="__ngSimpleChanges__";function Xo(o){return o[Ku]||null}function Nn(o){for(;Array.isArray(o);)o=o[0];return o}function ki(o,a){return Nn(a[o])}function Tr(o,a){return Nn(a[o.index])}function _o(o,a){return o.data[a]}function Yi(o,a){return o[a]}function an(o,a){const c=a[o];return er(c)?c:c[0]}function ql(o){return 4==(4&o[2])}function Vs(o){return 64==(64&o[2])}function gi(o,a){return null==a?null:o[a]}function Ka(o){o[18]=0}function Hn(o,a){o[5]+=a;let c=o,d=o[3];for(;null!==d&&(1===a&&1===c[5]||-1===a&&0===c[5]);)d[5]+=a,c=d,d=d[3]}const Rt={lFrame:il(null),bindingsEnabled:!0};function yo(){return Rt.bindingsEnabled}function ke(){return Rt.lFrame.lView}function Zt(){return Rt.lFrame.tView}function Mh(o){return Rt.lFrame.contextLView=o,o[8]}function ta(o){return Rt.lFrame.contextLView=null,o}function tr(){let o=na();for(;null!==o&&64===o.type;)o=o.parent;return o}function na(){return Rt.lFrame.currentTNode}function Kr(o,a){const c=Rt.lFrame;c.currentTNode=o,c.isParent=a}function Zl(){return Rt.lFrame.isParent}function ra(){Rt.lFrame.isParent=!1}function tl(){return Rt.lFrame.bindingIndex++}function Xu(o,a){const c=Rt.lFrame;c.bindingIndex=c.bindingRootIndex=o,ia(a)}function ia(o){Rt.lFrame.currentDirectiveIndex=o}function qc(o){const a=Rt.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}function nl(){return Rt.lFrame.currentQueryIndex}function Kc(o){Rt.lFrame.currentQueryIndex=o}function rl(o){const a=o[1];return 2===a.type?a.declTNode:1===a.type?o[6]:null}function Ju(o,a,c){if(c&it.SkipSelf){let f=a,m=o;for(;!(f=f.parent,null!==f||c&it.Host||(f=rl(m),null===f||(m=m[15],10&f.type))););if(null===f)return!1;a=f,o=m}const d=Rt.lFrame=kh();return d.currentTNode=a,d.lView=o,!0}function sa(o){const a=kh(),c=o[1];Rt.lFrame=a,a.currentTNode=c.firstChild,a.lView=o,a.tView=c,a.contextLView=o,a.bindingIndex=c.bindingStartIndex,a.inI18n=!1}function kh(){const o=Rt.lFrame,a=null===o?null:o.child;return null===a?il(o):a}function il(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function Oh(){const o=Rt.lFrame;return Rt.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const ed=Oh;function Bs(){const o=Oh();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function On(){return Rt.lFrame.selectedIndex}function ys(o){Rt.lFrame.selectedIndex=o}function Pn(){const o=Rt.lFrame;return _o(o.tView,o.selectedIndex)}function Zc(){Rt.lFrame.currentNamespace="svg"}function Jc(o,a){for(let c=a.directiveStart,d=a.directiveEnd;c<d;c++){const m=o.data[c].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:A,ngOnDestroy:O}=m;v&&(o.contentHooks||(o.contentHooks=[])).push(-c,v),E&&((o.contentHooks||(o.contentHooks=[])).push(c,E),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(c,E)),I&&(o.viewHooks||(o.viewHooks=[])).push(-c,I),A&&((o.viewHooks||(o.viewHooks=[])).push(c,A),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(c,A)),null!=O&&(o.destroyHooks||(o.destroyHooks=[])).push(c,O)}}function oa(o,a,c){la(o,a,3,c)}function aa(o,a,c,d){(3&o[2])===c&&la(o,a,c,d)}function rd(o,a){let c=o[2];(3&c)===a&&(c&=2047,c+=1,o[2]=c)}function la(o,a,c,d){const m=d??-1,v=a.length-1;let E=0;for(let I=void 0!==d?65535&o[18]:0;I<v;I++)if("number"==typeof a[I+1]){if(E=a[I],null!=d&&E>=d)break}else a[I]<0&&(o[18]+=65536),(E<m||-1==m)&&(id(o,c,a,I),o[18]=(4294901760&o[18])+I+2),I++}function id(o,a,c,d){const f=c[d]<0,m=c[d+1],E=o[f?-c[d]:c[d]];if(f){if(o[2]>>11<o[18]>>16&&(3&o[2])===a){o[2]+=2048;try{m.call(E)}finally{}}}else try{m.call(E)}finally{}}class _i{constructor(a,c,d){this.factory=a,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=d}}function vs(o,a,c){let d=0;for(;d<c.length;){const f=c[d];if("number"==typeof f){if(0!==f)break;d++;const m=c[d++],v=c[d++],E=c[d++];o.setAttribute(a,v,E,m)}else{const m=f,v=c[++d];tu(m)?o.setProperty(a,m,v):o.setAttribute(a,m,v),d++}}return d}function ol(o){return 3===o||4===o||6===o}function tu(o){return 64===o.charCodeAt(0)}function al(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let c=-1;for(let d=0;d<a.length;d++){const f=a[d];"number"==typeof f?c=f:0===c||od(o,c,f,null,-1===c||2===c?a[++d]:null)}}return o}function od(o,a,c,d,f){let m=0,v=o.length;if(-1===a)v=-1;else for(;m<o.length;){const E=o[m++];if("number"==typeof E){if(E===a){v=-1;break}if(E>a){v=m-1;break}}}for(;m<o.length;){const E=o[m];if("number"==typeof E)break;if(E===c){if(null===d)return void(null!==f&&(o[m+1]=f));if(d===o[m+1])return void(o[m+2]=f)}m++,null!==d&&m++,null!==f&&m++}-1!==v&&(o.splice(v,0,a),m=v+1),o.splice(m++,0,c),null!==d&&o.splice(m++,0,d),null!==f&&o.splice(m++,0,f)}function Fh(o){return-1!==o}function rr(o){return 32767&o}function Hs(o,a){let c=function Lh(o){return o>>16}(o),d=a;for(;c>0;)d=d[15],c--;return d}let nu=!0;function ll(o){const a=nu;return nu=o,a}let ad=0;const ri={};function bs(o,a){const c=Jl(o,a);if(-1!==c)return c;const d=a[1];d.firstCreatePass&&(o.injectorIndex=a.length,ru(d.data,o),ru(a,null),ru(d.blueprint,null));const f=cl(o,a),m=o.injectorIndex;if(Fh(f)){const v=rr(f),E=Hs(f,a),I=E[1].data;for(let A=0;A<8;A++)a[m+A]=E[v+A]|I[v+A]}return a[m+8]=f,m}function ru(o,a){o.push(0,0,0,0,0,0,0,0,a)}function Jl(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function cl(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let c=0,d=null,f=a;for(;null!==f;){if(d=ma(f),null===d)return-1;if(c++,f=f[15],-1!==d.injectorIndex)return d.injectorIndex|c<<16}return-1}function vo(o,a,c){!function ld(o,a,c){let d;"string"==typeof c?d=c.charCodeAt(0)||0:c.hasOwnProperty(z)&&(d=c[z]),null==d&&(d=c[z]=ad++);const f=255&d;a.data[o+(f>>5)]|=1<<f}(o,a,c)}function ua(o,a,c){if(c&it.Optional)return o;Re()}function bo(o,a,c,d){if(c&it.Optional&&void 0===d&&(d=null),0==(c&(it.Self|it.Host))){const f=o[9],m=gn(void 0);try{return f?f.get(a,d,c&it.Optional):_r(a,d,c&it.Optional)}finally{gn(m)}}return ua(d,0,c)}function da(o,a,c,d=it.Default,f){if(null!==o){if(1024&a[2]){const v=function Uh(o,a,c,d,f){let m=o,v=a;for(;null!==m&&null!==v&&1024&v[2]&&!(256&v[2]);){const E=cd(m,v,c,d|it.Self,ri);if(E!==ri)return E;let I=m.parent;if(!I){const A=v[21];if(A){const O=A.get(c,ri,d);if(O!==ri)return O}I=ma(v),v=v[15]}m=I}return f}(o,a,c,d,ri);if(v!==ri)return v}const m=cd(o,a,c,d,ri);if(m!==ri)return m}return bo(a,c,d,f)}function cd(o,a,c,d,f){const m=function Bh(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(z)?o[z]:void 0;return"number"==typeof a?a>=0?255&a:iu:a}(c);if("function"==typeof m){if(!Ju(a,o,d))return d&it.Host?ua(f,0,d):bo(a,c,d,f);try{const v=m(d);if(null!=v||d&it.Optional)return v;Re()}finally{ed()}}else if("number"==typeof m){let v=null,E=Jl(o,a),I=-1,A=d&it.Host?a[16][6]:null;for((-1===E||d&it.SkipSelf)&&(I=-1===E?cl(o,a):a[E+8],-1!==I&&tc(d,!1)?(v=a[1],E=rr(I),a=Hs(I,a)):E=-1);-1!==E;){const O=a[1];if(ha(m,E,O.data)){const B=ec(E,a,c,v,d,A);if(B!==ri)return B}I=a[E+8],-1!==I&&tc(d,a[1].data[E+8]===A)&&ha(m,E,a)?(v=O,E=rr(I),a=Hs(I,a)):E=-1}}return f}function ec(o,a,c,d,f,m){const v=a[1],E=v.data[o+8],O=dl(E,v,c,null==d?jl(E)&&nu:d!=v&&0!=(3&E.type),f&it.Host&&m===E);return null!==O?Xi(a,v,O,E):ri}function dl(o,a,c,d,f){const m=o.providerIndexes,v=a.data,E=1048575&m,I=o.directiveStart,O=m>>20,X=f?E+O:o.directiveEnd;for(let le=d?E:E+O;le<X;le++){const H=v[le];if(le<I&&c===H||le>=I&&H.type===c)return le}if(f){const le=v[I];if(le&&ti(le)&&le.type===c)return I}return null}function Xi(o,a,c,d){let f=o[c];const m=a.data;if(function eu(o){return o instanceof _i}(f)){const v=f;v.resolving&&function nt(o,a){const c=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new De(-200,`Circular dependency in DI detected for ${o}${c}`)}(function ye(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():Ie(o)}(m[c]));const E=ll(v.canSeeViewProviders);v.resolving=!0;const I=v.injectImpl?gn(v.injectImpl):null;Ju(o,d,it.Default);try{f=o[c]=v.factory(void 0,m,o,d),a.firstCreatePass&&c>=d.directiveStart&&function nd(o,a,c){const{ngOnChanges:d,ngOnInit:f,ngDoCheck:m}=a.type.prototype;if(d){const v=qu(a);(c.preOrderHooks||(c.preOrderHooks=[])).push(o,v),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(o,v)}f&&(c.preOrderHooks||(c.preOrderHooks=[])).push(0-o,f),m&&((c.preOrderHooks||(c.preOrderHooks=[])).push(o,m),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(o,m))}(c,m[c],a)}finally{null!==I&&gn(I),ll(E),v.resolving=!1,ed()}}return f}function ha(o,a,c){return!!(c[a+(o>>5)]&1<<o)}function tc(o,a){return!(o&it.Self||o&it.Host&&a)}class fa{constructor(a,c){this._tNode=a,this._lView=c}get(a,c,d){return da(this._tNode,this._lView,a,d,c)}}function iu(){return new fa(tr(),ke())}function js(o){return Dn(()=>{const a=o.prototype.constructor,c=a[J]||pa(a),d=Object.prototype;let f=Object.getPrototypeOf(o.prototype).constructor;for(;f&&f!==d;){const m=f[J]||pa(f);if(m&&m!==c)return m;f=Object.getPrototypeOf(f)}return m=>new m})}function pa(o){return $e(o)?()=>{const a=pa(te(o));return a&&a()}:Sr(o)}function ma(o){const a=o[1],c=a.type;return 2===c?a.declTNode:1===c?o[6]:null}function nc(o){return function ul(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const c=o.attrs;if(c){const d=c.length;let f=0;for(;f<d;){const m=c[f];if(ol(m))break;if(0===m)f+=2;else if("number"==typeof m)for(f++;f<d&&"string"==typeof c[f];)f++;else{if(m===a)return c[f+1];f+=2}}}return null}(tr(),o)}const ga="__parameters__";function ya(o,a,c){return Dn(()=>{const d=function su(o){return function(...c){if(o){const d=o(...c);for(const f in d)this[f]=d[f]}}}(a);function f(...m){if(this instanceof f)return d.apply(this,m),this;const v=new f(...m);return E.annotation=v,E;function E(I,A,O){const B=I.hasOwnProperty(ga)?I[ga]:Object.defineProperty(I,ga,{value:[]})[ga];for(;B.length<=O;)B.push(null);return(B[O]=B[O]||[]).push(v),I}}return c&&(f.prototype=Object.create(c.prototype)),f.prototype.ngMetadataName=o,f.annotationCls=f,f})}class An{constructor(a,c){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=en({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ar(o,a){void 0===a&&(a=o);for(let c=0;c<o.length;c++){let d=o[c];Array.isArray(d)?(a===o&&(a=o.slice(0,c)),Ar(d,a)):a!==o&&a.push(d)}return a}function es(o,a){o.forEach(c=>Array.isArray(c)?es(c,a):a(c))}function Gs(o,a,c){a>=o.length?o.push(c):o.splice(a,0,c)}function Io(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function Pi(o,a){const c=[];for(let d=0;d<o;d++)c.push(a);return c}function ii(o,a,c){let d=Mr(o,a);return d>=0?o[1|d]=c:(d=~d,function $h(o,a,c,d){let f=o.length;if(f==a)o.push(c,d);else if(1===f)o.push(d,o[0]),o[0]=c;else{for(f--,o.push(o[f-1],o[f]);f>a;)o[f]=o[f-2],f--;o[a]=c,o[a+1]=d}}(o,d,a,c)),d}function rc(o,a){const c=Mr(o,a);if(c>=0)return o[1|c]}function Mr(o,a){return function Bt(o,a,c){let d=0,f=o.length>>c;for(;f!==d;){const m=d+(f-d>>1),v=o[m<<c];if(a===v)return m<<c;v>a?f=m:d=m+1}return~(f<<c)}(o,a,1)}const va={},ou="__NG_DI_FLAG__",ba="ngTempTokenPath",fd=/\n/gm,au="__source";let gl;function Do(o){const a=gl;return gl=o,a}function em(o,a=it.Default){if(void 0===gl)throw new De(-203,!1);return null===gl?_r(o,void 0,a):gl.get(o,a&it.Optional?null:void 0,a)}function Zn(o,a=it.Default){return(function Un(){return gr}()||em)(te(o),a)}function S(o,a=it.Default){return"number"!=typeof a&&(a=0|(a.optional&&8)|(a.host&&1)|(a.self&&2)|(a.skipSelf&&4)),Zn(o,a)}function T(o){const a=[];for(let c=0;c<o.length;c++){const d=te(o[c]);if(Array.isArray(d)){if(0===d.length)throw new De(900,!1);let f,m=it.Default;for(let v=0;v<d.length;v++){const E=d[v],I=U(E);"number"==typeof I?-1===I?f=E.token:m|=I:f=E}a.push(Zn(f,m))}else a.push(Zn(d))}return a}function R(o,a){return o[ou]=a,o.prototype[ou]=a,o}function U(o){return o[ou]}const Ye=R(ya("Optional"),8),At=R(ya("SkipSelf"),4);let tm,Wh;function X0(o){tm=o}function cu(o){return function nm(){if(void 0===Wh&&(Wh=null,kt.trustedTypes))try{Wh=kt.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return Wh}()?.createHTML(o)||o}class wl{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class im extends wl{getTypeName(){return"HTML"}}class nE extends wl{getTypeName(){return"Style"}}class Z_ extends wl{getTypeName(){return"Script"}}class rE extends wl{getTypeName(){return"URL"}}class sm extends wl{getTypeName(){return"ResourceURL"}}function Ca(o){return o instanceof wl?o.changingThisBreaksApplicationSecurity:o}function cc(o,a){const c=function Y_(o){return o instanceof wl&&o.getTypeName()||null}(o);if(null!=c&&c!==a){if("ResourceURL"===c&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${c} (see https://g.co/ng/security#xss)`)}return c===a}function iE(o){return new im(o)}function sE(o){return new nE(o)}function oE(o){return new Z_(o)}function gA(o){return new rE(o)}function b(o){return new sm(o)}class y{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const c=(new window.DOMParser).parseFromString(cu(a),"text/html").body;return null===c?this.inertDocumentHelper.getInertBodyElement(a):(c.removeChild(c.firstChild),c)}catch{return null}}}class C{constructor(a){if(this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const c=this.inertDocument.createElement("html");this.inertDocument.appendChild(c);const d=this.inertDocument.createElement("body");c.appendChild(d)}}getInertBodyElement(a){const c=this.inertDocument.createElement("template");if("content"in c)return c.innerHTML=cu(a),c;const d=this.inertDocument.createElement("body");return d.innerHTML=cu(a),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(d),d}stripCustomNsAttrs(a){const c=a.attributes;for(let f=c.length-1;0<f;f--){const v=c.item(f).name;("xmlns:ns1"===v||0===v.indexOf("ns1:"))&&a.removeAttribute(v)}let d=a.firstChild;for(;d;)d.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(d),d=d.nextSibling}}const V=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function se(o){return(o=String(o)).match(V)?o:"unsafe:"+o}function Je(o){const a={};for(const c of o.split(","))a[c]=!0;return a}function pt(...o){const a={};for(const c of o)for(const d in c)c.hasOwnProperty(d)&&(a[d]=!0);return a}const Wt=Je("area,br,col,hr,img,wbr"),Fn=Je("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Ks=Je("rp,rt"),md=pt(Wt,pt(Fn,Je("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),pt(Ks,Je("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),pt(Ks,Fn)),Kh=Je("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Zh=Je("srcset"),am=pt(Kh,Zh,Je("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Je("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),lm=Je("script,style,template");class X_{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let c=a.firstChild,d=!0;for(;c;)if(c.nodeType===Node.ELEMENT_NODE?d=this.startElement(c):c.nodeType===Node.TEXT_NODE?this.chars(c.nodeValue):this.sanitizedSomething=!0,d&&c.firstChild)c=c.firstChild;else for(;c;){c.nodeType===Node.ELEMENT_NODE&&this.endElement(c);let f=this.checkClobberedElement(c,c.nextSibling);if(f){c=f;break}c=this.checkClobberedElement(c,c.parentNode)}return this.buf.join("")}startElement(a){const c=a.nodeName.toLowerCase();if(!md.hasOwnProperty(c))return this.sanitizedSomething=!0,!lm.hasOwnProperty(c);this.buf.push("<"),this.buf.push(c);const d=a.attributes;for(let f=0;f<d.length;f++){const m=d.item(f),v=m.name,E=v.toLowerCase();if(!am.hasOwnProperty(E)){this.sanitizedSomething=!0;continue}let I=m.value;Kh[E]&&(I=se(I)),Zh[E]&&(o=I,I=(o=String(o)).split(",").map(a=>se(a.trim())).join(", ")),this.buf.push(" ",v,'="',J_(I),'"')}var o;return this.buf.push(">"),!0}endElement(a){const c=a.nodeName.toLowerCase();md.hasOwnProperty(c)&&!Wt.hasOwnProperty(c)&&(this.buf.push("</"),this.buf.push(c),this.buf.push(">"))}chars(a){this.buf.push(J_(a))}checkClobberedElement(a,c){if(c&&(a.compareDocumentPosition(c)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return c}}const cE=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,cm=/([^\#-~ |!])/g;function J_(o){return o.replace(/&/g,"&amp;").replace(cE,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(cm,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let ey;function _A(o,a){let c=null;try{ey=ey||function g(o){const a=new C(o);return function x(){try{return!!(new window.DOMParser).parseFromString(cu(""),"text/html")}catch{return!1}}()?new y(a):a}(o);let d=a?String(a):"";c=ey.getInertBodyElement(d);let f=5,m=d;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,d=m,m=c.innerHTML,c=ey.getInertBodyElement(d)}while(d!==m);return cu((new X_).sanitizeChildren(uE(c)||c))}finally{if(c){const d=uE(c)||c;for(;d.firstChild;)d.removeChild(d.firstChild)}}}function uE(o){return"content"in o&&function L1(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}var kr=(()=>((kr=kr||{})[kr.NONE=0]="NONE",kr[kr.HTML=1]="HTML",kr[kr.STYLE=2]="STYLE",kr[kr.SCRIPT=3]="SCRIPT",kr[kr.URL=4]="URL",kr[kr.RESOURCE_URL=5]="RESOURCE_URL",kr))();function dE(o){const a=function Gn(){const o=ke();return o&&o[12]}();return a?a.sanitize(kr.URL,o)||"":cc(o,"URL")?Ca(o):se(Ie(o))}const dc=new An("ENVIRONMENT_INITIALIZER"),lr=new An("INJECTOR",-1),zn=new An("INJECTOR_DEF_TYPES");class Yh{get(a,c=va){if(c===va){const d=new Error(`NullInjectorError: No provider for ${ge(a)}!`);throw d.name="NullInjectorError",d}return c}}function Hr(...o){return{\u0275providers:lt(0,o)}}function lt(o,...a){const c=[],d=new Set;let f;return es(a,m=>{const v=m;hc(v,c,[],d)&&(f||(f=[]),f.push(v))}),void 0!==f&&ty(f,c),c}function ty(o,a){for(let c=0;c<o.length;c++){const{providers:f}=o[c];es(f,m=>{a.push(m)})}}function hc(o,a,c,d){if(!(o=te(o)))return!1;let f=null,m=qi(o);const v=!m&&G(o);if(m||v){if(v&&!v.standalone)return!1;f=o}else{const I=o.ngModule;if(m=qi(I),!m)return!1;f=I}const E=d.has(f);if(v){if(E)return!1;if(d.add(f),v.dependencies){const I="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const A of I)hc(A,a,c,d)}}else{if(!m)return!1;{if(null!=m.imports&&!E){let A;d.add(f);try{es(m.imports,O=>{hc(O,a,c,d)&&(A||(A=[]),A.push(O))})}finally{}void 0!==A&&ty(A,a)}if(!E){const A=Sr(f)||(()=>new f);a.push({provide:f,useFactory:A,deps:Tt},{provide:zn,useValue:f,multi:!0},{provide:dc,useValue:()=>Zn(f),multi:!0})}const I=m.providers;null==I||E||es(I,O=>{a.push(O)})}}return f!==o&&void 0!==o.providers}const bA=ve({provide:String,useValue:ve});function Ia(o){return null!==o&&"object"==typeof o&&bA in o}function yi(o){return"function"==typeof o}const ny=new An("Set Injector scope."),uu={},Or={};let Ao;function ry(){return void 0===Ao&&(Ao=new Yh),Ao}class sr{}class fE extends sr{constructor(a,c,d,f){super(),this.parent=c,this.source=d,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ay(a,v=>this.processProvider(v)),this.records.set(lr,gd(void 0,this)),f.has("environment")&&this.records.set(sr,gd(void 0,this));const m=this.records.get(ny);null!=m&&"string"==typeof m.value&&this.scopes.add(m.value),this.injectorDefTypes=new Set(this.get(zn.multi,Tt,it.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}runInContext(a){this.assertNotDestroyed();const c=Do(this),d=gn(void 0);try{return a()}finally{Do(c),gn(d)}}get(a,c=va,d=it.Default){this.assertNotDestroyed();const f=Do(this),m=gn(void 0);try{if(!(d&it.SkipSelf)){let E=this.records.get(a);if(void 0===E){const I=function oy(o){return"function"==typeof o||"object"==typeof o&&o instanceof An}(a)&&Cr(a);E=I&&this.injectableDefInScope(I)?gd(iy(a),uu):null,this.records.set(a,E)}if(null!=E)return this.hydrate(a,E)}return(d&it.Self?ry():this.parent).get(a,c=d&it.Optional&&c===va?null:c)}catch(v){if("NullInjectorError"===v.name){if((v[ba]=v[ba]||[]).unshift(ge(a)),f)throw v;return function ne(o,a,c,d){const f=o[ba];throw a[au]&&f.unshift(a[au]),o.message=function pe(o,a,c,d=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.slice(2):o;let f=ge(a);if(Array.isArray(a))f=a.map(ge).join(" -> ");else if("object"==typeof a){let m=[];for(let v in a)if(a.hasOwnProperty(v)){let E=a[v];m.push(v+":"+("string"==typeof E?JSON.stringify(E):ge(E)))}f=`{${m.join(", ")}}`}return`${c}${d?"("+d+")":""}[${f}]: ${o.replace(fd,"\n  ")}`}("\n"+o.message,f,c,d),o.ngTokenPath=f,o[ba]=null,o}(v,a,"R3InjectorError",this.source)}throw v}finally{gn(m),Do(f)}}resolveInjectorInitializers(){const a=Do(this),c=gn(void 0);try{const d=this.get(dc.multi,Tt,it.Self);for(const f of d)f()}finally{Do(a),gn(c)}}toString(){const a=[],c=this.records;for(const d of c.keys())a.push(ge(d));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new De(205,!1)}processProvider(a){let c=yi(a=te(a))?a:te(a&&a.provide);const d=function CA(o){return Ia(o)?gd(void 0,o.useValue):gd(sy(o),uu)}(a);if(yi(a)||!0!==a.multi)this.records.get(c);else{let f=this.records.get(c);f||(f=gd(void 0,uu,!0),f.factory=()=>T(f.multi),this.records.set(c,f)),c=a,f.multi.push(a)}this.records.set(c,d)}hydrate(a,c){return c.value===uu&&(c.value=Or,c.value=c.factory()),"object"==typeof c.value&&c.value&&function DA(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(c.value)&&this._ngOnDestroyHooks.add(c.value),c.value}injectableDefInScope(a){if(!a.providedIn)return!1;const c=te(a.providedIn);return"string"==typeof c?"any"===c||this.scopes.has(c):this.injectorDefTypes.has(c)}}function iy(o){const a=Cr(o),c=null!==a?a.factory:Sr(o);if(null!==c)return c;if(o instanceof An)throw new De(204,!1);if(o instanceof Function)return function EA(o){const a=o.length;if(a>0)throw Pi(a,"?"),new De(204,!1);const c=function Rn(o){const a=o&&(o[Xr]||o[Ri]);if(a){const c=function us(o){if(o.hasOwnProperty("name"))return o.name;const a=(""+o).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${c}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${c}" class.`),a}return null}(o);return null!==c?()=>c.factory(o):()=>new o}(o);throw new De(204,!1)}function sy(o,a,c){let d;if(yi(o)){const f=te(o);return Sr(f)||iy(f)}if(Ia(o))d=()=>te(o.useValue);else if(function To(o){return!(!o||!o.useFactory)}(o))d=()=>o.useFactory(...T(o.deps||[]));else if(function um(o){return!(!o||!o.useExisting)}(o))d=()=>Zn(te(o.useExisting));else{const f=te(o&&(o.useClass||o.provide));if(!function IA(o){return!!o.deps}(o))return Sr(f)||iy(f);d=()=>new f(...T(o.deps))}return d}function gd(o,a,c=!1){return{factory:o,value:a,multi:c?[]:void 0}}function pE(o){return!!o.\u0275providers}function ay(o,a){for(const c of o)Array.isArray(c)?ay(c,a):pE(c)?ay(c.\u0275providers,a):a(c)}class mE{}class Qh{resolveComponentFactory(a){throw function gE(o){const a=Error(`No component factory found for ${ge(o)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=o,a}(a)}}let Zs=(()=>{class o{}return o.NULL=new Qh,o})();function Ni(){return vi(tr(),ke())}function vi(o,a){return new dm(Tr(o,a))}let dm=(()=>{class o{constructor(c){this.nativeElement=c}}return o.__NG_ELEMENT_ID__=Ni,o})();function _E(o){return o instanceof dm?o.nativeElement:o}class yE{}let SA=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function TA(){const o=ke(),c=an(tr().index,o);return(er(c)?c:o)[11]}(),o})(),cy=(()=>{class o{}return o.\u0275prov=en({token:o,providedIn:"root",factory:()=>null}),o})();class uy{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const vE=new uy("14.2.0"),hm={};function hy(o){return o.ngOriginalError}class Jh{constructor(){this._console=console}handleError(a){const c=this._findOriginalError(a);this._console.error("ERROR",a),c&&this._console.error("ORIGINAL ERROR",c)}_findOriginalError(a){let c=a&&hy(a);for(;c&&hy(c);)c=hy(c);return c||null}}const IE=new Map;let iL=0;const pm="__ngContext__";function br(o,a){er(a)?(o[pm]=a[20],function oL(o){IE.set(o[20],o)}(a)):o[pm]=a}function ef(o){const a=o[pm];return"number"==typeof a?function PA(o){return IE.get(o)||null}(a):a||null}function my(o){const a=ef(o);return a?er(a)?a:a.lView:null}function El(o){return o instanceof Function?o():o}var Mo=(()=>((Mo=Mo||{})[Mo.Important=1]="Important",Mo[Mo.DashCase=2]="DashCase",Mo))();function RE(o,a){return undefined(o,a)}function yd(o){const a=o[3];return hi(a)?a[3]:a}function yy(o){return bi(o[13])}function vy(o){return bi(o[4])}function bi(o){for(;null!==o&&!hi(o);)o=o[4];return o}function nf(o,a,c,d,f){if(null!=d){let m,v=!1;hi(d)?m=d:er(d)&&(v=!0,d=d[0]);const E=Nn(d);0===o&&null!==c?null==f?KA(a,c,E):fc(a,c,E,f||null,!0):1===o&&null!==c?fc(a,c,E,f||null,!0):2===o?function YA(o,a,c){const d=bm(o,a);d&&function rf(o,a,c,d){o.removeChild(a,c,d)}(o,d,a,c)}(a,E,v):3===o&&a.destroyNode(E),null!=m&&function EL(o,a,c,d,f){const m=c[7];m!==Nn(c)&&nf(a,o,d,m,f);for(let E=10;E<c.length;E++){const I=c[E];Tm(I[1],I,o,a,d,m)}}(a,o,m,c,f)}}function vm(o,a,c){return o.createElement(a,c)}function GA(o,a){const c=o[9],d=c.indexOf(a),f=a[3];512&a[2]&&(a[2]&=-513,Hn(f,-1)),c.splice(d,1)}function OE(o,a){if(o.length<=10)return;const c=10+a,d=o[c];if(d){const f=d[17];null!==f&&f!==o&&GA(f,d),a>0&&(o[c-1][4]=d[4]);const m=Io(o,10+a);!function mL(o,a){Tm(o,a,a[11],2,null,null),a[0]=null,a[6]=null}(d[1],d);const v=m[19];null!==v&&v.detachView(m[1]),d[3]=null,d[4]=null,d[2]&=-65}return d}function zA(o,a){if(!(128&a[2])){const c=a[11];c.destroyNode&&Tm(o,a,c,3,null,null),function _L(o){let a=o[13];if(!a)return PE(o[1],o);for(;a;){let c=null;if(er(a))c=a[13];else{const d=a[10];d&&(c=d)}if(!c){for(;a&&!a[4]&&a!==o;)er(a)&&PE(a[1],a),a=a[3];null===a&&(a=o),er(a)&&PE(a[1],a),c=a&&a[4]}a=c}}(a)}}function PE(o,a){if(!(128&a[2])){a[2]&=-65,a[2]|=128,function bL(o,a){let c;if(null!=o&&null!=(c=o.destroyHooks))for(let d=0;d<c.length;d+=2){const f=a[c[d]];if(!(f instanceof _i)){const m=c[d+1];if(Array.isArray(m))for(let v=0;v<m.length;v+=2){const E=f[m[v]],I=m[v+1];try{I.call(E)}finally{}}else try{m.call(f)}finally{}}}}(o,a),function vL(o,a){const c=o.cleanup,d=a[7];let f=-1;if(null!==c)for(let m=0;m<c.length-1;m+=2)if("string"==typeof c[m]){const v=c[m+1],E="function"==typeof v?v(a):Nn(a[v]),I=d[f=c[m+2]],A=c[m+3];"boolean"==typeof A?E.removeEventListener(c[m],I,A):A>=0?d[f=A]():d[f=-A].unsubscribe(),m+=2}else{const v=d[f=c[m+1]];c[m].call(v)}if(null!==d){for(let m=f+1;m<d.length;m++)(0,d[m])();a[7]=null}}(o,a),1===a[1].type&&a[11].destroy();const c=a[17];if(null!==c&&hi(a[3])){c!==a[3]&&GA(c,a);const d=a[19];null!==d&&d.detachView(o)}!function aL(o){IE.delete(o[20])}(a)}}function WA(o,a,c){return function qA(o,a,c){let d=a;for(;null!==d&&40&d.type;)d=(a=d).parent;if(null===d)return c[0];if(2&d.flags){const f=o.data[d.directiveStart].encapsulation;if(f===ft.None||f===ft.Emulated)return null}return Tr(d,c)}(o,a.parent,c)}function fc(o,a,c,d,f){o.insertBefore(a,c,d,f)}function KA(o,a,c){o.appendChild(a,c)}function ZA(o,a,c,d,f){null!==d?fc(o,a,c,d,f):KA(o,a,c)}function bm(o,a){return o.parentNode(a)}function FE(o,a,c){return wy(o,a,c)}let wy=function wm(o,a,c){return 40&o.type?Tr(o,c):null};function Cm(o,a,c,d){const f=WA(o,d,a),m=a[11],E=FE(d.parent||a[6],d,a);if(null!=f)if(Array.isArray(c))for(let I=0;I<c.length;I++)ZA(m,f,c[I],E,!1);else ZA(m,f,c,E,!1)}function Im(o,a){if(null!==a){const c=a.type;if(3&c)return Tr(a,o);if(4&c)return Sm(-1,o[a.index]);if(8&c){const d=a.child;if(null!==d)return Im(o,d);{const f=o[a.index];return hi(f)?Sm(-1,f):Nn(f)}}if(32&c)return RE(a,o)()||Nn(o[a.index]);{const d=Dm(o,a);return null!==d?Array.isArray(d)?d[0]:Im(yd(o[16]),d):Im(o,a.next)}}return null}function Dm(o,a){return null!==a?o[16][6].projection[a.projection]:null}function Sm(o,a){const c=10+o+1;if(c<a.length){const d=a[c],f=d[1].firstChild;if(null!==f)return Im(d,f)}return a[7]}function VE(o,a,c,d,f,m,v){for(;null!=c;){const E=d[c.index],I=c.type;if(v&&0===a&&(E&&br(Nn(E),d),c.flags|=4),64!=(64&c.flags))if(8&I)VE(o,a,c.child,d,f,m,!1),nf(a,o,f,E,m);else if(32&I){const A=RE(c,d);let O;for(;O=A();)nf(a,o,f,O,m);nf(a,o,f,E,m)}else 16&I?QA(o,a,d,c,f,m):nf(a,o,f,E,m);c=v?c.projectionNext:c.next}}function Tm(o,a,c,d,f,m){VE(c,d,o.firstChild,a,f,m,!1)}function QA(o,a,c,d,f,m){const v=c[16],I=v[6].projection[d.projection];if(Array.isArray(I))for(let A=0;A<I.length;A++)nf(a,o,f,I[A],m);else VE(o,a,I,v[3],f,m,!0)}function XA(o,a,c){o.setAttribute(a,"style",c)}function BE(o,a,c){""===c?o.removeAttribute(a,"class"):o.setAttribute(a,"class",c)}function JA(o,a,c){let d=o.length;for(;;){const f=o.indexOf(a,c);if(-1===f)return f;if(0===f||o.charCodeAt(f-1)<=32){const m=a.length;if(f+m===d||o.charCodeAt(f+m)<=32)return f}c=f+1}}const eM="ng-template";function IL(o,a,c){let d=0;for(;d<o.length;){let f=o[d++];if(c&&"class"===f){if(f=o[d],-1!==JA(f.toLowerCase(),a,0))return!0}else if(1===f){for(;d<o.length&&"string"==typeof(f=o[d++]);)if(f.toLowerCase()===a)return!0;return!1}}return!1}function tM(o){return 4===o.type&&o.value!==eM}function DL(o,a,c){return a===(4!==o.type||c?o.value:eM)}function nM(o,a,c){let d=4;const f=o.attrs||[],m=function SL(o){for(let a=0;a<o.length;a++)if(ol(o[a]))return a;return o.length}(f);let v=!1;for(let E=0;E<a.length;E++){const I=a[E];if("number"!=typeof I){if(!v)if(4&d){if(d=2|1&d,""!==I&&!DL(o,I,c)||""===I&&1===a.length){if(xo(d))return!1;v=!0}}else{const A=8&d?I:a[++E];if(8&d&&null!==o.attrs){if(!IL(o.attrs,A,c)){if(xo(d))return!1;v=!0}continue}const B=rM(8&d?"class":I,f,tM(o),c);if(-1===B){if(xo(d))return!1;v=!0;continue}if(""!==A){let X;X=B>m?"":f[B+1].toLowerCase();const le=8&d?X:null;if(le&&-1!==JA(le,A,0)||2&d&&A!==X){if(xo(d))return!1;v=!0}}}}else{if(!v&&!xo(d)&&!xo(I))return!1;if(v&&xo(I))continue;v=!1,d=I|1&d}}return xo(d)||v}function xo(o){return 0==(1&o)}function rM(o,a,c,d){if(null===a)return-1;let f=0;if(d||!c){let m=!1;for(;f<a.length;){const v=a[f];if(v===o)return f;if(3===v||6===v)m=!0;else{if(1===v||2===v){let E=a[++f];for(;"string"==typeof E;)E=a[++f];continue}if(4===v)break;if(0===v){f+=4;continue}}f+=m?1:2}return-1}return function sM(o,a){let c=o.indexOf(4);if(c>-1)for(c++;c<o.length;){const d=o[c];if("number"==typeof d)return-1;if(d===a)return c;c++}return-1}(a,o)}function UE(o,a,c=!1){for(let d=0;d<a.length;d++)if(nM(o,a[d],c))return!0;return!1}function oM(o,a){e:for(let c=0;c<a.length;c++){const d=a[c];if(o.length===d.length){for(let f=0;f<o.length;f++)if(o[f]!==d[f])continue e;return!0}}return!1}function HE(o,a){return o?":not("+a.trim()+")":a}function TL(o){let a=o[0],c=1,d=2,f="",m=!1;for(;c<o.length;){let v=o[c];if("string"==typeof v)if(2&d){const E=o[++c];f+="["+v+(E.length>0?'="'+E+'"':"")+"]"}else 8&d?f+="."+v:4&d&&(f+=" "+v);else""!==f&&!xo(v)&&(a+=HE(m,f),f=""),d=v,m=m||!xo(d);c++}return""!==f&&(a+=HE(m,f)),a}const Ut={};function pc(o){cM(Zt(),ke(),On()+o,!1)}function cM(o,a,c,d){if(!d)if(3==(3&a[2])){const m=o.preOrderCheckHooks;null!==m&&oa(a,m,c)}else{const m=o.preOrderHooks;null!==m&&aa(a,m,0,c)}ys(c)}function vd(o,a=null,c=null,d){const f=dM(o,a,c,d);return f.resolveInjectorInitializers(),f}function dM(o,a=null,c=null,d,f=new Set){const m=[c||Tt,Hr(o)];return d=d||("object"==typeof o?void 0:ge(o)),new fE(m,a||ry(),d||null,f)}let Ys=(()=>{class o{static create(c,d){if(Array.isArray(c))return vd({name:""},d,c,"");{const f=c.name??"";return vd({name:f},c.parent,c.providers,f)}}}return o.THROW_IF_NOT_FOUND=va,o.NULL=new Yh,o.\u0275prov=en({token:o,providedIn:"any",factory:()=>Zn(lr)}),o.__NG_ELEMENT_ID__=-1,o})();function wd(o,a=it.Default){const c=ke();return null===c?Zn(o,a):da(tr(),c,te(o),a)}function JE(){throw new Error("invalid")}function km(o,a){return o<<17|a<<2}function ko(o){return o>>17&32767}function Dy(o){return 2|o}function Cl(o){return(131068&o)>>2}function Sy(o,a){return-131069&o|a<<2}function Ty(o){return 1|o}function Ry(o,a){const c=o.contentQueries;if(null!==c)for(let d=0;d<c.length;d+=2){const f=c[d],m=c[d+1];if(-1!==m){const v=o.data[m];Kc(f),v.contentQueries(2,a[m],m)}}}function Oo(o,a,c,d,f,m,v,E,I,A,O){const B=a.blueprint.slice();return B[0]=f,B[2]=76|d,(null!==O||o&&1024&o[2])&&(B[2]|=1024),Ka(B),B[3]=B[15]=o,B[8]=c,B[10]=v||o&&o[10],B[11]=E||o&&o[11],B[12]=I||o&&o[12]||null,B[9]=A||o&&o[9]||null,B[6]=m,B[20]=function sL(){return iL++}(),B[21]=O,B[16]=2==a.type?o[16]:B,B}function fu(o,a,c,d,f){let m=o.data[a];if(null===m)m=function Bm(o,a,c,d,f){const m=na(),v=Zl(),I=o.data[a]=function dC(o,a,c,d,f,m){return{type:c,index:d,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?m:m&&m.parent,c,a,d,f);return null===o.firstChild&&(o.firstChild=I),null!==m&&(v?null==m.child&&null!==I.parent&&(m.child=I):null===m.next&&(m.next=I)),I}(o,a,c,d,f),function Qu(){return Rt.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=c,m.value=d,m.attrs=f;const v=function Kl(){const o=Rt.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();m.injectorIndex=null===v?-1:v.injectorIndex}return Kr(m,!0),m}function Fi(o,a,c,d){if(0===c)return-1;const f=a.length;for(let m=0;m<c;m++)a.push(d),o.blueprint.push(d),o.data.push(null);return f}function Aa(o,a,c){sa(a);try{const d=o.viewQuery;null!==d&&By(1,d,c);const f=o.template;null!==f&&Um(o,a,f,1,c),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&Ry(o,a),o.staticViewQueries&&By(2,o.viewQuery,c);const m=o.components;null!==m&&function cC(o,a){for(let c=0;c<a.length;c++)UM(o,a[c])}(a,m)}catch(d){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),d}finally{a[2]&=-5,Bs()}}function Il(o,a,c,d){const f=a[2];if(128!=(128&f)){sa(a);try{Ka(a),function el(o){return Rt.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==c&&Um(o,a,c,2,d);const v=3==(3&f);if(v){const A=o.preOrderCheckHooks;null!==A&&oa(a,A,null)}else{const A=o.preOrderHooks;null!==A&&aa(a,A,0,null),rd(a,0)}if(function VM(o){for(let a=yy(o);null!==a;a=vy(a)){if(!a[2])continue;const c=a[9];for(let d=0;d<c.length;d++){const f=c[d],m=f[3];0==(512&f[2])&&Hn(m,1),f[2]|=512}}}(a),function zm(o){for(let a=yy(o);null!==a;a=vy(a))for(let c=10;c<a.length;c++){const d=a[c],f=d[1];Vs(d)&&Il(f,d,f.template,d[8])}}(a),null!==o.contentQueries&&Ry(o,a),v){const A=o.contentCheckHooks;null!==A&&oa(a,A)}else{const A=o.contentHooks;null!==A&&aa(a,A,1),rd(a,1)}!function df(o,a){const c=o.hostBindingOpCodes;if(null!==c)try{for(let d=0;d<c.length;d++){const f=c[d];if(f<0)ys(~f);else{const m=f,v=c[++d],E=c[++d];Xu(v,m),E(2,a[m])}}}finally{ys(-1)}}(o,a);const E=o.components;null!==E&&function xM(o,a){for(let c=0;c<a.length;c++)BM(o,a[c])}(a,E);const I=o.viewQuery;if(null!==I&&By(2,I,d),v){const A=o.viewCheckHooks;null!==A&&oa(a,A)}else{const A=o.viewHooks;null!==A&&aa(a,A,2),rd(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),a[2]&=-41,512&a[2]&&(a[2]&=-513,Hn(a[3],-1))}finally{Bs()}}}function RM(o,a,c,d){const f=a[10],v=ql(a);try{!v&&f.begin&&f.begin(),v&&Aa(o,a,d),Il(o,a,c,d)}finally{!v&&f.end&&f.end()}}function Um(o,a,c,d,f){const m=On(),v=2&d;try{ys(-1),v&&a.length>22&&cM(o,a,22,!1),c(d,f)}finally{ys(m)}}function ky(o,a,c){if(po(a)){const f=a.directiveEnd;for(let m=a.directiveStart;m<f;m++){const v=o.data[m];v.contentQueries&&v.contentQueries(1,c[m],m)}}}function Cd(o,a,c){!yo()||(function jm(o,a,c,d){const f=c.directiveStart,m=c.directiveEnd;o.firstCreatePass||bs(c,a),br(d,a);const v=c.initialInputs;for(let E=f;E<m;E++){const I=o.data[E],A=ti(I);A&&FM(a,c,I);const O=Xi(a,o,E,c);br(O,a),null!==v&&LM(0,E-f,O,I,0,v),A&&(an(c.index,a)[8]=O)}}(o,a,c,Tr(c,a)),128==(128&c.flags)&&function $m(o,a,c){const d=c.directiveStart,f=c.directiveEnd,m=c.index,v=function Rh(){return Rt.lFrame.currentDirectiveIndex}();try{ys(m);for(let E=d;E<f;E++){const I=o.data[E],A=a[E];ia(E),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&Py(I,A)}}finally{ys(-1),ia(v)}}(o,a,c))}function Id(o,a,c=Tr){const d=a.localNames;if(null!==d){let f=a.index+1;for(let m=0;m<d.length;m+=2){const v=d[m+1],E=-1===v?c(a,o):o[v];o[f++]=E}}}function uC(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=hf(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function hf(o,a,c,d,f,m,v,E,I,A){const O=22+d,B=O+f,X=function kM(o,a){const c=[];for(let d=0;d<a;d++)c.push(d<o?null:Ut);return c}(O,B),le="function"==typeof A?A():A;return X[1]={type:o,blueprint:X,template:c,queries:null,viewQuery:E,declTNode:a,data:X.slice().fill(null,O),bindingStartIndex:O,expandoStartIndex:B,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:I,consts:le,incompleteFirstPass:!1}}function ts(o,a,c,d){const f=qm(a);null===c?f.push(d):(f.push(c),o.firstCreatePass&&$M(o).push(d,f.length-1))}function ff(o,a,c){for(let d in o)if(o.hasOwnProperty(d)){const f=o[d];(c=null===c?{}:c).hasOwnProperty(d)?c[d].push(a,f):c[d]=[a,f]}return c}function pf(o,a){const d=a.directiveEnd,f=o.data,m=a.attrs,v=[];let E=null,I=null;for(let A=a.directiveStart;A<d;A++){const O=f[A],B=O.inputs,X=null===m||tM(a)?null:pu(B,m);v.push(X),E=ff(B,A,E),I=ff(O.outputs,A,I)}null!==E&&(E.hasOwnProperty("class")&&(a.flags|=16),E.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=v,a.inputs=E,a.outputs=I}function Is(o,a,c,d,f,m,v,E){const I=Tr(a,c);let O,A=a.inputs;!E&&null!=A&&(O=A[d])?(Km(o,c,O,d,f),jl(a)&&hC(c,a.index)):3&a.type&&(d=function PM(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(d),f=null!=v?v(f,a.value||"",d):f,m.setProperty(I,d,f))}function hC(o,a){const c=an(a,o);16&c[2]||(c[2]|=32)}function Oy(o,a,c,d){let f=!1;if(yo()){const m=function pC(o,a,c){const d=o.directiveRegistry;let f=null;if(d)for(let m=0;m<d.length;m++){const v=d[m];UE(c,v.selectors,!1)&&(f||(f=[]),vo(bs(c,a),o,v.type),ti(v)?(mC(o,c),f.unshift(v)):f.push(v))}return f}(o,a,c),v=null===d?null:{"":-1};if(null!==m){f=!0,_C(c,o.data.length,m.length);for(let O=0;O<m.length;O++){const B=m[O];B.providersResolver&&B.providersResolver(B)}let E=!1,I=!1,A=Fi(o,a,m.length,null);for(let O=0;O<m.length;O++){const B=m[O];c.mergedAttrs=al(c.mergedAttrs,B.hostAttrs),yC(o,c,a,A,B),gC(A,B,v),null!==B.contentQueries&&(c.flags|=8),(null!==B.hostBindings||null!==B.hostAttrs||0!==B.hostVars)&&(c.flags|=128);const X=B.type.prototype;!E&&(X.ngOnChanges||X.ngOnInit||X.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(c.index),E=!0),!I&&(X.ngOnChanges||X.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(c.index),I=!0),A++}pf(o,c)}v&&function Ny(o,a,c){if(a){const d=o.localNames=[];for(let f=0;f<a.length;f+=2){const m=c[a[f+1]];if(null==m)throw new De(-301,!1);d.push(a[f],m)}}}(c,d,v)}return c.mergedAttrs=al(c.mergedAttrs,c.attrs),f}function fC(o,a,c,d,f,m){const v=m.hostBindings;if(v){let E=o.hostBindingOpCodes;null===E&&(E=o.hostBindingOpCodes=[]);const I=~a.index;(function NM(o){let a=o.length;for(;a>0;){const c=o[--a];if("number"==typeof c&&c<0)return c}return 0})(E)!=I&&E.push(I),E.push(d,f,v)}}function Py(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function mC(o,a){a.flags|=2,(o.components||(o.components=[])).push(a.index)}function gC(o,a,c){if(c){if(a.exportAs)for(let d=0;d<a.exportAs.length;d++)c[a.exportAs[d]]=o;ti(a)&&(c[""]=o)}}function _C(o,a,c){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+c,o.providerIndexes=a}function yC(o,a,c,d,f){o.data[d]=f;const m=f.factory||(f.factory=Sr(f.type)),v=new _i(m,ti(f),wd);o.blueprint[d]=v,c[d]=v,fC(o,a,0,d,Fi(o,c,f.hostVars,Ut),f)}function FM(o,a,c){const d=Tr(a,o),f=uC(c),m=o[10],v=Dd(o,Oo(o,f,null,c.onPush?32:16,d,a,m,m.createRenderer(d,c),null,null,null));o[a.index]=v}function Ma(o,a,c,d,f,m){const v=Tr(o,a);!function Fy(o,a,c,d,f,m,v){if(null==m)o.removeAttribute(a,f,c);else{const E=null==v?Ie(m):v(m,d||"",f);o.setAttribute(a,f,E,c)}}(a[11],v,m,o.value,c,d,f)}function LM(o,a,c,d,f,m){const v=m[a];if(null!==v){const E=d.setInput;for(let I=0;I<v.length;){const A=v[I++],O=v[I++],B=v[I++];null!==E?d.setInput(c,B,A,O):c[O]=B}}}function pu(o,a){let c=null,d=0;for(;d<a.length;){const f=a[d];if(0!==f)if(5!==f){if("number"==typeof f)break;o.hasOwnProperty(f)&&(null===c&&(c=[]),c.push(f,o[f],a[d+1])),d+=2}else d+=2;else d+=4}return c}function Gm(o,a,c,d){return new Array(o,!0,!1,a,null,0,d,c,null,null)}function BM(o,a){const c=an(a,o);if(Vs(c)){const d=c[1];48&c[2]?Il(d,c,d.template,c[8]):c[5]>0&&Ly(c)}}function Ly(o){for(let d=yy(o);null!==d;d=vy(d))for(let f=10;f<d.length;f++){const m=d[f];if(Vs(m))if(512&m[2]){const v=m[1];Il(v,m,v.template,m[8])}else m[5]>0&&Ly(m)}const c=o[1].components;if(null!==c)for(let d=0;d<c.length;d++){const f=an(c[d],o);Vs(f)&&f[5]>0&&Ly(f)}}function UM(o,a){const c=an(a,o),d=c[1];(function HM(o,a){for(let c=a.length;c<o.blueprint.length;c++)a.push(o.blueprint[c])})(d,c),Aa(d,c,c[8])}function Dd(o,a){return o[13]?o[14][4]=a:o[13]=a,o[14]=a,a}function Vy(o){for(;o;){o[2]|=32;const a=yd(o);if(Uc(o)&&!a)return o;o=a}return null}function By(o,a,c){Kc(0),a(o,c)}function qm(o){return o[7]||(o[7]=[])}function $M(o){return o.cleanup||(o.cleanup=[])}function bC(o,a,c){return(null===o||ti(o))&&(c=function Zu(o){for(;Array.isArray(o);){if("object"==typeof o[1])return o;o=o[0]}return null}(c[a.index])),c[11]}function wC(o,a){const c=o[9],d=c?c.get(Jh,null):null;d&&d.handleError(a)}function Km(o,a,c,d,f){for(let m=0;m<c.length;){const v=c[m++],E=c[m++],I=a[v],A=o.data[v];null!==A.setInput?A.setInput(I,f,d,E):I[E]=f}}function _f(o,a,c){let d=c?o.styles:null,f=c?o.classes:null,m=0;if(null!==a)for(let v=0;v<a.length;v++){const E=a[v];"number"==typeof E?m=E:1==m?f=Ee(f,E):2==m&&(d=Ee(d,E+": "+a[++v]+";"))}c?o.styles=d:o.stylesWithoutHost=d,c?o.classes=f:o.classesWithoutHost=f}function Uy(o,a,c,d,f=!1){for(;null!==c;){const m=a[c.index];if(null!==m&&d.push(Nn(m)),hi(m))for(let E=10;E<m.length;E++){const I=m[E],A=I[1].firstChild;null!==A&&Uy(I[1],I,A,d)}const v=c.type;if(8&v)Uy(o,a,c.child,d);else if(32&v){const E=RE(c,a);let I;for(;I=E();)d.push(I)}else if(16&v){const E=Dm(a,c);if(Array.isArray(E))d.push(...E);else{const I=yd(a[16]);Uy(I[1],I,E,d,!0)}}c=f?c.projectionNext:c.next}return d}class yf{constructor(a,c){this._lView=a,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,c=a[1];return Uy(c,a,c.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(hi(a)){const c=a[8],d=c?c.indexOf(this):-1;d>-1&&(OE(a,d),Io(c,d))}this._attachedToViewContainer=!1}zA(this._lView[1],this._lView)}onDestroy(a){ts(this._lView[1],this._lView,null,a)}markForCheck(){Vy(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function mf(o,a,c){const d=a[10];d.begin&&d.begin();try{Il(o,a,o.template,c)}catch(f){throw wC(a,f),f}finally{d.end&&d.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new De(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function gL(o,a){Tm(o,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new De(902,!1);this._appRef=a}}class GM extends yf{constructor(a){super(a),this._view=a}detectChanges(){!function gf(o){!function Wm(o){for(let a=0;a<o.components.length;a++){const c=o.components[a],d=my(c);if(null!==d){const f=d[1];RM(f,d,f.template,c)}}}(o[8])}(this._view)}checkNoChanges(){}get context(){return null}}class Hy extends Zs{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const c=G(a);return new Sd(c,this.ngModule)}}function EC(o){const a=[];for(let c in o)o.hasOwnProperty(c)&&a.push({propName:o[c],templateName:c});return a}class WM{constructor(a,c){this.injector=a,this.parentInjector=c}get(a,c,d){const f=this.injector.get(a,hm,d);return f!==hm||c===hm?f:this.parentInjector.get(a,c,d)}}class Sd extends mE{constructor(a,c){super(),this.componentDef=a,this.ngModule=c,this.componentType=a.type,this.selector=function aM(o){return o.map(TL).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!c}get inputs(){return EC(this.componentDef.inputs)}get outputs(){return EC(this.componentDef.outputs)}create(a,c,d,f){let m=(f=f||this.ngModule)instanceof sr?f:f?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const v=m?new WM(a,m):a,E=v.get(yE,null);if(null===E)throw new De(407,!1);const I=v.get(cy,null),A=E.createRenderer(null,this.componentDef),O=this.componentDef.selectors[0][0]||"div",B=d?function OM(o,a,c){return o.selectRootElement(a,c===ft.ShadowDom)}(A,d,this.componentDef.encapsulation):vm(E.createRenderer(null,this.componentDef),O,function zM(o){const a=o.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(O)),X=this.componentDef.onPush?288:272,le={components:[]},H=hf(0,null,null,1,0,null,null,null,null,null),Oe=Oo(null,H,le,X,null,null,E,A,I,v,null);let We,k;sa(Oe);try{const mt=function jy(o,a,c,d,f,m){const v=c[1];c[22]=o;const I=fu(v,22,2,"#host",null),A=I.mergedAttrs=a.hostAttrs;null!==A&&(_f(I,A,!0),null!==o&&(vs(f,o,A),null!==I.classes&&BE(f,o,I.classes),null!==I.styles&&XA(f,o,I.styles)));const O=d.createRenderer(o,a),B=Oo(c,uC(a),null,a.onPush?32:16,c[22],I,d,O,m||null,null,null);return v.firstCreatePass&&(vo(bs(I,c),v,a.type),mC(v,I),_C(I,c.length,1)),Dd(c,B),c[22]=B}(B,this.componentDef,Oe,E,A);if(B)if(d)vs(A,B,["ng-version",vE.full]);else{const{attrs:Ve,classes:Dt}=function lM(o){const a=[],c=[];let d=1,f=2;for(;d<o.length;){let m=o[d];if("string"==typeof m)2===f?""!==m&&a.push(m,o[++d]):8===f&&c.push(m);else{if(!xo(f))break;f=m}d++}return{attrs:a,classes:c}}(this.componentDef.selectors[0]);Ve&&vs(A,B,Ve),Dt&&Dt.length>0&&BE(A,B,Dt.join(" "))}if(k=_o(H,22),void 0!==c){const Ve=k.projection=[];for(let Dt=0;Dt<this.ngContentSelectors.length;Dt++){const ln=c[Dt];Ve.push(null!=ln?Array.from(ln):null)}}We=function KM(o,a,c,d,f){const m=c[1],v=function Hm(o,a,c){const d=tr();o.firstCreatePass&&(c.providersResolver&&c.providersResolver(c),yC(o,d,a,Fi(o,a,1,null),c),pf(o,d));const f=Xi(a,o,d.directiveStart,d);br(f,a);const m=Tr(d,a);return m&&br(m,a),f}(m,c,a);if(d.components.push(v),o[8]=v,null!==f)for(const I of f)I(v,a);if(a.contentQueries){const I=tr();a.contentQueries(1,v,I.directiveStart)}const E=tr();return!m.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(ys(E.index),fC(c[1],E,0,E.directiveStart,E.directiveEnd,a),Py(a,v)),v}(mt,this.componentDef,Oe,le,[YM]),Aa(H,Oe,null)}finally{Bs()}return new CC(this.componentType,We,vi(k,Oe),Oe,k)}}class CC extends class ly{}{constructor(a,c,d,f,m){super(),this.location=d,this._rootLView=f,this._tNode=m,this.instance=c,this.hostView=this.changeDetectorRef=new GM(f),this.componentType=a}setInput(a,c){const d=this._tNode.inputs;let f;if(null!==d&&(f=d[a])){const m=this._rootLView;Km(m[1],m,f,a,c),hC(m,this._tNode.index)}}get injector(){return new fa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function YM(){const o=tr();Jc(ke()[1],o)}function Zm(o){let a=function IC(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),c=!0;const d=[o];for(;a;){let f;if(ti(o))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new De(903,!1);f=a.\u0275dir}if(f){if(c){d.push(f);const v=o;v.inputs=ns(o.inputs),v.declaredInputs=ns(o.declaredInputs),v.outputs=ns(o.outputs);const E=f.hostBindings;E&&Gy(o,E);const I=f.viewQuery,A=f.contentQueries;if(I&&$y(o,I),A&&vf(o,A),ue(o.inputs,f.inputs),ue(o.declaredInputs,f.declaredInputs),ue(o.outputs,f.outputs),ti(f)&&f.data.animation){const O=o.data;O.animation=(O.animation||[]).concat(f.data.animation)}}const m=f.features;if(m)for(let v=0;v<m.length;v++){const E=m[v];E&&E.ngInherit&&E(o),E===Zm&&(c=!1)}}a=Object.getPrototypeOf(a)}!function QM(o){let a=0,c=null;for(let d=o.length-1;d>=0;d--){const f=o[d];f.hostVars=a+=f.hostVars,f.hostAttrs=al(f.hostAttrs,c=al(c,f.hostAttrs))}}(d)}function ns(o){return o===Dr?{}:o===Tt?[]:o}function $y(o,a){const c=o.viewQuery;o.viewQuery=c?(d,f)=>{a(d,f),c(d,f)}:a}function vf(o,a){const c=o.contentQueries;o.contentQueries=c?(d,f,m)=>{a(d,f,m),c(d,f,m)}:a}function Gy(o,a){const c=o.hostBindings;o.hostBindings=c?(d,f)=>{a(d,f),c(d,f)}:a}let Ym=null;function mu(){if(!Ym){const o=kt.Symbol;if(o&&o.iterator)Ym=o.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let c=0;c<a.length;++c){const d=a[c];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(Ym=d)}}}return Ym}function bf(o){return!!Qm(o)&&(Array.isArray(o)||!(o instanceof Map)&&mu()in o)}function Qm(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function wi(o,a,c){return!Object.is(o[a],c)&&(o[a]=c,!0)}function Td(o,a,c,d){const f=ke();return wi(f,tl(),a)&&(Zt(),Ma(Pn(),f,o,a,c,d)),Td}function Yy(o,a,c,d,f,m,v,E){const I=ke(),A=Zt(),O=o+22,B=A.firstCreatePass?function tx(o,a,c,d,f,m,v,E,I){const A=a.consts,O=fu(a,o,4,v||null,gi(A,E));Oy(a,c,O,gi(A,I)),Jc(a,O);const B=O.tViews=hf(2,O,d,f,m,a.directiveRegistry,a.pipeRegistry,null,a.schemas,A);return null!==a.queries&&(a.queries.template(a,O),B.queries=a.queries.embeddedTView(O)),O}(O,A,I,a,c,d,f,m,v):A.data[O];Kr(B,!1);const X=I[11].createComment("");Cm(A,I,X,B),br(X,I),Dd(I,I[O]=Gm(X,I,X,B)),za(B)&&Cd(A,I,B),null!=v&&Id(I,B,E)}function Xy(o){return Yi(function Ja(){return Rt.lFrame.contextLView}(),22+o)}function Jy(o,a,c){const d=ke();return wi(d,tl(),a)&&Is(Zt(),Pn(),d,o,a,d[11],c,!1),Jy}function kC(o,a,c,d,f){const v=f?"class":"style";Km(o,c,a.inputs[v],v,d)}function ev(o,a,c,d){const f=ke(),m=Zt(),v=22+o,E=f[11],I=f[v]=vm(E,a,function Xc(){return Rt.lFrame.currentNamespace}()),A=m.firstCreatePass?function GL(o,a,c,d,f,m,v){const E=a.consts,A=fu(a,o,2,f,gi(E,m));return Oy(a,c,A,gi(E,v)),null!==A.attrs&&_f(A,A.attrs,!1),null!==A.mergedAttrs&&_f(A,A.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,A),A}(v,m,f,0,a,c,d):m.data[v];Kr(A,!0);const O=A.mergedAttrs;null!==O&&vs(E,I,O);const B=A.classes;null!==B&&BE(E,I,B);const X=A.styles;return null!==X&&XA(E,I,X),64!=(64&A.flags)&&Cm(m,f,I,A),0===function Ya(){return Rt.lFrame.elementDepthCount}()&&br(I,f),function Yu(){Rt.lFrame.elementDepthCount++}(),za(A)&&(Cd(m,f,A),ky(m,A,f)),null!==d&&Id(f,A),ev}function Cf(){let o=tr();Zl()?ra():(o=o.parent,Kr(o,!1));const a=o;!function Qa(){Rt.lFrame.elementDepthCount--}();const c=Zt();return c.firstCreatePass&&(Jc(c,o),po(o)&&c.queries.elementEnd(o)),null!=a.classesWithoutHost&&function Ql(o){return 0!=(16&o.flags)}(a)&&kC(c,a,ke(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function Xl(o){return 0!=(32&o.flags)}(a)&&kC(c,a,ke(),a.stylesWithoutHost,!1),Cf}function tv(o,a,c,d){return ev(o,a,c,d),Cf(),tv}function nv(o,a,c){const d=ke(),f=Zt(),m=o+22,v=f.firstCreatePass?function zL(o,a,c,d,f){const m=a.consts,v=gi(m,d),E=fu(a,o,8,"ng-container",v);return null!==v&&_f(E,v,!0),Oy(a,c,E,gi(m,f)),null!==a.queries&&a.queries.elementStart(a,E),E}(m,f,d,a,c):f.data[m];Kr(v,!0);const E=d[m]=d[11].createComment("");return Cm(f,d,E,v),br(E,d),za(v)&&(Cd(f,d,v),ky(f,v,d)),null!=c&&Id(d,v),nv}function If(){let o=tr();const a=Zt();return Zl()?ra():(o=o.parent,Kr(o,!1)),a.firstCreatePass&&(Jc(a,o),po(o)&&a.queries.elementEnd(o)),If}function iv(){return ke()}function Dl(o){return!!o&&"function"==typeof o.then}function No(o){return!!o&&"function"==typeof o.subscribe}const OC=No;function Jm(o,a,c,d){const f=ke(),m=Zt(),v=tr();return PC(m,f,f[11],v,o,a,0,d),Jm}function sv(o,a){const c=tr(),d=ke(),f=Zt();return PC(f,d,bC(qc(f.data),c,d),c,o,a),sv}function PC(o,a,c,d,f,m,v,E){const I=za(d),O=o.firstCreatePass&&$M(o),B=a[8],X=qm(a);let le=!0;if(3&d.type||E){const We=Tr(d,a),k=E?E(We):We,mt=X.length,Ve=E?ln=>E(Nn(ln[d.index])):d.index;let Dt=null;if(!E&&I&&(Dt=function nx(o,a,c,d){const f=o.cleanup;if(null!=f)for(let m=0;m<f.length-1;m+=2){const v=f[m];if(v===c&&f[m+1]===d){const E=a[7],I=f[m+2];return E.length>I?E[I]:null}"string"==typeof v&&(m+=2)}return null}(o,a,f,d.index)),null!==Dt)(Dt.__ngLastListenerFn__||Dt).__ngNextListenerFn__=m,Dt.__ngLastListenerFn__=m,le=!1;else{m=NC(d,a,B,m,!1);const ln=c.listen(k,f,m);X.push(m,ln),O&&O.push(f,Ve,mt,mt+1)}}else m=NC(d,a,B,m,!1);const H=d.outputs;let Oe;if(le&&null!==H&&(Oe=H[f])){const We=Oe.length;if(We)for(let k=0;k<We;k+=2){const qt=a[Oe[k]][Oe[k+1]].subscribe(m),ci=X.length;X.push(m,qt),O&&O.push(f,d.index,ci,-(ci+1))}}}function eg(o,a,c,d){try{return!1!==c(d)}catch(f){return wC(o,f),!1}}function NC(o,a,c,d,f){return function m(v){if(v===Function)return d;Vy(2&o.flags?an(o.index,a):a);let I=eg(a,0,d,v),A=m.__ngNextListenerFn__;for(;A;)I=eg(a,0,A,v)&&I,A=A.__ngNextListenerFn__;return f&&!1===I&&(v.preventDefault(),v.returnValue=!1),I}}function Sl(o=1){return function Us(o){return(Rt.lFrame.contextLView=function td(o,a){for(;o>0;)a=a[15],o--;return a}(o,Rt.lFrame.contextLView))[8]}(o)}function FC(o,a){let c=null;const d=function iM(o){const a=o.attrs;if(null!=a){const c=a.indexOf(5);if(0==(1&c))return a[c+1]}return null}(o);for(let f=0;f<a.length;f++){const m=a[f];if("*"!==m){if(null===d?UE(o,m,!0):oM(d,m))return f}else c=f}return c}function ai(o){const a=ke()[16][6];if(!a.projection){const d=a.projection=Pi(o?o.length:1,null),f=d.slice();let m=a.child;for(;null!==m;){const v=o?FC(m,o):0;null!==v&&(f[v]?f[v].projectionNext=m:d[v]=m,f[v]=m),m=m.next}}}function Tl(o,a=0,c){const d=ke(),f=Zt(),m=fu(f,22+o,16,null,c||null);null===m.projection&&(m.projection=a),ra(),64!=(64&m.flags)&&function wL(o,a,c){QA(a[11],0,a,c,WA(o,c,a),FE(c.parent||a[6],c,a))}(f,d,m)}function gv(o,a,c,d,f){const m=o[c+1],v=null===a;let E=d?ko(m):Cl(m),I=!1;for(;0!==E&&(!1===I||v);){const O=o[E+1];UC(o[E],a)&&(I=!0,o[E+1]=d?Ty(O):Dy(O)),E=d?ko(O):Cl(O)}I&&(o[c+1]=d?Dy(m):Ty(m))}function UC(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&Mr(o,a)>=0}function ng(o,a){return function Ss(o,a,c,d){const f=ke(),m=Zt(),v=function _s(o){const a=Rt.lFrame,c=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,c}(2);m.firstUpdatePass&&function rg(o,a,c,d){const f=o.data;if(null===f[c+1]){const m=f[On()],v=function $C(o,a){return a>=o.expandoStartIndex}(o,c);(function og(o,a){return 0!=(o.flags&(a?16:32))})(m,d)&&null===a&&!v&&(a=!1),a=function ix(o,a,c,d){const f=qc(o);let m=d?a.residualClasses:a.residualStyles;if(null===f)0===(d?a.classBindings:a.styleBindings)&&(c=ig(c=GC(null,o,a,c,d),a.attrs,d),m=null);else{const v=a.directiveStylingLast;if(-1===v||o[v]!==f)if(c=GC(f,o,a,c,d),null===m){let I=function qL(o,a,c){const d=c?a.classBindings:a.styleBindings;if(0!==Cl(d))return o[ko(d)]}(o,a,d);void 0!==I&&Array.isArray(I)&&(I=GC(null,o,a,I[1],d),I=ig(I,a.attrs,d),function KL(o,a,c,d){o[ko(c?a.classBindings:a.styleBindings)]=d}(o,a,d,I))}else m=function ZL(o,a,c){let d;const f=a.directiveEnd;for(let m=1+a.directiveStylingLast;m<f;m++)d=ig(d,o[m].hostAttrs,c);return ig(d,a.attrs,c)}(o,a,d)}return void 0!==m&&(d?a.residualClasses=m:a.residualStyles=m),c}(f,m,a,d),function VC(o,a,c,d,f,m){let v=m?a.classBindings:a.styleBindings,E=ko(v),I=Cl(v);o[d]=c;let O,A=!1;if(Array.isArray(c)){const B=c;O=B[1],(null===O||Mr(B,O)>0)&&(A=!0)}else O=c;if(f)if(0!==I){const X=ko(o[E+1]);o[d+1]=km(X,E),0!==X&&(o[X+1]=Sy(o[X+1],d)),o[E+1]=function wM(o,a){return 131071&o|a<<17}(o[E+1],d)}else o[d+1]=km(E,0),0!==E&&(o[E+1]=Sy(o[E+1],d)),E=d;else o[d+1]=km(I,0),0===E?E=d:o[I+1]=Sy(o[I+1],d),I=d;A&&(o[d+1]=Dy(o[d+1])),gv(o,O,d,!0),gv(o,O,d,!1),function BC(o,a,c,d,f){const m=f?o.residualClasses:o.residualStyles;null!=m&&"string"==typeof a&&Mr(m,a)>=0&&(c[d+1]=Ty(c[d+1]))}(a,O,o,d,m),v=km(E,I),m?a.classBindings=v:a.styleBindings=v}(f,m,a,c,v,d)}}(m,o,v,d),a!==Ut&&wi(f,v,a)&&function Sv(o,a,c,d,f,m,v,E){if(!(3&a.type))return;const I=o.data,A=I[E+1];sg(function nC(o){return 1==(1&o)}(A)?zC(I,a,c,f,Cl(A),v):void 0)||(sg(m)||function tC(o){return 2==(2&o)}(A)&&(m=zC(I,null,c,f,E,v)),function CL(o,a,c,d,f){if(a)f?o.addClass(c,d):o.removeClass(c,d);else{let m=-1===d.indexOf("-")?void 0:Mo.DashCase;null==f?o.removeStyle(c,d,m):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),m|=Mo.Important),o.setStyle(c,d,f,m))}}(d,v,ki(On(),c),f,m))}(m,m.data[On()],f,f[11],o,f[v+1]=function ax(o,a){return null==o||("string"==typeof a?o+=a:"object"==typeof o&&(o=ge(Ca(o)))),o}(a,c),d,v)}(o,a,null,!0),ng}function GC(o,a,c,d,f){let m=null;const v=c.directiveEnd;let E=c.directiveStylingLast;for(-1===E?E=c.directiveStart:E++;E<v&&(m=a[E],d=ig(d,m.hostAttrs,f),m!==o);)E++;return null!==o&&(c.directiveStylingLast=E),d}function ig(o,a,c){const d=c?1:2;let f=-1;if(null!==a)for(let m=0;m<a.length;m++){const v=a[m];"number"==typeof v?f=v:f===d&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),ii(o,v,!!c||a[++m]))}return void 0===o?null:o}function zC(o,a,c,d,f,m){const v=null===a;let E;for(;f>0;){const I=o[f],A=Array.isArray(I),O=A?I[1]:I,B=null===O;let X=c[f+1];X===Ut&&(X=B?Tt:void 0);let le=B?rc(X,d):O===d?X:void 0;if(A&&!sg(le)&&(le=rc(I,d)),sg(le)&&(E=le,v))return E;const H=o[f+1];f=v?ko(H):Cl(H)}if(null!==a){let I=m?a.residualClasses:a.residualStyles;null!=I&&(E=rc(I,d))}return E}function sg(o){return void 0!==o}function Nd(o,a=""){const c=ke(),d=Zt(),f=o+22,m=d.firstCreatePass?fu(d,f,1,a,null):d.data[f],v=c[f]=function kE(o,a){return o.createText(a)}(c[11],a);Cm(d,c,v,m),Kr(m,!1)}function Fd(o){return Ml("",o,""),Fd}function Ml(o,a,c){const d=ke(),f=function Md(o,a,c,d){return wi(o,tl(),c)?a+Ie(c)+d:Ut}(d,o,a,c);return f!==Ut&&function Po(o,a,c){const d=ki(a,o);!function by(o,a,c){o.setValue(a,c)}(o[11],d,c)}(d,On(),f),Ml}function Nv(o,a,c){const d=ke();return wi(d,tl(),a)&&Is(Zt(),Pn(),d,o,a,d[11],c,!0),Nv}function XC(o,a,c){const d=ke();if(wi(d,tl(),a)){const m=Zt(),v=Pn();Is(m,v,d,o,a,bC(qc(m.data),v,d),c,!0)}return XC}const yu=void 0;var mg=["en",[["a","p"],["AM","PM"],yu],[["AM","PM"],yu,yu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],yu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],yu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",yu,"{1} 'at' {0}",yu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Tf(o){const c=Math.floor(Math.abs(o)),d=o.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===d?1:5}];let vu={};function gg(o){const a=function eV(o){return o.toLowerCase().replace(/_/g,"-")}(o);let c=Fv(a);if(c)return c;const d=a.split("-")[0];if(c=Fv(d),c)return c;if("en"===d)return mg;throw new De(701,!1)}function JC(o){return gg(o)[Mt.PluralCase]}function Fv(o){return o in vu||(vu[o]=kt.ng&&kt.ng.common&&kt.ng.common.locales&&kt.ng.common.locales[o]),vu[o]}var Mt=(()=>((Mt=Mt||{})[Mt.LocaleId=0]="LocaleId",Mt[Mt.DayPeriodsFormat=1]="DayPeriodsFormat",Mt[Mt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Mt[Mt.DaysFormat=3]="DaysFormat",Mt[Mt.DaysStandalone=4]="DaysStandalone",Mt[Mt.MonthsFormat=5]="MonthsFormat",Mt[Mt.MonthsStandalone=6]="MonthsStandalone",Mt[Mt.Eras=7]="Eras",Mt[Mt.FirstDayOfWeek=8]="FirstDayOfWeek",Mt[Mt.WeekendRange=9]="WeekendRange",Mt[Mt.DateFormat=10]="DateFormat",Mt[Mt.TimeFormat=11]="TimeFormat",Mt[Mt.DateTimeFormat=12]="DateTimeFormat",Mt[Mt.NumberSymbols=13]="NumberSymbols",Mt[Mt.NumberFormats=14]="NumberFormats",Mt[Mt.CurrencyCode=15]="CurrencyCode",Mt[Mt.CurrencySymbol=16]="CurrencySymbol",Mt[Mt.CurrencyName=17]="CurrencyName",Mt[Mt.Currencies=18]="Currencies",Mt[Mt.Directionality=19]="Directionality",Mt[Mt.PluralCase=20]="PluralCase",Mt[Mt.ExtraData=21]="ExtraData",Mt))();const bu="en-US";let Lv=bu;function zv(o,a,c,d,f){if(o=te(o),Array.isArray(o))for(let m=0;m<o.length;m++)zv(o[m],a,c,d,f);else{const m=Zt(),v=ke();let E=yi(o)?o:te(o.provide),I=sy(o);const A=tr(),O=1048575&A.providerIndexes,B=A.directiveStart,X=A.providerIndexes>>20;if(yi(o)||!o.multi){const le=new _i(I,f,wd),H=qv(E,a,f?O:O+X,B);-1===H?(vo(bs(A,v),m,E),Wv(m,o,a.length),a.push(E),A.directiveStart++,A.directiveEnd++,f&&(A.providerIndexes+=1048576),c.push(le),v.push(le)):(c[H]=le,v[H]=le)}else{const le=qv(E,a,O+X,B),H=qv(E,a,O,O+X),Oe=le>=0&&c[le],We=H>=0&&c[H];if(f&&!We||!f&&!Oe){vo(bs(A,v),m,E);const k=function Qx(o,a,c,d,f){const m=new _i(o,c,wd);return m.multi=[],m.index=a,m.componentProviders=0,bI(m,f,d&&!c),m}(f?Yx:Zx,c.length,f,d,I);!f&&We&&(c[H].providerFactory=k),Wv(m,o,a.length,0),a.push(E),A.directiveStart++,A.directiveEnd++,f&&(A.providerIndexes+=1048576),c.push(k),v.push(k)}else Wv(m,o,le>-1?le:H,bI(c[f?H:le],I,!f&&d));!f&&d&&We&&c[H].componentProviders++}}}function Wv(o,a,c,d){const f=yi(a),m=function wA(o){return!!o.useClass}(a);if(f||m){const I=(m?te(a.useClass):a).prototype.ngOnDestroy;if(I){const A=o.destroyHooks||(o.destroyHooks=[]);if(!f&&a.multi){const O=A.indexOf(c);-1===O?A.push(c,[d,I]):A[O+1].push(d,I)}else A.push(c,I)}}}function bI(o,a,c){return c&&o.componentProviders++,o.multi.push(a)-1}function qv(o,a,c,d){for(let f=c;f<d;f++)if(a[f]===o)return f;return-1}function Zx(o,a,c,d){return Kv(this.multi,[])}function Yx(o,a,c,d){const f=this.multi;let m;if(this.providerFactory){const v=this.providerFactory.componentProviders,E=Xi(c,c[1],this.providerFactory.index,d);m=E.slice(0,v),Kv(f,m);for(let I=v;I<E.length;I++)m.push(E[I])}else m=[],Kv(f,m);return m}function Kv(o,a){for(let c=0;c<o.length;c++)a.push((0,o[c])());return a}function wI(o,a=[]){return c=>{c.providersResolver=(d,f)=>function Kx(o,a,c){const d=Zt();if(d.firstCreatePass){const f=ti(o);zv(c,d.data,d.blueprint,f,!0),zv(a,d.data,d.blueprint,f,!1)}}(d,f?f(o):o,a)}}class jd{}class EI{}function Xx(o,a){return new Jx(o,a??null)}class Jx extends jd{constructor(a,c){super(),this._parent=c,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Hy(this);const d=yt(a);this._bootstrapComponents=El(d.bootstrap),this._r3Injector=dM(a,c,[{provide:jd,useValue:this},{provide:Zs,useValue:this.componentFactoryResolver}],ge(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class Zv extends EI{constructor(a){super(),this.moduleType=a}create(a){return new Jx(this.moduleType,a)}}class fV extends jd{constructor(a,c,d){super(),this.componentFactoryResolver=new Hy(this),this.instance=null;const f=new fE([...a,{provide:jd,useValue:this},{provide:Zs,useValue:this.componentFactoryResolver}],c||ry(),d,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function Yv(o,a,c=null){return new fV(o,a,c).injector}let Qv=(()=>{class o{constructor(c){this._injector=c,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(c){if(!c.standalone)return null;if(!this.cachedInjectors.has(c.id)){const d=lt(0,c.type),f=d.length>0?Yv([d],this._injector,`Standalone[${c.type.name}]`):null;this.cachedInjectors.set(c.id,f)}return this.cachedInjectors.get(c.id)}ngOnDestroy(){try{for(const c of this.cachedInjectors.values())null!==c&&c.destroy()}finally{this.cachedInjectors.clear()}}}return o.\u0275prov=en({token:o,providedIn:"environment",factory:()=>new o(Zn(sr))}),o})();function eR(o){o.getStandaloneInjector=a=>a.get(Qv).getOrCreateStandaloneInjector(o)}function wg(o,a,c,d,f,m){const v=a+c;return wi(o,v,f)?function Li(o,a,c){return o[a]=c}(o,v+1,m?d.call(m,f):d(f)):function bc(o,a){const c=o[a];return c===Ut?void 0:c}(o,v+1)}function hR(o,a){const c=Zt();let d;const f=o+22;c.firstCreatePass?(d=function fR(o,a){if(a)for(let c=a.length-1;c>=0;c--){const d=a[c];if(o===d.name)return d}}(a,c.pipeRegistry),c.data[f]=d,d.onDestroy&&(c.destroyHooks||(c.destroyHooks=[])).push(f,d.onDestroy)):d=c.data[f];const m=d.factory||(d.factory=Sr(d.type)),v=gn(wd);try{const E=ll(!1),I=m();return ll(E),function Qy(o,a,c,d){c>=o.data.length&&(o.data[c]=null,o.blueprint[c]=null),a[c]=d}(c,ke(),f,I),I}finally{gn(v)}}function MI(o,a,c){const d=o+22,f=ke(),m=Yi(f,d);return function Cg(o,a){return o[1].data[a].pure}(f,d)?wg(f,function nr(){const o=Rt.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}(),a,m.transform,c,m):m.transform(c)}function rb(o){return a=>{setTimeout(o,void 0,a)}}const Fo=class mR extends u.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,c,d){let f=a,m=c||(()=>null),v=d;if(a&&"object"==typeof a){const I=a;f=I.next?.bind(I),m=I.error?.bind(I),v=I.complete?.bind(I)}this.__isAsync&&(m=rb(m),f&&(f=rb(f)),v&&(v=rb(v)));const E=super.subscribe({next:f,error:m,complete:v});return a instanceof j.w0&&a.add(E),E}};function RI(){return this._results[mu()]()}class Of{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=mu(),d=Of.prototype;d[c]||(d[c]=RI)}get changes(){return this._changes||(this._changes=new Fo)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,c){return this._results.reduce(a,c)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,c){const d=this;d.dirty=!1;const f=Ar(a);(this._changesDetected=!function Co(o,a,c){if(o.length!==a.length)return!1;for(let d=0;d<o.length;d++){let f=o[d],m=a[d];if(c&&(f=c(f),m=c(m)),m!==f)return!1}return!0}(d._results,f,c))&&(d._results=f,d.length=f.length,d.last=f[this.length-1],d.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Pf=(()=>{class o{}return o.__NG_ELEMENT_ID__=ib,o})();const Nf=Pf,Pr=class extends Nf{constructor(a,c,d){super(),this._declarationLView=a,this._declarationTContainer=c,this.elementRef=d}createEmbeddedView(a,c){const d=this._declarationTContainer.tViews,f=Oo(this._declarationLView,d,a,16,null,d.declTNode,null,null,null,null,c||null);f[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(f[19]=v.createEmbeddedView(d)),Aa(d,f,a),new yf(f)}};function ib(){return Gd(tr(),ke())}function Gd(o,a){return 4&o.type?new Pr(a,o,vi(o,a)):null}let Cu=(()=>{class o{}return o.__NG_ELEMENT_ID__=kI,o})();function kI(){return OI(tr(),ke())}const sb=Cu,Ig=class extends sb{constructor(a,c,d){super(),this._lContainer=a,this._hostTNode=c,this._hostLView=d}get element(){return vi(this._hostTNode,this._hostLView)}get injector(){return new fa(this._hostTNode,this._hostLView)}get parentInjector(){const a=cl(this._hostTNode,this._hostLView);if(Fh(a)){const c=Hs(a,this._hostLView),d=rr(a);return new fa(c[1].data[d+8],c)}return new fa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const c=ob(this._lContainer);return null!==c&&c[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,c,d){let f,m;"number"==typeof d?f=d:null!=d&&(f=d.index,m=d.injector);const v=a.createEmbeddedView(c||{},m);return this.insert(v,f),v}createComponent(a,c,d,f,m){const v=a&&!function ar(o){return"function"==typeof o}(a);let E;if(v)E=c;else{const B=c||{};E=B.index,d=B.injector,f=B.projectableNodes,m=B.environmentInjector||B.ngModuleRef}const I=v?a:new Sd(G(a)),A=d||this.parentInjector;if(!m&&null==I.ngModule){const X=(v?A:this.parentInjector).get(sr,null);X&&(m=X)}const O=I.create(A,f,void 0,m);return this.insert(O.hostView,E),O}insert(a,c){const d=a._lView,f=d[1];if(function zc(o){return hi(o[3])}(d)){const O=this.indexOf(a);if(-1!==O)this.detach(O);else{const B=d[3],X=new Ig(B,B[6],B[3]);X.detach(X.indexOf(a))}}const m=this._adjustIndex(c),v=this._lContainer;!function $A(o,a,c,d){const f=10+d,m=c.length;d>0&&(c[f-1][4]=a),d<m-10?(a[4]=c[f],Gs(c,10+d,a)):(c.push(a),a[4]=null),a[3]=c;const v=a[17];null!==v&&c!==v&&function yL(o,a){const c=o[9];a[16]!==a[3][3][16]&&(o[2]=!0),null===c?o[9]=[a]:c.push(a)}(v,a);const E=a[19];null!==E&&E.insertView(o),a[2]|=64}(f,d,v,m);const E=Sm(m,v),I=d[11],A=bm(I,v[7]);return null!==A&&function jA(o,a,c,d,f,m){d[0]=f,d[6]=a,Tm(o,d,c,1,f,m)}(f,v[6],I,d,A,E),a.attachToViewContainerRef(),Gs(Dg(v),m,a),a}move(a,c){return this.insert(a,c)}indexOf(a){const c=ob(this._lContainer);return null!==c?c.indexOf(a):-1}remove(a){const c=this._adjustIndex(a,-1),d=OE(this._lContainer,c);d&&(Io(Dg(this._lContainer),c),zA(d[1],d))}detach(a){const c=this._adjustIndex(a,-1),d=OE(this._lContainer,c);return d&&null!=Io(Dg(this._lContainer),c)?new yf(d):null}_adjustIndex(a,c=0){return a??this.length+c}};function ob(o){return o[8]}function Dg(o){return o[8]||(o[8]=[])}function OI(o,a){let c;const d=a[o.index];if(hi(d))c=d;else{let f;if(8&o.type)f=Nn(d);else{const m=a[11];f=m.createComment("");const v=Tr(o,a);fc(m,bm(m,v),f,function NE(o,a){return o.nextSibling(a)}(m,v),!1)}a[o.index]=c=Gm(d,a,f,o),Dd(a,c)}return new Ig(c,o,a)}class PI{constructor(a){this.queryList=a,this.matches=null}clone(){return new PI(this.queryList)}setDirty(){this.queryList.setDirty()}}class NI{constructor(a=[]){this.queries=a}createEmbeddedView(a){const c=a.queries;if(null!==c){const d=null!==a.contentQueries?a.contentQueries[0]:c.length,f=[];for(let m=0;m<d;m++){const v=c.getByIndex(m);f.push(this.queries[v.indexInDeclarationView].clone())}return new NI(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let c=0;c<this.queries.length;c++)null!==wR(a,c).matches&&this.queries[c].setDirty()}}class gR{constructor(a,c,d=null){this.predicate=a,this.flags=c,this.read=d}}class FI{constructor(a=[]){this.queries=a}elementStart(a,c){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(a,c)}elementEnd(a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(a)}embeddedTView(a){let c=null;for(let d=0;d<this.length;d++){const f=null!==c?c.length:0,m=this.getByIndex(d).embeddedTView(a,f);m&&(m.indexInDeclarationView=d,null!==c?c.push(m):c=[m])}return null!==c?new FI(c):null}template(a,c){for(let d=0;d<this.queries.length;d++)this.queries[d].template(a,c)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class LI{constructor(a,c=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(a,c){this.isApplyingToNode(c)&&this.matchTNode(a,c)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,c){this.elementStart(a,c)}embeddedTView(a,c){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,c),new LI(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let d=a.parent;for(;null!==d&&8&d.type&&d.index!==c;)d=d.parent;return c===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(a,c){const d=this.metadata.predicate;if(Array.isArray(d))for(let f=0;f<d.length;f++){const m=d[f];this.matchTNodeWithReadOption(a,c,wV(c,m)),this.matchTNodeWithReadOption(a,c,dl(c,a,m,!1,!1))}else d===Pf?4&c.type&&this.matchTNodeWithReadOption(a,c,-1):this.matchTNodeWithReadOption(a,c,dl(c,a,d,!1,!1))}matchTNodeWithReadOption(a,c,d){if(null!==d){const f=this.metadata.read;if(null!==f)if(f===dm||f===Cu||f===Pf&&4&c.type)this.addMatch(c.index,-2);else{const m=dl(c,a,f,!1,!1);null!==m&&this.addMatch(c.index,m)}else this.addMatch(c.index,d)}}addMatch(a,c){null===this.matches?this.matches=[a,c]:this.matches.push(a,c)}}function wV(o,a){const c=o.localNames;if(null!==c)for(let d=0;d<c.length;d+=2)if(c[d]===a)return c[d+1];return null}function yR(o,a,c,d){return-1===c?function _R(o,a){return 11&o.type?vi(o,a):4&o.type?Gd(o,a):null}(a,o):-2===c?function VI(o,a,c){return c===dm?vi(a,o):c===Pf?Gd(a,o):c===Cu?OI(a,o):void 0}(o,a,d):Xi(o,o[1],c,a)}function Sg(o,a,c,d){const f=a[19].queries[d];if(null===f.matches){const m=o.data,v=c.matches,E=[];for(let I=0;I<v.length;I+=2){const A=v[I];E.push(A<0?null:yR(a,m[A],v[I+1],c.metadata.read))}f.matches=E}return f.matches}function Ff(o,a,c,d){const f=o.queries.getByIndex(c),m=f.matches;if(null!==m){const v=Sg(o,a,f,c);for(let E=0;E<m.length;E+=2){const I=m[E];if(I>0)d.push(v[E/2]);else{const A=m[E+1],O=a[-I];for(let B=10;B<O.length;B++){const X=O[B];X[17]===X[3]&&Ff(X[1],X,A,d)}if(null!==O[9]){const B=O[9];for(let X=0;X<B.length;X++){const le=B[X];Ff(le[1],le,A,d)}}}}}return d}function ab(o){const a=ke(),c=Zt(),d=nl();Kc(d+1);const f=wR(c,d);if(o.dirty&&ql(a)===(2==(2&f.metadata.flags))){if(null===f.matches)o.reset([]);else{const m=f.crossesNgTemplate?Ff(c,a,d,[]):Sg(c,a,f,d);o.reset(m,_E),o.notifyOnChanges()}return!0}return!1}function BI(o,a,c){const d=Zt();d.firstCreatePass&&(HI(d,new gR(o,a,c),-1),2==(2&a)&&(d.staticViewQueries=!0)),vR(d,ke(),a)}function Tg(o,a,c,d){const f=Zt();if(f.firstCreatePass){const m=tr();HI(f,new gR(a,c,d),m.index),function bR(o,a){const c=o.contentQueries||(o.contentQueries=[]);a!==(c.length?c[c.length-1]:-1)&&c.push(o.queries.length-1,a)}(f,o),2==(2&c)&&(f.staticContentQueries=!0)}vR(f,ke(),c)}function UI(){return function EV(o,a){return o[19].queries[a].queryList}(ke(),nl())}function vR(o,a,c){const d=new Of(4==(4&c));ts(o,a,d,d.destroy),null===a[19]&&(a[19]=new NI),a[19].queries.push(new PI(d))}function HI(o,a,c){null===o.queries&&(o.queries=new FI),o.queries.track(new LI(a,c))}function wR(o,a){return o.queries.getByIndex(a)}function ER(o,a){return Gd(o,a)}function yb(...o){}const NR=new An("Application Initializer");let vb=(()=>{class o{constructor(c){this.appInits=c,this.resolve=yb,this.reject=yb,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,f)=>{this.resolve=d,this.reject=f})}runInitializers(){if(this.initialized)return;const c=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const m=this.appInits[f]();if(Dl(m))c.push(m);else if(OC(m)){const v=new Promise((E,I)=>{m.subscribe({complete:E,error:I})});c.push(v)}}Promise.all(c).then(()=>{d()}).catch(f=>{this.reject(f)}),0===c.length&&d(),this.initialized=!0}}return o.\u0275fac=function(c){return new(c||o)(Zn(NR,8))},o.\u0275prov=en({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const FR=new An("AppId",{providedIn:"root",factory:function LR(){return`${XI()}${XI()}${XI()}`}});function XI(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const VR=new An("Platform Initializer"),bb=new An("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),wb=new An("appBootstrapListener"),PV=new An("AnimationModuleType");let NV=(()=>{class o{log(c){console.log(c)}warn(c){console.warn(c)}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275prov=en({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();const Eb=new An("LocaleId",{providedIn:"root",factory:()=>S(Eb,it.Optional|it.SkipSelf)||function FV(){return typeof $localize<"u"&&$localize.locale||bu}()}),LV=new An("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class BR{constructor(a,c){this.ngModuleFactory=a,this.componentFactories=c}}let Cb=(()=>{class o{compileModuleSync(c){return new Zv(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const d=this.compileModuleSync(c),m=El(yt(c).declarations).reduce((v,E)=>{const I=G(E);return I&&v.push(new Sd(I)),v},[]);return new BR(d,m)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275prov=en({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const nD=(()=>Promise.resolve(0))();function rD(o){typeof Zone>"u"?nD.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class Xs{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Fo(!1),this.onMicrotaskEmpty=new Fo(!1),this.onStable=new Fo(!1),this.onError=new Fo(!1),typeof Zone>"u")throw new De(908,!1);Zone.assertZonePatched();const f=this;if(f._nesting=0,f._outer=f._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const m=Zone.AsyncStackTaggingZoneSpec;f._inner=f._inner.fork(new m("Angular"))}Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!d&&c,f.shouldCoalesceRunChangeDetection=d,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function iD(){let o=kt.requestAnimationFrame,a=kt.cancelAnimationFrame;if(typeof Zone<"u"&&o&&a){const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c);const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function Db(o){const a=()=>{!function sD(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(kt,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,xg(o),o.isCheckStableRunning=!0,Ib(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),xg(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,d,f,m,v,E)=>{try{return oD(o),c.invokeTask(f,m,v,E)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||o.shouldCoalesceRunChangeDetection)&&a(),aD(o)}},onInvoke:(c,d,f,m,v,E,I)=>{try{return oD(o),c.invoke(f,m,v,E,I)}finally{o.shouldCoalesceRunChangeDetection&&a(),aD(o)}},onHasTask:(c,d,f,m)=>{c.hasTask(f,m),d===f&&("microTask"==m.change?(o._hasPendingMicrotasks=m.microTask,xg(o),Ib(o)):"macroTask"==m.change&&(o.hasPendingMacrotasks=m.macroTask))},onHandleError:(c,d,f,m)=>(c.handleError(f,m),o.runOutsideAngular(()=>o.onError.emit(m)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Xs.isInAngularZone())throw new De(909,!1)}static assertNotInAngularZone(){if(Xs.isInAngularZone())throw new De(909,!1)}run(a,c,d){return this._inner.run(a,c,d)}runTask(a,c,d,f){const m=this._inner,v=m.scheduleEventTask("NgZoneEvent: "+f,a,HV,yb,yb);try{return m.runTask(v,c,d)}finally{m.cancelTask(v)}}runGuarded(a,c,d){return this._inner.runGuarded(a,c,d)}runOutsideAngular(a){return this._outer.run(a)}}const HV={};function Ib(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function xg(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function oD(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function aD(o){o._nesting--,Ib(o)}class Sb{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Fo,this.onMicrotaskEmpty=new Fo,this.onStable=new Fo,this.onError=new Fo}run(a,c,d){return a.apply(c,d)}runGuarded(a,c,d){return a.apply(c,d)}runOutsideAngular(a){return a()}runTask(a,c,d,f){return a.apply(c,d)}}const $R=new An(""),GR=new An("");let Rg,zR=(()=>{class o{constructor(c,d,f){this._ngZone=c,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Rg||(function jV(o){Rg=o}(f),f.addToWindow(d)),this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Xs.assertNotInAngularZone(),rD(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())rD(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(c)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,d,f){let m=-1;d&&d>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==m),c(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:c,timeoutId:m,updateCb:f})}whenStable(c,d,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,d,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(c){this.registry.registerApplication(c,this)}unregisterApplication(c){this.registry.unregisterApplication(c)}findProviders(c,d,f){return[]}}return o.\u0275fac=function(c){return new(c||o)(Zn(Xs),Zn(WR),Zn(GR))},o.\u0275prov=en({token:o,factory:o.\u0275fac}),o})(),WR=(()=>{class o{constructor(){this._applications=new Map}registerApplication(c,d){this._applications.set(c,d)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,d=!0){return Rg?.findTestabilityInTree(this,c,d)??null}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275prov=en({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})(),Ec=null;const lD=new An("AllowMultipleToken"),kg=new An("PlatformDestroyListeners");class Iu{constructor(a,c){this.name=a,this.token=c}}function Tb(o,a,c=[]){const d=`Platform: ${a}`,f=new An(d);return(m=[])=>{let v=Cc();if(!v||v.injector.get(lD,!1)){const E=[...c,...m,{provide:f,useValue:!0}];o?o(E):function uD(o){if(Ec&&!Ec.get(lD,!1))throw new De(400,!1);Ec=o;const a=o.get(YR);(function KR(o){const a=o.get(VR,null);a&&a.forEach(c=>c())})(o)}(function hD(o=[],a){return Ys.create({name:a,providers:[{provide:ny,useValue:"platform"},{provide:kg,useValue:new Set([()=>Ec=null])},...o]})}(E,d))}return function ZR(o){const a=Cc();if(!a)throw new De(401,!1);return a}()}}function Cc(){return Ec?.get(YR)??null}let YR=(()=>{class o{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,d){const f=function QR(o,a){let c;return c="noop"===o?new Sb:("zone.js"===o?void 0:o)||new Xs(a),c}(d?.ngZone,function fD(o){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!o||!o.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!o||!o.ngZoneRunCoalescing)||!1}}(d)),m=[{provide:Xs,useValue:f}];return f.run(()=>{const v=Ys.create({providers:m,parent:this.injector,name:c.moduleType.name}),E=c.create(v),I=E.injector.get(Jh,null);if(!I)throw new De(402,!1);return f.runOutsideAngular(()=>{const A=f.onError.subscribe({next:O=>{I.handleError(O)}});E.onDestroy(()=>{$f(this._modules,E),A.unsubscribe()})}),function XR(o,a,c){try{const d=c();return Dl(d)?d.catch(f=>{throw a.runOutsideAngular(()=>o.handleError(f)),f}):d}catch(d){throw a.runOutsideAngular(()=>o.handleError(d)),d}}(I,f,()=>{const A=E.injector.get(vb);return A.runInitializers(),A.donePromise.then(()=>(function eI(o){Gt(o,"Expected localeId to be defined"),"string"==typeof o&&(Lv=o.toLowerCase().replace(/_/g,"-"))}(E.injector.get(Eb,bu)||bu),this._moduleDoBootstrap(E),E))})})}bootstrapModule(c,d=[]){const f=pD({},d);return function cD(o,a,c){const d=new Zv(c);return Promise.resolve(d)}(0,0,c).then(m=>this.bootstrapModuleFactory(m,f))}_moduleDoBootstrap(c){const d=c.injector.get(Og);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(f=>d.bootstrap(f));else{if(!c.instance.ngDoBootstrap)throw new De(403,!1);c.instance.ngDoBootstrap(d)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new De(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const c=this._injector.get(kg,null);c&&(c.forEach(d=>d()),c.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(c){return new(c||o)(Zn(Ys))},o.\u0275prov=en({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();function pD(o,a){return Array.isArray(a)?a.reduce(pD,o):{...o,...a}}let Og=(()=>{class o{constructor(c,d,f){this._zone=c,this._injector=d,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new N.y(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),v=new N.y(E=>{let I;this._zone.runOutsideAngular(()=>{I=this._zone.onStable.subscribe(()=>{Xs.assertNotInAngularZone(),rD(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const A=this._zone.onUnstable.subscribe(()=>{Xs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{I.unsubscribe(),A.unsubscribe()}});this.isStable=(0,ce.T)(m,v.pipe((0,he.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(c,d){const f=c instanceof mE;if(!this._injector.get(vb).done)throw!f&&Ke(c),new De(405,false);let v;v=f?c:this._injector.get(Zs).resolveComponentFactory(c),this.componentTypes.push(v.componentType);const E=function qR(o){return o.isBoundToModule}(v)?void 0:this._injector.get(jd),A=v.create(Ys.NULL,[],d||v.selector,E),O=A.location.nativeElement,B=A.injector.get($R,null);return B?.registerApplication(O),A.onDestroy(()=>{this.detachView(A.hostView),$f(this.components,A),B?.unregisterApplication(O)}),this._loadComponent(A),A}tick(){if(this._runningTick)throw new De(101,!1);try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(c))}finally{this._runningTick=!1}}attachView(c){const d=c;this._views.push(d),d.attachToAppRef(this)}detachView(c){const d=c;$f(this._views,d),d.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c),this._injector.get(wb,[]).concat(this._bootstrapListeners).forEach(f=>f(c))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(c=>c()),this._views.slice().forEach(c=>c.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(c){return this._destroyListeners.push(c),()=>$f(this._destroyListeners,c)}destroy(){if(this._destroyed)throw new De(406,!1);const c=this._injector;c.destroy&&!c.destroyed&&c.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return o.\u0275fac=function(c){return new(c||o)(Zn(Xs),Zn(sr),Zn(Jh))},o.\u0275prov=en({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function $f(o,a){const c=o.indexOf(a);c>-1&&o.splice(c,1)}let mD=!0,Ab=!1;function Pg(){return Ab=!0,mD}function tk(){if(Ab)throw new Error("Cannot enable prod mode after platform setup.");mD=!1}let nk=(()=>{class o{}return o.__NG_ELEMENT_ID__=rk,o})();function rk(o){return function yD(o,a,c){if(jl(o)&&!c){const d=an(o.index,a);return new yf(d,d)}return 47&o.type?new yf(a[16],a):null}(tr(),ke(),16==(16&o))}class Ng{constructor(){}supports(a){return bf(a)}create(a){return new Fg(a)}}const ak=(o,a)=>a;class Fg{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||ak}forEachItem(a){let c;for(c=this._itHead;null!==c;c=c._next)a(c)}forEachOperation(a){let c=this._itHead,d=this._removalsHead,f=0,m=null;for(;c||d;){const v=!d||c&&c.currentIndex<Wd(d,f,m)?c:d,E=Wd(v,f,m),I=v.currentIndex;if(v===d)f--,d=d._nextRemoved;else if(c=c._next,null==v.previousIndex)f++;else{m||(m=[]);const A=E-f,O=I-f;if(A!=O){for(let X=0;X<A;X++){const le=X<m.length?m[X]:m[X]=0,H=le+X;O<=H&&H<A&&(m[X]=le+1)}m[v.previousIndex]=O-A}}E!==I&&a(v,E,I)}}forEachPreviousItem(a){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachMovedItem(a){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}forEachIdentityChange(a){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)a(c)}diff(a){if(null==a&&(a=[]),!bf(a))throw new De(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,m,v,c=this._itHead,d=!1;if(Array.isArray(a)){this.length=a.length;for(let E=0;E<this.length;E++)m=a[E],v=this._trackByFn(E,m),null!==c&&Object.is(c.trackById,v)?(d&&(c=this._verifyReinsertion(c,m,v,E)),Object.is(c.item,m)||this._addIdentityChange(c,m)):(c=this._mismatch(c,m,v,E),d=!0),c=c._next}else f=0,function SC(o,a){if(Array.isArray(o))for(let c=0;c<o.length;c++)a(o[c]);else{const c=o[mu()]();let d;for(;!(d=c.next()).done;)a(d.value)}}(a,E=>{v=this._trackByFn(f,E),null!==c&&Object.is(c.trackById,v)?(d&&(c=this._verifyReinsertion(c,E,v,f)),Object.is(c.item,E)||this._addIdentityChange(c,E)):(c=this._mismatch(c,E,v,f),d=!0),c=c._next,f++}),this.length=f;return this._truncate(c),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,c,d,f){let m;return null===a?m=this._itTail:(m=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._reinsertAfter(a,m,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(d,f))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._moveAfter(a,m,f)):a=this._addAfter(new CD(c,d),m,f),a}_verifyReinsertion(a,c,d,f){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==m?a=this._reinsertAfter(m,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const c=a._next;this._addToRemovals(this._unlink(a)),a=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,c,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,m=a._nextRemoved;return null===f?this._removalsHead=m:f._nextRemoved=m,null===m?this._removalsTail=f:m._prevRemoved=f,this._insertAfter(a,c,d),this._addToMoves(a,d),a}_moveAfter(a,c,d){return this._unlink(a),this._insertAfter(a,c,d),this._addToMoves(a,d),a}_addAfter(a,c,d){return this._insertAfter(a,c,d),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,c,d){const f=null===c?this._itHead:c._next;return a._next=f,a._prev=c,null===f?this._itTail=a:f._prev=a,null===c?this._itHead=a:c._next=a,null===this._linkedRecords&&(this._linkedRecords=new ID),this._linkedRecords.put(a),a.currentIndex=d,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const c=a._prev,d=a._next;return null===c?this._itHead=d:c._next=d,null===d?this._itTail=c:d._prev=c,a}_addToMoves(a,c){return a.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ID),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,c){return a.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class CD{constructor(a,c){this.item=a,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class lk{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,c){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===c||c<=d.currentIndex)&&Object.is(d.trackById,a))return d;return null}remove(a){const c=a._prevDup,d=a._nextDup;return null===c?this._head=d:c._nextDup=d,null===d?this._tail=c:d._prevDup=c,null===this._head}}class ID{constructor(){this.map=new Map}put(a){const c=a.trackById;let d=this.map.get(c);d||(d=new lk,this.map.set(c,d)),d.add(a)}get(a,c){const f=this.map.get(a);return f?f.get(a,c):null}remove(a){const c=a.trackById;return this.map.get(c).remove(a)&&this.map.delete(c),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Wd(o,a,c){const d=o.previousIndex;if(null===d)return d;let f=0;return c&&d<c.length&&(f=c[d]),d+a+f}class DD{constructor(){}supports(a){return a instanceof Map||Qm(a)}create(){return new SD}}class SD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let c;for(c=this._mapHead;null!==c;c=c._next)a(c)}forEachPreviousItem(a){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)a(c)}forEachChangedItem(a){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}diff(a){if(a){if(!(a instanceof Map||Qm(a)))throw new De(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(a,(d,f)=>{if(c&&c.key===f)this._maybeAddToChanges(c,d),this._appendAfter=c,c=c._next;else{const m=this._getOrCreateRecordForKey(f,d);c=this._insertBeforeOrAppend(c,m)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let d=c;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,c){if(a){const d=a._prev;return c._next=a,c._prev=d,a._prev=c,d&&(d._next=c),a===this._mapHead&&(this._mapHead=c),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(a,c){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,c);const m=f._prev,v=f._next;return m&&(m._next=v),v&&(v._prev=m),f._next=null,f._prev=null,f}const d=new ck(a);return this._records.set(a,d),d.currentValue=c,this._addToAdditions(d),d}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,c){Object.is(c,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=c,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,c){a instanceof Map?a.forEach(c):Object.keys(a).forEach(d=>c(a[d],d))}}class ck{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function TD(){return new AD([new Ng])}let AD=(()=>{class o{constructor(c){this.factories=c}static create(c,d){if(null!=d){const f=d.factories.slice();c=c.concat(f)}return new o(c)}static extend(c){return{provide:o,useFactory:d=>o.create(c,d||TD()),deps:[[o,new At,new Ye]]}}find(c){const d=this.factories.find(f=>f.supports(c));if(null!=d)return d;throw new De(901,!1)}}return o.\u0275prov=en({token:o,providedIn:"root",factory:TD}),o})();function MD(){return new Ob([new DD])}let Ob=(()=>{class o{constructor(c){this.factories=c}static create(c,d){if(d){const f=d.factories.slice();c=c.concat(f)}return new o(c)}static extend(c){return{provide:o,useFactory:d=>o.create(c,d||MD()),deps:[[o,new At,new Ye]]}}find(c){const d=this.factories.find(f=>f.supports(c));if(d)return d;throw new De(901,!1)}}return o.\u0275prov=en({token:o,providedIn:"root",factory:MD}),o})();const hk=Tb(null,"core",[]);let xD=(()=>{class o{constructor(c){}}return o.\u0275fac=function(c){return new(c||o)(Zn(Og))},o.\u0275mod=wt({type:o}),o.\u0275inj=Vt({}),o})();function fk(o){return"boolean"==typeof o?o:null!=o&&"false"!==o}},3942:(ut,Ae,L)=>{L.d(Ae,{Z:()=>De});var u=L(2090),j=L(4859),N=L(9681),ce=L(1877);class he{constructor(Ie,ye){this._delegate=Ie,this.firebase=ye,(0,N._addComponent)(Ie,new j.wA("app-compat",()=>this,"PUBLIC")),this.container=Ie.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ie){this._delegate.automaticDataCollectionEnabled=Ie}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ie=>{this._delegate.checkDestroyed(),Ie()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(Ie,ye=N._DEFAULT_ENTRY_NAME){var nt;this._delegate.checkDestroyed();const rt=this._delegate.container.getProvider(Ie);return!rt.isInitialized()&&"EXPLICIT"===(null===(nt=rt.getComponent())||void 0===nt?void 0:nt.instantiationMode)&&rt.initialize(),rt.getImmediate({identifier:ye})}_removeServiceInstance(Ie,ye=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ie).clearInstance(ye)}_addComponent(Ie){(0,N._addComponent)(this._delegate,Ie)}_addOrOverwriteComponent(Ie){(0,N._addOrOverwriteComponent)(this._delegate,Ie)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ue=new u.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),K=function Ee(){const at=function ge(at){const Ie={},ye={__esModule:!0,initializeApp:function Fe(ae,fe={}){const we=N.initializeApp(ae,fe);if((0,u.r3)(Ie,we.name))return Ie[we.name];const ee=new at(we,ye);return Ie[we.name]=ee,ee},app:rt,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function Se(ae){const fe=ae.name,we=fe.replace("-compat","");if(N._registerComponent(ae)&&"PUBLIC"===ae.type){const ee=(re=rt())=>{if("function"!=typeof re[we])throw ue.create("invalid-app-argument",{appName:fe});return re[we]()};void 0!==ae.serviceProps&&(0,u.ZB)(ee,ae.serviceProps),ye[we]=ee,at.prototype[we]=function(...re){return this._getService.bind(this,fe).apply(this,ae.multipleInstances?re:[])}}return"PUBLIC"===ae.type?ye[we]:null},removeApp:function nt(ae){delete Ie[ae]},useAsService:function qe(ae,fe){return"serverAuth"===fe?null:fe},modularAPIs:N}};function rt(ae){if(!(0,u.r3)(Ie,ae=ae||N._DEFAULT_ENTRY_NAME))throw ue.create("no-app",{appName:ae});return Ie[ae]}return ye.default=ye,Object.defineProperty(ye,"apps",{get:function Re(){return Object.keys(Ie).map(ae=>Ie[ae])}}),rt.App=at,ye}(he);return at.INTERNAL=Object.assign(Object.assign({},at.INTERNAL),{createFirebaseNamespace:Ee,extendNamespace:function Ie(ye){(0,u.ZB)(at,ye)},createSubscribe:u.ne,ErrorFactory:u.LL,deepExtend:u.ZB}),at}(),Z=new ce.Yd("@firebase/app-compat");if((0,u.jU)()&&void 0!==self.firebase){Z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const at=self.firebase.SDK_VERSION;at&&at.indexOf("LITE")>=0&&Z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const De=K;!function Ne(at){(0,N.registerVersion)("@firebase/app-compat","0.1.33",at)}()},9681:(ut,Ae,L)=>{L.r(Ae),L.d(Ae,{FirebaseError:()=>ce.ZR,SDK_VERSION:()=>qi,_DEFAULT_ENTRY_NAME:()=>Gt,_addComponent:()=>on,_addOrOverwriteComponent:()=>en,_apps:()=>bn,_clearComponents:()=>so,_components:()=>Vn,_getProvider:()=>Vt,_registerComponent:()=>zt,_removeServiceInstance:()=>Cr,deleteApp:()=>Ki,getApp:()=>Bn,getApps:()=>Ri,initializeApp:()=>Xr,onLog:()=>Un,registerVersion:()=>gr,setLogLevel:()=>gn});var u=L(5861),j=L(4859),N=L(1877),ce=L(2090),he=L(8766);class ve{constructor(Y){this.container=Y}getPlatformInfoString(){return this.container.getProviders().map(Q=>{if(function ue($){return"VERSION"===$.getComponent()?.type}(Q)){const Te=Q.getImmediate();return`${Te.library}/${Te.version}`}return null}).filter(Q=>Q).join(" ")}}const ge="@firebase/app",K=new N.Yd("@firebase/app"),Gt="[DEFAULT]",Ze={[ge]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},bn=new Map,Vn=new Map;function on($,Y){try{$.container.addComponent(Y)}catch(Q){K.debug(`Component ${Y.name} failed to register with FirebaseApp ${$.name}`,Q)}}function en($,Y){$.container.addOrOverwriteComponent(Y)}function zt($){const Y=$.name;if(Vn.has(Y))return K.debug(`There were multiple attempts to register component ${Y}.`),!1;Vn.set(Y,$);for(const Q of bn.values())on(Q,$);return!0}function Vt($,Y){const Q=$.container.getProvider("heartbeat").getImmediate({optional:!0});return Q&&Q.triggerHeartbeat(),$.container.getProvider(Y)}function Cr($,Y,Q=Gt){Vt($,Y).clearInstance(Q)}function so(){Vn.clear()}const Rn=new ce.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class us{constructor(Y,Q,Te){this._isDeleted=!1,this._options=Object.assign({},Y),this._config=Object.assign({},Q),this._name=Q.name,this._automaticDataCollectionEnabled=Q.automaticDataCollectionEnabled,this._container=Te,this.container.addComponent(new j.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Y){this.checkDestroyed(),this._automaticDataCollectionEnabled=Y}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Y){this._isDeleted=Y}checkDestroyed(){if(this.isDeleted)throw Rn.create("app-deleted",{appName:this._name})}}const qi="9.9.4";function Xr($,Y={}){"object"!=typeof Y&&(Y={name:Y});const Q=Object.assign({name:Gt,automaticDataCollectionEnabled:!1},Y),Te=Q.name;if("string"!=typeof Te||!Te)throw Rn.create("bad-app-name",{appName:String(Te)});const ze=bn.get(Te);if(ze){if((0,ce.vZ)($,ze.options)&&(0,ce.vZ)(Q,ze.config))return ze;throw Rn.create("duplicate-app",{appName:Te})}const wt=new j.H0(Te);for(const dn of Vn.values())wt.addComponent(dn);const hn=new us($,Q,wt);return bn.set(Te,hn),hn}function Bn($=Gt){const Y=bn.get($);if(!Y)throw Rn.create("no-app",{appName:$});return Y}function Ri(){return Array.from(bn.values())}function Ki($){return it.apply(this,arguments)}function it(){return(it=(0,u.Z)(function*($){const Y=$.name;bn.has(Y)&&(bn.delete(Y),yield Promise.all($.container.getProviders().map(Q=>Q.delete())),$.isDeleted=!0)})).apply(this,arguments)}function gr($,Y,Q){var Te;let ze=null!==(Te=Ze[$])&&void 0!==Te?Te:$;Q&&(ze+=`-${Q}`);const wt=ze.match(/\s|\//),hn=Y.match(/\s|\//);if(wt||hn){const dn=[`Unable to register library "${ze}" with version "${Y}":`];return wt&&dn.push(`library name "${ze}" contains illegal characters (whitespace or "/")`),wt&&hn&&dn.push("and"),hn&&dn.push(`version name "${Y}" contains illegal characters (whitespace or "/")`),void K.warn(dn.join(" "))}zt(new j.wA(`${ze}-version`,()=>({library:ze,version:Y}),"VERSION"))}function Un($,Y){if(null!==$&&"function"!=typeof $)throw Rn.create("invalid-log-argument");(0,N.Am)($,Y)}function gn($){(0,N.Ub)($)}const Dn="firebase-heartbeat-store";let Sn=null;function wn(){return Sn||(Sn=(0,he.X3)("firebase-heartbeat-database",1,{upgrade:($,Y)=>{0===Y&&$.createObjectStore(Dn)}}).catch($=>{throw Rn.create("idb-open",{originalErrorMessage:$.message})})),Sn}function ft(){return(ft=(0,u.Z)(function*($){var Y;try{return(yield wn()).transaction(Dn).objectStore(Dn).get(yr($))}catch(Q){if(Q instanceof ce.ZR)K.warn(Q.message);else{const Te=Rn.create("idb-get",{originalErrorMessage:null===(Y=Q)||void 0===Y?void 0:Y.message});K.warn(Te.message)}}})).apply(this,arguments)}function kt($,Y){return qr.apply(this,arguments)}function qr(){return(qr=(0,u.Z)(function*($,Y){var Q;try{const ze=(yield wn()).transaction(Dn,"readwrite");return yield ze.objectStore(Dn).put(Y,yr($)),ze.done}catch(Te){if(Te instanceof ce.ZR)K.warn(Te.message);else{const ze=Rn.create("idb-set",{originalErrorMessage:null===(Q=Te)||void 0===Q?void 0:Q.message});K.warn(ze.message)}}})).apply(this,arguments)}function yr($){return`${$.name}!${$.options.appId}`}class Br{constructor(Y){this.container=Y,this._heartbeatsCache=null;const Q=this.container.getProvider("app").getImmediate();this._storage=new Kt(Q),this._heartbeatsCachePromise=this._storage.read().then(Te=>(this._heartbeatsCache=Te,Te))}triggerHeartbeat(){var Y=this;return(0,u.Z)(function*(){const Te=Y.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ze=Pt();if(null===Y._heartbeatsCache&&(Y._heartbeatsCache=yield Y._heartbeatsCachePromise),Y._heartbeatsCache.lastSentHeartbeatDate!==ze&&!Y._heartbeatsCache.heartbeats.some(wt=>wt.date===ze))return Y._heartbeatsCache.heartbeats.push({date:ze,agent:Te}),Y._heartbeatsCache.heartbeats=Y._heartbeatsCache.heartbeats.filter(wt=>{const hn=new Date(wt.date).valueOf();return Date.now()-hn<=2592e6}),Y._storage.overwrite(Y._heartbeatsCache)})()}getHeartbeatsHeader(){var Y=this;return(0,u.Z)(function*(){if(null===Y._heartbeatsCache&&(yield Y._heartbeatsCachePromise),null===Y._heartbeatsCache||0===Y._heartbeatsCache.heartbeats.length)return"";const Q=Pt(),{heartbeatsToSend:Te,unsentEntries:ze}=function Jr($,Y=1024){const Q=[];let Te=$.slice();for(const ze of $){const wt=Q.find(hn=>hn.agent===ze.agent);if(wt){if(wt.dates.push(ze.date),J(Q)>Y){wt.dates.pop();break}}else if(Q.push({agent:ze.agent,dates:[ze.date]}),J(Q)>Y){Q.pop();break}Te=Te.slice(1)}return{heartbeatsToSend:Q,unsentEntries:Te}}(Y._heartbeatsCache.heartbeats),wt=(0,ce.L)(JSON.stringify({version:2,heartbeats:Te}));return Y._heartbeatsCache.lastSentHeartbeatDate=Q,ze.length>0?(Y._heartbeatsCache.heartbeats=ze,yield Y._storage.overwrite(Y._heartbeatsCache)):(Y._heartbeatsCache.heartbeats=[],Y._storage.overwrite(Y._heartbeatsCache)),wt})()}}function Pt(){return(new Date).toISOString().substring(0,10)}class Kt{constructor(Y){this.app=Y,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,u.Z)(function*(){return!!(0,ce.hl)()&&(0,ce.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Y=this;return(0,u.Z)(function*(){return(yield Y._canUseIndexedDBPromise)&&(yield function ht($){return ft.apply(this,arguments)}(Y.app))||{heartbeats:[]}})()}overwrite(Y){var Q=this;return(0,u.Z)(function*(){var Te;if(yield Q._canUseIndexedDBPromise){const wt=yield Q.read();return kt(Q.app,{lastSentHeartbeatDate:null!==(Te=Y.lastSentHeartbeatDate)&&void 0!==Te?Te:wt.lastSentHeartbeatDate,heartbeats:Y.heartbeats})}})()}add(Y){var Q=this;return(0,u.Z)(function*(){var Te;if(yield Q._canUseIndexedDBPromise){const wt=yield Q.read();return kt(Q.app,{lastSentHeartbeatDate:null!==(Te=Y.lastSentHeartbeatDate)&&void 0!==Te?Te:wt.lastSentHeartbeatDate,heartbeats:[...wt.heartbeats,...Y.heartbeats]})}})()}}function J($){return(0,ce.L)(JSON.stringify({version:2,heartbeats:$})).length}!function z($){zt(new j.wA("platform-logger",Y=>new ve(Y),"PRIVATE")),zt(new j.wA("heartbeat",Y=>new Br(Y),"PRIVATE")),gr(ge,"0.7.32",$),gr(ge,"0.7.32","esm2017"),gr("fire-js","")}("")},4859:(ut,Ae,L)=>{L.d(Ae,{H0:()=>ge,wA:()=>N,zt:()=>he});var u=L(5861),j=L(2090);class N{constructor(K,Z,te){this.name=K,this.instanceFactory=Z,this.type=te,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(K){return this.instantiationMode=K,this}setMultipleInstances(K){return this.multipleInstances=K,this}setServiceProps(K){return this.serviceProps=K,this}setInstanceCreatedCallback(K){return this.onInstanceCreated=K,this}}const ce="[DEFAULT]";class he{constructor(K,Z){this.name=K,this.container=Z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(K){const Z=this.normalizeInstanceIdentifier(K);if(!this.instancesDeferred.has(Z)){const te=new j.BH;if(this.instancesDeferred.set(Z,te),this.isInitialized(Z)||this.shouldAutoInitialize())try{const $e=this.getOrInitializeService({instanceIdentifier:Z});$e&&te.resolve($e)}catch{}}return this.instancesDeferred.get(Z).promise}getImmediate(K){var Z;const te=this.normalizeInstanceIdentifier(K?.identifier),$e=null!==(Z=K?.optional)&&void 0!==Z&&Z;if(!this.isInitialized(te)&&!this.shouldAutoInitialize()){if($e)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:te})}catch(Ne){if($e)return null;throw Ne}}getComponent(){return this.component}setComponent(K){if(K.name!==this.name)throw Error(`Mismatching Component ${K.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=K,this.shouldAutoInitialize()){if(function ue(Ee){return"EAGER"===Ee.instantiationMode}(K))try{this.getOrInitializeService({instanceIdentifier:ce})}catch{}for(const[Z,te]of this.instancesDeferred.entries()){const $e=this.normalizeInstanceIdentifier(Z);try{const Ne=this.getOrInitializeService({instanceIdentifier:$e});te.resolve(Ne)}catch{}}}}clearInstance(K=ce){this.instancesDeferred.delete(K),this.instancesOptions.delete(K),this.instances.delete(K)}delete(){var K=this;return(0,u.Z)(function*(){const Z=Array.from(K.instances.values());yield Promise.all([...Z.filter(te=>"INTERNAL"in te).map(te=>te.INTERNAL.delete()),...Z.filter(te=>"_delete"in te).map(te=>te._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(K=ce){return this.instances.has(K)}getOptions(K=ce){return this.instancesOptions.get(K)||{}}initialize(K={}){const{options:Z={}}=K,te=this.normalizeInstanceIdentifier(K.instanceIdentifier);if(this.isInitialized(te))throw Error(`${this.name}(${te}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const $e=this.getOrInitializeService({instanceIdentifier:te,options:Z});for(const[Ne,De]of this.instancesDeferred.entries())te===this.normalizeInstanceIdentifier(Ne)&&De.resolve($e);return $e}onInit(K,Z){var te;const $e=this.normalizeInstanceIdentifier(Z),Ne=null!==(te=this.onInitCallbacks.get($e))&&void 0!==te?te:new Set;Ne.add(K),this.onInitCallbacks.set($e,Ne);const De=this.instances.get($e);return De&&K(De,$e),()=>{Ne.delete(K)}}invokeOnInitCallbacks(K,Z){const te=this.onInitCallbacks.get(Z);if(te)for(const $e of te)try{$e(K,Z)}catch{}}getOrInitializeService({instanceIdentifier:K,options:Z={}}){let te=this.instances.get(K);if(!te&&this.component&&(te=this.component.instanceFactory(this.container,{instanceIdentifier:(Ee=K,Ee===ce?void 0:Ee),options:Z}),this.instances.set(K,te),this.instancesOptions.set(K,Z),this.invokeOnInitCallbacks(te,K),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,K,te)}catch{}var Ee;return te||null}normalizeInstanceIdentifier(K=ce){return this.component?this.component.multipleInstances?K:ce:K}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ge{constructor(K){this.name=K,this.providers=new Map}addComponent(K){const Z=this.getProvider(K.name);if(Z.isComponentSet())throw new Error(`Component ${K.name} has already been registered with ${this.name}`);Z.setComponent(K)}addOrOverwriteComponent(K){this.getProvider(K.name).isComponentSet()&&this.providers.delete(K.name),this.addComponent(K)}getProvider(K){if(this.providers.has(K))return this.providers.get(K);const Z=new he(K,this);return this.providers.set(K,Z),Z}getProviders(){return Array.from(this.providers.values())}}},1877:(ut,Ae,L)=>{L.d(Ae,{Am:()=>Ee,Ub:()=>ge,Yd:()=>ue,in:()=>j});const u=[];var j=(()=>{return(K=j||(j={}))[K.DEBUG=0]="DEBUG",K[K.VERBOSE=1]="VERBOSE",K[K.INFO=2]="INFO",K[K.WARN=3]="WARN",K[K.ERROR=4]="ERROR",K[K.SILENT=5]="SILENT",j;var K})();const N={debug:j.DEBUG,verbose:j.VERBOSE,info:j.INFO,warn:j.WARN,error:j.ERROR,silent:j.SILENT},ce=j.INFO,he={[j.DEBUG]:"log",[j.VERBOSE]:"log",[j.INFO]:"info",[j.WARN]:"warn",[j.ERROR]:"error"},ve=(K,Z,...te)=>{if(Z<K.logLevel)return;const $e=(new Date).toISOString(),Ne=he[Z];if(!Ne)throw new Error(`Attempted to log a message with an invalid logType (value: ${Z})`);console[Ne](`[${$e}]  ${K.name}:`,...te)};class ue{constructor(Z){this.name=Z,this._logLevel=ce,this._logHandler=ve,this._userLogHandler=null,u.push(this)}get logLevel(){return this._logLevel}set logLevel(Z){if(!(Z in j))throw new TypeError(`Invalid value "${Z}" assigned to \`logLevel\``);this._logLevel=Z}setLogLevel(Z){this._logLevel="string"==typeof Z?N[Z]:Z}get logHandler(){return this._logHandler}set logHandler(Z){if("function"!=typeof Z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Z}get userLogHandler(){return this._userLogHandler}set userLogHandler(Z){this._userLogHandler=Z}debug(...Z){this._userLogHandler&&this._userLogHandler(this,j.DEBUG,...Z),this._logHandler(this,j.DEBUG,...Z)}log(...Z){this._userLogHandler&&this._userLogHandler(this,j.VERBOSE,...Z),this._logHandler(this,j.VERBOSE,...Z)}info(...Z){this._userLogHandler&&this._userLogHandler(this,j.INFO,...Z),this._logHandler(this,j.INFO,...Z)}warn(...Z){this._userLogHandler&&this._userLogHandler(this,j.WARN,...Z),this._logHandler(this,j.WARN,...Z)}error(...Z){this._userLogHandler&&this._userLogHandler(this,j.ERROR,...Z),this._logHandler(this,j.ERROR,...Z)}}function ge(K){u.forEach(Z=>{Z.setLogLevel(K)})}function Ee(K,Z){for(const te of u){let $e=null;Z&&Z.level&&($e=N[Z.level]),te.userLogHandler=null===K?null:(Ne,De,...at)=>{const Ie=at.map(ye=>{if(null==ye)return null;if("string"==typeof ye)return ye;if("number"==typeof ye||"boolean"==typeof ye)return ye.toString();if(ye instanceof Error)return ye.message;try{return JSON.stringify(ye)}catch{return null}}).filter(ye=>ye).join(" ");De>=($e??Ne.logLevel)&&K({level:j[De].toLowerCase(),message:Ie,args:at,type:Ne.name})}}}},8766:(ut,Ae,L)=>{L.d(Ae,{Lj:()=>Fe,X3:()=>rt});var u=L(5861);let N,ce;const ue=new WeakMap,ge=new WeakMap,Ee=new WeakMap,K=new WeakMap,Z=new WeakMap;let Ne={get(fe,we,ee){if(fe instanceof IDBTransaction){if("done"===we)return ge.get(fe);if("objectStoreNames"===we)return fe.objectStoreNames||Ee.get(fe);if("store"===we)return ee.objectStoreNames[1]?void 0:ee.objectStore(ee.objectStoreNames[0])}return ye(fe[we])},set:(fe,we,ee)=>(fe[we]=ee,!0),has:(fe,we)=>fe instanceof IDBTransaction&&("done"===we||"store"===we)||we in fe};function Ie(fe){return"function"==typeof fe?function at(fe){return fe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ve(){return ce||(ce=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(fe)?function(...we){return fe.apply(nt(this),we),ye(ue.get(this))}:function(...we){return ye(fe.apply(nt(this),we))}:function(we,...ee){const re=fe.call(nt(this),we,...ee);return Ee.set(re,we.sort?we.sort():[we]),ye(re)}}(fe):(fe instanceof IDBTransaction&&function $e(fe){if(ge.has(fe))return;const we=new Promise((ee,re)=>{const _e=()=>{fe.removeEventListener("complete",de),fe.removeEventListener("error",Ue),fe.removeEventListener("abort",Ue)},de=()=>{ee(),_e()},Ue=()=>{re(fe.error||new DOMException("AbortError","AbortError")),_e()};fe.addEventListener("complete",de),fe.addEventListener("error",Ue),fe.addEventListener("abort",Ue)});ge.set(fe,we)}(fe),((fe,we)=>we.some(ee=>fe instanceof ee))(fe,function he(){return N||(N=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(fe,Ne):fe)}function ye(fe){if(fe instanceof IDBRequest)return function te(fe){const we=new Promise((ee,re)=>{const _e=()=>{fe.removeEventListener("success",de),fe.removeEventListener("error",Ue)},de=()=>{ee(ye(fe.result)),_e()},Ue=()=>{re(fe.error),_e()};fe.addEventListener("success",de),fe.addEventListener("error",Ue)});return we.then(ee=>{ee instanceof IDBCursor&&ue.set(ee,fe)}).catch(()=>{}),Z.set(we,fe),we}(fe);if(K.has(fe))return K.get(fe);const we=Ie(fe);return we!==fe&&(K.set(fe,we),Z.set(we,fe)),we}const nt=fe=>Z.get(fe);function rt(fe,we,{blocked:ee,upgrade:re,blocking:_e,terminated:de}={}){const Ue=indexedDB.open(fe,we),He=ye(Ue);return re&&Ue.addEventListener("upgradeneeded",_t=>{re(ye(Ue.result),_t.oldVersion,_t.newVersion,ye(Ue.transaction))}),ee&&Ue.addEventListener("blocked",()=>ee()),He.then(_t=>{de&&_t.addEventListener("close",()=>de()),_e&&_t.addEventListener("versionchange",()=>_e())}).catch(()=>{}),He}function Fe(fe,{blocked:we}={}){const ee=indexedDB.deleteDatabase(fe);return we&&ee.addEventListener("blocked",()=>we()),ye(ee).then(()=>{})}const Re=["get","getKey","getAll","getAllKeys","count"],Se=["put","add","delete","clear"],qe=new Map;function ae(fe,we){if(!(fe instanceof IDBDatabase)||we in fe||"string"!=typeof we)return;if(qe.get(we))return qe.get(we);const ee=we.replace(/FromIndex$/,""),re=we!==ee,_e=Se.includes(ee);if(!(ee in(re?IDBIndex:IDBObjectStore).prototype)||!_e&&!Re.includes(ee))return;const de=function(){var Ue=(0,u.Z)(function*(He,..._t){const Jt=this.transaction(He,_e?"readwrite":"readonly");let Gt=Jt.store;return re&&(Gt=Gt.index(_t.shift())),(yield Promise.all([Gt[ee](..._t),_e&&Jt.done]))[0]});return function(_t){return Ue.apply(this,arguments)}}();return qe.set(we,de),de}!function De(fe){Ne=fe(Ne)}(fe=>({...fe,get:(we,ee,re)=>ae(we,ee)||fe.get(we,ee,re),has:(we,ee)=>!!ae(we,ee)||fe.has(we,ee)}))},5861:(ut,Ae,L)=>{function u(N,ce,he,ve,ue,ge,Ee){try{var K=N[ge](Ee),Z=K.value}catch(te){return void he(te)}K.done?ce(Z):Promise.resolve(Z).then(ve,ue)}function j(N){return function(){var ce=this,he=arguments;return new Promise(function(ve,ue){var ge=N.apply(ce,he);function Ee(Z){u(ge,ve,ue,Ee,K,"next",Z)}function K(Z){u(ge,ve,ue,Ee,K,"throw",Z)}Ee(void 0)})}}L.d(Ae,{Z:()=>j})}},ut=>{ut(ut.s=1720)}]);