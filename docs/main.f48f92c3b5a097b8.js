"use strict";(self.webpackChunkcurriculo_facil=self.webpackChunkcurriculo_facil||[]).push([[179],{2011:(gt,ke,U)=>{U.d(ke,{Dh:()=>_e,GT:()=>we,cc:()=>Le,hO:()=>We,on:()=>q,pX:()=>he,xv:()=>Ie});var m=U(4650),$=U(127),P=U(5813);gt=U.hmd(gt);const le=["ngOnDestroy"],he=(ve,it,st,Fe={})=>new Proxy(ve,{get:(Ne,Ae)=>st.runOutsideAngular(()=>{var Ze;if(ve[Ae])return!(null===(Ze=Fe?.spy)||void 0===Ze)&&Ze.get&&Fe.spy.get(Ae,ve[Ae]),ve[Ae];if(le.indexOf(Ae)>-1)return()=>{};const ue=it.toPromise().then(fe=>{const Ee=fe&&fe[Ae];return"function"==typeof Ee?Ee.bind(fe):Ee&&Ee.then?Ee.then(te=>st.run(()=>te)):st.run(()=>Ee)});return new Proxy(()=>{},{get:(fe,Ee)=>ue[Ee],apply:(fe,Ee,te)=>ue.then(ie=>{var ye;const de=ie&&ie(...te);return!(null===(ye=Fe?.spy)||void 0===ye)&&ye.apply&&Fe.spy.apply(Ae,te,de),de})})})}),we=(ve,it)=>{it.forEach(st=>{Object.getOwnPropertyNames(st.prototype||st).forEach(Fe=>{Object.defineProperty(ve.prototype,Fe,Object.getOwnPropertyDescriptor(st.prototype||st,Fe))})})};class pe{constructor(it){return it}}const _e=new m.OlP("angularfire2.app.options"),Ie=new m.OlP("angularfire2.app.name");function q(ve,it,st){const Ne="object"==typeof st&&st||{};Ne.name=Ne.name||"string"==typeof st&&st||"[DEFAULT]";const Ze=$.Z.apps.filter(ue=>ue&&ue.name===Ne.name)[0]||it.runOutsideAngular(()=>$.Z.initializeApp(ve,Ne));try{JSON.stringify(ve)!==JSON.stringify(Ze.options)&&K("error",`${Ze.name} Firebase App already initialized with different options${gt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new pe(Ze)}const K=(ve,...it)=>{(0,m.X6Q)()&&typeof console<"u"&&console[ve](...it)},ne={provide:pe,useFactory:q,deps:[_e,m.R0b,[new m.FiY,Ie]]};let We=(()=>{class ve{constructor(st){$.Z.registerVersion("angularfire",P.q4.full,"core"),$.Z.registerVersion("angularfire",P.q4.full,"app-compat"),$.Z.registerVersion("angular",m.q4F.full,st.toString())}static initializeApp(st,Fe){return{ngModule:ve,providers:[{provide:_e,useValue:st},{provide:Ie,useValue:Fe}]}}}return ve.\u0275fac=function(st){return new(st||ve)(m.LFG(m.Lbi))},ve.\u0275mod=m.oAB({type:ve}),ve.\u0275inj=m.cJS({providers:[ne]}),ve})();function Le(ve,it,st,Fe,Ne){const[,Ae,Ze]=globalThis.\u0275AngularfireInstanceCache.find(ue=>ue[0]===ve)||[];if(Ae)return function Se(ve,it){try{return ve.toString()===it.toString()}catch{return ve===it}}(Ne,Ze)||(Ce("error",`${it} was already initialized on the ${st} Firebase App with different settings.${ct?" You may need to reload as Firebase is not HMR aware.":""}`),Ce("warn",{is:Ne,was:Ze})),Ae;{const ue=Fe();return globalThis.\u0275AngularfireInstanceCache.push([ve,ue,Ne]),ue}}const ct=!!gt.hot,Ce=(ve,...it)=>{(0,m.X6Q)()&&typeof console<"u"&&console[ve](...it)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(gt,ke,U)=>{U.d(ke,{q4:()=>ii,iC:()=>Eo,fc:()=>ud,HU:()=>pa,vb:()=>Gl,JM:()=>Wu});var m=U(4650),$=U(5867),P=U(5861),le=U(9681),he=U(2090),we=U(4859),pe=U(1877),_e=U(8766);const Ie="@firebase/installations",q="0.5.12",ne=`w:${q}`,We="FIS_v2",it=new he.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function st(C){return C instanceof he.ZR&&C.code.includes("request-failed")}function Fe({projectId:C}){return`https://firebaseinstallations.googleapis.com/v1/projects/${C}/installations`}function Ne(C){return{token:C.token,requestStatus:2,expiresIn:ie(C.expiresIn),creationTime:Date.now()}}function Ae(C,S){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,P.Z)(function*(C,S){const j=(yield S.json()).error;return it.create("request-failed",{requestName:C,serverCode:j.code,serverMessage:j.message,serverStatus:j.status})})).apply(this,arguments)}function ue({apiKey:C}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C})}function fe(C,{refreshToken:S}){const k=ue(C);return k.append("Authorization",function ye(C){return`${We} ${C}`}(S)),k}function Ee(C){return te.apply(this,arguments)}function te(){return(te=(0,P.Z)(function*(C){const S=yield C();return S.status>=500&&S.status<600?C():S})).apply(this,arguments)}function ie(C){return Number(C.replace("s","000"))}function de(C,S){return je.apply(this,arguments)}function je(){return(je=(0,P.Z)(function*({appConfig:C,heartbeatServiceProvider:S},{fid:k}){const j=Fe(C),re=ue(C),ge=S.getImmediate({optional:!0});if(ge){const kt=yield ge.getHeartbeatsHeader();kt&&re.append("x-firebase-client",kt)}const Xe={method:"POST",headers:re,body:JSON.stringify({fid:k,authVersion:We,appId:C.appId,sdkVersion:ne})},Tt=yield Ee(()=>fetch(j,Xe));if(Tt.ok){const kt=yield Tt.json();return{fid:kt.fid||k,registrationStatus:2,refreshToken:kt.refreshToken,authToken:Ne(kt.authToken)}}throw yield Ae("Create Installation",Tt)})).apply(this,arguments)}function $e(C){return new Promise(S=>{setTimeout(S,C)})}const tn=/^[cdef][\w-]{21}$/;function Qe(){try{const C=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(C),C[0]=112+C[0]%16;const k=function Tn(C){return function wt(C){return btoa(String.fromCharCode(...C)).replace(/\+/g,"-").replace(/\//g,"_")}(C).substr(0,22)}(C);return tn.test(k)?k:""}catch{return""}}function $n(C){return`${C.appName}!${C.appId}`}const ln=new Map;function nn(C,S){const k=$n(C);Ir(k,S),function ro(C,S){const k=function Nn(){return!Tr&&"BroadcastChannel"in self&&(Tr=new BroadcastChannel("[Firebase] FID Change"),Tr.onmessage=C=>{Ir(C.data.key,C.data.fid)}),Tr}();k&&k.postMessage({key:C,fid:S}),function as(){0===ln.size&&Tr&&(Tr.close(),Tr=null)}()}(k,S)}function Ir(C,S){const k=ln.get(C);if(k)for(const j of k)j(S)}let Tr=null;const Hn="firebase-installations-store";let Si=null;function $i(){return Si||(Si=(0,_e.X3)("firebase-installations-database",1,{upgrade:(C,S)=>{0===S&&C.createObjectStore(Hn)}})),Si}function ot(C,S){return _r.apply(this,arguments)}function _r(){return(_r=(0,P.Z)(function*(C,S){const k=$n(C),re=(yield $i()).transaction(Hn,"readwrite"),ge=re.objectStore(Hn),Oe=yield ge.get(k);return yield ge.put(S,k),yield re.done,(!Oe||Oe.fid!==S.fid)&&nn(C,S.fid),S})).apply(this,arguments)}function Gn(C){return vn.apply(this,arguments)}function vn(){return(vn=(0,P.Z)(function*(C){const S=$n(C),j=(yield $i()).transaction(Hn,"readwrite");yield j.objectStore(Hn).delete(S),yield j.done})).apply(this,arguments)}function yr(C,S){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,P.Z)(function*(C,S){const k=$n(C),re=(yield $i()).transaction(Hn,"readwrite"),ge=re.objectStore(Hn),Oe=yield ge.get(k),Xe=S(Oe);return void 0===Xe?yield ge.delete(k):yield ge.put(Xe,k),yield re.done,Xe&&(!Oe||Oe.fid!==Xe.fid)&&nn(C,Xe.fid),Xe})).apply(this,arguments)}function An(C){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,P.Z)(function*(C){let S;const k=yield yr(C.appConfig,j=>{const re=Cn(j),ge=mt(C,re);return S=ge.registrationPromise,ge.installationEntry});return""===k.fid?{installationEntry:yield S}:{installationEntry:k,registrationPromise:S}})).apply(this,arguments)}function Cn(C){return Rt(C||{fid:Qe(),registrationStatus:0})}function mt(C,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(it.create("app-offline"))};const k={fid:S.fid,registrationStatus:1,registrationTime:Date.now()},j=function _t(C,S){return Lt.apply(this,arguments)}(C,k);return{installationEntry:k,registrationPromise:j}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:Hr(C)}:{installationEntry:S}}function Lt(){return(Lt=(0,P.Z)(function*(C,S){try{const k=yield de(C,S);return ot(C.appConfig,k)}catch(k){throw st(k)&&409===k.customData.serverCode?yield Gn(C.appConfig):yield ot(C.appConfig,{fid:S.fid,registrationStatus:0}),k}})).apply(this,arguments)}function Hr(C){return vr.apply(this,arguments)}function vr(){return(vr=(0,P.Z)(function*(C){let S=yield Cr(C.appConfig);for(;1===S.registrationStatus;)yield $e(100),S=yield Cr(C.appConfig);if(0===S.registrationStatus){const{installationEntry:k,registrationPromise:j}=yield An(C);return j||k}return S})).apply(this,arguments)}function Cr(C){return yr(C,S=>{if(!S)throw it.create("installation-not-found");return Rt(S)})}function Rt(C){return function Pr(C){return 1===C.registrationStatus&&C.registrationTime+1e4<Date.now()}(C)?{fid:C.fid,registrationStatus:0}:C}function Ut(C,S){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,P.Z)(function*({appConfig:C,heartbeatServiceProvider:S},k){const j=Yt(C,k),re=fe(C,k),ge=S.getImmediate({optional:!0});if(ge){const kt=yield ge.getHeartbeatsHeader();kt&&re.append("x-firebase-client",kt)}const Xe={method:"POST",headers:re,body:JSON.stringify({installation:{sdkVersion:ne,appId:C.appId}})},Tt=yield Ee(()=>fetch(j,Xe));if(Tt.ok)return Ne(yield Tt.json());throw yield Ae("Generate Auth Token",Tt)})).apply(this,arguments)}function Yt(C,{fid:S}){return`${Fe(C)}/${S}/authTokens:generate`}function J(C){return z.apply(this,arguments)}function z(){return(z=(0,P.Z)(function*(C,S=!1){let k;const j=yield yr(C.appConfig,ge=>{if(!It(ge))throw it.create("not-registered");const Oe=ge.authToken;if(!S&&pn(Oe))return ge;if(1===Oe.requestStatus)return k=H(C,S),ge;{if(!navigator.onLine)throw it.create("app-offline");const Xe=nr(ge);return k=xe(C,Xe),Xe}});return k?yield k:j.authToken})).apply(this,arguments)}function H(C,S){return Y.apply(this,arguments)}function Y(){return(Y=(0,P.Z)(function*(C,S){let k=yield Q(C.appConfig);for(;1===k.authToken.requestStatus;)yield $e(100),k=yield Q(C.appConfig);const j=k.authToken;return 0===j.requestStatus?J(C,S):j})).apply(this,arguments)}function Q(C){return yr(C,S=>{if(!It(S))throw it.create("not-registered");return function se(C){return 1===C.requestStatus&&C.requestTime+1e4<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function xe(C,S){return qe.apply(this,arguments)}function qe(){return(qe=(0,P.Z)(function*(C,S){try{const k=yield Ut(C,S),j=Object.assign(Object.assign({},S),{authToken:k});return yield ot(C.appConfig,j),k}catch(k){if(!st(k)||401!==k.customData.serverCode&&404!==k.customData.serverCode){const j=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield ot(C.appConfig,j)}else yield Gn(C.appConfig);throw k}})).apply(this,arguments)}function It(C){return void 0!==C&&2===C.registrationStatus}function pn(C){return 2===C.requestStatus&&!function fn(C){const S=Date.now();return S<C.creationTime||C.creationTime+C.expiresIn<S+36e5}(C)}function nr(C){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},C),{authToken:S})}function W(){return(W=(0,P.Z)(function*(C){const S=C,{installationEntry:k,registrationPromise:j}=yield An(S);return j?j.catch(console.error):J(S).catch(console.error),k.fid})).apply(this,arguments)}function Ye(){return(Ye=(0,P.Z)(function*(C,S=!1){const k=C;return yield bt(k),(yield J(k,S)).token})).apply(this,arguments)}function bt(C){return St.apply(this,arguments)}function St(){return(St=(0,P.Z)(function*(C){const{registrationPromise:S}=yield An(C);S&&(yield S)})).apply(this,arguments)}function io(C){return it.create("missing-app-config-values",{valueName:C})}const so="installations",oo=C=>{const S=C.getProvider("app").getImmediate(),k=function Rn(C){if(!C||!C.options)throw io("App Configuration");if(!C.name)throw io("App Name");const S=["projectId","apiKey","appId"];for(const k of S)if(!C.options[k])throw io(k);return{appName:C.name,projectId:C.options.projectId,apiKey:C.options.apiKey,appId:C.options.appId}}(S);return{app:S,appConfig:k,heartbeatServiceProvider:(0,le._getProvider)(S,"heartbeat"),_delete:()=>Promise.resolve()}},Vo=C=>{const S=C.getProvider("app").getImmediate(),k=(0,le._getProvider)(S,so).getImmediate();return{getId:()=>function G(C){return W.apply(this,arguments)}(k),getToken:re=>function Te(C){return Ye.apply(this,arguments)}(k,re)}};(function xu(){(0,le._registerComponent)(new we.wA(so,oo,"PUBLIC")),(0,le._registerComponent)(new we.wA("installations-internal",Vo,"PRIVATE"))})(),(0,le.registerVersion)(Ie,q),(0,le.registerVersion)(Ie,q,"esm2017");const ls="@firebase/remote-config",Qn=new he.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Dl{constructor(S,k,j,re){this.client=S,this.storage=k,this.storageCache=j,this.logger=re}isCachedDataFresh(S,k){if(!k)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const j=Date.now()-k,re=j<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${j}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${re}.`),re}fetch(S){var k=this;return(0,P.Z)(function*(){const[j,re]=yield Promise.all([k.storage.getLastSuccessfulFetchTimestampMillis(),k.storage.getLastSuccessfulFetchResponse()]);if(re&&k.isCachedDataFresh(S.cacheMaxAgeMillis,j))return re;S.eTag=re&&re.eTag;const ge=yield k.client.fetch(S),Oe=[k.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ge.status&&Oe.push(k.storage.setLastSuccessfulFetchResponse(ge)),yield Promise.all(Oe),ge})()}}function Fa(C=navigator){return C.languages&&C.languages[0]||C.language}class ho{constructor(S,k,j,re,ge,Oe){this.firebaseInstallations=S,this.sdkVersion=k,this.namespace=j,this.projectId=re,this.apiKey=ge,this.appId=Oe}fetch(S){var k=this;return(0,P.Z)(function*(){var j,re,ge;const[Oe,Xe]=yield Promise.all([k.firebaseInstallations.getId(),k.firebaseInstallations.getToken()]),kt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${k.projectId}/namespaces/${k.namespace}:fetch?key=${k.apiKey}`,Gt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},Ct={sdk_version:k.sdkVersion,app_instance_id:Oe,app_instance_id_token:Xe,app_id:k.appId,language_code:Fa()},ur={method:"POST",headers:Gt,body:JSON.stringify(Ct)},Mr=fetch(kt,ur),au=new Promise((cu,_a)=>{S.signal.addEventListener(()=>{const Wl=new Error("The operation was aborted.");Wl.name="AbortError",_a(Wl)})});let uu;try{yield Promise.race([Mr,au]),uu=yield Mr}catch(cu){let _a="fetch-client-network";throw"AbortError"===(null===(j=cu)||void 0===j?void 0:j.name)&&(_a="fetch-timeout"),Qn.create(_a,{originalErrorMessage:null===(re=cu)||void 0===re?void 0:re.message})}let lu=uu.status;const ma=uu.headers.get("ETag")||void 0;let Vs,Ku;if(200===uu.status){let cu;try{cu=yield uu.json()}catch(_a){throw Qn.create("fetch-client-parse",{originalErrorMessage:null===(ge=_a)||void 0===ge?void 0:ge.message})}Vs=cu.entries,Ku=cu.state}if("INSTANCE_STATE_UNSPECIFIED"===Ku?lu=500:"NO_CHANGE"===Ku?lu=304:("NO_TEMPLATE"===Ku||"EMPTY_CONFIG"===Ku)&&(Vs={}),304!==lu&&200!==lu)throw Qn.create("fetch-status",{httpStatus:lu});return{status:lu,eTag:ma,config:Vs}})()}}class ds{constructor(S,k){this.client=S,this.storage=k}fetch(S){var k=this;return(0,P.Z)(function*(){const j=(yield k.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return k.attemptFetch(S,j)})()}attemptFetch(S,{throttleEndTimeMillis:k,backoffCount:j}){var re=this;return(0,P.Z)(function*(){yield function ci(C,S){return new Promise((k,j)=>{const re=Math.max(S-Date.now(),0),ge=setTimeout(k,re);C.addEventListener(()=>{clearTimeout(ge),j(Qn.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,k);try{const ge=yield re.client.fetch(S);return yield re.storage.deleteThrottleMetadata(),ge}catch(ge){if(!function Op(C){if(!(C instanceof he.ZR&&C.customData))return!1;const S=Number(C.customData.httpStatus);return 429===S||500===S||503===S||504===S}(ge))throw ge;const Oe={throttleEndTimeMillis:Date.now()+(0,he.$s)(j),backoffCount:j+1};return yield re.storage.setThrottleMetadata(Oe),re.attemptFetch(S,Oe)}})()}}class Fp{constructor(S,k,j,re,ge){this.app=S,this._client=k,this._storageCache=j,this._storage=re,this._logger=ge,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ua(C,S){var k;const j=C.target.error||void 0;return Qn.create(S,{originalErrorMessage:j&&(null===(k=j)||void 0===k?void 0:k.message)})}const $o="app_namespace_store";class Fc{constructor(S,k,j,re=function Bp(){return new Promise((C,S)=>{var k;try{const j=indexedDB.open("firebase_remote_config",1);j.onerror=re=>{S(Ua(re,"storage-open"))},j.onsuccess=re=>{C(re.target.result)},j.onupgradeneeded=re=>{0===re.oldVersion&&re.target.result.createObjectStore($o,{keyPath:"compositeKey"})}}catch(j){S(Qn.create("storage-open",{originalErrorMessage:null===(k=j)||void 0===k?void 0:k.message}))}})}()){this.appId=S,this.appName=k,this.namespace=j,this.openDbPromise=re}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var k=this;return(0,P.Z)(function*(){const j=yield k.openDbPromise;return new Promise((re,ge)=>{var Oe;const Tt=j.transaction([$o],"readonly").objectStore($o),kt=k.createCompositeKey(S);try{const Gt=Tt.get(kt);Gt.onerror=Ct=>{ge(Ua(Ct,"storage-get"))},Gt.onsuccess=Ct=>{const ur=Ct.target.result;re(ur?ur.value:void 0)}}catch(Gt){ge(Qn.create("storage-get",{originalErrorMessage:null===(Oe=Gt)||void 0===Oe?void 0:Oe.message}))}})})()}set(S,k){var j=this;return(0,P.Z)(function*(){const re=yield j.openDbPromise;return new Promise((ge,Oe)=>{var Xe;const kt=re.transaction([$o],"readwrite").objectStore($o),Gt=j.createCompositeKey(S);try{const Ct=kt.put({compositeKey:Gt,value:k});Ct.onerror=ur=>{Oe(Ua(ur,"storage-set"))},Ct.onsuccess=()=>{ge()}}catch(Ct){Oe(Qn.create("storage-set",{originalErrorMessage:null===(Xe=Ct)||void 0===Xe?void 0:Xe.message}))}})})()}delete(S){var k=this;return(0,P.Z)(function*(){const j=yield k.openDbPromise;return new Promise((re,ge)=>{var Oe;const Tt=j.transaction([$o],"readwrite").objectStore($o),kt=k.createCompositeKey(S);try{const Gt=Tt.delete(kt);Gt.onerror=Ct=>{ge(Ua(Ct,"storage-delete"))},Gt.onsuccess=()=>{re()}}catch(Gt){ge(Qn.create("storage-delete",{originalErrorMessage:null===(Oe=Gt)||void 0===Oe?void 0:Oe.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class Ho{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,P.Z)(function*(){const k=S.storage.getLastFetchStatus(),j=S.storage.getLastSuccessfulFetchTimestampMillis(),re=S.storage.getActiveConfig(),ge=yield k;ge&&(S.lastFetchStatus=ge);const Oe=yield j;Oe&&(S.lastSuccessfulFetchTimestampMillis=Oe);const Xe=yield re;Xe&&(S.activeConfig=Xe)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function V_(){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,P.Z)(function*(){if(!(0,he.hl)())return!1;try{return yield(0,he.eu)()}catch{return!1}})).apply(this,arguments)}!function Uc(){(0,le._registerComponent)(new we.wA("remote-config",function C(S,{instanceIdentifier:k}){const j=S.getProvider("app").getImmediate(),re=S.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Qn.create("registration-window");if(!(0,he.hl)())throw Qn.create("indexed-db-unavailable");const{projectId:ge,apiKey:Oe,appId:Xe}=j.options;if(!ge)throw Qn.create("registration-project-id");if(!Oe)throw Qn.create("registration-api-key");if(!Xe)throw Qn.create("registration-app-id");const Tt=new Fc(Xe,j.name,k=k||"firebase"),kt=new Ho(Tt),Gt=new pe.Yd(ls);Gt.logLevel=pe.in.ERROR;const Ct=new ho(re,le.SDK_VERSION,k,ge,Oe,Xe),ur=new ds(Ct,Tt),Mr=new Dl(ur,Tt,kt,Gt),au=new Fp(j,Mr,kt,Tt,Gt);return function dr(C){const S=(0,he.m9)(C);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(au),au},"PUBLIC").setMultipleInstances(!0)),(0,le.registerVersion)(ls,"0.3.11"),(0,le.registerVersion)(ls,"0.3.11","esm2017")}();const Dr="/firebase-messaging-sw.js",zo="/firebase-cloud-messaging-push-scope",xs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ku="google.c.a.c_id",Sl="google.c.a.c_l",jc="google.c.a.ts",Wo="google.c.a.e";var di=(()=>{return(C=di||(di={})).PUSH_RECEIVED="push-received",C.NOTIFICATION_CLICKED="notification-clicked",di;var C})();function hs(C){const S=new Uint8Array(C);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ni(C){const k=(C+"=".repeat((4-C.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),j=atob(k),re=new Uint8Array(j.length);for(let ge=0;ge<j.length;++ge)re[ge]=j.charCodeAt(ge);return re}const fo="fcm_token_details_db",qo="fcm_token_object_Store";function jp(C){return Al.apply(this,arguments)}function Al(){return Al=(0,P.Z)(function*(C){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ge=>ge.name).includes(fo))return null;let S=null;return(yield(0,_e.X3)(fo,5,{upgrade:(j=(0,P.Z)(function*(re,ge,Oe,Xe){var Tt;if(ge<2||!re.objectStoreNames.contains(qo))return;const kt=Xe.objectStore(qo),Gt=yield kt.index("fcmSenderId").get(C);if(yield kt.clear(),Gt)if(2===ge){const Ct=Gt;if(!Ct.auth||!Ct.p256dh||!Ct.endpoint)return;S={token:Ct.fcmToken,createTime:null!==(Tt=Ct.createTime)&&void 0!==Tt?Tt:Date.now(),subscriptionOptions:{auth:Ct.auth,p256dh:Ct.p256dh,endpoint:Ct.endpoint,swScope:Ct.swScope,vapidKey:"string"==typeof Ct.vapidKey?Ct.vapidKey:hs(Ct.vapidKey)}}}else if(3===ge){const Ct=Gt;S={token:Ct.fcmToken,createTime:Ct.createTime,subscriptionOptions:{auth:hs(Ct.auth),p256dh:hs(Ct.p256dh),endpoint:Ct.endpoint,swScope:Ct.swScope,vapidKey:hs(Ct.vapidKey)}}}else if(4===ge){const Ct=Gt;S={token:Ct.fcmToken,createTime:Ct.createTime,subscriptionOptions:{auth:hs(Ct.auth),p256dh:hs(Ct.p256dh),endpoint:Ct.endpoint,swScope:Ct.swScope,vapidKey:hs(Ct.vapidKey)}}}}),function(ge,Oe,Xe,Tt){return j.apply(this,arguments)})})).close(),yield(0,_e.Lj)(fo),yield(0,_e.Lj)("fcm_vapid_details_db"),yield(0,_e.Lj)("undefined"),Fn(S)?S:null;var j}),Al.apply(this,arguments)}function Fn(C){if(!C||!C.subscriptionOptions)return!1;const{subscriptionOptions:S}=C;return"number"==typeof C.createTime&&C.createTime>0&&"string"==typeof C.token&&C.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}const Ai="firebase-messaging-store";let Sr=null;function Nu(){return Sr||(Sr=(0,_e.X3)("firebase-messaging-database",1,{upgrade:(C,S)=>{0===S&&C.createObjectStore(Ai)}})),Sr}function Ko(C){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,P.Z)(function*(C){const S=fi(C),j=yield(yield Nu()).transaction(Ai).objectStore(Ai).get(S);if(j)return j;{const re=yield jp(C.appConfig.senderId);if(re)return yield cn(C,re),re}})).apply(this,arguments)}function cn(C,S){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,P.Z)(function*(C,S){const k=fi(C),re=(yield Nu()).transaction(Ai,"readwrite");return yield re.objectStore(Ai).put(S,k),yield re.done,S})).apply(this,arguments)}function Rs(C){return Ml.apply(this,arguments)}function Ml(){return(Ml=(0,P.Z)(function*(C){const S=fi(C),j=(yield Nu()).transaction(Ai,"readwrite");yield j.objectStore(Ai).delete(S),yield j.done})).apply(this,arguments)}function fi({appConfig:C}){return C.appId}const zn=new he.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ot(C,S){return Va.apply(this,arguments)}function Va(){return(Va=(0,P.Z)(function*(C,S){var k;const j=yield Ha(C),re=Pe(S),ge={method:"POST",headers:j,body:JSON.stringify(re)};let Oe;try{Oe=yield(yield fetch(po(C.appConfig),ge)).json()}catch(Xe){throw zn.create("token-subscribe-failed",{errorInfo:null===(k=Xe)||void 0===k?void 0:k.toString()})}if(Oe.error)throw zn.create("token-subscribe-failed",{errorInfo:Oe.error.message});if(!Oe.token)throw zn.create("token-subscribe-no-token");return Oe.token})).apply(this,arguments)}function $p(C,S){return ja.apply(this,arguments)}function ja(){return(ja=(0,P.Z)(function*(C,S){var k;const j=yield Ha(C),re=Pe(S.subscriptionOptions),ge={method:"PATCH",headers:j,body:JSON.stringify(re)};let Oe;try{Oe=yield(yield fetch(`${po(C.appConfig)}/${S.token}`,ge)).json()}catch(Xe){throw zn.create("token-update-failed",{errorInfo:null===(k=Xe)||void 0===k?void 0:k.toString()})}if(Oe.error)throw zn.create("token-update-failed",{errorInfo:Oe.error.message});if(!Oe.token)throw zn.create("token-update-no-token");return Oe.token})).apply(this,arguments)}function Hc(C,S){return $a.apply(this,arguments)}function $a(){return($a=(0,P.Z)(function*(C,S){var k;const re={method:"DELETE",headers:yield Ha(C)};try{const Oe=yield(yield fetch(`${po(C.appConfig)}/${S}`,re)).json();if(Oe.error)throw zn.create("token-unsubscribe-failed",{errorInfo:Oe.error.message})}catch(ge){throw zn.create("token-unsubscribe-failed",{errorInfo:null===(k=ge)||void 0===k?void 0:k.toString()})}})).apply(this,arguments)}function po({projectId:C}){return`https://fcmregistrations.googleapis.com/v1/projects/${C}/registrations`}function Ha(C){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,P.Z)(function*({appConfig:C,installations:S}){const k=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C.apiKey,"x-goog-firebase-installations-auth":`FIS ${k}`})})).apply(this,arguments)}function Pe({p256dh:C,auth:S,endpoint:k,vapidKey:j}){const re={web:{endpoint:k,auth:S,p256dh:C}};return j!==xs&&(re.web.applicationPubKey=j),re}const Qt=6048e5;function Hp(C){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,P.Z)(function*(C){const S=yield Ch(C.swRegistration,C.vapidKey),k={vapidKey:C.vapidKey,swScope:C.swRegistration.scope,endpoint:S.endpoint,auth:hs(S.getKey("auth")),p256dh:hs(S.getKey("p256dh"))},j=yield Ko(C.firebaseDependencies);if(j){if(Gp(j.subscriptionOptions,k))return Date.now()>=j.createTime+Qt?Ou(C,{token:j.token,createTime:Date.now(),subscriptionOptions:k}):j.token;try{yield Hc(C.firebaseDependencies,j.token)}catch(re){console.warn(re)}return Lu(C.firebaseDependencies,k)}return Lu(C.firebaseDependencies,k)})).apply(this,arguments)}function ir(C){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,P.Z)(function*(C){const S=yield Ko(C.firebaseDependencies);S&&(yield Hc(C.firebaseDependencies,S.token),yield Rs(C.firebaseDependencies));const k=yield C.swRegistration.pushManager.getSubscription();return!k||k.unsubscribe()})).apply(this,arguments)}function Ou(C,S){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,P.Z)(function*(C,S){try{const k=yield $p(C.firebaseDependencies,S),j=Object.assign(Object.assign({},S),{token:k,createTime:Date.now()});return yield cn(C.firebaseDependencies,j),k}catch(k){throw yield ir(C),k}})).apply(this,arguments)}function Lu(C,S){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,P.Z)(function*(C,S){const j={token:yield Ot(C,S),createTime:Date.now(),subscriptionOptions:S};return yield cn(C,j),j.token})).apply(this,arguments)}function Ch(C,S){return za.apply(this,arguments)}function za(){return(za=(0,P.Z)(function*(C,S){return(yield C.pushManager.getSubscription())||C.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ni(S)})})).apply(this,arguments)}function Gp(C,S){return S.vapidKey===C.vapidKey&&S.endpoint===C.endpoint&&S.auth===C.auth&&S.p256dh===C.p256dh}function fs(C){const S={from:C.from,collapseKey:C.collapse_key,messageId:C.fcmMessageId};return function sr(C,S){if(!S.notification)return;C.notification={};const k=S.notification.title;k&&(C.notification.title=k);const j=S.notification.body;j&&(C.notification.body=j);const re=S.notification.image;re&&(C.notification.image=re)}(S,C),function zi(C,S){!S.data||(C.data=S.data)}(S,C),function Wa(C,S){var k,j,re,ge,Oe;if(!(S.fcmOptions||null!==(k=S.notification)&&void 0!==k&&k.click_action))return;C.fcmOptions={};const Xe=null!==(re=null===(j=S.fcmOptions)||void 0===j?void 0:j.link)&&void 0!==re?re:null===(ge=S.notification)||void 0===ge?void 0:ge.click_action;Xe&&(C.fcmOptions.link=Xe);const Tt=null===(Oe=S.fcmOptions)||void 0===Oe?void 0:Oe.analytics_label;Tt&&(C.fcmOptions.analyticsLabel=Tt)}(S,C),S}function qa(C){return"object"==typeof C&&!!C&&ku in C}function ps(C,S){const k=[];for(let j=0;j<C.length;j++)k.push(C.charAt(j)),j<S.length&&k.push(S.charAt(j));return k.join("")}function xl(C){return zn.create("missing-app-config-values",{valueName:C})}ps("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ps("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class zc{constructor(S,k,j){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const re=function Gc(C){if(!C||!C.options)throw xl("App Configuration Object");if(!C.name)throw xl("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:k}=C;for(const j of S)if(!k[j])throw xl(j);return{appName:C.name,projectId:k.projectId,apiKey:k.apiKey,appId:k.appId,senderId:k.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:re,installations:k,analyticsProvider:j}}_delete(){return Promise.resolve()}}function Dh(C){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,P.Z)(function*(C){var S;try{C.swRegistration=yield navigator.serviceWorker.register(Dr,{scope:zo}),C.swRegistration.update().catch(()=>{})}catch(k){throw zn.create("failed-service-worker-registration",{browserErrorMessage:null===(S=k)||void 0===S?void 0:S.message})}})).apply(this,arguments)}function Rl(C,S){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,P.Z)(function*(C,S){if(!S&&!C.swRegistration&&(yield Dh(C)),S||!C.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw zn.create("invalid-sw-registration");C.swRegistration=S}})).apply(this,arguments)}function kl(C,S){return Za.apply(this,arguments)}function Za(){return(Za=(0,P.Z)(function*(C,S){S?C.vapidKey=S:C.vapidKey||(C.vapidKey=xs)})).apply(this,arguments)}function Jo(){return(Jo=(0,P.Z)(function*(C,S){if(!navigator)throw zn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw zn.create("permission-blocked");return yield kl(C,S?.vapidKey),yield Rl(C,S?.serviceWorkerRegistration),Hp(C)})).apply(this,arguments)}function Sh(C,S,k){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,P.Z)(function*(C,S,k){const j=Ah(S);(yield C.firebaseDependencies.analyticsProvider.get()).logEvent(j,{message_id:k[ku],message_name:k[Sl],message_time:k[jc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ah(C){switch(C){case di.NOTIFICATION_CLICKED:return"notification_open";case di.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ks(){return(ks=(0,P.Z)(function*(C,S){const k=S.data;if(!k.isFirebaseMessaging)return;C.onMessageHandler&&k.messageType===di.PUSH_RECEIVED&&("function"==typeof C.onMessageHandler?C.onMessageHandler(fs(k)):C.onMessageHandler.next(fs(k)));const j=k.data;qa(j)&&"1"===j[Wo]&&(yield Sh(C,k.messageType,j))})).apply(this,arguments)}const Ns="@firebase/messaging",On=C=>{const S=new zc(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),C.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",k=>function qc(C,S){return ks.apply(this,arguments)}(S,k)),S},gs=C=>{const S=C.getProvider("messaging").getImmediate();return{getToken:j=>function Wc(C,S){return Jo.apply(this,arguments)}(S,j)}};function Zc(){return Nl.apply(this,arguments)}function Nl(){return(Nl=(0,P.Z)(function*(){try{yield(0,he.eu)()}catch{return!1}return typeof window<"u"&&(0,he.hl)()&&(0,he.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Ln(){(0,le._registerComponent)(new we.wA("messaging",On,"PUBLIC")),(0,le._registerComponent)(new we.wA("messaging-internal",gs,"PRIVATE")),(0,le.registerVersion)(Ns,"0.9.16"),(0,le.registerVersion)(Ns,"0.9.16","esm2017")}();const na="analytics",Xc="firebase_id",Fl="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Jc="https://www.googletagmanager.com/gtag/js",Wn=new pe.Yd("@firebase/analytics");function Fu(C){return Promise.all(C.map(S=>S.catch(k=>k)))}function Uu(C,S){const k=document.createElement("script");k.src=`${Jc}?l=${C}&id=${S}`,k.async=!0,document.head.appendChild(k)}function xh(C,S,k,j,re,ge){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,P.Z)(function*(C,S,k,j,re,ge){const Oe=j[re];try{if(Oe)yield S[Oe];else{const Tt=(yield Fu(k)).find(kt=>kt.measurementId===re);Tt&&(yield S[Tt.appId])}}catch(Xe){Wn.error(Xe)}C("config",re,ge)})).apply(this,arguments)}function ms(C,S,k,j,re){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,P.Z)(function*(C,S,k,j,re){try{let ge=[];if(re&&re.send_to){let Oe=re.send_to;Array.isArray(Oe)||(Oe=[Oe]);const Xe=yield Fu(k);for(const Tt of Oe){const kt=Xe.find(Ct=>Ct.measurementId===Tt),Gt=kt&&S[kt.appId];if(!Gt){ge=[];break}ge.push(Gt)}}0===ge.length&&(ge=Object.values(S)),yield Promise.all(ge),C("event",j,re||{})}catch(ge){Wn.error(ge)}})).apply(this,arguments)}function ed(){const C=window.document.getElementsByTagName("script");for(const S of Object.values(C))if(S.src&&S.src.includes(Jc))return S;return null}const or=new he.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),eu=new class Bl{constructor(S={},k=1e3){this.throttleMetadata=S,this.intervalMillis=k}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,k){this.throttleMetadata[S]=k}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function ra(C){return new Headers({Accept:"application/json","x-goog-api-key":C})}function Nh(C){return qn.apply(this,arguments)}function qn(){return(qn=(0,P.Z)(function*(C){var S;const{appId:k,apiKey:j}=C,re={method:"GET",headers:ra(j)},ge=Fl.replace("{app-id}",k),Oe=yield fetch(ge,re);if(200!==Oe.status&&304!==Oe.status){let Xe="";try{const Tt=yield Oe.json();null!==(S=Tt.error)&&void 0!==S&&S.message&&(Xe=Tt.error.message)}catch{}throw or.create("config-fetch-failed",{httpStatus:Oe.status,responseMessage:Xe})}return Oe.json()})).apply(this,arguments)}function td(C){return ri.apply(this,arguments)}function ri(){return(ri=(0,P.Z)(function*(C,S=eu,k){const{appId:j,apiKey:re,measurementId:ge}=C.options;if(!j)throw or.create("no-app-id");if(!re){if(ge)return{measurementId:ge,appId:j};throw or.create("no-api-key")}const Oe=S.getThrottleMetadata(j)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Xe=new tu;return setTimeout((0,P.Z)(function*(){Xe.abort()}),void 0!==k?k:6e4),nd({appId:j,apiKey:re,measurementId:ge},Oe,Xe,S)})).apply(this,arguments)}function nd(C,S,k){return _s.apply(this,arguments)}function _s(){return(_s=(0,P.Z)(function*(C,{throttleEndTimeMillis:S,backoffCount:k},j,re=eu){var ge,Oe;const{appId:Xe,measurementId:Tt}=C;try{yield Vl(j,S)}catch(kt){if(Tt)return Wn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Tt} provided in the "measurementId" field in the local Firebase config. [${null===(ge=kt)||void 0===ge?void 0:ge.message}]`),{appId:Xe,measurementId:Tt};throw kt}try{const kt=yield Nh(C);return re.deleteThrottleMetadata(Xe),kt}catch(kt){const Gt=kt;if(!Vu(Gt)){if(re.deleteThrottleMetadata(Xe),Tt)return Wn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Tt} provided in the "measurementId" field in the local Firebase config. [${Gt?.message}]`),{appId:Xe,measurementId:Tt};throw kt}const Ct=503===Number(null===(Oe=Gt?.customData)||void 0===Oe?void 0:Oe.httpStatus)?(0,he.$s)(k,re.intervalMillis,30):(0,he.$s)(k,re.intervalMillis),ur={throttleEndTimeMillis:Date.now()+Ct,backoffCount:k+1};return re.setThrottleMetadata(Xe,ur),Wn.debug(`Calling attemptFetch again in ${Ct} millis`),nd(C,ur,j,re)}})).apply(this,arguments)}function Vl(C,S){return new Promise((k,j)=>{const re=Math.max(S-Date.now(),0),ge=setTimeout(k,re);C.addEventListener(()=>{clearTimeout(ge),j(or.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}function Vu(C){if(!(C instanceof he.ZR&&C.customData))return!1;const S=Number(C.customData.httpStatus);return 429===S||500===S||503===S||504===S}class tu{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}let go,$u;function ia(){return(ia=(0,P.Z)(function*(C,S,k,j,re){if(re&&re.global)C("event",k,j);else{const ge=yield S;C("event",k,Object.assign(Object.assign({},j),{send_to:ge}))}})).apply(this,arguments)}function aa(C){$u=C}function jl(C){go=C}function _o(){return ua.apply(this,arguments)}function ua(){return(ua=(0,P.Z)(function*(){var C;if(!(0,he.hl)())return Wn.warn(or.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,he.eu)()}catch(S){return Wn.warn(or.create("indexeddb-unavailable",{errorInfo:null===(C=S)||void 0===C?void 0:C.toString()}).message),!1}return!0})).apply(this,arguments)}function la(){return(la=(0,P.Z)(function*(C,S,k,j,re,ge,Oe){var Xe;const Tt=td(C);Tt.then(Mr=>{k[Mr.measurementId]=Mr.appId,C.options.measurementId&&Mr.measurementId!==C.options.measurementId&&Wn.warn(`The measurement ID in the local Firebase config (${C.options.measurementId}) does not match the measurement ID fetched from the server (${Mr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Mr=>Wn.error(Mr)),S.push(Tt);const kt=_o().then(Mr=>{if(Mr)return j.getId()}),[Gt,Ct]=yield Promise.all([Tt,kt]);ed()||Uu(ge,Gt.measurementId),$u&&(re("consent","default",$u),aa(void 0)),re("js",new Date);const ur=null!==(Xe=Oe?.config)&&void 0!==Xe?Xe:{};return ur.origin="firebase",ur.update=!0,null!=Ct&&(ur[Xc]=Ct),re("config",Gt.measurementId,ur),go&&(re("set",go),jl(void 0)),Gt.measurementId})).apply(this,arguments)}class Hu{constructor(S){this.app=S}_delete(){return delete Or[this.app.options.appId],Promise.resolve()}}let Or={},ca=[];const yo={};let ha,qi,da="dataLayer",id=!1;function Lh(C,S,k){!function zp(){const C=[];if((0,he.ru)()&&C.push("This is a browser extension environment."),(0,he.zI)()||C.push("Cookies are not available."),C.length>0){const S=C.map((j,re)=>`(${re+1}) ${j}`).join(" "),k=or.create("invalid-analytics-context",{errorInfo:S});Wn.warn(k.message)}}();const j=C.options.appId;if(!j)throw or.create("no-app-id");if(!C.options.apiKey){if(!C.options.measurementId)throw or.create("no-api-key");Wn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${C.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Or[j])throw or.create("already-exists",{id:j});if(!id){!function Bu(C){let S=[];Array.isArray(window[C])?S=window[C]:window[C]=S}(da);const{wrappedGtag:ge,gtagCore:Oe}=function Ja(C,S,k,j,re){let ge=function(...Oe){window[j].push(arguments)};return window[re]&&"function"==typeof window[re]&&(ge=window[re]),window[re]=function Ul(C,S,k,j){function ge(){return(ge=(0,P.Z)(function*(Oe,Xe,Tt){try{"event"===Oe?yield ms(C,S,k,Xe,Tt):"config"===Oe?yield xh(C,S,k,j,Xe,Tt):"consent"===Oe?C("consent","update",Tt):C("set",Xe)}catch(kt){Wn.error(kt)}})).apply(this,arguments)}return function re(Oe,Xe,Tt){return ge.apply(this,arguments)}}(ge,C,S,k),{gtagCore:ge,wrappedGtag:window[re]}}(Or,ca,yo,da,"gtag");qi=ge,ha=Oe,id=!0}return Or[j]=function Oh(C,S,k,j,re,ge,Oe){return la.apply(this,arguments)}(C,ca,yo,S,ha,da,k),new Hu(C)}function $_(){return Fh.apply(this,arguments)}function Fh(){return(Fh=(0,P.Z)(function*(){if((0,he.ru)()||!(0,he.zI)()||!(0,he.hl)())return!1;try{return yield(0,he.eu)()}catch{return!1}})).apply(this,arguments)}const sd="@firebase/analytics";!function Ar(){(0,le._registerComponent)(new we.wA(na,(S,{options:k})=>Lh(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),k),"PUBLIC")),(0,le._registerComponent)(new we.wA("analytics-internal",function C(S){try{const k=S.getProvider(na).getImmediate();return{logEvent:(j,re,ge)=>function vo(C,S,k,j){C=(0,he.m9)(C),function nu(C,S,k,j,re){return ia.apply(this,arguments)}(qi,Or[C.app.options.appId],S,k,j).catch(re=>Wn.error(re))}(k,j,re,ge)}}catch(k){throw or.create("interop-component-reg-failed",{reason:k})}},"PRIVATE")),(0,le.registerVersion)(sd,"0.8.0"),(0,le.registerVersion)(sd,"0.8.0","esm2017")}();var Os=U(4408),bo=U(7565);const iu=new class vs extends bo.v{}(class Ls extends Os.o{constructor(S,k){super(S,k),this.scheduler=S,this.work=k}schedule(S,k=0){return k>0?super.schedule(S,k):(this.delay=k,this.state=S,this.scheduler.flush(this),this)}execute(S,k){return k>0||this.closed?super.execute(S,k):this._execute(S,k)}requestAsyncId(S,k,j=0){return null!=j&&j>0||null==j&&this.delay>0?super.requestAsyncId(S,k,j):S.flush(this)}});var Wp=U(4986),su=U(8505),ou=U(5363),od=U(9468);const ii=new m.GfV("7.4.1"),zu="__angularfire_symbol__analyticsIsSupportedValue",zr="__angularfire_symbol__analyticsIsSupported",Hl="__angularfire_symbol__remoteConfigIsSupportedValue",Lr="__angularfire_symbol__remoteConfigIsSupported",Wr="__angularfire_symbol__messagingIsSupportedValue",Ki="__angularfire_symbol__messagingIsSupported";function Wu(C,S,k){if(S){if(1===S.length)return S[0];const ge=S.filter(Oe=>Oe.app===k);if(1===ge.length)return ge[0]}return k.container.getProvider(C).getImmediate({optional:!0})}globalThis[zr]||(globalThis[zr]=$_().then(C=>globalThis[zu]=C).catch(()=>globalThis[zu]=!1)),globalThis[Ki]||(globalThis[Ki]=Zc().then(C=>globalThis[Wr]=C).catch(()=>globalThis[Wr]=!1)),globalThis[Lr]||(globalThis[Lr]=V_().then(C=>globalThis[Hl]=C).catch(()=>globalThis[Hl]=!1));const Gl=(C,S)=>{const k=S?[S]:(0,$.C6)(),j=[];return k.forEach(re=>{re.container.getProvider(C).instances.forEach(Oe=>{j.includes(Oe)||j.push(Oe)})}),j};function Us(){}class fa{constructor(S,k=iu){this.zone=S,this.delegate=k}now(){return this.delegate.now()}schedule(S,k,j){const re=this.zone;return this.delegate.schedule(function(Oe){re.runGuarded(()=>{S.apply(this,[Oe])})},k,j)}}class zl{constructor(S){this.zone=S,this.task=null}call(S,k){const j=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Us,{},Us,Us)),k.pipe((0,su.b)({next:j,complete:j,error:j})).subscribe(S).add(j)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let pa=(()=>{class C{constructor(k){this.ngZone=k,this.outsideAngular=k.runOutsideAngular(()=>new fa(Zone.current)),this.insideAngular=k.run(()=>new fa(Zone.current,Wp.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return C.\u0275fac=function(k){return new(k||C)(m.LFG(m.R0b))},C.\u0275prov=m.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function Bs(){const C=globalThis.\u0275AngularFireScheduler;if(!C)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return C}function ud(C){return C.pipe((0,ou.Q)(Bs().outsideAngular))}function Eo(C){return Bs(),function qp(C){return function(k){return(k=k.lift(new zl(C.ngZone))).pipe((0,od.R)(C.outsideAngular),(0,ou.Q)(C.insideAngular))}}(Bs())(C)}},8554:(gt,ke,U)=>{U.d(ke,{$:()=>po,A:()=>K,B:()=>Le,G:()=>Vo,H:()=>ei,J:()=>ds,L:()=>pn,M:()=>Ru,N:()=>Vc,P:()=>Wp,Q:()=>ku,R:()=>H_,T:()=>Sl,U:()=>xs,V:()=>di,W:()=>hs,X:()=>jp,Y:()=>Ba,Z:()=>Ot,_:()=>$p,a:()=>Ps,a0:()=>Hp,a1:()=>ir,a2:()=>Ou,a3:()=>Lu,a4:()=>Ch,a5:()=>Gp,a6:()=>sr,a7:()=>zi,a8:()=>qa,a9:()=>ps,aA:()=>Mr,aB:()=>Tt,aC:()=>ud,aD:()=>ga,aE:()=>Et,aI:()=>ra,aL:()=>Wo,aa:()=>Dh,ab:()=>Rl,ac:()=>kl,af:()=>Sh,ag:()=>Ah,ah:()=>qc,ak:()=>Ai,al:()=>Pl,an:()=>Jc,ao:()=>Qa,ap:()=>Jt,aq:()=>Ee,ar:()=>lt,as:()=>bt,at:()=>st,au:()=>cd,av:()=>ma,aw:()=>Fe,ax:()=>ue,ay:()=>ie,az:()=>fn,b:()=>or,c:()=>Wr,d:()=>G_,e:()=>gn,f:()=>qp,g:()=>j,h:()=>C,i:()=>ua,j:()=>Oe,k:()=>X_,l:()=>wo,m:()=>du,o:()=>_e,r:()=>Os,s:()=>ys,u:()=>iu});var m=U(5861),$=U(2090),P=U(9681),le=U(655),he=U(1877),we=U(4859);const _e={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},K={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Le=function ne(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Se=function We(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ct=new $.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ve=new he.Yd("@firebase/auth");function it(w,...g){ve.logLevel<=he.in.ERROR&&ve.error(`Auth (${P.SDK_VERSION}): ${w}`,...g)}function st(w,...g){throw Ze(w,...g)}function Fe(w,...g){return Ze(w,...g)}function Ne(w,g,_){const E=Object.assign(Object.assign({},Se()),{[g]:_});return new $.LL("auth","Firebase",E).create(g,{appName:w.name})}function Ae(w,g,_){if(!(g instanceof _))throw _.name!==g.constructor.name&&st(w,"argument-error"),Ne(w,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ze(w,...g){if("string"!=typeof w){const _=g[0],E=[...g.slice(1)];return E[0]&&(E[0].appName=w.name),w._errorFactory.create(_,...E)}return ct.create(w,...g)}function ue(w,g,..._){if(!w)throw Ze(g,..._)}function fe(w){const g="INTERNAL ASSERTION FAILED: "+w;throw it(g),new Error(g)}function Ee(w,g){w||fe(g)}const te=new Map;function ie(w){Ee(w instanceof Function,"Expected a class definition");let g=te.get(w);return g?(Ee(g instanceof w,"Instance stored in cache mismatched with class"),g):(g=new w,te.set(w,g),g)}function je(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function $e(){return"http:"===wt()||"https:"===wt()}function wt(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class Qe{constructor(g,_){this.shortDelay=g,this.longDelay=_,Ee(_>g,"Short delay should be less than long delay!"),this.isMobile=(0,$.uI)()||(0,$.b$)()}get(){return function tn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&($e()||(0,$.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Tn(w,g){Ee(w.emulator,"Emulator should always be set here");const{url:_}=w.emulator;return g?`${_}${g.startsWith("/")?g.slice(1):g}`:_}class $n{static initialize(g,_,E){this.fetchImpl=g,_&&(this.headersImpl=_),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void fe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void fe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void fe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ln={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},nn=new Qe(3e4,6e4);function Kt(w,g){return w.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:w.tenantId}):g}function Ht(w,g,_,E){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,m.Z)(function*(w,g,_,E,R={}){return ro(w,R,(0,m.Z)(function*(){let F={},ae={};E&&("GET"===g?ae=E:F={body:JSON.stringify(E)});const Re=(0,$.xO)(Object.assign({key:w.config.apiKey},ae)).slice(1),et=yield w._getAdditionalHeaders();return et["Content-Type"]="application/json",w.languageCode&&(et["X-Firebase-Locale"]=w.languageCode),$n.fetch()(ji(w,w.config.apiHost,_,Re),Object.assign({method:g,headers:et,referrerPolicy:"no-referrer"},F))}))})).apply(this,arguments)}function ro(w,g,_){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,m.Z)(function*(w,g,_){w._canInitEmulator=!1;const E=Object.assign(Object.assign({},ln),g);try{const R=new Xr(w),F=yield Promise.race([_(),R.promise]);R.clearNetworkTimeout();const ae=yield F.json();if("needConfirmation"in ae)throw Hn(w,"account-exists-with-different-credential",ae);if(F.ok&&!("errorMessage"in ae))return ae;{const Re=F.ok?ae.errorMessage:ae.error.message,[et,yt]=Re.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===et)throw Hn(w,"credential-already-in-use",ae);if("EMAIL_EXISTS"===et)throw Hn(w,"email-already-in-use",ae);if("USER_DISABLED"===et)throw Hn(w,"user-disabled",ae);const Zt=E[et]||et.toLowerCase().replace(/[_\s]+/g,"-");if(yt)throw Ne(w,Zt,yt);st(w,Zt)}}catch(R){if(R instanceof $.ZR)throw R;st(w,"network-request-failed")}})).apply(this,arguments)}function Nn(w,g,_,E){return as.apply(this,arguments)}function as(){return(as=(0,m.Z)(function*(w,g,_,E,R={}){const F=yield Ht(w,g,_,E,R);return"mfaPendingCredential"in F&&st(w,"multi-factor-auth-required",{_serverResponse:F}),F})).apply(this,arguments)}function ji(w,g,_,E){const R=`${g}${_}?${E}`;return w.config.emulator?Tn(w.config,R):`${w.config.apiScheme}://${R}`}class Xr{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((_,E)=>{this.timer=setTimeout(()=>E(Fe(this.auth,"network-request-failed")),nn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Hn(w,g,_){const E={appName:w.name};_.email&&(E.email=_.email),_.phoneNumber&&(E.phoneNumber=_.phoneNumber);const R=Fe(w,g,E);return R.customData._tokenResponse=_,R}function $i(){return($i=(0,m.Z)(function*(w,g){return Ht(w,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function ot(w,g){return _r.apply(this,arguments)}function _r(){return(_r=(0,m.Z)(function*(w,g){return Ht(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Gn(w,g){return vn.apply(this,arguments)}function vn(){return(vn=(0,m.Z)(function*(w,g){return Ht(w,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function yr(w){if(w)try{const g=new Date(Number(w));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function Mn(){return(Mn=(0,m.Z)(function*(w,g=!1){const _=(0,$.m9)(w),E=yield _.getIdToken(g),R=mt(E);ue(R&&R.exp&&R.auth_time&&R.iat,_.auth,"internal-error");const F="object"==typeof R.firebase?R.firebase:void 0,ae=F?.sign_in_provider;return{claims:R,token:E,authTime:yr(Cn(R.auth_time)),issuedAtTime:yr(Cn(R.iat)),expirationTime:yr(Cn(R.exp)),signInProvider:ae||null,signInSecondFactor:F?.sign_in_second_factor||null}})).apply(this,arguments)}function Cn(w){return 1e3*Number(w)}function mt(w){var g;const[_,E,R]=w.split(".");if(void 0===_||void 0===E||void 0===R)return it("JWT malformed, contained fewer than 3 sections"),null;try{const F=(0,$.tV)(E);return F?JSON.parse(F):(it("Failed to decode base64 JWT payload"),null)}catch(F){return it("Caught error parsing JWT payload as JSON",null===(g=F)||void 0===g?void 0:g.toString()),null}}function Lt(w,g){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,m.Z)(function*(w,g,_=!1){if(_)return g;try{return yield g}catch(E){throw E instanceof $.ZR&&vr(E)&&w.auth.currentUser===w&&(yield w.auth.signOut()),E}})).apply(this,arguments)}function vr({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class Cr{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var _;if(g){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const R=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,R)}}schedule(g=!1){var _=this;if(!this.isRunning)return;const E=this.getInterval(g);this.timerId=setTimeout((0,m.Z)(function*(){yield _.iteration()}),E)}iteration(){var g=this;return(0,m.Z)(function*(){var _;try{yield g.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===(null===(_=E)||void 0===_?void 0:_.code)&&g.schedule(!0))}g.schedule()})()}}class Rt{constructor(g,_){this.createdAt=g,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=yr(this.lastLoginAt),this.creationTime=yr(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Pr(w){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,m.Z)(function*(w){var g;const _=w.auth,E=yield w.getIdToken(),R=yield Lt(w,Gn(_,{idToken:E}));ue(R?.users.length,_,"internal-error");const F=R.users[0];w._notifyReloadListener(F);const ae=null!==(g=F.providerUserInfo)&&void 0!==g&&g.length?z(F.providerUserInfo):[],Re=J(w.providerData,ae),Zt=!!w.isAnonymous&&!(w.email&&F.passwordHash||Re?.length),Un={uid:F.localId,displayName:F.displayName||null,photoURL:F.photoUrl||null,email:F.email||null,emailVerified:F.emailVerified||!1,phoneNumber:F.phoneNumber||null,tenantId:F.tenantId||null,providerData:Re,metadata:new Rt(F.createdAt,F.lastLoginAt),isAnonymous:Zt};Object.assign(w,Un)})).apply(this,arguments)}function Yt(){return(Yt=(0,m.Z)(function*(w){const g=(0,$.m9)(w);yield Pr(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function J(w,g){return[...w.filter(E=>!g.some(R=>R.providerId===E.providerId)),...g]}function z(w){return w.map(g=>{var{providerId:_}=g,E=(0,le._T)(g,["providerId"]);return{providerId:_,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function Y(){return(Y=(0,m.Z)(function*(w,g){const _=yield ro(w,{},(0,m.Z)(function*(){const E=(0,$.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:R,apiKey:F}=w.config,ae=ji(w,R,"/v1/token",`key=${F}`),Re=yield w._getAdditionalHeaders();return Re["Content-Type"]="application/x-www-form-urlencoded",$n.fetch()(ae,{method:"POST",headers:Re,body:E})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Q{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){ue(g.idToken,"internal-error"),ue(typeof g.idToken<"u","internal-error"),ue(typeof g.refreshToken<"u","internal-error");const _="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function _t(w){const g=mt(w);return ue(g,"internal-error"),ue(typeof g.exp<"u","internal-error"),ue(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,_)}getToken(g,_=!1){var E=this;return(0,m.Z)(function*(){return ue(!E.accessToken||E.refreshToken,g,"user-token-expired"),_||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(g,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,_){var E=this;return(0,m.Z)(function*(){const{accessToken:R,refreshToken:F,expiresIn:ae}=yield function H(w,g){return Y.apply(this,arguments)}(g,_);E.updateTokensAndExpiration(R,F,Number(ae))})()}updateTokensAndExpiration(g,_,E){this.refreshToken=_||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(g,_){const{refreshToken:E,accessToken:R,expirationTime:F}=_,ae=new Q;return E&&(ue("string"==typeof E,"internal-error",{appName:g}),ae.refreshToken=E),R&&(ue("string"==typeof R,"internal-error",{appName:g}),ae.accessToken=R),F&&(ue("number"==typeof F,"internal-error",{appName:g}),ae.expirationTime=F),ae}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Q,this.toJSON())}_performRefresh(){return fe("not implemented")}}function xe(w,g){ue("string"==typeof w||typeof w>"u","internal-error",{appName:g})}class qe{constructor(g){var{uid:_,auth:E,stsTokenManager:R}=g,F=(0,le._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Cr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=E,this.stsTokenManager=R,this.accessToken=R.accessToken,this.displayName=F.displayName||null,this.email=F.email||null,this.emailVerified=F.emailVerified||!1,this.phoneNumber=F.phoneNumber||null,this.photoURL=F.photoURL||null,this.isAnonymous=F.isAnonymous||!1,this.tenantId=F.tenantId||null,this.providerData=F.providerData?[...F.providerData]:[],this.metadata=new Rt(F.createdAt||void 0,F.lastLoginAt||void 0)}getIdToken(g){var _=this;return(0,m.Z)(function*(){const E=yield Lt(_,_.stsTokenManager.getToken(_.auth,g));return ue(E,_.auth,"internal-error"),_.accessToken!==E&&(_.accessToken=E,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),E})()}getIdTokenResult(g){return function An(w){return Mn.apply(this,arguments)}(this,g)}reload(){return function Jr(w){return Yt.apply(this,arguments)}(this)}_assign(g){this!==g&&(ue(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(_=>Object.assign({},_)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new qe(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,_=!1){var E=this;return(0,m.Z)(function*(){let R=!1;g.idToken&&g.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(g),R=!0),_&&(yield Pr(E)),yield E.auth._persistUserIfCurrent(E),R&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var g=this;return(0,m.Z)(function*(){const _=yield g.getIdToken();return yield Lt(g,function Si(w,g){return $i.apply(this,arguments)}(g.auth,{idToken:_})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,_){var E,R,F,ae,Re,et,yt,Zt;const Un=null!==(E=_.displayName)&&void 0!==E?E:void 0,js=null!==(R=_.email)&&void 0!==R?R:void 0,Yu=null!==(F=_.phoneNumber)&&void 0!==F?F:void 0,Jp=null!==(ae=_.photoURL)&&void 0!==ae?ae:void 0,Ib=null!==(Re=_.tenantId)&&void 0!==Re?Re:void 0,dd=null!==(et=_._redirectEventId)&&void 0!==et?et:void 0,$h=null!==(yt=_.createdAt)&&void 0!==yt?yt:void 0,Hh=null!==(Zt=_.lastLoginAt)&&void 0!==Zt?Zt:void 0,{uid:ey,emailVerified:Tb,isAnonymous:eg,providerData:tg,stsTokenManager:ty}=_;ue(ey&&ty,g,"internal-error");const Cb=Q.fromJSON(this.name,ty);ue("string"==typeof ey,g,"internal-error"),xe(Un,g.name),xe(js,g.name),ue("boolean"==typeof Tb,g,"internal-error"),ue("boolean"==typeof eg,g,"internal-error"),xe(Yu,g.name),xe(Jp,g.name),xe(Ib,g.name),xe(dd,g.name),xe($h,g.name),xe(Hh,g.name);const ng=new qe({uid:ey,auth:g,email:js,emailVerified:Tb,displayName:Un,isAnonymous:eg,photoURL:Jp,phoneNumber:Yu,tenantId:Ib,stsTokenManager:Cb,createdAt:$h,lastLoginAt:Hh});return tg&&Array.isArray(tg)&&(ng.providerData=tg.map(ny=>Object.assign({},ny))),dd&&(ng._redirectEventId=dd),ng}static _fromIdTokenResponse(g,_,E=!1){return(0,m.Z)(function*(){const R=new Q;R.updateFromServerResponse(_);const F=new qe({uid:_.localId,auth:g,stsTokenManager:R,isAnonymous:E});return yield Pr(F),F})()}}const pn=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,m.Z)(function*(){return!0})()}_set(_,E){var R=this;return(0,m.Z)(function*(){R.storage[_]=E})()}_get(_){var E=this;return(0,m.Z)(function*(){const R=E.storage[_];return void 0===R?null:R})()}_remove(_){var E=this;return(0,m.Z)(function*(){delete E.storage[_]})()}_addListener(_,E){}_removeListener(_,E){}}return w.type="NONE",w})();function fn(w,g,_){return`firebase:${w}:${g}:${_}`}class nr{constructor(g,_,E){this.persistence=g,this.auth=_,this.userKey=E;const{config:R,name:F}=this.auth;this.fullUserKey=fn(this.userKey,R.apiKey,F),this.fullPersistenceKey=fn("persistence",R.apiKey,F),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,m.Z)(function*(){const _=yield g.persistence._get(g.fullUserKey);return _?qe._fromJSON(g.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var _=this;return(0,m.Z)(function*(){if(_.persistence===g)return;const E=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=g,E?_.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,_,E="authUser"){return(0,m.Z)(function*(){if(!_.length)return new nr(ie(pn),g,E);const R=(yield Promise.all(_.map(function(){var yt=(0,m.Z)(function*(Zt){if(yield Zt._isAvailable())return Zt});return function(Zt){return yt.apply(this,arguments)}}()))).filter(yt=>yt);let F=R[0]||ie(pn);const ae=fn(E,g.config.apiKey,g.name);let Re=null;for(const yt of _)try{const Zt=yield yt._get(ae);if(Zt){const Un=qe._fromJSON(g,Zt);yt!==F&&(Re=Un),F=yt;break}}catch{}const et=R.filter(yt=>yt._shouldAllowMigration);return F._shouldAllowMigration&&et.length?(F=et[0],Re&&(yield F._set(ae,Re.toJSON())),yield Promise.all(_.map(function(){var yt=(0,m.Z)(function*(Zt){if(Zt!==F)try{yield Zt._remove(ae)}catch{}});return function(Zt){return yt.apply(this,arguments)}}())),new nr(F,g,E)):new nr(F,g,E)})()}}function se(w){const g=w.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Ye(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(G(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(St(g))return"Blackberry";if(Ue(g))return"Webos";if(W(g))return"Safari";if((g.includes("chrome/")||Te(g))&&!g.includes("edge/"))return"Chrome";if(bt(g))return"Android";{const E=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function G(w=(0,$.z$)()){return/firefox\//i.test(w)}function W(w=(0,$.z$)()){const g=w.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function Te(w=(0,$.z$)()){return/crios\//i.test(w)}function Ye(w=(0,$.z$)()){return/iemobile/i.test(w)}function bt(w=(0,$.z$)()){return/android/i.test(w)}function St(w=(0,$.z$)()){return/blackberry/i.test(w)}function Ue(w=(0,$.z$)()){return/webos/i.test(w)}function lt(w=(0,$.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function Jt(w=(0,$.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function wn(w=(0,$.z$)()){return lt(w)||bt(w)||Ue(w)||St(w)||/windows phone/i.test(w)||Ye(w)}function Rn(w,g=[]){let _;switch(w){case"Browser":_=se((0,$.z$)());break;case"Worker":_=`${se((0,$.z$)())}-${w}`;break;default:_=w}const E=g.length?g.join(","):"FirebaseCore-web";return`${_}/JsCore/${P.SDK_VERSION}/${E}`}class io{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,_){const E=F=>new Promise((ae,Re)=>{try{ae(g(F))}catch(et){Re(et)}});E.onAbort=_,this.queue.push(E);const R=this.queue.length-1;return()=>{this.queue[R]=()=>Promise.resolve()}}runMiddleware(g){var _=this;return(0,m.Z)(function*(){var E;if(_.auth.currentUser===g)return;const R=[];try{for(const F of _.queue)yield F(g),F.onAbort&&R.push(F.onAbort)}catch(F){R.reverse();for(const ae of R)try{ae()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:null===(E=F)||void 0===E?void 0:E.message})}})()}}class so{constructor(g,_,E){this.app=g,this.heartbeatServiceProvider=_,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new oo(this),this.idTokenSubscription=new oo(this),this.beforeStateQueue=new io(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ct,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(g,_){var E=this;return _&&(this._popupRedirectResolver=ie(_)),this._initializationPromise=this.queue((0,m.Z)(function*(){var R,F;if(!E._deleted&&(E.persistenceManager=yield nr.create(E,g),!E._deleted)){if(null!==(R=E._popupRedirectResolver)&&void 0!==R&&R._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(_),E.lastNotifiedUid=(null===(F=E.currentUser)||void 0===F?void 0:F.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,m.Z)(function*(){if(g._deleted)return;const _=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||_){if(g.currentUser&&_&&g.currentUser.uid===_.uid)return g._currentUser._assign(_),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(_,!0)}})()}initializeCurrentUser(g){var _=this;return(0,m.Z)(function*(){var E;const R=yield _.assertedPersistence.getCurrentUser();let F=R,ae=!1;if(g&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const Re=null===(E=_.redirectUser)||void 0===E?void 0:E._redirectEventId,et=F?._redirectEventId,yt=yield _.tryRedirectSignIn(g);(!Re||Re===et)&&yt?.user&&(F=yt.user,ae=!0)}if(!F)return _.directlySetCurrentUser(null);if(!F._redirectEventId){if(ae)try{yield _.beforeStateQueue.runMiddleware(F)}catch(Re){F=R,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(Re))}return F?_.reloadAndSetCurrentUserOrClear(F):_.directlySetCurrentUser(null)}return ue(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===F._redirectEventId?_.directlySetCurrentUser(F):_.reloadAndSetCurrentUserOrClear(F)})()}tryRedirectSignIn(g){var _=this;return(0,m.Z)(function*(){let E=null;try{E=yield _._popupRedirectResolver._completeRedirectFn(_,g,!0)}catch{yield _._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(g){var _=this;return(0,m.Z)(function*(){var E;try{yield Pr(g)}catch(R){if("auth/network-request-failed"!==(null===(E=R)||void 0===E?void 0:E.code))return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function qt(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var g=this;return(0,m.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var _=this;return(0,m.Z)(function*(){const E=g?(0,$.m9)(g):null;return E&&ue(E.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(E&&E._clone(_))})()}_updateCurrentUser(g,_=!1){var E=this;return(0,m.Z)(function*(){if(!E._deleted)return g&&ue(E.tenantId===g.tenantId,E,"tenant-id-mismatch"),_||(yield E.beforeStateQueue.runMiddleware(g)),E.queue((0,m.Z)(function*(){yield E.directlySetCurrentUser(g),E.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,m.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var _=this;return this.queue((0,m.Z)(function*(){yield _.assertedPersistence.setPersistence(ie(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new $.LL("auth","Firebase",g())}onAuthStateChanged(g,_,E){return this.registerStateListener(this.authStateSubscription,g,_,E)}beforeAuthStateChanged(g,_){return this.beforeStateQueue.pushCallback(g,_)}onIdTokenChanged(g,_,E){return this.registerStateListener(this.idTokenSubscription,g,_,E)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,_){var E=this;return(0,m.Z)(function*(){const R=yield E.getOrInitRedirectPersistenceManager(_);return null===g?R.removeCurrentUser():R.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var _=this;return(0,m.Z)(function*(){if(!_.redirectPersistenceManager){const E=g&&ie(g)||_._popupRedirectResolver;ue(E,_,"argument-error"),_.redirectPersistenceManager=yield nr.create(_,[ie(E._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(g){var _=this;return(0,m.Z)(function*(){var E,R;return _._isInitialized&&(yield _.queue((0,m.Z)(function*(){}))),(null===(E=_._currentUser)||void 0===E?void 0:E._redirectEventId)===g?_._currentUser:(null===(R=_.redirectUser)||void 0===R?void 0:R._redirectEventId)===g?_.redirectUser:null})()}_persistUserIfCurrent(g){var _=this;return(0,m.Z)(function*(){if(g===_.currentUser)return _.queue((0,m.Z)(function*(){return _.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(_=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,_,E,R){if(this._deleted)return()=>{};const F="function"==typeof _?_:_.next.bind(_),ae=this._isInitialized?Promise.resolve():this._initializationPromise;return ue(ae,this,"internal-error"),ae.then(()=>F(this.currentUser)),"function"==typeof _?g.addObserver(_,E,R):g.addObserver(_)}directlySetCurrentUser(g){var _=this;return(0,m.Z)(function*(){_.currentUser&&_.currentUser!==g&&_._currentUser._stopProactiveRefresh(),g&&_.isProactiveRefreshEnabled&&g._startProactiveRefresh(),_.currentUser=g,g?yield _.assertedPersistence.setCurrentUser(g):yield _.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Rn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,m.Z)(function*(){var _;const E={"X-Client-Version":g.clientVersion};g.app.options.appId&&(E["X-Firebase-gmpid"]=g.app.options.appId);const R=yield null===(_=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return R&&(E["X-Firebase-Client"]=R),E})()}}function Et(w){return(0,$.m9)(w)}class oo{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,$.ne)(_=>this.observer=_)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Vo(w,g,_){const E=Et(w);ue(E._canInitEmulator,E,"emulator-config-failed"),ue(/^https?:\/\//.test(g),E,"invalid-emulator-scheme");const R=!!_?.disableWarnings,F=xu(g),{host:ae,port:Re}=function ls(w){const g=xu(w),_=/(\/\/)?([^?#/]+)/.exec(w.substr(g.length));if(!_)return{host:"",port:null};const E=_[2].split("@").pop()||"",R=/^(\[[^\]]+\])(:|$)/.exec(E);if(R){const F=R[1];return{host:F,port:Yn(E.substr(F.length+1))}}{const[F,ae]=E.split(":");return{host:F,port:Yn(ae)}}}(g);E.config.emulator={url:`${F}//${ae}${null===Re?"":`:${Re}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:ae,port:Re,protocol:F.replace(":",""),options:Object.freeze({disableWarnings:R})}),R||function ao(){function w(){const g=document.createElement("p"),_=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function xu(w){const g=w.indexOf(":");return g<0?"":w.substr(0,g+1)}function Yn(w){if(!w)return null;const g=Number(w);return isNaN(g)?null:g}class ei{constructor(g,_){this.providerId=g,this.signInMethod=_}toJSON(){return fe("not implemented")}_getIdTokenResponse(g){return fe("not implemented")}_linkToIdToken(g,_){return fe("not implemented")}_getReauthenticationResolver(g){return fe("not implemented")}}function ui(w,g){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,m.Z)(function*(w,g){return Ht(w,"POST","/v1/accounts:resetPassword",Kt(w,g))})).apply(this,arguments)}function Il(w,g){return bn.apply(this,arguments)}function bn(){return(bn=(0,m.Z)(function*(w,g){return Ht(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Eh(w,g){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,m.Z)(function*(w,g){return Ht(w,"POST","/v1/accounts:update",Kt(w,g))})).apply(this,arguments)}function uo(){return(uo=(0,m.Z)(function*(w,g){return Nn(w,"POST","/v1/accounts:signInWithPassword",Kt(w,g))})).apply(this,arguments)}function lo(w,g){return co.apply(this,arguments)}function co(){return(co=(0,m.Z)(function*(w,g){return Ht(w,"POST","/v1/accounts:sendOobCode",Kt(w,g))})).apply(this,arguments)}function cs(w,g){return dr.apply(this,arguments)}function dr(){return(dr=(0,m.Z)(function*(w,g){return lo(w,g)})).apply(this,arguments)}function Ih(w,g){return rr.apply(this,arguments)}function rr(){return(rr=(0,m.Z)(function*(w,g){return lo(w,g)})).apply(this,arguments)}function li(w,g){return jo.apply(this,arguments)}function jo(){return(jo=(0,m.Z)(function*(w,g){return lo(w,g)})).apply(this,arguments)}function Tl(w,g){return La.apply(this,arguments)}function La(){return(La=(0,m.Z)(function*(w,g){return lo(w,g)})).apply(this,arguments)}function Cl(){return(Cl=(0,m.Z)(function*(w,g){return Nn(w,"POST","/v1/accounts:signInWithEmailLink",Kt(w,g))})).apply(this,arguments)}function Dl(){return(Dl=(0,m.Z)(function*(w,g){return Nn(w,"POST","/v1/accounts:signInWithEmailLink",Kt(w,g))})).apply(this,arguments)}class Fa extends ei{constructor(g,_,E,R=null){super("password",E),this._email=g,this._password=_,this._tenantId=R}static _fromEmailAndPassword(g,_){return new Fa(g,_,"password")}static _fromEmailAndCode(g,_,E=null){return new Fa(g,_,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(g){var _=this;return(0,m.Z)(function*(){switch(_.signInMethod){case"password":return function Oa(w,g){return uo.apply(this,arguments)}(g,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function ti(w,g){return Cl.apply(this,arguments)}(g,{email:_._email,oobCode:_._password});default:st(g,"internal-error")}})()}_linkToIdToken(g,_){var E=this;return(0,m.Z)(function*(){switch(E.signInMethod){case"password":return Il(g,{idToken:_,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Pp(w,g){return Dl.apply(this,arguments)}(g,{idToken:_,email:E._email,oobCode:E._password});default:st(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function ho(w,g){return ci.apply(this,arguments)}function ci(){return(ci=(0,m.Z)(function*(w,g){return Nn(w,"POST","/v1/accounts:signInWithIdp",Kt(w,g))})).apply(this,arguments)}class ds extends ei{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const _=new ds(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(_.idToken=g.idToken),g.accessToken&&(_.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(_.nonce=g.nonce),g.pendingToken&&(_.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(_.accessToken=g.oauthToken,_.secret=g.oauthTokenSecret):st("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:R}=_,F=(0,le._T)(_,["providerId","signInMethod"]);if(!E||!R)return null;const ae=new ds(E,R);return ae.idToken=F.idToken||void 0,ae.accessToken=F.accessToken||void 0,ae.secret=F.secret,ae.nonce=F.nonce,ae.pendingToken=F.pendingToken||null,ae}_getIdTokenResponse(g){return ho(g,this.buildRequest())}_linkToIdToken(g,_){const E=this.buildRequest();return E.idToken=_,ho(g,E)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,ho(g,_)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),g.postBody=(0,$.xO)(_)}return g}}function Lp(w,g){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,m.Z)(function*(w,g){return Ht(w,"POST","/v1/accounts:sendVerificationCode",Kt(w,g))})).apply(this,arguments)}function Ua(){return(Ua=(0,m.Z)(function*(w,g){return Nn(w,"POST","/v1/accounts:signInWithPhoneNumber",Kt(w,g))})).apply(this,arguments)}function Lc(){return(Lc=(0,m.Z)(function*(w,g){const _=yield Nn(w,"POST","/v1/accounts:signInWithPhoneNumber",Kt(w,g));if(_.temporaryProof)throw Hn(w,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Up={USER_NOT_FOUND:"user-not-found"};function Fc(){return(Fc=(0,m.Z)(function*(w,g){return Nn(w,"POST","/v1/accounts:signInWithPhoneNumber",Kt(w,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Up)})).apply(this,arguments)}class Ho extends ei{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,_){return new Ho({verificationId:g,verificationCode:_})}static _fromTokenResponse(g,_){return new Ho({phoneNumber:g,temporaryProof:_})}_getIdTokenResponse(g){return function Fp(w,g){return Ua.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,_){return function $o(w,g){return Lc.apply(this,arguments)}(g,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function Bp(w,g){return Fc.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:_,verificationId:E,verificationCode:R}=this.params;return g&&_?{temporaryProof:g,phoneNumber:_}:{sessionInfo:E,code:R}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:_,verificationCode:E,phoneNumber:R,temporaryProof:F}=g;return E||_||R||F?new Ho({verificationId:_,verificationCode:E,phoneNumber:R,temporaryProof:F}):null}}class Go{constructor(g){var _,E,R,F,ae,Re;const et=(0,$.zd)((0,$.pd)(g)),yt=null!==(_=et.apiKey)&&void 0!==_?_:null,Zt=null!==(E=et.oobCode)&&void 0!==E?E:null,Un=function Uc(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(R=et.mode)&&void 0!==R?R:null);ue(yt&&Zt&&Un,"argument-error"),this.apiKey=yt,this.operation=Un,this.code=Zt,this.continueUrl=null!==(F=et.continueUrl)&&void 0!==F?F:null,this.languageCode=null!==(ae=et.languageCode)&&void 0!==ae?ae:null,this.tenantId=null!==(Re=et.tenantId)&&void 0!==Re?Re:null}static parseLink(g){const _=function Bc(w){const g=(0,$.zd)((0,$.pd)(w)).link,_=g?(0,$.zd)((0,$.pd)(g)).deep_link_id:null,E=(0,$.zd)((0,$.pd)(w)).deep_link_id;return(E?(0,$.zd)((0,$.pd)(E)).link:null)||E||_||g||w}(g);try{return new Go(_)}catch{return null}}}let Ru=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(_,E){return Fa._fromEmailAndPassword(_,E)}static credentialWithLink(_,E){const R=Go.parseLink(E);return ue(R,"argument-error"),Fa._fromEmailAndCode(_,R.code,R.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class Dr{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class zo extends Dr{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class xs extends zo{static credentialFromJSON(g){const _="string"==typeof g?JSON.parse(g):g;return ue("providerId"in _&&"signInMethod"in _,"argument-error"),ds._fromParams(_)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return ue(g.idToken||g.accessToken,"argument-error"),ds._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return xs.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return xs.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:E,oauthTokenSecret:R,pendingToken:F,nonce:ae,providerId:Re}=g;if(!E&&!R&&!_&&!F||!Re)return null;try{return new xs(Re)._credential({idToken:_,accessToken:E,nonce:ae,pendingToken:F})}catch{return null}}}let Vc=(()=>{class w extends zo{constructor(){super("facebook.com")}static credential(_){return ds._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),ku=(()=>{class w extends zo{constructor(){super("google.com"),this.addScope("profile")}static credential(_,E){return ds._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:E})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:E,oauthAccessToken:R}=_;if(!E&&!R)return null;try{return w.credential(E,R)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),Sl=(()=>{class w extends zo{constructor(){super("github.com")}static credential(_){return ds._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class Wo extends ei{constructor(g,_){super(g,g),this.pendingToken=_}_getIdTokenResponse(g){return ho(g,this.buildRequest())}_linkToIdToken(g,_){const E=this.buildRequest();return E.idToken=_,ho(g,E)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,ho(g,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:R,pendingToken:F}=_;return E&&R&&F&&E===R?new Wo(E,F):null}static _create(g,_){return new Wo(g,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class di extends Dr{constructor(g){ue(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return di.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return di.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const _=Wo.fromJSON(g);return ue(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:_,providerId:E}=g;if(!_||!E)return null;try{return Wo._create(E,_)}catch{return null}}}let hs=(()=>{class w extends zo{constructor(){super("twitter.com")}static credential(_,E){return ds._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:E})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:E,oauthTokenSecret:R}=_;if(!E||!R)return null;try{return w.credential(E,R)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function ni(w,g){return fo.apply(this,arguments)}function fo(){return(fo=(0,m.Z)(function*(w,g){return Nn(w,"POST","/v1/accounts:signUp",Kt(w,g))})).apply(this,arguments)}class hi{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,_,E,R=!1){return(0,m.Z)(function*(){const F=yield qe._fromIdTokenResponse(g,E,R),ae=qo(E);return new hi({user:F,providerId:ae,_tokenResponse:E,operationType:_})})()}static _forOperation(g,_,E){return(0,m.Z)(function*(){yield g._updateTokensIfNecessary(E,!0);const R=qo(E);return new hi({user:g,providerId:R,_tokenResponse:E,operationType:_})})()}}function qo(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function jp(w){return Al.apply(this,arguments)}function Al(){return(Al=(0,m.Z)(function*(w){var g;const _=Et(w);if(yield _._initializationPromise,null!==(g=_.currentUser)&&void 0!==g&&g.isAnonymous)return new hi({user:_.currentUser,providerId:null,operationType:"signIn"});const E=yield ni(_,{returnSecureToken:!0}),R=yield hi._fromIdTokenResponse(_,"signIn",E,!0);return yield _._updateCurrentUser(R.user),R})).apply(this,arguments)}class Fn extends $.ZR{constructor(g,_,E,R){var F;super(_.code,_.message),this.operationType=E,this.user=R,Object.setPrototypeOf(this,Fn.prototype),this.customData={appName:g.name,tenantId:null!==(F=g.tenantId)&&void 0!==F?F:void 0,_serverResponse:_.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(g,_,E,R){return new Fn(g,_,E,R)}}function $c(w,g,_,E){return("reauthenticate"===g?_._getReauthenticationResolver(w):_._getIdTokenResponse(w)).catch(F=>{throw"auth/multi-factor-auth-required"===F.code?Fn._fromErrorAndOperation(w,F,g,E):F})}function Th(w){return new Set(w.map(({providerId:g})=>g).filter(g=>!!g))}function Ai(w,g){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,m.Z)(function*(w,g){const _=(0,$.m9)(w);yield Gi(!0,_,g);const{providerUserInfo:E}=yield ot(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[g]}),R=Th(E||[]);return _.providerData=_.providerData.filter(F=>R.has(F.providerId)),R.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function Nu(w,g){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,m.Z)(function*(w,g,_=!1){const E=yield Lt(w,g._linkToIdToken(w.auth,yield w.getIdToken()),_);return hi._forOperation(w,"link",E)})).apply(this,arguments)}function Gi(w,g,_){return cn.apply(this,arguments)}function cn(){return(cn=(0,m.Z)(function*(w,g,_){yield Pr(g);const R=!1===w?"provider-already-linked":"no-such-provider";ue(Th(g.providerData).has(_)===w,g.auth,R)})).apply(this,arguments)}function Pu(w,g){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,m.Z)(function*(w,g,_=!1){var E;const{auth:R}=w,F="reauthenticate";try{const ae=yield Lt(w,$c(R,F,g,w),_);ue(ae.idToken,R,"internal-error");const Re=mt(ae.idToken);ue(Re,R,"internal-error");const{sub:et}=Re;return ue(w.uid===et,R,"user-mismatch"),hi._forOperation(w,F,ae)}catch(ae){throw"auth/user-not-found"===(null===(E=ae)||void 0===E?void 0:E.code)&&st(R,"user-mismatch"),ae}})).apply(this,arguments)}function Ml(w,g){return fi.apply(this,arguments)}function fi(){return(fi=(0,m.Z)(function*(w,g,_=!1){const E="signIn",R=yield $c(w,E,g),F=yield hi._fromIdTokenResponse(w,E,R);return _||(yield w._updateCurrentUser(F.user)),F})).apply(this,arguments)}function Ba(w,g){return zn.apply(this,arguments)}function zn(){return(zn=(0,m.Z)(function*(w,g){return Ml(Et(w),g)})).apply(this,arguments)}function Ot(w,g){return Va.apply(this,arguments)}function Va(){return(Va=(0,m.Z)(function*(w,g){const _=(0,$.m9)(w);return yield Gi(!1,_,g.providerId),Nu(_,g)})).apply(this,arguments)}function $p(w,g){return ja.apply(this,arguments)}function ja(){return(ja=(0,m.Z)(function*(w,g){return Pu((0,$.m9)(w),g)})).apply(this,arguments)}function Hc(w,g){return $a.apply(this,arguments)}function $a(){return($a=(0,m.Z)(function*(w,g){return Nn(w,"POST","/v1/accounts:signInWithCustomToken",Kt(w,g))})).apply(this,arguments)}function po(w,g){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,m.Z)(function*(w,g){const _=Et(w),E=yield Hc(_,{token:g,returnSecureToken:!0}),R=yield hi._fromIdTokenResponse(_,"signIn",E);return yield _._updateCurrentUser(R.user),R})).apply(this,arguments)}class Zo{constructor(g,_){this.factorId=g,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(g,_){return"phoneInfo"in _?Pe._fromServerResponse(g,_):st(g,"internal-error")}}class Pe extends Zo{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,_){return new Pe(_)}}function Qt(w,g,_){var E;ue((null===(E=_.url)||void 0===E?void 0:E.length)>0,w,"invalid-continue-uri"),ue(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),g.continueUrl=_.url,g.dynamicLinkDomain=_.dynamicLinkDomain,g.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(ue(_.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),g.iOSBundleId=_.iOS.bundleId),_.android&&(ue(_.android.packageName.length>0,w,"missing-android-pkg-name"),g.androidInstallApp=_.android.installApp,g.androidMinimumVersionCode=_.android.minimumVersion,g.androidPackageName=_.android.packageName)}function Hp(w,g,_){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,m.Z)(function*(w,g,_){const E=(0,$.m9)(w),R={requestType:"PASSWORD_RESET",email:g};_&&Qt(E,R,_),yield Ih(E,R)})).apply(this,arguments)}function ir(w,g,_){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,m.Z)(function*(w,g,_){yield ui((0,$.m9)(w),{oobCode:g,newPassword:_})})).apply(this,arguments)}function Ou(w,g){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,m.Z)(function*(w,g){yield Eh((0,$.m9)(w),{oobCode:g})})).apply(this,arguments)}function Lu(w,g){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,m.Z)(function*(w,g){const _=(0,$.m9)(w),E=yield ui(_,{oobCode:g}),R=E.requestType;switch(ue(R,_,"internal-error"),R){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ue(E.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ue(E.mfaInfo,_,"internal-error");default:ue(E.email,_,"internal-error")}let F=null;return E.mfaInfo&&(F=Zo._fromServerResponse(Et(_),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:F},operation:R}})).apply(this,arguments)}function Ch(w,g){return za.apply(this,arguments)}function za(){return(za=(0,m.Z)(function*(w,g){const{data:_}=yield Lu((0,$.m9)(w),g);return _.email})).apply(this,arguments)}function Gp(w,g,_){return fs.apply(this,arguments)}function fs(){return(fs=(0,m.Z)(function*(w,g,_){const E=Et(w),R=yield ni(E,{returnSecureToken:!0,email:g,password:_}),F=yield hi._fromIdTokenResponse(E,"signIn",R);return yield E._updateCurrentUser(F.user),F})).apply(this,arguments)}function sr(w,g,_){return Ba((0,$.m9)(w),Ru.credential(g,_))}function zi(w,g,_){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,m.Z)(function*(w,g,_){const E=(0,$.m9)(w),R={requestType:"EMAIL_SIGNIN",email:g};ue(_.handleCodeInApp,E,"argument-error"),_&&Qt(E,R,_),yield li(E,R)})).apply(this,arguments)}function qa(w,g){return"EMAIL_SIGNIN"===Go.parseLink(g)?.operation}function ps(w,g,_){return Gc.apply(this,arguments)}function Gc(){return(Gc=(0,m.Z)(function*(w,g,_){const E=(0,$.m9)(w),R=Ru.credentialWithLink(g,_||je());return ue(R._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Ba(E,R)})).apply(this,arguments)}function xl(w,g){return zc.apply(this,arguments)}function zc(){return(zc=(0,m.Z)(function*(w,g){return Ht(w,"POST","/v1/accounts:createAuthUri",Kt(w,g))})).apply(this,arguments)}function Dh(w,g){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,m.Z)(function*(w,g){const E={identifier:g,continueUri:$e()?je():"http://localhost"},{signinMethods:R}=yield xl((0,$.m9)(w),E);return R||[]})).apply(this,arguments)}function Rl(w,g){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,m.Z)(function*(w,g){const _=(0,$.m9)(w),R={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};g&&Qt(_.auth,R,g);const{email:F}=yield cs(_.auth,R);F!==w.email&&(yield w.reload())})).apply(this,arguments)}function kl(w,g,_){return Za.apply(this,arguments)}function Za(){return(Za=(0,m.Z)(function*(w,g,_){const E=(0,$.m9)(w),F={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:g};_&&Qt(E.auth,F,_);const{email:ae}=yield Tl(E.auth,F);ae!==w.email&&(yield w.reload())})).apply(this,arguments)}function Wc(w,g){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,m.Z)(function*(w,g){return Ht(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Sh(w,g){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,m.Z)(function*(w,{displayName:g,photoURL:_}){if(void 0===g&&void 0===_)return;const E=(0,$.m9)(w),F={idToken:yield E.getIdToken(),displayName:g,photoUrl:_,returnSecureToken:!0},ae=yield Lt(E,Wc(E.auth,F));E.displayName=ae.displayName||null,E.photoURL=ae.photoUrl||null;const Re=E.providerData.find(({providerId:et})=>"password"===et);Re&&(Re.displayName=E.displayName,Re.photoURL=E.photoURL),yield E._updateTokensIfNecessary(ae)})).apply(this,arguments)}function Ah(w,g){return ks((0,$.m9)(w),g,null)}function qc(w,g){return ks((0,$.m9)(w),null,g)}function ks(w,g,_){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,m.Z)(function*(w,g,_){const{auth:E}=w,F={idToken:yield w.getIdToken(),returnSecureToken:!0};g&&(F.email=g),_&&(F.password=_);const ae=yield Lt(w,Il(E,F));yield w._updateTokensIfNecessary(ae,!0)})).apply(this,arguments)}class On{constructor(g,_,E={}){this.isNewUser=g,this.providerId=_,this.profile=E}}class gs extends On{constructor(g,_,E,R){super(g,_,E),this.username=R}}class Ln extends On{constructor(g,_){super(g,"facebook.com",_)}}class Zc extends gs{constructor(g,_){super(g,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class Nl extends On{constructor(g,_){super(g,"google.com",_)}}class Mh extends gs{constructor(g,_,E){super(g,"twitter.com",_,E)}}function Pl(w){const{user:g,_tokenResponse:_}=w;return g.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Kc(w){var g,_;if(!w)return null;const{providerId:E}=w,R=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},F=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!E&&w?.idToken){const ae=null===(_=null===(g=mt(w.idToken))||void 0===g?void 0:g.firebase)||void 0===_?void 0:_.sign_in_provider;if(ae)return new On(F,"anonymous"!==ae&&"custom"!==ae?ae:null)}if(!E)return null;switch(E){case"facebook.com":return new Ln(F,R);case"github.com":return new Zc(F,R);case"google.com":return new Nl(F,R);case"twitter.com":return new Mh(F,R,w.screenName||null);case"custom":case"anonymous":return new On(F,null);default:return new On(F,E,R)}}(_)}class pi{constructor(g,_){this.type=g,this.credential=_}static _fromIdtoken(g){return new pi("enroll",g)}static _fromMfaPendingCredential(g){return new pi("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var _,E;if(g?.multiFactorSession){if(null!==(_=g.multiFactorSession)&&void 0!==_&&_.pendingCredential)return pi._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(E=g.multiFactorSession)&&void 0!==E&&E.idToken)return pi._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Fl{constructor(g,_,E){this.session=g,this.hints=_,this.signInResolver=E}static _fromError(g,_){const E=Et(g),R=_.customData._serverResponse,F=(R.mfaInfo||[]).map(Re=>Zo._fromServerResponse(E,Re));ue(R.mfaPendingCredential,E,"internal-error");const ae=pi._fromMfaPendingCredential(R.mfaPendingCredential);return new Fl(ae,F,function(){var Re=(0,m.Z)(function*(et){const yt=yield et._process(E,ae);delete R.mfaInfo,delete R.mfaPendingCredential;const Zt=Object.assign(Object.assign({},R),{idToken:yt.idToken,refreshToken:yt.refreshToken});switch(_.operationType){case"signIn":const Un=yield hi._fromIdTokenResponse(E,_.operationType,Zt);return yield E._updateCurrentUser(Un.user),Un;case"reauthenticate":return ue(_.user,E,"internal-error"),hi._forOperation(_.user,_.operationType,Zt);default:st(E,"internal-error")}});return function(et){return Re.apply(this,arguments)}}())}resolveSignIn(g){var _=this;return(0,m.Z)(function*(){return _.signInResolver(g)})()}}function Jc(w,g){var _;const E=(0,$.m9)(w),R=g;return ue(g.customData.operationType,E,"argument-error"),ue(null===(_=R.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,E,"argument-error"),Fl._fromError(E,R)}function Wn(w,g){return Ht(w,"POST","/v2/accounts/mfaEnrollment:start",Kt(w,g))}class Bu{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(E=>Zo._fromServerResponse(g.auth,E)))})}static _fromUser(g){return new Bu(g)}getSession(){var g=this;return(0,m.Z)(function*(){return pi._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,_){var E=this;return(0,m.Z)(function*(){const R=g,F=yield E.getSession(),ae=yield Lt(E.user,R._process(E.user.auth,F,_));return yield E.user._updateTokensIfNecessary(ae),E.user.reload()})()}unenroll(g){var _=this;return(0,m.Z)(function*(){var E;const R="string"==typeof g?g:g.uid,F=yield _.user.getIdToken(),ae=yield Lt(_.user,function Uu(w,g){return Ht(w,"POST","/v2/accounts/mfaEnrollment:withdraw",Kt(w,g))}(_.user.auth,{idToken:F,mfaEnrollmentId:R}));_.enrolledFactors=_.enrolledFactors.filter(({uid:Re})=>Re!==R),yield _.user._updateTokensIfNecessary(ae);try{yield _.user.reload()}catch(Re){if("auth/user-token-expired"!==(null===(E=Re)||void 0===E?void 0:E.code))throw Re}})()}}const xh=new WeakMap;function Qa(w){const g=(0,$.m9)(w);return xh.has(g)||xh.set(g,Bu._fromUser(g)),xh.get(g)}const ms="__sak";class Xa{constructor(g,_){this.storageRetriever=g,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(ms,"1"),this.storage.removeItem(ms),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,_){return this.storage.setItem(g,JSON.stringify(_)),Promise.resolve()}_get(g){const _=this.storage.getItem(g);return Promise.resolve(_?JSON.parse(_):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const or=(()=>{class w extends Xa{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,E)=>this.onStorageEvent(_,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ul(){const w=(0,$.z$)();return W(w)||lt(w)}()&&function us(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=wn(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const E of Object.keys(this.listeners)){const R=this.storage.getItem(E),F=this.localCache[E];R!==F&&_(E,F,R)}}onStorageEvent(_,E=!1){if(!_.key)return void this.forAllChangedKeys((Re,et,yt)=>{this.notifyListeners(Re,yt)});const R=_.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Re=this.storage.getItem(R);if(_.newValue!==Re)null!==_.newValue?this.storage.setItem(R,_.newValue):this.storage.removeItem(R);else if(this.localCache[R]===_.newValue&&!E)return}const F=()=>{const Re=this.storage.getItem(R);!E&&this.localCache[R]===Re||this.notifyListeners(R,Re)},ae=this.storage.getItem(R);!function jt(){return(0,$.w1)()&&10===document.documentMode}()||ae===_.newValue||_.newValue===_.oldValue?F():setTimeout(F,10)}notifyListeners(_,E){this.localCache[_]=E;const R=this.listeners[_];if(R)for(const F of Array.from(R))F(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,E,R)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:E,newValue:R}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(E)}_removeListener(_,E){this.listeners[_]&&(this.listeners[_].delete(E),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,E){var R=()=>super._set,F=this;return(0,m.Z)(function*(){yield R().call(F,_,E),F.localCache[_]=JSON.stringify(E)})()}_get(_){var E=()=>super._get,R=this;return(0,m.Z)(function*(){const F=yield E().call(R,_);return R.localCache[_]=JSON.stringify(F),F})()}_remove(_){var E=()=>super._remove,R=this;return(0,m.Z)(function*(){yield E().call(R,_),delete R.localCache[_]})()}}return w.type="LOCAL",w})(),Ps=(()=>{class w extends Xa{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,E){}_removeListener(_,E){}}return w.type="SESSION",w})();let eu=(()=>{class w{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const E=this.receivers.find(F=>F.isListeningto(_));if(E)return E;const R=new w(_);return this.receivers.push(R),R}isListeningto(_){return this.eventTarget===_}handleEvent(_){var E=this;return(0,m.Z)(function*(){const R=_,{eventId:F,eventType:ae,data:Re}=R.data,et=E.handlersMap[ae];if(!et?.size)return;R.ports[0].postMessage({status:"ack",eventId:F,eventType:ae});const yt=Array.from(et).map(function(){var Un=(0,m.Z)(function*(js){return js(R.origin,Re)});return function(js){return Un.apply(this,arguments)}}()),Zt=yield function Bl(w){return Promise.all(w.map(function(){var g=(0,m.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(E){return{fulfilled:!1,reason:E}}});return function(_){return g.apply(this,arguments)}}()))}(yt);R.ports[0].postMessage({status:"done",eventId:F,eventType:ae,response:Zt})})()}_subscribe(_,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(E)}_unsubscribe(_,E){this.handlersMap[_]&&E&&this.handlersMap[_].delete(E),(!E||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function ra(w="",g=10){let _="";for(let E=0;E<g;E++)_+=Math.floor(10*Math.random());return w+_}class Nh{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,_,E=50){var R=this;return(0,m.Z)(function*(){const F=typeof MessageChannel<"u"?new MessageChannel:null;if(!F)throw new Error("connection_unavailable");let ae,Re;return new Promise((et,yt)=>{const Zt=ra("",20);F.port1.start();const Un=setTimeout(()=>{yt(new Error("unsupported_event"))},E);Re={messageChannel:F,onMessage(js){const Yu=js;if(Yu.data.eventId===Zt)switch(Yu.data.status){case"ack":clearTimeout(Un),ae=setTimeout(()=>{yt(new Error("timeout"))},3e3);break;case"done":clearTimeout(ae),et(Yu.data.response);break;default:clearTimeout(Un),clearTimeout(ae),yt(new Error("invalid_response"))}}},R.handlers.add(Re),F.port1.addEventListener("message",Re.onMessage),R.target.postMessage({eventType:g,eventId:Zt,data:_},[F.port2])}).finally(()=>{Re&&R.removeMessageHandler(Re)})})()}}function qn(){return window}function ri(){return typeof qn().WorkerGlobalScope<"u"&&"function"==typeof qn().importScripts}function _s(){return(_s=(0,m.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const tu="firebaseLocalStorageDb",nu="firebaseLocalStorage",ia="fbase_key";class mo{constructor(g){this.request=g}toPromise(){return new Promise((g,_)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function sa(w,g){return w.transaction([nu],g?"readwrite":"readonly").objectStore(nu)}function ju(){const w=indexedDB.open(tu,1);return new Promise((g,_)=>{w.addEventListener("error",()=>{_(w.error)}),w.addEventListener("upgradeneeded",()=>{const E=w.result;try{E.createObjectStore(nu,{keyPath:ia})}catch(R){_(R)}}),w.addEventListener("success",(0,m.Z)(function*(){const E=w.result;E.objectStoreNames.contains(nu)?g(E):(E.close(),yield function rd(){const w=indexedDB.deleteDatabase(tu);return new mo(w).toPromise()}(),g(yield ju()))}))})}function ru(w,g,_){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,m.Z)(function*(w,g,_){const E=sa(w,!0).put({[ia]:g,value:_});return new mo(E).toPromise()})).apply(this,arguments)}function oa(){return(oa=(0,m.Z)(function*(w,g){const _=sa(w,!1).get(g),E=yield new mo(_).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function $u(w,g){const _=sa(w,!0).delete(g);return new mo(_).toPromise()}const ua=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,m.Z)(function*(){return _.db||(_.db=yield ju()),_.db})()}_withRetries(_){var E=this;return(0,m.Z)(function*(){let R=0;for(;;)try{const F=yield E._openDb();return yield _(F)}catch(F){if(R++>3)throw F;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,m.Z)(function*(){return ri()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,m.Z)(function*(){_.receiver=eu._getInstance(function Vu(){return ri()?self:null}()),_.receiver._subscribe("keyChanged",function(){var E=(0,m.Z)(function*(R,F){return{keyProcessed:(yield _._poll()).includes(F.key)}});return function(R,F){return E.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var E=(0,m.Z)(function*(R,F){return["keyChanged"]});return function(R,F){return E.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,m.Z)(function*(){var E,R;if(_.activeServiceWorker=yield function nd(){return _s.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Nh(_.activeServiceWorker);const F=yield _.sender._send("ping",{},800);!F||(null===(E=F[0])||void 0===E?void 0:E.fulfilled)&&(null===(R=F[0])||void 0===R?void 0:R.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var E=this;return(0,m.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Vl(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:_},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,m.Z)(function*(){try{if(!indexedDB)return!1;const _=yield ju();return yield ru(_,ms,"1"),yield $u(_,ms),!0}catch{}return!1})()}_withPendingWrite(_){var E=this;return(0,m.Z)(function*(){E.pendingWrites++;try{yield _()}finally{E.pendingWrites--}})()}_set(_,E){var R=this;return(0,m.Z)(function*(){return R._withPendingWrite((0,m.Z)(function*(){return yield R._withRetries(F=>ru(F,_,E)),R.localCache[_]=E,R.notifyServiceWorker(_)}))})()}_get(_){var E=this;return(0,m.Z)(function*(){const R=yield E._withRetries(F=>function Ph(w,g){return oa.apply(this,arguments)}(F,_));return E.localCache[_]=R,R})()}_remove(_){var E=this;return(0,m.Z)(function*(){return E._withPendingWrite((0,m.Z)(function*(){return yield E._withRetries(R=>$u(R,_)),delete E.localCache[_],E.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,m.Z)(function*(){const E=yield _._withRetries(ae=>{const Re=sa(ae,!1).getAll();return new mo(Re).toPromise()});if(!E)return[];if(0!==_.pendingWrites)return[];const R=[],F=new Set;for(const{fbase_key:ae,value:Re}of E)F.add(ae),JSON.stringify(_.localCache[ae])!==JSON.stringify(Re)&&(_.notifyListeners(ae,Re),R.push(ae));for(const ae of Object.keys(_.localCache))_.localCache[ae]&&!F.has(ae)&&(_.notifyListeners(ae,null),R.push(ae));return R})()}notifyListeners(_,E){this.localCache[_]=E;const R=this.listeners[_];if(R)for(const F of Array.from(R))F(E)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,m.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(E)}_removeListener(_,E){this.listeners[_]&&(this.listeners[_].delete(E),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function Oh(w,g){return Ht(w,"POST","/v2/accounts/mfaSignIn:start",Kt(w,g))}function Or(){return(Or=(0,m.Z)(function*(w){return(yield Ht(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function yo(w){return new Promise((g,_)=>{const E=document.createElement("script");E.setAttribute("src",w),E.onload=g,E.onerror=R=>{const F=Fe("internal-error");F.customData=R,_(F)},E.type="text/javascript",E.charset="UTF-8",function ca(){var w,g;return null!==(g=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==g?g:document}().appendChild(E)})}function da(w){return`__${w}${Math.floor(1e6*Math.random())}`}const qi=1e12;class id{constructor(g){this.auth=g,this.counter=qi,this._widgets=new Map}render(g,_){const E=this.counter;return this._widgets.set(E,new xn(g,this.auth.name,_||{})),this.counter++,E}reset(g){var _;const E=g||qi;null===(_=this._widgets.get(E))||void 0===_||_.delete(),this._widgets.delete(E)}getResponse(g){var _;return(null===(_=this._widgets.get(g||qi))||void 0===_?void 0:_.getResponse())||""}execute(g){var _=this;return(0,m.Z)(function*(){var E;return null===(E=_._widgets.get(g||qi))||void 0===E||E.execute(),""})()}}class xn{constructor(g,_,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const R="string"==typeof g?document.getElementById(g):g;ue(R,"argument-error",{appName:_}),this.container=R,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function zp(w){const g=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<w;E++)g.push(_.charAt(Math.floor(Math.random()*_.length)));return g.join("")}(50);const{callback:g,"expired-callback":_}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Lh=da("rcb"),db=new Qe(3e4,6e4);class $_{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=qn().grecaptcha)||void 0===g||!g.render)}load(g,_=""){return ue(function Fh(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(_),g,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(qn().grecaptcha):new Promise((E,R)=>{const F=qn().setTimeout(()=>{R(Fe(g,"network-request-failed"))},db.get());qn()[Lh]=()=>{qn().clearTimeout(F),delete qn()[Lh];const Re=qn().grecaptcha;if(!Re)return void R(Fe(g,"internal-error"));const et=Re.render;Re.render=(yt,Zt)=>{const Un=et(yt,Zt);return this.counter++,Un},this.hostLanguage=_,E(Re)},yo(`https://www.google.com/recaptcha/api.js??${(0,$.xO)({onload:Lh,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(F),R(Fe(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var _;return!(null===(_=qn().grecaptcha)||void 0===_||!_.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class hb{load(g){return(0,m.Z)(function*(){return new id(g)})()}clearedOneInstance(){}}const Gu="recaptcha",fb={theme:"light",type:"image"};class H_{constructor(g,_=Object.assign({},fb),E){this.parameters=_,this.type=Gu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Et(E),this.isInvisible="invisible"===this.parameters.size,ue(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const R="string"==typeof g?document.getElementById(g):g;ue(R,this.auth,"argument-error"),this.container=R,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new hb:new $_,this.validateStartingState()}verify(){var g=this;return(0,m.Z)(function*(){g.assertNotDestroyed();const _=yield g.render(),E=g.getAssertedRecaptcha();return E.getResponse(_)||new Promise(F=>{const ae=Re=>{!Re||(g.tokenChangeListeners.delete(ae),F(Re))};g.tokenChangeListeners.add(ae),g.isInvisible&&E.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){ue(!this.parameters.sitekey,this.auth,"argument-error"),ue(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ue(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return _=>{if(this.tokenChangeListeners.forEach(E=>E(_)),"function"==typeof g)g(_);else if("string"==typeof g){const E=qn()[g];"function"==typeof E&&E(_)}}}assertNotDestroyed(){ue(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,m.Z)(function*(){if(yield g.init(),!g.widgetId){let _=g.container;if(!g.isInvisible){const E=document.createElement("div");_.appendChild(E),_=E}g.widgetId=g.getAssertedRecaptcha().render(_,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,m.Z)(function*(){ue($e()&&!ri(),g.auth,"internal-error"),yield function wr(){let w=null;return new Promise(g=>{"complete"!==document.readyState?(w=()=>g(),window.addEventListener("load",w)):g()}).catch(g=>{throw w&&window.removeEventListener("load",w),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const _=yield function Hu(w){return Or.apply(this,arguments)}(g.auth);ue(_,g.auth,"internal-error"),g.parameters.sitekey=_})()}getAssertedRecaptcha(){return ue(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class vo{constructor(g,_){this.verificationId=g,this.onConfirmation=_}confirm(g){const _=Ho._fromVerification(this.verificationId,g);return this.onConfirmation(_)}}function ys(w,g,_){return sd.apply(this,arguments)}function sd(){return(sd=(0,m.Z)(function*(w,g,_){const E=Et(w),R=yield bo(E,g,(0,$.m9)(_));return new vo(R,F=>Ba(E,F))})).apply(this,arguments)}function wo(w,g,_){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,m.Z)(function*(w,g,_){const E=(0,$.m9)(w);yield Gi(!1,E,"phone");const R=yield bo(E.auth,g,(0,$.m9)(_));return new vo(R,F=>Ot(E,F))})).apply(this,arguments)}function Os(w,g,_){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,m.Z)(function*(w,g,_){const E=(0,$.m9)(w),R=yield bo(E.auth,g,(0,$.m9)(_));return new vo(R,F=>$p(E,F))})).apply(this,arguments)}function bo(w,g,_){return vs.apply(this,arguments)}function vs(){return(vs=(0,m.Z)(function*(w,g,_){var E;const R=yield _.verify();try{let F;if(ue("string"==typeof R,w,"argument-error"),ue(_.type===Gu,w,"argument-error"),F="string"==typeof g?{phoneNumber:g}:g,"session"in F){const ae=F.session;if("phoneNumber"in F)return ue("enroll"===ae.type,w,"internal-error"),(yield Wn(w,{idToken:ae.credential,phoneEnrollmentInfo:{phoneNumber:F.phoneNumber,recaptchaToken:R}})).phoneSessionInfo.sessionInfo;{ue("signin"===ae.type,w,"internal-error");const Re=(null===(E=F.multiFactorHint)||void 0===E?void 0:E.uid)||F.multiFactorUid;return ue(Re,w,"missing-multi-factor-info"),(yield Oh(w,{mfaPendingCredential:ae.credential,mfaEnrollmentId:Re,phoneSignInInfo:{recaptchaToken:R}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ae}=yield Lp(w,{phoneNumber:F.phoneNumber,recaptchaToken:R});return ae}}finally{_._reset()}})).apply(this,arguments)}function iu(w,g){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,m.Z)(function*(w,g){yield Nu((0,$.m9)(w),g)})).apply(this,arguments)}let Wp=(()=>{class w{constructor(_){this.providerId=w.PROVIDER_ID,this.auth=Et(_)}verifyPhoneNumber(_,E){return bo(this.auth,_,(0,$.m9)(E))}static credential(_,E){return Ho._fromVerification(_,E)}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:E,temporaryProof:R}=_;return E&&R?Ho._fromTokenResponse(E,R):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function su(w,g){return g?ie(g):(ue(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class ou extends ei{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return ho(g,this._buildIdpRequest())}_linkToIdToken(g,_){return ho(g,this._buildIdpRequest(_))}_getReauthenticationResolver(g){return ho(g,this._buildIdpRequest())}_buildIdpRequest(g){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(_.idToken=g),_}}function od(w){return Ml(w.auth,new ou(w),w.bypassAuthState)}function ii(w){const{auth:g,user:_}=w;return ue(_,g,"internal-error"),Pu(_,new ou(w),w.bypassAuthState)}function zu(w){return zr.apply(this,arguments)}function zr(){return(zr=(0,m.Z)(function*(w){const{auth:g,user:_}=w;return ue(_,g,"internal-error"),Nu(_,new ou(w),w.bypassAuthState)})).apply(this,arguments)}class Hl{constructor(g,_,E,R,F=!1){this.auth=g,this.resolver=E,this.user=R,this.bypassAuthState=F,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var g=this;return new Promise(function(){var _=(0,m.Z)(function*(E,R){g.pendingPromise={resolve:E,reject:R};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(F){g.reject(F)}});return function(E,R){return _.apply(this,arguments)}}())}onAuthEvent(g){var _=this;return(0,m.Z)(function*(){const{urlResponse:E,sessionId:R,postBody:F,tenantId:ae,error:Re,type:et}=g;if(Re)return void _.reject(Re);const yt={auth:_.auth,requestUri:E,sessionId:R,tenantId:ae||void 0,postBody:F||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(et)(yt))}catch(Zt){_.reject(Zt)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return od;case"linkViaPopup":case"linkViaRedirect":return zu;case"reauthViaPopup":case"reauthViaRedirect":return ii;default:st(this.auth,"internal-error")}}resolve(g){Ee(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){Ee(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Lr=new Qe(2e3,1e4);function Wr(w,g,_){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,m.Z)(function*(w,g,_){const E=Et(w);Ae(w,g,Dr);const R=su(E,_);return new Wu(E,"signInViaPopup",g,R).executeNotNull()})).apply(this,arguments)}function gn(w,g,_){return ht.apply(this,arguments)}function ht(){return(ht=(0,m.Z)(function*(w,g,_){const E=(0,$.m9)(w);Ae(E.auth,g,Dr);const R=su(E.auth,_);return new Wu(E.auth,"reauthViaPopup",g,R,E).executeNotNull()})).apply(this,arguments)}function G_(w,g,_){return Uh.apply(this,arguments)}function Uh(){return(Uh=(0,m.Z)(function*(w,g,_){const E=(0,$.m9)(w);Ae(E.auth,g,Dr);const R=su(E.auth,_);return new Wu(E.auth,"linkViaPopup",g,R,E).executeNotNull()})).apply(this,arguments)}let Wu=(()=>{class w extends Hl{constructor(_,E,R,F,ae){super(_,E,F,ae),this.provider=R,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var _=this;return(0,m.Z)(function*(){const E=yield _.execute();return ue(E,_.auth,"internal-error"),E})()}onExecution(){var _=this;return(0,m.Z)(function*(){Ee(1===_.filter.length,"Popup operations only handle one event");const E=ra();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],E),_.authWindow.associatedEvent=E,_.resolver._originValidation(_.auth).catch(R=>{_.reject(R)}),_.resolver._isIframeWebStorageSupported(_.auth,R=>{R||_.reject(Fe(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Fe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const _=()=>{var E,R;this.pollId=null!==(R=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==R&&R.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Fe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,Lr.get())};_()}}return w.currentPopupAction=null,w})();const Us=new Map;class fa extends Hl{constructor(g,_,E=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,E),this.eventId=null}execute(){var g=()=>super.execute,_=this;return(0,m.Z)(function*(){let E=Us.get(_.auth._key());if(!E){try{const F=(yield function zl(w,g){return pa.apply(this,arguments)}(_.resolver,_.auth))?yield g().call(_):null;E=()=>Promise.resolve(F)}catch(R){E=()=>Promise.reject(R)}Us.set(_.auth._key(),E)}return _.bypassAuthState||Us.set(_.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(g){var _=()=>super.onAuthEvent,E=this;return(0,m.Z)(function*(){if("signInViaRedirect"===g.type)return _().call(E,g);if("unknown"!==g.type){if(g.eventId){const R=yield E.auth._redirectUserForId(g.eventId);if(R)return E.user=R,_().call(E,g);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,m.Z)(function*(){})()}cleanUp(){}}function pa(){return(pa=(0,m.Z)(function*(w,g){const _=Eo(g),E=qu(w);if(!(yield E._isAvailable()))return!1;const R="true"===(yield E._get(_));return yield E._remove(_),R})).apply(this,arguments)}function Bs(w,g){return ad.apply(this,arguments)}function ad(){return(ad=(0,m.Z)(function*(w,g){return qu(w)._set(Eo(g),"true")})).apply(this,arguments)}function ga(){Us.clear()}function ud(w,g){Us.set(w._key(),g)}function qu(w){return ie(w._redirectPersistence)}function Eo(w){return fn("pendingRedirect",w.config.apiKey,w.name)}function qp(w,g,_){return function ar(w,g,_){return ld.apply(this,arguments)}(w,g,_)}function ld(){return(ld=(0,m.Z)(function*(w,g,_){const E=Et(w);Ae(w,g,Dr);const R=su(E,_);return yield Bs(R,E),R._openRedirect(E,g,"signInViaRedirect")})).apply(this,arguments)}function C(w,g,_){return function S(w,g,_){return k.apply(this,arguments)}(w,g,_)}function k(){return(k=(0,m.Z)(function*(w,g,_){const E=(0,$.m9)(w);Ae(E.auth,g,Dr);const R=su(E.auth,_);yield Bs(R,E.auth);const F=yield Gt(E);return R._openRedirect(E.auth,g,"reauthViaRedirect",F)})).apply(this,arguments)}function j(w,g,_){return function re(w,g,_){return ge.apply(this,arguments)}(w,g,_)}function ge(){return(ge=(0,m.Z)(function*(w,g,_){const E=(0,$.m9)(w);Ae(E.auth,g,Dr);const R=su(E.auth,_);yield Gi(!1,E,g.providerId),yield Bs(R,E.auth);const F=yield Gt(E);return R._openRedirect(E.auth,g,"linkViaRedirect",F)})).apply(this,arguments)}function Oe(w,g){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,m.Z)(function*(w,g){return yield Et(w)._initializationPromise,Tt(w,g,!1)})).apply(this,arguments)}function Tt(w,g){return kt.apply(this,arguments)}function kt(){return(kt=(0,m.Z)(function*(w,g,_=!1){const E=Et(w),R=su(E,g),ae=yield new fa(E,R,_).execute();return ae&&!_&&(delete ae.user._redirectEventId,yield E._persistUserIfCurrent(ae.user),yield E._setRedirectUser(null,g)),ae})).apply(this,arguments)}function Gt(w){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,m.Z)(function*(w){const g=ra(`${w.uid}:::`);return w._redirectEventId=g,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),g})).apply(this,arguments)}class Mr{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let _=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(g,E)&&(_=!0,this.sendToConsumer(g,E),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function lu(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return uu(w);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=g,_=!0)),_}sendToConsumer(g,_){var E;if(g.error&&!uu(g)){const R=(null===(E=g.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";_.onError(Fe(this.auth,R))}else _.onAuthEvent(g)}isEventForConsumer(g,_){const E=null===_.eventId||!!g.eventId&&g.eventId===_.eventId;return _.filter.includes(g.type)&&E}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(au(g))}saveEventToCache(g){this.cachedEventUids.add(au(g)),this.lastProcessedEventTime=Date.now()}}function au(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(g=>g).join("-")}function uu({type:w,error:g}){return"unknown"===w&&"auth/no-auth-event"===g?.code}function ma(w){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,m.Z)(function*(w,g={}){return Ht(w,"GET","/v1/projects",g)})).apply(this,arguments)}const Ku=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cu=/^https?/;function Wl(){return(Wl=(0,m.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:g}=yield ma(w);for(const _ of g)try{if(oS(_))return}catch{}st(w,"unauthorized-domain")})).apply(this,arguments)}function oS(w){const g=je(),{protocol:_,hostname:E}=new URL(g);if(w.startsWith("chrome-extension://")){const ae=new URL(w);return""===ae.hostname&&""===E?"chrome-extension:"===_&&w.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===_&&ae.hostname===E}if(!cu.test(_))return!1;if(Ku.test(w))return E===w;const R=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+R+"|"+R+")$","i").test(E)}const pb=new Qe(3e4,6e4);function z_(){const w=qn().___jsl;if(w?.H)for(const g of Object.keys(w.H))if(w.H[g].r=w.H[g].r||[],w.H[g].L=w.H[g].L||[],w.H[g].r=[...w.H[g].L],w.CP)for(let _=0;_<w.CP.length;_++)w.CP[_]=null}let Zu=null;function W_(w){return Zu=Zu||function gb(w){return new Promise((g,_)=>{var E,R,F;function ae(){z_(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{z_(),_(Fe(w,"network-request-failed"))},timeout:pb.get()})}if(null!==(R=null===(E=qn().gapi)||void 0===E?void 0:E.iframes)&&void 0!==R&&R.Iframe)g(gapi.iframes.getContext());else{if(null===(F=qn().gapi)||void 0===F||!F.load){const Re=da("iframefcb");return qn()[Re]=()=>{gapi.load?ae():_(Fe(w,"network-request-failed"))},yo(`https://apis.google.com/js/api.js?onload=${Re}`).catch(et=>_(et))}ae()}}).catch(g=>{throw Zu=null,g})}(w),Zu}const mb=new Qe(5e3,15e3),K_={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},uS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Kp(w){const g=w.config;ue(g.authDomain,w,"auth-domain-config-required");const _=g.emulator?Tn(g,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,E={apiKey:g.apiKey,appName:w.name,v:P.SDK_VERSION},R=uS.get(w.config.apiHost);R&&(E.eid=R);const F=w._getFrameworks();return F.length&&(E.fw=F.join(",")),`${_}?${(0,$.xO)(E).slice(1)}`}function Bh(){return Bh=(0,m.Z)(function*(w){const g=yield W_(w),_=qn().gapi;return ue(_,w,"internal-error"),g.open({where:document.body,url:Kp(w),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:K_,dontclear:!0},E=>new Promise(function(){var R=(0,m.Z)(function*(F,ae){yield E.restyle({setHideOnLeave:!1});const Re=Fe(w,"network-request-failed"),et=qn().setTimeout(()=>{ae(Re)},mb.get());function yt(){qn().clearTimeout(et),F(E)}E.ping(yt).then(yt,()=>{ae(Re)})});return function(F,ae){return R.apply(this,arguments)}}()))}),Bh.apply(this,arguments)}const Vh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class wb{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function cd(w,g,_,E,R,F){ue(w.config.authDomain,w,"auth-domain-config-required"),ue(w.config.apiKey,w,"invalid-api-key");const ae={apiKey:w.config.apiKey,appName:w.name,authType:_,redirectUrl:E,v:P.SDK_VERSION,eventId:R};if(g instanceof Dr){g.setDefaultLanguage(w.languageCode),ae.providerId=g.providerId||"",(0,$.xb)(g.getCustomParameters())||(ae.customParameters=JSON.stringify(g.getCustomParameters()));for(const[et,yt]of Object.entries(F||{}))ae[et]=yt}if(g instanceof zo){const et=g.getScopes().filter(yt=>""!==yt);et.length>0&&(ae.scopes=et.join(","))}w.tenantId&&(ae.tid=w.tenantId);const Re=ae;for(const et of Object.keys(Re))void 0===Re[et]&&delete Re[et];return`${function Q_({config:w}){return w.emulator?Tn(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,$.xO)(Re).slice(1)}`}const Qp="webStorageSupport",X_=class bb{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ps,this._completeRedirectFn=Tt,this._overrideRedirectResult=ud}_openPopup(g,_,E,R){var F=this;return(0,m.Z)(function*(){var ae;Ee(null===(ae=F.eventManagers[g._key()])||void 0===ae?void 0:ae.manager,"_initialize() not called before _openPopup()");const Re=cd(g,_,E,je(),R);return function jh(w,g,_,E=500,R=600){const F=Math.max((window.screen.availHeight-R)/2,0).toString(),ae=Math.max((window.screen.availWidth-E)/2,0).toString();let Re="";const et=Object.assign(Object.assign({},Vh),{width:E.toString(),height:R.toString(),top:F,left:ae}),yt=(0,$.z$)().toLowerCase();_&&(Re=Te(yt)?"_blank":_),G(yt)&&(g=g||"http://localhost",et.scrollbars="yes");const Zt=Object.entries(et).reduce((js,[Yu,Jp])=>`${js}${Yu}=${Jp},`,"");if(function Pn(w=(0,$.z$)()){var g;return lt(w)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(yt)&&"_self"!==Re)return function Yp(w,g){const _=document.createElement("a");_.href=w,_.target=g;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(E)}(g||"",Re),new wb(null);const Un=window.open(g||"",Re,Zt);ue(Un,w,"popup-blocked");try{Un.focus()}catch{}return new wb(Un)}(g,Re,ra())})()}_openRedirect(g,_,E,R){var F=this;return(0,m.Z)(function*(){return yield F._originValidation(g),function td(w){qn().location.href=w}(cd(g,_,E,je(),R)),new Promise(()=>{})})()}_initialize(g){const _=g._key();if(this.eventManagers[_]){const{manager:R,promise:F}=this.eventManagers[_];return R?Promise.resolve(R):(Ee(F,"If manager is not set, promise should be"),F)}const E=this.initAndGetManager(g);return this.eventManagers[_]={promise:E},E.catch(()=>{delete this.eventManagers[_]}),E}initAndGetManager(g){var _=this;return(0,m.Z)(function*(){const E=yield function _b(w){return Bh.apply(this,arguments)}(g),R=new Mr(g);return E.register("authEvent",F=>(ue(F?.authEvent,g,"invalid-auth-event"),{status:R.onEvent(F.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[g._key()]={manager:R},_.iframes[g._key()]=E,R})()}_isIframeWebStorageSupported(g,_){this.iframes[g._key()].send(Qp,{type:Qp},R=>{var F;const ae=null===(F=R?.[0])||void 0===F?void 0:F[Qp];void 0!==ae&&_(!!ae),st(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function _a(w){return Wl.apply(this,arguments)}(g)),this.originValidationPromises[_]}get _shouldInitProactively(){return wn()||W()||lt()}};class Xp extends class Eb{constructor(g){this.factorId=g}_process(g,_,E){switch(_.type){case"enroll":return this._finalizeEnroll(g,_.credential,E);case"signin":return this._finalizeSignIn(g,_.credential);default:return fe("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Xp(g)}_finalizeEnroll(g,_,E){return function Fu(w,g){return Ht(w,"POST","/v2/accounts/mfaEnrollment:finalize",Kt(w,g))}(g,{idToken:_,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,_){return function la(w,g){return Ht(w,"POST","/v2/accounts/mfaSignIn:finalize",Kt(w,g))}(g,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let du=(()=>{class w{constructor(){}static assertion(_){return Xp._fromCredential(_)}}return w.FACTOR_ID="phone",w})();var Kl="@firebase/auth";class lS{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var _=this;return(0,m.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const _=this.auth.onIdTokenChanged(E=>{var R;g((null===(R=E)||void 0===R?void 0:R.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,_),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const _=this.internalListeners.get(g);!_||(this.internalListeners.delete(g),_(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}!function dS(w){(0,P._registerComponent)(new we.wA("auth",(g,{options:_})=>{const E=g.getProvider("app").getImmediate(),R=g.getProvider("heartbeat"),{apiKey:F,authDomain:ae}=E.options;return((Re,et)=>{ue(F&&!F.includes(":"),"invalid-api-key",{appName:Re.name}),ue(!ae?.includes(":"),"argument-error",{appName:Re.name});const yt={apiKey:F,authDomain:ae,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Rn(w)},Zt=new so(Re,et,yt);return function de(w,g){const _=g?.persistence||[],E=(Array.isArray(_)?_:[_]).map(ie);g?.errorMap&&w._updateErrorMap(g.errorMap),w._initializeWithPersistence(E,g?.popupRedirectResolver)}(Zt,_),Zt})(E,R)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,_,E)=>{g.getProvider("auth-internal").initialize()})),(0,P._registerComponent)(new we.wA("auth-internal",g=>{const _=Et(g.getProvider("auth").getImmediate());return new lS(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,P.registerVersion)(Kl,"0.20.6",function cS(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,P.registerVersion)(Kl,"0.20.6","esm2017")}("Browser")},2090:(gt,ke,U)=>{U.d(ke,{$s:()=>Pr,BH:()=>We,DV:()=>Ht,Dv:()=>yr,G6:()=>ue,GJ:()=>nn,L:()=>_e,LL:()=>je,Mn:()=>Ae,Pz:()=>qt,Sg:()=>Le,UG:()=>Ce,UI:()=>ro,US:()=>we,Wj:()=>Mn,Yr:()=>Ze,ZB:()=>K,ZR:()=>de,b$:()=>st,cI:()=>tn,d:()=>Fe,dS:()=>mt,eu:()=>Ee,g5:()=>P,gK:()=>Hi,gQ:()=>Si,h$:()=>pe,hl:()=>fe,hu:()=>$,jU:()=>ve,lb:()=>Cn,m9:()=>Yt,ne:()=>$i,p$:()=>q,pd:()=>Hn,r3:()=>Kt,ru:()=>it,tV:()=>Ie,uI:()=>ct,ug:()=>_t,vZ:()=>Tr,w1:()=>Ne,w9:()=>ln,xO:()=>ji,xb:()=>Ir,z$:()=>Se,zI:()=>te,zd:()=>Xr});const $=function(J,z){if(!J)throw P(z)},P=function(J){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+J)},le=function(J){const z=[];let H=0;for(let Y=0;Y<J.length;Y++){let Q=J.charCodeAt(Y);Q<128?z[H++]=Q:Q<2048?(z[H++]=Q>>6|192,z[H++]=63&Q|128):55296==(64512&Q)&&Y+1<J.length&&56320==(64512&J.charCodeAt(Y+1))?(Q=65536+((1023&Q)<<10)+(1023&J.charCodeAt(++Y)),z[H++]=Q>>18|240,z[H++]=Q>>12&63|128,z[H++]=Q>>6&63|128,z[H++]=63&Q|128):(z[H++]=Q>>12|224,z[H++]=Q>>6&63|128,z[H++]=63&Q|128)}return z},we={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(J,z){if(!Array.isArray(J))throw Error("encodeByteArray takes an array as a parameter");this.init_();const H=z?this.byteToCharMapWebSafe_:this.byteToCharMap_,Y=[];for(let Q=0;Q<J.length;Q+=3){const xe=J[Q],qe=Q+1<J.length,It=qe?J[Q+1]:0,pn=Q+2<J.length,fn=pn?J[Q+2]:0;let G=(15&It)<<2|fn>>6,W=63&fn;pn||(W=64,qe||(G=64)),Y.push(H[xe>>2],H[(3&xe)<<4|It>>4],H[G],H[W])}return Y.join("")},encodeString(J,z){return this.HAS_NATIVE_SUPPORT&&!z?btoa(J):this.encodeByteArray(le(J),z)},decodeString(J,z){return this.HAS_NATIVE_SUPPORT&&!z?atob(J):function(J){const z=[];let H=0,Y=0;for(;H<J.length;){const Q=J[H++];if(Q<128)z[Y++]=String.fromCharCode(Q);else if(Q>191&&Q<224){const xe=J[H++];z[Y++]=String.fromCharCode((31&Q)<<6|63&xe)}else if(Q>239&&Q<365){const pn=((7&Q)<<18|(63&J[H++])<<12|(63&J[H++])<<6|63&J[H++])-65536;z[Y++]=String.fromCharCode(55296+(pn>>10)),z[Y++]=String.fromCharCode(56320+(1023&pn))}else{const xe=J[H++],qe=J[H++];z[Y++]=String.fromCharCode((15&Q)<<12|(63&xe)<<6|63&qe)}}return z.join("")}(this.decodeStringToByteArray(J,z))},decodeStringToByteArray(J,z){this.init_();const H=z?this.charToByteMapWebSafe_:this.charToByteMap_,Y=[];for(let Q=0;Q<J.length;){const xe=H[J.charAt(Q++)],It=Q<J.length?H[J.charAt(Q)]:0;++Q;const fn=Q<J.length?H[J.charAt(Q)]:64;++Q;const se=Q<J.length?H[J.charAt(Q)]:64;if(++Q,null==xe||null==It||null==fn||null==se)throw Error();Y.push(xe<<2|It>>4),64!==fn&&(Y.push(It<<4&240|fn>>2),64!==se&&Y.push(fn<<6&192|se))}return Y},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let J=0;J<this.ENCODED_VALS.length;J++)this.byteToCharMap_[J]=this.ENCODED_VALS.charAt(J),this.charToByteMap_[this.byteToCharMap_[J]]=J,this.byteToCharMapWebSafe_[J]=this.ENCODED_VALS_WEBSAFE.charAt(J),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[J]]=J,J>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(J)]=J,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(J)]=J)}}},pe=function(J){const z=le(J);return we.encodeByteArray(z,!0)},_e=function(J){return pe(J).replace(/\./g,"")},Ie=function(J){try{return we.decodeString(J,!0)}catch(z){console.error("base64Decode failed: ",z)}return null};function q(J){return K(void 0,J)}function K(J,z){if(!(z instanceof Object))return z;switch(z.constructor){case Date:return new Date(z.getTime());case Object:void 0===J&&(J={});break;case Array:J=[];break;default:return z}for(const H in z)!z.hasOwnProperty(H)||!ne(H)||(J[H]=K(J[H],z[H]));return J}function ne(J){return"__proto__"!==J}class We{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((z,H)=>{this.resolve=z,this.reject=H})}wrapCallback(z){return(H,Y)=>{H?this.reject(H):this.resolve(Y),"function"==typeof z&&(this.promise.catch(()=>{}),1===z.length?z(H):z(H,Y))}}}function Le(J,z){if(J.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Y=z||"demo-project",Q=J.iat||0,xe=J.sub||J.user_id;if(!xe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const qe=Object.assign({iss:`https://securetoken.google.com/${Y}`,aud:Y,iat:Q,exp:Q+3600,auth_time:Q,sub:xe,user_id:xe,firebase:{sign_in_provider:"custom",identities:{}}},J);return[_e(JSON.stringify({alg:"none",type:"JWT"})),_e(JSON.stringify(qe)),""].join(".")}function Se(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ct(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Se())}function Ce(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ve(){return"object"==typeof self&&self.self===self}function it(){const J="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof J&&void 0!==J.id}function st(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Fe(){return Se().indexOf("Electron/")>=0}function Ne(){const J=Se();return J.indexOf("MSIE ")>=0||J.indexOf("Trident/")>=0}function Ae(){return Se().indexOf("MSAppHost/")>=0}function Ze(){return!1}function ue(){return!Ce()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fe(){return"object"==typeof indexedDB}function Ee(){return new Promise((J,z)=>{try{let H=!0;const Y="validate-browser-context-for-indexeddb-analytics-module",Q=self.indexedDB.open(Y);Q.onsuccess=()=>{Q.result.close(),H||self.indexedDB.deleteDatabase(Y),J(!0)},Q.onupgradeneeded=()=>{H=!1},Q.onerror=()=>{var xe;z((null===(xe=Q.error)||void 0===xe?void 0:xe.message)||"")}}catch(H){z(H)}})}function te(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class de extends Error{constructor(z,H,Y){super(H),this.code=z,this.customData=Y,this.name="FirebaseError",Object.setPrototypeOf(this,de.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,je.prototype.create)}}class je{constructor(z,H,Y){this.service=z,this.serviceName=H,this.errors=Y}create(z,...H){const Y=H[0]||{},Q=`${this.service}/${z}`,xe=this.errors[z],qe=xe?function $e(J,z){return J.replace(wt,(H,Y)=>{const Q=z[Y];return null!=Q?String(Q):`<${Y}?>`})}(xe,Y):"Error";return new de(Q,`${this.serviceName}: ${qe} (${Q}).`,Y)}}const wt=/\{\$([^}]+)}/g;function tn(J){return JSON.parse(J)}function qt(J){return JSON.stringify(J)}const Qe=function(J){let z={},H={},Y={},Q="";try{const xe=J.split(".");z=tn(Ie(xe[0])||""),H=tn(Ie(xe[1])||""),Q=xe[2],Y=H.d||{},delete H.d}catch{}return{header:z,claims:H,data:Y,signature:Q}},ln=function(J){const H=Qe(J).claims;return!!H&&"object"==typeof H&&H.hasOwnProperty("iat")},nn=function(J){const z=Qe(J).claims;return"object"==typeof z&&!0===z.admin};function Kt(J,z){return Object.prototype.hasOwnProperty.call(J,z)}function Ht(J,z){if(Object.prototype.hasOwnProperty.call(J,z))return J[z]}function Ir(J){for(const z in J)if(Object.prototype.hasOwnProperty.call(J,z))return!1;return!0}function ro(J,z,H){const Y={};for(const Q in J)Object.prototype.hasOwnProperty.call(J,Q)&&(Y[Q]=z.call(H,J[Q],Q,J));return Y}function Tr(J,z){if(J===z)return!0;const H=Object.keys(J),Y=Object.keys(z);for(const Q of H){if(!Y.includes(Q))return!1;const xe=J[Q],qe=z[Q];if(Nn(xe)&&Nn(qe)){if(!Tr(xe,qe))return!1}else if(xe!==qe)return!1}for(const Q of Y)if(!H.includes(Q))return!1;return!0}function Nn(J){return null!==J&&"object"==typeof J}function ji(J){const z=[];for(const[H,Y]of Object.entries(J))Array.isArray(Y)?Y.forEach(Q=>{z.push(encodeURIComponent(H)+"="+encodeURIComponent(Q))}):z.push(encodeURIComponent(H)+"="+encodeURIComponent(Y));return z.length?"&"+z.join("&"):""}function Xr(J){const z={};return J.replace(/^\?/,"").split("&").forEach(Y=>{if(Y){const[Q,xe]=Y.split("=");z[decodeURIComponent(Q)]=decodeURIComponent(xe)}}),z}function Hn(J){const z=J.indexOf("?");if(!z)return"";const H=J.indexOf("#",z);return J.substring(z,H>0?H:void 0)}class Si{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let z=1;z<this.blockSize;++z)this.pad_[z]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(z,H){H||(H=0);const Y=this.W_;if("string"==typeof z)for(let se=0;se<16;se++)Y[se]=z.charCodeAt(H)<<24|z.charCodeAt(H+1)<<16|z.charCodeAt(H+2)<<8|z.charCodeAt(H+3),H+=4;else for(let se=0;se<16;se++)Y[se]=z[H]<<24|z[H+1]<<16|z[H+2]<<8|z[H+3],H+=4;for(let se=16;se<80;se++){const G=Y[se-3]^Y[se-8]^Y[se-14]^Y[se-16];Y[se]=4294967295&(G<<1|G>>>31)}let fn,nr,Q=this.chain_[0],xe=this.chain_[1],qe=this.chain_[2],It=this.chain_[3],pn=this.chain_[4];for(let se=0;se<80;se++){se<40?se<20?(fn=It^xe&(qe^It),nr=1518500249):(fn=xe^qe^It,nr=1859775393):se<60?(fn=xe&qe|It&(xe|qe),nr=2400959708):(fn=xe^qe^It,nr=3395469782);const G=(Q<<5|Q>>>27)+fn+pn+nr+Y[se]&4294967295;pn=It,It=qe,qe=4294967295&(xe<<30|xe>>>2),xe=Q,Q=G}this.chain_[0]=this.chain_[0]+Q&4294967295,this.chain_[1]=this.chain_[1]+xe&4294967295,this.chain_[2]=this.chain_[2]+qe&4294967295,this.chain_[3]=this.chain_[3]+It&4294967295,this.chain_[4]=this.chain_[4]+pn&4294967295}update(z,H){if(null==z)return;void 0===H&&(H=z.length);const Y=H-this.blockSize;let Q=0;const xe=this.buf_;let qe=this.inbuf_;for(;Q<H;){if(0===qe)for(;Q<=Y;)this.compress_(z,Q),Q+=this.blockSize;if("string"==typeof z){for(;Q<H;)if(xe[qe]=z.charCodeAt(Q),++qe,++Q,qe===this.blockSize){this.compress_(xe),qe=0;break}}else for(;Q<H;)if(xe[qe]=z[Q],++qe,++Q,qe===this.blockSize){this.compress_(xe),qe=0;break}}this.inbuf_=qe,this.total_+=H}digest(){const z=[];let H=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Q=this.blockSize-1;Q>=56;Q--)this.buf_[Q]=255&H,H/=256;this.compress_(this.buf_);let Y=0;for(let Q=0;Q<5;Q++)for(let xe=24;xe>=0;xe-=8)z[Y]=this.chain_[Q]>>xe&255,++Y;return z}}function $i(J,z){const H=new ot(J,z);return H.subscribe.bind(H)}class ot{constructor(z,H){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=H,this.task.then(()=>{z(this)}).catch(Y=>{this.error(Y)})}next(z){this.forEachObserver(H=>{H.next(z)})}error(z){this.forEachObserver(H=>{H.error(z)}),this.close(z)}complete(){this.forEachObserver(z=>{z.complete()}),this.close()}subscribe(z,H,Y){let Q;if(void 0===z&&void 0===H&&void 0===Y)throw new Error("Missing Observer.");Q=function Gn(J,z){if("object"!=typeof J||null===J)return!1;for(const H of z)if(H in J&&"function"==typeof J[H])return!0;return!1}(z,["next","error","complete"])?z:{next:z,error:H,complete:Y},void 0===Q.next&&(Q.next=vn),void 0===Q.error&&(Q.error=vn),void 0===Q.complete&&(Q.complete=vn);const xe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Q.error(this.finalError):Q.complete()}catch{}}),this.observers.push(Q),xe}unsubscribeOne(z){void 0===this.observers||void 0===this.observers[z]||(delete this.observers[z],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(z){if(!this.finalized)for(let H=0;H<this.observers.length;H++)this.sendOne(H,z)}sendOne(z,H){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[z])try{H(this.observers[z])}catch(Y){typeof console<"u"&&console.error&&console.error(Y)}})}close(z){this.finalized||(this.finalized=!0,void 0!==z&&(this.finalError=z),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vn(){}const yr=function(J,z,H,Y){let Q;if(Y<z?Q="at least "+z:Y>H&&(Q=0===H?"none":"no more than "+H),Q)throw new Error(J+" failed: Was called with "+Y+(1===Y?" argument.":" arguments.")+" Expects "+Q+".")};function Hi(J,z){return`${J} failed: ${z} argument `}function Mn(J,z,H,Y){if((!Y||H)&&"function"!=typeof H)throw new Error(Hi(J,z)+"must be a valid function.")}function Cn(J,z,H,Y){if((!Y||H)&&("object"!=typeof H||null===H))throw new Error(Hi(J,z)+"must be a valid context object.")}const mt=function(J){const z=[];let H=0;for(let Y=0;Y<J.length;Y++){let Q=J.charCodeAt(Y);if(Q>=55296&&Q<=56319){const xe=Q-55296;Y++,$(Y<J.length,"Surrogate pair missing trail surrogate."),Q=65536+(xe<<10)+(J.charCodeAt(Y)-56320)}Q<128?z[H++]=Q:Q<2048?(z[H++]=Q>>6|192,z[H++]=63&Q|128):Q<65536?(z[H++]=Q>>12|224,z[H++]=Q>>6&63|128,z[H++]=63&Q|128):(z[H++]=Q>>18|240,z[H++]=Q>>12&63|128,z[H++]=Q>>6&63|128,z[H++]=63&Q|128)}return z},_t=function(J){let z=0;for(let H=0;H<J.length;H++){const Y=J.charCodeAt(H);Y<128?z++:Y<2048?z+=2:Y>=55296&&Y<=56319?(z+=4,H++):z+=3}return z};function Pr(J,z=1e3,H=2){const Y=z*Math.pow(H,J),Q=Math.round(.5*Y*(Math.random()-.5)*2);return Math.min(144e5,Y+Q)}function Yt(J){return J&&J._delegate?J._delegate:J}},9816:(gt,ke,U)=>{var m=U(4650);let $=null;function P(){return $}const pe=new m.OlP("DocumentToken");let _e=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return function Ie(){return(0,m.LFG)(K)}()},providedIn:"platform"}),n})();const q=new m.OlP("Location Initialized");let K=(()=>{class n extends _e{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){ne()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){ne()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(pe))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function We(){return new K((0,m.LFG)(pe))}()},providedIn:"platform"}),n})();function ne(){return!!window.history.pushState}function Le(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Se(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ct(n){return n&&"?"!==n[0]?"?"+n:n}let Ce=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return(0,m.f3M)(it)},providedIn:"root"}),n})();const ve=new m.OlP("appBaseHref");let it=(()=>{class n extends Ce{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,m.f3M)(pe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Le(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ct(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+ct(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+ct(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(_e),m.LFG(ve,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),st=(()=>{class n extends Ce{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Le(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+ct(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+ct(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(_e),m.LFG(ve,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),Fe=(()=>{class n{constructor(t){this._subject=new m.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=Se(Ze(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ct(r))}normalize(t){return n.stripTrailingSlash(function Ae(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ze(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ct(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ct(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=ct,n.joinWithSlash=Le,n.stripTrailingSlash=Se,n.\u0275fac=function(t){return new(t||n)(m.LFG(Ce))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function Ne(){return new Fe((0,m.LFG)(Ce))}()},providedIn:"root"}),n})();function Ze(n){return n.replace(/\/index.html$/,"")}let Vp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();const di="browser";function qo(n){return"server"===n}let $c=(()=>{class n{}return n.\u0275prov=(0,m.Yz7)({token:n,providedIn:"root",factory:()=>new Th((0,m.LFG)(pe),window)}),n})();class Th{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Sr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ai(this.window.history)||Ai(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ai(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ks extends class qc extends class we{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function he(n){$||($=n)}(new ks)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Kc(){return Ns=Ns||document.querySelector("base"),Ns?Ns.getAttribute("href"):null}();return null==t?null:function gs(n){On=On||document.createElement("a"),On.setAttribute("href",n);const e=On.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Ns=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Il(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let On,Ns=null;const Ln=new m.OlP("TRANSITION_ID"),Nl=[{provide:m.ip1,useFactory:function Zc(n,e,t){return()=>{t.get(m.CZH).donePromise.then(()=>{const r=P(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[Ln,pe,m.zs3],multi:!0}];let Pl=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Ol=new m.OlP("EventManagerPlugins");let Yc=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const l=i[a];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Ol),m.LFG(m.R0b))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class Ll{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=P().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let ea=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),ta=(()=>{class n extends ea{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const l=this._doc.createElement("style");l.textContent=a,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Qc),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Qc))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(pe))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function Qc(n){P().remove(n)}const na={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Xc=/%COMP%/g;function Uu(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Uu(n,i,t):(i=i.replace(Xc,n),t.push(i))}return t}function Bu(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Qa=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new ms(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case m.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new ed(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case m.ifc.ShadowDom:return new Rh(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Uu(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Yc),m.LFG(ta),m.LFG(m.AFp))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class ms{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(na[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Ja(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Ja(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=na[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=na[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(m.JOm.DashCase|m.JOm.Important)?e.style.setProperty(t,r,i&m.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&m.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Bu(r)):this.eventManager.addEventListener(e,t,Bu(r))}}function Ja(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class ed extends ms{constructor(e,t,r,i){super(e),this.component=r;const a=Uu(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function Wn(n){return"_ngcontent-%COMP%".replace(Xc,n)}(i+"-"+r.id),this.hostAttr=function Fu(n){return"_nghost-%COMP%".replace(Xc,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Rh extends ms{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Uu(i.id,i.styles,[]);for(let l=0;l<a.length;l++){const d=document.createElement("style");d.textContent=a[l],this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let or=(()=>{class n extends Ll{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(pe))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const kh=["alt","control","meta","shift"],Ps={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Bl={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let eu=(()=>{class n extends Ll{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="",d=r.indexOf("code");if(d>-1&&(r.splice(d,1),l="code."),kh.forEach(y=>{const I=r.indexOf(y);I>-1&&(r.splice(I,1),l+=y+".")}),l+=a,0!=r.length||0===a.length)return null;const f={};return f.domEventName=i,f.fullKey=l,f}static matchEventFullKeyCode(t,r){let i=Ps[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),kh.forEach(l=>{l!==i&&(0,Bl[l])(t)&&(a+=l+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(pe))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const tu=(0,m.eFA)(m._c5,"browser",[{provide:m.Lbi,useValue:di},{provide:m.g9A,useValue:function nd(){ks.makeCurrent()},multi:!0},{provide:pe,useFactory:function Vl(){return(0,m.RDi)(document),document},deps:[]}]),go=new m.OlP(""),nu=[{provide:m.rWj,useClass:class Mh{addToWindow(e){m.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},m.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),m.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),m.dqk.frameworkStabilizers||(m.dqk.frameworkStabilizers=[]),m.dqk.frameworkStabilizers.push(r=>{const i=m.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const d=function(f){l=l||f,a--,0==a&&r(l)};i.forEach(function(f){f.whenStable(d)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:m.lri,useClass:m.dDg,deps:[m.R0b,m.eoX,m.rWj]},{provide:m.dDg,useClass:m.dDg,deps:[m.R0b,m.eoX,m.rWj]}],ia=[{provide:m.zSh,useValue:"root"},{provide:m.qLn,useFactory:function _s(){return new m.qLn},deps:[]},{provide:Ol,useClass:or,multi:!0,deps:[pe,m.R0b,m.Lbi]},{provide:Ol,useClass:eu,multi:!0,deps:[pe]},{provide:Qa,useClass:Qa,deps:[Yc,ta,m.AFp]},{provide:m.FYo,useExisting:Qa},{provide:ea,useExisting:ta},{provide:ta,useClass:ta,deps:[pe]},{provide:Yc,useClass:Yc,deps:[Ol,m.R0b]},{provide:class Ko{},useClass:Pl,deps:[]},[]];let vo,mo=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:m.AFp,useValue:t.appId},{provide:Ln,useExisting:m.AFp},Nl]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(go,12))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[...ia,...nu],imports:[Vp,m.hGG]}),n})(),Wi=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(pe))},n.\u0275prov=m.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function ru(){return new Wi((0,m.LFG)(pe))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;try{vo=typeof Intl<"u"&&Intl.v8BreakIterator}catch{vo=!1}let Ls,ou,ys=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function hi(n){return n===di}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!vo)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.Lbi))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function vs(n){return function bo(){if(null==Ls&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Ls=!0}))}finally{Ls=Ls||!1}return Ls}()?n:!!n.capture}function zr(n){return n.composedPath?n.composedPath()[0]:n.target}var Lr=U(7579);class Wr extends Lr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Ki=U(7669),gn=U(8996);function ht(...n){const e=(0,Ki.yG)(n);return(0,gn.D)(n,e)}var qr=U(4482),Xn=U(5403);function Zi(n,e){return(0,qr.e)((t,r)=>{let i=0;t.subscribe((0,Xn.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}function iy(n){return Zi((e,t)=>n<=t)}var Zl=U(4671);function rg(n,e=Zl.y){return n=n??pS,(0,qr.e)((t,r)=>{let i,a=!0;t.subscribe((0,Xn.x)(r,l=>{const d=e(l);(a||!n(i,d))&&(a=!1,i=d,r.next(l))}))})}function pS(n,e){return n===e}var hd=U(8421),sy=U(5032);function ig(n){return(0,qr.e)((e,t)=>{(0,hd.Xf)(n).subscribe((0,Xn.x)(t,()=>t.complete(),sy.Z)),!t.closed&&e.subscribe(t)})}function gS(n){return null!=n&&"false"!=`${n}`}function ay(n){return Array.isArray(n)?n:[n]}function Io(n){return n instanceof m.SBq?n.nativeElement:n}var ws=U(9751);const{isArray:sg}=Array,{getPrototypeOf:_S,prototype:uy,keys:og}=Object;var At=U(4004);const{isArray:yS}=Array;var wS=U(9672);function ly(...n){const e=(0,Ki.yG)(n),t=(0,Ki.jO)(n),{args:r,keys:i}=function Yl(n){if(1===n.length){const e=n[0];if(sg(e))return{args:e,keys:null};if(function Ab(n){return n&&"object"==typeof n&&_S(n)===uy}(e)){const t=og(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,gn.D)([],e);const a=new ws.y(function bS(n,e,t=Zl.y){return r=>{xb(e,()=>{const{length:i}=n,a=new Array(i);let l=i,d=i;for(let f=0;f<i;f++)xb(e,()=>{const y=(0,gn.D)(n[f],e);let I=!1;y.subscribe((0,Xn.x)(r,D=>{a[f]=D,I||(I=!0,d--),d||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>function fd(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,l):Zl.y));return t?a.pipe(function Mb(n){return(0,At.U)(e=>function vS(n,e){return yS(e)?n(...e):n(e)}(n,e))}(t)):a}function xb(n,e,t){n?(0,wS.f)(t,n,e):e()}var Ql=U(8189);function Gh(...n){return function ES(){return(0,Ql.J)(1)}()((0,gn.D)(n,(0,Ki.yG)(n)))}var Xl=U(515);function Jl(n){return n<=0?()=>Xl.E:(0,qr.e)((e,t)=>{let r=0;e.subscribe((0,Xn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}var Rb=U(4986);function kb(n,e=Rb.z){return(0,qr.e)((t,r)=>{let i=null,a=null,l=null;const d=()=>{if(i){i.unsubscribe(),i=null;const y=a;a=null,r.next(y)}};function f(){const y=l+n,I=e.now();if(I<y)return i=this.schedule(void 0,y-I),void r.add(i);d()}t.subscribe((0,Xn.x)(r,y=>{a=y,l=e.now(),i||(i=e.schedule(f,n),r.add(i))},()=>{d(),r.complete()},void 0,()=>{a=i=null}))})}function hu(...n){const e=(0,Ki.yG)(n);return(0,qr.e)((t,r)=>{(e?Gh(n,t,e):Gh(n,t)).subscribe(r)})}const ec=new Set;let ya,IS=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Nb}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function mO(n){if(!ec.has(n))try{ya||(ya=document.createElement("style"),ya.setAttribute("type","text/css"),document.head.appendChild(ya)),ya.sheet&&(ya.sheet.insertRule(`@media ${n} {body{ }}`,0),ec.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ys))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Nb(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let TS=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new Lr.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return Pb(ay(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let a=ly(Pb(ay(t)).map(l=>this._registerQuery(l).observable));return a=Gh(a.pipe(Jl(1)),a.pipe(iy(1),kb(0))),a.pipe((0,At.U)(l=>{const d={matches:!1,breakpoints:{}};return l.forEach(({matches:f,query:y})=>{d.matches=d.matches||f,d.breakpoints[y]=f}),d}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),a={observable:new ws.y(l=>{const d=f=>this._zone.run(()=>l.next(f));return r.addListener(d),()=>{r.removeListener(d)}}).pipe(hu(r),(0,At.U)(({matches:l})=>({query:t,matches:l})),ig(this._destroySubject)),mql:r};return this._queries.set(t,a),a}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(IS),m.LFG(m.R0b))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Pb(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function py(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function $b(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const xS=new m.OlP("cdk-input-modality-detector-options"),xi={ignoreKeys:[18,17,224,91,16]},tc=vs({passive:!0,capture:!0});let gy=(()=>{class n{constructor(t,r,i,a){this._platform=t,this._mostRecentTarget=null,this._modality=new Wr(null),this._lastTouchMs=0,this._onKeydown=l=>{this._options?.ignoreKeys?.some(d=>d===l.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=zr(l))},this._onMousedown=l=>{Date.now()-this._lastTouchMs<650||(this._modality.next(py(l)?"keyboard":"mouse"),this._mostRecentTarget=zr(l))},this._onTouchstart=l=>{$b(l)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=zr(l))},this._options={...xi,...a},this.modalityDetected=this._modality.pipe(iy(1)),this.modalityChanged=this.modalityDetected.pipe(rg()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,tc),i.addEventListener("mousedown",this._onMousedown,tc),i.addEventListener("touchstart",this._onTouchstart,tc)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,tc),document.removeEventListener("mousedown",this._onMousedown,tc),document.removeEventListener("touchstart",this._onTouchstart,tc))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ys),m.LFG(m.R0b),m.LFG(pe),m.LFG(xS,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Gb=new m.OlP("cdk-focus-monitor-default-options"),ug=vs({passive:!0,capture:!0});let zb=(()=>{class n{constructor(t,r,i,a,l){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Lr.x,this._rootNodeFocusAndBlurListener=d=>{for(let y=zr(d);y;y=y.parentElement)"focus"===d.type?this._onFocus(d,y):this._onBlur(d,y)},this._document=a,this._detectionMode=l?.detectionMode||0}monitor(t,r=!1){const i=Io(t);if(!this._platform.isBrowser||1!==i.nodeType)return ht(null);const a=function ii(n){if(function od(){if(null==ou){const n=typeof document<"u"?document.head:null;ou=!(!n||!n.createShadowRoot&&!n.attachShadow)}return ou}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(i)||this._getDocument(),l=this._elementInfo.get(i);if(l)return r&&(l.checkChildren=!0),l.subject;const d={checkChildren:r,subject:new Lr.x,rootNode:a};return this._elementInfo.set(i,d),this._registerGlobalListeners(d),d.subject}stopMonitoring(t){const r=Io(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const a=Io(t);a===this._getDocument().activeElement?this._getClosestElementsInfo(a).forEach(([d,f])=>this._originChanged(d,r,f)):(this._setOrigin(r),"function"==typeof a.focus&&a.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),a=zr(t);!i||!i.checkChildren&&r!==a||this._originChanged(r,this._getFocusOrigin(a),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,ug),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,ug)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(ig(this._stopInputModalityDetector)).subscribe(a=>{this._setOrigin(a,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,ug),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,ug),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,a)=>{(a===t||i.checkChildren&&a.contains(t))&&r.push([a,i])}),r}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:r,mostRecentModality:i}=this._inputModalityDetector;if("mouse"!==i||!r||r===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const a=t.labels;if(a)for(let l=0;l<a.length;l++)if(a[l].contains(r))return!0;return!1}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.R0b),m.LFG(ys),m.LFG(gy),m.LFG(pe,8),m.LFG(Gb,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const my="cdk-high-contrast-black-on-white",Wb="cdk-high-contrast-white-on-black",_y="cdk-high-contrast-active";let RS=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=(0,m.f3M)(TS).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,a=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),a){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(_y,my,Wb),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(_y,my):2===r&&t.add(_y,Wb)}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ys),m.LFG(pe))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),kS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();const PS=new m.OlP("mat-sanity-checks",{providedIn:"root",factory:function NS(){return!0}});let Qu=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!function Hl(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(RS),m.LFG(PS,8),m.LFG(pe))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[kS,kS]}),n})();function md(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=gS(e)}}}function cg(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}function Yb(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=gS(e)}}}class $S{constructor(e,t,r,i=!1){this._renderer=e,this.element=t,this.config=r,this._animationForciblyDisabledThroughCss=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const HS={enterDuration:225,exitDuration:150},wy=vs({passive:!0}),by=["mousedown","touchstart"],Ey=["mouseup","mouseleave","touchend","touchcancel"];class eE{constructor(e,t,r,i){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=Io(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),a={...HS,...r.animation};r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const l=r.radius||function Iy(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),d=e-i.left,f=t-i.top,y=a.enterDuration,I=document.createElement("div");I.classList.add("mat-ripple-element"),I.style.left=d-l+"px",I.style.top=f-l+"px",I.style.height=2*l+"px",I.style.width=2*l+"px",null!=r.color&&(I.style.backgroundColor=r.color),I.style.transitionDuration=`${y}ms`,this._containerElement.appendChild(I);const D=window.getComputedStyle(I),L=D.transitionDuration,V="none"===D.transitionProperty||"0s"===L||"0s, 0s"===L,ee=new $S(this,I,r,V);I.style.transform="scale3d(1, 1, 1)",ee.state=0,r.persistent||(this._mostRecentTransientRipple=ee);let ce=null;return!V&&(y||a.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const Ge=()=>this._finishRippleTransition(ee),Ke=()=>this._destroyRipple(ee);I.addEventListener("transitionend",Ge),I.addEventListener("transitioncancel",Ke),ce={onTransitionEnd:Ge,onTransitionCancel:Ke}}),this._activeRipples.set(ee,ce),(V||!y)&&this._finishRippleTransition(ee),ee}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,r={...HS,...e.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Io(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(by))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(Ey),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=1,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=py(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!$b(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,wy)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&(by.forEach(e=>{this._triggerElement.removeEventListener(e,this,wy)}),this._pointerUpEventsRegistered&&Ey.forEach(e=>{this._triggerElement.removeEventListener(e,this,wy)}))}}const tE=new m.OlP("mat-ripple-global-options");let Wh=(()=>{class n{constructor(t,r,i,a,l){this._elementRef=t,this._animationMode=l,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=a||{},this._rippleRenderer=new eE(this,r,t,i)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,{...this.rippleConfig,...i}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.SBq),m.Y36(m.R0b),m.Y36(ys),m.Y36(tE,8),m.Y36(m.QbO,8))},n.\u0275dir=m.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,r){2&t&&m.ekj("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),hg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[Qu,Qu]}),n})();const sE=["*",[["mat-toolbar-row"]]],YS=["*","mat-toolbar-row"],QS=cg(class{constructor(n){this._elementRef=n}});let To=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=m.lG2({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),XS=(()=>{class n extends QS{constructor(t,r,i){super(t),this._platform=r,this._document=i}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.SBq),m.Y36(ys),m.Y36(pe))},n.\u0275cmp=m.Xpm({type:n,selectors:[["mat-toolbar"]],contentQueries:function(t,r,i){if(1&t&&m.Suo(i,To,5),2&t){let a;m.iGM(a=m.CRH())&&(r._toolbarRows=a)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,r){2&t&&m.ekj("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",0===r._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[m.qOj],ngContentSelectors:YS,decls:2,vars:0,template:function(t,r){1&t&&(m.F$t(sE),m.Hsn(0),m.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),n})(),eA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[Qu,Qu]}),n})();const tA=["mat-button",""],nA=["*"],rA=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],iA=cg(md(Yb(class{constructor(n){this._elementRef=n}})));let sA=(()=>{class n extends iA{constructor(t,r,i){super(t),this._focusMonitor=r,this._animationMode=i,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const a of rA)this._hasHostAttributes(a)&&this._getHostElement().classList.add(a);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,r){t?this._focusMonitor.focusVia(this._getHostElement(),t,r):this._getHostElement().focus(r)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(r=>this._getHostElement().hasAttribute(r))}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.SBq),m.Y36(zb),m.Y36(m.QbO,8))},n.\u0275cmp=m.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,r){if(1&t&&m.Gf(Wh,5),2&t){let i;m.iGM(i=m.CRH())&&(r.ripple=i.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,r){2&t&&(m.uIk("disabled",r.disabled||null),m.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-button-disabled",r.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[m.qOj],attrs:tA,ngContentSelectors:nA,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,r){1&t&&(m.F$t(),m.TgZ(0,"span",0),m.Hsn(1),m.qZA(),m._UZ(2,"span",1)(3,"span",2)),2&t&&(m.xp6(2),m.ekj("mat-button-ripple-round",r.isRoundButton||r.isIconButton),m.Q6J("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",r.isIconButton)("matRippleTrigger",r._getHostElement()))},dependencies:[Wh],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}.mat-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.mat-flat-button::before,.mat-raised-button::before,.mat-fab::before,.mat-mini-fab::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-stroked-button::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px) * -1)}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}"],encapsulation:2,changeDetection:0}),n})(),aE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[hg,Qu,Qu]}),n})();class Ty{}const gu="*";function Cy(n,e=null){return{type:2,steps:n,options:e}}function lE(n){return{type:6,styles:n,offset:null}}function hE(n){Promise.resolve(null).then(n)}class pg{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){hE(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class lA{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const a=this.players.length;0==a?hE(()=>this._onFinish()):this.players.forEach(l=>{l.onDone(()=>{++t==a&&this._onFinish()}),l.onDestroy(()=>{++r==a&&this._onDestroy()}),l.onStart(()=>{++i==a&&this._onStart()})}),this.totalTime=this.players.reduce((l,d)=>Math.max(l,d.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function Dy(n){return new m.vHH(3e3,!1)}function c1(){return typeof window<"u"&&typeof window.document<"u"}function Ed(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Do(n){switch(n.length){case 0:return new pg;case 1:return n[0];default:return new lA(n)}}function _g(n,e,t,r,i=new Map,a=new Map){const l=[],d=[];let f=-1,y=null;if(r.forEach(I=>{const D=I.get("offset"),x=D==f,L=x&&y||new Map;I.forEach((V,ee)=>{let ce=ee,Ge=V;if("offset"!==ee)switch(ce=e.normalizePropertyName(ce,l),Ge){case"!":Ge=i.get(ee);break;case gu:Ge=a.get(ee);break;default:Ge=e.normalizeStyleValue(ee,ce,Ge,l)}L.set(ce,Ge)}),x||d.push(L),y=L,f=D}),l.length)throw function vE(n){return new m.vHH(3502,!1)}();return d}function qh(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&Kh(t,"start",n)));break;case"done":n.onDone(()=>r(t&&Kh(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&Kh(t,"destroy",n)))}}function Kh(n,e,t){const a=CE(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),l=n._data;return null!=l&&(a._data=l),a}function CE(n,e,t,r,i="",a=0,l){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:a,disabled:!!l}}function bs(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function DE(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let Ry=(n,e)=>!1,SE=(n,e,t)=>[],ky=null;function AE(n){const e=n.parentNode||n.host;return e===ky?null:e}(Ed()||typeof Element<"u")&&(c1()?(ky=(()=>document.documentElement)(),Ry=(n,e)=>{for(;e;){if(e===n)return!0;e=AE(e)}return!1}):Ry=(n,e)=>n.contains(e),SE=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Xu=null,Ny=!1;const bA=Ry,EA=SE;let IA=(()=>{class n{validateStyleProperty(t){return function wA(n){Xu||(Xu=function f1(){return typeof document<"u"?document.body:null}()||{},Ny=!!Xu.style&&"WebkitAppearance"in Xu.style);let e=!0;return Xu.style&&!function h1(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Xu.style,!e&&Ny&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Xu.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return bA(t,r)}getParentElement(t){return AE(t)}query(t,r,i){return EA(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,a,l,d=[],f){return new pg(i,a)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),xE=(()=>{class n{}return n.NOOP=new IA,n})();const RE="ng-enter",So="ng-leave",Id="ng-trigger",yg=".ng-trigger",Py="ng-animating",Zh=".ng-animating";function _u(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Yh(parseFloat(e[1]),e[2])}function Yh(n,e){return"s"===e?1e3*n:n}function vg(n,e,t){return n.hasOwnProperty("duration")?n:function Ju(n,e,t){let i,a=0,l="";if("string"==typeof n){const d=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===d)return e.push(Dy()),{duration:0,delay:0,easing:""};i=Yh(parseFloat(d[1]),d[2]);const f=d[3];null!=f&&(a=Yh(parseFloat(f),d[4]));const y=d[5];y&&(l=y)}else i=n;if(!t){let d=!1,f=e.length;i<0&&(e.push(function s1(){return new m.vHH(3100,!1)}()),d=!0),a<0&&(e.push(function cA(){return new m.vHH(3101,!1)}()),d=!0),d&&e.splice(f,0,Dy())}return{duration:i,delay:a,easing:l}}(n,e,t)}function Td(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function kE(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function el(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function NE(n,e,t){return t?e+":"+t+";":""}function Qh(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=NE(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=NE(0,OE(t),n.style[t]));n.setAttribute("style",e)}function ki(n,e,t){n.style&&(e.forEach((r,i)=>{const a=ef(i);t&&!t.has(i)&&t.set(i,n.style[a]),n.style[a]=r}),Ed()&&Qh(n))}function yu(n,e){n.style&&(e.forEach((t,r)=>{const i=ef(r);n.style[i]=""}),Ed()&&Qh(n))}function va(n){return Array.isArray(n)?1==n.length?n[0]:Cy(n):n}const nc=new RegExp("{{\\s*(.+?)\\s*}}","g");function PE(n){let e=[];if("string"==typeof n){let t;for(;t=nc.exec(n);)e.push(t[1]);nc.lastIndex=0}return e}function Xh(n,e,t){const r=n.toString(),i=r.replace(nc,(a,l)=>{let d=e[l];return null==d&&(t.push(function dA(n){return new m.vHH(3003,!1)}()),d=""),d.toString()});return i==r?n:i}function Jh(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const Ly=/-+([a-z0-9])/g;function ef(n){return n.replace(Ly,(...e)=>e[1].toUpperCase())}function OE(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function $s(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function pE(n){return new m.vHH(3004,!1)}()}}function LE(n,e){return window.getComputedStyle(n)[e]}function m1(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function MA(n,e,t){if(":"==n[0]){const f=function Uy(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function Ay(n){return new m.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof f)return void e.push(f);n=f}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function a1(n){return new m.vHH(3015,!1)}()),e;const i=r[1],a=r[2],l=r[3];e.push(BE(i,l));"<"==a[0]&&!("*"==i&&"*"==l)&&e.push(BE(l,i))}(r,t,e)):t.push(n),t}const nf=new Set(["true","1"]),Ig=new Set(["false","0"]);function BE(n,e){const t=nf.has(n)||Ig.has(n),r=nf.has(e)||Ig.has(e);return(i,a)=>{let l="*"==n||n==i,d="*"==e||e==a;return!l&&t&&"boolean"==typeof i&&(l=i?nf.has(n):Ig.has(n)),!d&&r&&"boolean"==typeof a&&(d=a?nf.has(e):Ig.has(e)),l&&d}}const jE=new RegExp("s*:selfs*,?","g");function By(n,e,t,r){return new xA(n).build(e,t,r)}class xA{constructor(e){this._driver=e}build(e,t,r){const i=new HE(t);return this._resetContextStyleTimingState(i),$s(this,va(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const a=[],l=[];return"@"==e.name.charAt(0)&&t.errors.push(function hA(){return new m.vHH(3006,!1)}()),e.definitions.forEach(d=>{if(this._resetContextStyleTimingState(t),0==d.type){const f=d,y=f.name;y.toString().split(/\s*,\s*/).forEach(I=>{f.name=I,a.push(this.visitState(f,t))}),f.name=y}else if(1==d.type){const f=this.visitTransition(d,t);r+=f.queryCount,i+=f.depCount,l.push(f)}else t.errors.push(function gE(){return new m.vHH(3007,!1)}())}),{type:7,name:e.name,states:a,transitions:l,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const a=new Set,l=i||{};r.styles.forEach(d=>{d instanceof Map&&d.forEach(f=>{PE(f).forEach(y=>{l.hasOwnProperty(y)||a.add(y)})})}),a.size&&(Jh(a.values()),t.errors.push(function fA(n,e){return new m.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=$s(this,va(e.animation),t);return{type:1,matchers:m1(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:vu(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>$s(this,r,t)),options:vu(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const a=e.steps.map(l=>{t.currentTime=r;const d=$s(this,l,t);return i=Math.max(i,t.currentTime),d});return t.currentTime=i,{type:3,steps:a,options:vu(e.options)}}visitAnimate(e,t){const r=function wa(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return jy(vg(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(a=>"{"==a.charAt(0)&&"{"==a.charAt(1))){const a=jy(0,0,"");return a.dynamic=!0,a.strValue=t,a}const i=vg(t,e);return jy(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,a=e.styles?e.styles:lE({});if(5==a.type)i=this.visitKeyframes(a,t);else{let l=e.styles,d=!1;if(!l){d=!0;const y={};r.easing&&(y.easing=r.easing),l=lE(y)}t.currentTime+=r.duration+r.delay;const f=this.visitStyle(l,t);f.isEmptyStep=d,i=f}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let d of i)"string"==typeof d?d===gu?r.push(d):t.errors.push(new m.vHH(3002,!1)):r.push(kE(d));let a=!1,l=null;return r.forEach(d=>{if(d instanceof Map&&(d.has("easing")&&(l=d.get("easing"),d.delete("easing")),!a))for(let f of d.values())if(f.toString().indexOf("{{")>=0){a=!0;break}}),{type:6,styles:r,easing:l,offset:e.offset,containsDynamicStyles:a,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,a=t.currentTime;r&&a>0&&(a-=r.duration+r.delay),e.styles.forEach(l=>{"string"!=typeof l&&l.forEach((d,f)=>{const y=t.collectedStyles.get(t.currentQuerySelector),I=y.get(f);let D=!0;I&&(a!=i&&a>=I.startTime&&i<=I.endTime&&(t.errors.push(function gA(n,e,t,r,i){return new m.vHH(3010,!1)}()),D=!1),a=I.startTime),D&&y.set(f,{startTime:a,endTime:i}),t.options&&function wg(n,e,t){const r=e.params||{},i=PE(n);i.length&&i.forEach(a=>{r.hasOwnProperty(a)||t.push(function wd(n){return new m.vHH(3001,!1)}())})}(d,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function mA(){return new m.vHH(3011,!1)}()),r;let a=0;const l=[];let d=!1,f=!1,y=0;const I=e.steps.map(Ge=>{const Ke=this._makeStyleAst(Ge,t);let tt=null!=Ke.offset?Ke.offset:function kA(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(Ke.styles),Je=0;return null!=tt&&(a++,Je=Ke.offset=tt),f=f||Je<0||Je>1,d=d||Je<y,y=Je,l.push(Je),Ke});f&&t.errors.push(function mE(){return new m.vHH(3012,!1)}()),d&&t.errors.push(function _A(){return new m.vHH(3200,!1)}());const D=e.steps.length;let x=0;a>0&&a<D?t.errors.push(function _E(){return new m.vHH(3202,!1)}()):0==a&&(x=1/(D-1));const L=D-1,V=t.currentTime,ee=t.currentAnimateTimings,ce=ee.duration;return I.forEach((Ge,Ke)=>{const tt=x>0?Ke==L?1:x*Ke:l[Ke],Je=tt*ce;t.currentTime=V+ee.delay+Je,ee.duration=Je,this._validateStyleAst(Ge,t),Ge.offset=tt,r.styles.push(Ge)}),r}visitReference(e,t){return{type:8,animation:$s(this,va(e.animation),t),options:vu(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:vu(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:vu(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[a,l]=function RA(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(jE,"")),n=n.replace(/@\*/g,yg).replace(/@\w+/g,t=>yg+"-"+t.slice(1)).replace(/:animating/g,Zh),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+a:a,bs(t.collectedStyles,t.currentQuerySelector,new Map);const d=$s(this,va(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:a,limit:i.limit||0,optional:!!i.optional,includeSelf:l,animation:d,originalSelector:e.selector,options:vu(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function yE(){return new m.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:vg(e.timings,t.errors,!0);return{type:12,animation:$s(this,va(e.animation),t),timings:r,options:null}}}class HE{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function vu(n){return n?(n=Td(n)).params&&(n.params=function $E(n){return n?Td(n):null}(n.params)):n={},n}function jy(n,e,t){return{duration:n,delay:e,easing:t}}function $y(n,e,t,r,i,a,l=null,d=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:a,totalTime:i+a,easing:l,subTimeline:d}}class Hy{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const PA=new RegExp(":enter","g"),Gy=new RegExp(":leave","g");function zy(n,e,t,r,i,a=new Map,l=new Map,d,f,y=[]){return(new LA).buildKeyframes(n,e,t,r,i,a,l,d,f,y)}class LA{buildKeyframes(e,t,r,i,a,l,d,f,y,I=[]){y=y||new Hy;const D=new rf(e,t,y,i,a,I,[]);D.options=f;const x=f.delay?_u(f.delay):0;D.currentTimeline.delayNextStep(x),D.currentTimeline.setStyles([l],null,D.errors,f),$s(this,r,D);const L=D.timelines.filter(V=>V.containsAnimation());if(L.length&&d.size){let V;for(let ee=L.length-1;ee>=0;ee--){const ce=L[ee];if(ce.element===t){V=ce;break}}V&&!V.allowOnlyTimelineStyles()&&V.setStyles([d],null,D.errors,f)}return L.length?L.map(V=>V.buildKeyframes()):[$y(t,[],[],[],0,x,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),a=t.currentTimeline.currentTime,l=this._visitSubInstructions(r,i,i.options);a!=l&&t.transformIntoNewTimeline(l)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let a=t.currentTimeline.currentTime;const l=null!=r.duration?_u(r.duration):null,d=null!=r.delay?_u(r.delay):null;return 0!==l&&e.forEach(f=>{const y=t.appendInstructionToTimeline(f,l,d);a=Math.max(a,y.duration+y.delay)}),a}visitReference(e,t){t.updateOptions(e.options,!0),$s(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const a=e.options;if(a&&(a.params||a.delay)&&(i=t.createSubContext(a),i.transformIntoNewTimeline(),null!=a.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=rc);const l=_u(a.delay);i.delayNextStep(l)}e.steps.length&&(e.steps.forEach(l=>$s(this,l,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const a=e.options&&e.options.delay?_u(e.options.delay):0;e.steps.forEach(l=>{const d=t.createSubContext(e.options);a&&d.delayNextStep(a),$s(this,l,d),i=Math.max(i,d.currentTimeline.currentTime),r.push(d.currentTimeline)}),r.forEach(l=>t.currentTimeline.mergeTimelineCollectedStyles(l)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return vg(t.params?Xh(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const a=e.style;5==a.type?this.visitKeyframes(a,t):(t.incrementTime(r.duration),this.visitStyle(a,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const a=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(a):r.setStyles(e.styles,a,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,a=r.duration,d=t.createSubContext().currentTimeline;d.easing=r.easing,e.styles.forEach(f=>{d.forwardTime((f.offset||0)*a),d.setStyles(f.styles,f.easing,t.errors,t.options),d.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(d),t.transformIntoNewTimeline(i+a),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},a=i.delay?_u(i.delay):0;a&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=rc);let l=r;const d=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=d.length;let f=null;d.forEach((y,I)=>{t.currentQueryIndex=I;const D=t.createSubContext(e.options,y);a&&D.delayNextStep(a),y===t.element&&(f=D.currentTimeline),$s(this,e.animation,D),D.currentTimeline.applyStylesToKeyframe(),l=Math.max(l,D.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(l),f&&(t.currentTimeline.mergeTimelineCollectedStyles(f),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,a=e.timings,l=Math.abs(a.duration),d=l*(t.currentQueryTotal-1);let f=l*t.currentQueryIndex;switch(a.duration<0?"reverse":a.easing){case"reverse":f=d-f;break;case"full":f=r.currentStaggerTime}const I=t.currentTimeline;f&&I.delayNextStep(f);const D=I.currentTime;$s(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-D+(i.startTime-r.currentTimeline.startTime)}}const rc={};class rf{constructor(e,t,r,i,a,l,d,f){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=a,this.errors=l,this.timelines=d,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=rc,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=f||new Tg(this._driver,t,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=_u(r.duration)),null!=r.delay&&(i.delay=_u(r.delay));const a=r.params;if(a){let l=i.params;l||(l=this.options.params={}),Object.keys(a).forEach(d=>{(!t||!l.hasOwnProperty(d))&&(l[d]=Xh(a[d],l,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,a=new rf(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return a.previousNode=this.previousNode,a.currentAnimateTimings=this.currentAnimateTimings,a.options=this._copyOptions(),a.updateOptions(e),a.currentQueryIndex=this.currentQueryIndex,a.currentQueryTotal=this.currentQueryTotal,a.parentContext=this,this.subContextCount++,a}transformIntoNewTimeline(e){return this.previousNode=rc,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},a=new Wy(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(a),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,a,l){let d=[];if(i&&d.push(this.element),e.length>0){e=(e=e.replace(PA,"."+this._enterClassName)).replace(Gy,"."+this._leaveClassName);let y=this._driver.query(this.element,e,1!=r);0!==r&&(y=r<0?y.slice(y.length+r,y.length):y.slice(0,r)),d.push(...y)}return!a&&0==d.length&&l.push(function Sy(n){return new m.vHH(3014,!1)}()),d}}class Tg{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Tg(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||gu),this._currentKeyframe.set(t,gu);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const a=i&&i.params||{},l=function _1(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let a of r)t.set(a,gu)}else el(i,t)}),t}(e,this._globalTimelineStyles);for(let[d,f]of l){const y=Xh(f,a,r);this._pendingStyles.set(d,y),this._localTimelineStyles.has(d)||this._backFill.set(d,this._globalTimelineStyles.get(d)??gu),this._updateStyle(d,y)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((d,f)=>{const y=el(d,new Map,this._backFill);y.forEach((I,D)=>{"!"===I?e.add(D):I===gu&&t.add(D)}),r||y.set("offset",f/this.duration),i.push(y)});const a=e.size?Jh(e.values()):[],l=t.size?Jh(t.values()):[];if(r){const d=i[0],f=new Map(d);d.set("offset",0),f.set("offset",1),i=[d,f]}return $y(this.element,i,a,l,this.duration,this.startTime,this.easing,!1)}}class Wy extends Tg{constructor(e,t,r,i,a,l,d=!1){super(e,t,l.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=a,this._stretchStartingKeyframe=d,this.timings={duration:l.duration,delay:l.delay,easing:l.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const a=[],l=r+t,d=t/l,f=el(e[0]);f.set("offset",0),a.push(f);const y=el(e[0]);y.set("offset",qy(d)),a.push(y);const I=e.length-1;for(let D=1;D<=I;D++){let x=el(e[D]);const L=x.get("offset");x.set("offset",qy((t+L*r)/l)),a.push(x)}r=l,t=0,i="",e=a}return $y(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function qy(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class sf{}const zE=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class WE extends sf{normalizePropertyName(e,t){return ef(e)}normalizeStyleValue(e,t,r,i){let a="";const l=r.toString().trim();if(zE.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)a="px";else{const d=r.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&0==d[1].length&&i.push(function gg(n,e){return new m.vHH(3005,!1)}())}return l+a}}function Ky(n,e,t,r,i,a,l,d,f,y,I,D,x){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:a,toState:r,toStyles:l,timelines:d,queriedElements:f,preStyleProps:y,postStyleProps:I,totalTime:D,errors:x}}const Cg={};class Dg{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function Sg(n,e,t,r,i){return n.some(a=>a(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,a,l,d,f,y,I){const D=[],x=this.ast.options&&this.ast.options.params||Cg,V=this.buildStyles(r,d&&d.params||Cg,D),ee=f&&f.params||Cg,ce=this.buildStyles(i,ee,D),Ge=new Set,Ke=new Map,tt=new Map,Je="void"===i,Dt={params:Ag(ee,x),delay:this.ast.options?.delay},xt=I?[]:zy(e,t,this.ast.animation,a,l,V,ce,Dt,y,D);let un=0;if(xt.forEach(Uo=>{un=Math.max(Uo.duration+Uo.delay,un)}),D.length)return Ky(t,this._triggerName,r,i,Je,V,ce,[],[],Ke,tt,un,D);xt.forEach(Uo=>{const Pc=Uo.element,y$=bs(Ke,Pc,new Set);Uo.preStyleProps.forEach(kp=>y$.add(kp));const cb=bs(tt,Pc,new Set);Uo.postStyleProps.forEach(kp=>cb.add(kp)),Pc!==t&&Ge.add(Pc)});const $r=Jh(Ge.values());return Ky(t,this._triggerName,r,i,Je,V,ce,xt,$r,Ke,tt,un)}}function Ag(n,e){const t=Td(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class af{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=Td(this.defaultParams);return Object.keys(e).forEach(a=>{const l=e[a];null!==l&&(i[a]=l)}),this.styles.styles.forEach(a=>{"string"!=typeof a&&a.forEach((l,d)=>{l&&(l=Xh(l,i,t));const f=this.normalizer.normalizePropertyName(d,t);l=this.normalizer.normalizeStyleValue(d,f,l,t),r.set(f,l)})}),r}}class Zy{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new af(i.style,i.options&&i.options.params||{},r))}),KE(this.states,"true","1"),KE(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new Dg(e,i,this.states))}),this.fallbackTransition=function qE(n,e,t){return new Dg(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(l,d)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(l=>l.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function KE(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const UA=new Hy;class uf{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],a=By(this._driver,t,r,[]);if(r.length)throw function wE(n){return new m.vHH(3503,!1)}();this._animations.set(e,a)}_buildPlayer(e,t,r){const i=e.element,a=_g(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,a,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],a=this._animations.get(e);let l;const d=new Map;if(a?(l=zy(this._driver,t,a,RE,So,new Map,new Map,r,UA,i),l.forEach(I=>{const D=bs(d,I.element,new Map);I.postStyleProps.forEach(x=>D.set(x,null))})):(i.push(function mg(){return new m.vHH(3300,!1)}()),l=[]),i.length)throw function Co(n){return new m.vHH(3504,!1)}();d.forEach((I,D)=>{I.forEach((x,L)=>{I.set(L,this._driver.computeStyle(D,L,gu))})});const y=Do(l.map(I=>{const D=d.get(I.element);return this._buildPlayer(I,new Map,D)}));return this._playersById.set(e,y),y.onDestroy(()=>this.destroy(e)),this.players.push(y),y}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function bE(n){return new m.vHH(3301,!1)}();return t}listen(e,t,r,i){const a=CE(t,"","","");return qh(this._getPlayer(e),r,a,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const a=this._getPlayer(e);switch(r){case"play":a.play();break;case"pause":a.pause();break;case"reset":a.reset();break;case"restart":a.restart();break;case"finish":a.finish();break;case"init":a.init();break;case"setPosition":a.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const ZE="ng-animate-queued",Yy="ng-animate-disabled",jA=[],YE={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},QE={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Yi="__ng_removed";class Qy{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function zA(n){return n??null}(r?e.value:e),r){const a=Td(e);delete a.value,this.options=a}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const ic="void",Xy=new Qy(ic);class $A{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Gs(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function vA(n,e){return new m.vHH(3302,!1)}();if(null==r||0==r.length)throw function My(n){return new m.vHH(3303,!1)}();if(!function oc(n){return"start"==n||"done"==n}(r))throw function mu(n,e){return new m.vHH(3400,!1)}();const a=bs(this._elementListeners,e,[]),l={name:t,phase:r,callback:i};a.push(l);const d=bs(this._engine.statesByElement,e,new Map);return d.has(t)||(Gs(e,Id),Gs(e,Id+"-"+t),d.set(t,Xy)),()=>{this._engine.afterFlush(()=>{const f=a.indexOf(l);f>=0&&a.splice(f,1),this._triggers.has(t)||d.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function xy(n){return new m.vHH(3401,!1)}();return t}trigger(e,t,r,i=!0){const a=this._getTrigger(t),l=new Jy(this.id,t,e);let d=this._engine.statesByElement.get(e);d||(Gs(e,Id),Gs(e,Id+"-"+t),this._engine.statesByElement.set(e,d=new Map));let f=d.get(t);const y=new Qy(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&f&&y.absorbOptions(f.options),d.set(t,y),f||(f=Xy),y.value!==ic&&f.value===y.value){if(!function gi(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const a=t[i];if(!e.hasOwnProperty(a)||n[a]!==e[a])return!1}return!0}(f.params,y.params)){const ee=[],ce=a.matchStyles(f.value,f.params,ee),Ge=a.matchStyles(y.value,y.params,ee);ee.length?this._engine.reportError(ee):this._engine.afterFlush(()=>{yu(e,ce),ki(e,Ge)})}return}const x=bs(this._engine.playersByElement,e,[]);x.forEach(ee=>{ee.namespaceId==this.id&&ee.triggerName==t&&ee.queued&&ee.destroy()});let L=a.matchTransition(f.value,y.value,e,y.params),V=!1;if(!L){if(!i)return;L=a.fallbackTransition,V=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:L,fromState:f,toState:y,player:l,isFallbackTransition:V}),V||(Gs(e,ZE),l.onStart(()=>{nl(e,ZE)})),l.onDone(()=>{let ee=this.players.indexOf(l);ee>=0&&this.players.splice(ee,1);const ce=this._engine.playersByElement.get(e);if(ce){let Ge=ce.indexOf(l);Ge>=0&&ce.splice(Ge,1)}}),this.players.push(l),x.push(l),l}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,yg,!0);r.forEach(i=>{if(i[Yi])return;const a=this._engine.fetchNamespacesByElement(i);a.size?a.forEach(l=>l.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const a=this._engine.statesByElement.get(e),l=new Map;if(a){const d=[];if(a.forEach((f,y)=>{if(l.set(y,f.value),this._triggers.has(y)){const I=this.trigger(e,y,ic,i);I&&d.push(I)}}),d.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,l),r&&Do(d).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(a=>{const l=a.name;if(i.has(l))return;i.add(l);const f=this._triggers.get(l).fallbackTransition,y=r.get(l)||Xy,I=new Qy(ic),D=new Jy(this.id,l,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:l,transition:f,fromState:y,toState:I,player:D,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const a=r.players.length?r.playersByQueriedElement.get(e):[];if(a&&a.length)i=!0;else{let l=e;for(;l=l.parentNode;)if(r.statesByElement.get(l)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const a=e[Yi];(!a||a===YE)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Gs(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const a=r.element,l=this._elementListeners.get(a);l&&l.forEach(d=>{if(d.name==r.triggerName){const f=CE(a,r.triggerName,r.fromState.value,r.toState.value);f._data=e,qh(r.player,d.phase,f,d.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const a=r.transition.ast.depCount,l=i.transition.ast.depCount;return 0==a||0==l?a-l:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class HA{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,a)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new $A(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let l=!1,d=this.driver.getParentElement(t);for(;d;){const f=i.get(d);if(f){const y=r.indexOf(f);r.splice(y+1,0,e),l=!0;break}d=this.driver.getParentElement(d)}l||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const a=this._fetchNamespace(i.namespaceId);a&&t.add(a)}return t}trigger(e,t,r,i){if(sc(t)){const a=this._fetchNamespace(e);if(a)return a.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!sc(t))return;const a=t[Yi];if(a&&a.setForRemoval){a.setForRemoval=!1,a.setForMove=!0;const l=this.collectedLeaveElements.indexOf(t);l>=0&&this.collectedLeaveElements.splice(l,1)}if(e){const l=this._fetchNamespace(e);l&&l.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Gs(e,Yy)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),nl(e,Yy))}removeNode(e,t,r,i){if(sc(t)){const a=e?this._fetchNamespace(e):null;if(a?a.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const l=this.namespacesByHostElement.get(t);l&&l.id!==e&&l.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,a){this.collectedLeaveElements.push(t),t[Yi]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:a}}listen(e,t,r,i,a){return sc(t)?this._fetchNamespace(e).listen(t,r,i,a):()=>{}}_buildInstruction(e,t,r,i,a){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,a)}destroyInnerAnimations(e){let t=this.driver.query(e,yg,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,Zh,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Do(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Yi];if(t&&t.setForRemoval){if(e[Yi]=YE,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(Yy)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Gs(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Do(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function EE(n){return new m.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new Hy,i=[],a=new Map,l=[],d=new Map,f=new Map,y=new Map,I=new Set;this.disabledNodes.forEach(vt=>{I.add(vt);const Pt=this.driver.query(vt,".ng-animate-queued",!0);for(let Vt=0;Vt<Pt.length;Vt++)I.add(Pt[Vt])});const D=this.bodyNode,x=Array.from(this.statesByElement.keys()),L=XE(x,this.collectedEnterElements),V=new Map;let ee=0;L.forEach((vt,Pt)=>{const Vt=RE+ee++;V.set(Pt,Vt),vt.forEach(Dn=>Gs(Dn,Vt))});const ce=[],Ge=new Set,Ke=new Set;for(let vt=0;vt<this.collectedLeaveElements.length;vt++){const Pt=this.collectedLeaveElements[vt],Vt=Pt[Yi];Vt&&Vt.setForRemoval&&(ce.push(Pt),Ge.add(Pt),Vt.hasAnimation?this.driver.query(Pt,".ng-star-inserted",!0).forEach(Dn=>Ge.add(Dn)):Ke.add(Pt))}const tt=new Map,Je=XE(x,Array.from(Ge));Je.forEach((vt,Pt)=>{const Vt=So+ee++;tt.set(Pt,Vt),vt.forEach(Dn=>Gs(Dn,Vt))}),e.push(()=>{L.forEach((vt,Pt)=>{const Vt=V.get(Pt);vt.forEach(Dn=>nl(Dn,Vt))}),Je.forEach((vt,Pt)=>{const Vt=tt.get(Pt);vt.forEach(Dn=>nl(Dn,Vt))}),ce.forEach(vt=>{this.processLeaveNode(vt)})});const Dt=[],xt=[];for(let vt=this._namespaceList.length-1;vt>=0;vt--)this._namespaceList[vt].drainQueuedTransitions(t).forEach(Vt=>{const Dn=Vt.player,Di=Vt.element;if(Dt.push(Dn),this.collectedEnterElements.length){const os=Di[Yi];if(os&&os.setForMove){if(os.previousTriggersValues&&os.previousTriggersValues.has(Vt.triggerName)){const Np=os.previousTriggersValues.get(Vt.triggerName),Na=this.statesByElement.get(Vt.element);if(Na&&Na.has(Vt.triggerName)){const sS=Na.get(Vt.triggerName);sS.value=Np,Na.set(Vt.triggerName,sS)}}return void Dn.destroy()}}const El=!D||!this.driver.containsElement(D,Di),Bo=tt.get(Di),bh=V.get(Di),Er=this._buildInstruction(Vt,r,bh,Bo,El);if(Er.errors&&Er.errors.length)return void xt.push(Er);if(El)return Dn.onStart(()=>yu(Di,Er.fromStyles)),Dn.onDestroy(()=>ki(Di,Er.toStyles)),void i.push(Dn);if(Vt.isFallbackTransition)return Dn.onStart(()=>yu(Di,Er.fromStyles)),Dn.onDestroy(()=>ki(Di,Er.toStyles)),void i.push(Dn);const b$=[];Er.timelines.forEach(os=>{os.stretchStartingKeyframe=!0,this.disabledNodes.has(os.element)||b$.push(os)}),Er.timelines=b$,r.append(Di,Er.timelines),l.push({instruction:Er,player:Dn,element:Di}),Er.queriedElements.forEach(os=>bs(d,os,[]).push(Dn)),Er.preStyleProps.forEach((os,Np)=>{if(os.size){let Na=f.get(Np);Na||f.set(Np,Na=new Set),os.forEach((sS,rO)=>Na.add(rO))}}),Er.postStyleProps.forEach((os,Np)=>{let Na=y.get(Np);Na||y.set(Np,Na=new Set),os.forEach((sS,rO)=>Na.add(rO))})});if(xt.length){const vt=[];xt.forEach(Pt=>{vt.push(function l1(n,e){return new m.vHH(3505,!1)}())}),Dt.forEach(Pt=>Pt.destroy()),this.reportError(vt)}const un=new Map,$r=new Map;l.forEach(vt=>{const Pt=vt.element;r.has(Pt)&&($r.set(Pt,Pt),this._beforeAnimationBuild(vt.player.namespaceId,vt.instruction,un))}),i.forEach(vt=>{const Pt=vt.element;this._getPreviousPlayers(Pt,!1,vt.namespaceId,vt.triggerName,null).forEach(Dn=>{bs(un,Pt,[]).push(Dn),Dn.destroy()})});const Uo=ce.filter(vt=>rl(vt,f,y)),Pc=new Map;Cd(Pc,this.driver,Ke,y,gu).forEach(vt=>{rl(vt,f,y)&&Uo.push(vt)});const cb=new Map;L.forEach((vt,Pt)=>{Cd(cb,this.driver,new Set(vt),f,"!")}),Uo.forEach(vt=>{const Pt=Pc.get(vt),Vt=cb.get(vt);Pc.set(vt,new Map([...Array.from(Pt?.entries()??[]),...Array.from(Vt?.entries()??[])]))});const kp=[],v$=[],w$={};l.forEach(vt=>{const{element:Pt,player:Vt,instruction:Dn}=vt;if(r.has(Pt)){if(I.has(Pt))return Vt.onDestroy(()=>ki(Pt,Dn.toStyles)),Vt.disabled=!0,Vt.overrideTotalTime(Dn.totalTime),void i.push(Vt);let Di=w$;if($r.size>1){let Bo=Pt;const bh=[];for(;Bo=Bo.parentNode;){const Er=$r.get(Bo);if(Er){Di=Er;break}bh.push(Bo)}bh.forEach(Er=>$r.set(Er,Di))}const El=this._buildAnimation(Vt.namespaceId,Dn,un,a,cb,Pc);if(Vt.setRealPlayer(El),Di===w$)kp.push(Vt);else{const Bo=this.playersByElement.get(Di);Bo&&Bo.length&&(Vt.parentPlayer=Do(Bo)),i.push(Vt)}}else yu(Pt,Dn.fromStyles),Vt.onDestroy(()=>ki(Pt,Dn.toStyles)),v$.push(Vt),I.has(Pt)&&i.push(Vt)}),v$.forEach(vt=>{const Pt=a.get(vt.element);if(Pt&&Pt.length){const Vt=Do(Pt);vt.setRealPlayer(Vt)}}),i.forEach(vt=>{vt.parentPlayer?vt.syncPlayerEvents(vt.parentPlayer):vt.destroy()});for(let vt=0;vt<ce.length;vt++){const Pt=ce[vt],Vt=Pt[Yi];if(nl(Pt,So),Vt&&Vt.hasAnimation)continue;let Dn=[];if(d.size){let El=d.get(Pt);El&&El.length&&Dn.push(...El);let Bo=this.driver.query(Pt,Zh,!0);for(let bh=0;bh<Bo.length;bh++){let Er=d.get(Bo[bh]);Er&&Er.length&&Dn.push(...Er)}}const Di=Dn.filter(El=>!El.destroyed);Di.length?qA(this,Pt,Di):this.processLeaveNode(Pt)}return ce.length=0,kp.forEach(vt=>{this.players.push(vt),vt.onDone(()=>{vt.destroy();const Pt=this.players.indexOf(vt);this.players.splice(Pt,1)}),vt.play()}),kp}elementContainsData(e,t){let r=!1;const i=t[Yi];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,a){let l=[];if(t){const d=this.playersByQueriedElement.get(e);d&&(l=d)}else{const d=this.playersByElement.get(e);if(d){const f=!a||a==ic;d.forEach(y=>{y.queued||!f&&y.triggerName!=i||l.push(y)})}}return(r||i)&&(l=l.filter(d=>!(r&&r!=d.namespaceId||i&&i!=d.triggerName))),l}_beforeAnimationBuild(e,t,r){const a=t.element,l=t.isRemovalTransition?void 0:e,d=t.isRemovalTransition?void 0:t.triggerName;for(const f of t.timelines){const y=f.element,I=y!==a,D=bs(r,y,[]);this._getPreviousPlayers(y,I,l,d,t.toState).forEach(L=>{const V=L.getRealPlayer();V.beforeDestroy&&V.beforeDestroy(),L.destroy(),D.push(L)})}yu(a,t.fromStyles)}_buildAnimation(e,t,r,i,a,l){const d=t.triggerName,f=t.element,y=[],I=new Set,D=new Set,x=t.timelines.map(V=>{const ee=V.element;I.add(ee);const ce=ee[Yi];if(ce&&ce.removedBeforeQueried)return new pg(V.duration,V.delay);const Ge=ee!==f,Ke=function ba(n){const e=[];return Dd(n,e),e}((r.get(ee)||jA).map(un=>un.getRealPlayer())).filter(un=>!!un.element&&un.element===ee),tt=a.get(ee),Je=l.get(ee),Dt=_g(0,this._normalizer,0,V.keyframes,tt,Je),xt=this._buildPlayer(V,Dt,Ke);if(V.subTimeline&&i&&D.add(ee),Ge){const un=new Jy(e,d,ee);un.setRealPlayer(xt),y.push(un)}return xt});y.forEach(V=>{bs(this.playersByQueriedElement,V.element,[]).push(V),V.onDone(()=>function GA(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,V.element,V))}),I.forEach(V=>Gs(V,Py));const L=Do(x);return L.onDestroy(()=>{I.forEach(V=>nl(V,Py)),ki(f,t.toStyles)}),D.forEach(V=>{bs(i,V,[]).push(L)}),L}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new pg(e.duration,e.delay)}}class Jy{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new pg,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>qh(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){bs(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function sc(n){return n&&1===n.nodeType}function WA(n,e){const t=n.style.display;return n.style.display=e??"none",t}function Cd(n,e,t,r,i){const a=[];t.forEach(f=>a.push(WA(f)));const l=[];r.forEach((f,y)=>{const I=new Map;f.forEach(D=>{const x=e.computeStyle(y,D,i);I.set(D,x),(!x||0==x.length)&&(y[Yi]=QE,l.push(y))}),n.set(y,I)});let d=0;return t.forEach(f=>WA(f,a[d++])),l}function XE(n,e){const t=new Map;if(n.forEach(d=>t.set(d,[])),0==e.length)return t;const i=new Set(e),a=new Map;function l(d){if(!d)return 1;let f=a.get(d);if(f)return f;const y=d.parentNode;return f=t.has(y)?y:i.has(y)?1:l(y),a.set(d,f),f}return e.forEach(d=>{const f=l(d);1!==f&&t.get(f).push(d)}),t}function Gs(n,e){n.classList?.add(e)}function nl(n,e){n.classList?.remove(e)}function qA(n,e,t){Do(t).onDone(()=>n.processLeaveNode(e))}function Dd(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof lA?Dd(r.players,e):e.push(r)}}function rl(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(a=>i.add(a)):e.set(n,r),t.delete(n),!0}class ac{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,a)=>{},this._transitionEngine=new HA(e,t,r),this._timelineEngine=new uf(e,t,r),this._transitionEngine.onRemovalComplete=(i,a)=>this.onRemovalComplete(i,a)}registerTrigger(e,t,r,i,a){const l=e+"-"+i;let d=this._triggerCache[l];if(!d){const f=[],I=By(this._driver,a,f,[]);if(f.length)throw function bd(n,e){return new m.vHH(3404,!1)}();d=function FA(n,e,t){return new Zy(n,e,t)}(i,I,this._normalizer),this._triggerCache[l]=d}this._transitionEngine.registerTrigger(t,i,d)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[a,l]=DE(r);this._timelineEngine.command(a,t,l,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,a){if("@"==r.charAt(0)){const[l,d]=DE(r);return this._timelineEngine.listen(l,t,d,a)}return this._transitionEngine.listen(e,t,r,i,a)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let ev=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let a=n.initialStylesByElement.get(t);a||n.initialStylesByElement.set(t,a=new Map),this._initialStyles=a}start(){this._state<1&&(this._startStyles&&ki(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ki(this._element,this._initialStyles),this._endStyles&&(ki(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(yu(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(yu(this._element,this._endStyles),this._endStyles=null),ki(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function il(n){let e=null;return n.forEach((t,r)=>{(function Sd(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class uc{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:LE(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Ad{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return bA(e,t)}getParentElement(e){return AE(e)}query(e,t,r){return EA(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,a,l=[]){const f={duration:r,delay:i,fill:0==i?"both":"forwards"};a&&(f.easing=a);const y=new Map,I=l.filter(L=>L instanceof uc);(function Fy(n,e){return 0===n||0===e})(r,i)&&I.forEach(L=>{L.currentSnapshot.forEach((V,ee)=>y.set(ee,V))});let D=function CA(n){return n.length?n[0]instanceof Map?n:n.map(e=>kE(e)):[]}(t).map(L=>el(L));D=function DA(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((a,l)=>{r.has(l)||i.push(l),r.set(l,a)}),i.length)for(let a=1;a<e.length;a++){let l=e[a];i.forEach(d=>l.set(d,LE(n,d)))}}return e}(e,D,y);const x=function zs(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=il(e[0]),e.length>1&&(r=il(e[e.length-1]))):e instanceof Map&&(t=il(e)),t||r?new ev(n,t,r):null}(e,D);return new uc(e,D,f,x)}}let Md=(()=>{class n extends Ty{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:m.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?Cy(t):t;return lc(this._renderer,null,r,"register",[i]),new xd(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.FYo),m.LFG(pe))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class xd extends class uE{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Rd(this._id,e,t||{},this._renderer)}}class Rd{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return lc(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function lc(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const tv="@.disabled";let JE=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(a,l)=>{const d=l?.parentNode(a);d&&l.removeChild(d,a)}}createRenderer(t,r){const a=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let I=this._rendererCache.get(a);return I||(I=new nv("",a,this.engine),this._rendererCache.set(a,I)),I}const l=r.id,d=r.id+"-"+this._currentId;this._currentId++,this.engine.register(d,t);const f=I=>{Array.isArray(I)?I.forEach(f):this.engine.registerTrigger(l,d,t,I.name,I)};return r.data.animation.forEach(f),new eI(this,d,a,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(a=>{const[l,d]=a;l(d)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.FYo),m.LFG(ac),m.LFG(m.R0b))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class nv{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==tv?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class eI extends nv{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==tv?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function tI(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let a=t.slice(1),l="";return"@"!=a.charAt(0)&&([a,l]=function nI(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(a)),this.engine.listen(this.namespaceId,i,a,l,d=>{this.factory.scheduleListenerCallback(d._data||-1,r,d)})}return this.delegate.listen(e,t,r)}}let rI=(()=>{class n extends ac{constructor(t,r,i,a){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(pe),m.LFG(xE),m.LFG(sf),m.LFG(m.z2F))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const oI=[{provide:Ty,useClass:Md},{provide:sf,useFactory:function iI(){return new WE}},{provide:ac,useClass:rI},{provide:m.FYo,useFactory:function sI(n,e,t){return new JE(n,e,t)},deps:[Qa,ac,m.R0b]}],rv=[{provide:xE,useFactory:()=>new Ad},{provide:m.QbO,useValue:"BrowserAnimations"},...oI],aI=[{provide:xE,useClass:IA},{provide:m.QbO,useValue:"NoopAnimations"},...oI];let KA=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?aI:rv}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:rv,imports:[mo]}),n})();var Ur=U(2011),kd=U(6451),cc=U(5363);function lr(n,e){return(0,qr.e)((t,r)=>{let i=null,a=0,l=!1;const d=()=>l&&!i&&r.complete();t.subscribe((0,Xn.x)(r,f=>{i?.unsubscribe();let y=0;const I=a++;(0,hd.Xf)(n(f,I)).subscribe(i=(0,Xn.x)(r,D=>r.next(e?e(f,D,I,y++):D),()=>{i=null,d()}))},()=>{l=!0,d()}))})}var ZA=U(6063);class iv extends Lr.x{constructor(e=1/0,t=1/0,r=ZA.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let d=0;for(let f=1;f<r.length&&r[f]<=l;f+=2)d=f;d&&r.splice(0,d+1)}}}var Mg=U(3099);function sv(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,Mg.B)({connector:()=>new iv(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const Nd=(0,U(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function lf(n){return(0,qr.e)((e,t)=>{let r=!1;e.subscribe((0,Xn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function ov(n=av){return(0,qr.e)((e,t)=>{let r=!1;e.subscribe((0,Xn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function av(){return new Nd}function Ea(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Zi((i,a)=>n(i,a,r)):Zl.y,Jl(1),t?lf(e):ov(()=>new Nd))}var uv=U(576);function lv(n,e){return(0,uv.m)(e)?lr(()=>n,e):lr(()=>n)}var xg=U(9468),mn=U(5813);U(5867);var De=U(5861),_n=U(9681),Ws=U(4859),O=U(2090),Ao=U(1877);const cv=new Map,sM={activated:!1,tokenObservers:[]},gI={initialized:!1,enabled:!1};function Br(n){return cv.get(n)||sM}function mi(n,e){cv.set(n,e)}function kg(){return gI}class hv{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,De.Z)(function*(){t.stop();try{t.pending=new O.BH,yield function Ia(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new O.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ni=new O.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function qs(n){if(!Br(n).activated)throw Ni.create("use-before-activation",{appName:n.name})}function Ng(n,e){return fv.apply(this,arguments)}function fv(){return(fv=(0,De.Z)(function*({url:n,body:e},t){var r,i;const a={"Content-Type":"application/json"},l=t.getImmediate({optional:!0});if(l){const L=yield l.getHeartbeatsHeader();L&&(a["X-Firebase-Client"]=L)}const d={method:"POST",body:JSON.stringify(e),headers:a};let f,y;try{f=yield fetch(n,d)}catch(L){throw Ni.create("fetch-network-error",{originalErrorMessage:null===(r=L)||void 0===r?void 0:r.message})}if(200!==f.status)throw Ni.create("fetch-status-error",{httpStatus:f.status});try{y=yield f.json()}catch(L){throw Ni.create("fetch-parse-error",{originalErrorMessage:null===(i=L)||void 0===i?void 0:i.message})}const I=y.ttl.match(/^([\d.]+)(s)$/);if(!I||!I[2]||isNaN(Number(I[1])))throw Ni.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${y.ttl}`});const D=1e3*Number(I[1]),x=Date.now();return{token:y.token,expireTimeMillis:x+D,issuedAtTimeMillis:x}})).apply(this,arguments)}function dM(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const ff="firebase-app-check-store";let Pg=null;function mv(){return Pg||(Pg=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var a;e(Ni.create("storage-open",{originalErrorMessage:null===(a=i.target.error)||void 0===a?void 0:a.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(ff,{keyPath:"compositeKey"})}}catch(r){e(Ni.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),Pg)}function Lg(){return(Lg=(0,De.Z)(function*(n,e){const r=(yield mv()).transaction(ff,"readwrite"),a=r.objectStore(ff).put({compositeKey:n,value:e});return new Promise((l,d)=>{a.onsuccess=f=>{l()},r.onerror=f=>{var y;d(Ni.create("storage-set",{originalErrorMessage:null===(y=f.target.error)||void 0===y?void 0:y.message}))}})})).apply(this,arguments)}const Pd=new Ao.Yd("@firebase/app-check");function vv(n,e){return(0,O.hl)()?function Og(n,e){return function _v(n,e){return Lg.apply(this,arguments)}(function yv(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Pd.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function II(){return kg().enabled}function TI(){return wv.apply(this,arguments)}function wv(){return(wv=(0,De.Z)(function*(){const n=kg();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const pM={error:"UNKNOWN_ERROR"};function gM(n){return O.US.encodeString(JSON.stringify(n),!1)}function jg(n){return bv.apply(this,arguments)}function bv(){return(bv=(0,De.Z)(function*(n,e=!1){const t=n.app;qs(t);const r=Br(t);let a,i=r.token;if(!i){const f=yield r.cachedTokenPromise;f&&$g(f)&&(i=f)}if(!e&&i&&$g(i))return{token:i.token};let d,l=!1;if(II()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Ng(dM(t,yield TI()),n.heartbeatServiceProvider).then(y=>(r.exchangeTokenPromise=void 0,y)),l=!0);const f=yield r.exchangeTokenPromise;return yield vv(t,f),mi(t,Object.assign(Object.assign({},r),{token:f})),{token:f.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(f=>(r.exchangeTokenPromise=void 0,f)),l=!0),i=yield r.exchangeTokenPromise}catch(f){"appCheck/throttled"===f.code?Pd.warn(f.message):Pd.error(f),a=f}return i?(d={token:i.token},mi(t,Object.assign(Object.assign({},r),{token:i})),yield vv(t,i)):d=_M(a),l&&DI(t,d),d})).apply(this,arguments)}function Iv(n,e){const t=Br(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),mi(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function CI(n){const{app:e}=n,t=Br(e);let r=t.tokenRefresher;r||(r=function mM(n){const{app:e}=n;return new hv((0,De.Z)(function*(){let r;if(r=Br(e).token?yield jg(n,!0):yield jg(n),r.error)throw r.error}),()=>!0,()=>{const t=Br(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),mi(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function DI(n,e){const t=Br(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function $g(n){return n.expireTimeMillis-Date.now()>0}function _M(n){return{token:gM(pM),error:n}}class yM{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Br(this.app);for(const t of e)Iv(this.app,t.next);return Promise.resolve()}}const fc="app-check-internal";!function DM(){(0,_n._registerComponent)(new Ws.wA("app-check",n=>function vM(n,e){return new yM(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(fc).initialize()})),(0,_n._registerComponent)(new Ws.wA(fc,n=>function wM(n){return{getToken:e=>jg(n,e),addTokenListener:e=>function Ev(n,e,t,r){const{app:i}=n,a=Br(i),l={next:t,error:r,type:e};if(mi(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,l]})),a.token&&$g(a.token)){const d=a.token;Promise.resolve().then(()=>{t({token:d.token}),CI(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>CI(n))}(n,"INTERNAL",e),removeTokenListener:e=>Iv(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,_n.registerVersion)("@firebase/app-check","0.5.12")}();class Bn{constructor(){return(0,mn.vb)("app-check")}}typeof window<"u"&&window;var pc=U(127);const qg=new m.OlP("angularfire2.auth.use-emulator"),Kg=new m.OlP("angularfire2.auth.settings"),Sv=new m.OlP("angularfire2.auth.tenant-id"),gc=new m.OlP("angularfire2.auth.langugage-code"),mc=new m.OlP("angularfire2.auth.use-device-language"),Av=new m.OlP("angularfire.auth.persistence"),Mv=(n,e,t,r,i,a,l,d)=>(0,Ur.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const f=e.runOutsideAngular(()=>n.auth());if(t&&f.useEmulator(...t),r&&(f.tenantId=r),f.languageCode=i,a&&f.useDeviceLanguage(),l)for(const[y,I]of Object.entries(l))f.settings[y]=I;return d&&f.setPersistence(d),f},[t,r,i,a,l,d]);let mf=(()=>{class n{constructor(t,r,i,a,l,d,f,y,I,D,x,L){const V=new Lr.x,ee=ht(void 0).pipe((0,cc.Q)(l.outsideAngular),lr(()=>a.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,5881)))),(0,At.U)(()=>(0,Ur.on)(t,a,r)),(0,At.U)(ce=>Mv(ce,a,d,y,I,D,f,x)),sv({bufferSize:1,refCount:!1}));if(qo(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ht(null);else{ee.pipe(Ea()).subscribe();const Ge=ee.pipe(lr(Je=>Je.getRedirectResult().then(Dt=>Dt,()=>null)),mn.iC,sv({bufferSize:1,refCount:!1})),Ke=ee.pipe(lr(Je=>new ws.y(Dt=>({unsubscribe:a.runOutsideAngular(()=>Je.onAuthStateChanged(xt=>Dt.next(xt),xt=>Dt.error(xt),()=>Dt.complete()))})))),tt=ee.pipe(lr(Je=>new ws.y(Dt=>({unsubscribe:a.runOutsideAngular(()=>Je.onIdTokenChanged(xt=>Dt.next(xt),xt=>Dt.error(xt),()=>Dt.complete()))}))));this.authState=Ge.pipe(lv(Ke),(0,xg.R)(l.outsideAngular),(0,cc.Q)(l.insideAngular)),this.user=Ge.pipe(lv(tt),(0,xg.R)(l.outsideAngular),(0,cc.Q)(l.insideAngular)),this.idToken=this.user.pipe(lr(Je=>Je?(0,gn.D)(Je.getIdToken()):ht(null))),this.idTokenResult=this.user.pipe(lr(Je=>Je?(0,gn.D)(Je.getIdTokenResult()):ht(null))),this.credential=(0,kd.T)(Ge,V,this.authState.pipe(Zi(Je=>!Je))).pipe((0,At.U)(Je=>Je?.user?Je:null),(0,xg.R)(l.outsideAngular),(0,cc.Q)(l.insideAngular))}return(0,Ur.pX)(this,ee,a,{spy:{apply:(ce,Ge,Ke)=>{(ce.startsWith("signIn")||ce.startsWith("createUser"))&&Ke.then(tt=>V.next(tt))}}})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Ur.Dh),m.LFG(Ur.xv,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(mn.HU),m.LFG(qg,8),m.LFG(Kg,8),m.LFG(Sv,8),m.LFG(gc,8),m.LFG(mc,8),m.LFG(Av,8),m.LFG(Bn,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),BI=(()=>{class n{constructor(){pc.Z.registerVersion("angularfire",mn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[mf]}),n})();var Zg=U(3942);const xv="firebasestorage.googleapis.com",VI="storageBucket";class hr extends O.ZR{constructor(e,t){super($I(e),`Firebase Storage: ${t} (${$I(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,hr.prototype)}_codeEquals(e){return $I(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function $I(n){return"storage/"+n}function HI(){return new hr("unknown","An unknown error occurred, please check the error payload for server response.")}function Rv(){return new hr("canceled","User canceled the upload/download.")}function zI(){return new hr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function _c(n){return new hr("invalid-argument",n)}function WI(){return new hr("app-deleted","The Firebase app was deleted.")}function qI(n){return new hr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ta(n,e){return new hr("invalid-format","String does not match format '"+n+"': "+e)}function yf(n){throw new hr("internal-error","Internal error: "+n)}class si{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=si.makeFromUrl(e,t)}catch{return new si(e,"")}if(""===r.path)return r;throw function OM(n){return new hr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+i+"(/(.*))?$","i");function y(Je){Je.path_=decodeURIComponent(Je.path)}const D=t.replace(/[.]/g,"\\."),tt=[{regex:d,indices:{bucket:1,path:3},postModify:function a(Je){"/"===Je.path.charAt(Je.path.length-1)&&(Je.path_=Je.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${D}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:y},{regex:new RegExp(`^https?://${t===xv?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:y}];for(let Je=0;Je<tt.length;Je++){const Dt=tt[Je],xt=Dt.regex.exec(e);if(xt){let $r=xt[Dt.indices.path];$r||($r=""),r=new si(xt[Dt.indices.bucket],$r),Dt.postModify(r);break}}if(null==r)throw function _f(n){return new hr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class BM{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Qg(n){return"string"==typeof n||n instanceof String}function Nv(n){return Xg()&&n instanceof Blob}function Xg(){return typeof Blob<"u"}function Pv(n,e,t,r){if(r<e)throw _c(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw _c(`Invalid value for '${n}'. Expected ${t} or less.`)}function bu(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function YI(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Ca=(()=>{return(n=Ca||(Ca={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",Ca;var n})();class $M{constructor(e,t,r,i,a,l,d,f,y,I,D){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=d,this.errorCallback_=f,this.timeout_=y,this.progressCallback_=I,this.connectionFactory_=D,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,L)=>{this.resolve_=x,this.reject_=L,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,l=this.reject_,d=i.connection;if(i.wasSuccessCode)try{const f=this.callback_(d,d.getResponse());!function ZI(n){return void 0!==n}(f)?a():a(f)}catch(f){l(f)}else if(null!==d){const f=HI();f.serverResponse=d.getErrorText(),l(this.errorCallback_?this.errorCallback_(d,f):f)}else l(i.canceled?this.appDelete_?WI():Rv():function PM(){return new hr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new vf(!1,null,!0)):this.backoffId_=function KI(n,e,t){let r=1,i=null,a=null,l=!1,d=0;function f(){return 2===d}let y=!1;function I(...ce){y||(y=!0,e.apply(null,ce))}function D(ce){i=setTimeout(()=>{i=null,n(L,f())},ce)}function x(){a&&clearTimeout(a)}function L(ce,...Ge){if(y)return void x();if(ce)return x(),void I.call(null,ce,...Ge);if(f()||l)return x(),void I.call(null,ce,...Ge);let tt;r<64&&(r*=2),1===d?(d=2,tt=0):tt=1e3*(r+Math.random()),D(tt)}let V=!1;function ee(ce){V||(V=!0,x(),!y&&(null!==i?(ce||(d=2),clearTimeout(i),D(0)):ce||(d=1)))}return D(0),a=setTimeout(()=>{l=!0,ee(!0)},t),ee}((r,i)=>{if(i)return void r(!1,new vf(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const l=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const d=a.getErrorCode()===Ca.NO_ERROR,f=a.getStatus();if(!d||this.isRetryStatusCode_(f)){const I=a.getErrorCode()===Ca.ABORT;return void r(!1,new vf(!1,null,I))}const y=-1!==this.successCodes_.indexOf(f);r(!0,new vf(y,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function VM(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),a=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||a}}class vf{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function ZM(...n){const e=function KM(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(Xg())return new Blob(n);throw new hr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Qi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ov{constructor(e,t){this.data=e,this.contentType=t||null}}function Lv(n,e){switch(n){case Qi.RAW:return new Ov(Fv(e));case Qi.BASE64:case Qi.BASE64URL:return new Ov(XI(n,e));case Qi.DATA_URL:return new Ov(function Uv(n){const e=new JI(n);return e.base64?XI(Qi.BASE64,e.rest):function QM(n){let e;try{e=decodeURIComponent(n)}catch{throw Ta(Qi.DATA_URL,"Malformed data URL.")}return Fv(e)}(e.rest)}(e),function Bv(n){return new JI(n).contentType}(e))}throw HI()}function Fv(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function XI(n,e){switch(n){case Qi.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw Ta(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Qi.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw Ta(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function QI(n){return atob(n)}(e)}catch{throw Ta(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class JI{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Ta(Qi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function eT(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Ks{constructor(e,t){let r=0,i="";Nv(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(Nv(this.data_)){const i=function YM(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Ks(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Ks(r,!0)}}static getBlob(...e){if(Xg()){const t=e.map(r=>r instanceof Ks?r.data_:r);return new Ks(ZM.apply(null,t))}{const t=e.map(l=>Qg(l)?Lv(Qi.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(l=>{for(let d=0;d<l.length;d++)i[a++]=l[d]}),new Ks(i,!0)}}uploadData(){return this.data_}}function Vv(n){let e;try{e=JSON.parse(n)}catch{return null}return function kv(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function tT(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function JM(n,e){return e}class xr{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||JM}}let wf=null;function Jg(){if(wf)return wf;const n=[];n.push(new xr("bucket")),n.push(new xr("generation")),n.push(new xr("metageneration")),n.push(new xr("name","fullPath",!0));const t=new xr("name");t.xform=function e(a,l){return function ex(n){return!Qg(n)||n.length<2?n:tT(n)}(l)},n.push(t);const i=new xr("size");return i.xform=function r(a,l){return void 0!==l?Number(l):l},n.push(i),n.push(new xr("timeCreated")),n.push(new xr("updated")),n.push(new xr("md5Hash",null,!0)),n.push(new xr("cacheControl",null,!0)),n.push(new xr("contentDisposition",null,!0)),n.push(new xr("contentEncoding",null,!0)),n.push(new xr("contentLanguage",null,!0)),n.push(new xr("contentType",null,!0)),n.push(new xr("metadata","customMetadata",!0)),wf=n,wf}function rT(n,e,t){const r=Vv(e);return null===r?null:function $v(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const l=t[a];r[l.local]=l.xform(r,e[l.server])}return function nT(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new si(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function Gv(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const zv="prefixes";class Mo{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function xo(n){if(!n)throw HI()}function tm(n,e){return function t(r,i){const a=rT(n,i,e);return xo(null!==a),a}}function Ld(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function Yg(){return new hr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function GI(){return new hr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function x1(n){return new hr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function NM(n){return new hr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function Fd(n){const e=Ld(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function M1(n){return new hr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function rx(n,e,t){const i=bu(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,d=new Mo(i,"GET",tm(n,t),l);return d.errorHandler=Fd(e),d}function oT(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const d=bu(e.bucketOnlyServerUrl(),n.host,n._protocol),y=n.maxOperationRetryTime,I=new Mo(d,"GET",function tx(n,e){return function t(r,i){const a=function sT(n,e,t){const r=Vv(t);return null===r?null:function iT(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[zv])for(const i of t[zv]){const a=i.replace(/\/$/,""),l=n._makeStorageReference(new si(e,a));r.prefixes.push(l)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new si(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return xo(null!==a),a}}(n,e.bucket),y);return I.urlParams=a,I.errorHandler=Ld(e),I}function uT(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function sx(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class nm{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function Wv(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{xo(!1)}return xo(!!t&&-1!==(e||["active"]).indexOf(t)),t}const lx={STATE_CHANGED:"state_changed"},Pi={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function qv(n){switch(n){case"running":case"pausing":case"canceling":return Pi.RUNNING;case"paused":return Pi.PAUSED;case"success":return Pi.SUCCESS;case"canceled":return Pi.CANCELED;default:return Pi.ERROR}}class bf{constructor(e,t,r){if(function jM(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function yc(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class hT extends class dT{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ca.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ca.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ca.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw yf("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw yf("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw yf("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw yf("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw yf("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Zs(){return new hT}class fT{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Jg(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function ox(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l=uT(e,r,i),d={name:l.fullPath},f=bu(a,n.host,n._protocol),I={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},D=Gv(l,t),V=new Mo(f,"POST",function L(ee){let ce;Wv(ee);try{ce=ee.getResponseHeader("X-Goog-Upload-URL")}catch{xo(!1)}return xo(Qg(ce)),ce},n.maxUploadRetryTime);return V.urlParams=d,V.headers=I,V.body=D,V.errorHandler=Ld(e),V}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Zs,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function ax(n,e,t,r){const f=new Mo(t,"POST",function a(y){const I=Wv(y,["active","final"]);let D=null;try{D=y.getResponseHeader("X-Goog-Upload-Size-Received")}catch{xo(!1)}D||xo(!1);const x=Number(D);return xo(!isNaN(x)),new nm(x,r.size(),"final"===I)},n.maxUploadRetryTime);return f.headers={"X-Goog-Upload-Command":"query"},f.errorHandler=Ld(e),f}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,Zs,t,r);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new nm(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let l;try{l=function ux(n,e,t,r,i,a,l,d){const f=new nm(0,0);if(l?(f.current=l.current,f.total=l.total):(f.current=0,f.total=r.size()),r.size()!==f.total)throw function FM(){return new hr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const y=f.total-f.current;let I=y;i>0&&(I=Math.min(I,i));const D=f.current,V={"X-Goog-Upload-Command":I===y?"upload, finalize":"upload","X-Goog-Upload-Offset":`${f.current}`},ee=r.slice(D,D+I);if(null===ee)throw zI();const tt=new Mo(t,"POST",function ce(Je,Dt){const xt=Wv(Je,["active","final"]),un=f.current+I,$r=r.size();let Uo;return Uo="final"===xt?tm(e,a)(Je,Dt):null,new nm(un,$r,"final"===xt,Uo)},e.maxUploadRetryTime);return tt.headers=V,tt.body=ee.uploadData(),tt.progressCallback=d||null,tt.errorHandler=Ld(n),tt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(f){return this._error=f,void this._transition("error")}const d=this._ref.storage._makeRequest(l,Zs,i,a);this._request=d,d.getPromise().then(f=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(f.current),f.finalized?(this._metadata=f.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=rx(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Zs,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function lT(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},f=function d(){let tt="";for(let Je=0;Je<2;Je++)tt+=Math.random().toString().slice(2);return tt}();l["Content-Type"]="multipart/related; boundary="+f;const y=uT(e,r,i),I=Gv(y,t),L=Ks.getBlob("--"+f+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+I+"\r\n--"+f+"\r\nContent-Type: "+y.contentType+"\r\n\r\n",r,"\r\n--"+f+"--");if(null===L)throw zI();const V={name:y.fullPath},ee=bu(a,n.host,n._protocol),Ge=n.maxUploadRetryTime,Ke=new Mo(ee,"POST",tm(n,t),Ge);return Ke.urlParams=V,Ke.headers=l,Ke.body=L.uploadData(),Ke.errorHandler=Ld(e),Ke}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Zs,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Rv(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=qv(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new bf(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(qv(this._state)){case Pi.SUCCESS:yc(this._resolve.bind(null,this.snapshot))();break;case Pi.CANCELED:case Pi.ERROR:yc(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(qv(this._state)){case Pi.RUNNING:case Pi.PAUSED:e.next&&yc(e.next.bind(e,this.snapshot))();break;case Pi.SUCCESS:e.complete&&yc(e.complete.bind(e))();break;default:e.error&&yc(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class vc{constructor(e,t){this._service=e,this._location=t instanceof si?t:si.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new vc(e,t)}get root(){const e=new si(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return tT(this._location.path)}get storage(){return this._service}get parent(){const e=function XM(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new si(this._location.bucket,e);return new vc(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw qI(e)}}function pT(n,e,t){return Ef.apply(this,arguments)}function Ef(){return(Ef=(0,De.Z)(function*(n,e,t){const i=yield Bd(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield pT(n,e,i.nextPageToken))})).apply(this,arguments)}function Bd(n,e){null!=e&&"number"==typeof e.maxResults&&Pv("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=oT(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Zs)}function yx(n){n._throwIfRoot("getDownloadURL");const e=function ix(n,e,t){const i=bu(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,d=new Mo(i,"GET",function nx(n,e){return function t(r,i){const a=rT(n,i,e);return xo(null!==a),function Hv(n,e,t,r){const i=Vv(e);if(null===i||!Qg(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const l=encodeURIComponent;return a.split(",").map(y=>{const D=n.fullPath;return bu("/b/"+l(n.bucket)+"/o/"+l(D),t,r)+YI({alt:"media",token:y})})[0]}(a,i,n.host,n._protocol)}}(n,t),l);return d.errorHandler=Fd(e),d}(n.storage,n._location,Jg());return n.storage.makeRequestWithTokens(e,Zs).then(t=>{if(null===t)throw function UM(){return new hr("no-download-url","The given file does not have any download URLs.")}();return t})}function If(n,e){const t=function jv(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new si(n._location.bucket,t);return new vc(n.storage,r)}function Yv(n,e){if(n instanceof Qv){const t=n;if(null==t._bucket)throw function LM(){return new hr("no-default-bucket","No default bucket found. Did you set the '"+VI+"' property when initializing the app?")}();const r=new vc(t,t._bucket);return null!=e?Yv(r,e):r}return void 0!==e?If(n,e):n}function gT(n,e){if(e&&function vx(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof Qv)return function wx(n,e){return new vc(n,e)}(n,e);throw _c("To use ref(service, url), the first argument must be a Storage instance.")}return Yv(n,e)}function im(n,e){const t=e?.[VI];return null==t?null:si.makeFromBucketSpec(t,n)}class Qv{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=xv,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?si.makeFromBucketSpec(i,this._host):im(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?si.makeFromBucketSpec(this._url,e):im(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Pv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Pv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,De.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,De.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new vc(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new BM(WI());{const a=function qM(n,e,t,r,i,a){const l=YI(n.urlParams),d=n.url+l,f=Object.assign({},n.headers);return function zM(n,e){e&&(n["X-Firebase-GMPID"]=e)}(f,e),function HM(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(f,t),function GM(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(f,a),function WM(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(f,r),new $M(d,n.method,f,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){var r=this;return(0,De.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const _T="@firebase/storage";function ew(n,e){return gT(n=(0,O.m9)(n),e)}function IT(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Qv(t,r,i,e,_n.SDK_VERSION)}!function Mx(){(0,_n._registerComponent)(new Ws.wA("storage",IT,"PUBLIC").setMultipleInstances(!0)),(0,_n.registerVersion)(_T,"0.9.9",""),(0,_n.registerVersion)(_T,"0.9.9","esm2017")}();class Tf{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class TT{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Tf(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new Tf(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?l=>t(new Tf(l,this,this._ref)):{next:t.next?l=>t.next(new Tf(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class _i{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Xi(e,this._service))}get items(){return this._delegate.items.map(e=>new Xi(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Xi{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function bT(n,e){return If(n,e)}(this._delegate,e);return new Xi(t,this.storage)}get root(){return new Xi(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Xi(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new TT(function Xv(n,e,t){return function gx(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new fT(n,new Ks(e),t)}(n=(0,O.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Qi.RAW,r){this._throwIfRoot("putString");const i=Lv(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new TT(new fT(this._delegate,new Ks(i.data,!0),a),this)}listAll(){return function Dx(n){return function Da(n){const e={prefixes:[],items:[]};return pT(n,e).then(()=>e)}(n=(0,O.m9)(n))}(this._delegate).then(e=>new _i(e,this.storage))}list(e){return function Cx(n,e){return Bd(n=(0,O.m9)(n),e)}(this._delegate,e||void 0).then(t=>new _i(t,this.storage))}getMetadata(){return function Ix(n){return function mx(n){n._throwIfRoot("getMetadata");const e=rx(n.storage,n._location,Jg());return n.storage.makeRequestWithTokens(e,Zs)}(n=(0,O.m9)(n))}(this._delegate)}updateMetadata(e){return function Tx(n,e){return function _x(n,e){n._throwIfRoot("updateMetadata");const t=function R1(n,e,t,r){const a=bu(e.fullServerUrl(),n.host,n._protocol),d=Gv(t,r),y=n.maxOperationRetryTime,I=new Mo(a,"PATCH",tm(n,r),y);return I.headers={"Content-Type":"application/json; charset=utf-8"},I.body=d,I.errorHandler=Fd(e),I}(n.storage,n._location,e,Jg());return n.storage.makeRequestWithTokens(t,Zs)}(n=(0,O.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function wT(n){return yx(n=(0,O.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Jv(n){return function rm(n){n._throwIfRoot("deleteObject");const e=function k1(n,e){const r=bu(e.fullServerUrl(),n.host,n._protocol),d=new Mo(r,"DELETE",function l(f,y){},n.maxOperationRetryTime);return d.successCodes=[200,204],d.errorHandler=Fd(e),d}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Zs)}(n=(0,O.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw qI(e)}}class CT{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(DT(e))throw _c("ref() expected a child path but got a URL, use refFromURL instead.");return new Xi(ew(this._delegate,e),this)}refFromURL(e){if(!DT(e))throw _c("refFromURL() expected a full URL but got a child path, use ref() instead.");try{si.makeFromUrl(e,this._delegate.host)}catch{throw _c("refFromUrl() expected a valid full URL but got an invalid one.")}return new Xi(ew(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function ET(n,e,t,r={}){!function mT(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,O.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function DT(n){return/^[A-Za-z]+:\/\//.test(n)}function AT(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new CT(t,r)}function om(n){const e=function xx(n){return new ws.y(e=>{const t=l=>e.next(l);t(n.snapshot);const a=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){a()}}).pipe(kb(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,At.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function am(n){return{getDownloadURL:()=>ht(void 0).pipe(mn.fc,lr(()=>n.getDownloadURL()),mn.iC),getMetadata:()=>ht(void 0).pipe(mn.fc,lr(()=>n.getMetadata()),mn.iC),delete:()=>(0,gn.D)(n.delete()),child:e=>am(n.child(e)),updateMetadata:e=>(0,gn.D)(n.updateMetadata(e)),put:(e,t)=>om(n.put(e,t)),putString:(e,t,r)=>om(n.putString(e,t,r)),list:e=>(0,gn.D)(n.list(e)),listAll:()=>(0,gn.D)(n.listAll())}}!function Cf(n){const e={TaskState:Pi,TaskEvent:lx,StringFormat:Qi,Storage:CT,Reference:Xi};n.INTERNAL.registerComponent(new Ws.wA("storage-compat",AT,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.17")}(Zg.Z);const MT=new m.OlP("angularfire2.storageBucket"),Rx=new m.OlP("angularfire2.storage.maxUploadRetryTime"),kx=new m.OlP("angularfire2.storage.maxOperationRetryTime"),Nx=new m.OlP("angularfire2.storage.use-emulator");let tw=(()=>{class n{constructor(t,r,i,a,l,d,f,y,I,D){const x=(0,Ur.on)(t,l,r);this.storage=(0,Ur.cc)(`${x.name}.storage.${i}`,"AngularFireStorage",x.name,()=>{const L=l.runOutsideAngular(()=>x.storage(i||void 0)),V=I;return V&&L.useEmulator(...V),f&&L.setMaxUploadRetryTime(f),y&&L.setMaxOperationRetryTime(y),L},[f,y])}ref(t){return am(this.storage.ref(t))}refFromURL(t){return am(this.storage.refFromURL(t))}upload(t,r,i){return am(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Ur.Dh),m.LFG(Ur.xv,8),m.LFG(MT,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(mn.HU),m.LFG(Rx,8),m.LFG(kx,8),m.LFG(Nx,8),m.LFG(Bn,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),xT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})(),um=(()=>{class n{constructor(){pc.Z.registerVersion("angularfire",mn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[tw],imports:[xT]}),n})();function Df(){return(0,qr.e)((n,e)=>{let t,r=!1;n.subscribe((0,Xn.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function F1(n,e,t,r,i){return(a,l)=>{let d=t,f=e,y=0;a.subscribe((0,Xn.x)(l,I=>{const D=y++;f=d?n(f,I,D):(d=!0,I),r&&l.next(f)},i&&(()=>{d&&l.next(f),l.complete()})))}}function sl(n,e){return(0,qr.e)(F1(n,e,arguments.length>=2,!0))}U(5881);var ft,RT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ji={},lm=lm||{},Bt=RT||self;function nw(){}function rw(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function cm(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var iw="closure_uid_"+(1e9*Math.random()>>>0),Lx=0;function kT(n,e,t){return n.call.apply(n.bind,arguments)}function NT(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function oi(n,e,t){return(oi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?kT:NT).apply(null,arguments)}function Sf(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Kr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var l=Array(arguments.length-2),d=2;d<arguments.length;d++)l[d-2]=arguments[d];return e.prototype[i].apply(r,l)}}function ol(){this.s=this.s,this.o=this.o}var PT={};ol.prototype.s=!1,ol.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function Ox(n){return Object.prototype.hasOwnProperty.call(n,iw)&&n[iw]||(n[iw]=++Lx)}(this);delete PT[n]}},ol.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const OT=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},sw=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let a=0;a<r;a++)a in i&&e.call(t,i[a],a,n)};function ow(n){return Array.prototype.concat.apply([],arguments)}function dm(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function hm(n){return/^[\s\xa0]*$/.test(n)}var ts,FT=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function es(n,e){return-1!=n.indexOf(e)}function fm(n,e){return n<e?-1:n>e?1:0}e:{var Ux=Bt.navigator;if(Ux){var Bx=Ux.userAgent;if(Bx){ts=Bx;break e}}ts=""}function UT(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Vx(n){const e={};for(const t in n)e[t]=n[t];return e}var jx="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $x(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<jx.length;a++)t=jx[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function BT(n){return BT[" "](n),n}BT[" "]=nw;var Mf,n,B1=es(ts,"Opera"),wc=es(ts,"Trident")||es(ts,"MSIE"),Af=es(ts,"Edge"),gm=Af||wc,aw=es(ts,"Gecko")&&!(es(ts.toLowerCase(),"webkit")&&!es(ts,"Edge"))&&!(es(ts,"Trident")||es(ts,"MSIE"))&&!es(ts,"Edge"),V1=es(ts.toLowerCase(),"webkit")&&!es(ts,"Edge");function mm(){var n=Bt.document;return n?n.documentMode:void 0}e:{var uw="",_m=(n=ts,aw?/rv:([^\);]+)(\)|;)/.exec(n):Af?/Edge\/([\d\.]+)/.exec(n):wc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):V1?/WebKit\/(\S+)/.exec(n):B1?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(_m&&(uw=_m?_m[1]:""),wc){var VT=mm();if(null!=VT&&VT>parseFloat(uw)){Mf=String(VT);break e}}Mf=uw}var Hx={};var zx=Bt.document&&wc&&(mm()||parseInt(Mf,10))||void 0,j1=function(){if(!Bt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Bt.addEventListener("test",nw,e),Bt.removeEventListener("test",nw,e)}catch{}return n}();function Oi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function ym(n,e){if(Oi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(aw){e:{try{BT(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Wx[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&ym.Z.h.call(this)}}Oi.prototype.h=function(){this.defaultPrevented=!0},Kr(ym,Oi);var Wx={2:"touch",3:"pen",4:"mouse"};ym.prototype.h=function(){ym.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Rf="closure_listenable_"+(1e6*Math.random()|0),qx=0;function $1(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++qx,this.ca=this.fa=!1}function vm(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function kf(n){this.src=n,this.g={},this.h=0}function wm(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=OT(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(vm(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function jT(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ca&&a.listener==e&&a.capture==!!t&&a.ia==r)return i}return-1}kf.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=jT(n,e,r,i);return-1<l?(e=n[l],t||(e.fa=!1)):((e=new $1(e,this.src,a,!!r,i)).fa=t,n.push(e)),e};var Ts="closure_lm_"+(1e6*Math.random()|0),cw={};function bm(n,e,t,r,i){if(r&&r.once)return HT(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)bm(n,e[a],t,r,i);return null}return t=fw(t),n&&n[Rf]?n.N(e,t,cm(r)?!!r.capture:!!r,i):$T(n,e,t,!1,r,i)}function $T(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=cm(i)?!!i.capture:!!i,d=Im(n);if(d||(n[Ts]=d=new kf(n)),(t=d.add(e,t,r,l,a)).proxy)return t;if(r=function Ys(){var e=hw;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)j1||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(GT(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function HT(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)HT(n,e[a],t,r,i);return null}return t=fw(t),n&&n[Rf]?n.O(e,t,cm(r)?!!r.capture:!!r,i):$T(n,e,t,!0,r,i)}function Em(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)Em(n,e[a],t,r,i);else r=cm(r)?!!r.capture:!!r,t=fw(t),n&&n[Rf]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=jT(a=n.g[e],t,r,i))&&(vm(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=Im(n))&&(e=n.g[e.toString()],n=-1,e&&(n=jT(e,t,r,i)),(t=-1<n?e[n]:null)&&dw(t))}function dw(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Rf])wm(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(GT(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Im(e))?(wm(t,n),0==t.h&&(t.src=null,e[Ts]=null)):vm(n)}}}function GT(n){return n in cw?cw[n]:cw[n]="on"+n}function hw(n,e){if(n.ca)n=!0;else{e=new ym(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&dw(n),n=t.call(r,e)}return n}function Im(n){return(n=n[Ts])instanceof kf?n:null}var Tm="__closure_events_fn_"+(1e9*Math.random()>>>0);function fw(n){return"function"==typeof n?n:(n[Tm]||(n[Tm]=function(e){return n.handleEvent(e)}),n[Tm])}function Vr(){ol.call(this),this.i=new kf(this),this.P=this,this.I=null}function Zr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Oi(e,n);else if(e instanceof Oi)e.target=e.target||n;else{var i=e;$x(e=new Oi(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=Cm(l,r,!0,e)&&i}if(i=Cm(l=e.g=n,r,!0,e)&&i,i=Cm(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=Cm(l=e.g=t[a],r,!1,e)&&i}function Cm(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.ca&&l.capture==t){var d=l.listener,f=l.ia||l.src;l.fa&&wm(n.i,l),i=!1!==d.call(f,r)&&i}}return i&&!r.defaultPrevented}Kr(Vr,ol),Vr.prototype[Rf]=!0,Vr.prototype.removeEventListener=function(n,e,t,r){Em(this,n,e,t,r)},Vr.prototype.M=function(){if(Vr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)vm(t[r]);delete n.g[e],n.h--}}this.I=null},Vr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Vr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Dm=Bt.JSON.stringify;function Kx(){var n=WT;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var mw,Eu=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new zT,n=>n.reset());class zT{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function gw(n){Bt.setTimeout(()=>{throw n},0)}function Ro(n,e){mw||function H1(){var n=Bt.Promise.resolve(void 0);mw=function(){n.then(Zx)}}(),_w||(mw(),_w=!0),WT.add(n,e)}var _w=!1,WT=new class pw{constructor(){this.h=this.g=null}add(e,t){const r=Eu.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Zx(){for(var n;n=Kx();){try{n.h.call(n.g)}catch(t){gw(t)}var e=Eu;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}_w=!1}function Sm(n,e){Vr.call(this),this.h=n||1,this.g=e||Bt,this.j=oi(this.kb,this),this.l=Date.now()}function Am(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function qT(n,e,t){if("function"==typeof n)t&&(n=oi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=oi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Bt.setTimeout(n,e||0)}function yw(n){n.g=qT(()=>{n.g=null,n.i&&(n.i=!1,yw(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Kr(Sm,Vr),(ft=Sm.prototype).da=!1,ft.S=null,ft.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Zr(this,"tick"),this.da&&(Am(this),this.start()))}},ft.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ft.M=function(){Sm.Z.M.call(this),Am(this),delete this.g};class Yx extends ol{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:yw(this)}M(){super.M(),this.g&&(Bt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vd(n){ol.call(this),this.h=n,this.g={}}Kr(Vd,ol);var Qx=[];function Mm(n,e,t,r){Array.isArray(t)||(t&&(Qx[0]=t.toString()),t=Qx);for(var i=0;i<t.length;i++){var a=bm(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function vw(n){UT(n.g,function(e,t){this.g.hasOwnProperty(t)&&dw(e)},n),n.g={}}function Nf(){this.g=!0}function bc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Rm(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return Dm(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Vd.prototype.M=function(){Vd.Z.M.call(this),vw(this)},Vd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Nf.prototype.Aa=function(){this.g=!1},Nf.prototype.info=function(){};var al={},YT=null;function Pf(){return YT=YT||new Vr}function ww(n){Oi.call(this,al.Ma,n)}function Of(n){const e=Pf();Zr(e,new ww(e,n))}function QT(n,e){Oi.call(this,al.STAT_EVENT,n),this.stat=e}function ns(n){const e=Pf();Zr(e,new QT(e,n))}function Xx(n,e){Oi.call(this,al.Na,n),this.size=e}function jd(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Bt.setTimeout(function(){n()},e)}al.Ma="serverreachability",Kr(ww,Oi),al.STAT_EVENT="statevent",Kr(QT,Oi),al.Na="timingevent",Kr(Xx,Oi);var km={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},XT={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function bw(){}function eR(){}bw.prototype.h=null;var Ew,Nm={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function JT(){Oi.call(this,"d")}function eC(){Oi.call(this,"c")}function Ec(){}function Lf(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Vd(this),this.P=nC,this.W=new Sm(n=gm?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new tC}function tC(){this.i=null,this.g="",this.h=!1}Kr(JT,Oi),Kr(eC,Oi),Kr(Ec,bw),Ec.prototype.g=function(){return new XMLHttpRequest},Ec.prototype.i=function(){return{}},Ew=new Ec;var nC=45e3,Iu={},Ff={};function Uf(n,e,t){n.K=1,n.v=Um(Tu(e)),n.s=t,n.U=!0,Pm(n,null)}function Pm(n,e){n.F=Date.now(),ul(n),n.A=Tu(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),aR(t.h,"t",r),n.C=0,t=n.l.H,n.h=new tC,n.g=aL(n.l,t?e:null,!n.s),0<n.O&&(n.L=new Yx(oi(n.Ia,n,n.g),n.O)),Mm(n.V,n.g,"readystatechange",n.gb),e=n.H?Vx(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Of(1),function KT(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",d=a.split("&"),f=0;f<d.length;f++){var y=d[f].split("=");if(1<y.length){var I=y[0];y=y[1];var D=I.split("_");l=2<=D.length&&"type"==D[1]?l+(I+"=")+y+"&":l+(I+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.X,n.s)}function rC(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Om(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=Iw(n,t),i==Ff){4==e&&(n.o=4,ns(14),r=!1),bc(n.j,n.m,null,"[Incomplete Response]");break}if(i==Iu){n.o=4,ns(15),bc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}bc(n.j,n.m,i,null),Fm(n,i)}rC(n)&&i!=Ff&&i!=Iu&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ns(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),hR(e),e.L=!0,ns(11))):(bc(n.j,n.m,t,"[Invalid Chunked Response]"),$d(n),Lm(n))}function Iw(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Ff:(t=Number(e.substring(t,r)),isNaN(t)?Iu:(r+=1)+t>e.length?Ff:(e=e.substr(r,t),n.C=r+t,e))}function ul(n){n.Y=Date.now()+n.P,tR(n,n.P)}function tR(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=jd(oi(n.eb,n),e)}function Tw(n){n.B&&(Bt.clearTimeout(n.B),n.B=null)}function Lm(n){0==n.l.G||n.I||rL(n.l,n)}function $d(n){Tw(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Am(n.W),vw(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Fm(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||h(t.i,n)))if(t.I=n.N,!n.J&&h(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;uC(t),oC(t)}dR(t),ns(18)}}else t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=jd(oi(t.ab,t),6e3));if(1>=c(t.i)&&t.ka){try{t.ka()}catch{}t.ka=void 0}}else $f(t,11)}else if((n.J||t.g==n)&&uC(t),!hm(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let y=i[e];if(t.U=y[0],y=y[1],2==t.G)if("c"==y[0]){t.J=y[1],t.la=y[2];const I=y[3];null!=I&&(t.ma=I,t.h.info("VER="+t.ma));const D=y[4];null!=D&&(t.za=D,t.h.info("SVER="+t.za));const x=y[5];null!=x&&"number"==typeof x&&0<x&&(t.K=r=1.5*x,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const L=n.g;if(L){const V=L.g?L.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(V){var a=r.i;!a.g&&(es(V,"spdy")||es(V,"quic")||es(V,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(p(a,a.h),a.h=null))}if(r.D){const ee=L.g?L.g.getResponseHeader("X-HTTP-Session-Id"):null;ee&&(r.sa=ee,Vn(r.F,r.D,ee))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var l=n;if((r=t).oa=oL(r,r.H?r.la:null,r.W),l.J){v(r.i,l);var d=l,f=r.K;f&&d.setTimeout(f),d.B&&(Tw(d),ul(d)),r.g=l}else tL(r);0<t.l.length&&aC(t)}else"stop"!=y[0]&&"close"!=y[0]||$f(t,7);else 3==t.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?$f(t,7):lR(t):"noop"!=y[0]&&t.j&&t.j.wa(y),t.A=0)}Of(4)}catch{}}function Cw(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(rw(n)||"string"==typeof n)sw(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(rw(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function nR(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(rw(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}}function Hd(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Hd)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Dw(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];ll(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)ll(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function ll(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(ft=Lf.prototype).setTimeout=function(n){this.P=n},ft.gb=function(n){n=n.target;const e=this.L;e&&3==ko(n)?e.l():this.Ia(n)},ft.Ia=function(n){try{if(n==this.g)e:{const I=ko(this.g);var e=this.g.Da();const D=this.g.ba();if(!(3>I)&&(3!=I||gm||this.g&&(this.h.h||this.g.ga()||zm(this.g)))){this.I||4!=I||7==e||Of(8==e||0>=D?3:2),Tw(this);var t=this.g.ba();this.N=t;t:if(rC(this)){var r=zm(this.g);n="";var i=r.length,a=4==ko(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){$d(this),Lm(this);var l="";break t}this.h.i=new Bt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ga();if(this.i=200==t,function ZT(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.X,I,t),this.i){if(this.$&&!this.J){t:{if(this.g){var d,f=this.g;if((d=f.g?f.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!hm(d)){var y=d;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,ns(12),$d(this),Lm(this);break e}bc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Fm(this,t)}this.U?(Om(this,I,l),gm&&this.i&&3==I&&(Mm(this.V,this.W,"tick",this.fb),this.W.start())):(bc(this.j,this.m,l,null),Fm(this,l)),4==I&&$d(this),this.i&&!this.I&&(4==I?rL(this.l,this):(this.i=!1,ul(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,ns(12)):(this.o=0,ns(13)),$d(this),Lm(this)}}}catch{}},ft.fb=function(){if(this.g){var n=ko(this.g),e=this.g.ga();this.C<e.length&&(Tw(this),Om(this,n,e),this.i&&4!=n&&ul(this))}},ft.cancel=function(){this.I=!0,$d(this)},ft.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function xm(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Of(3),ns(17)),$d(this),this.o=2,Lm(this)):tR(this,this.Y-n)},(ft=Hd.prototype).R=function(){Dw(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},ft.T=function(){return Dw(this),this.g.concat()},ft.get=function(n,e){return ll(this.h,n)?this.h[n]:e},ft.set=function(n,e){ll(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},ft.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],a=this.get(i);n.call(e,a,i,this)}};var Sw=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ic(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Ic){this.g=void 0!==e?e:n.g,Bf(this,n.j),this.s=n.s,Gd(this,n.i),Aw(this,n.m),this.l=n.l,e=n.h;var t=new Vm;t.i=e.i,e.g&&(t.g=new Hd(e.g),t.h=e.h),Mw(this,t),this.o=n.o}else n&&(t=String(n).match(Sw))?(this.g=!!e,Bf(this,t[1]||"",!0),this.s=Bm(t[2]||""),Gd(this,t[3]||"",!0),Aw(this,t[4]),this.l=Bm(t[5]||"",!0),Mw(this,t[6]||"",!0),this.o=Bm(t[7]||"")):(this.g=!!e,this.h=new Vm(null,this.g))}function Tu(n){return new Ic(n)}function Bf(n,e,t){n.j=t?Bm(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Gd(n,e,t){n.i=t?Bm(e,!0):e}function Aw(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Mw(n,e,t){e instanceof Vm?(n.h=e,function Z1(n,e){e&&!n.j&&(cl(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(sR(this,r),aR(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Vf(e,q1)),n.h=new Vm(e,n.g))}function Vn(n,e,t){n.h.set(e,t)}function Um(n){return Vn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Bm(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Vf(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,iR),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function iR(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ic.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Vf(e,sC,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Vf(e,sC,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Vf(t,"/"==t.charAt(0)?W1:z1,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Vf(t,K1)),n.join("")};var sC=/[#\/\?@]/g,z1=/[#\?:]/g,W1=/[#\?]/g,q1=/[#\?@]/g,K1=/#/g;function Vm(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function cl(n){n.g||(n.g=new Hd,n.h=0,n.i&&function iC(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function sR(n,e){cl(n),e=jf(n,e),ll(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,ll((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Dw(n)))}function oR(n,e){return cl(n),e=jf(n,e),ll(n.g.h,e)}function aR(n,e,t){sR(n,e),0<t.length&&(n.i=null,n.g.set(jf(n,e),dm(t)),n.h+=t.length)}function jf(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function s(n){this.l=n||o,n=Bt.PerformanceNavigationTiming?0<(n=Bt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Bt.g&&Bt.g.Ea&&Bt.g.Ea()&&Bt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ft=Vm.prototype).add=function(n,e){cl(this),this.i=null,n=jf(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ft.forEach=function(n,e){cl(this),this.g.forEach(function(t,r){sw(t,function(i){n.call(e,i,r,this)},this)},this)},ft.T=function(){cl(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],a=0;a<i.length;a++)t.push(e[r]);return t},ft.R=function(n){cl(this);var e=[];if("string"==typeof n)oR(this,n)&&(e=ow(e,this.g.get(jf(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=ow(e,n[t])}return e},ft.set=function(n,e){return cl(this),this.i=null,oR(this,n=jf(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ft.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},ft.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var l=i;""!==r[a]&&(l+="="+encodeURIComponent(String(r[a]))),n.push(l)}}return this.i=n.join("&")};var o=10;function u(n){return!!n.h||!!n.g&&n.g.size>=n.j}function c(n){return n.h?1:n.g?n.g.size:0}function h(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function p(n,e){n.g?n.g.add(e):n.h=e}function v(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function b(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return dm(n.i)}function T(){}function M(){this.g=new T}function N(n,e,t){const r=t||"";try{Cw(n,function(i,a){let l=i;cm(i)&&(l=Dm(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function X(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function oe(n){this.l=n.$b||null,this.j=n.ib||!1}function Me(n,e){Vr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=He,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}s.prototype.cancel=function(){if(this.i=b(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},T.prototype.stringify=function(n){return Bt.JSON.stringify(n,void 0)},T.prototype.parse=function(n){return Bt.JSON.parse(n,void 0)},Kr(oe,bw),oe.prototype.g=function(){return new Me(this.l,this.j)},oe.prototype.i=function(n){return function(){return n}}({}),Kr(Me,Vr);var He=0;function nt(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function dt(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Mt(n)}function Mt(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ft=Me.prototype).open=function(n,e){if(this.readyState!=He)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Mt(this)},ft.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Bt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},ft.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,dt(this)),this.readyState=He},ft.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Mt(this)),this.g&&(this.readyState=3,Mt(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof Bt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;nt(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},ft.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?dt(this):Mt(this),3==this.readyState&&nt(this)}},ft.Ua=function(n){this.g&&(this.response=this.responseText=n,dt(this))},ft.Ta=function(n){this.g&&(this.response=n,dt(this))},ft.ha=function(){this.g&&dt(this)},ft.setRequestHeader=function(n,e){this.v.append(n,e)},ft.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ft.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Me.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Be=Bt.JSON.parse;function at(n){Vr.call(this),this.headers=new Hd,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=rn,this.K=this.L=!1}Kr(at,Vr);var rn="",Kn=/^https?$/i,Tc=["POST","PUT"];function Rw(n){return"content-type"==n.toLowerCase()}function jm(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,$m(n),zd(n)}function $m(n){n.D||(n.D=!0,Zr(n,"complete"),Zr(n,"error"))}function Hm(n){if(n.h&&typeof lm<"u"&&(!n.C[1]||4!=ko(n)||2!=n.ba()))if(n.v&&4==ko(n))qT(n.Fa,0,n);else if(Zr(n,"readystatechange"),4==ko(n)){n.h=!1;try{const d=n.ba();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===d){var i=String(n.H).match(Sw)[1]||null;if(!i&&Bt.self&&Bt.self.location){var a=Bt.self.location.protocol;i=a.substr(0,a.length-1)}r=!Kn.test(i?i.toLowerCase():"")}t=r}if(t)Zr(n,"complete"),Zr(n,"success");else{n.m=6;try{var l=2<ko(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.ba()+"]",$m(n)}}finally{zd(n)}}}function zd(n,e){if(n.g){Gm(n);const t=n.g,r=n.C[0]?nw:null;n.g=null,n.C=null,e||Zr(n,"ready");try{t.onreadystatechange=r}catch{}}}function Gm(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Bt.clearTimeout(n.A),n.A=null)}function ko(n){return n.g?n.g.readyState:0}function zm(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case rn:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function uR(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function V$(n){let e="";return UT(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Vn(n,e,t))}function kw(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Q1(n){this.za=0,this.l=[],this.h=new Nf,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=kw("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=kw("baseRetryDelayMs",5e3,n),this.$a=kw("retryDelaySeedMs",1e4,n),this.Ya=kw("forwardChannelMaxRetries",2,n),this.ra=kw("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new s(n&&n.concurrentRequestLimit),this.Ca=new M,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function lR(n){if(X1(n),3==n.G){var e=n.V++,t=Tu(n.F);Vn(t,"SID",n.J),Vn(t,"RID",e),Vn(t,"TYPE","terminate"),Nw(n,t),(e=new Lf(n,n.h,e,void 0)).K=2,e.v=Um(Tu(t)),t=!1,Bt.navigator&&Bt.navigator.sendBeacon&&(t=Bt.navigator.sendBeacon(e.v.toString(),"")),!t&&Bt.Image&&((new Image).src=e.v,t=!0),t||(e.g=aL(e.l,null),e.g.ea(e.v)),e.F=Date.now(),ul(e)}sL(n)}function oC(n){n.g&&(hR(n),n.g.cancel(),n.g=null)}function X1(n){oC(n),n.u&&(Bt.clearTimeout(n.u),n.u=null),uC(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Bt.clearTimeout(n.m),n.m=null)}function cR(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&aC(n)}function aC(n){u(n.i)||n.m||(n.m=!0,Ro(n.Ha,n),n.C=0)}function J1(n,e){var t;t=e?e.m:n.V++;const r=Tu(n.F);Vn(r,"SID",n.J),Vn(r,"RID",t),Vn(r,"AID",n.U),Nw(n,r),n.o&&n.s&&uR(r,n.o,n.s),t=new Lf(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=eL(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),p(n.i,t),Uf(t,r,e)}function Nw(n,e){n.j&&Cw({},function(t,r){Vn(e,r,t)})}function eL(n,e,t){t=Math.min(n.l.length,t);var r=n.j?oi(n.j.Oa,n.j,n):null;e:{var i=n.l;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].h,l.push("ofs="+a)):a=0:l.push("ofs="+a);let d=!0;for(let f=0;f<t;f++){let y=i[f].h;const I=i[f].g;if(y-=a,0>y)a=Math.max(0,i[f].h-100),d=!1;else try{N(I,l,"req"+y+"_")}catch{r&&r(I)}}if(d){r=l.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function tL(n){n.g||n.u||(n.Y=1,Ro(n.Ga,n),n.A=0)}function dR(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=jd(oi(n.Ga,n),iL(n,n.A)),n.A++,0))}function hR(n){null!=n.B&&(Bt.clearTimeout(n.B),n.B=null)}function nL(n){n.g=new Lf(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Tu(n.oa);Vn(e,"RID","rpc"),Vn(e,"SID",n.J),Vn(e,"CI",n.N?"0":"1"),Vn(e,"AID",n.U),Nw(n,e),Vn(e,"TYPE","xmlhttp"),n.o&&n.s&&uR(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Um(Tu(e)),t.s=null,t.U=!0,Pm(t,n)}function uC(n){null!=n.v&&(Bt.clearTimeout(n.v),n.v=null)}function rL(n,e){var t=null;if(n.g==e){uC(n),hR(n),n.g=null;var r=2}else{if(!h(n.i,e))return;t=e.D,v(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Zr(r=Pf(),new Xx(r,t,e,i)),aC(n)}else tL(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function j$(n,e){return!(c(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=jd(oi(n.Ha,n,e),iL(n,n.C)),n.C++,0)))}(n,e)||2==r&&dR(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:$f(n,5);break;case 4:$f(n,10);break;case 3:$f(n,6);break;default:$f(n,2)}}function iL(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function $f(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=oi(n.jb,n);t||(t=new Ic("//www.google.com/images/cleardot.gif"),Bt.location&&"http"==Bt.location.protocol||Bf(t,"https"),Um(t)),function B(n,e){const t=new Nf;if(Bt.Image){const r=new Image;r.onload=Sf(X,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Sf(X,t,r,"TestLoadImage: error",!1,e),r.onabort=Sf(X,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Sf(X,t,r,"TestLoadImage: timeout",!1,e),Bt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ns(2);n.G=0,n.j&&n.j.va(e),sL(n),X1(n)}function sL(n){n.G=0,n.I=-1,n.j&&((0!=b(n.i).length||0!=n.l.length)&&(n.i.i.length=0,dm(n.l),n.l.length=0),n.j.ua())}function oL(n,e,t){let r=function rR(n){return n instanceof Ic?Tu(n):new Ic(n,void 0)}(t);if(""!=r.i)e&&Gd(r,e+"."+r.i),Aw(r,r.m);else{const i=Bt.location;r=function G1(n,e,t,r){var i=new Ic(null,void 0);return n&&Bf(i,n),e&&Gd(i,e),t&&Aw(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&UT(n.aa,function(i,a){Vn(r,a,i)}),t=n.sa,(e=n.D)&&t&&Vn(r,e,t),Vn(r,"VER",n.ma),Nw(n,r),r}function aL(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new at(t&&n.Ba&&!n.qa?new oe({ib:!0}):n.qa)).L=n.H,e}function uL(){}function lC(){if(wc&&!(10<=Number(zx)))throw Error("Environmental error: no available transport.")}function No(n,e){Vr.call(this),this.g=new Q1(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!hm(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!hm(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Wm(this)}function lL(n){JT.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function cL(){eC.call(this),this.status=1}function Wm(n){this.g=n}(ft=at.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ew.g(),this.C=function Jx(n){return n.h||(n.h=n.i())}(this.u?this.u:Ew),this.g.onreadystatechange=oi(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void jm(this,a)}n=t||"";const i=new Hd(this.headers);r&&Cw(r,function(a,l){i.set(l,a)}),r=function LT(n){e:{var e=Rw;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Bt.FormData&&n instanceof Bt.FormData,!(0<=OT(Tc,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(a,l){this.g.setRequestHeader(l,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Gm(this),0<this.B&&((this.K=function xw(n){return wc&&function Gx(){return function pm(n){var e=Hx;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=FT(String(Mf)).split("."),t=FT("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",a=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=fm(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||fm(0==i[2].length,0==a[2].length)||fm(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=oi(this.pa,this)):this.A=qT(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){jm(this,a)}},ft.pa=function(){typeof lm<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Zr(this,"timeout"),this.abort(8))},ft.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Zr(this,"complete"),Zr(this,"abort"),zd(this))},ft.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),zd(this,!0)),at.Z.M.call(this)},ft.Fa=function(){this.s||(this.F||this.v||this.l?Hm(this):this.cb())},ft.cb=function(){Hm(this)},ft.ba=function(){try{return 2<ko(this)?this.g.status:-1}catch{return-1}},ft.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},ft.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Be(e)}},ft.Da=function(){return this.m},ft.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ft=Q1.prototype).ma=8,ft.G=1,ft.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch{}},ft.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Lf(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=Vx(a),$x(a,this.P)):a=this.P),null===this.o&&(i.H=a),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=eL(this,i,e),Vn(t=Tu(this.F),"RID",n),Vn(t,"CVER",22),this.D&&Vn(t,"X-HTTP-Session-Id",this.D),Nw(this,t),this.o&&a&&uR(t,this.o,a),p(this.i,i),this.Ra&&Vn(t,"TYPE","init"),this.ja?(Vn(t,"$req",e),Vn(t,"SID","null"),i.$=!0,Uf(i,t,null)):Uf(i,t,e),this.G=2}}else 3==this.G&&(n?J1(this,n):0==this.l.length||u(this.i)||J1(this))},ft.Ga=function(){if(this.u=null,nL(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=jd(oi(this.bb,this),n)}},ft.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ns(10),oC(this),nL(this))},ft.ab=function(){null!=this.v&&(this.v=null,oC(this),dR(this),ns(19))},ft.jb=function(n){n?(this.h.info("Successfully pinged google.com"),ns(2)):(this.h.info("Failed to ping google.com"),ns(1))},(ft=uL.prototype).xa=function(){},ft.wa=function(){},ft.va=function(){},ft.ua=function(){},ft.Oa=function(){},lC.prototype.g=function(n,e){return new No(n,e)},Kr(No,Vr),No.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Ro(oi(n.hb,n,e))),ns(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=oL(n,null,n.W),aC(n)},No.prototype.close=function(){lR(this.g)},No.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,cR(this.g,e)}else this.v?((e={}).__data__=Dm(n),cR(this.g,e)):cR(this.g,n)},No.prototype.M=function(){this.g.j=null,delete this.j,lR(this.g),delete this.g,No.Z.M.call(this)},Kr(lL,JT),Kr(cL,eC),Kr(Wm,uL),Wm.prototype.xa=function(){Zr(this.g,"a")},Wm.prototype.wa=function(n){Zr(this.g,new lL(n))},Wm.prototype.va=function(n){Zr(this.g,new cL(n))},Wm.prototype.ua=function(){Zr(this.g,"b")},lC.prototype.createWebChannel=lC.prototype.g,No.prototype.send=No.prototype.u,No.prototype.open=No.prototype.m,No.prototype.close=No.prototype.close,km.NO_ERROR=0,km.TIMEOUT=8,km.HTTP_ERROR=6,XT.COMPLETE="complete",eR.EventType=Nm,Nm.OPEN="a",Nm.CLOSE="b",Nm.ERROR="c",Nm.MESSAGE="d",Vr.prototype.listen=Vr.prototype.N,at.prototype.listenOnce=at.prototype.O,at.prototype.getLastError=at.prototype.La,at.prototype.getLastErrorCode=at.prototype.Da,at.prototype.getStatus=at.prototype.ba,at.prototype.getResponseJson=at.prototype.Qa,at.prototype.getResponseText=at.prototype.ga,at.prototype.send=at.prototype.ea;var $$=Ji.createWebChannelTransport=function(){return new lC},H$=Ji.getStatEventTarget=function(){return Pf()},fR=Ji.ErrorCode=km,G$=Ji.EventType=XT,z$=Ji.Event=al,dL=Ji.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},W$=Ji.FetchXmlHttpFactory=oe,cC=Ji.WebChannel=eR,q$=Ji.XhrIo=at;const hL="@firebase/firestore";class yi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yi.UNAUTHENTICATED=new yi(null),yi.GOOGLE_CREDENTIALS=new yi("google-credentials-uid"),yi.FIRST_PARTY=new yi("first-party-uid"),yi.MOCK_USER=new yi("mock-user");let qm="9.9.4";const Wd=new Ao.Yd("@firebase/firestore");function pR(){return Wd.logLevel}function ze(n,...e){if(Wd.logLevel<=Ao.in.DEBUG){const t=e.map(gR);Wd.debug(`Firestore (${qm}): ${n}`,...t)}}function jr(n,...e){if(Wd.logLevel<=Ao.in.ERROR){const t=e.map(gR);Wd.error(`Firestore (${qm}): ${n}`,...t)}}function Hf(n,...e){if(Wd.logLevel<=Ao.in.WARN){const t=e.map(gR);Wd.warn(`Firestore (${qm}): ${n}`,...t)}}function gR(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function pt(n="Unexpected state"){const e=`FIRESTORE (${qm}) INTERNAL ASSERTION FAILED: `+n;throw jr(e),new Error(e)}function $t(n,e){n||pt()}function ut(n,e){return n}const be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ve extends O.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class vi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class fL{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Y${getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(yi.UNAUTHENTICATED))}shutdown(){}}class Q${constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class X${constructor(e){this.t=e,this.currentUser=yi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let l=new vi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new vi,e.enqueueRetryable(()=>a(this.currentUser))};const d=()=>{const y=l;e.enqueueRetryable((0,De.Z)(function*(){yield y.promise,yield a(r.currentUser)}))},f=y=>{ze("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(y=>f(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?f(y):(ze("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new vi)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ze("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?($t("string"==typeof r.accessToken),new fL(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return $t(null===e||"string"==typeof e),new yi(e)}}class J${constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=yi.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():($t(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class eH{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new J$(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(yi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class pL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tH{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=a=>{null!=a.error&&ze("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.A;return this.A=a.token,ze("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{ze("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.T.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.T.getImmediate({optional:!0});a?i(a):ze("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?($t("string"==typeof t.token),this.A=t.token,new pL(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function nH(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class gL{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=nH(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Wt(n,e){return n<e?-1:n>e?1:0}function Km(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function mL(n){return n+"\0"}class fr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ve(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ve(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ve(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ve(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return fr.fromMillis(Date.now())}static fromDate(e){return fr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new fr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Wt(this.nanoseconds,e.nanoseconds):Wt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ft{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ft(e)}static min(){return new Ft(new fr(0,0))}static max(){return new Ft(new fr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Pw{constructor(e,t,r){void 0===t?t=0:t>e.length&&pt(),void 0===r?r=e.length-t:r>e.length-t&&pt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Pw.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Pw?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class En extends Pw{construct(e,t,r){return new En(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ve(be.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new En(t)}static emptyPath(){return new En([])}}const rH=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Rr extends Pw{construct(e,t,r){return new Rr(e,t,r)}static isValidIdentifier(e){return rH.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Rr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Rr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Ve(be.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const d=e[i];if("\\"===d){if(i+1===e.length)throw new Ve(be.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if("\\"!==f&&"."!==f&&"`"!==f)throw new Ve(be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,i+=2}else"`"===d?(l=!l,i++):"."!==d||l?(r+=d,i++):(a(),i++)}if(a(),l)throw new Ve(be.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Rr(t)}static emptyPath(){return new Rr([])}}class rt{constructor(e){this.path=e}static fromPath(e){return new rt(En.fromString(e))}static fromName(e){return new rt(En.fromString(e).popFirst(5))}static empty(){return new rt(En.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===En.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return En.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new rt(new En(e.slice()))}}class dC{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function mR(n){return n.fields.find(e=>2===e.kind)}function Gf(n){return n.fields.filter(e=>2!==e.kind)}dC.UNKNOWN_ID=-1;class hC{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ow{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ow(0,Po.min())}}function _L(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ft.fromTimestamp(1e9===r?new fr(t+1,0):new fr(t,r));return new Po(i,rt.empty(),e)}function yL(n){return new Po(n.readTime,n.key,-1)}class Po{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Po(Ft.min(),rt.empty(),-1)}static max(){return new Po(Ft.max(),rt.empty(),-1)}}function _R(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=rt.comparator(n.documentKey,e.documentKey),0!==t?t:Wt(n.largestBatchId,e.largestBatchId))}const vL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function qd(n){return yR.apply(this,arguments)}function yR(){return yR=(0,De.Z)(function*(n){if(n.code!==be.FAILED_PRECONDITION||n.message!==vL)throw n;ze("LocalStore","Unexpectedly lost primary lease")}),yR.apply(this,arguments)}class me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&pt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new me((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof me?t:me.resolve(t)}catch(t){return me.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):me.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):me.reject(t)}static resolve(e){return new me((t,r)=>{t(e)})}static reject(e){return new me((t,r)=>{r(e)})}static waitFor(e){return new me((t,r)=>{let i=0,a=0,l=!1;e.forEach(d=>{++i,d.next(()=>{++a,l&&a===i&&t()},f=>r(f))}),l=!0,a===i&&t()})}static or(e){let t=me.resolve(!1);for(const r of e)t=t.next(i=>i?me.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new me((r,i)=>{const a=e.length,l=new Array(a);let d=0;for(let f=0;f<a;f++){const y=f;t(e[y]).next(I=>{l[y]=I,++d,d===a&&r(l)},I=>i(I))}})}static doWhile(e,t){return new me((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class fC{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new vi,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Lw(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=vR(r.target.error);this.P.reject(new Lw(e,i))}}static open(e,t,r,i){try{return new fC(t,e.transaction(i,r))}catch(a){throw new Lw(t,a)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(ze("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new aH(t)}}class Cu{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Cu.D((0,O.z$)())&&jr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ze("SimpleDb","Removing database:",e),zf(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,O.hl)())return!1;if(Cu.N())return!0;const e=(0,O.z$)(),t=Cu.D(e),r=0<t&&t<10,i=Cu.k(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.M)}static O(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,De.Z)(function*(){return t.db||(ze("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new Lw(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const d=l.target.error;i("VersionError"===d.name?new Ve(be.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new Ve(be.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new Lw(e,d))},a.onupgradeneeded=l=>{ze("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.$(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{ze("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,De.Z)(function*(){const l="readonly"===t;let d=0;for(;;){++d;try{a.db=yield a.F(e);const f=fC.open(a.db,e,l?"readonly":"readwrite",r),y=i(f).next(I=>(f.V(),I)).catch(I=>(f.abort(I),me.reject(I))).toPromise();return y.catch(()=>{}),yield f.v,y}catch(f){const y=f,I="FirebaseError"!==y.name&&d<3;if(ze("SimpleDb","Transaction failed with error:",y.message,"Retrying:",I),a.close(),!I)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class oH{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return zf(this.U.delete())}}class Lw extends Ve{constructor(e,t){super(be.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Kd(n){return"IndexedDbTransactionError"===n.name}class aH{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ze("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ze("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),zf(r)}add(e){return ze("SimpleDb","ADD",this.store.name,e,e),zf(this.store.add(e))}get(e){return zf(this.store.get(e)).next(t=>(void 0===t&&(t=null),ze("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ze("SimpleDb","DELETE",this.store.name,e),zf(this.store.delete(e))}count(){return ze("SimpleDb","COUNT",this.store.name),zf(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.H(i,(l,d)=>{a.push(d)}).next(()=>a)}{const i=this.store.getAll(r.range);return new me((a,l)=>{i.onerror=d=>{l(d.target.error)},i.onsuccess=d=>{a(d.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new me((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}Y(e,t){ze("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(a,l,d)=>d.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new me((r,i)=>{t.onerror=a=>{const l=vR(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(d=>{d?l.continue():r()}):r()}})}H(e,t){const r=[];return new me((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const d=l.target.result;if(!d)return void i();const f=new oH(d),y=t(d.primaryKey,d.value,f);if(y instanceof me){const I=y.catch(D=>(f.done(),me.reject(D)));r.push(I)}f.isDone?i():null===f.G?d.continue():d.continue(f.G)}}).next(()=>me.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function zf(n){return new me((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=vR(r.target.error);t(i)}})}let bL=!1;function vR(n){const e=Cu.D((0,O.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ve("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return bL||(bL=!0,setTimeout(()=>{throw r},0)),r}}return n}class uH{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;ze("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,De.Z)(function*(){t.task=null;try{ze("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Kd(r)?ze("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield qd(r)}yield t.nt(1)}))}}class lH{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,De.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,a=!0;return me.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return ze("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,i).next(d=>{i-=d,r.add(l)});a=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(i,a)).next(d=>(ze("IndexBackiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d))).next(()=>l.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,a)=>{const l=yL(a);_R(l,r)>0&&(r=l)}),new Po(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Qs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function EL(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Wf(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function IL(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Qs.at=-1;class kr{constructor(e,t){this.comparator=e,this.root=t||Li.EMPTY}insert(e,t){return new kr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Li.BLACK,null,null))}remove(e){return new kr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Li.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pC(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pC(this.root,e,this.comparator,!1)}getReverseIterator(){return new pC(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pC(this.root,e,this.comparator,!0)}}class pC{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Li{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Li.RED,this.left=i??Li.EMPTY,this.right=a??Li.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Li(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Li.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Li.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Li.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Li.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw pt();const e=this.left.check();if(e!==this.right.check())throw pt();return e+(this.isRed()?0:1)}}Li.EMPTY=null,Li.RED=!0,Li.BLACK=!1,Li.EMPTY=new class{constructor(){this.size=0}get key(){throw pt()}get value(){throw pt()}get color(){throw pt()}get left(){throw pt()}get right(){throw pt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Li(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class jn{constructor(e){this.comparator=e,this.data=new kr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new TL(this.data.getIterator())}getIteratorFrom(e){return new TL(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof jn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new jn(this.comparator);return t.data=e,t}}class TL{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Zm(n){return n.hasNext()?n.getNext():void 0}class Oo{constructor(e){this.fields=e,e.sort(Rr.comparator)}static empty(){return new Oo([])}unionWith(e){let t=new jn(Rr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Oo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Km(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class ai{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new ai(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new ai(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Wt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ai.EMPTY_BYTE_STRING=new ai("");const dH=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zd(n){if($t(!!n),"string"==typeof n){let e=0;const t=dH.exec(n);if($t(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Nr(n.seconds),nanos:Nr(n.nanos)}}function Nr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function qf(n){return"string"==typeof n?ai.fromBase64String(n):ai.fromUint8Array(n)}function wR(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function CL(n){const e=n.mapValue.fields.__previous_value__;return wR(e)?CL(e):e}function Fw(n){const e=Zd(n.mapValue.fields.__local_write_time__.timestampValue);return new fr(e.seconds,e.nanos)}class hH{constructor(e,t,r,i,a,l,d,f){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=d,this.useFetchStreams=f}}class Yd{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Yd("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Yd&&e.projectId===this.projectId&&e.database===this.database}}function Uw(n){return null==n}function Bw(n){return 0===n&&1/n==-1/0}function DL(n){return"number"==typeof n&&Number.isInteger(n)&&!Bw(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Qd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},gC={nullValue:"NULL_VALUE"};function Kf(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?wR(n)?4:xL(n)?9007199254740991:10:pt()}function dl(n,e){if(n===e)return!0;const t=Kf(n);if(t!==Kf(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Fw(n).isEqual(Fw(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=Zd(r.timestampValue),l=Zd(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,qf(n.bytesValue).isEqual(qf(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Nr(r.geoPointValue.latitude)===Nr(i.geoPointValue.latitude)&&Nr(r.geoPointValue.longitude)===Nr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Nr(r.integerValue)===Nr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Nr(r.doubleValue),l=Nr(i.doubleValue);return a===l?Bw(a)===Bw(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return Km(n.arrayValue.values||[],e.arrayValue.values||[],dl);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(EL(a)!==EL(l))return!1;for(const d in a)if(a.hasOwnProperty(d)&&(void 0===l[d]||!dl(a[d],l[d])))return!1;return!0}(n,e);default:return pt()}var i}function Vw(n,e){return void 0!==(n.values||[]).find(t=>dl(t,e))}function Xd(n,e){if(n===e)return 0;const t=Kf(n),r=Kf(e);if(t!==r)return Wt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Wt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Nr(i.integerValue||i.doubleValue),d=Nr(a.integerValue||a.doubleValue);return l<d?-1:l>d?1:l===d?0:isNaN(l)?isNaN(d)?0:-1:1}(n,e);case 3:return SL(n.timestampValue,e.timestampValue);case 4:return SL(Fw(n),Fw(e));case 5:return Wt(n.stringValue,e.stringValue);case 6:return function(i,a){const l=qf(i),d=qf(a);return l.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),d=a.split("/");for(let f=0;f<l.length&&f<d.length;f++){const y=Wt(l[f],d[f]);if(0!==y)return y}return Wt(l.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=Wt(Nr(i.latitude),Nr(a.latitude));return 0!==l?l:Wt(Nr(i.longitude),Nr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],d=a.values||[];for(let f=0;f<l.length&&f<d.length;++f){const y=Xd(l[f],d[f]);if(y)return y}return Wt(l.length,d.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===Qd.mapValue&&a===Qd.mapValue)return 0;if(i===Qd.mapValue)return 1;if(a===Qd.mapValue)return-1;const l=i.fields||{},d=Object.keys(l),f=a.fields||{},y=Object.keys(f);d.sort(),y.sort();for(let I=0;I<d.length&&I<y.length;++I){const D=Wt(d[I],y[I]);if(0!==D)return D;const x=Xd(l[d[I]],f[y[I]]);if(0!==x)return x}return Wt(d.length,y.length)}(n.mapValue,e.mapValue);default:throw pt()}}function SL(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Wt(n,e);const t=Zd(n),r=Zd(e),i=Wt(t.seconds,r.seconds);return 0!==i?i:Wt(t.nanos,r.nanos)}function Ym(n){return bR(n)}function bR(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Zd(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?qf(n.bytesValue).toBase64():"referenceValue"in n?rt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=bR(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const d of i)l?l=!1:a+=",",a+=`${d}:${bR(r.fields[d])}`;return a+"}"}(n.mapValue):pt();var e}function Zf(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ER(n){return!!n&&"integerValue"in n}function jw(n){return!!n&&"arrayValue"in n}function AL(n){return!!n&&"nullValue"in n}function ML(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function mC(n){return!!n&&"mapValue"in n}function $w(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Wf(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=$w(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=$w(n.arrayValue.values[t]);return e}return Object.assign({},n)}function xL(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function fH(n){return"nullValue"in n?gC:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Zf(Yd.empty(),rt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:pt()}function pH(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Zf(Yd.empty(),rt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Qd:pt()}function RL(n,e){const t=Xd(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function kL(n,e){const t=Xd(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Fi{constructor(e){this.value=e}static empty(){return new Fi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!mC(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=$w(t)}setAll(e){let t=Rr.emptyPath(),r={},i=[];e.forEach((l,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,r,i),r={},i=[],t=d.popLast()}l?r[d.lastSegment()]=$w(l):i.push(d.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());mC(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return dl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];mC(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Wf(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Fi($w(this.value))}}function NL(n){const e=[];return Wf(n.fields,(t,r)=>{const i=new Rr([t]);if(mC(r)){const a=NL(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new Oo(e)}class Jn{constructor(e,t,r,i,a,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Jn(e,0,Ft.min(),Ft.min(),Fi.empty(),0)}static newFoundDocument(e,t,r){return new Jn(e,1,t,Ft.min(),r,0)}static newNoDocument(e,t){return new Jn(e,2,t,Ft.min(),Fi.empty(),0)}static newUnknownDocument(e,t){return new Jn(e,3,t,Ft.min(),Fi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Fi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Fi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ft.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Jn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Jn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class gH{constructor(e,t=null,r=[],i=[],a=null,l=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=d,this.ht=null}}function PL(n,e=null,t=[],r=[],i=null,a=null,l=null){return new gH(n,e,t,r,i,a,l)}function Yf(n){const e=ut(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Ym(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Uw(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ym(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ym(r)).join(",")),e.ht=t}return e.ht}function Hw(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!TH(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!dl(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!BL(n.startAt,e.startAt)&&BL(n.endAt,e.endAt)}function _C(n){return rt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function yC(n,e){return n.filters.filter(t=>t instanceof Ui&&t.field.isEqual(e))}function OL(n,e,t){let r=gC,i=!0;for(const a of yC(n,e)){let l=gC,d=!0;switch(a.op){case"<":case"<=":l=fH(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,d=!1;break;case"!=":case"not-in":l=gC}RL({value:r,inclusive:i},{value:l,inclusive:d})<0&&(r=l,i=d)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];RL({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function LL(n,e,t){let r=Qd,i=!0;for(const a of yC(n,e)){let l=Qd,d=!0;switch(a.op){case">=":case">":l=pH(a.value),d=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,d=!1;break;case"!=":case"not-in":l=Qd}kL({value:r,inclusive:i},{value:l,inclusive:d})>0&&(r=l,i=d)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];kL({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class Ui extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new _H(e,t,r):"array-contains"===t?new wH(e,r):"in"===t?new bH(e,r):"not-in"===t?new EH(e,r):"array-contains-any"===t?new IH(e,r):new Ui(e,t,r)}static lt(e,t,r){return"in"===t?new yH(e,r):new vH(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(Xd(t,this.value)):null!==t&&Kf(this.value)===Kf(t)&&this.ft(Xd(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return pt()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class _H extends Ui{constructor(e,t,r){super(e,t,r),this.key=rt.fromName(r.referenceValue)}matches(e){const t=rt.comparator(e.key,this.key);return this.ft(t)}}class yH extends Ui{constructor(e,t){super(e,"in",t),this.keys=FL(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class vH extends Ui{constructor(e,t){super(e,"not-in",t),this.keys=FL(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function FL(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>rt.fromName(r.referenceValue))}class wH extends Ui{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return jw(t)&&Vw(t.arrayValue,this.value)}}class bH extends Ui{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Vw(this.value.arrayValue,t)}}class EH extends Ui{constructor(e,t){super(e,"not-in",t)}matches(e){if(Vw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Vw(this.value.arrayValue,t)}}class IH extends Ui{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!jw(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Vw(this.value.arrayValue,r))}}class Jd{constructor(e,t){this.position=e,this.inclusive=t}}class Qm{constructor(e,t="asc"){this.field=e,this.dir=t}}function TH(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function UL(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?rt.comparator(rt.fromName(l.referenceValue),t.key):Xd(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function BL(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!dl(n.position[t],e.position[t]))return!1;return!0}class Cc{constructor(e,t=null,r=[],i=[],a=null,l="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=d,this.endAt=f,this._t=null,this.wt=null}}function VL(n,e,t,r,i,a,l,d){return new Cc(n,e,t,r,i,a,l,d)}function Xm(n){return new Cc(n)}function jL(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function IR(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function TR(n){for(const e of n.filters)if(e.dt())return e.field;return null}function CR(n){return null!==n.collectionGroup}function Jm(n){const e=ut(n);if(null===e._t){e._t=[];const t=TR(e),r=IR(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new Qm(t)),e._t.push(new Qm(Rr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e._t.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Qm(Rr.keyField(),a))}}}return e._t}function Xs(n){const e=ut(n);if(!e.wt)if("F"===e.limitType)e.wt=PL(e.path,e.collectionGroup,Jm(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Jm(e))t.push(new Qm(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Jd(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Jd(e.startAt.position,e.startAt.inclusive):null;e.wt=PL(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function vC(n,e,t){return new Cc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Gw(n,e){return Hw(Xs(n),Xs(e))&&n.limitType===e.limitType}function $L(n){return`${Yf(Xs(n))}|lt:${n.limitType}`}function DR(n){return`Query(target=${function mH(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Ym(r.value)}`;var r}).join(", ")}]`),Uw(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Ym(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Ym(t)).join(",")),`Target(${e})`}(Xs(n))}; limitType=${n.limitType})`}function SR(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):rt.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const d=UL(i,a,l);return i.inclusive?d<=0:d<0}(t.startAt,Jm(t),r)||t.endAt&&!function(i,a,l){const d=UL(i,a,l);return i.inclusive?d>=0:d>0}(t.endAt,Jm(t),r)));var t,r}function HL(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function GL(n){return(e,t)=>{let r=!1;for(const i of Jm(n)){const a=CH(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function CH(n,e,t){const r=n.field.isKeyField()?rt.comparator(e.key,t.key):function(i,a,l){const d=a.data.field(i),f=l.data.field(i);return null!==d&&null!==f?Xd(d,f):pt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return pt()}}function zL(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bw(e)?"-0":e}}function WL(n){return{integerValue:""+n}}function qL(n,e){return DL(e)?WL(e):zL(n,e)}class wC{constructor(){this._=void 0}}function DH(n,e,t){return n instanceof e_?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Qf?ZL(n,e):n instanceof Xf?YL(n,e):function(r,i){const a=KL(r,i),l=QL(a)+QL(r.yt);return ER(a)&&ER(r.yt)?WL(l):zL(r.It,l)}(n,e)}function SH(n,e,t){return n instanceof Qf?ZL(n,e):n instanceof Xf?YL(n,e):t}function KL(n,e){return n instanceof t_?ER(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class e_ extends wC{}class Qf extends wC{constructor(e){super(),this.elements=e}}function ZL(n,e){const t=XL(e);for(const r of n.elements)t.some(i=>dl(i,r))||t.push(r);return{arrayValue:{values:t}}}class Xf extends wC{constructor(e){super(),this.elements=e}}function YL(n,e){let t=XL(e);for(const r of n.elements)t=t.filter(i=>!dl(i,r));return{arrayValue:{values:t}}}class t_ extends wC{constructor(e,t){super(),this.It=e,this.yt=t}}function QL(n){return Nr(n.integerValue||n.doubleValue)}function XL(n){return jw(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class zw{constructor(e,t){this.field=e,this.transform=t}}class MH{constructor(e,t){this.version=e,this.transformResults=t}}class pr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new pr}static exists(e){return new pr(void 0,e)}static updateTime(e){return new pr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bC(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class EC{}function JL(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new r_(n.key,pr.none()):new n_(n.key,n.data,pr.none());{const t=n.data,r=Fi.empty();let i=new jn(Rr.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);null===l&&a.length>1&&(a=a.popLast(),l=t.field(a)),null===l?r.delete(a):r.set(a,l),i=i.add(a)}return new Dc(n.key,r,new Oo(i.toArray()),pr.none())}}function xH(n,e,t){n instanceof n_?function(r,i,a){const l=r.value.clone(),d=nF(r.fieldTransforms,i,a.transformResults);l.setAll(d),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Dc?function(r,i,a){if(!bC(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=nF(r.fieldTransforms,i,a.transformResults),d=i.data;d.setAll(tF(r)),d.setAll(l),i.convertToFoundDocument(a.version,d).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Ww(n,e,t,r){return n instanceof n_?function(i,a,l,d){if(!bC(i.precondition,a))return l;const f=i.value.clone(),y=rF(i.fieldTransforms,d,a);return f.setAll(y),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(n,e,t,r):n instanceof Dc?function(i,a,l,d){if(!bC(i.precondition,a))return l;const f=rF(i.fieldTransforms,d,a),y=a.data;return y.setAll(tF(i)),y.setAll(f),a.convertToFoundDocument(a.version,y).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(I=>I.field))}(n,e,t,r):(l=t,bC(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l);var a,l}function RH(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=KL(r.transform,i||null);null!=a&&(null===t&&(t=Fi.empty()),t.set(r.field,a))}return t||null}function eF(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Km(t,r,(i,a)=>function AH(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Qf&&r instanceof Qf||t instanceof Xf&&r instanceof Xf?Km(t.elements,r.elements,dl):t instanceof t_&&r instanceof t_?dl(t.yt,r.yt):t instanceof e_&&r instanceof e_);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class n_ extends EC{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Dc extends EC{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function tF(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function nF(n,e,t){const r=new Map;$t(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,d=e.data.field(a.field);r.set(a.field,SH(l,d,t[i]))}return r}function rF(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,DH(a,l,e))}return r}class r_ extends EC{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class AR extends EC{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class kH{constructor(e){this.count=e}}var Yr,In;function iF(n){switch(n){default:return pt();case be.CANCELLED:case be.UNKNOWN:case be.DEADLINE_EXCEEDED:case be.RESOURCE_EXHAUSTED:case be.INTERNAL:case be.UNAVAILABLE:case be.UNAUTHENTICATED:return!1;case be.INVALID_ARGUMENT:case be.NOT_FOUND:case be.ALREADY_EXISTS:case be.PERMISSION_DENIED:case be.FAILED_PRECONDITION:case be.ABORTED:case be.OUT_OF_RANGE:case be.UNIMPLEMENTED:case be.DATA_LOSS:return!0}}function sF(n){if(void 0===n)return jr("GRPC error has no .code"),be.UNKNOWN;switch(n){case Yr.OK:return be.OK;case Yr.CANCELLED:return be.CANCELLED;case Yr.UNKNOWN:return be.UNKNOWN;case Yr.DEADLINE_EXCEEDED:return be.DEADLINE_EXCEEDED;case Yr.RESOURCE_EXHAUSTED:return be.RESOURCE_EXHAUSTED;case Yr.INTERNAL:return be.INTERNAL;case Yr.UNAVAILABLE:return be.UNAVAILABLE;case Yr.UNAUTHENTICATED:return be.UNAUTHENTICATED;case Yr.INVALID_ARGUMENT:return be.INVALID_ARGUMENT;case Yr.NOT_FOUND:return be.NOT_FOUND;case Yr.ALREADY_EXISTS:return be.ALREADY_EXISTS;case Yr.PERMISSION_DENIED:return be.PERMISSION_DENIED;case Yr.FAILED_PRECONDITION:return be.FAILED_PRECONDITION;case Yr.ABORTED:return be.ABORTED;case Yr.OUT_OF_RANGE:return be.OUT_OF_RANGE;case Yr.UNIMPLEMENTED:return be.UNIMPLEMENTED;case Yr.DATA_LOSS:return be.DATA_LOSS;default:return pt()}}(In=Yr||(Yr={}))[In.OK=0]="OK",In[In.CANCELLED=1]="CANCELLED",In[In.UNKNOWN=2]="UNKNOWN",In[In.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",In[In.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",In[In.NOT_FOUND=5]="NOT_FOUND",In[In.ALREADY_EXISTS=6]="ALREADY_EXISTS",In[In.PERMISSION_DENIED=7]="PERMISSION_DENIED",In[In.UNAUTHENTICATED=16]="UNAUTHENTICATED",In[In.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",In[In.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",In[In.ABORTED=10]="ABORTED",In[In.OUT_OF_RANGE=11]="OUT_OF_RANGE",In[In.UNIMPLEMENTED=12]="UNIMPLEMENTED",In[In.INTERNAL=13]="INTERNAL",In[In.UNAVAILABLE=14]="UNAVAILABLE",In[In.DATA_LOSS=15]="DATA_LOSS";class eh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Wf(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return IL(this.inner)}size(){return this.innerSize}}const NH=new kr(rt.comparator);function Js(){return NH}const oF=new kr(rt.comparator);function qw(...n){let e=oF;for(const t of n)e=e.insert(t.key,t);return e}function aF(n){let e=oF;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function hl(){return Kw()}function uF(){return Kw()}function Kw(){return new eh(n=>n.toString(),(n,e)=>n.isEqual(e))}const PH=new kr(rt.comparator),OH=new jn(rt.comparator);function en(...n){let e=OH;for(const t of n)e=e.add(t);return e}const LH=new jn(Wt);function IC(){return LH}class Zw{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Yw.createSynthesizedTargetChangeForCurrentChange(e,t)),new Zw(Ft.min(),r,IC(),Js(),en())}}class Yw{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Yw(ai.EMPTY_BYTE_STRING,t,en(),en(),en())}}class TC{constructor(e,t,r,i){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=i}}class lF{constructor(e,t){this.targetId=e,this.At=t}}class cF{constructor(e,t,r=ai.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class dF{constructor(){this.Rt=0,this.bt=fF(),this.Pt=ai.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=en(),t=en(),r=en();return this.bt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:pt()}}),new Yw(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=fF()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Mt(e){this.Vt=!0,this.bt=this.bt.remove(e)}Ot(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class FH{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Js(),this.qt=hF(),this.Kt=new jn(Wt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:pt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,i)=>{this.Ht(i)&&t(i)})}Yt(e){const t=e.targetId,r=e.At.count,i=this.Xt(t);if(i){const a=i.target;if(_C(a))if(0===r){const l=new rt(a.path);this.jt(t,l,Jn.newNoDocument(l,Ft.min()))}else $t(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((a,l)=>{const d=this.Xt(l);if(d){if(a.current&&_C(d.target)){const f=new rt(d.target.path);null!==this.Ut.get(f)||this.ee(l,f)||this.jt(l,f,Jn.newNoDocument(f,e))}a.Dt&&(t.set(l,a.xt()),a.Nt())}});let r=en();this.qt.forEach((a,l)=>{let d=!0;l.forEachWhile(f=>{const y=this.Xt(f);return!y||2===y.purpose||(d=!1,!1)}),d&&(r=r.add(a))}),this.Ut.forEach((a,l)=>l.setReadTime(e));const i=new Zw(e,t,this.Kt,this.Ut,r);return this.Ut=Js(),this.qt=hF(),this.Kt=new jn(Wt),i}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const i=this.zt(e);this.ee(e,t)?i.kt(t,1):i.Mt(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.zt(e).Ot()}zt(e){let t=this.Lt.get(e);return t||(t=new dF,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new jn(Wt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||ze("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new dF),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function hF(){return new kr(rt.comparator)}function fF(){return new kr(rt.comparator)}const UH={asc:"ASCENDING",desc:"DESCENDING"},BH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class VH{constructor(e,t){this.databaseId=e,this.gt=t}}function Qw(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pF(n,e){return n.gt?e.toBase64():e.toUint8Array()}function jH(n,e){return Qw(n,e.toTimestamp())}function wi(n){return $t(!!n),Ft.fromTimestamp(function(e){const t=Zd(e);return new fr(t.seconds,t.nanos)}(n))}function MR(n,e){return(t=n,new En(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function gF(n){const e=En.fromString(n);return $t(TF(e)),e}function Xw(n,e){return MR(n.databaseId,e.path)}function fl(n,e){const t=gF(e);if(t.get(1)!==n.databaseId.projectId)throw new Ve(be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ve(be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new rt(_F(t))}function xR(n,e){return MR(n.databaseId,e)}function mF(n){const e=gF(n);return 4===e.length?En.emptyPath():_F(e)}function Jw(n){return new En(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function _F(n){return $t(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function yF(n,e,t){return{name:Xw(n,e),fields:t.value.mapValue.fields}}function vF(n,e,t){const r=fl(n,e.name),i=wi(e.updateTime),a=new Fi({mapValue:{fields:e.fields}}),l=Jn.newFoundDocument(r,i,a);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function e0(n,e){let t;if(e instanceof n_)t={update:yF(n,e.key,e.value)};else if(e instanceof r_)t={delete:Xw(n,e.key)};else if(e instanceof Dc)t={update:yF(n,e.key,e.data),updateMask:YH(e.fieldMask)};else{if(!(e instanceof AR))return pt();t={verify:Xw(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof e_)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Qf)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Xf)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof t_)return{fieldPath:a.field.canonicalString(),increment:l.yt};throw pt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:jH(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:pt()),t;var i}function RR(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?pr.updateTime(wi(i.updateTime)):void 0!==i.exists?pr.exists(i.exists):pr.none():pr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let d=null;"setToServerValue"in l?($t("REQUEST_TIME"===l.setToServerValue),d=new e_):"appendMissingElements"in l?d=new Qf(l.appendMissingElements.values||[]):"removeAllFromArray"in l?d=new Xf(l.removeAllFromArray.values||[]):"increment"in l?d=new t_(a,l.increment):pt();const f=Rr.fromServerFormat(l.fieldPath);return new zw(f,d)}(n,i)):[];var i;if(e.update){const i=fl(n,e.update.name),a=new Fi({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Oo((e.updateMask.fieldPaths||[]).map(y=>Rr.fromServerFormat(y)));return new Dc(i,a,l,t,r)}return new n_(i,a,t,r)}if(e.delete){const i=fl(n,e.delete);return new r_(i,t)}if(e.verify){const i=fl(n,e.verify);return new AR(i,t)}return pt()}function wF(n,e){return{documents:[xR(n,e.path)]}}function bF(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=xR(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=xR(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(f){if(0===f.length)return;const y=f.map(I=>function(D){if("=="===D.op){if(ML(D.value))return{unaryFilter:{field:i_(D.field),op:"IS_NAN"}};if(AL(D.value))return{unaryFilter:{field:i_(D.field),op:"IS_NULL"}}}else if("!="===D.op){if(ML(D.value))return{unaryFilter:{field:i_(D.field),op:"IS_NOT_NAN"}};if(AL(D.value))return{unaryFilter:{field:i_(D.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:i_(D.field),op:qH(D.op),value:D.value}}}(I));return 1===y.length?y[0]:{compositeFilter:{op:"AND",filters:y}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(f){if(0!==f.length)return f.map(y=>{return{field:i_((I=y).field),direction:WH(I.dir)};var I})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=(y=e.limit,n.gt||Uw(y)?y:{value:y});var y,d,f;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(t.structuredQuery.endAt={before:!(f=e.endAt).inclusive,values:f.position}),t}function EF(n){let e=mF(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){$t(1===r);const I=t.from[0];I.allDescendants?i=I.collectionId:e=e.child(I.collectionId)}let a=[];t.where&&(a=IF(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(I=>{return new Qm(s_((D=I).field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction));var D}));let d=null;t.limit&&(d=function(I){let D;return D="object"==typeof I?I.value:I,Uw(D)?null:D}(t.limit));let f=null;var I;t.startAt&&(f=new Jd((I=t.startAt).values||[],!!I.before));let y=null;return t.endAt&&(y=function(I){return new Jd(I.values||[],!I.before)}(t.endAt)),VL(e,i,l,a,d,"F",f,y)}function IF(n){return n?void 0!==n.unaryFilter?[ZH(n)]:void 0!==n.fieldFilter?[KH(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>IF(e)).reduce((e,t)=>e.concat(t)):pt():[]}function WH(n){return UH[n]}function qH(n){return BH[n]}function i_(n){return{fieldPath:n.canonicalString()}}function s_(n){return Rr.fromServerFormat(n.fieldPath)}function KH(n){return Ui.create(s_(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pt()}}(n.fieldFilter.op),n.fieldFilter.value)}function ZH(n){switch(n.unaryFilter.op){case"IS_NAN":const e=s_(n.unaryFilter.field);return Ui.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=s_(n.unaryFilter.field);return Ui.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=s_(n.unaryFilter.field);return Ui.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=s_(n.unaryFilter.field);return Ui.create(i,"!=",{nullValue:"NULL_VALUE"});default:return pt()}}function YH(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function TF(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Cs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=CF(e)),e=QH(n.get(t),e);return CF(e)}function QH(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function CF(n){return n+"\x01\x01"}function pl(n){const e=n.length;if($t(e>=2),2===e)return $t("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),En.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&pt(),n.charAt(l+1)){case"\x01":const d=n.substring(a,l);let f;0===i.length?f=d:(i+=d,f=i,i=""),r.push(f);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:pt()}a=l+2}return new En(r)}const DF=["userId","batchId"];function CC(n,e){return[n,Cs(e)]}function SF(n,e,t){return[n,Cs(e),t]}const XH={},JH=["prefixPath","collectionGroup","readTime","documentId"],eG=["prefixPath","collectionGroup","documentId"],tG=["collectionGroup","readTime","prefixPath","documentId"],nG=["canonicalId","targetId"],rG=["targetId","path"],iG=["path","targetId"],sG=["collectionId","parent"],oG=["indexId","uid"],aG=["uid","sequenceNumber"],uG=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],lG=["indexId","uid","orderedDocumentKey"],cG=["userId","collectionPath","documentId"],dG=["userId","collectionPath","largestBatchId"],hG=["userId","collectionGroup","largestBatchId"],AF=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],fG=[...AF,"documentOverlays"],MF=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],xF=MF,pG=[...xF,"indexConfiguration","indexState","indexEntries"];class kR extends wL{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function bi(n,e){const t=ut(n);return Cu.O(t.ie,e)}class NR{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&xH(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ww(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Ww(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=uF();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let d=this.applyToLocalView(l,a.mutatedFields);d=t.has(i.key)?null:d;const f=JL(l,d);null!==f&&r.set(i.key,f),l.isValidDocument()||l.convertToNoDocument(Ft.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),en())}isEqual(e){return this.batchId===e.batchId&&Km(this.mutations,e.mutations,(t,r)=>eF(t,r))&&Km(this.baseMutations,e.baseMutations,(t,r)=>eF(t,r))}}class PR{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){$t(e.mutations.length===r.length);let i=PH;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new PR(e,t,r,i)}}class OR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class th{constructor(e,t,r,i,a=Ft.min(),l=Ft.min(),d=ai.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=d}withSequenceNumber(e){return new th(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new th(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new th(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class RF{constructor(e){this.re=e}}function kF(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:DC(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Xw(i=n.re,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:Qw(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Jf(e.version)};else{if(!e.isUnknownDocument())return pt();r.unknownDocument={path:t.path.toArray(),version:Jf(e.version)}}var i,a;return r}function DC(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Jf(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ep(n){const e=new fr(n.seconds,n.nanoseconds);return Ft.fromTimestamp(e)}function tp(n,e){const t=(e.baseMutations||[]).map(a=>RR(n.re,a));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(l.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>RR(n.re,a)),i=fr.fromMillis(e.localWriteTimeMs);return new NR(e.batchId,i,t,r)}function t0(n){const e=ep(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?ep(n.lastLimboFreeSnapshotVersion):Ft.min();let r;var i;return void 0!==n.query.documents?($t(1===(i=n.query).documents.length),r=Xs(Xm(mF(i.documents[0])))):r=Xs(EF(n.query)),new th(r,n.targetId,0,n.lastListenSequenceNumber,e,t,ai.fromBase64String(n.resumeToken))}function NF(n,e){const t=Jf(e.snapshotVersion),r=Jf(e.lastLimboFreeSnapshotVersion);let i;i=_C(e.target)?wF(n.re,e.target):bF(n.re,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Yf(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function LR(n){const e=EF({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?vC(e,e.limit,"L"):e}function FR(n,e){return new OR(e.largestBatchId,RR(n.re,e.overlayMutation))}function PF(n,e){const t=e.path.lastSegment();return[n,Cs(e.path.popLast()),t]}function OF(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Jf(r.readTime),documentKey:Cs(r.documentKey.path),largestBatchId:r.largestBatchId}}class mG{getBundleMetadata(e,t){return LF(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:ep(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return LF(e).put({bundleId:(r=t).id,createTime:Jf(wi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return FF(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:LR(i.bundledQuery),readTime:ep(i.readTime)};var i})}saveNamedQuery(e,t){return FF(e).put({name:(r=t).name,readTime:Jf(wi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function LF(n){return bi(n,"bundles")}function FF(n){return bi(n,"namedQueries")}class SC{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new SC(e,t.uid||"")}getOverlay(e,t){return n0(e).get(PF(this.userId,t)).next(r=>r?FR(this.It,r):null)}getOverlays(e,t){const r=hl();return me.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const d=new OR(t,l);i.push(this.ue(e,d))}),me.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Cs(l.getCollectionPath())));const a=[];return i.forEach(l=>{const d=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(n0(e).Y("collectionPathOverlayIndex",d))}),me.waitFor(a)}getOverlaysForCollection(e,t,r){const i=hl(),a=Cs(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return n0(e).W("collectionPathOverlayIndex",l).next(d=>{for(const f of d){const y=FR(this.It,f);i.set(y.getKey(),y)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=hl();let l;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return n0(e).Z({index:"collectionGroupOverlayIndex",range:d},(f,y,I)=>{const D=FR(this.It,y);a.size()<i||D.largestBatchId===l?(a.set(D.getKey(),D),l=D.largestBatchId):I.done()}).next(()=>a)}ue(e,t){return n0(e).put(function(r,i,a){const[l,d,f]=PF(i,a.mutation.key);return{userId:i,collectionPath:d,documentId:f,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:e0(r.re,a.mutation)}}(this.It,this.userId,t))}}function n0(n){return bi(n,"documentOverlays")}class np{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Nr(e.integerValue));else if("doubleValue"in e){const r=Nr(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),Bw(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(qf(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?xL(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):pt()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const i of Object.keys(r))this._e(i,t),this.ae(r[i],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const i of r)this.ae(i,t)}ge(e,t){this.le(t,37),rt.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function _G(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function UF(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=_G(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}np.Te=new np;class yG{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=t.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.ve()}De(e){const t=this.Ce(e),r=UF(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ne(e){const t=this.Ce(e),r=UF(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}ke(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Me(0),this.Me(1)}ve(){this.Fe(0),this.Fe(1)}Me(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class vG{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class wG{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Oe()}}class r0{constructor(){this.Be=new yG,this.Le=new vG(this.Be),this.Ue=new wG(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class rp{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new rp(this.indexId,this.documentKey,this.arrayValue,r)}}function ip(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=BF(n.arrayValue,e.arrayValue),0!==t?t:(t=BF(n.directionalValue,e.directionalValue),0!==t?t:rt.comparator(n.documentKey,e.documentKey)))}function BF(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class bG{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=mR(e);if(void 0!==t&&!this.ze(t))return!1;const r=Gf(e);let i=0,a=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.je){const l=r[i];if(!this.He(this.je,l)||!this.Je(this.Ge[a++],l))return!1;++i}for(;i<r.length;++i){const l=r[i];if(a>=this.Ge.length||!this.Je(this.Ge[a++],l))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class EG{constructor(){this.Ye=new UR}addToCollectionParentIndex(e,t){return this.Ye.add(t),me.resolve()}getCollectionParents(e,t){return me.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return me.resolve()}deleteFieldIndex(e,t){return me.resolve()}getDocumentsMatchingTarget(e,t){return me.resolve(null)}getIndexType(e,t){return me.resolve(0)}getFieldIndexes(e,t){return me.resolve([])}getNextCollectionGroupToUpdate(e){return me.resolve(null)}getMinOffset(e,t){return me.resolve(Po.min())}getMinOffsetFromCollectionGroup(e,t){return me.resolve(Po.min())}updateCollectionGroup(e,t,r){return me.resolve()}updateIndexEntries(e,t){return me.resolve()}}class UR{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new jn(En.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new jn(En.comparator)).toArray()}}const AC=new Uint8Array(0);class IG{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new UR,this.Ze=new eh(r=>Yf(r),(r,i)=>Hw(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const a={collectionId:r,parent:Cs(i)};return VF(e).put(a)}return me.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[mL(t),""],!1,!0);return VF(e).W(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(pl(l.parent))}return r})}addFieldIndex(e,t){const r=MC(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var l;delete i.indexId;const a=r.add(i);if(t.indexState){const l=o0(e);return a.next(d=>{l.put(OF(d,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=MC(e),i=o0(e),a=s0(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=s0(e);let i=!0;const a=new Map;return me.forEach(this.tn(t),l=>this.en(e,l).next(d=>{i&&(i=!!d),a.set(l,d)})).next(()=>{if(i){let l=en();const d=[];return me.forEach(a,(f,y)=>{var I;ze("IndexedDbIndexManager",`Using index ${I=f,`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map(tt=>`${tt.fieldPath}:${tt.kind}`).join(",")}`} to execute ${Yf(t)}`);const D=function(tt,Je){const Dt=mR(Je);if(void 0===Dt)return null;for(const xt of yC(tt,Dt.fieldPath))switch(xt.op){case"array-contains-any":return xt.value.arrayValue.values||[];case"array-contains":return[xt.value]}return null}(y,f),x=function(tt,Je){const Dt=new Map;for(const xt of Gf(Je))for(const un of yC(tt,xt.fieldPath))switch(un.op){case"==":case"in":Dt.set(xt.fieldPath.canonicalString(),un.value);break;case"not-in":case"!=":return Dt.set(xt.fieldPath.canonicalString(),un.value),Array.from(Dt.values())}return null}(y,f),L=function(tt,Je){const Dt=[];let xt=!0;for(const un of Gf(Je)){const $r=0===un.kind?OL(tt,un.fieldPath,tt.startAt):LL(tt,un.fieldPath,tt.startAt);Dt.push($r.value),xt&&(xt=$r.inclusive)}return new Jd(Dt,xt)}(y,f),V=function(tt,Je){const Dt=[];let xt=!0;for(const un of Gf(Je)){const $r=0===un.kind?LL(tt,un.fieldPath,tt.endAt):OL(tt,un.fieldPath,tt.endAt);Dt.push($r.value),xt&&(xt=$r.inclusive)}return new Jd(Dt,xt)}(y,f),ee=this.nn(f,y,L),ce=this.nn(f,y,V),Ge=this.sn(f,y,x),Ke=this.rn(f.indexId,D,ee,L.inclusive,ce,V.inclusive,Ge);return me.forEach(Ke,tt=>r.J(tt,t.limit).next(Je=>{Je.forEach(Dt=>{const xt=rt.fromSegments(Dt.documentKey);l.has(xt)||(l=l.add(xt),d.push(xt))})}))}).next(()=>d)}return me.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,i,a,l,d){const f=(null!=t?t.length:1)*Math.max(r.length,a.length),y=f/(null!=t?t.length:1),I=[];for(let D=0;D<f;++D){const x=t?this.on(t[D/y]):AC,L=this.un(e,x,r[D%y],i),V=this.cn(e,x,a[D%y],l),ee=d.map(ce=>this.un(e,x,ce,!0));I.push(...this.createRange(L,V,ee))}return I}un(e,t,r,i){const a=new rp(e,rt.empty(),t,r);return i?a:a.Ke()}cn(e,t,r,i){const a=new rp(e,rt.empty(),t,r);return i?a.Ke():a}en(e,t){const r=new bG(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let l=null;for(const d of a)r.We(d)&&(!l||d.fields.length>l.fields.length)&&(l=d);return l})}getIndexType(e,t){let r=2;return me.forEach(this.tn(t),i=>this.en(e,i).next(a=>{a?0!==r&&a.fields.length<function(l){let d=new jn(Rr.comparator),f=!1;for(const y of l.filters){const I=y;I.field.isKeyField()||("array-contains"===I.op||"array-contains-any"===I.op?f=!0:d=d.add(I.field))}for(const y of l.orderBy)y.field.isKeyField()||(d=d.add(y.field));return d.size+(f?1:0)}(i)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new r0;for(const i of Gf(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.qe(i.kind);np.Te.ce(a,l)}return r.$e()}on(e){const t=new r0;return np.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new r0;return np.Te.ce(Zf(this.databaseId,t),r.qe(function(i){const a=Gf(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let i=[];i.push(new r0);let a=0;for(const l of Gf(e)){const d=r[a++];for(const f of i)if(this.ln(t,l.fieldPath)&&jw(d))i=this.fn(i,l,d);else{const y=f.qe(l.kind);np.Te.ce(d,y)}}return this.dn(i)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const d of i){const f=new r0;f.seed(d.$e()),np.Te.ce(l,f.qe(t.kind)),a.push(f)}return a}ln(e,t){return!!e.filters.find(r=>r instanceof Ui&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=MC(e),i=o0(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(a=>{const l=[];return me.forEach(a,d=>i.get([d.indexId,this.uid]).next(f=>{l.push(function(y,I){const D=I?new Ow(I.sequenceNumber,new Po(ep(I.readTime),new rt(pl(I.documentKey)),I.largestBatchId)):Ow.empty(),x=y.fields.map(([L,V])=>new hC(Rr.fromServerFormat(L),V));return new dC(y.indexId,y.collectionGroup,x,D)}(d,f))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Wt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=MC(e),a=o0(e);return this._n(e).next(l=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(d=>me.forEach(d,f=>a.put(OF(f.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return me.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?me.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(d=>(r.set(i.collectionGroup,d),me.forEach(d,f=>this.wn(e,i,f).next(y=>{const I=this.mn(a,f);return y.isEqual(I)?me.resolve():this.gn(e,a,f,y,I)}))))})}yn(e,t,r,i){return s0(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,i){return s0(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=s0(e);let a=new jn(ip);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(l,d)=>{a=a.add(new rp(r.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>a)}mn(e,t){let r=new jn(ip);const i=this.an(t,e);if(null==i)return r;const a=mR(t);if(null!=a){const l=e.data.field(a.fieldPath);if(jw(l))for(const d of l.arrayValue.values||[])r=r.add(new rp(t.indexId,e.key,this.on(d),i))}else r=r.add(new rp(t.indexId,e.key,AC,i));return r}gn(e,t,r,i,a){ze("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(d,f,y,I,D){const x=d.getIterator(),L=f.getIterator();let V=Zm(x),ee=Zm(L);for(;V||ee;){let ce=!1,Ge=!1;if(V&&ee){const Ke=y(V,ee);Ke<0?Ge=!0:Ke>0&&(ce=!0)}else null!=V?Ge=!0:ce=!0;ce?(I(ee),ee=Zm(L)):Ge?(D(V),V=Zm(x)):(V=Zm(x),ee=Zm(L))}}(i,a,ip,d=>{l.push(this.yn(e,t,r,d))},d=>{l.push(this.pn(e,t,r,d))}),me.waitFor(l)}_n(e){let t=1;return o0(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,d)=>ip(l,d)).filter((l,d,f)=>!d||0!==ip(l,f[d-1]));const i=[];i.push(e);for(const l of r){const d=ip(l,e),f=ip(l,t);if(0===d)i[0]=e.Ke();else if(d>0&&f<0)i.push(l),i.push(l.Ke());else if(f>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2)a.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,AC,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,AC,[]]));return a}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(jF)}getMinOffset(e,t){return me.mapArray(this.tn(t),r=>this.en(e,r).next(i=>i||pt())).next(jF)}}function VF(n){return bi(n,"collectionParents")}function s0(n){return bi(n,"indexEntries")}function MC(n){return bi(n,"indexConfiguration")}function o0(n){return bi(n,"indexState")}function jF(n){$t(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;_R(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Po(e.readTime,e.documentKey,t)}const $F={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class eo{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new eo(e,eo.DEFAULT_COLLECTION_PERCENTILE,eo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function HF(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let d=0;const f=r.Z({range:l},(I,D,x)=>(d++,x.delete()));a.push(f.next(()=>{$t(1===d)}));const y=[];for(const I of t.mutations){const D=SF(e,I.key.path,t.batchId);a.push(i.delete(D)),y.push(I.key)}return me.waitFor(a).next(()=>y)}function xC(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw pt();e=n.noDocument}return JSON.stringify(e).length}eo.DEFAULT_COLLECTION_PERCENTILE=10,eo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,eo.DEFAULT=new eo(41943040,eo.DEFAULT_COLLECTION_PERCENTILE,eo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),eo.DISABLED=new eo(-1,0,0);class RC{constructor(e,t,r,i){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static oe(e,t,r,i){$t(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new RC(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return nh(e).Z({index:"userMutationsIndex",range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=o_(e),l=nh(e);return l.add({}).next(d=>{$t("number"==typeof d);const f=new NR(d,t,r,i),y=function(x,L,V){const ee=V.baseMutations.map(Ge=>e0(x.re,Ge)),ce=V.mutations.map(Ge=>e0(x.re,Ge));return{userId:L,batchId:V.batchId,localWriteTimeMs:V.localWriteTime.toMillis(),baseMutations:ee,mutations:ce}}(this.It,this.userId,f),I=[];let D=new jn((x,L)=>Wt(x.canonicalString(),L.canonicalString()));for(const x of i){const L=SF(this.userId,x.key.path,d);D=D.add(x.key.path.popLast()),I.push(l.put(y)),I.push(a.put(L,XH))}return D.forEach(x=>{I.push(this.indexManager.addToCollectionParentIndex(e,x))}),e.addOnCommittedListener(()=>{this.In[d]=f.keys()}),me.waitFor(I).next(()=>f)})}lookupMutationBatch(e,t){return nh(e).get(t).next(r=>r?($t(r.userId===this.userId),tp(this.It,r)):null)}Tn(e,t){return this.In[t]?me.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return nh(e).Z({index:"userMutationsIndex",range:i},(l,d,f)=>{d.userId===this.userId&&($t(d.batchId>=r),a=tp(this.It,d)),f.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return nh(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return nh(e).W("userMutationsIndex",t).next(r=>r.map(i=>tp(this.It,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=CC(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return o_(e).Z({range:i},(l,d,f)=>{const[y,I,D]=l,x=pl(I);if(y===this.userId&&t.path.isEqual(x))return nh(e).get(D).next(L=>{if(!L)throw pt();$t(L.userId===this.userId),a.push(tp(this.It,L))});f.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new jn(Wt);const i=[];return t.forEach(a=>{const l=CC(this.userId,a.path),d=IDBKeyRange.lowerBound(l),f=o_(e).Z({range:d},(y,I,D)=>{const[x,L,V]=y,ee=pl(L);x===this.userId&&a.path.isEqual(ee)?r=r.add(V):D.done()});i.push(f)}),me.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=CC(this.userId,r),l=IDBKeyRange.lowerBound(a);let d=new jn(Wt);return o_(e).Z({range:l},(f,y,I)=>{const[D,x,L]=f,V=pl(x);D===this.userId&&r.isPrefixOf(V)?V.length===i&&(d=d.add(L)):I.done()}).next(()=>this.En(e,d))}En(e,t){const r=[],i=[];return t.forEach(a=>{i.push(nh(e).get(a).next(l=>{if(null===l)throw pt();$t(l.userId===this.userId),r.push(tp(this.It,l))}))}),me.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return HF(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),me.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return me.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return o_(e).Z({range:r},(a,l,d)=>{if(a[0]===this.userId){const f=pl(a[1]);i.push(f)}else d.done()}).next(()=>{$t(0===i.length)})})}containsKey(e,t){return GF(e,this.userId,t)}Rn(e){return zF(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function GF(n,e,t){const r=CC(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return o_(n).Z({range:a,X:!0},(d,f,y)=>{const[I,D,x]=d;I===e&&D===i&&(l=!0),y.done()}).next(()=>l)}function nh(n){return bi(n,"mutations")}function o_(n){return bi(n,"documentMutations")}function zF(n){return bi(n,"mutationQueues")}class sp{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new sp(0)}static vn(){return new sp(-1)}}class TG{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new sp(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Ft.fromTimestamp(new fr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>a_(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>($t(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return a_(e).Z((l,d)=>{const f=t0(d);f.sequenceNumber<=t&&null===r.get(f.targetId)&&(i++,a.push(this.removeTargetData(e,f)))}).next(()=>me.waitFor(a)).next(()=>i)}forEachTarget(e,t){return a_(e).Z((r,i)=>{const a=t0(i);t(a)})}Vn(e){return WF(e).get("targetGlobalKey").next(t=>($t(null!==t),t))}Sn(e,t){return WF(e).put("targetGlobalKey",t)}Dn(e,t){return a_(e).put(NF(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Yf(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return a_(e).Z({range:i,index:"queryTargetsIndex"},(l,d,f)=>{const y=t0(d);Hw(t,y.target)&&(a=y,f.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=rh(e);return t.forEach(l=>{const d=Cs(l.path);i.push(a.put({targetId:r,path:d})),i.push(this.referenceDelegate.addReference(e,r,l))}),me.waitFor(i)}removeMatchingKeys(e,t,r){const i=rh(e);return me.forEach(t,a=>{const l=Cs(a.path);return me.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=rh(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=rh(e);let a=en();return i.Z({range:r,X:!0},(l,d,f)=>{const y=pl(l[1]),I=new rt(y);a=a.add(I)}).next(()=>a)}containsKey(e,t){const r=Cs(t.path),i=IDBKeyRange.bound([r],[mL(r)],!1,!0);let a=0;return rh(e).Z({index:"documentTargetsIndex",X:!0,range:i},([l,d],f,y)=>{0!==l&&(a++,y.done())}).next(()=>a>0)}se(e,t){return a_(e).get(t).next(r=>r?t0(r):null)}}function a_(n){return bi(n,"targets")}function WF(n){return bi(n,"targetGlobal")}function rh(n){return bi(n,"targetDocuments")}function qF([n,e],[t,r]){const i=Wt(n,t);return 0===i?Wt(e,r):i}class CG{constructor(e){this.xn=e,this.buffer=new jn(qF),this.Nn=0}kn(){return++this.Nn}Mn(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();qF(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class DG{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}Fn(e){var t=this;ze("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,De.Z)(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Kd(r)?ze("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield qd(r)}yield t.Fn(3e5)}))}}class SG{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return me.resolve(Qs.at);const r=new CG(t);return this.$n.forEachTarget(e,i=>r.Mn(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.Mn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ze("LruGarbageCollector","Garbage collection skipped; disabled"),me.resolve($F)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ze("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$F):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,i,a,l,d,f,y;const I=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(D=>(D>this.params.maximumSequenceNumbersToCollect?(ze("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${D}`),i=this.params.maximumSequenceNumbersToCollect):i=D,l=Date.now(),this.nthSequenceNumber(e,i))).next(D=>(r=D,d=Date.now(),this.removeTargets(e,r,t))).next(D=>(a=D,f=Date.now(),this.removeOrphanedDocuments(e,r))).next(D=>(y=Date.now(),pR()<=Ao.in.DEBUG&&ze("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-I}ms\n\tDetermined least recently used ${i} in `+(d-l)+`ms\n\tRemoved ${a} targets in `+(f-d)+`ms\n\tRemoved ${D} documents in `+(y-f)+`ms\nTotal Duration: ${y-I}ms`),me.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:D})))}}class AG{constructor(e,t){this.db=e,this.garbageCollector=new SG(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return kC(e,r)}removeReference(e,t,r){return kC(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return kC(e,t)}Gn(e,t){return function(r,i){let a=!1;return zF(r).tt(l=>GF(r,l,i).next(d=>(d&&(a=!0),me.resolve(!d)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Kn(e,(l,d)=>{if(d<=t){const f=this.Gn(e,l).next(y=>{if(!y)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Ft.min()),rh(e).delete([0,Cs(l.path)])))});i.push(f)}}).next(()=>me.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return kC(e,t)}Kn(e,t){const r=rh(e);let i,a=Qs.at;return r.Z({index:"documentTargetsIndex"},([l,d],{path:f,sequenceNumber:y})=>{0===l?(a!==Qs.at&&t(new rt(pl(i)),a),a=y,i=f):a=Qs.at}).next(()=>{a!==Qs.at&&t(new rt(pl(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function kC(n,e){return rh(n).put((r=n.currentSequenceNumber,{targetId:0,path:Cs(e.path),sequenceNumber:r}));var r}class KF{constructor(){this.changes=new eh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Jn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?me.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class MG{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return op(e).put(r)}removeEntry(e,t,r){return op(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],DC(a),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Jn.newInvalidDocument(t);return op(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(a0(t))},(i,a)=>{r=this.jn(t,a)}).next(()=>r)}Wn(e,t){let r={size:0,document:Jn.newInvalidDocument(t)};return op(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(a0(t))},(i,a)=>{r={document:this.jn(t,a),size:xC(a)}}).next(()=>r)}getEntries(e,t){let r=Js();return this.zn(e,t,(i,a)=>{const l=this.jn(i,a);r=r.insert(i,l)}).next(()=>r)}Hn(e,t){let r=Js(),i=new kr(rt.comparator);return this.zn(e,t,(a,l)=>{const d=this.jn(a,l);r=r.insert(a,d),i=i.insert(a,xC(l))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return me.resolve();let i=new jn(XF);t.forEach(f=>i=i.add(f));const a=IDBKeyRange.bound(a0(i.first()),a0(i.last())),l=i.getIterator();let d=l.getNext();return op(e).Z({index:"documentKeyIndex",range:a},(f,y,I)=>{const D=rt.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;d&&XF(d,D)<0;)r(d,null),d=l.getNext();d&&d.isEqual(D)&&(r(d,y),d=l.hasNext()?l.getNext():null),d?I.j(a0(d)):I.done()}).next(()=>{for(;d;)r(d,null),d=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),DC(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return op(e).W(IDBKeyRange.bound(i,a,!0)).next(l=>{let d=Js();for(const f of l){const y=this.jn(rt.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);d=d.insert(y.key,y)}return d})}getAllFromCollectionGroup(e,t,r,i){let a=Js();const l=QF(t,r),d=QF(t,Po.max());return op(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,d,!0)},(f,y,I)=>{const D=this.jn(rt.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);a=a.insert(D.key,D),a.size===i&&I.done()}).next(()=>a)}newChangeBuffer(e){return new xG(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return YF(e).get("remoteDocumentGlobalKey").next(t=>($t(!!t),t))}Qn(e,t){return YF(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function gG(n,e){let t;if(e.document)t=vF(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=rt.fromSegments(e.noDocument.path),i=ep(e.noDocument.readTime);t=Jn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return pt();{const r=rt.fromSegments(e.unknownDocument.path),i=ep(e.unknownDocument.version);t=Jn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new fr(r[0],r[1]);return Ft.fromTimestamp(i)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(Ft.min()))return r}return Jn.newInvalidDocument(e)}}function ZF(n){return new MG(n)}class xG extends KF{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new eh(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new jn((a,l)=>Wt(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const d=this.Xn.get(a);if(t.push(this.Yn.removeEntry(e,a,d.readTime)),l.isValidDocument()){const f=kF(this.Yn.It,l);i=i.add(a.path.popLast()),r+=xC(f)-d.size,t.push(this.Yn.addEntry(e,a,f))}else if(r-=d.size,this.trackRemovals){const f=kF(this.Yn.It,l.convertToNoDocument(Ft.min()));t.push(this.Yn.addEntry(e,a,f))}}),i.forEach(a=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Yn.updateMetadata(e,r)),me.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((a,l)=>{this.Xn.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function YF(n){return bi(n,"remoteDocumentGlobal")}function op(n){return bi(n,"remoteDocumentsV14")}function a0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function QF(n,e){const t=e.documentKey.path.toArray();return[n,DC(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function XF(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Wt(t[a],r[a]),i)return i;return i=Wt(t.length,r.length),i||(i=Wt(t[t.length-2],r[r.length-2]),i||Wt(t[t.length-1],r[r.length-1]))}class RG{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class JF{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&Ww(r.mutation,i,Oo.empty(),fr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,en()).next(()=>r))}getLocalViewOfDocuments(e,t,r=en()){const i=hl();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let l=qw();return a.forEach((d,f)=>{l=l.insert(d,f.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=hl();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,en()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,d)=>{t.set(l,d)})})}computeViews(e,t,r,i){let a=Js();const l=Kw(),d=Kw();return t.forEach((f,y)=>{const I=r.get(y.key);i.has(y.key)&&(void 0===I||I.mutation instanceof Dc)?a=a.insert(y.key,y):void 0!==I&&(l.set(y.key,I.mutation.getFieldMask()),Ww(I.mutation,y,I.mutation.getFieldMask(),fr.now()))}),this.recalculateAndSaveOverlays(e,a).next(f=>(f.forEach((y,I)=>l.set(y,I)),t.forEach((y,I)=>{var D;return d.set(y,new RG(I,null!==(D=l.get(y))&&void 0!==D?D:null))}),d))}recalculateAndSaveOverlays(e,t){const r=Kw();let i=new kr((l,d)=>l-d),a=en();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const d of l)d.keys().forEach(f=>{const y=t.get(f);if(null===y)return;let I=r.get(f)||Oo.empty();I=d.applyToLocalView(y,I),r.set(f,I);const D=(i.get(d.batchId)||en()).add(f);i=i.insert(d.batchId,D)})}).next(()=>{const l=[],d=i.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),y=f.key,I=f.value,D=uF();I.forEach(x=>{if(!a.has(x)){const L=JL(t.get(x),r.get(x));null!==L&&D.set(x,L),a=a.add(x)}}),l.push(this.documentOverlayCache.saveOverlays(e,y,D))}return me.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return rt.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):CR(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):me.resolve(hl());let d=-1,f=a;return l.next(y=>me.forEach(y,(I,D)=>(d<D.largestBatchId&&(d=D.largestBatchId),a.get(I)?me.resolve():this.getBaseDocument(e,I,D).next(x=>{f=f.insert(I,x)}))).next(()=>this.populateOverlays(e,y,a)).next(()=>this.computeViews(e,f,y,en())).next(I=>({batchId:d,changes:aF(I)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new rt(t)).next(r=>{let i=qw();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=qw();return this.indexManager.getCollectionParents(e,i).next(l=>me.forEach(l,d=>{const f=(y=t,I=d.child(i),new Cc(I,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,I;return this.getDocumentsMatchingCollectionQuery(e,f,r).next(y=>{y.forEach((I,D)=>{a=a.insert(I,D)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(a=>{a.forEach((d,f)=>{const y=f.getKey();null===i.get(y)&&(i=i.insert(y,Jn.newInvalidDocument(y)))});let l=qw();return i.forEach((d,f)=>{const y=a.get(d);void 0!==y&&Ww(y.mutation,f,Oo.empty(),fr.now()),SR(t,f)&&(l=l.insert(d,f))}),l})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):me.resolve(Jn.newInvalidDocument(t))}}class kG{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return me.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:wi(r.createTime)}),me.resolve()}getNamedQuery(e,t){return me.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:LR(r.bundledQuery),readTime:wi(r.readTime)}),me.resolve();var r}}class NG{constructor(){this.overlays=new kr(rt.comparator),this.es=new Map}getOverlay(e,t){return me.resolve(this.overlays.get(t))}getOverlays(e,t){const r=hl();return me.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.ue(e,t,a)}),me.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.es.delete(r)),me.resolve()}getOverlaysForCollection(e,t,r){const i=hl(),a=t.length+1,l=new rt(t.child("")),d=this.overlays.getIteratorFrom(l);for(;d.hasNext();){const f=d.getNext().value,y=f.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===a&&f.largestBatchId>r&&i.set(f.getKey(),f)}return me.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new kr((y,I)=>y-I);const l=this.overlays.getIterator();for(;l.hasNext();){const y=l.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let I=a.get(y.largestBatchId);null===I&&(I=hl(),a=a.insert(y.largestBatchId,I)),I.set(y.getKey(),y)}}const d=hl(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((y,I)=>d.set(y,I)),!(d.size()>=i)););return me.resolve(d)}ue(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new OR(t,r));let a=this.es.get(t);void 0===a&&(a=en(),this.es.set(t,a)),this.es.set(t,a.add(r.key))}}class BR{constructor(){this.ns=new jn(Ei.ss),this.rs=new jn(Ei.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new Ei(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new Ei(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new rt(new En([])),r=new Ei(t,e),i=new Ei(t,e+1),a=[];return this.rs.forEachInRange([r,i],l=>{this.cs(l),a.push(l.key)}),a}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new rt(new En([])),r=new Ei(t,e),i=new Ei(t,e+1);let a=en();return this.rs.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new Ei(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ei{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return rt.comparator(e.key,t.key)||Wt(e._s,t._s)}static os(e,t){return Wt(e._s,t._s)||rt.comparator(e.key,t.key)}}class PG{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new jn(Ei.ss)}checkEmpty(e){return me.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.ws;this.ws++;const l=new NR(a,t,r,i);this.mutationQueue.push(l);for(const d of i)this.gs=this.gs.add(new Ei(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return me.resolve(l)}lookupMutationBatch(e,t){return me.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),a=i<0?0:i;return me.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return me.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return me.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ei(t,0),i=new Ei(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],l=>{const d=this.ys(l._s);a.push(d)}),me.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new jn(Wt);return t.forEach(i=>{const a=new Ei(i,0),l=new Ei(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([a,l],d=>{r=r.add(d._s)})}),me.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;rt.isDocumentKey(a)||(a=a.child(""));const l=new Ei(new rt(a),0);let d=new jn(Wt);return this.gs.forEachWhile(f=>{const y=f.key.path;return!!r.isPrefixOf(y)&&(y.length===i&&(d=d.add(f._s)),!0)},l),me.resolve(this.Is(d))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){$t(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return me.forEach(t.mutations,i=>{const a=new Ei(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new Ei(t,0),i=this.gs.firstAfterOrEqual(r);return me.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return me.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class OG{constructor(e){this.Es=e,this.docs=new kr(rt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return me.resolve(r?r.document.mutableCopy():Jn.newInvalidDocument(t))}getEntries(e,t){let r=Js();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Jn.newInvalidDocument(i))}),me.resolve(r)}getAllFromCollection(e,t,r){let i=Js();const a=new rt(t.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:d,value:{document:f}}=l.getNext();if(!t.isPrefixOf(d.path))break;d.path.length>t.length+1||_R(yL(f),r)<=0||(i=i.insert(f.key,f.mutableCopy()))}return me.resolve(i)}getAllFromCollectionGroup(e,t,r,i){pt()}As(e,t){return me.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new LG(this)}getSize(e){return me.resolve(this.size)}}class LG extends KF{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),me.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class FG{constructor(e){this.persistence=e,this.Rs=new eh(t=>Yf(t),Hw),this.lastRemoteSnapshotVersion=Ft.min(),this.highestTargetId=0,this.bs=0,this.Ps=new BR,this.targetCount=0,this.vs=sp.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),me.resolve()}getLastRemoteSnapshotVersion(e){return me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return me.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),me.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),me.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new sp(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,me.resolve()}updateTargetData(e,t){return this.Dn(t),me.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,me.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Rs.forEach((l,d)=>{d.sequenceNumber<=t&&null===r.get(d.targetId)&&(this.Rs.delete(l),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)}),me.waitFor(a).next(()=>i)}getTargetCount(e){return me.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return me.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),me.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),me.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),me.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return me.resolve(r)}containsKey(e,t){return me.resolve(this.Ps.containsKey(t))}}class eU{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Qs(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new FG(this),this.indexManager=new EG,this.remoteDocumentCache=new OG(r=>this.referenceDelegate.xs(r)),this.It=new RF(t),this.Ns=new kG(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new NG,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new PG(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){ze("MemoryPersistence","Starting transaction:",e);const i=new UG(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(a=>this.referenceDelegate.Ms(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Os(e,t){return me.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class UG extends wL{constructor(e){super(),this.currentSequenceNumber=e}}class NC{constructor(e){this.persistence=e,this.Fs=new BR,this.$s=null}static Bs(e){return new NC(e)}get Ls(){if(this.$s)return this.$s;throw pt()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),me.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),me.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),me.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ls.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Ms(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return me.forEach(this.Ls,r=>{const i=rt.fromPath(r);return this.Us(e,i).next(a=>{a||t.removeEntry(i,Ft.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return me.or([()=>me.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class BG{constructor(e){this.It=e}$(e,t,r,i){const a=new fC("createOrUpgrade",t);var d;r<1&&i>=1&&(e.createObjectStore("owner"),(d=e).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",DF,{unique:!0}),d.createObjectStore("documentMutations"),tU(e),function(d){d.createObjectStore("remoteDocuments")}(e));let l=me.resolve();return r<3&&i>=3&&(0!==r&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(e),tU(e)),l=l.next(()=>function(d){const f=d.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ft.min().toTimestamp(),targetCount:0};return f.put("targetGlobalKey",y)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(d,f){return f.store("mutations").W().next(y=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",DF,{unique:!0});const I=f.store("mutations"),D=y.map(x=>I.put(x));return me.waitFor(D)})}(e,a))),l=l.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.qs(a))),r<6&&i>=6&&(l=l.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(a)))),r<7&&i>=7&&(l=l.next(()=>this.Gs(a))),r<8&&i>=8&&(l=l.next(()=>this.Qs(e,a))),r<9&&i>=9&&(l=l.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.js(a))),r<11&&i>=11&&(l=l.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(d){const f=d.createObjectStore("documentOverlays",{keyPath:cG});f.createIndex("collectionPathOverlayIndex",dG,{unique:!1}),f.createIndex("collectionGroupOverlayIndex",hG,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(d){const f=d.createObjectStore("remoteDocumentsV14",{keyPath:JH});f.createIndex("documentKeyIndex",eG),f.createIndex("collectionGroupIndex",tG)}(e)).next(()=>this.Ws(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.zs(e,a))),r<15&&i>=15&&(l=l.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:oG}).createIndex("sequenceNumberIndex",aG,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:uG}).createIndex("documentKeyIndex",lG,{unique:!1})}(e))),l}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=xC(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>me.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(d=>me.forEach(d,f=>{$t(f.userId===a.userId);const y=tp(this.It,f);return HF(e,a.userId,y).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Z((l,d)=>{const f=new En(l),y=[0,Cs(f)];a.push(t.get(y).next(I=>I?me.resolve():t.put({targetId:0,path:Cs(f),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>me.waitFor(a))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:sG});const r=t.store("collectionParents"),i=new UR,a=l=>{if(i.add(l)){const d=l.lastSegment(),f=l.popLast();return r.put({collectionId:d,parent:Cs(f)})}};return t.store("remoteDocuments").Z({X:!0},(l,d)=>{const f=new En(l);return a(f.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([l,d,f],y)=>{const I=pl(d);return a(I.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const a=t0(i),l=NF(this.It,a);return t.put(l)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((a,l)=>{const d=t.store("remoteDocumentsV14"),f=(y=l,y.document?new rt(En.fromString(y.document.name).popFirst(5)):y.noDocument?rt.fromSegments(y.noDocument.path):y.unknownDocument?rt.fromSegments(y.unknownDocument.path):pt()).path.toArray();var y;const I={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(d.put(I))}).next(()=>me.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=ZF(this.It),a=new eU(NC.Bs,this.It.re);return r.W().next(l=>{const d=new Map;return l.forEach(f=>{var y;let I=null!==(y=d.get(f.userId))&&void 0!==y?y:en();tp(this.It,f).keys().forEach(D=>I=I.add(D)),d.set(f.userId,I)}),me.forEach(d,(f,y)=>{const I=new yi(y),D=SC.oe(this.It,I),x=a.getIndexManager(I),L=RC.oe(I,this.It,x,a.referenceDelegate);return new JF(i,L,D,x).recalculateAndSaveOverlaysForDocumentKeys(new kR(t,Qs.at),f).next()})})}}function tU(n){n.createObjectStore("targetDocuments",{keyPath:rG}).createIndex("documentTargetsIndex",iG,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",nG,{unique:!0}),n.createObjectStore("targetGlobal")}const VR="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class jR{constructor(e,t,r,i,a,l,d,f,y,I,D=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=a,this.window=l,this.document=d,this.Js=y,this.Ys=I,this.Xs=D,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=x=>Promise.resolve(),!jR.C())throw new Ve(be.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new AG(this,i),this.ii=t+"main",this.It=new RF(f),this.ri=new Cu(this.ii,this.Xs,new BG(this.It)),this.Cs=new TG(this.referenceDelegate,this.It),this.remoteDocumentCache=ZF(this.It),this.Ns=new mG,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===I&&jr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ve(be.FAILED_PRECONDITION,VR);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Qs(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,De.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,De.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,De.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>PC(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Kd(e))return ze("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ze("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return u0(e).get("owner").next(t=>me.resolve(this.mi(t)))}gi(e){return PC(e).delete(this.clientId)}yi(){var e=this;return(0,De.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=bi(r,"clientMetadata");return i.W().next(a=>{const l=e.Ii(a,18e5),d=a.filter(f=>-1===l.indexOf(f));return me.forEach(d,f=>i.delete(f.clientId)).next(()=>d)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?me.resolve(!0):u0(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Ve(be.FAILED_PRECONDITION,VR);return!1}}return!(!this.networkEnabled||!this.inForeground)||PC(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const l=!this.inForeground&&i.inForeground,d=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||l&&d)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&ze("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,De.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new kR(t,Qs.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>PC(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return RC.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new IG(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return SC.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){ze("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(l=this.Xs)?pG:14===l?xF:13===l?MF:12===l?fG:11===l?AF:void pt();var l;let d;return this.ri.runTransaction(e,i,a,f=>(d=new kR(f,this.Ss?this.Ss.next():Qs.at),"readwrite-primary"===t?this.fi(d).next(y=>!!y||this.di(d)).next(y=>{if(!y)throw jr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Ve(be.FAILED_PRECONDITION,vL);return r(d)}).next(y=>this.wi(d).next(()=>y)):this.Vi(d).next(()=>r(d)))).then(f=>(d.raiseOnCommittedEvent(),f))}Vi(e){return u0(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ve(be.FAILED_PRECONDITION,VR)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return u0(e).put("owner",t)}static C(){return Cu.C()}_i(e){const t=u0(e);return t.get("owner").next(r=>this.mi(r)?(ze("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):me.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(jr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,O.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return ze("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return jr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){jr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function u0(n){return bi(n,"owner")}function PC(n){return bi(n,"clientMetadata")}function $R(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class HR{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=en(),i=en();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new HR(e,t.fromCache,r,i)}}class nU{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(a=>a||this.Mi(e,t,i,r)).next(a=>a||this.Oi(e,t))}ki(e,t){if(jL(t))return me.resolve(null);let r=Xs(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=vC(t,null,"F"),r=Xs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const l=en(...a);return this.Ni.getDocuments(e,l).next(d=>this.indexManager.getMinOffset(e,r).next(f=>{const y=this.Fi(t,d);return this.$i(t,y,l,f.readTime)?this.ki(e,vC(t,null,"F")):this.Bi(e,y,t,f)}))})))}Mi(e,t,r,i){return jL(t)||i.isEqual(Ft.min())?this.Oi(e,t):this.Ni.getDocuments(e,r).next(a=>{const l=this.Fi(t,a);return this.$i(t,l,r,i)?this.Oi(e,t):(pR()<=Ao.in.DEBUG&&ze("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),DR(t)),this.Bi(e,l,t,_L(i,-1)))})}Fi(e,t){let r=new jn(GL(e));return t.forEach((i,a)=>{SR(e,a)&&(r=r.add(a))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Oi(e,t){return pR()<=Ao.in.DEBUG&&ze("QueryEngine","Using full collection scan to execute query:",DR(t)),this.Ni.getDocumentsMatchingQuery(e,t,Po.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}class VG{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.It=i,this.Ui=new kr(Wt),this.qi=new eh(a=>Yf(a),Hw),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new JF(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function rU(n,e,t,r){return new VG(n,e,t,r)}function iU(n,e){return GR.apply(this,arguments)}function GR(){return GR=(0,De.Z)(function*(n,e){const t=ut(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],d=[];let f=en();for(const y of i){l.push(y.batchId);for(const I of y.mutations)f=f.add(I.key)}for(const y of a){d.push(y.batchId);for(const I of y.mutations)f=f.add(I.key)}return t.localDocuments.getDocuments(r,f).next(y=>({ji:y,removedBatchIds:l,addedBatchIds:d}))})})}),GR.apply(this,arguments)}function jG(n,e){const t=ut(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Gi.newChangeBuffer({trackRemovals:!0});return function(l,d,f,y){const I=f.batch,D=I.keys();let x=me.resolve();return D.forEach(L=>{x=x.next(()=>y.getEntry(d,L)).next(V=>{const ee=f.docVersions.get(L);$t(null!==ee),V.version.compareTo(ee)<0&&(I.applyToRemoteDocument(V,f),V.isValidDocument()&&(V.setReadTime(f.commitVersion),y.addEntry(V)))})}),x.next(()=>l.mutationQueue.removeMutationBatch(d,I))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let d=en();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(d=d.add(l.batch.mutations[f].key));return d}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function sU(n){const e=ut(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function $G(n,e){const t=ut(n),r=e.snapshotVersion;let i=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.Ui;const d=[];e.targetChanges.forEach((I,D)=>{const x=i.get(D);if(!x)return;d.push(t.Cs.removeMatchingKeys(a,I.removedDocuments,D).next(()=>t.Cs.addMatchingKeys(a,I.addedDocuments,D)));let L=x.withSequenceNumber(a.currentSequenceNumber);var V,ee,ce;e.targetMismatches.has(D)?L=L.withResumeToken(ai.EMPTY_BYTE_STRING,Ft.min()).withLastLimboFreeSnapshotVersion(Ft.min()):I.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(I.resumeToken,r)),i=i.insert(D,L),ee=L,ce=I,(0===(V=x).resumeToken.approximateByteSize()||ee.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=3e8||ce.addedDocuments.size+ce.modifiedDocuments.size+ce.removedDocuments.size>0)&&d.push(t.Cs.updateTargetData(a,L))});let f=Js(),y=en();if(e.documentUpdates.forEach(I=>{e.resolvedLimboDocuments.has(I)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,I))}),d.push(oU(a,l,e.documentUpdates).next(I=>{f=I.Wi,y=I.zi})),!r.isEqual(Ft.min())){const I=t.Cs.getLastRemoteSnapshotVersion(a).next(D=>t.Cs.setTargetsMetadata(a,a.currentSequenceNumber,r));d.push(I)}return me.waitFor(d).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,f,y)).next(()=>f)}).then(a=>(t.Ui=i,a))}function oU(n,e,t){let r=en(),i=en();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let l=Js();return t.forEach((d,f)=>{const y=a.get(d);f.isFoundDocument()!==y.isFoundDocument()&&(i=i.add(d)),f.isNoDocument()&&f.version.isEqual(Ft.min())?(e.removeEntry(d,f.readTime),l=l.insert(d,f)):!y.isValidDocument()||f.version.compareTo(y.version)>0||0===f.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(f),l=l.insert(d,f)):ze("LocalStore","Ignoring outdated watch update for ",d,". Current version:",y.version," Watch version:",f.version)}),{Wi:l,zi:i}})}function HG(n,e){const t=ut(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function u_(n,e){const t=ut(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(a=>a?(i=a,me.resolve(i)):t.Cs.allocateTargetId(r).next(l=>(i=new th(e,l,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function l_(n,e,t){return zR.apply(this,arguments)}function zR(){return zR=(0,De.Z)(function*(n,e,t){const r=ut(n),i=r.Ui.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Kd(l))throw l;ze("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ui=r.Ui.remove(e),r.qi.delete(i.target)}),zR.apply(this,arguments)}function OC(n,e,t){const r=ut(n);let i=Ft.min(),a=en();return r.persistence.runTransaction("Execute query","readonly",l=>function(d,f,y){const I=ut(d),D=I.qi.get(y);return void 0!==D?me.resolve(I.Ui.get(D)):I.Cs.getTargetData(f,y)}(r,l,Xs(e)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(l,d.targetId).next(f=>{a=f})}).next(()=>r.Li.getDocumentsMatchingQuery(l,e,t?i:Ft.min(),t?a:en())).next(d=>(lU(r,HL(e),d),{documents:d,Hi:a})))}function aU(n,e){const t=ut(n),r=ut(t.Cs),i=t.Ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.se(a,e).next(l=>l?l.target:null))}function uU(n,e){const t=ut(n),r=t.Ki.get(e)||Ft.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,_L(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(lU(t,e,i),i))}function lU(n,e,t){let r=Ft.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Ki.set(e,r)}function WR(){return WR=(0,De.Z)(function*(n,e,t,r){const i=ut(n);let a=en(),l=Js();for(const y of t){const I=e.Ji(y.metadata.name);y.document&&(a=a.add(I));const D=e.Yi(y);D.setReadTime(e.Xi(y.metadata.readTime)),l=l.insert(I,D)}const d=i.Gi.newChangeBuffer({trackRemovals:!0}),f=yield u_(i,(y=r,Xs(Xm(En.fromString(`__bundle__/docs/${y}`)))));var y;return i.persistence.runTransaction("Apply bundle documents","readwrite",y=>oU(y,d,l).next(I=>(d.apply(y),I)).next(I=>i.Cs.removeMatchingKeysForTargetId(y,f.targetId).next(()=>i.Cs.addMatchingKeys(y,a,f.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(y,I.Wi,I.zi)).next(()=>I.Wi)))}),WR.apply(this,arguments)}function zG(n,e){return qR.apply(this,arguments)}function qR(){return qR=(0,De.Z)(function*(n,e,t=en()){const r=yield u_(n,Xs(LR(e.bundledQuery))),i=ut(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=wi(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Ns.saveNamedQuery(a,e);const d=r.withResumeToken(ai.EMPTY_BYTE_STRING,l);return i.Ui=i.Ui.insert(d.targetId,d),i.Cs.updateTargetData(a,d).next(()=>i.Cs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Cs.addMatchingKeys(a,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(a,e))})}),qR.apply(this,arguments)}function cU(n,e){return`firestore_clients_${n}_${e}`}function dU(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function KR(n,e){return`firestore_targets_${n}_${e}`}class LC{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new Ve(i.error.code,i.error.message))),l?new LC(e,t,i.state,a):(jr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class l0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Ve(r.error.code,r.error.message))),a?new l0(e,r.state,i):(jr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class FC{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=IC();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=DL(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new FC(e,a):(jr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class ZR{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new ZR(t.clientId,t.onlineState):(jr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class YR{constructor(){this.activeTargetIds=IC()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class QR{constructor(e,t,r,i,a){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new kr(Wt),this.started=!1,this.cr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=cU(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new YR),this.lr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,De.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const a=e.getItem(cU(e.persistenceKey,i));if(a){const l=FC.Zi(i,a);l&&(e.ur=e.ur.insert(l.clientId,l))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(KR(this.persistenceKey,e));if(r){const i=l0.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(KR(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ze("SharedClientState","READ",e,t),t}setItem(e,t){ze("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ze("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ze("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void jr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,De.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(a){let l=Qs.at;if(null!=a)try{const d=JSON.parse(a);$t("number"==typeof d),l=d}catch(d){jr("SharedClientState","Failed to read sequence number from WebStorage",d)}return l}(r.newValue);i!==Qs.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Mr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Or(a)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new LC(this.currentUser,e,t,r),a=dU(this.persistenceKey,this.currentUser,e);this.setItem(a,i.tr())}Er(e){const t=dU(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=KR(this.persistenceKey,e),a=new l0(e,t,r);this.setItem(i,a.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return FC.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return LC.Zi(new yi(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return l0.Zi(i,t)}yr(e){return ZR.Zi(e)}Mr(e){return JSON.parse(e)}Cr(e){var t=this;return(0,De.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);ze("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),l=[],d=[];return a.forEach(f=>{i.has(f)||l.push(f)}),i.forEach(f=>{a.has(f)||d.push(f)}),this.syncEngine.Br(l,d).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=IC();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class hU{constructor(){this.Lr=new YR,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new YR,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class WG{qr(e){}shutdown(){}}class fU{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){ze("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){ze("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const qG={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class KG{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class ZG extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,i,a){const l=this.ao(e,t);ze("RestConnection","Sending: ",l,r);const d={};return this.ho(d,i,a),this.lo(e,l,d,r).then(f=>(ze("RestConnection","Received: ",f),f),f=>{throw Hf("RestConnection",`${e} failed with error: `,f,"url: ",l,"request:",r),f})}fo(e,t,r,i,a,l){return this.co(e,t,r,i,a)}ho(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+qm,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}ao(e,t){return`${this.oo}/v1/${t}:${qG[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,r,i){return new Promise((a,l)=>{const d=new q$;d.listenOnce(G$.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case fR.NO_ERROR:const y=d.getResponseJson();ze("Connection","XHR received:",JSON.stringify(y)),a(y);break;case fR.TIMEOUT:ze("Connection",'RPC "'+e+'" timed out'),l(new Ve(be.DEADLINE_EXCEEDED,"Request time out"));break;case fR.HTTP_ERROR:const I=d.getStatus();if(ze("Connection",'RPC "'+e+'" failed with status:',I,"response text:",d.getResponseText()),I>0){const D=d.getResponseJson().error;if(D&&D.status&&D.message){const x=function(L){const V=L.toLowerCase().replace(/_/g,"-");return Object.values(be).indexOf(V)>=0?V:be.UNKNOWN}(D.status);l(new Ve(x,D.message))}else l(new Ve(be.UNKNOWN,"Server responded with status "+d.getStatus()))}else l(new Ve(be.UNAVAILABLE,"Connection failed."));break;default:pt()}}finally{ze("Connection",'RPC "'+e+'" completed.')}});const f=JSON.stringify(i);d.send(t,"POST",f,r,15)})}_o(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=$$(),l=H$(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(d.xmlHttpFactory=new W$({})),this.ho(d.initMessageHeaders,t,r),(0,O.uI)()||(0,O.b$)()||(0,O.d)()||(0,O.w1)()||(0,O.Mn)()||(0,O.ru)()||(d.httpHeadersOverwriteParam="$httpHeaders");const f=i.join("");ze("Connection","Creating WebChannel: "+f,d);const y=a.createWebChannel(f,d);let I=!1,D=!1;const x=new KG({Hr:V=>{D?ze("Connection","Not sending because WebChannel is closed:",V):(I||(ze("Connection","Opening WebChannel transport."),y.open(),I=!0),ze("Connection","WebChannel sending:",V),y.send(V))},Jr:()=>y.close()}),L=(V,ee,ce)=>{V.listen(ee,Ge=>{try{ce(Ge)}catch(Ke){setTimeout(()=>{throw Ke},0)}})};return L(y,cC.EventType.OPEN,()=>{D||ze("Connection","WebChannel transport opened.")}),L(y,cC.EventType.CLOSE,()=>{D||(D=!0,ze("Connection","WebChannel transport closed"),x.io())}),L(y,cC.EventType.ERROR,V=>{D||(D=!0,Hf("Connection","WebChannel transport errored:",V),x.io(new Ve(be.UNAVAILABLE,"The operation could not be completed")))}),L(y,cC.EventType.MESSAGE,V=>{var ee;if(!D){const ce=V.data[0];$t(!!ce);const Ge=ce,Ke=Ge.error||(null===(ee=Ge[0])||void 0===ee?void 0:ee.error);if(Ke){ze("Connection","WebChannel received error:",Ke);const tt=Ke.status;let Je=function(xt){const un=Yr[xt];if(void 0!==un)return sF(un)}(tt),Dt=Ke.message;void 0===Je&&(Je=be.INTERNAL,Dt="Unknown error status: "+tt+" with message "+Ke.message),D=!0,x.io(new Ve(Je,Dt)),y.close()}else ze("Connection","WebChannel received:",ce),x.ro(ce)}}),L(l,z$.STAT_EVENT,V=>{V.stat===dL.PROXY?ze("Connection","Detected buffering proxy"):V.stat===dL.NOPROXY&&ze("Connection","Detected no buffering proxy")}),setTimeout(()=>{x.so()},0),x}}function pU(){return typeof window<"u"?window:null}function UC(){return typeof document<"u"?document:null}function c0(n){return new VH(n,!0)}class XR{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Hs=e,this.timerId=t,this.wo=r,this.mo=i,this.yo=a,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),i=Math.max(0,t-r);i>0&&ze("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Io=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}bo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class gU{constructor(e,t,r,i,a,l,d,f){this.Hs=e,this.Po=r,this.vo=i,this.Vo=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new XR(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,De.Z)(function*(){e.No()&&(yield e.close(0))})()}Oo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,De.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,De.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===be.RESOURCE_EXHAUSTED?(jr(t.toString()),jr("Using maximum backoff delay to prevent overloading the backend."),r.xo.Eo()):t&&t.code===be.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new Ve(be.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Mo(){var e=this;this.state=5,this.xo.Ao((0,De.Z)(function*(){e.state=0,e.start()}))}Qo(e){return ze("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(ze("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class YG extends gU{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.It=a}jo(e,t){return this.Vo._o("Listen",e,t)}onMessage(e){this.xo.reset();const t=function HH(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(f=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===f?1:"REMOVE"===f?2:"CURRENT"===f?3:"RESET"===f?4:pt(),i=e.targetChange.targetIds||[],a=function(f,y){return f.gt?($t(void 0===y||"string"==typeof y),ai.fromBase64String(y||"")):($t(void 0===y||y instanceof Uint8Array),ai.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,d=l&&function(f){const y=void 0===f.code?be.UNKNOWN:sF(f.code);return new Ve(y,f.message||"")}(l);t=new cF(r,i,a,d||null)}else if("documentChange"in e){const r=e.documentChange,i=fl(n,r.document.name),a=wi(r.document.updateTime),l=new Fi({mapValue:{fields:r.document.fields}}),d=Jn.newFoundDocument(i,a,l);t=new TC(r.targetIds||[],r.removedTargetIds||[],d.key,d)}else if("documentDelete"in e){const r=e.documentDelete,i=fl(n,r.document),a=r.readTime?wi(r.readTime):Ft.min(),l=Jn.newNoDocument(i,a);t=new TC([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=fl(n,r.document);t=new TC([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return pt();{const r=e.filter,a=new kH(r.count||0);t=new lF(r.targetId,a)}}var f;return t}(this.It,e),r=function(i){if(!("targetChange"in i))return Ft.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Ft.min():a.readTime?wi(a.readTime):Ft.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=Jw(this.It),t.addTarget=function(i,a){let l;const d=a.target;return l=_C(d)?{documents:wF(i,d)}:{query:bF(i,d)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?l.resumeToken=pF(i,a.resumeToken):a.snapshotVersion.compareTo(Ft.min())>0&&(l.readTime=Qw(i,a.snapshotVersion.toTimestamp())),l}(this.It,e);const r=function zH(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return pt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=Jw(this.It),t.removeTarget=e,this.Bo(t)}}class QG extends gU{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.It=a,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.Vo._o("Write",e,t)}onMessage(e){if($t(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function GH(n,e){return n&&n.length>0?($t(void 0!==e),n.map(t=>function(r,i){let a=wi(r.updateTime?r.updateTime:i);return a.isEqual(Ft.min())&&(a=wi(i)),new MH(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=wi(e.commitTime);return this.listener.Zo(r,t)}return $t(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Jw(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>e0(this.It,r))};this.Bo(t)}}class XG extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.Vo=r,this.It=i,this.nu=!1}su(){if(this.nu)throw new Ve(be.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.Vo.co(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ve(be.UNKNOWN,i.toString())})}fo(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.Vo.fo(e,t,r,a,l,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ve(be.UNKNOWN,a.toString())})}terminate(){this.nu=!0}}class JG{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(jr(t),this.ou=!1):ze("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class ez{constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.qr(d=>{r.enqueueAndForget((0,De.Z)(function*(){var f;ih(l)&&(ze("RemoteStore","Restarting streams for network reachability change."),yield(f=(0,De.Z)(function*(y){const I=ut(y);I._u.add(4),yield c_(I),I.gu.set("Unknown"),I._u.delete(4),yield d0(I)}),function(y){return f.apply(this,arguments)})(l))}))}),this.gu=new JG(r,i)}}function d0(n){return JR.apply(this,arguments)}function JR(){return JR=(0,De.Z)(function*(n){if(ih(n))for(const e of n.wu)yield e(!0)}),JR.apply(this,arguments)}function c_(n){return ek.apply(this,arguments)}function ek(){return ek=(0,De.Z)(function*(n){for(const e of n.wu)yield e(!1)}),ek.apply(this,arguments)}function BC(n,e){const t=ut(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),rk(t)?nk(t):h_(t).ko()&&tk(t,e))}function h0(n,e){const t=ut(n),r=h_(t);t.du.delete(e),r.ko()&&mU(t,e),0===t.du.size&&(r.ko()?r.Fo():ih(t)&&t.gu.set("Unknown"))}function tk(n,e){n.yu.Ot(e.targetId),h_(n).zo(e)}function mU(n,e){n.yu.Ot(e),h_(n).Ho(e)}function nk(n){n.yu=new FH({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),h_(n).start(),n.gu.uu()}function rk(n){return ih(n)&&!h_(n).No()&&n.du.size>0}function ih(n){return 0===ut(n)._u.size}function _U(n){n.yu=void 0}function tz(n){return ik.apply(this,arguments)}function ik(){return ik=(0,De.Z)(function*(n){n.du.forEach((e,t)=>{tk(n,e)})}),ik.apply(this,arguments)}function nz(n,e){return sk.apply(this,arguments)}function sk(){return sk=(0,De.Z)(function*(n,e){_U(n),rk(n)?(n.gu.hu(e),nk(n)):n.gu.set("Unknown")}),sk.apply(this,arguments)}function rz(n,e,t){return ok.apply(this,arguments)}function ok(){return ok=(0,De.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof cF&&2===e.state&&e.cause)try{yield(r=(0,De.Z)(function*(i,a){const l=a.cause;for(const d of a.targetIds)i.du.has(d)&&(yield i.remoteSyncer.rejectListen(d,l),i.du.delete(d),i.yu.removeTarget(d))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){ze("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield VC(n,r)}else if(e instanceof TC?n.yu.Gt(e):e instanceof lF?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(Ft.min()))try{const r=yield sU(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.yu.te(a);return l.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const y=i.du.get(f);y&&i.du.set(f,y.withResumeToken(d.resumeToken,a))}}),l.targetMismatches.forEach(d=>{const f=i.du.get(d);if(!f)return;i.du.set(d,f.withResumeToken(ai.EMPTY_BYTE_STRING,f.snapshotVersion)),mU(i,d);const y=new th(f.target,d,1,f.sequenceNumber);tk(i,y)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){ze("RemoteStore","Failed to raise snapshot:",r),yield VC(n,r)}var r}),ok.apply(this,arguments)}function VC(n,e,t){return ak.apply(this,arguments)}function ak(){return ak=(0,De.Z)(function*(n,e,t){if(!Kd(e))throw e;n._u.add(1),yield c_(n),n.gu.set("Offline"),t||(t=()=>sU(n.localStore)),n.asyncQueue.enqueueRetryable((0,De.Z)(function*(){ze("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield d0(n)}))}),ak.apply(this,arguments)}function yU(n,e){return e().catch(t=>VC(n,t,e))}function d_(n){return uk.apply(this,arguments)}function uk(){return uk=(0,De.Z)(function*(n){const e=ut(n),t=sh(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;iz(e);)try{const i=yield HG(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,sz(e,i)}catch(i){yield VC(e,i)}vU(e)&&wU(e)}),uk.apply(this,arguments)}function iz(n){return ih(n)&&n.fu.length<10}function sz(n,e){n.fu.push(e);const t=sh(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function vU(n){return ih(n)&&!sh(n).No()&&n.fu.length>0}function wU(n){sh(n).start()}function oz(n){return lk.apply(this,arguments)}function lk(){return lk=(0,De.Z)(function*(n){sh(n).eu()}),lk.apply(this,arguments)}function az(n){return ck.apply(this,arguments)}function ck(){return ck=(0,De.Z)(function*(n){const e=sh(n);for(const t of n.fu)e.Xo(t.mutations)}),ck.apply(this,arguments)}function uz(n,e,t){return dk.apply(this,arguments)}function dk(){return dk=(0,De.Z)(function*(n,e,t){const r=n.fu.shift(),i=PR.from(r,e,t);yield yU(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield d_(n)}),dk.apply(this,arguments)}function lz(n,e){return hk.apply(this,arguments)}function hk(){return hk=(0,De.Z)(function*(n,e){var t;e&&sh(n).Yo&&(yield(t=(0,De.Z)(function*(r,i){if(iF(a=i.code)&&a!==be.ABORTED){const l=r.fu.shift();sh(r).Oo(),yield yU(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield d_(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),vU(n)&&wU(n)}),hk.apply(this,arguments)}function bU(n,e){return fk.apply(this,arguments)}function fk(){return fk=(0,De.Z)(function*(n,e){const t=ut(n);t.asyncQueue.verifyOperationInProgress(),ze("RemoteStore","RemoteStore received new credentials");const r=ih(t);t._u.add(3),yield c_(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield d0(t)}),fk.apply(this,arguments)}function pk(n,e){return gk.apply(this,arguments)}function gk(){return gk=(0,De.Z)(function*(n,e){const t=ut(n);e?(t._u.delete(2),yield d0(t)):e||(t._u.add(2),yield c_(t),t.gu.set("Unknown"))}),gk.apply(this,arguments)}function h_(n){return n.pu||(n.pu=function(e,t,r){const i=ut(e);return i.su(),new YG(t,i.Vo,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:tz.bind(null,n),Zr:nz.bind(null,n),Wo:rz.bind(null,n)}),n.wu.push(function(){var e=(0,De.Z)(function*(t){t?(n.pu.Oo(),rk(n)?nk(n):n.gu.set("Unknown")):(yield n.pu.stop(),_U(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function sh(n){return n.Iu||(n.Iu=function(e,t,r){const i=ut(e);return i.su(),new QG(t,i.Vo,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:oz.bind(null,n),Zr:lz.bind(null,n),tu:az.bind(null,n),Zo:uz.bind(null,n)}),n.wu.push(function(){var e=(0,De.Z)(function*(t){t?(n.Iu.Oo(),yield d_(n)):(yield n.Iu.stop(),n.fu.length>0&&(ze("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class mk{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new vi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,d=new mk(e,t,l,i,a);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ve(be.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function f_(n,e){if(jr("AsyncQueue",`${e}: ${n}`),Kd(n))return new Ve(be.UNAVAILABLE,`${e}: ${n}`);throw n}class p_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||rt.comparator(t.key,r.key):(t,r)=>rt.comparator(t.key,r.key),this.keyedMap=qw(),this.sortedSet=new kr(this.comparator)}static emptySet(e){return new p_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof p_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new p_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class EU{constructor(){this.Tu=new kr(rt.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):pt():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class g_{constructor(e,t,r,i,a,l,d,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=d,this.excludesMetadataChanges=f}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(l=>{a.push({type:0,doc:l})}),new g_(e,t,p_.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class cz{constructor(){this.Au=void 0,this.listeners=[]}}class dz{constructor(){this.queries=new eh(e=>$L(e),Gw),this.onlineState="Unknown",this.Ru=new Set}}function _k(n,e){return yk.apply(this,arguments)}function yk(){return yk=(0,De.Z)(function*(n,e){const t=ut(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new cz),i)try{a.Au=yield t.onListen(r)}catch(l){const d=f_(l,`Initialization of query '${DR(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,a),a.listeners.push(e),e.bu(t.onlineState),a.Au&&e.Pu(a.Au)&&bk(t)}),yk.apply(this,arguments)}function vk(n,e){return wk.apply(this,arguments)}function wk(){return wk=(0,De.Z)(function*(n,e){const t=ut(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),wk.apply(this,arguments)}function hz(n,e){const t=ut(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const d of l.listeners)d.Pu(i)&&(r=!0);l.Au=i}}r&&bk(t)}function fz(n,e,t){const r=ut(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function bk(n){n.Ru.forEach(e=>{e.next()})}class Ek{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new g_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||!(this.options.Nu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=g_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Vu=!0,this.vu.next(e)}}class pz{constructor(e,t){this.payload=e,this.byteLength=t}ku(){return"metadata"in this.payload}}class IU{constructor(e){this.It=e}Ji(e){return fl(this.It,e)}Yi(e){return e.metadata.exists?vF(this.It,e.document,!1):Jn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return wi(e)}}class gz{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=TU(e)}Ou(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=En.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Fu(e){const t=new Map,r=new IU(this.It);for(const i of e)if(i.metadata.queries){const a=r.Ji(i.metadata.name);for(const l of i.metadata.queries){const d=(t.get(l)||en()).add(a);t.set(l,d)}}return t}complete(){var e=this;return(0,De.Z)(function*(){const t=yield function GG(n,e,t,r){return WR.apply(this,arguments)}(e.localStore,new IU(e.It),e.documents,e.Mu.id),r=e.Fu(e.documents);for(const i of e.queries)yield zG(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,$u:e.collectionGroups,Bu:t}})()}}function TU(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class CU{constructor(e){this.key=e}}class DU{constructor(e){this.key=e}}class SU{constructor(e,t){this.query=e,this.Lu=t,this.Uu=null,this.current=!1,this.qu=en(),this.mutatedKeys=en(),this.Ku=GL(e),this.Gu=new p_(this.Ku)}get Qu(){return this.Lu}ju(e,t){const r=t?t.Wu:new EU,i=t?t.Gu:this.Gu;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,d=!1;const f="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,y="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((I,D)=>{const x=i.get(I),L=SR(this.query,D)?D:null,V=!!x&&this.mutatedKeys.has(x.key),ee=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let ce=!1;x&&L?x.data.isEqual(L.data)?V!==ee&&(r.track({type:3,doc:L}),ce=!0):this.zu(x,L)||(r.track({type:2,doc:L}),ce=!0,(f&&this.Ku(L,f)>0||y&&this.Ku(L,y)<0)&&(d=!0)):!x&&L?(r.track({type:0,doc:L}),ce=!0):x&&!L&&(r.track({type:1,doc:x}),ce=!0,(f||y)&&(d=!0)),ce&&(L?(l=l.add(L),a=ee?a.add(I):a.delete(I)):(l=l.delete(I),a=a.delete(I)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const I="F"===this.query.limitType?l.last():l.first();l=l.delete(I.key),a=a.delete(I.key),r.track({type:1,doc:I})}return{Gu:l,Wu:r,$i:d,mutatedKeys:a}}zu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const a=e.Wu.Eu();a.sort((y,I)=>function(D,x){const L=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pt()}};return L(D)-L(x)}(y.type,I.type)||this.Ku(y.doc,I.doc)),this.Hu(r);const l=t?this.Ju():[],d=0===this.qu.size&&this.current?1:0,f=d!==this.Uu;return this.Uu=d,0!==a.length||f?{snapshot:new g_(this.query,e.Gu,i,a,e.mutatedKeys,0===d,f,!1),Yu:l}:{Yu:l}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new EU,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}Xu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.qu;this.qu=en(),this.Gu.forEach(r=>{this.Xu(r.key)&&(this.qu=this.qu.add(r.key))});const t=[];return e.forEach(r=>{this.qu.has(r)||t.push(new DU(r))}),this.qu.forEach(r=>{e.has(r)||t.push(new CU(r))}),t}Zu(e){this.Lu=e.Hi,this.qu=en();const t=this.ju(e.documents);return this.applyChanges(t,!0)}tc(){return g_.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.Uu)}}class mz{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class _z{constructor(e){this.key=e,this.ec=!1}}class yz{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.nc={},this.sc=new eh(d=>$L(d),Gw),this.ic=new Map,this.rc=new Set,this.oc=new kr(rt.comparator),this.uc=new Map,this.cc=new BR,this.ac={},this.hc=new Map,this.lc=sp.vn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function vz(n,e){return Ik.apply(this,arguments)}function Ik(){return Ik=(0,De.Z)(function*(n,e){const t=Wk(n);let r,i;const a=t.sc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.tc();else{const l=yield u_(t.localStore,Xs(e));t.isPrimaryClient&&BC(t.remoteStore,l);const d=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield Tk(t,e,r,"current"===d)}return i}),Ik.apply(this,arguments)}function Tk(n,e,t,r){return Ck.apply(this,arguments)}function Ck(){return Ck=(0,De.Z)(function*(n,e,t,r){n.dc=(I,D,x)=>{return(L=(0,De.Z)(function*(V,ee,ce,Ge){let Ke=ee.view.ju(ce);Ke.$i&&(Ke=yield OC(V.localStore,ee.query,!1).then(({documents:Dt})=>ee.view.ju(Dt,Ke)));const tt=Ge&&Ge.targetChanges.get(ee.targetId),Je=ee.view.applyChanges(Ke,V.isPrimaryClient,tt);return Ok(V,ee.targetId,Je.Yu),Je.snapshot}),function(V,ee,ce,Ge){return L.apply(this,arguments)})(n,I,D,x);var L};const i=yield OC(n.localStore,e,!0),a=new SU(e,i.Hi),l=a.ju(i.documents),d=Yw.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),f=a.applyChanges(l,n.isPrimaryClient,d);Ok(n,t,f.Yu);const y=new mz(e,t,a);return n.sc.set(e,y),n.ic.has(t)?n.ic.get(t).push(e):n.ic.set(t,[e]),f.snapshot}),Ck.apply(this,arguments)}function wz(n,e){return Dk.apply(this,arguments)}function Dk(){return Dk=(0,De.Z)(function*(n,e){const t=ut(n),r=t.sc.get(e),i=t.ic.get(r.targetId);if(i.length>1)return t.ic.set(r.targetId,i.filter(a=>!Gw(a,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield l_(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),h0(t.remoteStore,r.targetId),m_(t,r.targetId)}).catch(qd))):(m_(t,r.targetId),yield l_(t.localStore,r.targetId,!0))}),Dk.apply(this,arguments)}function Sk(){return Sk=(0,De.Z)(function*(n,e,t){const r=qk(n);try{const i=yield function(a,l){const d=ut(a),f=fr.now(),y=l.reduce((x,L)=>x.add(L.key),en());let I,D;return d.persistence.runTransaction("Locally write mutations","readwrite",x=>{let L=Js(),V=en();return d.Gi.getEntries(x,y).next(ee=>{L=ee,L.forEach((ce,Ge)=>{Ge.isValidDocument()||(V=V.add(ce))})}).next(()=>d.localDocuments.getOverlayedDocuments(x,L)).next(ee=>{I=ee;const ce=[];for(const Ge of l){const Ke=RH(Ge,I.get(Ge.key).overlayedDocument);null!=Ke&&ce.push(new Dc(Ge.key,Ke,NL(Ke.value.mapValue),pr.exists(!0)))}return d.mutationQueue.addMutationBatch(x,f,ce,l)}).next(ee=>{D=ee;const ce=ee.applyToLocalDocumentSet(I,V);return d.documentOverlayCache.saveOverlays(x,ee.batchId,ce)})}).then(()=>({batchId:D.batchId,changes:aF(I)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,d){let f=a.ac[a.currentUser.toKey()];f||(f=new kr(Wt)),f=f.insert(l,d),a.ac[a.currentUser.toKey()]=f}(r,i.batchId,t),yield Sc(r,i.changes),yield d_(r.remoteStore)}catch(i){const a=f_(i,"Failed to persist write");t.reject(a)}}),Sk.apply(this,arguments)}function AU(n,e){return Ak.apply(this,arguments)}function Ak(){return Ak=(0,De.Z)(function*(n,e){const t=ut(n);try{const r=yield $G(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.uc.get(a);l&&($t(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.ec=!0:i.modifiedDocuments.size>0?$t(l.ec):i.removedDocuments.size>0&&($t(l.ec),l.ec=!1))}),yield Sc(t,r,e)}catch(r){yield qd(r)}}),Ak.apply(this,arguments)}function MU(n,e,t){const r=ut(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.sc.forEach((a,l)=>{const d=l.view.bu(e);d.snapshot&&i.push(d.snapshot)}),function(a,l){const d=ut(a);d.onlineState=l;let f=!1;d.queries.forEach((y,I)=>{for(const D of I.listeners)D.bu(l)&&(f=!0)}),f&&bk(d)}(r.eventManager,e),i.length&&r.nc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Ez(n,e,t){return Mk.apply(this,arguments)}function Mk(){return Mk=(0,De.Z)(function*(n,e,t){const r=ut(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.uc.get(e),a=i&&i.key;if(a){let l=new kr(rt.comparator);l=l.insert(a,Jn.newNoDocument(a,Ft.min()));const d=en().add(a),f=new Zw(Ft.min(),new Map,new jn(Wt),l,d);yield AU(r,f),r.oc=r.oc.remove(a),r.uc.delete(e),Lk(r)}else yield l_(r.localStore,e,!1).then(()=>m_(r,e,t)).catch(qd)}),Mk.apply(this,arguments)}function Iz(n,e){return xk.apply(this,arguments)}function xk(){return xk=(0,De.Z)(function*(n,e){const t=ut(n),r=e.batch.batchId;try{const i=yield jG(t.localStore,e);Pk(t,r,null),Nk(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Sc(t,i)}catch(i){yield qd(i)}}),xk.apply(this,arguments)}function Tz(n,e,t){return Rk.apply(this,arguments)}function Rk(){return Rk=(0,De.Z)(function*(n,e,t){const r=ut(n);try{const i=yield function(a,l){const d=ut(a);return d.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let y;return d.mutationQueue.lookupMutationBatch(f,l).next(I=>($t(null!==I),y=I.keys(),d.mutationQueue.removeMutationBatch(f,I))).next(()=>d.mutationQueue.performConsistencyCheck(f)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(f,y,l)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,y)).next(()=>d.localDocuments.getDocuments(f,y))})}(r.localStore,e);Pk(r,e,t),Nk(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Sc(r,i)}catch(i){yield qd(i)}}),Rk.apply(this,arguments)}function kk(){return kk=(0,De.Z)(function*(n,e){const t=ut(n);ih(t.remoteStore)||ze("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=ut(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>l.mutationQueue.getHighestUnacknowledgedBatchId(d))}(t.localStore);if(-1===r)return void e.resolve();const i=t.hc.get(r)||[];i.push(e),t.hc.set(r,i)}catch(r){const i=f_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),kk.apply(this,arguments)}function Nk(n,e){(n.hc.get(e)||[]).forEach(t=>{t.resolve()}),n.hc.delete(e)}function Pk(n,e,t){const r=ut(n);let i=r.ac[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.ac[r.currentUser.toKey()]=i}}function m_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ic.get(e))n.sc.delete(r),t&&n.nc._c(r,t);n.ic.delete(e),n.isPrimaryClient&&n.cc.ls(e).forEach(r=>{n.cc.containsKey(r)||xU(n,r)})}function xU(n,e){n.rc.delete(e.path.canonicalString());const t=n.oc.get(e);null!==t&&(h0(n.remoteStore,t),n.oc=n.oc.remove(e),n.uc.delete(t),Lk(n))}function Ok(n,e,t){for(const r of t)r instanceof CU?(n.cc.addReference(r.key,e),Dz(n,r)):r instanceof DU?(ze("SyncEngine","Document no longer in limbo: "+r.key),n.cc.removeReference(r.key,e),n.cc.containsKey(r.key)||xU(n,r.key)):pt()}function Dz(n,e){const t=e.key,r=t.path.canonicalString();n.oc.get(t)||n.rc.has(r)||(ze("SyncEngine","New document in limbo: "+t),n.rc.add(r),Lk(n))}function Lk(n){for(;n.rc.size>0&&n.oc.size<n.maxConcurrentLimboResolutions;){const e=n.rc.values().next().value;n.rc.delete(e);const t=new rt(En.fromString(e)),r=n.lc.next();n.uc.set(r,new _z(t)),n.oc=n.oc.insert(t,r),BC(n.remoteStore,new th(Xs(Xm(t.path)),r,2,Qs.at))}}function Sc(n,e,t){return Fk.apply(this,arguments)}function Fk(){return Fk=(0,De.Z)(function*(n,e,t){const r=ut(n),i=[],a=[],l=[];var d;r.sc.isEmpty()||(r.sc.forEach((d,f)=>{l.push(r.dc(f,e,t).then(y=>{if(y){r.isPrimaryClient&&r.sharedClientState.updateQueryState(f.targetId,y.fromCache?"not-current":"current"),i.push(y);const I=HR.Ci(f.targetId,y);a.push(I)}}))}),yield Promise.all(l),r.nc.Wo(i),yield(d=(0,De.Z)(function*(f,y){const I=ut(f);try{yield I.persistence.runTransaction("notifyLocalViewChanges","readwrite",D=>me.forEach(y,x=>me.forEach(x.Si,L=>I.persistence.referenceDelegate.addReference(D,x.targetId,L)).next(()=>me.forEach(x.Di,L=>I.persistence.referenceDelegate.removeReference(D,x.targetId,L)))))}catch(D){if(!Kd(D))throw D;ze("LocalStore","Failed to update sequence numbers: "+D)}for(const D of y){const x=D.targetId;if(!D.fromCache){const L=I.Ui.get(x),ee=L.withLastLimboFreeSnapshotVersion(L.snapshotVersion);I.Ui=I.Ui.insert(x,ee)}}}),function(f,y){return d.apply(this,arguments)})(r.localStore,a))}),Fk.apply(this,arguments)}function Sz(n,e){return Uk.apply(this,arguments)}function Uk(){return Uk=(0,De.Z)(function*(n,e){const t=ut(n);if(!t.currentUser.isEqual(e)){ze("SyncEngine","User change. New user:",e.toKey());const r=yield iU(t.localStore,e);t.currentUser=e,(i=t).hc.forEach(l=>{l.forEach(d=>{d.reject(new Ve(be.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.hc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Sc(t,r.ji)}var i}),Uk.apply(this,arguments)}function Az(n,e){const t=ut(n),r=t.uc.get(e);if(r&&r.ec)return en().add(r.key);{let i=en();const a=t.ic.get(e);if(!a)return i;for(const l of a){const d=t.sc.get(l);i=i.unionWith(d.view.Qu)}return i}}function Mz(n,e){return Bk.apply(this,arguments)}function Bk(){return Bk=(0,De.Z)(function*(n,e){const t=ut(n),r=yield OC(t.localStore,e.query,!0),i=e.view.Zu(r);return t.isPrimaryClient&&Ok(t,e.targetId,i.Yu),i}),Bk.apply(this,arguments)}function xz(n,e){return Vk.apply(this,arguments)}function Vk(){return Vk=(0,De.Z)(function*(n,e){const t=ut(n);return uU(t.localStore,e).then(r=>Sc(t,r))}),Vk.apply(this,arguments)}function Rz(n,e,t,r){return jk.apply(this,arguments)}function jk(){return jk=(0,De.Z)(function*(n,e,t,r){const i=ut(n),a=yield function(l,d){const f=ut(l),y=ut(f.mutationQueue);return f.persistence.runTransaction("Lookup mutation documents","readonly",I=>y.Tn(I,d).next(D=>D?f.localDocuments.getDocuments(I,D):me.resolve(null)))}(i.localStore,e);var d;null!==a?("pending"===t?yield d_(i.remoteStore):"acknowledged"===t||"rejected"===t?(Pk(i,e,r||null),Nk(i,e),d=e,ut(ut(i.localStore).mutationQueue).An(d)):pt(),yield Sc(i,a)):ze("SyncEngine","Cannot apply mutation batch with id: "+e)}),jk.apply(this,arguments)}function $k(){return $k=(0,De.Z)(function*(n,e){const t=ut(n);if(Wk(t),qk(t),!0===e&&!0!==t.fc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield RU(t,r.toArray());t.fc=!0,yield pk(t.remoteStore,!0);for(const a of i)BC(t.remoteStore,a)}else if(!1===e&&!1!==t.fc){const r=[];let i=Promise.resolve();t.ic.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(m_(t,l),l_(t.localStore,l,!0))),h0(t.remoteStore,l)}),yield i,yield RU(t,r),function(a){const l=ut(a);l.uc.forEach((d,f)=>{h0(l.remoteStore,f)}),l.cc.fs(),l.uc=new Map,l.oc=new kr(rt.comparator)}(t),t.fc=!1,yield pk(t.remoteStore,!1)}}),$k.apply(this,arguments)}function RU(n,e,t){return Hk.apply(this,arguments)}function Hk(){return Hk=(0,De.Z)(function*(n,e,t){const r=ut(n),i=[],a=[];for(const l of e){let d;const f=r.ic.get(l);if(f&&0!==f.length){d=yield u_(r.localStore,Xs(f[0]));for(const y of f){const I=r.sc.get(y),D=yield Mz(r,I);D.snapshot&&a.push(D.snapshot)}}else{const y=yield aU(r.localStore,l);d=yield u_(r.localStore,y),yield Tk(r,kU(y),l,!1)}i.push(d)}return r.nc.Wo(a),i}),Hk.apply(this,arguments)}function kU(n){return VL(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Nz(n){const e=ut(n);return ut(ut(e.localStore).persistence).vi()}function Pz(n,e,t,r){return Gk.apply(this,arguments)}function Gk(){return Gk=(0,De.Z)(function*(n,e,t,r){const i=ut(n);if(i.fc)return void ze("SyncEngine","Ignoring unexpected query state notification.");const a=i.ic.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=yield uU(i.localStore,HL(a[0])),d=Zw.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Sc(i,l,d);break}case"rejected":yield l_(i.localStore,e,!0),m_(i,e,r);break;default:pt()}}),Gk.apply(this,arguments)}function Oz(n,e,t){return zk.apply(this,arguments)}function zk(){return zk=(0,De.Z)(function*(n,e,t){const r=Wk(n);if(r.fc){for(const i of e){if(r.ic.has(i)){ze("SyncEngine","Adding an already active target "+i);continue}const a=yield aU(r.localStore,i),l=yield u_(r.localStore,a);yield Tk(r,kU(a),l.targetId,!1),BC(r.remoteStore,l)}for(const i of t)r.ic.has(i)&&(yield l_(r.localStore,i,!1).then(()=>{h0(r.remoteStore,i),m_(r,i)}).catch(qd))}}),zk.apply(this,arguments)}function Wk(n){const e=ut(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=AU.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Az.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ez.bind(null,e),e.nc.Wo=hz.bind(null,e.eventManager),e.nc._c=fz.bind(null,e.eventManager),e}function qk(n){const e=ut(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Iz.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Tz.bind(null,e),e}class NU{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,De.Z)(function*(){t.It=c0(e.databaseInfo.databaseId),t.sharedClientState=t.mc(e),t.persistence=t.gc(e),yield t.persistence.start(),t.localStore=t.yc(e),t.gcScheduler=t.Ic(e,t.localStore),t.indexBackfillerScheduler=t.Tc(e,t.localStore)})()}Ic(e,t){return null}Tc(e,t){return null}yc(e){return rU(this.persistence,new nU,e.initialUser,this.It)}gc(e){return new eU(NC.Bs,this.It)}mc(e){return new hU}terminate(){var e=this;return(0,De.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class PU extends NU{constructor(e,t,r){super(),this.Ec=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,De.Z)(function*(){yield t().call(r,e),yield r.Ec.initialize(r,e),yield qk(r.Ec.syncEngine),yield d_(r.Ec.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}yc(e){return rU(this.persistence,new nU,e.initialUser,this.It)}Ic(e,t){return new DG(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Tc(e,t){const r=new lH(t,this.persistence);return new uH(e.asyncQueue,r)}gc(e){const t=$R(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?eo.withCacheSize(this.cacheSizeBytes):eo.DEFAULT;return new jR(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,pU(),UC(),this.It,this.sharedClientState,!!this.forceOwnership)}mc(e){return new hU}}class Fz extends PU{constructor(e,t){super(e,t,!1),this.Ec=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,De.Z)(function*(){yield t().call(r,e);const i=r.Ec.syncEngine;r.sharedClientState instanceof QR&&(r.sharedClientState.syncEngine={Fr:Rz.bind(null,i),$r:Pz.bind(null,i),Br:Oz.bind(null,i),vi:Nz.bind(null,i),Or:xz.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var a=(0,De.Z)(function*(l){yield function kz(n,e){return $k.apply(this,arguments)}(r.Ec.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}mc(e){const t=pU();if(!QR.C(t))throw new Ve(be.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=$R(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new QR(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Kk{initialize(e,t){var r=this;return(0,De.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>MU(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=Sz.bind(null,r.syncEngine),yield pk(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new dz}createDatastore(e){const t=c0(e.databaseInfo.databaseId),r=new ZG(e.databaseInfo);return new XG(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=d=>MU(this.syncEngine,d,0),l=fU.C()?new fU:new WG,new ez(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,d,f,y){const I=new yz(r,i,a,l,d,f);return y&&(I.fc=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,De.Z)(function*(t){const r=ut(t);ze("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield c_(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function OU(n,e=10240){let t=0;return{read:()=>(0,De.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,De.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class jC{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ac(this.observer.next,e)}error(e){this.observer.error?this.Ac(this.observer.error,e):jr("Uncaught Error in snapshot listener:",e)}Rc(){this.muted=!0}Ac(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Uz{constructor(e,t){this.bc=e,this.It=t,this.metadata=new vi,this.buffer=new Uint8Array,this.Pc=new TextDecoder("utf-8"),this.vc().then(r=>{r&&r.ku()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.bc.cancel()}getMetadata(){var e=this;return(0,De.Z)(function*(){return e.metadata.promise})()}wc(){var e=this;return(0,De.Z)(function*(){return yield e.getMetadata(),e.vc()})()}vc(){var e=this;return(0,De.Z)(function*(){const t=yield e.Vc();if(null===t)return null;const r=e.Pc.decode(t),i=Number(r);isNaN(i)&&e.Sc(`length string (${r}) is not valid number`);const a=yield e.Dc(i);return new pz(JSON.parse(a),t.length+i)})()}Cc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Vc(){var e=this;return(0,De.Z)(function*(){for(;e.Cc()<0&&!(yield e.xc()););if(0===e.buffer.length)return null;const t=e.Cc();t<0&&e.Sc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Dc(e){var t=this;return(0,De.Z)(function*(){for(;t.buffer.length<e;)(yield t.xc())&&t.Sc("Reached the end of bundle when more is expected.");const r=t.Pc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Sc(e){throw this.bc.cancel(),new Error(`Invalid bundle format: ${e}`)}xc(){var e=this;return(0,De.Z)(function*(){const t=yield e.bc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Bz{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,De.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ve(be.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,De.Z)(function*(a,l){const d=ut(a),f=Jw(d.It)+"/documents",y={documents:l.map(L=>Xw(d.It,L))},I=yield d.fo("BatchGetDocuments",f,y,l.length),D=new Map;I.forEach(L=>{const V=function $H(n,e){return"found"in e?function(t,r){$t(!!r.found);const i=fl(t,r.found.name),a=wi(r.found.updateTime),l=new Fi({mapValue:{fields:r.found.fields}});return Jn.newFoundDocument(i,a,l)}(n,e):"missing"in e?function(t,r){$t(!!r.missing),$t(!!r.readTime);const i=fl(t,r.missing),a=wi(r.readTime);return Jn.newNoDocument(i,a)}(n,e):pt()}(d.It,L);D.set(V.key.toString(),V)});const x=[];return l.forEach(L=>{const V=D.get(L.toString());$t(!!V),x.push(V)}),x}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new r_(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,De.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=rt.fromPath(i);e.mutations.push(new AR(a,e.precondition(a)))}),yield(r=(0,De.Z)(function*(i,a){const l=ut(i),d=Jw(l.It)+"/documents",f={writes:a.map(y=>e0(l.It,y))};yield l.co("Commit",d,f)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw pt();t=Ft.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ve(be.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ft.min())?pr.exists(!1):pr.updateTime(t):pr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ft.min()))throw new Ve(be.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return pr.updateTime(t)}return pr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Vz{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.Nc=r.maxAttempts,this.xo=new XR(this.asyncQueue,"transaction_retry")}run(){this.Nc-=1,this.kc()}kc(){var e=this;this.xo.Ao((0,De.Z)(function*(){const t=new Bz(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Oc(a)}))}).catch(i=>{e.Oc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!Uw(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Oc(e){this.Nc>0&&this.Fc(e)?(this.Nc-=1,this.asyncQueue.enqueueAndForget(()=>(this.kc(),Promise.resolve()))):this.deferred.reject(e)}Fc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!iF(t)}return!1}}class jz{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=yi.UNAUTHENTICATED,this.clientId=gL.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,De.Z)(function*(d){ze("FirestoreClient","Received user=",d.uid),yield a.authCredentialListener(d),a.user=d});return function(d){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(ze("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,De.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ve(be.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new vi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,De.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=f_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function LU(n,e){return Zk.apply(this,arguments)}function Zk(){return Zk=(0,De.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ze("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,De.Z)(function*(a){r.isEqual(a)||(yield iU(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),Zk.apply(this,arguments)}function FU(n,e){return Yk.apply(this,arguments)}function Yk(){return Yk=(0,De.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Qk(n);ze("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>bU(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>bU(e.remoteStore,a)),n.onlineComponents=e}),Yk.apply(this,arguments)}function Qk(n){return Xk.apply(this,arguments)}function Xk(){return Xk=(0,De.Z)(function*(n){return n.offlineComponents||(ze("FirestoreClient","Using default OfflineComponentProvider"),yield LU(n,new NU)),n.offlineComponents}),Xk.apply(this,arguments)}function $C(n){return Jk.apply(this,arguments)}function Jk(){return Jk=(0,De.Z)(function*(n){return n.onlineComponents||(ze("FirestoreClient","Using default OnlineComponentProvider"),yield FU(n,new Kk)),n.onlineComponents}),Jk.apply(this,arguments)}function UU(n){return Qk(n).then(e=>e.persistence)}function HC(n){return Qk(n).then(e=>e.localStore)}function BU(n){return $C(n).then(e=>e.remoteStore)}function eN(n){return $C(n).then(e=>e.syncEngine)}function __(n){return tN.apply(this,arguments)}function tN(){return tN=(0,De.Z)(function*(n){const e=yield $C(n),t=e.eventManager;return t.onListen=vz.bind(null,e.syncEngine),t.onUnlisten=wz.bind(null,e.syncEngine),t}),tN.apply(this,arguments)}function VU(n,e,t={}){const r=new vi;return n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return function(i,a,l,d,f){const y=new jC({next:D=>{a.enqueueAndForget(()=>vk(i,I));const x=D.docs.has(l);!x&&D.fromCache?f.reject(new Ve(be.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&D.fromCache&&d&&"server"===d.source?f.reject(new Ve(be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(D)},error:D=>f.reject(D)}),I=new Ek(Xm(l.path),y,{includeMetadataChanges:!0,Nu:!0});return _k(i,I)}(yield __(n),n.asyncQueue,e,t,r)})),r.promise}function jU(n,e,t={}){const r=new vi;return n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return function(i,a,l,d,f){const y=new jC({next:D=>{a.enqueueAndForget(()=>vk(i,I)),D.fromCache&&"server"===d.source?f.reject(new Ve(be.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(D)},error:D=>f.reject(D)}),I=new Ek(l,y,{includeMetadataChanges:!0,Nu:!0});return _k(i,I)}(yield __(n),n.asyncQueue,e,t,r)})),r.promise}const $U=new Map;function nN(n,e,t){if(!t)throw new Ve(be.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function HU(n,e,t,r){if(!0===e&&!0===r)throw new Ve(be.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function GU(n){if(!rt.isDocumentKey(n))throw new Ve(be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function zU(n){if(rt.isDocumentKey(n))throw new Ve(be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function GC(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":pt()}function yn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ve(be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=GC(n);throw new Ve(be.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function WU(n,e){if(e<=0)throw new Ve(be.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class qU{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ve(be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ve(be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,HU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class f0{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qU({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ve(be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ve(be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qU(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Y$;switch(t.type){case"gapi":return new eH(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ve(be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=$U.get(e);t&&(ze("ComponentProvider","Removing Datastore"),$U.delete(e),t.terminate())}(this),Promise.resolve()}}class cr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new cr(this.firestore,e,this._key)}}class rs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new rs(this.firestore,e,this._query)}}class gl extends rs{constructor(e,t,r){super(e,t,Xm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new cr(this.firestore,null,new rt(e))}withConverter(e){return new gl(this.firestore,e,this._path)}}function KU(n,e,...t){if(n=(0,O.m9)(n),nN("collection","path",e),n instanceof f0){const r=En.fromString(e,...t);return zU(r),new gl(n,null,r)}{if(!(n instanceof cr||n instanceof gl))throw new Ve(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(En.fromString(e,...t));return zU(r),new gl(n.firestore,null,r)}}function zC(n,e,...t){if(n=(0,O.m9)(n),1===arguments.length&&(e=gL.R()),nN("doc","path",e),n instanceof f0){const r=En.fromString(e,...t);return GU(r),new cr(n,null,new rt(r))}{if(!(n instanceof cr||n instanceof gl))throw new Ve(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(En.fromString(e,...t));return GU(r),new cr(n.firestore,n instanceof gl?n.converter:null,new rt(r))}}function ZU(n,e){return n=(0,O.m9)(n),e=(0,O.m9)(e),(n instanceof cr||n instanceof gl)&&(e instanceof cr||e instanceof gl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function YU(n,e){return n=(0,O.m9)(n),e=(0,O.m9)(e),n instanceof rs&&e instanceof rs&&n.firestore===e.firestore&&Gw(n._query,e._query)&&n.converter===e.converter}class Xz{constructor(){this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new XR(this,"async_queue_retry"),this.jc=()=>{const t=UC();t&&ze("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.bo()};const e=UC();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.jc)}get isShuttingDown(){return this.Lc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Wc(),this.zc(e)}enterRestrictedMode(e){if(!this.Lc){this.Lc=!0,this.Gc=e||!1;const t=UC();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.jc)}}enqueue(e){if(this.Wc(),this.Lc)return new Promise(()=>{});const t=new vi;return this.zc(()=>this.Lc&&this.Gc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Bc.push(e),this.Hc()))}Hc(){var e=this;return(0,De.Z)(function*(){if(0!==e.Bc.length){try{yield e.Bc[0](),e.Bc.shift(),e.xo.reset()}catch(t){if(!Kd(t))throw t;ze("AsyncQueue","Operation failed with retryable error: "+t)}e.Bc.length>0&&e.xo.Ao(()=>e.Hc())}})()}zc(e){const t=this.$c.then(()=>(this.Kc=!0,e().catch(r=>{throw this.qc=r,this.Kc=!1,jr("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.Kc=!1,r))));return this.$c=t,t}enqueueAfterDelay(e,t,r){this.Wc(),this.Qc.indexOf(e)>-1&&(t=0);const i=mk.createAndSchedule(this,e,t,r,a=>this.Jc(a));return this.Uc.push(i),i}Wc(){this.qc&&pt()}verifyOperationInProgress(){}Yc(){var e=this;return(0,De.Z)(function*(){let t;do{t=e.$c,yield t}while(t!==e.$c)})()}Xc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}Zc(e){return this.Yc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Yc()})}ta(e){this.Qc.push(e)}Jc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function rN(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class Jz{constructor(){this._progressObserver={},this._taskCompletionResolver=new vi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class gr extends f0{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Xz,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||QU(this),this._firestoreClient.terminate()}}function Qr(n){return n._firestoreClient||QU(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function QU(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new hH(n._databaseId,a,n._persistenceKey,(d=t).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,d.useFetchStreams));var a,d;n._firestoreClient=new jz(n._authCredentials,n._appCheckCredentials,n._queue,r)}function XU(n,e,t){const r=new vi;return n.asyncQueue.enqueue((0,De.Z)(function*(){try{yield LU(n,t),yield FU(n,e),r.resolve()}catch(i){const a=i;if(!("FirebaseError"===(l=a).name?l.code===be.FAILED_PRECONDITION||l.code===be.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw a;Hf("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}var l})).then(()=>r.promise)}function JU(n){if(n._initialized||n._terminated)throw new Ve(be.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ac{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ve(be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ml{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ml(ai.fromBase64String(e))}catch(t){throw new Ve(be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ml(ai.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ap{constructor(e){this._methodName=e}}class WC{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ve(be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ve(be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Wt(this._lat,e._lat)||Wt(this._long,e._long)}}const lW=/^__.*__$/;class cW{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Dc(e,this.data,this.fieldMask,t,this.fieldTransforms):new n_(e,this.data,t,this.fieldTransforms)}}class eB{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Dc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function tB(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pt()}}class qC{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ea(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get na(){return this.settings.na}sa(e){return new qC(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.sa({path:r,ra:!1});return i.oa(e),i}ua(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.sa({path:r,ra:!1});return i.ea(),i}ca(e){return this.sa({path:void 0,ra:!0})}aa(e){return YC(e,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ea(){if(this.path)for(let e=0;e<this.path.length;e++)this.oa(this.path.get(e))}oa(e){if(0===e.length)throw this.aa("Document fields must not be empty");if(tB(this.na)&&lW.test(e))throw this.aa('Document fields cannot begin and end with "__"')}}class dW{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||c0(e)}fa(e,t,r,i=!1){return new qC({na:e,methodName:t,la:r,path:Rr.emptyPath(),ra:!1,ha:i},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function up(n){const e=n._freezeSettings(),t=c0(n._databaseId);return new dW(n._databaseId,!!e.ignoreUndefinedProperties,t)}function KC(n,e,t,r,i,a={}){const l=n.fa(a.merge||a.mergeFields?2:0,e,t,i);aN("Data must be an object, but it was:",l,r);const d=iB(r,l);let f,y;if(a.merge)f=new Oo(l.fieldMask),y=l.fieldTransforms;else if(a.mergeFields){const I=[];for(const D of a.mergeFields){const x=uN(e,D,t);if(!l.contains(x))throw new Ve(be.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);oB(I,x)||I.push(x)}f=new Oo(I),y=l.fieldTransforms.filter(D=>f.covers(D.field))}else f=null,y=l.fieldTransforms;return new cW(new Fi(d),f,y)}class p0 extends ap{_toFieldTransform(e){if(2!==e.na)throw e.aa(1===e.na?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof p0}}function nB(n,e,t){return new qC({na:3,la:e.settings.la,methodName:n._methodName,ra:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class iN extends ap{_toFieldTransform(e){return new zw(e.path,new e_)}isEqual(e){return e instanceof iN}}class hW extends ap{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=nB(this,e,!0),r=this.da.map(a=>lp(a,t)),i=new Qf(r);return new zw(e.path,i)}isEqual(e){return this===e}}class fW extends ap{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=nB(this,e,!0),r=this.da.map(a=>lp(a,t)),i=new Xf(r);return new zw(e.path,i)}isEqual(e){return this===e}}class pW extends ap{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=new t_(e.It,qL(e.It,this._a));return new zw(e.path,t)}isEqual(e){return this===e}}function sN(n,e,t,r){const i=n.fa(1,e,t);aN("Data must be an object, but it was:",i,r);const a=[],l=Fi.empty();Wf(r,(f,y)=>{const I=ZC(e,f,t);y=(0,O.m9)(y);const D=i.ua(I);if(y instanceof p0)a.push(I);else{const x=lp(y,D);null!=x&&(a.push(I),l.set(I,x))}});const d=new Oo(a);return new eB(l,d,i.fieldTransforms)}function oN(n,e,t,r,i,a){const l=n.fa(1,e,t),d=[uN(e,r,t)],f=[i];if(a.length%2!=0)throw new Ve(be.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<a.length;x+=2)d.push(uN(e,a[x])),f.push(a[x+1]);const y=[],I=Fi.empty();for(let x=d.length-1;x>=0;--x)if(!oB(y,d[x])){const L=d[x];let V=f[x];V=(0,O.m9)(V);const ee=l.ua(L);if(V instanceof p0)y.push(L);else{const ce=lp(V,ee);null!=ce&&(y.push(L),I.set(L,ce))}}const D=new Oo(y);return new eB(I,D,l.fieldTransforms)}function rB(n,e,t,r=!1){return lp(t,n.fa(r?4:3,e))}function lp(n,e){if(sB(n=(0,O.m9)(n)))return aN("Unsupported field value:",e,n),iB(n,e);if(n instanceof ap)return function(t,r){if(!tB(r.na))throw r.aa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.aa(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ra&&4!==e.na)throw e.aa("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let d=lp(l,r.ca(a));null==d&&(d={nullValue:"NULL_VALUE"}),i.push(d),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,O.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return qL(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=fr.fromDate(t);return{timestampValue:Qw(r.It,i)}}if(t instanceof fr){const i=new fr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Qw(r.It,i)}}if(t instanceof WC)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ml)return{bytesValue:pF(r.It,t._byteString)};if(t instanceof cr){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.aa(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:MR(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.aa(`Unsupported field value: ${GC(t)}`)}(n,e)}function iB(n,e){const t={};return IL(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wf(n,(r,i)=>{const a=lp(i,e.ia(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function sB(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof fr||n instanceof WC||n instanceof ml||n instanceof cr||n instanceof ap)}function aN(n,e,t){if(!sB(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=GC(t);throw e.aa("an object"===r?n+" a custom object":n+" "+r)}var r}function uN(n,e,t){if((e=(0,O.m9)(e))instanceof Ac)return e._internalPath;if("string"==typeof e)return ZC(n,e);throw YC("Field path arguments must be of type string or ",n,!1,void 0,t)}const gW=new RegExp("[~\\*/\\[\\]]");function ZC(n,e,t){if(e.search(gW)>=0)throw YC(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ac(...e.split("."))._internalPath}catch{throw YC(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function YC(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(a||l)&&(f+=" (found",a&&(f+=` in field ${r}`),l&&(f+=` in document ${i}`),f+=")"),new Ve(be.INVALID_ARGUMENT,d+n+f)}function oB(n,e){return n.some(t=>t.isEqual(e))}class g0{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new cr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new mW(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(QC("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class mW extends g0{data(){return super.data()}}function QC(n,e){return"string"==typeof e?ZC(n,e):e instanceof Ac?e._internalPath:e._delegate._internalPath}class cp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Mc extends g0{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new m0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(QC("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class m0 extends Mc{data(e={}){return super.data(e)}}class oh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new cp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new m0(this._firestore,this._userDataWriter,r.key,r,new cp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ve(be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new m0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new cp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const d=new m0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new cp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,y=-1;return 0!==l.type&&(f=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),y=a.indexOf(l.doc.key)),{type:_W(l.type),doc:d,oldIndex:f,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function _W(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pt()}}function aB(n,e){return n instanceof Mc&&e instanceof Mc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof oh&&e instanceof oh&&n._firestore===e._firestore&&YU(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function uB(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ve(be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _0{}function ah(n,...e){for(const t of e)n=t._apply(n);return n}class yW extends _0{constructor(e,t,r){super(),this.wa=e,this.ma=t,this.ga=r,this.type="where"}_apply(e){const t=up(e.firestore),r=function(i,a,l,d,f,y,I){let D;if(f.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new Ve(be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){pB(I,y);const L=[];for(const V of I)L.push(fB(d,i,V));D={arrayValue:{values:L}}}else D=fB(d,i,I)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||pB(I,y),D=rB(l,"where",I,"in"===y||"not-in"===y);const x=Ui.create(f,y,D);return function(L,V){if(V.dt()){const ce=TR(L);if(null!==ce&&!ce.isEqual(V.field))throw new Ve(be.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ce.toString()}' and '${V.field.toString()}'`);const Ge=IR(L);null!==Ge&&gB(0,V.field,Ge)}const ee=function(ce,Ge){for(const Ke of ce.filters)if(Ge.indexOf(Ke.op)>=0)return Ke.op;return null}(L,function(ce){switch(ce){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(V.op));if(null!==ee)throw new Ve(be.INVALID_ARGUMENT,ee===V.op?`Invalid query. You cannot use more than one '${V.op.toString()}' filter.`:`Invalid query. You cannot use '${V.op.toString()}' filters with '${ee.toString()}' filters.`)}(i,x),x}(e._query,0,t,e.firestore._databaseId,this.wa,this.ma,this.ga);return new rs(e.firestore,e.converter,function(i,a){const l=i.filters.concat([a]);return new Cc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),l,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class wW extends _0{constructor(e,t){super(),this.wa=e,this.ya=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Ve(be.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ve(be.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Qm(i,a);return function(d,f){if(null===IR(d)){const y=TR(d);null!==y&&gB(0,y,f.field)}}(r,l),l}(e._query,this.wa,this.ya);return new rs(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new Cc(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class lB extends _0{constructor(e,t,r){super(),this.type=e,this.pa=t,this.Ia=r}_apply(e){return new rs(e.firestore,e.converter,vC(e._query,this.pa,this.Ia))}}class cB extends _0{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=hB(e,this.type,this.Ta,this.Ea);return new rs(e.firestore,e.converter,(i=t,new Cc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class dB extends _0{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=hB(e,this.type,this.Ta,this.Ea);return new rs(e.firestore,e.converter,(i=t,new Cc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function hB(n,e,t,r){if(t[0]=(0,O.m9)(t[0]),t[0]instanceof g0)return function(i,a,l,d,f){if(!d)throw new Ve(be.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const y=[];for(const I of Jm(i))if(I.field.isKeyField())y.push(Zf(a,d.key));else{const D=d.data.field(I.field);if(wR(D))throw new Ve(be.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+I.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===D){const x=I.field.canonicalString();throw new Ve(be.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${x}' (used as the orderBy) does not exist.`)}y.push(D)}return new Jd(y,f)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=up(n.firestore);return function(a,l,d,f,y,I){const D=a.explicitOrderBy;if(y.length>D.length)throw new Ve(be.INVALID_ARGUMENT,`Too many arguments provided to ${f}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const x=[];for(let L=0;L<y.length;L++){const V=y[L];if(D[L].field.isKeyField()){if("string"!=typeof V)throw new Ve(be.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${f}(), but got a ${typeof V}`);if(!CR(a)&&-1!==V.indexOf("/"))throw new Ve(be.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${f}() must be a plain document ID, but '${V}' contains a slash.`);const ee=a.path.child(En.fromString(V));if(!rt.isDocumentKey(ee))throw new Ve(be.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${f}() must result in a valid document path, but '${ee}' is not because it contains an odd number of segments.`);const ce=new rt(ee);x.push(Zf(l,ce))}else{const ee=rB(d,f,V);x.push(ee)}}return new Jd(x,I)}(n._query,n.firestore._databaseId,i,e,t,r)}}function fB(n,e,t){if("string"==typeof(t=(0,O.m9)(t))){if(""===t)throw new Ve(be.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!CR(e)&&-1!==t.indexOf("/"))throw new Ve(be.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(En.fromString(t));if(!rt.isDocumentKey(r))throw new Ve(be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Zf(n,new rt(r))}if(t instanceof cr)return Zf(n,t._key);throw new Ve(be.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${GC(t)}.`)}function pB(n,e){if(!Array.isArray(n)||0===n.length)throw new Ve(be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ve(be.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function gB(n,e,t){if(!t.isEqual(e))throw new Ve(be.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const AW={maxAttempts:5};class lN{convertValue(e,t="none"){switch(Kf(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Nr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(qf(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw pt()}}convertObject(e,t){const r={};return Wf(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new WC(Nr(e.latitude),Nr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=CL(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Fw(e));default:return null}}convertTimestamp(e){const t=Zd(e);return new fr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=En.fromString(e);$t(TF(r));const i=new Yd(r.get(1),r.get(3)),a=new rt(r.popFirst(5));return i.isEqual(t)||jr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function XC(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class MW extends lN{constructor(e){super(),this.firestore=e}convertBytes(e){return new ml(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new cr(this.firestore,null,t)}}class mB{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=up(e)}set(e,t,r){this._verifyNotCommitted();const i=uh(e,this._firestore),a=XC(i.converter,t,r),l=KC(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,pr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=uh(e,this._firestore);let l;return l="string"==typeof(t=(0,O.m9)(t))||t instanceof Ac?oN(this._dataReader,"WriteBatch.update",a._key,t,r,i):sN(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,pr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=uh(e,this._firestore);return this._mutations=this._mutations.concat(new r_(t._key,pr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ve(be.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function uh(n,e){if((n=(0,O.m9)(n)).firestore!==e)throw new Ve(be.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class dp extends lN{constructor(e){super(),this.firestore=e}convertBytes(e){return new ml(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new cr(this.firestore,null,t)}}function _B(n,e,t){n=yn(n,cr);const r=yn(n.firestore,gr),i=XC(n.converter,e,t);return y_(r,[KC(up(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,pr.none())])}function yB(n,e,t,...r){n=yn(n,cr);const i=yn(n.firestore,gr),a=up(i);let l;return l="string"==typeof(e=(0,O.m9)(e))||e instanceof Ac?oN(a,"updateDoc",n._key,e,t,r):sN(a,"updateDoc",n._key,e),y_(i,[l.toMutation(n._key,pr.exists(!0))])}function vB(n,...e){var t,r,i;n=(0,O.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||rN(e[l])||(a=e[l],l++);const d={includeMetadataChanges:a.includeMetadataChanges};if(rN(e[l])){const D=e[l];e[l]=null===(t=D.next)||void 0===t?void 0:t.bind(D),e[l+1]=null===(r=D.error)||void 0===r?void 0:r.bind(D),e[l+2]=null===(i=D.complete)||void 0===i?void 0:i.bind(D)}let f,y,I;if(n instanceof cr)y=yn(n.firestore,gr),I=Xm(n._key.path),f={next:D=>{e[l]&&e[l](cN(y,n,D))},error:e[l+1],complete:e[l+2]};else{const D=yn(n,rs);y=yn(D.firestore,gr),I=D._query;const x=new dp(y);f={next:L=>{e[l]&&e[l](new oh(y,x,D,L))},error:e[l+1],complete:e[l+2]},uB(n._query)}return function(D,x,L,V){const ee=new jC(V),ce=new Ek(x,ee,L);return D.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return _k(yield __(D),ce)})),()=>{ee.Rc(),D.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return vk(yield __(D),ce)}))}}(Qr(y),I,d,f)}function y_(n,e){return function(t,r){const i=new vi;return t.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return function bz(n,e,t){return Sk.apply(this,arguments)}(yield eN(t),r,i)})),i.promise}(Qr(n),e)}function cN(n,e,t){const r=t.docs.get(e._key),i=new dp(n);return new Mc(n,i,e._key,r,new cp(t.hasPendingWrites,t.fromCache),e.converter)}class BW extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=up(e)}get(e){const t=uh(e,this._firestore),r=new MW(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return pt();const a=i[0];if(a.isFoundDocument())return new g0(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new g0(this._firestore,r,t._key,null,t.converter);throw pt()})}set(e,t,r){const i=uh(e,this._firestore),a=XC(i.converter,t,r),l=KC(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=uh(e,this._firestore);let l;return l="string"==typeof(t=(0,O.m9)(t))||t instanceof Ac?oN(this._dataReader,"Transaction.update",a._key,t,r,i):sN(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=uh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=uh(e,this._firestore),r=new dp(this._firestore);return super.get(e).then(i=>new Mc(this._firestore,r,t._key,i._document,new cp(!1,!1),t.converter))}}function dN(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ve("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function bB(){if(typeof Uint8Array>"u")throw new Ve("unimplemented","Uint8Arrays are not available in this environment.")}function EB(){if(!function cH(){return typeof atob<"u"}())throw new Ve("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){qm=_n.SDK_VERSION,(0,_n._registerComponent)(new Ws.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),l=new gr(new X$(t.getProvider("auth-internal")),new tH(t.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Ve(be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yd(d.options.projectId,f)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,_n.registerVersion)(hL,"3.4.15",n),(0,_n.registerVersion)(hL,"3.4.15","esm2017")}();class y0{constructor(e){this._delegate=e}static fromBase64String(e){return EB(),new y0(ml.fromBase64String(e))}static fromUint8Array(e){return bB(),new y0(ml.fromUint8Array(e))}toBase64(){return EB(),this._delegate.toBase64()}toUint8Array(){return bB(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function hN(n){return function KW(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class ZW{enableIndexedDbPersistence(e,t){return function tW(n,e){JU(n=yn(n,gr));const t=Qr(n),r=n._freezeSettings(),i=new Kk;return XU(t,i,new PU(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function nW(n){JU(n=yn(n,gr));const e=Qr(n),t=n._freezeSettings(),r=new Kk;return XU(e,r,new Fz(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function rW(n){if(n._initialized&&!n._terminated)throw new Ve(be.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new vi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,De.Z)(function*(){try{yield(t=(0,De.Z)(function*(r){if(!Cu.C())return Promise.resolve();const i=r+"main";yield Cu.delete(i)}),function(r){return t.apply(this,arguments)})($R(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class IB{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Yd||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Hf("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function Yz(n,e,t,r={}){var i;const a=(n=yn(n,f0))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&Hf("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,d;if("string"==typeof r.mockUserToken)l=r.mockUserToken,d=yi.MOCK_USER;else{l=(0,O.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new Ve(be.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new yi(f)}n._authCredentials=new Q$(new fL(l,d))}}(this._delegate,e,t,r)}enableNetwork(){return function sW(n){return function $z(n){return n.asyncQueue.enqueue((0,De.Z)(function*(){const e=yield UU(n),t=yield BU(n);return e.setNetworkEnabled(!0),function(r){const i=ut(r);return i._u.delete(0),d0(i)}(t)}))}(Qr(n=yn(n,gr)))}(this._delegate)}disableNetwork(){return function oW(n){return function Hz(n){return n.asyncQueue.enqueue((0,De.Z)(function*(){const e=yield UU(n),t=yield BU(n);return e.setNetworkEnabled(!1),(r=(0,De.Z)(function*(i){const a=ut(i);a._u.add(0),yield c_(a),a.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Qr(n=yn(n,gr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,HU("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function iW(n){return function(e){const t=new vi;return e.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return function Cz(n,e){return kk.apply(this,arguments)}(yield eN(e),t)})),t.promise}(Qr(n=yn(n,gr)))}(this._delegate)}onSnapshotsInSync(e){return function UW(n,e){return function Wz(n,e){const t=new jC(e);return n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return r=yield __(n),i=t,ut(r).Ru.add(i),void i.next();var r,i})),()=>{t.Rc(),n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return r=yield __(n),i=t,void ut(r).Ru.delete(i);var r,i}))}}(Qr(n=yn(n,gr)),rN(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ve("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new v_(this,KU(this._delegate,e))}catch(t){throw Ds(t,"collection()","Firestore.collection()")}}doc(e){try{return new Sa(this,zC(this._delegate,e))}catch(t){throw Ds(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ss(this,function Qz(n,e){if(n=yn(n,f0),nN("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ve(be.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new rs(n,null,(t=e,new Cc(En.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ds(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function VW(n,e,t){n=yn(n,gr);const r=Object.assign(Object.assign({},AW),t);return function(i){if(i.maxAttempts<1)throw new Ve(be.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function qz(n,e,t){const r=new vi;return n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){const i=yield(a=n,$C(a).then(l=>l.datastore));var a;new Vz(n.asyncQueue,i,t,e,r).run()})),r.promise}(Qr(n),i=>e(new BW(n,i)),r)}(this._delegate,t=>e(new TB(this,t)))}batch(){return Qr(this._delegate),new CB(new mB(this._delegate,e=>y_(this._delegate,e)))}loadBundle(e){return function aW(n,e){const t=Qr(n=yn(n,gr)),r=new Jz;return function Kz(n,e,t,r){const i=function(a,l){let d;return d="string"==typeof a?(new TextEncoder).encode(a):a,f=function(f,y){if(f instanceof Uint8Array)return OU(f,y);if(f instanceof ArrayBuffer)return OU(new Uint8Array(f),y);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new Uz(f,l);var f}(t,c0(e));n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){!function Lz(n,e,t){const r=ut(n);var i;(i=(0,De.Z)(function*(a,l,d){try{const f=yield l.getMetadata();if(yield function(x,L){const V=ut(x),ee=wi(L.createTime);return V.persistence.runTransaction("hasNewerBundle","readonly",ce=>V.Ns.getBundleMetadata(ce,L.id)).then(ce=>!!ce&&ce.createTime.compareTo(ee)>=0)}(a.localStore,f))return yield l.close(),d._completeWith({taskState:"Success",documentsLoaded:(x=f).totalDocuments,bytesLoaded:x.totalBytes,totalDocuments:x.totalDocuments,totalBytes:x.totalBytes}),Promise.resolve(new Set);d._updateProgress(TU(f));const y=new gz(f,a.localStore,l.It);let I=yield l.wc();for(;I;){const x=yield y.Ou(I);x&&d._updateProgress(x),I=yield l.wc()}const D=yield y.complete();return yield Sc(a,D.Bu,void 0),yield function(x,L){const V=ut(x);return V.persistence.runTransaction("Save bundle","readwrite",ee=>V.Ns.saveBundleMetadata(ee,L))}(a.localStore,f),d._completeWith(D.progress),Promise.resolve(D.$u)}catch(f){return Hf("SyncEngine",`Loading bundle failed with ${f}`),d._failWith(f),Promise.resolve(new Set)}var x}),function(a,l,d){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield eN(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function uW(n,e){return function Zz(n,e){return n.asyncQueue.enqueue((0,De.Z)(function*(){return function(t,r){const i=ut(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Ns.getNamedQuery(a,r))}(yield HC(n),e)}))}(Qr(n=yn(n,gr)),e).then(t=>t?new rs(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ss(this,t):null)}}class JC extends lN{constructor(e){super(),this.firestore=e}convertBytes(e){return new y0(new ml(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Sa.forKey(t,this.firestore,null)}}class TB{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new JC(e)}get(e){const t=fp(e);return this._delegate.get(t).then(r=>new v0(this._firestore,new Mc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=fp(e);return r?(dN("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=fp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=fp(e);return this._delegate.delete(t),this}}class CB{constructor(e){this._delegate=e}set(e,t,r){const i=fp(e);return r?(dN("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=fp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=fp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class hp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new m0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new w0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=hp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new hp(e,new JC(e),t),i.set(t,a)),a}}hp.INSTANCES=new WeakMap;class Sa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new JC(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ve("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Sa(t,new cr(t._delegate,r,new rt(e)))}static forKey(e,t,r){return new Sa(t,new cr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new v_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new v_(this.firestore,KU(this._delegate,e))}catch(t){throw Ds(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,O.m9)(e))instanceof cr&&ZU(this._delegate,e)}set(e,t){t=dN("DocumentReference.set",t);try{return t?_B(this._delegate,e,t):_B(this._delegate,e)}catch(r){throw Ds(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?yB(this._delegate,e):yB(this._delegate,e,t,...r)}catch(i){throw Ds(i,"updateDoc()","DocumentReference.update()")}}delete(){return function LW(n){return y_(yn(n.firestore,gr),[new r_(n._key,pr.none())])}(this._delegate)}onSnapshot(...e){const t=DB(e),r=SB(e,i=>new v0(this.firestore,new Mc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return vB(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function RW(n){n=yn(n,cr);const e=yn(n.firestore,gr),t=Qr(e),r=new dp(e);return function Gz(n,e){const t=new vi;return n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return(r=(0,De.Z)(function*(i,a,l){try{const d=yield function(f,y){const I=ut(f);return I.persistence.runTransaction("read document","readonly",D=>I.localDocuments.getDocument(D,y))}(i,a);d.isFoundDocument()?l.resolve(d):d.isNoDocument()?l.resolve(null):l.reject(new Ve(be.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const f=f_(d,`Failed to get document '${a} from cache`);l.reject(f)}}),function(i,a,l){return r.apply(this,arguments)})(yield HC(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Mc(e,r,n._key,i,new cp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function kW(n){n=yn(n,cr);const e=yn(n.firestore,gr);return VU(Qr(e),n._key,{source:"server"}).then(t=>cN(e,n,t))}(this._delegate):function xW(n){n=yn(n,cr);const e=yn(n.firestore,gr);return VU(Qr(e),n._key).then(t=>cN(e,n,t))}(this._delegate),t.then(r=>new v0(this.firestore,new Mc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Sa(this.firestore,this._delegate.withConverter(e?hp.getInstance(this.firestore,e):null))}}function Ds(n,e,t){return n.message=n.message.replace(e,t),n}function DB(n){for(const e of n)if("object"==typeof e&&!hN(e))return e;return{}}function SB(n,e){var t,r;let i;return i=hN(n[0])?n[0]:hN(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class v0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Sa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return aB(this._delegate,e._delegate)}}class w0 extends v0{data(e){const t=this._delegate.data(e);return function Z$(n,e){n||pt()}(void 0!==t),t}}class Ss{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new JC(e)}where(e,t,r){try{return new Ss(this.firestore,ah(this._delegate,function vW(n,e,t){const r=e,i=QC("where",n);return new yW(i,r,t)}(e,t,r)))}catch(i){throw Ds(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ss(this.firestore,ah(this._delegate,function bW(n,e="asc"){const t=e,r=QC("orderBy",n);return new wW(r,t)}(e,t)))}catch(r){throw Ds(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ss(this.firestore,ah(this._delegate,function EW(n){return WU("limit",n),new lB("limit",n,"F")}(e)))}catch(t){throw Ds(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ss(this.firestore,ah(this._delegate,function IW(n){return WU("limitToLast",n),new lB("limitToLast",n,"L")}(e)))}catch(t){throw Ds(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ss(this.firestore,ah(this._delegate,function TW(...n){return new cB("startAt",n,!0)}(...e)))}catch(t){throw Ds(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ss(this.firestore,ah(this._delegate,function CW(...n){return new cB("startAfter",n,!1)}(...e)))}catch(t){throw Ds(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ss(this.firestore,ah(this._delegate,function DW(...n){return new dB("endBefore",n,!1)}(...e)))}catch(t){throw Ds(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ss(this.firestore,ah(this._delegate,function SW(...n){return new dB("endAt",n,!0)}(...e)))}catch(t){throw Ds(t,"endAt()","Query.endAt()")}}isEqual(e){return YU(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function PW(n){n=yn(n,rs);const e=yn(n.firestore,gr),t=Qr(e),r=new dp(e);return function zz(n,e){const t=new vi;return n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return(r=(0,De.Z)(function*(i,a,l){try{const d=yield OC(i,a,!0),f=new SU(a,d.Hi),y=f.ju(d.documents),I=f.applyChanges(y,!1);l.resolve(I.snapshot)}catch(d){const f=f_(d,`Failed to execute query '${a} against cache`);l.reject(f)}}),function(i,a,l){return r.apply(this,arguments)})(yield HC(n),e,t);var r})),t.promise}(t,n._query).then(i=>new oh(e,r,n,i))}(this._delegate):"server"===e?.source?function OW(n){n=yn(n,rs);const e=yn(n.firestore,gr),t=Qr(e),r=new dp(e);return jU(t,n._query,{source:"server"}).then(i=>new oh(e,r,n,i))}(this._delegate):function NW(n){n=yn(n,rs);const e=yn(n.firestore,gr),t=Qr(e),r=new dp(e);return uB(n._query),jU(t,n._query).then(i=>new oh(e,r,n,i))}(this._delegate),t.then(r=>new fN(this.firestore,new oh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=DB(e),r=SB(e,i=>new fN(this.firestore,new oh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return vB(this._delegate,t,r)}withConverter(e){return new Ss(this.firestore,this._delegate.withConverter(e?hp.getInstance(this.firestore,e):null))}}class QW{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new w0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class fN{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ss(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new w0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new QW(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new w0(this._firestore,r))})}isEqual(e){return aB(this._delegate,e._delegate)}}class v_ extends Ss{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Sa(this.firestore,e):null}doc(e){try{return new Sa(this.firestore,void 0===e?zC(this._delegate):zC(this._delegate,e))}catch(t){throw Ds(t,"doc()","CollectionReference.doc()")}}add(e){return function FW(n,e){const t=yn(n.firestore,gr),r=zC(n),i=XC(n.converter,e);return y_(t,[KC(up(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,pr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Sa(this.firestore,t))}isEqual(e){return ZU(this._delegate,e._delegate)}withConverter(e){return new v_(this.firestore,this._delegate.withConverter(e?hp.getInstance(this.firestore,e):null))}}function fp(n){return yn(n,cr)}class pN{constructor(...e){this._delegate=new Ac(...e)}static documentId(){return new pN(Rr.keyField().canonicalString())}isEqual(e){return(e=(0,O.m9)(e))instanceof Ac&&this._delegate._internalPath.isEqual(e._internalPath)}}class pp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function $W(){return new iN("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new pp(e)}static delete(){const e=function jW(){return new p0("deleteField")}();return e._methodName="FieldValue.delete",new pp(e)}static arrayUnion(...e){const t=function HW(...n){return new hW("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new pp(t)}static arrayRemove(...e){const t=function GW(...n){return new fW("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new pp(t)}static increment(e){const t=function zW(n){return new pW("increment",n)}(e);return t._methodName="FieldValue.increment",new pp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const XW={Firestore:IB,GeoPoint:WC,Timestamp:fr,Blob:y0,Transaction:TB,WriteBatch:CB,DocumentReference:Sa,DocumentSnapshot:v0,Query:Ss,QueryDocumentSnapshot:w0,QuerySnapshot:fN,CollectionReference:v_,FieldPath:pN,FieldValue:pp,setLogLevel:function YW(n){!function K$(n){Wd.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function AB(n,e){return function t3(n,e=Rb.z){return new ws.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function gN(n,e){return AB(n,e).pipe((0,At.U)(t=>({payload:t,type:"query"})))}function eD(n,e){return gN(n,e).pipe(hu(void 0),Df(),(0,At.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,d)=>{const f=i.find(I=>I.doc.ref.isEqual(l.ref)),y=t?.payload.docs.find(I=>I.ref.isEqual(l.ref));f&&JSON.stringify(f.doc.metadata)===JSON.stringify(l.metadata)||!f&&y&&JSON.stringify(y.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:l}})}),a}))}function MB(n,e,t){return eD(n,t).pipe(sl((r,i)=>function r3(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function s3(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return mN(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return mN(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return mN(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),rg(),(0,At.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function mN(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function xB(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function e3(n){(function JW(n,e){n.INTERNAL.registerComponent(new Ws.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},XW)))})(n,(e,t)=>new IB(e,t,new ZW)),n.registerVersion("@firebase/firestore-compat","0.1.24")}(Zg.Z);class RB{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=eD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,At.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(hu(void 0),Df(),Zi(([r,i])=>i.length>0||!r),(0,At.U)(([r,i])=>i),mn.iC)}auditTrail(e){return this.stateChanges(e).pipe(sl((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=xB(e);return MB(this.query,t,this.afs.schedulers.outsideAngular).pipe(mn.iC)}valueChanges(e={}){return gN(this.query,this.afs.schedulers.outsideAngular).pipe((0,At.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),mn.iC)}get(e){return(0,gn.D)(this.query.get(e)).pipe(mn.iC)}add(e){return this.ref.add(e)}doc(e){return new kB(this.ref.doc(e),this.afs)}}class kB{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=OB(r,t);return new RB(i,a,this.afs)}snapshotChanges(){return function n3(n,e){return AB(n,e).pipe(hu(void 0),Df(),(0,At.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(mn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,At.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,gn.D)(this.ref.get(e)).pipe(mn.iC)}}class o3{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?eD(this.query,this.afs.schedulers.outsideAngular).pipe((0,At.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Zi(t=>t.length>0),mn.iC):eD(this.query,this.afs.schedulers.outsideAngular).pipe(mn.iC)}auditTrail(e){return this.stateChanges(e).pipe(sl((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=xB(e);return MB(this.query,t,this.afs.schedulers.outsideAngular).pipe(mn.iC)}valueChanges(e={}){return gN(this.query,this.afs.schedulers.outsideAngular).pipe((0,At.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),mn.iC)}get(e){return(0,gn.D)(this.query.get(e)).pipe(mn.iC)}}const NB=new m.OlP("angularfire2.enableFirestorePersistence"),PB=new m.OlP("angularfire2.firestore.persistenceSettings"),a3=new m.OlP("angularfire2.firestore.settings"),u3=new m.OlP("angularfire2.firestore.use-emulator");function OB(n,e=(t=>t)){return{query:e(n),ref:n}}let LB=(()=>{class n{constructor(t,r,i,a,l,d,f,y,I,D,x,L,V,ee,ce,Ge,Ke){this.schedulers=f;const tt=(0,Ur.on)(t,d,r),Je=I;D&&Mv(tt,d,x,V,ee,ce,L,Ge),[this.firestore,this.persistenceEnabled$]=(0,Ur.cc)(`${tt.name}.firestore`,"AngularFirestore",tt.name,()=>{const Dt=d.runOutsideAngular(()=>tt.firestore());if(a&&Dt.settings(a),Je&&Dt.useEmulator(...Je),i&&!qo(l)){const xt=()=>{try{return(0,gn.D)(Dt.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(un){return typeof console<"u"&&console.warn(un),ht(!1)}};return[Dt,d.runOutsideAngular(xt)]}return[Dt,ht(!1)]},[a,Je,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=OB(i,r),d=this.schedulers.ngZone.run(()=>a);return new RB(d,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new o3(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new kB(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Ur.Dh),m.LFG(Ur.xv,8),m.LFG(NB,8),m.LFG(a3,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(mn.HU),m.LFG(PB,8),m.LFG(u3,8),m.LFG(mf,8),m.LFG(qg,8),m.LFG(Kg,8),m.LFG(Sv,8),m.LFG(gc,8),m.LFG(mc,8),m.LFG(Av,8),m.LFG(Bn,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),l3=(()=>{class n{constructor(){pc.Z.registerVersion("angularfire",mn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:NB,useValue:!0},{provide:PB,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[LB]}),n})();const FB="@firebase/database";let _N="";function BB(n){_N=n}class h3{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,O.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,O.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class f3{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,O.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const VB=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new h3(e)}}catch{}return new f3},gp=VB("localStorage"),yN=VB("sessionStorage"),w_=new Ao.Yd("@firebase/database"),jB=function(){let n=1;return function(){return n++}}(),$B=function(n){const e=(0,O.dS)(n),t=new O.gQ;t.update(e);const r=t.digest();return O.US.encodeByteArray(r)},b0=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=b0.apply(null,r):e+="object"==typeof r?(0,O.Pz)(r):r,e+=" "}return e};let mp=null,HB=!0;const GB=function(n,e){(0,O.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(w_.logLevel=Ao.in.VERBOSE,mp=w_.log.bind(w_),e&&yN.set("logging_enabled",!0)):"function"==typeof n?mp=n:(mp=null,yN.remove("logging_enabled"))},Ii=function(...n){if(!0===HB&&(HB=!1,null===mp&&!0===yN.get("logging_enabled")&&GB(!0)),mp){const e=b0.apply(null,n);mp(e)}},E0=function(n){return function(...e){Ii(n,...e)}},vN=function(...n){const e="FIREBASE INTERNAL ERROR: "+b0(...n);w_.error(e)},_l=function(...n){const e=`FIREBASE FATAL ERROR: ${b0(...n)}`;throw w_.error(e),new Error(e)},is=function(...n){const e="FIREBASE WARNING: "+b0(...n);w_.warn(e)},tD=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},xc="[MIN_NAME]",yl="[MAX_NAME]",_p=function(n,e){if(n===e)return 0;if(n===xc||e===yl)return-1;if(e===xc||n===yl)return 1;{const t=nD(n),r=nD(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},m3=function(n,e){return n===e?0:n<e?-1:1},I0=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,O.Pz)(e))},wN=function(n){if("object"!=typeof n||null===n)return(0,O.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,O.Pz)(e[r]),t+=":",t+=wN(n[e[r]]);return t+="}",t},zB=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Ti(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const WB=function(n){(0,O.hu)(!tD(n),"Invalid JSON number");const r=1023;let i,a,l,d,f;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=d+r,l=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const y=[];for(f=52;f;f-=1)y.push(l%2?1:0),l=Math.floor(l/2);for(f=11;f;f-=1)y.push(a%2?1:0),a=Math.floor(a/2);y.push(i?1:0),y.reverse();const I=y.join("");let D="";for(f=0;f<64;f+=8){let x=parseInt(I.substr(f,8),2).toString(16);1===x.length&&(x="0"+x),D+=x}return D.toLowerCase()},w3=new RegExp("^-?(0*)\\d{1,10}$"),qB=-2147483648,bN=2147483647,nD=function(n){if(w3.test(n)){const e=Number(n);if(e>=qB&&e<=bN)return e}return null},b_=function(n){try{n()}catch(e){setTimeout(()=>{throw is("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},T0=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class E3{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){is(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class I3{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Ii("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',is(e)}}let C0=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const XB=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,tV="websocket",nV="long_polling";class IN{constructor(e,t,r,i,a=!1,l="",d=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=gp.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&gp.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function rV(n,e,t){let r;if((0,O.hu)("string"==typeof e,"typeof type must == string"),(0,O.hu)("object"==typeof t,"typeof params must == object"),e===tV)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==nV)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function T3(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Ti(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class C3{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,O.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,O.p$)(this.counters_)}}const TN={},CN={};function DN(n){const e=n.toString();return TN[e]||(TN[e]=new C3),TN[e]}class S3{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&b_(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class lh{constructor(e,t,r,i,a,l,d){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=E0(e),this.stats_=DN(t),this.urlFn=f=>(this.appCheckToken&&(f.ac=this.appCheckToken),rV(t,nV,f))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new S3(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,O.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new SN((...a)=>{const[l,d,f,y,I]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=d,this.password=f;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,d]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,d)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&XB.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){lh.forceAllow_=!0}static forceDisallow(){lh.forceDisallow_=!0}static isAvailable(){return!((0,O.Yr)()||!lh.forceAllow_&&(lh.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,O.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,O.h$)(t),i=zB(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,O.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,O.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class SN{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,O.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=jB(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=SN.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(d){Ii("frame writing exception"),d.stack&&Ii(d.stack),Ii(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ii("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,O.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Ii("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let iD=null;typeof MozWebSocket<"u"?iD=MozWebSocket:typeof WebSocket<"u"&&(iD=WebSocket);let E_=(()=>{class n{constructor(t,r,i,a,l,d,f){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=E0(this.connId),this.stats_=DN(r),this.connURL=n.connectionURL_(r,d,f,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,l){const d={v:"5"};return!(0,O.Yr)()&&typeof location<"u"&&location.hostname&&XB.test(location.hostname)&&(d.r="f"),r&&(d.s=r),i&&(d.ls=i),a&&(d.ac=a),l&&(d.p=l),rV(t,tV,d)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,gp.set("previous_websocket_failure",!0);try{let i;if((0,O.Yr)()){i={headers:{"User-Agent":`Firebase/5/${_N}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,d=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;d&&(i.proxy={origin:d})}this.mySock=new iD(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==iD&&!n.forceDisallow_}static previouslyFailed(){return gp.isInMemoryStorage||!0===gp.get("previous_websocket_failure")}markConnectionHealthy(){gp.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,O.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,O.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,O.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=zB(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),cV=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[lh,E_]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=E_&&E_.isAvailable();let i=r&&!E_.previouslyFailed();if(t.webSocketOnly&&(r||is("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[E_];else{const a=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class _V{constructor(e,t,r,i,a,l,d,f,y,I){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=d,this.onDisconnect_=f,this.onKill_=y,this.lastSessionId=I,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=E0("c:"+this.id+":"),this.transportManager_=new cV(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=T0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=I0("t",e),r=I0("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=I0("t",e),r=I0("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=I0("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?vN("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):vN("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&is("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),T0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):T0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(gp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class yV{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class vV{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,O.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,O.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class sD extends vV{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,O.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new sD}getInitialEvent(e){return(0,O.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class kn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Sn(){return new kn("")}function sn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function ch(n){return n.pieces_.length-n.pieceNum_}function Zn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new kn(n.pieces_,e)}function MN(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function D0(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function EV(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new kn(e,0)}function mr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof kn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new kn(t,0)}function on(n){return n.pieceNum_>=n.pieces_.length}function As(n,e){const t=sn(n),r=sn(e);if(null===t)return e;if(t===r)return As(Zn(n),Zn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function Z3(n,e){const t=D0(n,0),r=D0(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=_p(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function xN(n,e){if(ch(n)!==ch(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Aa(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(ch(n)>ch(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class Y3{constructor(e,t){this.errorPrefix_=t,this.parts_=D0(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,O.ug)(this.parts_[r]);IV(this)}}function IV(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+yp(n))}function yp(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class RN extends vV{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new RN}getInitialEvent(e){return(0,O.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const S0=1e3;let aD,vp=(()=>{class n extends yV{constructor(t,r,i,a,l,d,f,y){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=d,this.appCheckTokenProvider_=f,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=E0("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=S0,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,O.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");RN.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&sD.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,O.Pz)(l)),(0,O.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new O.BH,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:d=>{const f=d.d;"ok"===d.s?r.resolve(f):r.reject(f)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,d=t._path.toString();this.log_("Listen called for "+d+" "+l),this.listens.has(d)||this.listens.set(d,new Map),(0,O.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,O.hu)(!this.listens.get(d).has(l),"listen() called twice for same path/queryId.");const f={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(d).set(l,f),this.connected_&&this.sendListen_(f)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,f=>{const y=f.d,I=f.s;n.warnOnListenWarnings_(y,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",f),"ok"!==I&&this.removeListen_(i,a),t.onComplete&&t.onComplete(I,y))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,O.r3)(t,"w")){const i=(0,O.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();is(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,O.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,O.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,d=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,O.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,d=>{a&&setTimeout(()=>{a(d.s,d.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const d={p:r,d:i};void 0!==l&&(d.h=l),this.outstandingPuts_.push({action:t,request:d,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,O.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):vN("Unrecognized action received from server: "+(0,O.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,O.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=S0,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=S0,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=S0),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,De.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,d=t.lastSessionId;let f=!1,y=null;const I=function(){y?y.close():(f=!0,a())};t.realtime_={close:I,sendRequest:function(L){(0,O.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(L)}};const x=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[L,V]=yield Promise.all([t.authTokenProvider_.getToken(x),t.appCheckTokenProvider_.getToken(x)]);f?Ii("getToken() completed but was canceled"):(Ii("getToken() completed. Creating connection."),t.authToken_=L&&L.accessToken,t.appCheckToken_=V&&V.token,y=new _V(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,ee=>{is(ee+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},d))}catch(L){t.log_("Failed to get token: "+L),f||(t.repoInfo_.nodeAdmin&&is(L),I())}}})()}interrupt(t){Ii("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ii("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,O.xb)(this.interruptReasons_)&&(this.reconnectDelay_=S0,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>wN(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new kn(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Ii("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Ii("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,O.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+_N.replace(/\./g,"-")]=1,(0,O.uI)()?t["framework.cordova"]=1:(0,O.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=sD.getInstance().currentlyOnline();return(0,O.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class dn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new dn(e,t)}}class oD{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new dn(xc,e),i=new dn(xc,t);return 0!==this.compare(r,i)}minPost(){return dn.MIN}}class DV extends oD{static get __EMPTY_NODE(){return aD}static set __EMPTY_NODE(e){aD=e}compare(e,t){return _p(e.name,t.name)}isDefinedOn(e){throw(0,O.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return dn.MIN}maxPost(){return new dn(yl,aD)}makePost(e,t){return(0,O.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new dn(e,aD)}toString(){return".key"}}const vl=new DV;class uD{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let NN,Du=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??to.EMPTY_NODE,this.right=l??to.EMPTY_NODE}copy(t,r,i,a,l){return new n(t??this.key,r??this.value,i??this.color,a??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return to.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return to.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class to{constructor(e,t=to.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new to(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Du.BLACK,null,null))}remove(e){return new to(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Du.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new uD(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new uD(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new uD(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new uD(this.root_,null,this.comparator_,!0,e)}}function iq(n,e){return _p(n.name,e.name)}function kN(n,e){return _p(n,e)}to.EMPTY_NODE=new class rq{copy(e,t,r,i,a){return this}insert(e,t,r){return new Du(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const SV=function(n){return"number"==typeof n?"number:"+WB(n):"string:"+n},AV=function(n){if(n.isLeafNode()){const e=n.val();(0,O.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,O.r3)(e,".sv"),"Priority must be a string or number.")}else(0,O.hu)(n===NN||n.isEmpty(),"priority of unexpected type.");(0,O.hu)(n===NN||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let MV,xV,RV,I_=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,O.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),AV(this.priorityNode_)}static set __childrenNodeConstructor(t){MV=t}static get __childrenNodeConstructor(){return MV}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return on(t)?this:".priority"===sn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=sn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,O.hu)(".priority"!==i||1===ch(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Zn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+SV(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?WB(this.value_):this.value_,this.lazyHash_=$B(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,O.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,O.hu)(a>=0,"Unknown leaf type: "+r),(0,O.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const er=new class uq extends oD{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?_p(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return dn.MIN}maxPost(){return new dn(yl,new I_("[PRIORITY-POST]",RV))}makePost(e,t){const r=xV(e);return new dn(t,new I_("[PRIORITY-POST]",r))}toString(){return".priority"}},lq=Math.log(2);class cq{constructor(e){this.count=parseInt(Math.log(e+1)/lq,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const lD=function(n,e,t,r){n.sort(e);const i=function(f,y){const I=y-f;let D,x;if(0===I)return null;if(1===I)return D=n[f],x=t?t(D):D,new Du(x,D.node,Du.BLACK,null,null);{const L=parseInt(I/2,10)+f,V=i(f,L),ee=i(L+1,y);return D=n[L],x=t?t(D):D,new Du(x,D.node,Du.BLACK,V,ee)}},d=function(f){let y=null,I=null,D=n.length;const x=function(V,ee){const ce=D-V,Ge=D;D-=V;const Ke=i(ce+1,Ge),tt=n[ce],Je=t?t(tt):tt;L(new Du(Je,tt.node,ee,null,Ke))},L=function(V){y?(y.left=V,y=V):(I=V,y=V)};for(let V=0;V<f.count;++V){const ee=f.nextBitIsOne(),ce=Math.pow(2,f.count-(V+1));ee?x(ce,Du.BLACK):(x(ce,Du.BLACK),x(ce,Du.RED))}return I}(new cq(n.length));return new to(r||e,d)};let PN;const T_={};class Rc{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,O.hu)(T_&&er,"ChildrenNode.ts has not been loaded"),PN=PN||new Rc({".priority":T_},{".priority":er}),PN}get(e){const t=(0,O.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof to?t:null}hasIndex(e){return(0,O.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,O.hu)(e!==vl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(dn.Wrap);let d,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();d=i?lD(r,e.getCompare()):T_;const f=e.toString(),y=Object.assign({},this.indexSet_);y[f]=e;const I=Object.assign({},this.indexes_);return I[f]=d,new Rc(I,y)}addToIndexes(e,t){const r=(0,O.UI)(this.indexes_,(i,a)=>{const l=(0,O.DV)(this.indexSet_,a);if((0,O.hu)(l,"Missing index implementation for "+a),i===T_){if(l.isDefinedOn(e.node)){const d=[],f=t.getIterator(dn.Wrap);let y=f.getNext();for(;y;)y.name!==e.name&&d.push(y),y=f.getNext();return d.push(e),lD(d,l.getCompare())}return T_}{const d=t.get(e.name);let f=i;return d&&(f=f.remove(new dn(e.name,d))),f.insert(e,e.node)}});return new Rc(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,O.UI)(this.indexes_,i=>{if(i===T_)return i;{const a=t.get(e.name);return a?i.remove(new dn(e.name,a)):i}});return new Rc(r,this.indexSet_)}}let A0,Xt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&AV(this.priorityNode_),this.children_.isEmpty()&&(0,O.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return A0||(A0=new n(new to(kN),null,Rc.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||A0}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?A0:r}}getChild(t){const r=sn(t);return null===r?this:this.getImmediateChild(r).getChild(Zn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,O.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new dn(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const d=a.isEmpty()?A0:this.priorityNode_;return new n(a,d,l)}}updateChild(t,r){const i=sn(t);if(null===i)return r;{(0,O.hu)(".priority"!==sn(t)||1===ch(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Zn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(er,(d,f)=>{r[d]=f.val(t),i++,l&&n.INTEGER_REGEXP_.test(d)?a=Math.max(a,Number(d)):l=!1}),!t&&l&&a<2*i){const d=[];for(const f in r)d[f]=r[f];return d}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+SV(this.getPriority().val())+":"),this.forEachChild(er,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":$B(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new dn(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new dn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new dn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,dn.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,dn.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===M0?-1:0}withIndex(t){if(t===vl||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===vl||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(er),a=r.getIterator(er);let l=i.getNext(),d=a.getNext();for(;l&&d;){if(l.name!==d.name||!l.node.equals(d.node))return!1;l=i.getNext(),d=a.getNext()}return null===l&&null===d}return!1}return!1}}resolveIndex_(t){return t===vl?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const M0=new class dq extends Xt{constructor(){super(new to(kN),Xt.EMPTY_NODE,Rc.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Xt.EMPTY_NODE}isEmpty(){return!1}};function br(n,e=null){if(null===n)return Xt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,O.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new I_(n,br(e));if(n instanceof Array){let t=Xt.EMPTY_NODE;return Ti(n,(r,i)=>{if((0,O.r3)(n,r)&&"."!==r.substring(0,1)){const a=br(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(br(e))}{const t=[];let r=!1;if(Ti(n,(l,d)=>{if("."!==l.substring(0,1)){const f=br(d);f.isEmpty()||(r=r||!f.getPriority().isEmpty(),t.push(new dn(l,f)))}}),0===t.length)return Xt.EMPTY_NODE;const a=lD(t,iq,l=>l.name,kN);if(r){const l=lD(t,er.getCompare());return new Xt(a,br(e),new Rc({".priority":l},{".priority":er}))}return new Xt(a,br(e),Rc.Default)}}Object.defineProperties(dn,{MIN:{value:new dn(xc,Xt.EMPTY_NODE)},MAX:{value:new dn(yl,M0)}}),DV.__EMPTY_NODE=Xt.EMPTY_NODE,I_.__childrenNodeConstructor=Xt,function sq(n){NN=n}(M0),function aq(n){RV=n}(M0),function oq(n){xV=n}(br);class ON extends oD{constructor(e){super(),this.indexPath_=e,(0,O.hu)(!on(e)&&".priority"!==sn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?_p(e.name,t.name):a}makePost(e,t){const r=br(e),i=Xt.EMPTY_NODE.updateChild(this.indexPath_,r);return new dn(t,i)}maxPost(){const e=Xt.EMPTY_NODE.updateChild(this.indexPath_,M0);return new dn(yl,e)}toString(){return D0(this.indexPath_,0).join("/")}}const LN=new class fq extends oD{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?_p(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return dn.MIN}maxPost(){return dn.MAX}makePost(e,t){const r=br(e);return new dn(t,r)}toString(){return".value"}},C_="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",pq=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=C_.charAt(t%64),t=Math.floor(t/64);(0,O.hu)(0===t,"Cannot push at time == 0");let l=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=C_.charAt(e[i]);return(0,O.hu)(20===l.length,"nextPushId: Length should be 20."),l}}(),PV=function(n){if(n===""+bN)return"-";const e=nD(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let l=0;l<t.length;l++)t[l]=n.charAt(l);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return yl;const a=C_.charAt(C_.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},OV=function(n){if(n===""+qB)return xc;const e=nD(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+bN:(delete t[t.length-1],t.join("")):(t[t.length-1]=C_.charAt(C_.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function LV(n){return{type:"value",snapshotNode:n}}function D_(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function x0(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function R0(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class UN{constructor(e){this.index_=e}updateChild(e,t,r,i,a,l){(0,O.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=e.getImmediateChild(t);return d.getChild(i).equals(r.getChild(i))&&d.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(x0(t,d)):(0,O.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?l.trackChildChange(D_(t,r)):l.trackChildChange(R0(t,r,d))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(er,(i,a)=>{t.hasChild(i)||r.trackChildChange(x0(i,a))}),t.isLeafNode()||t.forEachChild(er,(i,a)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(a)||r.trackChildChange(R0(i,a,l))}else r.trackChildChange(D_(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Xt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class k0{constructor(e){this.indexedFilter_=new UN(e.getIndex()),this.index_=e.getIndex(),this.startPost_=k0.getStartPost_(e),this.endPost_=k0.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,l){return this.matches(new dn(t,r))||(r=Xt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Xt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Xt.EMPTY_NODE);const a=this;return t.forEachChild(er,(l,d)=>{a.matches(new dn(l,d))||(i=i.updateImmediateChild(l,Xt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class mq{constructor(e){this.rangedFilter_=new k0(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,l){return this.rangedFilter_.matches(new dn(t,r))||(r=Xt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,l):this.fullLimitUpdateChild_(e,t,r,a,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Xt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Xt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const d=a.getNext();let f;if(f=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),d)<=0:this.index_.compare(d,this.rangedFilter_.getEndPost())<=0,!f)break;i=i.updateImmediateChild(d.name,d.node),l++}}else{let a,l,d,f;if(i=t.withIndex(this.index_),i=i.updatePriority(Xt.EMPTY_NODE),this.reverse_){f=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();const D=this.index_.getCompare();d=(x,L)=>D(L,x)}else f=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),d=this.index_.getCompare();let y=0,I=!1;for(;f.hasNext();){const D=f.getNext();!I&&d(a,D)<=0&&(I=!0),I&&y<this.limit_&&d(D,l)<=0?y++:i=i.updateImmediateChild(D.name,Xt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let l;if(this.reverse_){const D=this.index_.getCompare();l=(x,L)=>D(L,x)}else l=this.index_.getCompare();const d=e;(0,O.hu)(d.numChildren()===this.limit_,"");const f=new dn(t,r),y=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),I=this.rangedFilter_.matches(f);if(d.hasChild(t)){const D=d.getImmediateChild(t);let x=i.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=x&&(x.name===t||d.hasChild(x.name));)x=i.getChildAfterChild(this.index_,x,this.reverse_);const L=null==x?1:l(x,f);if(I&&!r.isEmpty()&&L>=0)return a?.trackChildChange(R0(t,r,D)),d.updateImmediateChild(t,r);{a?.trackChildChange(x0(t,D));const ee=d.updateImmediateChild(t,Xt.EMPTY_NODE);return null!=x&&this.rangedFilter_.matches(x)?(a?.trackChildChange(D_(x.name,x.node)),ee.updateImmediateChild(x.name,x.node)):ee}}return r.isEmpty()?e:I&&l(y,f)>=0?(null!=a&&(a.trackChildChange(x0(y.name,y.node)),a.trackChildChange(D_(t,r))),d.updateImmediateChild(t,r).updateImmediateChild(y.name,Xt.EMPTY_NODE)):e}}class cD{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=er}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,O.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,O.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:xc}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,O.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,O.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:yl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,O.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===er}copy(){const e=new cD;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function BN(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function VN(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function dD(n,e){const t=n.copy();return t.index_=e,t}function FV(n){const e={};if(n.isDefault())return e;let t;return n.index_===er?t="$priority":n.index_===LN?t="$value":n.index_===vl?t="$key":((0,O.hu)(n.index_ instanceof ON,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,O.Pz)(t),n.startSet_&&(e.startAt=(0,O.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,O.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,O.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,O.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function UV(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==er&&(e.i=n.index_.toString()),e}class hD extends yV{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=E0("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,O.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=hD.getListenId_(e,r),d={};this.listens_[l]=d;const f=FV(e._queryParams);this.restRequest_(a+".json",f,(y,I)=>{let D=I;if(404===y&&(D=null,y=null),null===y&&this.onDataUpdate_(a,D,!1,r),(0,O.DV)(this.listens_,l)===d){let x;x=y?401===y?"permission_denied":"rest_error:"+y:"ok",i(x,null)}})}unlisten(e,t){const r=hD.getListenId_(e,t);delete this.listens_[r]}get(e){const t=FV(e._queryParams),r=e._path.toString(),i=new O.BH;return this.restRequest_(r+".json",t,(a,l)=>{let d=l;404===a&&(d=null,a=null),null===a?(this.onDataUpdate_(r,d,!1,null),i.resolve(d)):i.reject(new Error(d))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,O.xO)(t);this.log_("Sending REST request for "+l);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(r&&4===d.readyState){this.log_("REST Response for "+l+" received. status:",d.status,"response:",d.responseText);let f=null;if(d.status>=200&&d.status<300){try{f=(0,O.cI)(d.responseText)}catch{is("Failed to parse JSON response for "+l+": "+d.responseText)}r(null,f)}else 401!==d.status&&404!==d.status&&is("Got unsuccessful REST response for "+l+" Status: "+d.status),r(d.status);r=null}},d.open("GET",l,!0),d.send()})}}class Eq{constructor(){this.rootNode_=Xt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function fD(){return{value:null,children:new Map}}function S_(n,e,t){if(on(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=sn(e);n.children.has(r)||n.children.set(r,fD()),S_(n.children.get(r),e=Zn(e),t)}}function jN(n,e){if(on(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(er,(r,i)=>{S_(n,new kn(r),i)}),jN(n,e)}}if(n.children.size>0){const t=sn(e);return e=Zn(e),n.children.has(t)&&jN(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function $N(n,e,t){null!==n.value?t(e,n.value):function Iq(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{$N(i,new kn(e.toString()+"/"+r),t)})}class Tq{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Ti(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class Sq{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Tq(e);const r=1e4+2e4*Math.random();T0(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Ti(e,(i,a)=>{a>0&&(0,O.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),T0(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ma=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Ma||(Ma={})),Ma))();function zN(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class pD{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Ma.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(on(this.path)){if(null!=this.affectedTree.value)return(0,O.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new kn(e));return new pD(Sn(),t,this.revert)}}return(0,O.hu)(sn(this.path)===e,"operationForChild called for unrelated child."),new pD(Zn(this.path),this.affectedTree,this.revert)}}class N0{constructor(e,t){this.source=e,this.path=t,this.type=Ma.LISTEN_COMPLETE}operationForChild(e){return on(this.path)?new N0(this.source,Sn()):new N0(this.source,Zn(this.path))}}class wp{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Ma.OVERWRITE}operationForChild(e){return on(this.path)?new wp(this.source,Sn(),this.snap.getImmediateChild(e)):new wp(this.source,Zn(this.path),this.snap)}}class A_{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Ma.MERGE}operationForChild(e){if(on(this.path)){const t=this.children.subtree(new kn(e));return t.isEmpty()?null:t.value?new wp(this.source,Sn(),t.value):new A_(this.source,Sn(),t)}return(0,O.hu)(sn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new A_(this.source,Zn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class dh{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(on(e))return this.isFullyInitialized()&&!this.filtered_;const t=sn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Aq{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function P0(n,e,t,r,i,a){const l=r.filter(d=>d.type===t);l.sort((d,f)=>function Rq(n,e,t){if(null==e.childName||null==t.childName)throw(0,O.g5)("Should only compare child_ events.");const r=new dn(e.childName,e.snapshotNode),i=new dn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,d,f)),l.forEach(d=>{const f=function xq(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,d,a);i.forEach(y=>{y.respondsTo(d.type)&&e.push(y.createEvent(f,n.query_))})})}function gD(n,e){return{eventCache:n,serverCache:e}}function O0(n,e,t,r){return gD(new dh(e,t,r),n.serverCache)}function VV(n,e,t,r){return gD(n.eventCache,new dh(e,t,r))}function mD(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function bp(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let WN;class tr{constructor(e,t=(()=>(WN||(WN=new to(m3)),WN))()){this.value=e,this.children=t}static fromObject(e){let t=new tr(null);return Ti(e,(r,i)=>{t=t.set(new kn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Sn(),value:this.value};if(on(e))return null;{const r=sn(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Zn(e),t);return null!=a?{path:mr(new kn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(on(e))return this;{const t=sn(e),r=this.children.get(t);return null!==r?r.subtree(Zn(e)):new tr(null)}}set(e,t){if(on(e))return new tr(t,this.children);{const r=sn(e),a=(this.children.get(r)||new tr(null)).set(Zn(e),t),l=this.children.insert(r,a);return new tr(this.value,l)}}remove(e){if(on(e))return this.children.isEmpty()?new tr(null):new tr(null,this.children);{const t=sn(e),r=this.children.get(t);if(r){const i=r.remove(Zn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new tr(null):new tr(this.value,a)}return this}}get(e){if(on(e))return this.value;{const t=sn(e),r=this.children.get(t);return r?r.get(Zn(e)):null}}setTree(e,t){if(on(e))return t;{const r=sn(e),a=(this.children.get(r)||new tr(null)).setTree(Zn(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new tr(this.value,l)}}fold(e){return this.fold_(Sn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(mr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Sn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(on(e))return null;{const a=sn(e),l=this.children.get(a);return l?l.findOnPath_(Zn(e),mr(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Sn(),t)}foreachOnPath_(e,t,r){if(on(e))return this;{this.value&&r(t,this.value);const i=sn(e),a=this.children.get(i);return a?a.foreachOnPath_(Zn(e),mr(t,i),r):new tr(null)}}foreach(e){this.foreach_(Sn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(mr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Su{constructor(e){this.writeTree_=e}static empty(){return new Su(new tr(null))}}function L0(n,e,t){if(on(e))return new Su(new tr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=As(i,e);return a=a.updateChild(l,t),new Su(n.writeTree_.set(i,a))}{const i=new tr(t),a=n.writeTree_.setTree(e,i);return new Su(a)}}}function qN(n,e,t){let r=n;return Ti(t,(i,a)=>{r=L0(r,mr(e,i),a)}),r}function jV(n,e){if(on(e))return Su.empty();{const t=n.writeTree_.setTree(e,new tr(null));return new Su(t)}}function KN(n,e){return null!=Ep(n,e)}function Ep(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(As(t.path,e)):null}function $V(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(er,(r,i)=>{e.push(new dn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new dn(r,i.value))}),e}function hh(n,e){if(on(e))return n;{const t=Ep(n,e);return new Su(null!=t?new tr(t):n.writeTree_.subtree(e))}}function ZN(n){return n.writeTree_.isEmpty()}function M_(n,e){return HV(Sn(),n.writeTree_,e)}function HV(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,O.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=HV(mr(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(mr(n,".priority"),r)),t}}function _D(n,e){return KV(e,n)}function Fq(n,e){if(n.snap)return Aa(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Aa(mr(n.path,t),e))return!0;return!1}function Bq(n){return n.visible}function GV(n,e,t){let r=Su.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let d;if(a.snap)Aa(t,l)?(d=As(t,l),r=L0(r,d,a.snap)):Aa(l,t)&&(d=As(l,t),r=L0(r,Sn(),a.snap.getChild(d)));else{if(!a.children)throw(0,O.g5)("WriteRecord should have .snap or .children");if(Aa(t,l))d=As(t,l),r=qN(r,d,a.children);else if(Aa(l,t))if(d=As(l,t),on(d))r=qN(r,Sn(),a.children);else{const f=(0,O.DV)(a.children,sn(d));if(f){const y=f.getChild(Zn(d));r=L0(r,Sn(),y)}}}}}return r}function zV(n,e,t,r,i){if(r||i){const a=hh(n.visibleWrites,e);return!i&&ZN(a)?t:i||null!=t||KN(a,Sn())?M_(GV(n.allWrites,function(y){return(y.visible||i)&&(!r||!~r.indexOf(y.writeId))&&(Aa(y.path,e)||Aa(e,y.path))},e),t||Xt.EMPTY_NODE):null}{const a=Ep(n.visibleWrites,e);if(null!=a)return a;{const l=hh(n.visibleWrites,e);return ZN(l)?t:null!=t||KN(l,Sn())?M_(l,t||Xt.EMPTY_NODE):null}}}function yD(n,e,t,r){return zV(n.writeTree,n.treePath,e,t,r)}function YN(n,e){return function Vq(n,e,t){let r=Xt.EMPTY_NODE;const i=Ep(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(er,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=hh(n.visibleWrites,e);return t.forEachChild(er,(l,d)=>{const f=M_(hh(a,new kn(l)),d);r=r.updateImmediateChild(l,f)}),$V(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return $V(hh(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function WV(n,e,t,r){return function jq(n,e,t,r,i){(0,O.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=mr(e,t);if(KN(n.visibleWrites,a))return null;{const l=hh(n.visibleWrites,a);return ZN(l)?i.getChild(t):M_(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function vD(n,e){return function Hq(n,e){return Ep(n.visibleWrites,e)}(n.writeTree,mr(n.treePath,e))}function QN(n,e,t){return function $q(n,e,t,r){const i=mr(e,t),a=Ep(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?M_(hh(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function qV(n,e){return KV(mr(n.treePath,e),n.writeTree)}function KV(n,e){return{treePath:n,writeTree:e}}class qq{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,O.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,O.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,R0(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,x0(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,D_(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,O.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,R0(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const ZV=new class Kq{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class XN{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new dh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return QN(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:bp(this.viewCache_),a=function Wq(n,e,t,r,i,a){return function Gq(n,e,t,r,i,a,l){let d;const f=hh(n.visibleWrites,e),y=Ep(f,Sn());if(null!=y)d=y;else{if(null==t)return[];d=M_(f,t)}if(d=d.withIndex(l),d.isEmpty()||d.isLeafNode())return[];{const I=[],D=l.getCompare(),x=a?d.getReverseIteratorFrom(r,l):d.getIteratorFrom(r,l);let L=x.getNext();for(;L&&I.length<i;)0!==D(L,r)&&I.push(L),L=x.getNext();return I}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function YV(n,e,t,r,i,a){const l=e.eventCache;if(null!=vD(r,t))return e;{let d,f;if(on(t))if((0,O.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=bp(e),D=YN(r,y instanceof Xt?y:Xt.EMPTY_NODE);d=n.filter.updateFullNode(e.eventCache.getNode(),D,a)}else{const y=yD(r,bp(e));d=n.filter.updateFullNode(e.eventCache.getNode(),y,a)}else{const y=sn(t);if(".priority"===y){(0,O.hu)(1===ch(t),"Can't have a priority with additional path components");const I=l.getNode();f=e.serverCache.getNode();const D=WV(r,t,I,f);d=null!=D?n.filter.updatePriority(I,D):l.getNode()}else{const I=Zn(t);let D;if(l.isCompleteForChild(y)){f=e.serverCache.getNode();const x=WV(r,t,l.getNode(),f);D=null!=x?l.getNode().getImmediateChild(y).updateChild(I,x):l.getNode().getImmediateChild(y)}else D=QN(r,y,e.serverCache);d=null!=D?n.filter.updateChild(l.getNode(),y,D,I,i,a):l.getNode()}}return O0(e,d,l.isFullyInitialized()||on(t),n.filter.filtersNodes())}}function wD(n,e,t,r,i,a,l,d){const f=e.serverCache;let y;const I=l?n.filter:n.filter.getIndexedFilter();if(on(t))y=I.updateFullNode(f.getNode(),r,null);else if(I.filtersNodes()&&!f.isFiltered()){const L=f.getNode().updateChild(t,r);y=I.updateFullNode(f.getNode(),L,null)}else{const L=sn(t);if(!f.isCompleteForPath(t)&&ch(t)>1)return e;const V=Zn(t),ce=f.getNode().getImmediateChild(L).updateChild(V,r);y=".priority"===L?I.updatePriority(f.getNode(),ce):I.updateChild(f.getNode(),L,ce,V,ZV,null)}const D=VV(e,y,f.isFullyInitialized()||on(t),I.filtersNodes());return YV(n,D,t,i,new XN(i,D,a),d)}function JN(n,e,t,r,i,a,l){const d=e.eventCache;let f,y;const I=new XN(i,e,a);if(on(t))y=n.filter.updateFullNode(e.eventCache.getNode(),r,l),f=O0(e,y,!0,n.filter.filtersNodes());else{const D=sn(t);if(".priority"===D)y=n.filter.updatePriority(e.eventCache.getNode(),r),f=O0(e,y,d.isFullyInitialized(),d.isFiltered());else{const x=Zn(t),L=d.getNode().getImmediateChild(D);let V;if(on(x))V=r;else{const ee=I.getCompleteChild(D);V=null!=ee?".priority"===MN(x)&&ee.getChild(EV(x)).isEmpty()?ee:ee.updateChild(x,r):Xt.EMPTY_NODE}f=L.equals(V)?e:O0(e,n.filter.updateChild(d.getNode(),D,V,x,I,l),d.isFullyInitialized(),n.filter.filtersNodes())}}return f}function QV(n,e){return n.eventCache.isCompleteForChild(e)}function XV(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function eP(n,e,t,r,i,a,l,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,f=e;y=on(t)?r:new tr(null).setTree(t,r);const I=e.serverCache.getNode();return y.children.inorderTraversal((D,x)=>{if(I.hasChild(D)){const V=XV(0,e.serverCache.getNode().getImmediateChild(D),x);f=wD(n,f,new kn(D),V,i,a,l,d)}}),y.children.inorderTraversal((D,x)=>{const L=!e.serverCache.isCompleteForChild(D)&&null===x.value;if(!I.hasChild(D)&&!L){const ee=XV(0,e.serverCache.getNode().getImmediateChild(D),x);f=wD(n,f,new kn(D),ee,i,a,l,d)}}),f}class rK{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new UN(r.getIndex()),a=function _q(n){return n.loadsAllData()?new UN(n.getIndex()):n.hasLimit()?new mq(n):new k0(n)}(r);this.processor_=function Zq(n){return{filter:n}}(a);const l=t.serverCache,d=t.eventCache,f=i.updateFullNode(Xt.EMPTY_NODE,l.getNode(),null),y=a.updateFullNode(Xt.EMPTY_NODE,d.getNode(),null),I=new dh(f,l.isFullyInitialized(),i.filtersNodes()),D=new dh(y,d.isFullyInitialized(),a.filtersNodes());this.viewCache_=gD(D,I),this.eventGenerator_=new Aq(this.query_)}get query(){return this.query_}}function oK(n,e){const t=bp(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!on(e)&&!t.getImmediateChild(sn(e)).isEmpty())?t.getChild(e):null}function JV(n){return 0===n.eventRegistrations_.length}function e2(n,e,t){const r=[];if(t){(0,O.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const l=n.eventRegistrations_[a];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function t2(n,e,t,r){e.type===Ma.MERGE&&null!==e.source.queryId&&((0,O.hu)(bp(n.viewCache_),"We should always have a full cache before handling merges"),(0,O.hu)(mD(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function Qq(n,e,t,r,i){const a=new qq;let l,d;if(t.type===Ma.OVERWRITE){const y=t;y.source.fromUser?l=JN(n,e,y.path,y.snap,r,i,a):((0,O.hu)(y.source.fromServer,"Unknown source."),d=y.source.tagged||e.serverCache.isFiltered()&&!on(y.path),l=wD(n,e,y.path,y.snap,r,i,d,a))}else if(t.type===Ma.MERGE){const y=t;y.source.fromUser?l=function Jq(n,e,t,r,i,a,l){let d=e;return r.foreach((f,y)=>{const I=mr(t,f);QV(e,sn(I))&&(d=JN(n,d,I,y,i,a,l))}),r.foreach((f,y)=>{const I=mr(t,f);QV(e,sn(I))||(d=JN(n,d,I,y,i,a,l))}),d}(n,e,y.path,y.children,r,i,a):((0,O.hu)(y.source.fromServer,"Unknown source."),d=y.source.tagged||e.serverCache.isFiltered(),l=eP(n,e,y.path,y.children,r,i,d,a))}else if(t.type===Ma.ACK_USER_WRITE){const y=t;l=y.revert?function nK(n,e,t,r,i,a){let l;if(null!=vD(r,t))return e;{const d=new XN(r,e,i),f=e.eventCache.getNode();let y;if(on(t)||".priority"===sn(t)){let I;if(e.serverCache.isFullyInitialized())I=yD(r,bp(e));else{const D=e.serverCache.getNode();(0,O.hu)(D instanceof Xt,"serverChildren would be complete if leaf node"),I=YN(r,D)}y=n.filter.updateFullNode(f,I,a)}else{const I=sn(t);let D=QN(r,I,e.serverCache);null==D&&e.serverCache.isCompleteForChild(I)&&(D=f.getImmediateChild(I)),y=null!=D?n.filter.updateChild(f,I,D,Zn(t),d,a):e.eventCache.getNode().hasChild(I)?n.filter.updateChild(f,I,Xt.EMPTY_NODE,Zn(t),d,a):f,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=yD(r,bp(e)),l.isLeafNode()&&(y=n.filter.updateFullNode(y,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=vD(r,Sn()),O0(e,y,l,n.filter.filtersNodes())}}(n,e,y.path,r,i,a):function eK(n,e,t,r,i,a,l){if(null!=vD(i,t))return e;const d=e.serverCache.isFiltered(),f=e.serverCache;if(null!=r.value){if(on(t)&&f.isFullyInitialized()||f.isCompleteForPath(t))return wD(n,e,t,f.getNode().getChild(t),i,a,d,l);if(on(t)){let y=new tr(null);return f.getNode().forEachChild(vl,(I,D)=>{y=y.set(new kn(I),D)}),eP(n,e,t,y,i,a,d,l)}return e}{let y=new tr(null);return r.foreach((I,D)=>{const x=mr(t,I);f.isCompleteForPath(x)&&(y=y.set(I,f.getNode().getChild(x)))}),eP(n,e,t,y,i,a,d,l)}}(n,e,y.path,y.affectedTree,r,i,a)}else{if(t.type!==Ma.LISTEN_COMPLETE)throw(0,O.g5)("Unknown operation type: "+t.type);l=function tK(n,e,t,r,i){const a=e.serverCache;return YV(n,VV(e,a.getNode(),a.isFullyInitialized()||on(t),a.isFiltered()),t,r,ZV,i)}(n,e,t.path,r,a)}const f=a.getChanges();return function Xq(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=mD(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(LV(mD(e)))}}(e,l,f),{viewCache:l,changes:f}}(n.processor_,i,e,t,r);return function Yq(n,e){(0,O.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,O.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,O.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,n2(n,a.changes,a.viewCache.eventCache.getNode(),null)}function n2(n,e,t,r){return function Mq(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function gq(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),P0(n,i,"child_removed",e,r,t),P0(n,i,"child_added",e,r,t),P0(n,i,"child_moved",a,r,t),P0(n,i,"child_changed",e,r,t),P0(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let bD,ID;class r2{constructor(){this.views=new Map}}function tP(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,O.hu)(null!=a,"SyncTree gave us an op for an invalid query."),t2(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(t2(l,e,t,r));return a}}function s2(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let d=yD(t,i?r:null),f=!1;d?f=!0:r instanceof Xt?(d=YN(t,r),f=!1):(d=Xt.EMPTY_NODE,f=!1);const y=gD(new dh(d,f,!1),new dh(r,i,!1));return new rK(e,y)}return l}function o2(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function fh(n,e){let t=null;for(const r of n.views.values())t=t||oK(r,e);return t}function a2(n,e){return e._queryParams.loadsAllData()?ED(n):n.views.get(e._queryIdentifier)}function u2(n,e){return null!=a2(n,e)}function ph(n){return null!=ED(n)}function ED(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let mK=1;class l2{constructor(e){this.listenProvider_=e,this.syncPointTree_=new tr(null),this.pendingWriteTree_=function zq(){return{visibleWrites:Su.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function nP(n,e,t,r,i){return function Nq(n,e,t,r,i){(0,O.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=L0(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?x_(n,new wp({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function gh(n,e,t=!1){const r=function Oq(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function Lq(n,e){const t=n.allWrites.findIndex(d=>d.writeId===e);(0,O.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const d=n.allWrites[l];d.visible&&(l>=t&&Fq(d,r.path)?i=!1:Aa(r.path,d.path)&&(a=!0)),l--}return!!i&&(a?(function Uq(n){n.visibleWrites=GV(n.allWrites,Bq,Sn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=jV(n.visibleWrites,r.path):Ti(r.children,f=>{n.visibleWrites=jV(n.visibleWrites,mr(r.path,f))}),!0))}(n.pendingWriteTree_,e)){let a=new tr(null);return null!=r.snap?a=a.set(Sn(),!0):Ti(r.children,l=>{a=a.set(new kn(l),!0)}),x_(n,new pD(r.path,a,t))}return[]}function F0(n,e,t){return x_(n,new wp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function TD(n,e,t,r,i=!1){const a=e._path,l=n.syncPointTree_.get(a);let d=[];if(l&&("default"===e._queryIdentifier||u2(l,e))){const f=function fK(n,e,t,r){const i=e._queryIdentifier,a=[];let l=[];const d=ph(n);if("default"===i)for(const[f,y]of n.views.entries())l=l.concat(e2(y,t,r)),JV(y)&&(n.views.delete(f),y.query._queryParams.loadsAllData()||a.push(y.query));else{const f=n.views.get(i);f&&(l=l.concat(e2(f,t,r)),JV(f)&&(n.views.delete(i),f.query._queryParams.loadsAllData()||a.push(f.query)))}return d&&!ph(n)&&a.push(new(function cK(){return(0,O.hu)(bD,"Reference.ts has not been loaded"),bD}())(e._repo,e._path)),{removed:a,events:l}}(l,e,t,r);(function dK(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const y=f.removed;if(d=f.events,!i){const I=-1!==y.findIndex(x=>x._queryParams.loadsAllData()),D=n.syncPointTree_.findOnPath(a,(x,L)=>ph(L));if(I&&!D){const x=n.syncPointTree_.subtree(a);if(!x.isEmpty()){const L=function IK(n){return n.fold((e,t,r)=>{if(t&&ph(t))return[ED(t)];{let i=[];return t&&(i=o2(t)),Ti(r,(a,l)=>{i=i.concat(l)}),i}})}(x);for(let V=0;V<L.length;++V){const ee=L[V],ce=ee.query,Ge=f2(n,ee);n.listenProvider_.startListening(B0(ce),U0(n,ce),Ge.hashFn,Ge.onComplete)}}}!D&&y.length>0&&!r&&(I?n.listenProvider_.stopListening(B0(e),null):y.forEach(x=>{const L=n.queryToTagMap.get(DD(x));n.listenProvider_.stopListening(B0(x),L)}))}!function TK(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=DD(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,y)}return d}function c2(n,e,t,r){const i=iP(n,r);if(null!=i){const a=sP(i),l=a.path,d=a.queryId,f=As(l,e);return oP(n,l,new wp(zN(d),f,t))}return[]}function rP(n,e,t,r=!1){const i=e._path;let a=null,l=!1;n.syncPointTree_.foreachOnPath(i,(x,L)=>{const V=As(x,i);a=a||fh(L,V),l=l||ph(L)});let f,d=n.syncPointTree_.get(i);d?(l=l||ph(d),a=a||fh(d,Sn())):(d=new r2,n.syncPointTree_=n.syncPointTree_.set(i,d)),null!=a?f=!0:(f=!1,a=Xt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((L,V)=>{const ee=fh(V,Sn());ee&&(a=a.updateImmediateChild(L,ee))}));const y=u2(d,e);if(!y&&!e._queryParams.loadsAllData()){const x=DD(e);(0,O.hu)(!n.queryToTagMap.has(x),"View does not exist, but we have a tag");const L=function CK(){return mK++}();n.queryToTagMap.set(x,L),n.tagToQueryMap.set(L,x)}let D=function hK(n,e,t,r,i,a){const l=s2(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function aK(n,e){n.eventRegistrations_.push(e)}(l,t),function uK(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(er,(a,l)=>{r.push(D_(a,l))}),t.isFullyInitialized()&&r.push(LV(t.getNode())),n2(n,r,t.getNode(),e)}(l,t)}(d,e,t,_D(n.pendingWriteTree_,i),a,f);if(!y&&!l&&!r){const x=a2(d,e);D=D.concat(function DK(n,e,t){const r=e._path,i=U0(n,e),a=f2(n,t),l=n.listenProvider_.startListening(B0(e),i,a.hashFn,a.onComplete),d=n.syncPointTree_.subtree(r);if(i)(0,O.hu)(!ph(d.value),"If we're adding a query, it shouldn't be shadowed");else{const f=d.fold((y,I,D)=>{if(!on(y)&&I&&ph(I))return[ED(I).query];{let x=[];return I&&(x=x.concat(o2(I).map(L=>L.query))),Ti(D,(L,V)=>{x=x.concat(V)}),x}});for(let y=0;y<f.length;++y){const I=f[y];n.listenProvider_.stopListening(B0(I),U0(n,I))}}return l}(n,e,x))}return D}function CD(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,d)=>{const y=fh(d,As(l,e));if(y)return y});return zV(i,e,a,t,!0)}function x_(n,e){return d2(e,n.syncPointTree_,null,_D(n.pendingWriteTree_,Sn()))}function d2(n,e,t,r){if(on(n.path))return h2(n,e,t,r);{const i=e.get(Sn());null==t&&null!=i&&(t=fh(i,Sn()));let a=[];const l=sn(n.path),d=n.operationForChild(l),f=e.children.get(l);if(f&&d){const y=t?t.getImmediateChild(l):null,I=qV(r,l);a=a.concat(d2(d,f,y,I))}return i&&(a=a.concat(tP(i,n,r,t))),a}}function h2(n,e,t,r){const i=e.get(Sn());null==t&&null!=i&&(t=fh(i,Sn()));let a=[];return e.children.inorderTraversal((l,d)=>{const f=t?t.getImmediateChild(l):null,y=qV(r,l),I=n.operationForChild(l);I&&(a=a.concat(h2(I,d,f,y)))}),i&&(a=a.concat(tP(i,n,r,t))),a}function f2(n,e){const t=e.query,r=U0(n,t);return{hashFn:()=>(function iK(n){return n.viewCache_.serverCache.getNode()}(e)||Xt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function wK(n,e,t){const r=iP(n,t);if(r){const i=sP(r),a=i.path,l=i.queryId,d=As(a,e);return oP(n,a,new N0(zN(l),d))}return[]}(n,t._path,r):function vK(n,e){return x_(n,new N0({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function v3(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return TD(n,t,null,a)}}}}function U0(n,e){const t=DD(e);return n.queryToTagMap.get(t)}function DD(n){return n._path.toString()+"$"+n._queryIdentifier}function iP(n,e){return n.tagToQueryMap.get(e)}function sP(n){const e=n.indexOf("$");return(0,O.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new kn(n.substr(0,e))}}function oP(n,e,t){const r=n.syncPointTree_.get(e);return(0,O.hu)(r,"Missing sync point for query tag that we're tracking"),tP(r,t,_D(n.pendingWriteTree_,e),null)}function B0(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function gK(){return(0,O.hu)(ID,"Reference.ts has not been loaded"),ID}())(n._repo,n._path):n}class aP{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new aP(t)}node(){return this.node_}}class uP{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=mr(this.path_,e);return new uP(this.syncTree_,t)}node(){return CD(this.syncTree_,this.path_)}}const p2=function(n,e,t){return n&&"object"==typeof n?((0,O.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?AK(n[".sv"],e,t):"object"==typeof n[".sv"]?MK(n[".sv"],e):void(0,O.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},AK=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,O.hu)(!1,"Unexpected server value: "+n)},MK=function(n,e,t){n.hasOwnProperty("increment")||(0,O.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,O.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,O.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},g2=function(n,e,t,r){return cP(e,new uP(t,n),r)},lP=function(n,e,t){return cP(n,new aP(e),t)};function cP(n,e,t){const r=n.getPriority().val(),i=p2(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,d=p2(l.getValue(),e,t);return d!==l.getValue()||i!==l.getPriority().val()?new I_(d,br(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new I_(i))),l.forEachChild(er,(d,f)=>{const y=cP(f,e.getImmediateChild(d),t);y!==f&&(a=a.updateImmediateChild(d,y))}),a}}class dP{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function SD(n,e){let t=e instanceof kn?e:new kn(e),r=n,i=sn(t);for(;null!==i;){const a=(0,O.DV)(r.node.children,i)||{children:{},childCount:0};r=new dP(i,r,a),t=Zn(t),i=sn(t)}return r}function Ip(n){return n.node.value}function hP(n,e){n.node.value=e,fP(n)}function m2(n){return n.node.childCount>0}function AD(n,e){Ti(n.node.children,(t,r)=>{e(new dP(t,n,r))})}function _2(n,e,t,r){t&&!r&&e(n),AD(n,i=>{_2(i,e,!0,r)}),t&&r&&e(n)}function V0(n){return new kn(null===n.parent?n.name:V0(n.parent)+"/"+n.name)}function fP(n){null!==n.parent&&function kK(n,e,t){const r=function xK(n){return void 0===Ip(n)&&!m2(n)}(t),i=(0,O.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,fP(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,fP(n))}(n.parent,n.name,n)}const NK=/[\[\].#$\/\u0000-\u001F\u007F]/,PK=/[\[\].#$\u0000-\u001F\u007F]/,pP=10485760,MD=function(n){return"string"==typeof n&&0!==n.length&&!NK.test(n)},y2=function(n){return"string"==typeof n&&0!==n.length&&!PK.test(n)},j0=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!tD(n)||n&&"object"==typeof n&&(0,O.r3)(n,".sv")},wl=function(n,e,t,r){r&&void 0===e||$0((0,O.gK)(n,"value"),e,t)},$0=function(n,e,t){const r=t instanceof kn?new Y3(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+yp(r));if("function"==typeof e)throw new Error(n+"contains a function "+yp(r)+" with contents = "+e.toString());if(tD(e))throw new Error(n+"contains "+e.toString()+" "+yp(r));if("string"==typeof e&&e.length>pP/3&&(0,O.ug)(e)>pP)throw new Error(n+"contains a string greater than "+pP+" utf8 bytes "+yp(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Ti(e,(l,d)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!MD(l)))throw new Error(n+" contains an invalid key ("+l+") "+yp(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Q3(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,O.ug)(e),IV(n)})(r,l),$0(n,d,r),function X3(n){const e=n.parts_.pop();n.byteLength_-=(0,O.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+yp(r)+" in addition to actual children.")}},v2=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,O.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];Ti(e,(l,d)=>{const f=new kn(l);if($0(i,d,mr(t,f)),".priority"===MN(f)&&!j0(d))throw new Error(i+"contains an invalid value for '"+f.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(f)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=D0(r);for(let l=0;l<a.length;l++)if((".priority"!==a[l]||l!==a.length-1)&&!MD(a[l]))throw new Error(n+"contains an invalid key ("+a[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(Z3);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Aa(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},gP=function(n,e,t){if(!t||void 0!==e){if(tD(e))throw new Error((0,O.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!j0(e))throw new Error((0,O.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},H0=function(n,e,t,r){if(!(r&&void 0===t||MD(t)))throw new Error((0,O.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},G0=function(n,e,t,r){if(!(r&&void 0===t||y2(t)))throw new Error((0,O.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},xa=function(n,e){if(".info"===sn(e))throw new Error(n+" failed = Can't modify data under /.info/")},w2=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!MD(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),y2(n)}(t))throw new Error((0,O.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class UK{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function xD(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!xN(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function b2(n,e,t){xD(n,t),E2(n,r=>xN(r,e))}function Lo(n,e,t){xD(n,t),E2(n,r=>Aa(r,e)||Aa(e,r))}function E2(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(BK(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function BK(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();mp&&Ii("event: "+t.toString()),b_(r)}}}const I2="repo_interrupt";class jK{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new UK,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=fD(),this.transactionQueueTree_=new dP,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function T2(n){const t=n.infoData_.getNode(new kn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function z0(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:T2(n)})}function C2(n,e,t,r,i){n.dataUpdateCount++;const a=new kn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const f=(0,O.UI)(t,y=>br(y));l=function bK(n,e,t,r){const i=iP(n,r);if(i){const a=sP(i),l=a.path,d=a.queryId,f=As(l,e),y=tr.fromObject(t);return oP(n,l,new A_(zN(d),f,y))}return[]}(n.serverSyncTree_,a,f,i)}else{const f=br(t);l=c2(n.serverSyncTree_,a,f,i)}else if(r){const f=(0,O.UI)(t,y=>br(y));l=function yK(n,e,t){const r=tr.fromObject(t);return x_(n,new A_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,f)}else{const f=br(t);l=F0(n.serverSyncTree_,a,f)}let d=a;l.length>0&&(d=k_(n,a)),Lo(n.eventQueue_,d,l)}function D2(n,e){mP(n,"connected",e),!1===e&&function WK(n){R_(n,"onDisconnectEvents");const e=z0(n),t=fD();$N(n.onDisconnect_,Sn(),(i,a)=>{const l=g2(i,a,n.serverSyncTree_,e);S_(t,i,l)});let r=[];$N(t,Sn(),(i,a)=>{r=r.concat(F0(n.serverSyncTree_,i,a));const l=wP(n,i);k_(n,l)}),n.onDisconnect_=fD(),Lo(n.eventQueue_,Sn(),r)}(n)}function mP(n,e,t){const r=new kn("/.info/"+e),i=br(t);n.infoData_.updateSnapshot(r,i);const a=F0(n.infoSyncTree_,r,i);Lo(n.eventQueue_,r,a)}function RD(n){return n.nextWriteId_++}function _P(n,e,t,r,i){R_(n,"set",{path:e.toString(),value:t,priority:r});const a=z0(n),l=br(t,r),d=CD(n.serverSyncTree_,e),f=lP(l,d,a),y=RD(n),I=nP(n.serverSyncTree_,e,f,y,!0);xD(n.eventQueue_,I),n.server_.put(e.toString(),l.val(!0),(x,L)=>{const V="ok"===x;V||is("set at "+e+" failed: "+x);const ee=gh(n.serverSyncTree_,y,!V);Lo(n.eventQueue_,e,ee),mh(0,i,x,L)});const D=wP(n,e);k_(n,D),Lo(n.eventQueue_,D,[])}function qK(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&jN(n.onDisconnect_,e),mh(0,t,r,i)})}function S2(n,e,t,r){const i=br(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,l)=>{"ok"===a&&S_(n.onDisconnect_,e,i),mh(0,r,a,l)})}function yP(n,e,t){let r;r=".info"===sn(e._path)?TD(n.infoSyncTree_,e,t):TD(n.serverSyncTree_,e,t),b2(n.eventQueue_,e._path,r)}function A2(n){n.persistentConnection_&&n.persistentConnection_.interrupt(I2)}function R_(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Ii(t,...e)}function mh(n,e,t,r){e&&b_(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const l=new Error(a);l.code=i,e(l)}})}function vP(n,e,t){return CD(n.serverSyncTree_,e,t)||Xt.EMPTY_NODE}function kD(n,e=n.transactionQueueTree_){if(e||ND(n,e),Ip(e)){const t=x2(n,e);(0,O.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function JK(n,e,t){const r=t.map(y=>y.currentWriteId),i=vP(n,e,r);let a=i;const l=i.hash();for(let y=0;y<t.length;y++){const I=t[y];(0,O.hu)(0===I.status,"tryToSendTransactionQueue_: items in queue should all be run."),I.status=1,I.retryCount++;const D=As(e,I.path);a=a.updateChild(D,I.currentOutputSnapshotRaw)}const d=a.val(!0),f=e;n.server_.put(f.toString(),d,y=>{R_(n,"transaction put response",{path:f.toString(),status:y});let I=[];if("ok"===y){const D=[];for(let x=0;x<t.length;x++)t[x].status=2,I=I.concat(gh(n.serverSyncTree_,t[x].currentWriteId)),t[x].onComplete&&D.push(()=>t[x].onComplete(null,!0,t[x].currentOutputSnapshotResolved)),t[x].unwatcher();ND(n,SD(n.transactionQueueTree_,e)),kD(n,n.transactionQueueTree_),Lo(n.eventQueue_,e,I);for(let x=0;x<D.length;x++)b_(D[x])}else{if("datastale"===y)for(let D=0;D<t.length;D++)t[D].status=3===t[D].status?4:0;else{is("transaction at "+f.toString()+" failed: "+y);for(let D=0;D<t.length;D++)t[D].status=4,t[D].abortReason=y}k_(n,e)}},l)}(n,V0(e),t)}else m2(e)&&AD(e,t=>{kD(n,t)})}function k_(n,e){const t=M2(n,e),r=V0(t);return function e4(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const f=e[d],y=As(t,f.path);let D,I=!1;if((0,O.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===f.status)I=!0,D=f.abortReason,i=i.concat(gh(n.serverSyncTree_,f.currentWriteId,!0));else if(0===f.status)if(f.retryCount>=25)I=!0,D="maxretry",i=i.concat(gh(n.serverSyncTree_,f.currentWriteId,!0));else{const x=vP(n,f.path,l);f.currentInputSnapshot=x;const L=e[d].update(x.val());if(void 0!==L){$0("transaction failed: Data returned ",L,f.path);let V=br(L);"object"==typeof L&&null!=L&&(0,O.r3)(L,".priority")||(V=V.updatePriority(x.getPriority()));const ce=f.currentWriteId,Ge=z0(n),Ke=lP(V,x,Ge);f.currentOutputSnapshotRaw=V,f.currentOutputSnapshotResolved=Ke,f.currentWriteId=RD(n),l.splice(l.indexOf(ce),1),i=i.concat(nP(n.serverSyncTree_,f.path,Ke,f.currentWriteId,f.applyLocally)),i=i.concat(gh(n.serverSyncTree_,ce,!0))}else I=!0,D="nodata",i=i.concat(gh(n.serverSyncTree_,f.currentWriteId,!0))}Lo(n.eventQueue_,t,i),i=[],I&&(e[d].status=2,setTimeout(e[d].unwatcher,Math.floor(0)),e[d].onComplete&&r.push("nodata"===D?()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot):()=>e[d].onComplete(new Error(D),!1,null)))}ND(n,n.transactionQueueTree_);for(let d=0;d<r.length;d++)b_(r[d]);kD(n,n.transactionQueueTree_)}(n,x2(n,t),r),r}function M2(n,e){let t,r=n.transactionQueueTree_;for(t=sn(e);null!==t&&void 0===Ip(r);)r=SD(r,t),t=sn(e=Zn(e));return r}function x2(n,e){const t=[];return R2(n,e,t),t.sort((r,i)=>r.order-i.order),t}function R2(n,e,t){const r=Ip(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);AD(e,i=>{R2(n,i,t)})}function ND(n,e){const t=Ip(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,hP(e,t.length>0?t:void 0)}AD(e,r=>{ND(n,r)})}function wP(n,e){const t=V0(M2(n,e)),r=SD(n.transactionQueueTree_,e);return function RK(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{bP(n,i)}),bP(n,r),_2(r,i=>{bP(n,i)}),t}function bP(n,e){const t=Ip(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,O.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,O.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(gh(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?hP(e,void 0):t.length=a+1,Lo(n.eventQueue_,V0(e),i);for(let l=0;l<r.length;l++)b_(r[l])}}const EP=function(n,e){const t=r4(n),r=t.namespace;return"firebase.com"===t.domain&&_l(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&_l("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&is("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new IN(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new kn(t.pathString)}},r4=function(n){let e="",t="",r="",i="",a="",l=!0,d="https",f=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(d=n.substring(0,y-1),n=n.substring(y+2));let I=n.indexOf("/");-1===I&&(I=n.length);let D=n.indexOf("?");-1===D&&(D=n.length),e=n.substring(0,Math.min(I,D)),I<D&&(i=function t4(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(I,D)));const x=function n4(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):is(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,D)));y=e.indexOf(":"),y>=0?(l="https"===d||"wss"===d,f=parseInt(e.substring(y+1),10)):y=e.length;const L=e.slice(0,y);if("localhost"===L.toLowerCase())t="localhost";else if(L.split(".").length<=2)t=L;else{const V=e.indexOf(".");r=e.substring(0,V).toLowerCase(),t=e.substring(V+1),a=r}"ns"in x&&(a=x.ns)}return{host:e,port:f,domain:t,subdomain:r,secure:l,scheme:d,pathString:i,namespace:a}};class k2{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,O.Pz)(this.snapshot.exportVal())}}class N2{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class IP{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,O.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class P2{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new O.BH;return qK(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){xa("OnDisconnect.remove",this._path);const e=new O.BH;return S2(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){xa("OnDisconnect.set",this._path),wl("OnDisconnect.set",e,this._path,!1);const t=new O.BH;return S2(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){xa("OnDisconnect.setWithPriority",this._path),wl("OnDisconnect.setWithPriority",e,this._path,!1),gP("OnDisconnect.setWithPriority",t,!1);const r=new O.BH;return function KK(n,e,t,r,i){const a=br(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(l,d)=>{"ok"===l&&S_(n.onDisconnect_,e,a),mh(0,i,l,d)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){xa("OnDisconnect.update",this._path),v2("OnDisconnect.update",e,this._path,!1);const t=new O.BH;return function ZK(n,e,t,r){if((0,O.xb)(t))return Ii("onDisconnect().update() called with empty data.  Don't do anything."),void mh(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&Ti(t,(l,d)=>{const f=br(d);S_(n.onDisconnect_,mr(e,l),f)}),mh(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class no{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return on(this._path)?null:MN(this._path)}get ref(){return new Ra(this._repo,this._path)}get _queryIdentifier(){const e=UV(this._queryParams),t=wN(e);return"{}"===t?"default":t}get _queryObject(){return UV(this._queryParams)}isEqual(e){if(!((e=(0,O.m9)(e))instanceof no))return!1;const t=this._repo===e._repo,r=xN(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function K3(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function PD(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function _h(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===vl){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==xc)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==yl)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===er){if(null!=e&&!j0(e)||null!=t&&!j0(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,O.hu)(n.getIndex()instanceof ON||n.getIndex()===LN,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function OD(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Ra extends no{constructor(e,t){super(e,t,new cD,!1)}get parent(){const e=EV(this._path);return null===e?null:new Ra(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Tp{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new kn(e),r=Cp(this.ref,e);return new Tp(this._node.getChild(t),r,er)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Tp(i,Cp(this.ref,r),er)))}hasChild(e){const t=new kn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function O2(n,e){return(n=(0,O.m9)(n))._checkNotDeleted("ref"),void 0!==e?Cp(n._root,e):n._root}function L2(n,e){(n=(0,O.m9)(n))._checkNotDeleted("refFromURL");const t=EP(e,n._repo.repoInfo_.nodeAdmin);w2("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&_l("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),O2(n,t.path.toString())}function Cp(n,e){return null===sn((n=(0,O.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),G0("child","path",t,!1)):G0("child","path",e,!1),new Ra(n._repo,mr(n._path,e));var t}function TP(n,e){n=(0,O.m9)(n),xa("set",n._path),wl("set",e,n._path,!1);const t=new O.BH;return _P(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function u4(n,e){v2("update",e,n._path,!1);const t=new O.BH;return function zK(n,e,t,r){R_(n,"update",{path:e.toString(),value:t});let i=!0;const a=z0(n),l={};if(Ti(t,(d,f)=>{i=!1,l[d]=g2(mr(e,d),br(f),n.serverSyncTree_,a)}),i)Ii("update() called with empty data.  Don't do anything."),mh(0,r,"ok",void 0);else{const d=RD(n),f=function _K(n,e,t,r){!function Pq(n,e,t,r){(0,O.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=qN(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=tr.fromObject(t);return x_(n,new A_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,d);xD(n.eventQueue_,f),n.server_.merge(e.toString(),t,(y,I)=>{const D="ok"===y;D||is("update at "+e+" failed: "+y);const x=gh(n.serverSyncTree_,d,!D),L=x.length>0?k_(n,e):e;Lo(n.eventQueue_,L,x),mh(0,r,y,I)}),Ti(t,y=>{const I=wP(n,mr(e,y));k_(n,I)}),Lo(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function l4(n){n=(0,O.m9)(n);const e=new IP(()=>{}),t=new W0(e);return function GK(n,e,t){const r=function EK(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(y,I)=>{const D=As(y,t);r=r||fh(I,D)});let i=n.syncPointTree_.get(t);i?r=r||fh(i,Sn()):(i=new r2,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,l=a?new dh(r,!0,!1):null;return function sK(n){return mD(n.viewCache_)}(s2(i,e,_D(n.pendingWriteTree_,e._path),a?l.getNode():Xt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const a=br(i).withIndex(e._queryParams.getIndex());let l;if(rP(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())l=F0(n.serverSyncTree_,e._path,a);else{const d=U0(n.serverSyncTree_,e);l=c2(n.serverSyncTree_,e._path,a,d)}return Lo(n.eventQueue_,e._path,l),TD(n.serverSyncTree_,e,t,null,!0),a},i=>(R_(n,"get for query "+(0,O.Pz)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Tp(r,new Ra(n._repo,n._path),n._queryParams.getIndex()))}class W0{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new k2("value",this,new Tp(e.snapshotNode,new Ra(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new N2(this,e,t):null}matches(e){return e instanceof W0&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class LD{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new N2(this,e,t):null}createEvent(e,t){(0,O.hu)(null!=e.childName,"Child events should have a childName.");const r=Cp(new Ra(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new k2(e.type,this,new Tp(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof LD&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function q0(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const f=t,y=(I,D)=>{yP(n._repo,n,d),f(I,D)};y.userCallback=t.userCallback,y.context=t.context,t=y}const l=new IP(t,a||void 0),d="value"===e?new W0(l):new LD(e,l);return function YK(n,e,t){let r;r=".info"===sn(e._path)?rP(n.infoSyncTree_,e,t):rP(n.serverSyncTree_,e,t),b2(n.eventQueue_,e._path,r)}(n._repo,n,d),()=>yP(n._repo,n,d)}function CP(n,e,t,r){return q0(n,"value",e,t,r)}function F2(n,e,t,r){return q0(n,"child_added",e,t,r)}function U2(n,e,t,r){return q0(n,"child_changed",e,t,r)}function B2(n,e,t,r){return q0(n,"child_moved",e,t,r)}function V2(n,e,t,r){return q0(n,"child_removed",e,t,r)}function j2(n,e,t){let r=null;const i=t?new IP(t):null;"value"===e?r=new W0(i):e&&(r=new LD(e,i)),yP(n._repo,n,r)}class Au{}class $2 extends Au{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){wl("endAt",this._value,e._path,!0);const t=VN(e._queryParams,this._value,this._key);if(OD(t),_h(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new no(e._repo,e._path,t,e._orderByCalled)}}class d4 extends Au{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){wl("endBefore",this._value,e._path,!1);const t=function bq(n,e,t){let r,i;return n.index_===vl?("string"==typeof e&&(e=OV(e)),i=VN(n,e,t)):(r=null==t?xc:OV(t),i=VN(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(OD(t),_h(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new no(e._repo,e._path,t,e._orderByCalled)}}class H2 extends Au{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){wl("startAt",this._value,e._path,!0);const t=BN(e._queryParams,this._value,this._key);if(OD(t),_h(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new no(e._repo,e._path,t,e._orderByCalled)}}class p4 extends Au{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){wl("startAfter",this._value,e._path,!1);const t=function wq(n,e,t){let r;if(n.index_===vl)"string"==typeof e&&(e=PV(e)),r=BN(n,e,t);else{let i;i=null==t?yl:PV(t),r=BN(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(OD(t),_h(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new no(e._repo,e._path,t,e._orderByCalled)}}class m4 extends Au{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new no(e._repo,e._path,function yq(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class y4 extends Au{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new no(e._repo,e._path,function vq(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class w4 extends Au{constructor(e){super(),this._path=e}_apply(e){PD(e,"orderByChild");const t=new kn(this._path);if(on(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new ON(t),i=dD(e._queryParams,r);return _h(i),new no(e._repo,e._path,i,!0)}}class E4 extends Au{_apply(e){PD(e,"orderByKey");const t=dD(e._queryParams,vl);return _h(t),new no(e._repo,e._path,t,!0)}}class T4 extends Au{_apply(e){PD(e,"orderByPriority");const t=dD(e._queryParams,er);return _h(t),new no(e._repo,e._path,t,!0)}}class D4 extends Au{_apply(e){PD(e,"orderByValue");const t=dD(e._queryParams,LN);return _h(t),new no(e._repo,e._path,t,!0)}}class A4 extends Au{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(wl("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new $2(this._value,this._key)._apply(new H2(this._value,this._key)._apply(e))}}function Mu(n,...e){let t=(0,O.m9)(n);for(const r of e)t=r._apply(t);return t}(function lK(n){(0,O.hu)(!bD,"__referenceConstructor has already been defined"),bD=n})(Ra),function pK(n){(0,O.hu)(!ID,"__referenceConstructor has already been defined"),ID=n}(Ra);const DP={};function z2(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||_l("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ii("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let f,y,l=EP(a,i),d=l.repoInfo;typeof process<"u"&&process.env&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(f=!0,a=`http://${y}?ns=${d.namespace}`,l=EP(a,i),d=l.repoInfo):f=!l.repoInfo.secure;const I=i&&f?new C0(C0.OWNER):new I3(n.name,n.options,e);w2("Invalid Firebase Database URL",l),on(l.path)||_l("Database URL must point to the root of a Firebase Database (not including a child path).");const D=function N4(n,e,t,r){let i=DP[e.name];i||(i={},DP[e.name]=i);let a=i[n.toURLString()];return a&&_l("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new jK(n,false,t,r),i[n.toURLString()]=a,a}(d,n,I,new E3(n.name,t));return new O4(D,n)}class O4{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function $K(n,e,t){if(n.stats_=DN(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new hD(n.repoInfo_,(r,i,a,l)=>{C2(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>D2(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,O.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new vp(n.repoInfo_,e,(r,i,a,l)=>{C2(n,r,i,a,l)},r=>{D2(n,r)},r=>{!function HK(n,e){Ti(e,(t,r)=>{mP(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function D3(n,e){const t=n.toString();return CN[t]||(CN[t]=e()),CN[t]}(n.repoInfo_,()=>new Sq(n.stats_,n.server_)),n.infoData_=new Eq,n.infoSyncTree_=new l2({startListening:(r,i,a,l)=>{let d=[];const f=n.infoData_.getNode(r._path);return f.isEmpty()||(d=F0(n.infoSyncTree_,r._path,f),setTimeout(()=>{l("ok")},0)),d},stopListening:()=>{}}),mP(n,"connected",!1),n.serverSyncTree_=new l2({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(d,f)=>{const y=l(d,f);Lo(n.eventQueue_,r._path,y)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ra(this._repo,Sn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function k4(n,e){const t=DP[e];(!t||t[n.key]!==n)&&_l(`Database ${e}(${n.repoInfo_}) has already been deleted.`),A2(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&_l("Cannot call "+e+" on a deleted database.")}}function W2(){cV.IS_TRANSPORT_INITIALIZED&&is("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function L4(){W2(),lh.forceDisallow()}function F4(){W2(),E_.forceDisallow(),lh.forceAllow()}function j4(n,e){GB(n,e)}const H4={".sv":"timestamp"};class W4{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}vp.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},vp.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function $4(n){BB(_n.SDK_VERSION),(0,_n._registerComponent)(new Ws.wA("database",(e,{instanceIdentifier:t})=>z2(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,_n.registerVersion)(FB,"0.13.6",n),(0,_n.registerVersion)(FB,"0.13.6","esm2017")}();const Y4=new Ao.Yd("@firebase/database-compat"),q2=function(n){Y4.warn("FIREBASE WARNING: "+n)};class J4{constructor(e){this._delegate=e}cancel(e){(0,O.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,O.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,O.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,O.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,O.Dv)("OnDisconnect.set",1,2,arguments.length),(0,O.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,O.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,O.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,O.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,q2("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,O.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class e6{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,O.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class yh{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,O.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,O.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,O.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,O.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,O.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),G0("DataSnapshot.child","path",e,!1),new yh(this._database,this._delegate.child(e))}hasChild(e){return(0,O.Dv)("DataSnapshot.hasChild",1,1,arguments.length),G0("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,O.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,O.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,O.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new yh(this._database,t)))}hasChildren(){return(0,O.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,O.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,O.Dv)("DataSnapshot.ref",0,0,arguments.length),new Fo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Bi{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,O.Dv)("Query.on",2,4,arguments.length),(0,O.Wj)("Query.on","callback",t,!1);const l=Bi.getCancelAndContextArgs_("Query.on",r,i),d=(y,I)=>{t.call(l.context,new yh(this.database,y),I)};d.userCallback=t,d.context=l.context;const f=null===(a=l.cancel)||void 0===a?void 0:a.bind(l.context);switch(e){case"value":return CP(this._delegate,d,f),t;case"child_added":return F2(this._delegate,d,f),t;case"child_removed":return V2(this._delegate,d,f),t;case"child_changed":return U2(this._delegate,d,f),t;case"child_moved":return B2(this._delegate,d,f),t;default:throw new Error((0,O.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,O.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,O.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,O.Wj)("Query.off","callback",t,!0),(0,O.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,j2(this._delegate,e,i)}else j2(this._delegate,e)}get(){return l4(this._delegate).then(e=>new yh(this.database,e))}once(e,t,r,i){(0,O.Dv)("Query.once",1,4,arguments.length),(0,O.Wj)("Query.once","callback",t,!0);const a=Bi.getCancelAndContextArgs_("Query.once",r,i),l=new O.BH,d=(y,I)=>{const D=new yh(this.database,y);t&&t.call(a.context,D,I),l.resolve(D)};d.userCallback=t,d.context=a.context;const f=y=>{a.cancel&&a.cancel.call(a.context,y),l.reject(y)};switch(e){case"value":CP(this._delegate,d,f,{onlyOnce:!0});break;case"child_added":F2(this._delegate,d,f,{onlyOnce:!0});break;case"child_removed":V2(this._delegate,d,f,{onlyOnce:!0});break;case"child_changed":U2(this._delegate,d,f,{onlyOnce:!0});break;case"child_moved":B2(this._delegate,d,f,{onlyOnce:!0});break;default:throw new Error((0,O.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,O.Dv)("Query.limitToFirst",1,1,arguments.length),new Bi(this.database,Mu(this._delegate,function _4(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new m4(n)}(e)))}limitToLast(e){return(0,O.Dv)("Query.limitToLast",1,1,arguments.length),new Bi(this.database,Mu(this._delegate,function v4(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new y4(n)}(e)))}orderByChild(e){return(0,O.Dv)("Query.orderByChild",1,1,arguments.length),new Bi(this.database,Mu(this._delegate,function b4(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return G0("orderByChild","path",n,!1),new w4(n)}(e)))}orderByKey(){return(0,O.Dv)("Query.orderByKey",0,0,arguments.length),new Bi(this.database,Mu(this._delegate,function I4(){return new E4}()))}orderByPriority(){return(0,O.Dv)("Query.orderByPriority",0,0,arguments.length),new Bi(this.database,Mu(this._delegate,function C4(){return new T4}()))}orderByValue(){return(0,O.Dv)("Query.orderByValue",0,0,arguments.length),new Bi(this.database,Mu(this._delegate,function S4(){return new D4}()))}startAt(e=null,t){return(0,O.Dv)("Query.startAt",0,2,arguments.length),new Bi(this.database,Mu(this._delegate,function f4(n=null,e){return H0("startAt","key",e,!0),new H2(n,e)}(e,t)))}startAfter(e=null,t){return(0,O.Dv)("Query.startAfter",0,2,arguments.length),new Bi(this.database,Mu(this._delegate,function g4(n,e){return H0("startAfter","key",e,!0),new p4(n,e)}(e,t)))}endAt(e=null,t){return(0,O.Dv)("Query.endAt",0,2,arguments.length),new Bi(this.database,Mu(this._delegate,function c4(n,e){return H0("endAt","key",e,!0),new $2(n,e)}(e,t)))}endBefore(e=null,t){return(0,O.Dv)("Query.endBefore",0,2,arguments.length),new Bi(this.database,Mu(this._delegate,function h4(n,e){return H0("endBefore","key",e,!0),new d4(n,e)}(e,t)))}equalTo(e,t){return(0,O.Dv)("Query.equalTo",1,2,arguments.length),new Bi(this.database,Mu(this._delegate,function M4(n,e){return H0("equalTo","key",e,!0),new A4(n,e)}(e,t)))}toString(){return(0,O.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,O.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,O.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Bi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,O.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,O.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,O.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Fo(this.database,new Ra(this._delegate._repo,this._delegate._path))}}class Fo extends Bi{constructor(e,t){super(e,new no(t._repo,t._path,new cD,!1)),this.database=e,this._delegate=t}getKey(){return(0,O.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,O.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Fo(this.database,Cp(this._delegate,e))}getParent(){(0,O.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Fo(this.database,e):null}getRoot(){return(0,O.Dv)("Reference.root",0,0,arguments.length),new Fo(this.database,this._delegate.root)}set(e,t){(0,O.Dv)("Reference.set",1,2,arguments.length),(0,O.Wj)("Reference.set","onComplete",t,!0);const r=TP(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,O.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,q2("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}xa("Reference.update",this._delegate._path),(0,O.Wj)("Reference.update","onComplete",t,!0);const r=u4(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,O.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,O.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function a4(n,e,t){if(xa("setWithPriority",n._path),wl("setWithPriority",e,n._path,!1),gP("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new O.BH;return _P(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,O.Dv)("Reference.remove",0,1,arguments.length),(0,O.Wj)("Reference.remove","onComplete",e,!0);const t=function s4(n){return xa("remove",n._path),TP(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,O.Dv)("Reference.transaction",1,3,arguments.length),(0,O.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,O.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,O.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function q4(n,e,t){var r;if(n=(0,O.m9)(n),xa("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,a=new O.BH,d=CP(n,()=>{});return function XK(n,e,t,r,i,a){R_(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:jB(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},d=vP(n,e,void 0);l.currentInputSnapshot=d;const f=l.update(d.val());if(void 0===f)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{$0("transaction failed: Data returned ",f,l.path),l.status=0;const y=SD(n.transactionQueueTree_,e),I=Ip(y)||[];let D;I.push(l),hP(y,I),"object"==typeof f&&null!==f&&(0,O.r3)(f,".priority")?(D=(0,O.DV)(f,".priority"),(0,O.hu)(j0(D),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):D=(CD(n.serverSyncTree_,e)||Xt.EMPTY_NODE).getPriority().val();const x=z0(n),L=br(f,D),V=lP(L,d,x);l.currentOutputSnapshotRaw=L,l.currentOutputSnapshotResolved=V,l.currentWriteId=RD(n);const ee=nP(n.serverSyncTree_,e,V,l.currentWriteId,l.applyLocally);Lo(n.eventQueue_,e,ee),kD(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(f,y,I)=>{let D=null;f?a.reject(f):(D=new Tp(I,new Ra(n._repo,n._path),er),a.resolve(new W4(y,D)))},d,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new e6(a.committed,new yh(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,O.Dv)("Reference.setPriority",1,2,arguments.length),(0,O.Wj)("Reference.setPriority","onComplete",t,!0);const r=function o4(n,e){n=(0,O.m9)(n),xa("setPriority",n._path),gP("setPriority",e,!1);const t=new O.BH;return _P(n._repo,mr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,O.Dv)("Reference.push",0,2,arguments.length),(0,O.Wj)("Reference.push","onComplete",t,!0);const r=function i4(n,e){n=(0,O.m9)(n),xa("push",n._path),wl("push",e,n._path,!0);const t=T2(n._repo),r=pq(t),i=Cp(n,r),a=Cp(n,r);let l;return l=null!=e?TP(a,e).then(()=>a):Promise.resolve(a),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new Fo(this.database,l));t&&i.then(()=>t(null),l=>t(l));const a=new Fo(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return xa("Reference.onDisconnect",this._delegate._path),new J4(new P2(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class K0{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:L4,forceLongPolling:F4}}useEmulator(e,t,r={}){!function U4(n,e,t,r={}){(n=(0,O.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&_l("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&_l('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new C0(C0.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,O.Sg)(r.mockUserToken,n.app.options.projectId);a=new C0(l)}!function R4(n,e,t,r){n.repoInfo_=new IN(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,O.Dv)("database.ref",0,1,arguments.length),e instanceof Fo){const t=L2(this._delegate,e.toString());return new Fo(this,t)}{const t=O2(this._delegate,e);return new Fo(this,t)}}refFromURL(e){(0,O.Dv)("database.refFromURL",1,1,arguments.length);const r=L2(this._delegate,e);return new Fo(this,r)}goOffline(){return(0,O.Dv)("database.goOffline",0,0,arguments.length),function B4(n){(n=(0,O.m9)(n))._checkNotDeleted("goOffline"),A2(n._repo)}(this._delegate)}goOnline(){return(0,O.Dv)("database.goOnline",0,0,arguments.length),function V4(n){(n=(0,O.m9)(n))._checkNotDeleted("goOnline"),function QK(n){n.persistentConnection_&&n.persistentConnection_.resume(I2)}(n._repo)}(this._delegate)}}K0.ServerValue={TIMESTAMP:function G4(){return H4}(),increment:n=>function z4(n){return{".sv":{increment:n}}}(n)};var n6=Object.freeze({__proto__:null,initStandalone:function t6({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){BB(t);const l=new Ws.zt("auth-internal",new Ws.H0("database-standalone"));return l.setComponent(new Ws.wA("auth-internal",()=>r,"PRIVATE")),{instance:new K0(z2(n,l,void 0,e,a),n),namespace:i}}});const r6=K0.ServerValue;function K2(n){return null==n}function Z2(n){return"function"==typeof n.set}function Y2(n,e){return Z2(e)?e:n.ref(e)}function Q2(n,e){if(function s6(n){return"string"==typeof n}(n))return e.stringCase();if(Z2(n))return e.firebaseCase();if(function o6(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Z0(n,e,t="on",r=Rb.z){return new ws.y(i=>{let a=null;return a=n[t](e,(l,d)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:d})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,At.U)(i=>{const{snapshot:a,prevKey:l}=i;let d=null;return a.exists()&&(d=a.key),{type:e,payload:a,prevKey:l,key:d}}),(0,Mg.B)())}function X2(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function l6(n,e){const{payload:t,prevKey:r,key:i}=e,a=X2(n,i),l=function u6(n,e){if(K2(e))return 0;{const t=X2(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let d=null;e.payload.forEach(f=>{const y={payload:f,type:"value",prevKey:d,key:f.key};return d=f.key,n=[...n,y],!1})}return n;case"child_added":if(a>-1){const d=n[a-1];(d&&d.key||null)!==r&&(n=n.filter(f=>f.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(d=>d.payload.key!==t.key);case"child_changed":return n.map(d=>d.payload.key===i?e:d);case"child_moved":if(a>-1){const d=n.splice(a,1)[0];return(n=n.slice()).splice(l,0,d),n}return n;default:return n}}function J2(n){return(K2(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function ej(n,e,t){return function a6(n,e,t){return Z0(n,"value","once",t).pipe(lr(r=>{const i=[ht(r)];return e.forEach(a=>i.push(Z0(n,a,"on",t))),(0,kd.T)(...i).pipe(sl(l6,[]))}),rg())}(n,e=J2(e),t)}function tj(n,e,t){const r=(e=J2(e)).map(i=>Z0(n,i,"on",t));return(0,kd.T)(...r)}function nj(n,e){return function(r,i){return Q2(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function f6(n){return function(t){return t?Q2(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function rj(n,e){return function(){return Z0(n,"value","on",e)}}!function i6(n){n.INTERNAL.registerComponent(new Ws.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new K0(i,r)},"PUBLIC").setServiceProps({Reference:Fo,Query:Bi,Database:K0,DataSnapshot:yh,enableLogging:j4,INTERNAL:n6,ServerValue:r6}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.6")}(Zg.Z);const m6=new m.OlP("angularfire2.realtimeDatabaseURL"),_6=new m.OlP("angularfire2.database.use-emulator");let y6=(()=>{class n{constructor(t,r,i,a,l,d,f,y,I,D,x,L,V,ee,ce){this.schedulers=d;const Ge=f,Ke=(0,Ur.on)(t,l,r);y&&Mv(Ke,l,I,x,L,V,D,ee),this.database=(0,Ur.cc)(`${Ke.name}.database.${i}`,"AngularFireDatabase",Ke.name,()=>{const tt=l.runOutsideAngular(()=>Ke.database(i||void 0));return Ge&&tt.useEmulator(...Ge),tt},[Ge])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>Y2(this.database,t));let a=i;return r&&(a=r(i)),function p6(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:nj(r,"update"),set:nj(r,"set"),push:i=>r.push(i),remove:f6(r),snapshotChanges:i=>ej(n,i,t).pipe(mn.iC),stateChanges:i=>tj(n,i,t).pipe(mn.iC),auditTrail:i=>function c6(n,e,t){return function h6(n,e,t){return function d6(n,e){return Z0(n,"value","on",e).pipe((0,At.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function c3(...n){const e=(0,Ki.jO)(n);return(0,qr.e)((t,r)=>{const i=n.length,a=new Array(i);let l=n.map(()=>!1),d=!1;for(let f=0;f<i;f++)(0,hd.Xf)(n[f]).subscribe((0,Xn.x)(r,y=>{a[f]=y,!d&&!l[f]&&(l[f]=!0,(d=l.every(Zl.y))&&(l=null))},sy.Z));t.subscribe((0,Xn.x)(r,f=>{if(d){const y=[f,...a];r.next(e?e(...y):y)}}))})}(e),(0,At.U)(([i,a])=>{const l=i.lastKeyToLoad,d=a.map(f=>f.key);return{actions:a,lastKeyToLoad:l,loadedKeys:d}}),function d3(n){return(0,qr.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,Xn.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,At.U)(i=>i.actions))}(n,tj(n,e).pipe(sl((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(mn.iC),valueChanges:(i,a)=>ej(n,i,t).pipe((0,At.U)(d=>d.map(f=>a&&a.idField?Object.assign(Object.assign({},f.payload.val()),{[a.idField]:f.key}):f.payload.val())),mn.iC)}}(a,this)}object(t){return function g6(n,e){return{query:n,snapshotChanges:()=>rj(n,e.schedulers.outsideAngular)().pipe(mn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>rj(n,e.schedulers.outsideAngular)().pipe(mn.iC,(0,At.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Y2(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Ur.Dh),m.LFG(Ur.xv,8),m.LFG(m6,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(mn.HU),m.LFG(_6,8),m.LFG(mf,8),m.LFG(qg,8),m.LFG(Kg,8),m.LFG(Sv,8),m.LFG(gc,8),m.LFG(mc,8),m.LFG(Av,8),m.LFG(Bn,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),v6=(()=>{class n{constructor(){pc.Z.registerVersion("angularfire",mn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[y6]}),n})();function ij(n){return new ws.y(e=>{(0,hd.Xf)(n()).subscribe(e)})}var w6=U(9635);function Y0(n,e){const t=(0,uv.m)(n)?n:()=>n,r=i=>i.error(t());return new ws.y(e?i=>e.schedule(r,0,i):r)}var sj=U(727);function SP(){return(0,qr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Xn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class oj extends ws.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,qr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new sj.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Xn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=sj.w0.EMPTY)}return e}refCount(){return SP()(this)}}var Ms=U(5577);function Dp(n,e){return(0,uv.m)(e)?(0,Ms.z)(n,e,1):(0,Ms.z)(n,1)}var ss=U(8505);function vh(n){return(0,qr.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,Xn.x)(t,void 0,void 0,l=>{a=(0,hd.Xf)(n(l,vh(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function AP(n){return n<=0?()=>Xl.E:(0,qr.e)((e,t)=>{let r=[];e.subscribe((0,Xn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function aj(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Zi((i,a)=>n(i,a,r)):Zl.y,AP(1),t?lf(e):ov(()=>new Nd))}function MP(n){return(0,qr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const an="primary",Q0=Symbol("RouteTitle");class I6{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function N_(n){return new I6(n)}function T6(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],d=n[a];if(l.startsWith(":"))i[l.substring(1)]=d;else if(l!==d.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function bl(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!uj(n[i],e[i]))return!1;return!0}function uj(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function lj(n){return Array.prototype.concat.apply([],n)}function cj(n){return n.length>0?n[n.length-1]:null}function Vi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function wh(n){return(0,m.CqO)(n)?n:(0,m.QGY)(n)?(0,gn.D)(Promise.resolve(n)):ht(n)}const S6={exact:function fj(n,e,t){if(!Ap(n.segments,e.segments)||!FD(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!fj(n.children[r],e.children[r],t))return!1;return!0},subset:pj},dj={exact:function A6(n,e){return bl(n,e)},subset:function M6(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>uj(n[t],e[t]))},ignored:()=>!0};function hj(n,e,t){return S6[t.paths](n.root,e.root,t.matrixParams)&&dj[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function pj(n,e,t){return gj(n,e,e.segments,t)}function gj(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Ap(i,t)||e.hasChildren()||!FD(i,t,r))}if(n.segments.length===t.length){if(!Ap(n.segments,t)||!FD(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!pj(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(Ap(n.segments,i)&&FD(n.segments,i,r)&&n.children[an])&&gj(n.children[an],e,a,r)}}function FD(n,e,t){return e.every((r,i)=>dj[t](n[i].parameters,r.parameters))}class Sp{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=N_(this.queryParams)),this._queryParamMap}toString(){return k6.serialize(this)}}class hn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Vi(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return UD(this)}}class X0{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=N_(this.parameters)),this._parameterMap}toString(){return vj(this)}}function Ap(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let mj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return new RP},providedIn:"root"}),n})();class RP{parse(e){const t=new j6(e);return new Sp(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${J0(e.root,!0)}`,r=function O6(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${BD(t)}=${BD(i)}`).join("&"):`${BD(t)}=${BD(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function N6(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${i}`}}const k6=new RP;function UD(n){return n.segments.map(e=>vj(e)).join("/")}function J0(n,e){if(!n.hasChildren())return UD(n);if(e){const t=n.children[an]?J0(n.children[an],!1):"",r=[];return Vi(n.children,(i,a)=>{a!==an&&r.push(`${a}:${J0(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function R6(n,e){let t=[];return Vi(n.children,(r,i)=>{i===an&&(t=t.concat(e(r,i)))}),Vi(n.children,(r,i)=>{i!==an&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===an?[J0(n.children[an],!1)]:[`${i}:${J0(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[an]?`${UD(n)}/${t[0]}`:`${UD(n)}/(${t.join("//")})`}}function _j(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function BD(n){return _j(n).replace(/%3B/gi,";")}function kP(n){return _j(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function VD(n){return decodeURIComponent(n)}function yj(n){return VD(n.replace(/\+/g,"%20"))}function vj(n){return`${kP(n.path)}${function P6(n){return Object.keys(n).map(e=>`;${kP(e)}=${kP(n[e])}`).join("")}(n.parameters)}`}const L6=/^[^\/()?;=#]+/;function jD(n){const e=n.match(L6);return e?e[0]:""}const F6=/^[^=?&#]+/,B6=/^[^&#]+/;class j6{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new hn([],{}):new hn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[an]=new hn(e,t)),r}parseSegment(){const e=jD(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new m.vHH(4009,!1);return this.capture(e),new X0(VD(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=jD(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=jD(this.remaining);i&&(r=i,this.capture(r))}e[VD(t)]=VD(r)}parseQueryParam(e){const t=function U6(n){const e=n.match(F6);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function V6(n){const e=n.match(B6);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=yj(t),a=yj(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=jD(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new m.vHH(4010,!1);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=an);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[an]:new hn([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new m.vHH(4011,!1)}}function NP(n){return n.segments.length>0?new hn([],{[an]:n}):n}function $D(n){const e={};for(const r of Object.keys(n.children)){const a=$D(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function $6(n){if(1===n.numberOfChildren&&n.children[an]){const e=n.children[an];return new hn(n.segments.concat(e.segments),e.children)}return n}(new hn(n.segments,e))}function Mp(n){return n instanceof Sp}function z6(n,e,t,r,i){if(0===t.length)return P_(e.root,e.root,e.root,r,i);const a=function Ej(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new bj(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const d={};return Vi(a.outlets,(f,y)=>{d[y]="string"==typeof f?f.split("/"):f}),[...i,{outlets:d}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((d,f)=>{0==f&&"."===d||(0==f&&""===d?t=!0:".."===d?e++:""!=d&&i.push(d))}),i):[...i,a]},[]);return new bj(t,e,r)}(t);return a.toRoot()?P_(e.root,e.root,new hn([],{}),r,i):function l(f){const y=function q6(n,e,t,r){if(n.isAbsolute)return new O_(e.root,!0,0);if(-1===r)return new O_(t,t===e.root,0);return function Ij(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new m.vHH(4005,!1);i=r.segments.length}return new O_(r,!1,i-a)}(t,r+(eb(n.commands[0])?0:1),n.numberOfDoubleDots)}(a,e,n.snapshot?._urlSegment,f),I=y.processChildren?nb(y.segmentGroup,y.index,a.commands):OP(y.segmentGroup,y.index,a.commands);return P_(e.root,y.segmentGroup,I,r,i)}(n.snapshot?._lastPathIndex)}function eb(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function tb(n){return"object"==typeof n&&null!=n&&n.outlets}function P_(n,e,t,r,i){let l,a={};r&&Vi(r,(f,y)=>{a[y]=Array.isArray(f)?f.map(I=>`${I}`):`${f}`}),l=n===e?t:wj(n,e,t);const d=NP($D(l));return new Sp(d,a,i)}function wj(n,e,t){const r={};return Vi(n.children,(i,a)=>{r[a]=i===e?t:wj(i,e,t)}),new hn(n.segments,r)}class bj{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&eb(r[0]))throw new m.vHH(4003,!1);const i=r.find(tb);if(i&&i!==cj(r))throw new m.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class O_{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function OP(n,e,t){if(n||(n=new hn([],{})),0===n.segments.length&&n.hasChildren())return nb(n,e,t);const r=function Z6(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],d=t[r];if(tb(d))break;const f=`${d}`,y=r<t.length-1?t[r+1]:null;if(i>0&&void 0===f)break;if(f&&y&&"object"==typeof y&&void 0===y.outlets){if(!Cj(f,y,l))return a;r+=2}else{if(!Cj(f,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new hn(n.segments.slice(0,r.pathIndex),{});return a.children[an]=new hn(n.segments.slice(r.pathIndex),n.children),nb(a,0,i)}return r.match&&0===i.length?new hn(n.segments,{}):r.match&&!n.hasChildren()?LP(n,e,t):r.match?nb(n,0,i):LP(n,e,t)}function nb(n,e,t){if(0===t.length)return new hn(n.segments,{});{const r=function K6(n){return tb(n[0])?n[0].outlets:{[an]:n}}(t),i={};return Vi(r,(a,l)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[l]=OP(n.children[l],e,a))}),Vi(n.children,(a,l)=>{void 0===r[l]&&(i[l]=a)}),new hn(n.segments,i)}}function LP(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(tb(a)){const f=Y6(a.outlets);return new hn(r,f)}if(0===i&&eb(t[0])){r.push(new X0(n.segments[e].path,Tj(t[0]))),i++;continue}const l=tb(a)?a.outlets[an]:`${a}`,d=i<t.length-1?t[i+1]:null;l&&d&&eb(d)?(r.push(new X0(l,Tj(d))),i+=2):(r.push(new X0(l,{})),i++)}return new hn(r,{})}function Y6(n){const e={};return Vi(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=LP(new hn([],{}),0,t))}),e}function Tj(n){const e={};return Vi(n,(t,r)=>e[r]=`${t}`),e}function Cj(n,e,t){return n==t.path&&bl(e,t.parameters)}class kc{constructor(e,t){this.id=e,this.url=t}}class FP extends kc{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class xp extends kc{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class HD extends kc{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Dj extends kc{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Q6 extends kc{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class X6 extends kc{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class J6 extends kc{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class e8 extends kc{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class t8 extends kc{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class n8{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class r8{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class i8{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class s8{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class o8{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class a8{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Sj{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Aj{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=UP(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=UP(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=BP(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return BP(e,this._root).map(t=>t.value)}}function UP(n,e){if(n===e.value)return e;for(const t of e.children){const r=UP(n,t);if(r)return r}return null}function BP(n,e){if(n===e.value)return[e];for(const t of e.children){const r=BP(n,t);if(r.length)return r.unshift(e),r}return[]}class Nc{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function L_(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Mj extends Aj{constructor(e,t){super(e),this.snapshot=t,VP(this,e)}toString(){return this.snapshot.toString()}}function xj(n,e){const t=function l8(n,e){const l=new GD([],{},{},"",{},an,e,null,n.root,-1,{});return new kj("",new Nc(l,[]))}(n,e),r=new Wr([new X0("",{})]),i=new Wr({}),a=new Wr({}),l=new Wr({}),d=new Wr(""),f=new Rp(r,i,l,d,a,an,e,t.root);return f.snapshot=t.root,new Mj(new Nc(f,[]),t)}class Rp{constructor(e,t,r,i,a,l,d,f){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=d,this.title=this.data?.pipe((0,At.U)(y=>y[Q0]))??ht(void 0),this._futureSnapshot=f}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,At.U)(e=>N_(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,At.U)(e=>N_(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Rj(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function c8(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class GD{constructor(e,t,r,i,a,l,d,f,y,I,D,x){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=d,this.title=this.data?.[Q0],this.routeConfig=f,this._urlSegment=y,this._lastPathIndex=I,this._correctedLastPathIndex=x??I,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=N_(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=N_(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class kj extends Aj{constructor(e,t){super(t),this.url=e,VP(this,t)}toString(){return Nj(this._root)}}function VP(n,e){e.value._routerState=n,e.children.forEach(t=>VP(n,t))}function Nj(n){const e=n.children.length>0?` { ${n.children.map(Nj).join(", ")} } `:"";return`${n.value}${e}`}function jP(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,bl(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),bl(e.params,t.params)||n.params.next(t.params),function C6(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!bl(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),bl(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function $P(n,e){const t=bl(n.params,e.params)&&function x6(n,e){return Ap(n,e)&&n.every((t,r)=>bl(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||$P(n.parent,e.parent))}function rb(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function h8(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return rb(n,r,i);return rb(n,r)})}(n,e,t);return new Nc(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(d=>rb(n,d)),l}}const r=function f8(n){return new Rp(new Wr(n.url),new Wr(n.params),new Wr(n.queryParams),new Wr(n.fragment),new Wr(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>rb(n,a));return new Nc(r,i)}}const HP="ngNavigationCancelingError";function Pj(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Mp(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Oj(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function Oj(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[HP]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Lj(n){return Fj(n)&&Mp(n.url)}function Fj(n){return n&&n[HP]}class p8{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ib,this.attachRef=null}}let ib=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new p8,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const zD=!1;let GP=(()=>{class n{constructor(t,r,i,a,l){this.parentContexts=t,this.location=r,this.changeDetector=a,this.environmentInjector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new m.vpe,this.deactivateEvents=new m.vpe,this.attachEvents=new m.vpe,this.detachEvents=new m.vpe,this.name=i||an,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new m.vHH(4012,zD);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new m.vHH(4012,zD);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new m.vHH(4012,zD);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new m.vHH(4013,zD);this._activatedRoute=t;const i=this.location,l=t._futureSnapshot.component,d=this.parentContexts.getOrCreateContext(this.name).children,f=new g8(t,d,i.injector);if(r&&function m8(n){return!!n.resolveComponentFactory}(r)){const y=r.resolveComponentFactory(l);this.activated=i.createComponent(y,i.length,f)}else this.activated=i.createComponent(l,{index:i.length,injector:f,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(ib),m.Y36(m.s_b),m.$8M("name"),m.Y36(m.sBO),m.Y36(m.lqb))},n.\u0275dir=m.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class g8{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Rp?this.route:e===ib?this.childContexts:this.parent.get(e,t)}}let zP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[m.jDz],decls:1,vars:0,template:function(t,r){1&t&&m._UZ(0,"router-outlet")},dependencies:[GP],encapsulation:2}),n})();function Uj(n,e){return n.providers&&!n._injector&&(n._injector=(0,m.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function qP(n){const e=n.children&&n.children.map(qP),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==an&&(t.component=zP),t}function ka(n){return n.outlet||an}function Bj(n,e){const t=n.filter(r=>ka(r)===e);return t.push(...n.filter(r=>ka(r)!==e)),t}function sb(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class b8{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),jP(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=L_(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),Vi(i,(a,l)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=L_(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),d=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:d})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=L_(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=L_(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new a8(a.value.snapshot))}),e.children.length&&this.forwardEvent(new s8(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(jP(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const d=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(d.contexts),l.attachRef=d.componentRef,l.route=d.route.value,l.outlet&&l.outlet.attach(d.componentRef,d.route.value),jP(d.route.value),this.activateChildRoutes(e,null,l.children)}else{const d=sb(i.snapshot),f=d?.get(m._Vd)??null;l.attachRef=null,l.route=i,l.resolver=f,l.injector=d,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class Vj{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class WD{constructor(e,t){this.component=e,this.route=t}}function E8(n,e,t){const r=n._root;return ob(r,e?e._root:null,t,[r.value])}function F_(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,m.Z0I)(n)?e.get(n):n:r}function ob(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=L_(e);return n.children.forEach(l=>{(function T8(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,d=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const f=function C8(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ap(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ap(n.url,e.url)||!bl(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$P(n,e)||!bl(n.queryParams,e.queryParams);default:return!$P(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);f?i.canActivateChecks.push(new Vj(r)):(a.data=l.data,a._resolvedData=l._resolvedData),ob(n,e,a.component?d?d.children:null:t,r,i),f&&d&&d.outlet&&d.outlet.isActivated&&i.canDeactivateChecks.push(new WD(d.outlet.component,l))}else l&&ab(e,d,i),i.canActivateChecks.push(new Vj(r)),ob(n,null,a.component?d?d.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),Vi(a,(l,d)=>ab(l,t.getContext(d),i)),i}function ab(n,e,t){const r=L_(n),i=n.value;Vi(r,(a,l)=>{ab(a,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new WD(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function ub(n){return"function"==typeof n}function KP(n){return n instanceof Nd||"EmptyError"===n?.name}const qD=Symbol("INITIAL_VALUE");function U_(){return lr(n=>ly(n.map(e=>e.pipe(Jl(1),hu(qD)))).pipe((0,At.U)(e=>{for(const t of e)if(!0!==t){if(t===qD)return qD;if(!1===t||t instanceof Sp)return t}return!0}),Zi(e=>e!==qD),Jl(1)))}function jj(n){return(0,w6.z)((0,ss.b)(e=>{if(Mp(e))throw Pj(0,e)}),(0,At.U)(e=>!0===e))}const ZP={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function $j(n,e,t,r,i){const a=YP(n,e,t);return a.matched?function $8(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?ht(i.map(l=>{const d=F_(l,n);return wh(function R8(n){return n&&ub(n.canMatch)}(d)?d.canMatch(e,t):n.runInContext(()=>d(e,t)))})).pipe(U_(),jj()):ht(!0)}(r=Uj(e,r),e,t).pipe((0,At.U)(l=>!0===l?a:{...ZP})):ht(a)}function YP(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...ZP}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||T6)(t,n,e);if(!i)return{...ZP};const a={};Vi(i.posParams,(d,f)=>{a[f]=d.path});const l=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function KD(n,e,t,r,i="corrected"){if(t.length>0&&function z8(n,e,t){return t.some(r=>ZD(n,e,r)&&ka(r)!==an)}(n,t,r)){const l=new hn(e,function G8(n,e,t,r){const i={};i[an]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&ka(a)!==an){const l=new hn([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[ka(a)]=l}return i}(n,e,r,new hn(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function W8(n,e,t){return t.some(r=>ZD(n,e,r))}(n,t,r)){const l=new hn(n.segments,function H8(n,e,t,r,i,a){const l={};for(const d of r)if(ZD(n,t,d)&&!i[ka(d)]){const f=new hn([],{});f._sourceSegment=n,f._segmentIndexShift="legacy"===a?n.segments.length:e.length,l[ka(d)]=f}return{...i,...l}}(n,e,t,r,n.children,i));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const a=new hn(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function ZD(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Hj(n,e,t,r){return!!(ka(n)===r||r!==an&&ZD(e,t,n))&&("**"===n.path||YP(e,n,t).matched)}function Gj(n,e,t){return 0===e.length&&!n.children[t]}const YD=!1;class QD{constructor(e){this.segmentGroup=e||null}}class zj{constructor(e){this.urlTree=e}}function lb(n){return Y0(new QD(n))}function Wj(n){return Y0(new zj(n))}class Y8{constructor(e,t,r,i,a){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0}apply(){const e=KD(this.urlTree.root,[],[],this.config).segmentGroup,t=new hn(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,an).pipe((0,At.U)(a=>this.createUrlTree($D(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(vh(a=>{if(a instanceof zj)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof QD?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,an).pipe((0,At.U)(i=>this.createUrlTree($D(i),e.queryParams,e.fragment))).pipe(vh(i=>{throw i instanceof QD?this.noMatchError(i):i}))}noMatchError(e){return new m.vHH(4002,YD)}createUrlTree(e,t,r){const i=NP(e);return new Sp(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,At.U)(a=>new hn([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,gn.D)(i).pipe(Dp(a=>{const l=r.children[a],d=Bj(t,a);return this.expandSegmentGroup(e,d,l,a).pipe((0,At.U)(f=>({segment:f,outlet:a})))}),sl((a,l)=>(a[l.outlet]=l.segment,a),{}),aj())}expandSegment(e,t,r,i,a,l){return(0,gn.D)(r).pipe(Dp(d=>this.expandSegmentAgainstRoute(e,t,r,d,i,a,l).pipe(vh(y=>{if(y instanceof QD)return ht(null);throw y}))),Ea(d=>!!d),vh((d,f)=>{if(KP(d))return Gj(t,i,a)?ht(new hn([],{})):lb(t);throw d}))}expandSegmentAgainstRoute(e,t,r,i,a,l,d){return Hj(i,t,a,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,l):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l):lb(t):lb(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Wj(a):this.lineralizeSegments(r,a).pipe((0,Ms.z)(l=>{const d=new hn(l,{});return this.expandSegment(e,d,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:d,consumedSegments:f,remainingSegments:y,positionalParamSegments:I}=YP(t,i,a);if(!d)return lb(t);const D=this.applyRedirectCommands(f,i.redirectTo,I);return i.redirectTo.startsWith("/")?Wj(D):this.lineralizeSegments(i,D).pipe((0,Ms.z)(x=>this.expandSegment(e,t,r,x.concat(y),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){return"**"===r.path?(e=Uj(r,e),r.loadChildren?(r._loadedRoutes?ht({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,At.U)(d=>(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,new hn(i,{})))):ht(new hn(i,{}))):$j(t,r,i,e).pipe(lr(({matched:l,consumedSegments:d,remainingSegments:f})=>l?this.getChildConfig(e=r._injector??e,r,i).pipe((0,Ms.z)(I=>{const D=I.injector??e,x=I.routes,{segmentGroup:L,slicedSegments:V}=KD(t,d,f,x),ee=new hn(L.segments,L.children);if(0===V.length&&ee.hasChildren())return this.expandChildren(D,x,ee).pipe((0,At.U)(tt=>new hn(d,tt)));if(0===x.length&&0===V.length)return ht(new hn(d,{}));const ce=ka(r)===a;return this.expandSegment(D,ee,x,V,ce?an:a,!0).pipe((0,At.U)(Ke=>new hn(d.concat(Ke.segments),Ke.children)))})):lb(t)))}getChildConfig(e,t,r){return t.children?ht({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?ht({routes:t._loadedRoutes,injector:t._loadedInjector}):function j8(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?ht(!0):ht(i.map(l=>{const d=F_(l,n);return wh(function S8(n){return n&&ub(n.canLoad)}(d)?d.canLoad(e,t):n.runInContext(()=>d(e,t)))})).pipe(U_(),jj())}(e,t,r).pipe((0,Ms.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,ss.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function K8(n){return Y0(Oj(YD,3))}())):ht({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ht(r);if(i.numberOfChildren>1||!i.children[an])return Y0(new m.vHH(4e3,YD));i=i.children[an]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new Sp(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Vi(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const d=i.substring(1);r[a]=t[d]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return Vi(t.children,(d,f)=>{l[f]=this.createSegmentGroup(e,d,r,i)}),new hn(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new m.vHH(4001,YD);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class X8{}class t5{constructor(e,t,r,i,a,l,d,f){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=a,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=d,this.urlSerializer=f}recognize(){const e=KD(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,an).pipe((0,At.U)(t=>{if(null===t)return null;const r=new GD([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},an,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Nc(r,t),a=new kj(this.url,i);return this.inheritParamsAndData(a._root),a}))}inheritParamsAndData(e){const t=e.value,r=Rj(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,gn.D)(Object.keys(r.children)).pipe(Dp(i=>{const a=r.children[i],l=Bj(t,i);return this.processSegmentGroup(e,l,a,i)}),sl((i,a)=>i&&a?(i.push(...a),i):null),function b6(n,e=!1){return(0,qr.e)((t,r)=>{let i=0;t.subscribe((0,Xn.x)(r,a=>{const l=n(a,i++);(l||e)&&r.next(a),!l&&r.complete()}))})}(i=>null!==i),lf(null),aj(),(0,At.U)(i=>{if(null===i)return null;const a=qj(i);return function n5(n){n.sort((e,t)=>e.value.outlet===an?-1:t.value.outlet===an?1:e.value.outlet.localeCompare(t.value.outlet))}(a),a}))}processSegment(e,t,r,i,a){return(0,gn.D)(t).pipe(Dp(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,i,a)),Ea(l=>!!l),vh(l=>{if(KP(l))return Gj(r,i,a)?ht([]):ht(null);throw l}))}processSegmentAgainstRoute(e,t,r,i,a){if(t.redirectTo||!Hj(t,r,i,a))return ht(null);let l;if("**"===t.path){const d=i.length>0?cj(i).parameters:{},f=Zj(r)+i.length;l=ht({snapshot:new GD(i,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Qj(t),ka(t),t.component??t._loadedComponent??null,t,Kj(r),f,Xj(t),f),consumedSegments:[],remainingSegments:[]})}else l=$j(r,t,i,e).pipe((0,At.U)(({matched:d,consumedSegments:f,remainingSegments:y,parameters:I})=>{if(!d)return null;const D=Zj(r)+f.length;return{snapshot:new GD(f,I,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Qj(t),ka(t),t.component??t._loadedComponent??null,t,Kj(r),D,Xj(t),D),consumedSegments:f,remainingSegments:y}}));return l.pipe(lr(d=>{if(null===d)return ht(null);const{snapshot:f,consumedSegments:y,remainingSegments:I}=d;e=t._injector??e;const D=t._loadedInjector??e,x=function r5(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:L,slicedSegments:V}=KD(r,y,I,x.filter(ce=>void 0===ce.redirectTo),this.relativeLinkResolution);if(0===V.length&&L.hasChildren())return this.processChildren(D,x,L).pipe((0,At.U)(ce=>null===ce?null:[new Nc(f,ce)]));if(0===x.length&&0===V.length)return ht([new Nc(f,[])]);const ee=ka(t)===a;return this.processSegment(D,x,L,V,ee?an:a).pipe((0,At.U)(ce=>null===ce?null:[new Nc(f,ce)]))}))}}function i5(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function qj(n){const e=[],t=new Set;for(const r of n){if(!i5(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=qj(r.children);e.push(new Nc(r.value,i))}return e.filter(r=>!t.has(r))}function Kj(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Zj(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Qj(n){return n.data||{}}function Xj(n){return n.resolve||{}}function Jj(n){return"string"==typeof n.title||null===n.title}function QP(n){return lr(e=>{const t=n(e);return t?(0,gn.D)(t).pipe((0,At.U)(()=>e)):ht(e)})}let e$=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===an);return r}getResolvedTitleForRoute(t){return t.data[Q0]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return(0,m.f3M)(t$)},providedIn:"root"}),n})(),t$=(()=>{class n extends e${constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Wi))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class h5{}class p5 extends class f5{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const JD=new m.OlP("",{providedIn:"root",factory:()=>({})}),XP=new m.OlP("ROUTES");let JP=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ht(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=wh(t.loadComponent()).pipe((0,ss.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),MP(()=>{this.componentLoaders.delete(t)})),i=new oj(r,()=>new Lr.x).pipe(SP());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ht({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,At.U)(d=>{this.onLoadEndListener&&this.onLoadEndListener(r);let f,y,I=!1;Array.isArray(d)?y=d:(f=d.create(t).injector,y=lj(f.get(XP,[],m.XFs.Self|m.XFs.Optional)));return{routes:y.map(qP),injector:f}}),MP(()=>{this.childrenLoaders.delete(r)})),l=new oj(a,()=>new Lr.x).pipe(SP());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return wh(t()).pipe((0,Ms.z)(r=>r instanceof m.YKP||Array.isArray(r)?ht(r):(0,gn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.zs3),m.LFG(m.Sil))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class m5{}class _5{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function y5(n){throw n}function v5(n,e,t){return e.parse("/")}const w5={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},b5={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function r$(){const n=(0,m.f3M)(mj),e=(0,m.f3M)(ib),t=(0,m.f3M)(Fe),r=(0,m.f3M)(m.zs3),i=(0,m.f3M)(m.Sil),a=(0,m.f3M)(XP,{optional:!0})??[],l=(0,m.f3M)(JD,{optional:!0})??{},d=(0,m.f3M)(t$),f=(0,m.f3M)(e$,{optional:!0}),y=(0,m.f3M)(m5,{optional:!0}),I=(0,m.f3M)(h5,{optional:!0}),D=new Ci(null,n,e,t,r,i,lj(a));return y&&(D.urlHandlingStrategy=y),I&&(D.routeReuseStrategy=I),D.titleStrategy=f??d,function E5(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,D),D}let Ci=(()=>{class n{constructor(t,r,i,a,l,d,f){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=f,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Lr.x,this.errorHandler=y5,this.malformedUriErrorHandler=v5,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>ht(void 0),this.urlHandlingStrategy=new _5,this.routeReuseStrategy=new p5,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=l.get(JP),this.configLoader.onLoadEndListener=x=>this.triggerEvent(new r8(x)),this.configLoader.onLoadStartListener=x=>this.triggerEvent(new n8(x)),this.ngModule=l.get(m.h0i),this.console=l.get(m.c2e);const D=l.get(m.R0b);this.isNgZoneEnabled=D instanceof m.R0b&&m.R0b.isInAngularZone(),this.resetConfig(f),this.currentUrlTree=function D6(){return new Sp(new hn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=xj(this.currentUrlTree,this.rootComponentType),this.transitions=new Wr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Zi(i=>0!==i.id),(0,At.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),lr(i=>{let a=!1,l=!1;return ht(i).pipe((0,ss.b)(d=>{this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),lr(d=>{const f=this.browserUrlTree.toString(),y=!this.navigated||d.extractedUrl.toString()!==f||f!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||y)&&this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return i$(d.source)&&(this.browserUrlTree=d.extractedUrl),ht(d).pipe(lr(D=>{const x=this.transitions.getValue();return r.next(new FP(D.id,this.serializeUrl(D.extractedUrl),D.source,D.restoredState)),x!==this.transitions.getValue()?Xl.E:Promise.resolve(D)}),function Q8(n,e,t,r){return lr(i=>function Z8(n,e,t,r,i){return new Y8(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,At.U)(a=>({...i,urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,ss.b)(D=>{this.currentNavigation={...this.currentNavigation,finalUrl:D.urlAfterRedirects},i.urlAfterRedirects=D.urlAfterRedirects}),function o5(n,e,t,r,i,a){return(0,Ms.z)(l=>function e5(n,e,t,r,i,a,l="emptyOnly",d="legacy"){return new t5(n,e,t,r,i,l,d,a).recognize().pipe(lr(f=>null===f?function J8(n){return new ws.y(e=>e.error(n))}(new X8):ht(f)))}(n,e,t,l.urlAfterRedirects,r.serialize(l.urlAfterRedirects),r,i,a).pipe((0,At.U)(d=>({...l,targetSnapshot:d}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ss.b)(D=>{if(i.targetSnapshot=D.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!D.extras.skipLocationChange){const L=this.urlHandlingStrategy.merge(D.urlAfterRedirects,D.rawUrl);this.setBrowserUrl(L,D)}this.browserUrlTree=D.urlAfterRedirects}const x=new Q6(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(D.urlAfterRedirects),D.targetSnapshot);r.next(x)}));if(y&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:x,extractedUrl:L,source:V,restoredState:ee,extras:ce}=d,Ge=new FP(x,this.serializeUrl(L),V,ee);r.next(Ge);const Ke=xj(L,this.rootComponentType).snapshot;return ht(i={...d,targetSnapshot:Ke,urlAfterRedirects:L,extras:{...ce,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=d.rawUrl,d.resolve(null),Xl.E}),(0,ss.b)(d=>{const f=new X6(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(f)}),(0,At.U)(d=>i={...d,guards:E8(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),function N8(n,e){return(0,Ms.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?ht({...t,guardsResult:!0}):function P8(n,e,t,r){return(0,gn.D)(n).pipe((0,Ms.z)(i=>function V8(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?ht(a.map(d=>{const f=sb(e)??i,y=F_(d,f);return wh(function x8(n){return n&&ub(n.canDeactivate)}(y)?y.canDeactivate(n,e,t,r):f.runInContext(()=>y(n,e,t,r))).pipe(Ea())})).pipe(U_()):ht(!0)}(i.component,i.route,t,e,r)),Ea(i=>!0!==i,!0))}(l,r,i,n).pipe((0,Ms.z)(d=>d&&function D8(n){return"boolean"==typeof n}(d)?function O8(n,e,t,r){return(0,gn.D)(e).pipe(Dp(i=>Gh(function F8(n,e){return null!==n&&e&&e(new i8(n)),ht(!0)}(i.route.parent,r),function L8(n,e){return null!==n&&e&&e(new o8(n)),ht(!0)}(i.route,r),function B8(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function I8(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>ij(()=>ht(l.guards.map(f=>{const y=sb(l.node)??t,I=F_(f,y);return wh(function M8(n){return n&&ub(n.canActivateChild)}(I)?I.canActivateChild(r,n):y.runInContext(()=>I(r,n))).pipe(Ea())})).pipe(U_())));return ht(a).pipe(U_())}(n,i.path,t),function U8(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ht(!0);const i=r.map(a=>ij(()=>{const l=sb(e)??t,d=F_(a,l);return wh(function A8(n){return n&&ub(n.canActivate)}(d)?d.canActivate(e,n):l.runInContext(()=>d(e,n))).pipe(Ea())}));return ht(i).pipe(U_())}(n,i.route,t))),Ea(i=>!0!==i,!0))}(r,a,n,e):ht(d)),(0,At.U)(d=>({...t,guardsResult:d})))})}(this.ngModule.injector,d=>this.triggerEvent(d)),(0,ss.b)(d=>{if(i.guardsResult=d.guardsResult,Mp(d.guardsResult))throw Pj(0,d.guardsResult);const f=new J6(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.triggerEvent(f)}),Zi(d=>!!d.guardsResult||(this.restoreHistory(d),this.cancelNavigationTransition(d,"",3),!1)),QP(d=>{if(d.guards.canActivateChecks.length)return ht(d).pipe((0,ss.b)(f=>{const y=new e8(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(y)}),lr(f=>{let y=!1;return ht(f).pipe(function a5(n,e){return(0,Ms.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ht(t);let a=0;return(0,gn.D)(i).pipe(Dp(l=>function u5(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!Jj(i)&&(a[Q0]=i.title),function l5(n,e,t,r){const i=function c5(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return ht({});const a={};return(0,gn.D)(i).pipe((0,Ms.z)(l=>function d5(n,e,t,r){const i=sb(e)??r,a=F_(n,i);return wh(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[l],e,t,r).pipe(Ea(),(0,ss.b)(d=>{a[l]=d}))),AP(1),function E6(n){return(0,At.U)(()=>n)}(a),vh(l=>KP(l)?Xl.E:Y0(l)))}(a,n,e,r).pipe((0,At.U)(l=>(n._resolvedData=l,n.data=Rj(n,t).resolve,i&&Jj(i)&&(n.data[Q0]=i.title),null)))}(l.route,r,n,e)),(0,ss.b)(()=>a++),AP(1),(0,Ms.z)(l=>a===i.length?ht(t):Xl.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,ss.b)({next:()=>y=!0,complete:()=>{y||(this.restoreHistory(f),this.cancelNavigationTransition(f,"",2))}}))}),(0,ss.b)(f=>{const y=new t8(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(y)}))}),QP(d=>{const f=y=>{const I=[];y.routeConfig?.loadComponent&&!y.routeConfig._loadedComponent&&I.push(this.configLoader.loadComponent(y.routeConfig).pipe((0,ss.b)(D=>{y.component=D}),(0,At.U)(()=>{})));for(const D of y.children)I.push(...f(D));return I};return ly(f(d.targetSnapshot.root)).pipe(lf(),Jl(1))}),QP(()=>this.afterPreactivation()),(0,At.U)(d=>{const f=function d8(n,e,t){const r=rb(n,e._root,t?t._root:void 0);return new Mj(r,e)}(this.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return i={...d,targetRouterState:f}}),(0,ss.b)(d=>{this.currentUrlTree=d.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),this.routerState=d.targetRouterState,"deferred"===this.urlUpdateStrategy&&(d.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,d),this.browserUrlTree=d.urlAfterRedirects)}),((n,e,t)=>(0,At.U)(r=>(new b8(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,d=>this.triggerEvent(d)),(0,ss.b)({next(){a=!0},complete(){a=!0}}),MP(()=>{a||l||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),vh(d=>{if(l=!0,Fj(d)){Lj(d)||(this.navigated=!0,this.restoreHistory(i,!0));const f=new HD(i.id,this.serializeUrl(i.extractedUrl),d.message,d.cancellationCode);if(r.next(f),Lj(d)){const y=this.urlHandlingStrategy.merge(d.url,this.rawUrlTree),I={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||i$(i.source)};this.scheduleNavigation(y,"imperative",null,I,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const f=new Dj(i.id,this.serializeUrl(i.extractedUrl),d,i.targetSnapshot??void 0);r.next(f);try{i.resolve(this.errorHandler(d))}catch(y){i.reject(y)}}return Xl.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},a=t.state?.navigationId?t.state:null;if(a){const d={...a};delete d.navigationId,delete d.\u0275routerPageId,0!==Object.keys(d).length&&(i.state=d)}const l=this.parseUrl(t.url);this.scheduleNavigation(l,r,a,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(qP),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:d,preserveFragment:f}=r,y=i||this.routerState.root,I=f?this.currentUrlTree.fragment:l;let D=null;switch(d){case"merge":D={...this.currentUrlTree.queryParams,...a};break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=a||null}return null!==D&&(D=this.removeEmptyProps(D)),z6(y,this.currentUrlTree,t,D,I??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Mp(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function I5(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new m.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...w5}:!1===r?{...b5}:r,Mp(t))return hj(this.currentUrlTree,t,i);const a=this.parseUrl(t);return hj(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new xp(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,l){if(this.disposed)return Promise.resolve(!1);let d,f,y;l?(d=l.resolve,f=l.reject,y=l.promise):y=new Promise((x,L)=>{d=x,f=L});const I=++this.navigationId;let D;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),D=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):D=0,this.setTransition({id:I,targetPageId:D,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:d,reject:f,promise:y,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),y.catch(x=>Promise.reject(x))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const a=new HD(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(a),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){m.$Z()},n.\u0275prov=m.Yz7({token:n,factory:function(){return r$()},providedIn:"root"}),n})();function i$(n){return"imperative"!==n}let tS=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=l,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new Lr.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,m.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,m.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,m.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Ci),m.Y36(Rp),m.$8M("tabindex"),m.Y36(m.Qsj),m.Y36(m.SBq))},n.\u0275dir=m.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&m.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[m.TTD]}),n})(),nS=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new Lr.x,this.subscription=t.events.subscribe(a=>{a instanceof xp&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=(0,m.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,m.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,m.D6c)(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,a,l){return!!(0!==t||r||i||a||l||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Ci),m.Y36(Rp),m.Y36(Ce))},n.\u0275dir=m.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&m.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&m.uIk("target",r.target)("href",r.href,m.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[m.TTD]}),n})(),s$=(()=>{class n{constructor(t,r,i,a,l,d){this.router=t,this.element=r,this.renderer=i,this.cdr=a,this.link=l,this.linkWithHref=d,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new m.vpe,this.routerEventsSubscription=t.events.subscribe(f=>{f instanceof xp&&this.update()})}ngAfterContentInit(){ht(this.links.changes,this.linksWithHrefs.changes,ht(null)).pipe((0,Ql.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,gn.D)(t).pipe((0,Ql.J)()).subscribe(r=>{this.isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function T5(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Ci),m.Y36(m.SBq),m.Y36(m.Qsj),m.Y36(m.sBO),m.Y36(tS,8),m.Y36(nS,8))},n.\u0275dir=m.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,i){if(1&t&&(m.Suo(i,tS,5),m.Suo(i,nS,5)),2&t){let a;m.iGM(a=m.CRH())&&(r.links=a),m.iGM(a=m.CRH())&&(r.linksWithHrefs=a)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[m.TTD]}),n})();class o${}let C5=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(Zi(t=>t instanceof xp),Dp(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,m.MMx)(a.providers,t,`Route: ${a.path}`));const l=a._injector??t,d=a._loadedInjector??l;a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent?i.push(this.preloadConfig(l,a)):(a.children||a._loadedRoutes)&&i.push(this.processRoutes(d,a.children??a._loadedRoutes))}return(0,gn.D)(i).pipe((0,Ql.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):ht(null);const a=i.pipe((0,Ms.z)(l=>null===l?ht(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,gn.D)([a,l]).pipe((0,Ql.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Ci),m.LFG(m.Sil),m.LFG(m.lqb),m.LFG(o$),m.LFG(JP))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const eO=new m.OlP("");let a$=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof FP?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof xp&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Sj&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Sj(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){m.$Z()},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function B_(n,e){return{\u0275kind:n,\u0275providers:e}}function tO(n){return[{provide:XP,multi:!0,useValue:n}]}function l$(){const n=(0,m.f3M)(m.zs3);return e=>{const t=n.get(m.z2F);if(e!==t.components[0])return;const r=n.get(Ci),i=n.get(c$);1===n.get(nO)&&r.initialNavigation(),n.get(d$,null,m.XFs.Optional)?.setUpPreloading(),n.get(eO,null,m.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.next(),i.complete()}}const c$=new m.OlP("",{factory:()=>new Lr.x}),nO=new m.OlP("",{providedIn:"root",factory:()=>1});const d$=new m.OlP("");function M5(n){return B_(0,[{provide:d$,useExisting:C5},{provide:o$,useExisting:n}])}const h$=new m.OlP("ROUTER_FORROOT_GUARD"),x5=[Fe,{provide:mj,useClass:RP},{provide:Ci,useFactory:r$},ib,{provide:Rp,useFactory:function u$(n){return n.routerState.root},deps:[Ci]},JP];function R5(){return new m.PXZ("Router",Ci)}let f$=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[x5,[],tO(t),{provide:h$,useFactory:O5,deps:[[Ci,new m.FiY,new m.tp0]]},{provide:JD,useValue:r||{}},r?.useHash?{provide:Ce,useClass:st}:{provide:Ce,useClass:it},{provide:eO,useFactory:()=>{const n=(0,m.f3M)(Ci),e=(0,m.f3M)($c),t=(0,m.f3M)(JD);return t.scrollOffset&&e.setOffset(t.scrollOffset),new a$(n,e,t)}},r?.preloadingStrategy?M5(r.preloadingStrategy).\u0275providers:[],{provide:m.PXZ,multi:!0,useFactory:R5},r?.initialNavigation?L5(r):[],[{provide:p$,useFactory:l$},{provide:m.tb,multi:!0,useExisting:p$}]]}}static forChild(t){return{ngModule:n,providers:[tO(t)]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(h$,8))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[zP]}),n})();function O5(n){return"guarded"}function L5(n){return["disabled"===n.initialNavigation?B_(3,[{provide:m.ip1,multi:!0,useFactory:()=>{const e=(0,m.f3M)(Ci);return()=>{e.setUpLocationChangeListener()}}},{provide:nO,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?B_(2,[{provide:nO,useValue:0},{provide:m.ip1,multi:!0,deps:[m.zs3],useFactory:e=>{const t=e.get(q,Promise.resolve(null));let r=!1;return()=>t.then(()=>new Promise(a=>{const l=e.get(Ci),d=e.get(c$);(function i(a){e.get(Ci).events.pipe(Zi(d=>d instanceof xp||d instanceof HD||d instanceof Dj),(0,At.U)(d=>d instanceof xp||d instanceof HD&&(0===d.code||1===d.code)&&null),Zi(d=>null!==d),Jl(1)).subscribe(()=>{a()})})(()=>{a(!0),r=!0}),l.afterPreactivation=()=>(a(!0),r||d.closed?ht(void 0):d),l.initialNavigation()}))}}]).\u0275providers:[]]}const p$=new m.OlP("");let U5=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-email-login"]],decls:2,vars:0,template:function(t,r){1&t&&(m.TgZ(0,"p"),m._uU(1,"email-login works!"),m.qZA())}}),n})();var B5=U(8554);let g$=(()=>{class n{constructor(t,r,i){this.afs=t,this.auth=r,this.router=i}login(t,r){this.auth.signInWithEmailAndPassword(t,r).then(i=>{console.log("Nice, it worked!"),this.router.navigateByUrl("/perfil")}).catch(i=>{console.log("Something went wrong: ",i.message)})}emailSignup(t,r){this.auth.createUserWithEmailAndPassword(t,r).then(i=>{console.log("Sucess",i),this.router.navigateByUrl("/login")}).catch(i=>{console.log("Something went wrong: ",i)})}googleLogin(){var t=new B5.Q;return this.oAuthLogin(t).then(r=>{console.log("Sucess",r),this.router.navigateByUrl("/perfil")}).catch(r=>{console.log("Something went wrong: ",r)})}logout(){this.auth.signOut().then(()=>{this.router.navigate(["/"])})}oAuthLogin(t){return this.auth.signInWithPopup(t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(LB),m.LFG(mf),m.LFG(Ci))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),m$=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}loginGoogle(){this.authService.googleLogin()}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(g$))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-login"]],decls:10,vars:0,consts:[[1,"container"],[1,"form-container"],["mat-raised-button","",1,"google",3,"click"],["mat-raised-button","","routerLink","/email-login",1,"email"],["routerLink","/registro","routerLinkActive","active",1,"create-account-txt"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0)(1,"div",1)(2,"button",2),m.NdJ("click",function(){return r.loginGoogle()}),m._uU(3," Logar ou cadastrar com Google "),m.qZA(),m.TgZ(4,"button",3),m._uU(5," Logar com Email "),m.qZA(),m.TgZ(6,"a",4),m._uU(7,"N\xe3o tem cadastro? "),m.TgZ(8,"strong"),m._uU(9,"Crie um"),m.qZA()()()())},dependencies:[tS,nS,s$,sA],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:center}.form-container[_ngcontent-%COMP%]{margin:20px;display:flex;flex-direction:column;align-items:center}.form-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-bottom:10px;flex-basis:20px}"]}),n})();const V5=[{path:"",component:m$},{path:"login",component:m$},{path:"registro",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-registropage"]],decls:2,vars:0,template:function(t,r){1&t&&(m.TgZ(0,"p"),m._uU(1,"registropage works!"),m.qZA())}}),n})()},{path:"perfil",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-perfil"]],decls:2,vars:0,template:function(t,r){1&t&&(m.TgZ(0,"p"),m._uU(1,"perfil works!"),m.qZA())}}),n})()},{path:"email-login",component:U5}];let j5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[f$.forRoot(V5),f$]}),n})(),$5=(()=>{class n{constructor(){this.title="curriculo-facil"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-root"]],decls:4,vars:0,template:function(t,r){1&t&&(m.TgZ(0,"mat-toolbar")(1,"span"),m._uU(2,"Curr\xedculo F\xe1cil"),m.qZA()(),m._UZ(3,"router-outlet"))},dependencies:[GP,XS]}),n})();const _$_firebaseConfig={apiKey:"AIzaSyDgzRquxls0_dgaA7t8UwnYXDhZ7416imI",authDomain:"curriculos-seve.firebaseapp.com",databaseURL:"https://curriculos-seve-default-rtdb.firebaseio.com",projectId:"curriculos-seve",storageBucket:"curriculos-seve.appspot.com",messagingSenderId:"963696035317",appId:"1:963696035317:web:92249188d6af0697164cbc",measurementId:"G-NKH58G9F4P"};let H5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n,bootstrap:[$5]}),n.\u0275inj=m.cJS({providers:[g$],imports:[mo,j5,KA,eA,aE,Ur.hO.initializeApp(_$_firebaseConfig),BI,l3,um,v6]}),n})();(0,m.G48)(),tu().bootstrapModule(H5).catch(n=>console.error(n))},5867:(gt,ke,U)=>{U.d(ke,{C6:()=>m.getApps,Mq:()=>m.getApp});var m=U(9681);(0,m.registerVersion)("firebase","9.9.4","app")},127:(gt,ke,U)=>{U.d(ke,{Z:()=>m.Z});var m=U(3942);m.Z.registerVersion("firebase","9.9.4","app-compat")},5881:(gt,ke,U)=>{U.r(ke);var m=U(5861),$=U(3942),P=U(8554),le=U(2090),pe=(U(9681),U(1877),U(4859));function _e(){return window}function K(){return(K=(0,m.Z)(function*(se,G,W){var Te;const{BuildInfo:Ye}=_e();(0,P.aq)(G.sessionId,"AuthEvent did not contain a session ID");const bt=yield ve(G.sessionId),St={};return(0,P.ar)()?St.ibi=Ye.packageName:(0,P.as)()?St.apn=Ye.packageName:(0,P.at)(se,"operation-not-supported-in-this-environment"),Ye.displayName&&(St.appDisplayName=Ye.displayName),St.sessionId=bt,(0,P.au)(se,W,G.type,void 0,null!==(Te=G.eventId)&&void 0!==Te?Te:void 0,St)})).apply(this,arguments)}function We(){return(We=(0,m.Z)(function*(se){const{BuildInfo:G}=_e(),W={};(0,P.ar)()?W.iosBundleId=G.packageName:(0,P.as)()?W.androidPackageName=G.packageName:(0,P.at)(se,"operation-not-supported-in-this-environment"),yield(0,P.av)(se,W)})).apply(this,arguments)}function ct(){return(ct=(0,m.Z)(function*(se,G,W){const{cordova:Te}=_e();let Ye=()=>{};try{yield new Promise((bt,St)=>{let Ue=null;function lt(){var jt;bt();const wn=null===(jt=Te.plugins.browsertab)||void 0===jt?void 0:jt.close;"function"==typeof wn&&wn(),"function"==typeof W?.close&&W.close()}function Jt(){Ue||(Ue=window.setTimeout(()=>{St((0,P.aw)(se,"redirect-cancelled-by-user"))},2e3))}function Pn(){"visible"===document?.visibilityState&&Jt()}G.addPassiveListener(lt),document.addEventListener("resume",Jt,!1),(0,P.as)()&&document.addEventListener("visibilitychange",Pn,!1),Ye=()=>{G.removePassiveListener(lt),document.removeEventListener("resume",Jt,!1),document.removeEventListener("visibilitychange",Pn,!1),Ue&&window.clearTimeout(Ue)}})}finally{Ye()}})).apply(this,arguments)}function ve(se){return it.apply(this,arguments)}function it(){return(it=(0,m.Z)(function*(se){const G=st(se),W=yield crypto.subtle.digest("SHA-256",G);return Array.from(new Uint8Array(W)).map(Ye=>Ye.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function st(se){if((0,P.aq)(/[0-9a-zA-Z]+/.test(se),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(se);const G=new ArrayBuffer(se.length),W=new Uint8Array(G);for(let Te=0;Te<se.length;Te++)W[Te]=se.charCodeAt(Te);return W}class Ne extends P.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(G=>{this.resolveInialized=G})}addPassiveListener(G){this.passiveListeners.add(G)}removePassiveListener(G){this.passiveListeners.delete(G)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(G){return this.resolveInialized(),this.passiveListeners.forEach(W=>W(G)),super.onEvent(G)}initialized(){var G=this;return(0,m.Z)(function*(){yield G.initPromise})()}}function ue(se){return fe.apply(this,arguments)}function fe(){return(fe=(0,m.Z)(function*(se){const G=yield ie()._get(ye(se));return G&&(yield ie()._remove(ye(se))),G})).apply(this,arguments)}function te(){const se=[],G="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let W=0;W<20;W++){const Te=Math.floor(Math.random()*G.length);se.push(G.charAt(Te))}return se.join("")}function ie(){return(0,P.ay)(P.b)}function ye(se){return(0,P.az)("authEvent",se.config.apiKey,se.name)}function $e(se){if(!se?.includes("?"))return{};const[G,...W]=se.split("?");return(0,le.zd)(W.join("?"))}function Qe(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,P.aw)("no-auth-event")}}function Kt(){var se;return(null===(se=self?.location)||void 0===se?void 0:se.protocol)||null}function Ir(se=(0,le.z$)()){return!("file:"!==Kt()&&"ionic:"!==Kt()&&"capacitor:"!==Kt()||!se.toLowerCase().match(/iphone|ipad|ipod|android/))}function ji(){try{const se=self.localStorage,G=P.aI();if(se)return se.setItem(G,"1"),se.removeItem(G),!function as(se=(0,le.z$)()){return function Tr(){return(0,le.w1)()&&11===document?.documentMode}()||function Nn(se=(0,le.z$)()){return/Edge\/\d+/.test(se)}(se)}()||(0,le.hl)()}catch{return Xr()&&(0,le.hl)()}return!1}function Xr(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Hn(){return(function Ht(){return"http:"===Kt()||"https:"===Kt()}()||(0,le.ru)()||Ir())&&!function ro(){return(0,le.b$)()||(0,le.UG)()}()&&ji()&&!Xr()}function Si(){return Ir()&&typeof document<"u"}function ot(){return(ot=(0,m.Z)(function*(){return!!Si()&&new Promise(se=>{const G=setTimeout(()=>{se(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(G),se(!0)})})})).apply(this,arguments)}const Gn={LOCAL:"local",NONE:"none",SESSION:"session"},vn=P.ax,yr="persistence";function An(se){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,m.Z)(function*(se){yield se._initializationPromise;const G=mt(),W=P.az(yr,se.config.apiKey,se.name);G&&G.setItem(W,se._getPersistence())})).apply(this,arguments)}function mt(){var se;try{return(null===(se=function _r(){return typeof window<"u"?window:null}())||void 0===se?void 0:se.sessionStorage)||null}catch{return null}}const _t=P.ax;class Lt{constructor(){this.browserResolver=P.ay(P.k),this.cordovaResolver=P.ay(class tn{constructor(){this._redirectPersistence=P.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=P.aB,this._overrideRedirectResult=P.aC}_initialize(G){var W=this;return(0,m.Z)(function*(){const Te=G._key();let Ye=W.eventManagers.get(Te);return Ye||(Ye=new Ne(G),W.eventManagers.set(Te,Ye),W.attachCallbackListeners(G,Ye)),Ye})()}_openPopup(G){(0,P.at)(G,"operation-not-supported-in-this-environment")}_openRedirect(G,W,Te,Ye){var bt=this;return(0,m.Z)(function*(){!function Ce(se){var G,W,Te,Ye,bt,St,Ue,lt,Jt,Pn;const jt=_e();(0,P.ax)("function"==typeof(null===(G=jt?.universalLinks)||void 0===G?void 0:G.subscribe),se,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,P.ax)(typeof(null===(W=jt?.BuildInfo)||void 0===W?void 0:W.packageName)<"u",se,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,P.ax)("function"==typeof(null===(bt=null===(Ye=null===(Te=jt?.cordova)||void 0===Te?void 0:Te.plugins)||void 0===Ye?void 0:Ye.browsertab)||void 0===bt?void 0:bt.openUrl),se,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.ax)("function"==typeof(null===(lt=null===(Ue=null===(St=jt?.cordova)||void 0===St?void 0:St.plugins)||void 0===Ue?void 0:Ue.browsertab)||void 0===lt?void 0:lt.isAvailable),se,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.ax)("function"==typeof(null===(Pn=null===(Jt=jt?.cordova)||void 0===Jt?void 0:Jt.InAppBrowser)||void 0===Pn?void 0:Pn.open),se,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(G);const St=yield bt._initialize(G);yield St.initialized(),St.resetRedirect(),(0,P.aD)(),yield bt._originValidation(G);const Ue=function Ae(se,G,W=null){return{type:G,eventId:W,urlResponse:null,sessionId:te(),postBody:null,tenantId:se.tenantId,error:(0,P.aw)(se,"no-auth-event")}}(G,Te,Ye);yield function Ze(se,G){return ie()._set(ye(se),G)}(G,Ue);const lt=yield function q(se,G,W){return K.apply(this,arguments)}(G,Ue,W),Jt=yield function Le(se){const{cordova:G}=_e();return new Promise(W=>{G.plugins.browsertab.isAvailable(Te=>{let Ye=null;Te?G.plugins.browsertab.openUrl(se):Ye=G.InAppBrowser.open(se,(0,P.ap)()?"_blank":"_system","location=yes"),W(Ye)})})}(lt);return function Se(se,G,W){return ct.apply(this,arguments)}(G,St,Jt)})()}_isIframeWebStorageSupported(G,W){throw new Error("Method not implemented.")}_originValidation(G){const W=G._key();return this.originValidationPromises[W]||(this.originValidationPromises[W]=function ne(se){return We.apply(this,arguments)}(G)),this.originValidationPromises[W]}attachCallbackListeners(G,W){const{universalLinks:Te,handleOpenURL:Ye,BuildInfo:bt}=_e(),St=setTimeout((0,m.Z)(function*(){yield ue(G),W.onEvent(Qe())}),500),Ue=function(){var Pn=(0,m.Z)(function*(jt){clearTimeout(St);const wn=yield ue(G);let us=null;wn&&jt?.url&&(us=function Ee(se,G){var W,Te;const Ye=function je(se){const G=$e(se),W=G.link?decodeURIComponent(G.link):void 0,Te=$e(W).link,Ye=G.deep_link_id?decodeURIComponent(G.deep_link_id):void 0;return $e(Ye).link||Ye||Te||W||se}(G);if(Ye.includes("/__/auth/callback")){const bt=$e(Ye),St=bt.firebaseError?function de(se){try{return JSON.parse(se)}catch{return null}}(decodeURIComponent(bt.firebaseError)):null,Ue=null===(Te=null===(W=St?.code)||void 0===W?void 0:W.split("auth/"))||void 0===Te?void 0:Te[1],lt=Ue?(0,P.aw)(Ue):null;return lt?{type:se.type,eventId:se.eventId,tenantId:se.tenantId,error:lt,urlResponse:null,sessionId:null,postBody:null}:{type:se.type,eventId:se.eventId,tenantId:se.tenantId,sessionId:se.sessionId,urlResponse:Ye,postBody:null}}return null}(wn,jt.url)),W.onEvent(us||Qe())});return function(wn){return Pn.apply(this,arguments)}}();typeof Te<"u"&&"function"==typeof Te.subscribe&&Te.subscribe(null,Ue);const lt=Ye,Jt=`${bt.packageName.toLowerCase()}://`;_e().handleOpenURL=function(){var Pn=(0,m.Z)(function*(jt){if(jt.toLowerCase().startsWith(Jt)&&Ue({url:jt}),"function"==typeof lt)try{lt(jt)}catch(wn){console.error(wn)}});return function(jt){return Pn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=P.a,this._completeRedirectFn=P.aB,this._overrideRedirectResult=P.aC}_initialize(G){var W=this;return(0,m.Z)(function*(){return yield W.selectUnderlyingResolver(),W.assertedUnderlyingResolver._initialize(G)})()}_openPopup(G,W,Te,Ye){var bt=this;return(0,m.Z)(function*(){return yield bt.selectUnderlyingResolver(),bt.assertedUnderlyingResolver._openPopup(G,W,Te,Ye)})()}_openRedirect(G,W,Te,Ye){var bt=this;return(0,m.Z)(function*(){return yield bt.selectUnderlyingResolver(),bt.assertedUnderlyingResolver._openRedirect(G,W,Te,Ye)})()}_isIframeWebStorageSupported(G,W){this.assertedUnderlyingResolver._isIframeWebStorageSupported(G,W)}_originValidation(G){return this.assertedUnderlyingResolver._originValidation(G)}get _shouldInitProactively(){return Si()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return _t(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var G=this;return(0,m.Z)(function*(){if(G.underlyingResolver)return;const W=yield function $i(){return ot.apply(this,arguments)}();G.underlyingResolver=W?G.cordovaResolver:G.browserResolver})()}}function Hr(se){return se.unwrap()}function Cr(se){return Pr(se)}function Pr(se){const{_tokenResponse:G}=se instanceof le.ZR?se.customData:se;if(!G)return null;if(!(se instanceof le.ZR)&&"temporaryProof"in G&&"phoneNumber"in G)return P.P.credentialFromResult(se);const W=G.providerId;if(!W||W===P.o.PASSWORD)return null;let Te;switch(W){case P.o.GOOGLE:Te=P.Q;break;case P.o.FACEBOOK:Te=P.N;break;case P.o.GITHUB:Te=P.T;break;case P.o.TWITTER:Te=P.W;break;default:const{oauthIdToken:Ye,oauthAccessToken:bt,oauthTokenSecret:St,pendingToken:Ue,nonce:lt}=G;return bt||St||Ye||Ue?Ue?W.startsWith("saml.")?P.aL._create(W,Ue):P.J._fromParams({providerId:W,signInMethod:W,pendingToken:Ue,idToken:Ye,accessToken:bt}):new P.U(W).credential({idToken:Ye,accessToken:bt,rawNonce:lt}):null}return se instanceof le.ZR?Te.credentialFromError(se):Te.credentialFromResult(se)}function Ut(se,G){return G.catch(W=>{throw W instanceof le.ZR&&function Rt(se,G){var W,Te;const Ye=null===(W=G.customData)||void 0===W?void 0:W._tokenResponse;if("auth/multi-factor-auth-required"===(null===(Te=G)||void 0===Te?void 0:Te.code))G.resolver=new J(se,P.an(se,G));else if(Ye){const bt=Pr(G),St=G;bt&&(St.credential=bt,St.tenantId=Ye.tenantId||void 0,St.email=Ye.email||void 0,St.phoneNumber=Ye.phoneNumber||void 0)}}(se,W),W}).then(W=>{const Ye=W.user;return{operationType:W.operationType,credential:Cr(W),additionalUserInfo:P.al(W),user:z.getOrCreate(Ye)}})}function Jr(se,G){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,m.Z)(function*(se,G){const W=yield G;return{verificationId:W.verificationId,confirm:Te=>Ut(se,W.confirm(Te))}})).apply(this,arguments)}class J{constructor(G,W){this.resolver=W,this.auth=function vr(se){return se.wrapped()}(G)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(G){return Ut(Hr(this.auth),this.resolver.resolveSignIn(G))}}class z{constructor(G){this._delegate=G,this.multiFactor=P.ao(G)}static getOrCreate(G){return z.USER_MAP.has(G)||z.USER_MAP.set(G,new z(G)),z.USER_MAP.get(G)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(G){return this._delegate.getIdTokenResult(G)}getIdToken(G){return this._delegate.getIdToken(G)}linkAndRetrieveDataWithCredential(G){return this.linkWithCredential(G)}linkWithCredential(G){var W=this;return(0,m.Z)(function*(){return Ut(W.auth,P.Z(W._delegate,G))})()}linkWithPhoneNumber(G,W){var Te=this;return(0,m.Z)(function*(){return Jr(Te.auth,P.l(Te._delegate,G,W))})()}linkWithPopup(G){var W=this;return(0,m.Z)(function*(){return Ut(W.auth,P.d(W._delegate,G,Lt))})()}linkWithRedirect(G){var W=this;return(0,m.Z)(function*(){return yield An(P.aE(W.auth)),P.g(W._delegate,G,Lt)})()}reauthenticateAndRetrieveDataWithCredential(G){return this.reauthenticateWithCredential(G)}reauthenticateWithCredential(G){var W=this;return(0,m.Z)(function*(){return Ut(W.auth,P._(W._delegate,G))})()}reauthenticateWithPhoneNumber(G,W){return Jr(this.auth,P.r(this._delegate,G,W))}reauthenticateWithPopup(G){return Ut(this.auth,P.e(this._delegate,G,Lt))}reauthenticateWithRedirect(G){var W=this;return(0,m.Z)(function*(){return yield An(P.aE(W.auth)),P.h(W._delegate,G,Lt)})()}sendEmailVerification(G){return P.ab(this._delegate,G)}unlink(G){var W=this;return(0,m.Z)(function*(){return yield P.ak(W._delegate,G),W})()}updateEmail(G){return P.ag(this._delegate,G)}updatePassword(G){return P.ah(this._delegate,G)}updatePhoneNumber(G){return P.u(this._delegate,G)}updateProfile(G){return P.af(this._delegate,G)}verifyBeforeUpdateEmail(G,W){return P.ac(this._delegate,G,W)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}z.USER_MAP=new WeakMap;const H=P.ax;let Y=(()=>{class se{constructor(W,Te){if(this.app=W,Te.isInitialized())return this._delegate=Te.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ye}=W.options;H(Ye,"invalid-api-key",{appName:W.name}),H(Ye,"invalid-api-key",{appName:W.name});const bt=typeof window<"u"?Lt:void 0;this._delegate=Te.initialize({options:{persistence:xe(Ye,W.name),popupRedirectResolver:bt}}),this._delegate._updateErrorMap(P.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?z.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(W){this._delegate.languageCode=W}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(W){this._delegate.tenantId=W}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(W,Te){P.G(this._delegate,W,Te)}applyActionCode(W){return P.a2(this._delegate,W)}checkActionCode(W){return P.a3(this._delegate,W)}confirmPasswordReset(W,Te){return P.a1(this._delegate,W,Te)}createUserWithEmailAndPassword(W,Te){var Ye=this;return(0,m.Z)(function*(){return Ut(Ye._delegate,P.a5(Ye._delegate,W,Te))})()}fetchProvidersForEmail(W){return this.fetchSignInMethodsForEmail(W)}fetchSignInMethodsForEmail(W){return P.aa(this._delegate,W)}isSignInWithEmailLink(W){return P.a8(this._delegate,W)}getRedirectResult(){var W=this;return(0,m.Z)(function*(){H(Hn(),W._delegate,"operation-not-supported-in-this-environment");const Te=yield P.j(W._delegate,Lt);return Te?Ut(W._delegate,Promise.resolve(Te)):{credential:null,user:null}})()}addFrameworkForLogging(W){!function Tn(se,G){(0,P.aE)(se)._logFramework(G)}(this._delegate,W)}onAuthStateChanged(W,Te,Ye){const{next:bt,error:St,complete:Ue}=Q(W,Te,Ye);return this._delegate.onAuthStateChanged(bt,St,Ue)}onIdTokenChanged(W,Te,Ye){const{next:bt,error:St,complete:Ue}=Q(W,Te,Ye);return this._delegate.onIdTokenChanged(bt,St,Ue)}sendSignInLinkToEmail(W,Te){return P.a7(this._delegate,W,Te)}sendPasswordResetEmail(W,Te){return P.a0(this._delegate,W,Te||void 0)}setPersistence(W){var Te=this;return(0,m.Z)(function*(){let Ye;switch(function Hi(se,G){vn(Object.values(Gn).includes(G),se,"invalid-persistence-type"),(0,le.b$)()?vn(G!==Gn.SESSION,se,"unsupported-persistence-type"):(0,le.UG)()?vn(G===Gn.NONE,se,"unsupported-persistence-type"):Xr()?vn(G===Gn.NONE||G===Gn.LOCAL&&(0,le.hl)(),se,"unsupported-persistence-type"):vn(G===Gn.NONE||ji(),se,"unsupported-persistence-type")}(Te._delegate,W),W){case Gn.SESSION:Ye=P.a;break;case Gn.LOCAL:Ye=(yield P.ay(P.i)._isAvailable())?P.i:P.b;break;case Gn.NONE:Ye=P.L;break;default:return P.at("argument-error",{appName:Te._delegate.name})}return Te._delegate.setPersistence(Ye)})()}signInAndRetrieveDataWithCredential(W){return this.signInWithCredential(W)}signInAnonymously(){return Ut(this._delegate,P.X(this._delegate))}signInWithCredential(W){return Ut(this._delegate,P.Y(this._delegate,W))}signInWithCustomToken(W){return Ut(this._delegate,P.$(this._delegate,W))}signInWithEmailAndPassword(W,Te){return Ut(this._delegate,P.a6(this._delegate,W,Te))}signInWithEmailLink(W,Te){return Ut(this._delegate,P.a9(this._delegate,W,Te))}signInWithPhoneNumber(W,Te){return Jr(this._delegate,P.s(this._delegate,W,Te))}signInWithPopup(W){var Te=this;return(0,m.Z)(function*(){return H(Hn(),Te._delegate,"operation-not-supported-in-this-environment"),Ut(Te._delegate,P.c(Te._delegate,W,Lt))})()}signInWithRedirect(W){var Te=this;return(0,m.Z)(function*(){return H(Hn(),Te._delegate,"operation-not-supported-in-this-environment"),yield An(Te._delegate),P.f(Te._delegate,W,Lt)})()}updateCurrentUser(W){return this._delegate.updateCurrentUser(W)}verifyPasswordResetCode(W){return P.a4(this._delegate,W)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return se.Persistence=Gn,se})();function Q(se,G,W){let Te=se;"function"!=typeof se&&({next:Te,error:G,complete:W}=se);const Ye=Te;return{next:St=>Ye(St&&z.getOrCreate(St)),error:G,complete:W}}function xe(se,G){const W=function Cn(se,G){const W=mt();if(!W)return[];const Te=P.az(yr,se,G);switch(W.getItem(Te)){case Gn.NONE:return[P.L];case Gn.LOCAL:return[P.i,P.a];case Gn.SESSION:return[P.a];default:return[]}}(se,G);if(typeof self<"u"&&!W.includes(P.i)&&W.push(P.i),typeof window<"u")for(const Te of[P.b,P.a])W.includes(Te)||W.push(Te);return W.includes(P.L)||W.push(P.L),W}class qe{constructor(){this.providerId="phone",this._delegate=new P.P(Hr($.Z.auth()))}static credential(G,W){return P.P.credential(G,W)}verifyPhoneNumber(G,W){return this._delegate.verifyPhoneNumber(G,W)}unwrap(){return this._delegate}}qe.PHONE_SIGN_IN_METHOD=P.P.PHONE_SIGN_IN_METHOD,qe.PROVIDER_ID=P.P.PROVIDER_ID;const It=P.ax;class pn{constructor(G,W,Te=$.Z.app()){var Ye;It(null===(Ye=Te.options)||void 0===Ye?void 0:Ye.apiKey,"invalid-api-key",{appName:Te.name}),this._delegate=new P.R(G,W,Te.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function nr(se){se.INTERNAL.registerComponent(new pe.wA("auth-compat",G=>{const W=G.getProvider("app-compat").getImmediate(),Te=G.getProvider("auth");return new Y(W,Te)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:P.A.EMAIL_SIGNIN,PASSWORD_RESET:P.A.PASSWORD_RESET,RECOVER_EMAIL:P.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:P.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:P.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:P.A.VERIFY_EMAIL}},EmailAuthProvider:P.M,FacebookAuthProvider:P.N,GithubAuthProvider:P.T,GoogleAuthProvider:P.Q,OAuthProvider:P.U,SAMLAuthProvider:P.V,PhoneAuthProvider:qe,PhoneMultiFactorGenerator:P.m,RecaptchaVerifier:pn,TwitterAuthProvider:P.W,Auth:Y,AuthCredential:P.H,Error:le.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),se.registerVersion("@firebase/auth-compat","0.2.19")}($.Z)},9751:(gt,ke,U)=>{U.d(ke,{y:()=>_e});var m=U(930),$=U(727),P=U(8822),le=U(9635),he=U(2416),we=U(576),pe=U(2806);let _e=(()=>{class ne{constructor(Le){Le&&(this._subscribe=Le)}lift(Le){const Se=new ne;return Se.source=this,Se.operator=Le,Se}subscribe(Le,Se,ct){const Ce=function K(ne){return ne&&ne instanceof m.Lv||function q(ne){return ne&&(0,we.m)(ne.next)&&(0,we.m)(ne.error)&&(0,we.m)(ne.complete)}(ne)&&(0,$.Nn)(ne)}(Le)?Le:new m.Hp(Le,Se,ct);return(0,pe.x)(()=>{const{operator:ve,source:it}=this;Ce.add(ve?ve.call(Ce,it):it?this._subscribe(Ce):this._trySubscribe(Ce))}),Ce}_trySubscribe(Le){try{return this._subscribe(Le)}catch(Se){Le.error(Se)}}forEach(Le,Se){return new(Se=Ie(Se))((ct,Ce)=>{const ve=new m.Hp({next:it=>{try{Le(it)}catch(st){Ce(st),ve.unsubscribe()}},error:Ce,complete:ct});this.subscribe(ve)})}_subscribe(Le){var Se;return null===(Se=this.source)||void 0===Se?void 0:Se.subscribe(Le)}[P.L](){return this}pipe(...Le){return(0,le.U)(Le)(this)}toPromise(Le){return new(Le=Ie(Le))((Se,ct)=>{let Ce;this.subscribe(ve=>Ce=ve,ve=>ct(ve),()=>Se(Ce))})}}return ne.create=We=>new ne(We),ne})();function Ie(ne){var We;return null!==(We=ne??he.v.Promise)&&void 0!==We?We:Promise}},7579:(gt,ke,U)=>{U.d(ke,{x:()=>pe});var m=U(9751),$=U(727);const le=(0,U(3888).d)(Ie=>function(){Ie(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var he=U(8737),we=U(2806);let pe=(()=>{class Ie extends m.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(K){const ne=new _e(this,this);return ne.operator=K,ne}_throwIfClosed(){if(this.closed)throw new le}next(K){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ne of this.currentObservers)ne.next(K)}})}error(K){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=K;const{observers:ne}=this;for(;ne.length;)ne.shift().error(K)}})}complete(){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:K}=this;for(;K.length;)K.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var K;return(null===(K=this.observers)||void 0===K?void 0:K.length)>0}_trySubscribe(K){return this._throwIfClosed(),super._trySubscribe(K)}_subscribe(K){return this._throwIfClosed(),this._checkFinalizedStatuses(K),this._innerSubscribe(K)}_innerSubscribe(K){const{hasError:ne,isStopped:We,observers:Le}=this;return ne||We?$.Lc:(this.currentObservers=null,Le.push(K),new $.w0(()=>{this.currentObservers=null,(0,he.P)(Le,K)}))}_checkFinalizedStatuses(K){const{hasError:ne,thrownError:We,isStopped:Le}=this;ne?K.error(We):Le&&K.complete()}asObservable(){const K=new m.y;return K.source=this,K}}return Ie.create=(q,K)=>new _e(q,K),Ie})();class _e extends pe{constructor(q,K){super(),this.destination=q,this.source=K}next(q){var K,ne;null===(ne=null===(K=this.destination)||void 0===K?void 0:K.next)||void 0===ne||ne.call(K,q)}error(q){var K,ne;null===(ne=null===(K=this.destination)||void 0===K?void 0:K.error)||void 0===ne||ne.call(K,q)}complete(){var q,K;null===(K=null===(q=this.destination)||void 0===q?void 0:q.complete)||void 0===K||K.call(q)}_subscribe(q){var K,ne;return null!==(ne=null===(K=this.source)||void 0===K?void 0:K.subscribe(q))&&void 0!==ne?ne:$.Lc}}},930:(gt,ke,U)=>{U.d(ke,{Hp:()=>ct,Lv:()=>ne});var m=U(576),$=U(727),P=U(2416),le=U(7849),he=U(5032);const we=Ie("C",void 0,void 0);function Ie(Fe,Ne,Ae){return{kind:Fe,value:Ne,error:Ae}}var q=U(3410),K=U(2806);class ne extends $.w0{constructor(Ne){super(),this.isStopped=!1,Ne?(this.destination=Ne,(0,$.Nn)(Ne)&&Ne.add(this)):this.destination=st}static create(Ne,Ae,Ze){return new ct(Ne,Ae,Ze)}next(Ne){this.isStopped?it(function _e(Fe){return Ie("N",Fe,void 0)}(Ne),this):this._next(Ne)}error(Ne){this.isStopped?it(function pe(Fe){return Ie("E",void 0,Fe)}(Ne),this):(this.isStopped=!0,this._error(Ne))}complete(){this.isStopped?it(we,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ne){this.destination.next(Ne)}_error(Ne){try{this.destination.error(Ne)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const We=Function.prototype.bind;function Le(Fe,Ne){return We.call(Fe,Ne)}class Se{constructor(Ne){this.partialObserver=Ne}next(Ne){const{partialObserver:Ae}=this;if(Ae.next)try{Ae.next(Ne)}catch(Ze){Ce(Ze)}}error(Ne){const{partialObserver:Ae}=this;if(Ae.error)try{Ae.error(Ne)}catch(Ze){Ce(Ze)}else Ce(Ne)}complete(){const{partialObserver:Ne}=this;if(Ne.complete)try{Ne.complete()}catch(Ae){Ce(Ae)}}}class ct extends ne{constructor(Ne,Ae,Ze){let ue;if(super(),(0,m.m)(Ne)||!Ne)ue={next:Ne??void 0,error:Ae??void 0,complete:Ze??void 0};else{let fe;this&&P.v.useDeprecatedNextContext?(fe=Object.create(Ne),fe.unsubscribe=()=>this.unsubscribe(),ue={next:Ne.next&&Le(Ne.next,fe),error:Ne.error&&Le(Ne.error,fe),complete:Ne.complete&&Le(Ne.complete,fe)}):ue=Ne}this.destination=new Se(ue)}}function Ce(Fe){P.v.useDeprecatedSynchronousErrorHandling?(0,K.O)(Fe):(0,le.h)(Fe)}function it(Fe,Ne){const{onStoppedNotification:Ae}=P.v;Ae&&q.z.setTimeout(()=>Ae(Fe,Ne))}const st={closed:!0,next:he.Z,error:function ve(Fe){throw Fe},complete:he.Z}},727:(gt,ke,U)=>{U.d(ke,{Lc:()=>we,w0:()=>he,Nn:()=>pe});var m=U(576);const P=(0,U(3888).d)(Ie=>function(K){Ie(this),this.message=K?`${K.length} errors occurred during unsubscription:\n${K.map((ne,We)=>`${We+1}) ${ne.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=K});var le=U(8737);class he{constructor(q){this.initialTeardown=q,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let q;if(!this.closed){this.closed=!0;const{_parentage:K}=this;if(K)if(this._parentage=null,Array.isArray(K))for(const Le of K)Le.remove(this);else K.remove(this);const{initialTeardown:ne}=this;if((0,m.m)(ne))try{ne()}catch(Le){q=Le instanceof P?Le.errors:[Le]}const{_finalizers:We}=this;if(We){this._finalizers=null;for(const Le of We)try{_e(Le)}catch(Se){q=q??[],Se instanceof P?q=[...q,...Se.errors]:q.push(Se)}}if(q)throw new P(q)}}add(q){var K;if(q&&q!==this)if(this.closed)_e(q);else{if(q instanceof he){if(q.closed||q._hasParent(this))return;q._addParent(this)}(this._finalizers=null!==(K=this._finalizers)&&void 0!==K?K:[]).push(q)}}_hasParent(q){const{_parentage:K}=this;return K===q||Array.isArray(K)&&K.includes(q)}_addParent(q){const{_parentage:K}=this;this._parentage=Array.isArray(K)?(K.push(q),K):K?[K,q]:q}_removeParent(q){const{_parentage:K}=this;K===q?this._parentage=null:Array.isArray(K)&&(0,le.P)(K,q)}remove(q){const{_finalizers:K}=this;K&&(0,le.P)(K,q),q instanceof he&&q._removeParent(this)}}he.EMPTY=(()=>{const Ie=new he;return Ie.closed=!0,Ie})();const we=he.EMPTY;function pe(Ie){return Ie instanceof he||Ie&&"closed"in Ie&&(0,m.m)(Ie.remove)&&(0,m.m)(Ie.add)&&(0,m.m)(Ie.unsubscribe)}function _e(Ie){(0,m.m)(Ie)?Ie():Ie.unsubscribe()}},2416:(gt,ke,U)=>{U.d(ke,{v:()=>m});const m={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(gt,ke,U)=>{U.d(ke,{E:()=>$});const $=new(U(9751).y)(he=>he.complete())},8996:(gt,ke,U)=>{U.d(ke,{D:()=>Ne});var m=U(8421),$=U(5363),P=U(9468),we=U(9751),_e=U(2202),Ie=U(576),q=U(9672);function ne(Ae,Ze){if(!Ae)throw new Error("Iterable cannot be null");return new we.y(ue=>{(0,q.f)(ue,Ze,()=>{const fe=Ae[Symbol.asyncIterator]();(0,q.f)(ue,Ze,()=>{fe.next().then(Ee=>{Ee.done?ue.complete():ue.next(Ee.value)})},0,!0)})})}var We=U(3670),Le=U(8239),Se=U(1144),ct=U(6495),Ce=U(2206),ve=U(4532),it=U(3260);function Ne(Ae,Ze){return Ze?function Fe(Ae,Ze){if(null!=Ae){if((0,We.c)(Ae))return function le(Ae,Ze){return(0,m.Xf)(Ae).pipe((0,P.R)(Ze),(0,$.Q)(Ze))}(Ae,Ze);if((0,Se.z)(Ae))return function pe(Ae,Ze){return new we.y(ue=>{let fe=0;return Ze.schedule(function(){fe===Ae.length?ue.complete():(ue.next(Ae[fe++]),ue.closed||this.schedule())})})}(Ae,Ze);if((0,Le.t)(Ae))return function he(Ae,Ze){return(0,m.Xf)(Ae).pipe((0,P.R)(Ze),(0,$.Q)(Ze))}(Ae,Ze);if((0,Ce.D)(Ae))return ne(Ae,Ze);if((0,ct.T)(Ae))return function K(Ae,Ze){return new we.y(ue=>{let fe;return(0,q.f)(ue,Ze,()=>{fe=Ae[_e.h](),(0,q.f)(ue,Ze,()=>{let Ee,te;try{({value:Ee,done:te}=fe.next())}catch(ie){return void ue.error(ie)}te?ue.complete():ue.next(Ee)},0,!0)}),()=>(0,Ie.m)(fe?.return)&&fe.return()})}(Ae,Ze);if((0,it.L)(Ae))return function st(Ae,Ze){return ne((0,it.Q)(Ae),Ze)}(Ae,Ze)}throw(0,ve.z)(Ae)}(Ae,Ze):(0,m.Xf)(Ae)}},8421:(gt,ke,U)=>{U.d(ke,{Xf:()=>We});var m=U(655),$=U(1144),P=U(8239),le=U(9751),he=U(3670),we=U(2206),pe=U(4532),_e=U(6495),Ie=U(3260),q=U(576),K=U(7849),ne=U(8822);function We(Fe){if(Fe instanceof le.y)return Fe;if(null!=Fe){if((0,he.c)(Fe))return function Le(Fe){return new le.y(Ne=>{const Ae=Fe[ne.L]();if((0,q.m)(Ae.subscribe))return Ae.subscribe(Ne);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Fe);if((0,$.z)(Fe))return function Se(Fe){return new le.y(Ne=>{for(let Ae=0;Ae<Fe.length&&!Ne.closed;Ae++)Ne.next(Fe[Ae]);Ne.complete()})}(Fe);if((0,P.t)(Fe))return function ct(Fe){return new le.y(Ne=>{Fe.then(Ae=>{Ne.closed||(Ne.next(Ae),Ne.complete())},Ae=>Ne.error(Ae)).then(null,K.h)})}(Fe);if((0,we.D)(Fe))return ve(Fe);if((0,_e.T)(Fe))return function Ce(Fe){return new le.y(Ne=>{for(const Ae of Fe)if(Ne.next(Ae),Ne.closed)return;Ne.complete()})}(Fe);if((0,Ie.L)(Fe))return function it(Fe){return ve((0,Ie.Q)(Fe))}(Fe)}throw(0,pe.z)(Fe)}function ve(Fe){return new le.y(Ne=>{(function st(Fe,Ne){var Ae,Ze,ue,fe;return(0,m.mG)(this,void 0,void 0,function*(){try{for(Ae=(0,m.KL)(Fe);!(Ze=yield Ae.next()).done;)if(Ne.next(Ze.value),Ne.closed)return}catch(Ee){ue={error:Ee}}finally{try{Ze&&!Ze.done&&(fe=Ae.return)&&(yield fe.call(Ae))}finally{if(ue)throw ue.error}}Ne.complete()})})(Fe,Ne).catch(Ae=>Ne.error(Ae))})}},6451:(gt,ke,U)=>{U.d(ke,{T:()=>we});var m=U(8189),$=U(8421),P=U(515),le=U(7669),he=U(8996);function we(...pe){const _e=(0,le.yG)(pe),Ie=(0,le._6)(pe,1/0),q=pe;return q.length?1===q.length?(0,$.Xf)(q[0]):(0,m.J)(Ie)((0,he.D)(q,_e)):P.E}},5403:(gt,ke,U)=>{U.d(ke,{x:()=>$});var m=U(930);function $(le,he,we,pe,_e){return new P(le,he,we,pe,_e)}class P extends m.Lv{constructor(he,we,pe,_e,Ie,q){super(he),this.onFinalize=Ie,this.shouldUnsubscribe=q,this._next=we?function(K){try{we(K)}catch(ne){he.error(ne)}}:super._next,this._error=_e?function(K){try{_e(K)}catch(ne){he.error(ne)}finally{this.unsubscribe()}}:super._error,this._complete=pe?function(){try{pe()}catch(K){he.error(K)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var he;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:we}=this;super.unsubscribe(),!we&&(null===(he=this.onFinalize)||void 0===he||he.call(this))}}}},4004:(gt,ke,U)=>{U.d(ke,{U:()=>P});var m=U(4482),$=U(5403);function P(le,he){return(0,m.e)((we,pe)=>{let _e=0;we.subscribe((0,$.x)(pe,Ie=>{pe.next(le.call(he,Ie,_e++))}))})}},8189:(gt,ke,U)=>{U.d(ke,{J:()=>P});var m=U(5577),$=U(4671);function P(le=1/0){return(0,m.z)($.y,le)}},5577:(gt,ke,U)=>{U.d(ke,{z:()=>_e});var m=U(4004),$=U(8421),P=U(4482),le=U(9672),he=U(5403),pe=U(576);function _e(Ie,q,K=1/0){return(0,pe.m)(q)?_e((ne,We)=>(0,m.U)((Le,Se)=>q(ne,Le,We,Se))((0,$.Xf)(Ie(ne,We))),K):("number"==typeof q&&(K=q),(0,P.e)((ne,We)=>function we(Ie,q,K,ne,We,Le,Se,ct){const Ce=[];let ve=0,it=0,st=!1;const Fe=()=>{st&&!Ce.length&&!ve&&q.complete()},Ne=Ze=>ve<ne?Ae(Ze):Ce.push(Ze),Ae=Ze=>{Le&&q.next(Ze),ve++;let ue=!1;(0,$.Xf)(K(Ze,it++)).subscribe((0,he.x)(q,fe=>{We?.(fe),Le?Ne(fe):q.next(fe)},()=>{ue=!0},void 0,()=>{if(ue)try{for(ve--;Ce.length&&ve<ne;){const fe=Ce.shift();Se?(0,le.f)(q,Se,()=>Ae(fe)):Ae(fe)}Fe()}catch(fe){q.error(fe)}}))};return Ie.subscribe((0,he.x)(q,Ne,()=>{st=!0,Fe()})),()=>{ct?.()}}(ne,We,Ie,K)))}},5363:(gt,ke,U)=>{U.d(ke,{Q:()=>le});var m=U(9672),$=U(4482),P=U(5403);function le(he,we=0){return(0,$.e)((pe,_e)=>{pe.subscribe((0,P.x)(_e,Ie=>(0,m.f)(_e,he,()=>_e.next(Ie),we),()=>(0,m.f)(_e,he,()=>_e.complete(),we),Ie=>(0,m.f)(_e,he,()=>_e.error(Ie),we)))})}},3099:(gt,ke,U)=>{U.d(ke,{B:()=>he});var m=U(8421),$=U(7579),P=U(930),le=U(4482);function he(pe={}){const{connector:_e=(()=>new $.x),resetOnError:Ie=!0,resetOnComplete:q=!0,resetOnRefCountZero:K=!0}=pe;return ne=>{let We,Le,Se,ct=0,Ce=!1,ve=!1;const it=()=>{Le?.unsubscribe(),Le=void 0},st=()=>{it(),We=Se=void 0,Ce=ve=!1},Fe=()=>{const Ne=We;st(),Ne?.unsubscribe()};return(0,le.e)((Ne,Ae)=>{ct++,!ve&&!Ce&&it();const Ze=Se=Se??_e();Ae.add(()=>{ct--,0===ct&&!ve&&!Ce&&(Le=we(Fe,K))}),Ze.subscribe(Ae),!We&&ct>0&&(We=new P.Hp({next:ue=>Ze.next(ue),error:ue=>{ve=!0,it(),Le=we(st,Ie,ue),Ze.error(ue)},complete:()=>{Ce=!0,it(),Le=we(st,q),Ze.complete()}}),(0,m.Xf)(Ne).subscribe(We))})(ne)}}function we(pe,_e,...Ie){if(!0===_e)return void pe();if(!1===_e)return;const q=new P.Hp({next:()=>{q.unsubscribe(),pe()}});return _e(...Ie).subscribe(q)}},9468:(gt,ke,U)=>{U.d(ke,{R:()=>$});var m=U(4482);function $(P,le=0){return(0,m.e)((he,we)=>{we.add(P.schedule(()=>he.subscribe(we),le))})}},8505:(gt,ke,U)=>{U.d(ke,{b:()=>he});var m=U(576),$=U(4482),P=U(5403),le=U(4671);function he(we,pe,_e){const Ie=(0,m.m)(we)||pe||_e?{next:we,error:pe,complete:_e}:we;return Ie?(0,$.e)((q,K)=>{var ne;null===(ne=Ie.subscribe)||void 0===ne||ne.call(Ie);let We=!0;q.subscribe((0,P.x)(K,Le=>{var Se;null===(Se=Ie.next)||void 0===Se||Se.call(Ie,Le),K.next(Le)},()=>{var Le;We=!1,null===(Le=Ie.complete)||void 0===Le||Le.call(Ie),K.complete()},Le=>{var Se;We=!1,null===(Se=Ie.error)||void 0===Se||Se.call(Ie,Le),K.error(Le)},()=>{var Le,Se;We&&(null===(Le=Ie.unsubscribe)||void 0===Le||Le.call(Ie)),null===(Se=Ie.finalize)||void 0===Se||Se.call(Ie)}))}):le.y}},4408:(gt,ke,U)=>{U.d(ke,{o:()=>he});var m=U(727);class $ extends m.w0{constructor(pe,_e){super()}schedule(pe,_e=0){return this}}const P={setInterval(we,pe,..._e){const{delegate:Ie}=P;return Ie?.setInterval?Ie.setInterval(we,pe,..._e):setInterval(we,pe,..._e)},clearInterval(we){const{delegate:pe}=P;return(pe?.clearInterval||clearInterval)(we)},delegate:void 0};var le=U(8737);class he extends ${constructor(pe,_e){super(pe,_e),this.scheduler=pe,this.work=_e,this.pending=!1}schedule(pe,_e=0){if(this.closed)return this;this.state=pe;const Ie=this.id,q=this.scheduler;return null!=Ie&&(this.id=this.recycleAsyncId(q,Ie,_e)),this.pending=!0,this.delay=_e,this.id=this.id||this.requestAsyncId(q,this.id,_e),this}requestAsyncId(pe,_e,Ie=0){return P.setInterval(pe.flush.bind(pe,this),Ie)}recycleAsyncId(pe,_e,Ie=0){if(null!=Ie&&this.delay===Ie&&!1===this.pending)return _e;P.clearInterval(_e)}execute(pe,_e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ie=this._execute(pe,_e);if(Ie)return Ie;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(pe,_e){let q,Ie=!1;try{this.work(pe)}catch(K){Ie=!0,q=K||new Error("Scheduled action threw falsy error")}if(Ie)return this.unsubscribe(),q}unsubscribe(){if(!this.closed){const{id:pe,scheduler:_e}=this,{actions:Ie}=_e;this.work=this.state=this.scheduler=null,this.pending=!1,(0,le.P)(Ie,this),null!=pe&&(this.id=this.recycleAsyncId(_e,pe,null)),this.delay=null,super.unsubscribe()}}}},7565:(gt,ke,U)=>{U.d(ke,{v:()=>P});var m=U(6063);class ${constructor(he,we=$.now){this.schedulerActionCtor=he,this.now=we}schedule(he,we=0,pe){return new this.schedulerActionCtor(this,he).schedule(pe,we)}}$.now=m.l.now;class P extends ${constructor(he,we=$.now){super(he,we),this.actions=[],this._active=!1,this._scheduled=void 0}flush(he){const{actions:we}=this;if(this._active)return void we.push(he);let pe;this._active=!0;do{if(pe=he.execute(he.state,he.delay))break}while(he=we.shift());if(this._active=!1,pe){for(;he=we.shift();)he.unsubscribe();throw pe}}}},4986:(gt,ke,U)=>{U.d(ke,{z:()=>P});var m=U(4408);const P=new(U(7565).v)(m.o)},6063:(gt,ke,U)=>{U.d(ke,{l:()=>m});const m={now:()=>(m.delegate||Date).now(),delegate:void 0}},3410:(gt,ke,U)=>{U.d(ke,{z:()=>m});const m={setTimeout($,P,...le){const{delegate:he}=m;return he?.setTimeout?he.setTimeout($,P,...le):setTimeout($,P,...le)},clearTimeout($){const{delegate:P}=m;return(P?.clearTimeout||clearTimeout)($)},delegate:void 0}},2202:(gt,ke,U)=>{U.d(ke,{h:()=>$});const $=function m(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(gt,ke,U)=>{U.d(ke,{L:()=>m});const m="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(gt,ke,U)=>{U.d(ke,{_6:()=>we,jO:()=>le,yG:()=>he});var m=U(576);function P(pe){return pe[pe.length-1]}function le(pe){return(0,m.m)(P(pe))?pe.pop():void 0}function he(pe){return function $(pe){return pe&&(0,m.m)(pe.schedule)}(P(pe))?pe.pop():void 0}function we(pe,_e){return"number"==typeof P(pe)?pe.pop():_e}},8737:(gt,ke,U)=>{function m($,P){if($){const le=$.indexOf(P);0<=le&&$.splice(le,1)}}U.d(ke,{P:()=>m})},3888:(gt,ke,U)=>{function m($){const le=$(he=>{Error.call(he),he.stack=(new Error).stack});return le.prototype=Object.create(Error.prototype),le.prototype.constructor=le,le}U.d(ke,{d:()=>m})},2806:(gt,ke,U)=>{U.d(ke,{O:()=>le,x:()=>P});var m=U(2416);let $=null;function P(he){if(m.v.useDeprecatedSynchronousErrorHandling){const we=!$;if(we&&($={errorThrown:!1,error:null}),he(),we){const{errorThrown:pe,error:_e}=$;if($=null,pe)throw _e}}else he()}function le(he){m.v.useDeprecatedSynchronousErrorHandling&&$&&($.errorThrown=!0,$.error=he)}},9672:(gt,ke,U)=>{function m($,P,le,he=0,we=!1){const pe=P.schedule(function(){le(),we?$.add(this.schedule(null,he)):this.unsubscribe()},he);if($.add(pe),!we)return pe}U.d(ke,{f:()=>m})},4671:(gt,ke,U)=>{function m($){return $}U.d(ke,{y:()=>m})},1144:(gt,ke,U)=>{U.d(ke,{z:()=>m});const m=$=>$&&"number"==typeof $.length&&"function"!=typeof $},2206:(gt,ke,U)=>{U.d(ke,{D:()=>$});var m=U(576);function $(P){return Symbol.asyncIterator&&(0,m.m)(P?.[Symbol.asyncIterator])}},576:(gt,ke,U)=>{function m($){return"function"==typeof $}U.d(ke,{m:()=>m})},3670:(gt,ke,U)=>{U.d(ke,{c:()=>P});var m=U(8822),$=U(576);function P(le){return(0,$.m)(le[m.L])}},6495:(gt,ke,U)=>{U.d(ke,{T:()=>P});var m=U(2202),$=U(576);function P(le){return(0,$.m)(le?.[m.h])}},8239:(gt,ke,U)=>{U.d(ke,{t:()=>$});var m=U(576);function $(P){return(0,m.m)(P?.then)}},3260:(gt,ke,U)=>{U.d(ke,{L:()=>le,Q:()=>P});var m=U(655),$=U(576);function P(he){return(0,m.FC)(this,arguments,function*(){const pe=he.getReader();try{for(;;){const{value:_e,done:Ie}=yield(0,m.qq)(pe.read());if(Ie)return yield(0,m.qq)(void 0);yield yield(0,m.qq)(_e)}}finally{pe.releaseLock()}})}function le(he){return(0,$.m)(he?.getReader)}},4482:(gt,ke,U)=>{U.d(ke,{A:()=>$,e:()=>P});var m=U(576);function $(le){return(0,m.m)(le?.lift)}function P(le){return he=>{if($(he))return he.lift(function(we){try{return le(we,this)}catch(pe){this.error(pe)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(gt,ke,U)=>{function m(){}U.d(ke,{Z:()=>m})},9635:(gt,ke,U)=>{U.d(ke,{U:()=>P,z:()=>$});var m=U(4671);function $(...le){return P(le)}function P(le){return 0===le.length?m.y:1===le.length?le[0]:function(we){return le.reduce((pe,_e)=>_e(pe),we)}}},7849:(gt,ke,U)=>{U.d(ke,{h:()=>P});var m=U(2416),$=U(3410);function P(le){$.z.setTimeout(()=>{const{onUnhandledError:he}=m.v;if(!he)throw le;he(le)})}},4532:(gt,ke,U)=>{function m($){return new TypeError(`You provided ${null!==$&&"object"==typeof $?"an invalid object":`'${$}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}U.d(ke,{z:()=>m})},655:(gt,ke,U)=>{function le(te,ie){var ye={};for(var de in te)Object.prototype.hasOwnProperty.call(te,de)&&ie.indexOf(de)<0&&(ye[de]=te[de]);if(null!=te&&"function"==typeof Object.getOwnPropertySymbols){var je=0;for(de=Object.getOwnPropertySymbols(te);je<de.length;je++)ie.indexOf(de[je])<0&&Object.prototype.propertyIsEnumerable.call(te,de[je])&&(ye[de[je]]=te[de[je]])}return ye}function _e(te,ie,ye,de){return new(ye||(ye=Promise))(function($e,wt){function tn(Tn){try{Qe(de.next(Tn))}catch($n){wt($n)}}function qt(Tn){try{Qe(de.throw(Tn))}catch($n){wt($n)}}function Qe(Tn){Tn.done?$e(Tn.value):function je($e){return $e instanceof ye?$e:new ye(function(wt){wt($e)})}(Tn.value).then(tn,qt)}Qe((de=de.apply(te,ie||[])).next())})}function Ce(te){return this instanceof Ce?(this.v=te,this):new Ce(te)}function ve(te,ie,ye){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var je,de=ye.apply(te,ie||[]),$e=[];return je={},wt("next"),wt("throw"),wt("return"),je[Symbol.asyncIterator]=function(){return this},je;function wt(ln){de[ln]&&(je[ln]=function(nn){return new Promise(function(Kt,Ht){$e.push([ln,nn,Kt,Ht])>1||tn(ln,nn)})})}function tn(ln,nn){try{!function qt(ln){ln.value instanceof Ce?Promise.resolve(ln.value.v).then(Qe,Tn):$n($e[0][2],ln)}(de[ln](nn))}catch(Kt){$n($e[0][3],Kt)}}function Qe(ln){tn("next",ln)}function Tn(ln){tn("throw",ln)}function $n(ln,nn){ln(nn),$e.shift(),$e.length&&tn($e[0][0],$e[0][1])}}function st(te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ye,ie=te[Symbol.asyncIterator];return ie?ie.call(te):(te=function ne(te){var ie="function"==typeof Symbol&&Symbol.iterator,ye=ie&&te[ie],de=0;if(ye)return ye.call(te);if(te&&"number"==typeof te.length)return{next:function(){return te&&de>=te.length&&(te=void 0),{value:te&&te[de++],done:!te}}};throw new TypeError(ie?"Object is not iterable.":"Symbol.iterator is not defined.")}(te),ye={},de("next"),de("throw"),de("return"),ye[Symbol.asyncIterator]=function(){return this},ye);function de($e){ye[$e]=te[$e]&&function(wt){return new Promise(function(tn,qt){!function je($e,wt,tn,qt){Promise.resolve(qt).then(function(Qe){$e({value:Qe,done:tn})},wt)}(tn,qt,(wt=te[$e](wt)).done,wt.value)})}}}U.d(ke,{FC:()=>ve,KL:()=>st,_T:()=>le,mG:()=>_e,qq:()=>Ce})},4650:(gt,ke,U)=>{U.d(ke,{$8M:()=>Hu,$Z:()=>vE,AFp:()=>gm,AaK:()=>_e,CRH:()=>ET,CZH:()=>Af,CqO:()=>ov,D6c:()=>sC,EJc:()=>zx,F$t:()=>dI,F4k:()=>lf,FYo:()=>Nb,FiY:()=>Xe,G48:()=>QT,Gf:()=>bT,GfV:()=>cy,Hsn:()=>QA,JOm:()=>pu,LFG:()=>ar,LSH:()=>Sb,Lbi:()=>uw,Lck:()=>ex,MMx:()=>Hv,NdJ:()=>av,OlP:()=>xn,PXZ:()=>WT,Q6J:()=>uI,QGY:()=>Nd,QP$:()=>Ye,QbO:()=>Hx,Qsj:()=>TS,R0b:()=>Ys,RDi:()=>_b,Rgc:()=>Bd,SBq:()=>ya,Sil:()=>Rf,Suo:()=>Sx,TTD:()=>xs,TgZ:()=>kd,X6Q:()=>Of,XFs:()=>ot,Xpm:()=>Y,Xts:()=>Zi,Y36:()=>bd,YKP:()=>wf,Yjl:()=>se,Yz7:()=>nn,Z0I:()=>ro,ZZ4:()=>Gd,_UZ:()=>lr,_Vd:()=>hu,_c5:()=>Vf,_uU:()=>_v,aQg:()=>Vn,c2e:()=>Gx,cJS:()=>Ht,cg1:()=>Gg,dDg:()=>Cm,dqk:()=>Lt,eFA:()=>yw,ekj:()=>hv,eoX:()=>Dm,f3M:()=>C,g9A:()=>Mf,h0i:()=>xr,hGG:()=>iR,iGM:()=>ew,ifc:()=>_t,ip1:()=>wc,jDz:()=>zv,kL8:()=>TM,lG2:()=>nr,lqb:()=>Yl,lri:()=>Vr,oAB:()=>It,q4F:()=>CS,qLn:()=>pd,qOj:()=>Yi,qZA:()=>cc,rWj:()=>Zr,sBO:()=>km,sIi:()=>Cd,s_b:()=>If,soG:()=>xf,tb:()=>_m,tp0:()=>kt,uIk:()=>ev,vHH:()=>Se,vpe:()=>Da,wAp:()=>Nt,xp6:()=>aE,z2F:()=>xm,zSh:()=>ws,zs3:()=>vd});var m=U(7579),$=U(727),P=U(9751),le=U(6451),he=U(3099);function we(s){for(let o in s)if(s[o]===we)return o;throw Error("Could not find renamed property on target object.")}function pe(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function _e(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(_e).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function Ie(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const q=we({__forward_ref__:we});function K(s){return s.__forward_ref__=K,s.toString=function(){return _e(this())},s}function ne(s){return function We(s){return"function"==typeof s&&s.hasOwnProperty(q)&&s.__forward_ref__===K}(s)?s():s}class Se extends Error{constructor(o,u){super(function ct(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,u)),this.code=o}}function Ce(s){return"string"==typeof s?s:null==s?"":String(s)}function Ne(s,o){throw new Se(-201,!1)}function qt(s,o){null==s&&function Qe(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function nn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Ht(s){return{providers:s.providers||[],imports:s.imports||[]}}function Ir(s){return Tr(s,Xr)||Tr(s,Si)}function ro(s){return null!==Ir(s)}function Tr(s,o){return s.hasOwnProperty(o)?s[o]:null}function ji(s){return s&&(s.hasOwnProperty(Hn)||s.hasOwnProperty($i))?s[Hn]:null}const Xr=we({\u0275prov:we}),Hn=we({\u0275inj:we}),Si=we({ngInjectableDef:we}),$i=we({ngInjectorDef:we});var ot=(()=>((ot=ot||{})[ot.Default=0]="Default",ot[ot.Host=1]="Host",ot[ot.Self=2]="Self",ot[ot.SkipSelf=4]="SkipSelf",ot[ot.Optional=8]="Optional",ot))();let _r;function vn(s){const o=_r;return _r=s,o}function yr(s,o,u){const c=Ir(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&ot.Optional?null:void 0!==o?o:void Ne(_e(s))}function An(s){return{toString:s}.toString()}var Mn=(()=>((Mn=Mn||{})[Mn.OnPush=0]="OnPush",Mn[Mn.Default=1]="Default",Mn))(),_t=(()=>{return(s=_t||(_t={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",_t;var s})();const Lt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Cr={},Rt=[],Pr=we({\u0275cmp:we}),Ut=we({\u0275dir:we}),Jr=we({\u0275pipe:we}),Yt=we({\u0275mod:we}),J=we({\u0275fac:we}),z=we({__NG_ELEMENT_ID__:we});let H=0;function Y(s){return An(()=>{const u=!0===s.standalone,c={},h={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Mn.OnPush,directiveDefs:null,pipeDefs:null,standalone:u,dependencies:u&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||Rt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||_t.Emulated,id:"c"+H++,styles:s.styles||Rt,_:null,setInput:null,schemas:s.schemas||null,tView:null},p=s.dependencies,v=s.features;return h.inputs=fn(s.inputs,c),h.outputs=fn(s.outputs),v&&v.forEach(b=>b(h)),h.directiveDefs=p?()=>("function"==typeof p?p():p).map(xe).filter(qe):null,h.pipeDefs=p?()=>("function"==typeof p?p():p).map(Te).filter(qe):null,h})}function xe(s){return G(s)||W(s)}function qe(s){return null!==s}function It(s){return An(()=>({type:s.type,bootstrap:s.bootstrap||Rt,declarations:s.declarations||Rt,imports:s.imports||Rt,exports:s.exports||Rt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function fn(s,o){if(null==s)return Cr;const u={};for(const c in s)if(s.hasOwnProperty(c)){let h=s[c],p=h;Array.isArray(h)&&(p=h[1],h=h[0]),u[h]=c,o&&(o[h]=p)}return u}const nr=Y;function se(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function G(s){return s[Pr]||null}function W(s){return s[Ut]||null}function Te(s){return s[Jr]||null}function Ye(s){const o=G(s)||W(s)||Te(s);return null!==o&&o.standalone}function bt(s,o){const u=s[Yt]||null;if(!u&&!0===o)throw new Error(`Type ${_e(s)} does not have '\u0275mod' property.`);return u}function rr(s){return Array.isArray(s)&&"object"==typeof s[1]}function li(s){return Array.isArray(s)&&!0===s[1]}function jo(s){return 0!=(8&s.flags)}function Tl(s){return 2==(2&s.flags)}function La(s){return 1==(1&s.flags)}function ti(s){return null!==s.template}function Cl(s){return 0!=(256&s[2])}function Dr(s,o){return s.hasOwnProperty(J)?s[J]:null}class zo{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function xs(){return Vc}function Vc(s){return s.type.prototype.ngOnChanges&&(s.setInput=Sl),ku}function ku(){const s=Wo(this),o=s?.current;if(o){const u=s.previous;if(u===Cr)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function Sl(s,o,u,c){const h=Wo(s)||function Vp(s,o){return s[jc]=o}(s,{previous:Cr,current:null}),p=h.current||(h.current={}),v=h.previous,b=this.declaredInputs[u],T=v[b];p[b]=new zo(T&&T.currentValue,o,v===Cr),s[c]=o}xs.ngInherit=!0;const jc="__ngSimpleChanges__";function Wo(s){return s[jc]||null}function Fn(s){for(;Array.isArray(s);)s=s[0];return s}function Sr(s,o){return Fn(o[s.index])}function Ko(s,o){return s.data[o]}function cn(s,o){const u=o[s];return rr(u)?u:u[0]}function Pu(s){return 4==(4&s[2])}function Rs(s){return 64==(64&s[2])}function fi(s,o){return null==o?null:s[o]}function Ba(s){s[18]=0}function zn(s,o){s[5]+=o;let u=s,c=s[3];for(;null!==c&&(1===o&&1===u[5]||-1===o&&0===u[5]);)c[5]+=o,u=c,c=c[3]}const Ot={lFrame:Ya(null),bindingsEnabled:!0};function po(){return Ot.bindingsEnabled}function Pe(){return Ot.lFrame.lView}function Qt(){return Ot.lFrame.tView}function ir(){let s=Yo();for(;null!==s&&64===s.type;)s=s.parent;return s}function Yo(){return Ot.lFrame.currentTNode}function Gr(s,o){const u=Ot.lFrame;u.currentTNode=s,u.isParent=o}function Lu(){return Ot.lFrame.isParent}function Qo(){Ot.lFrame.isParent=!1}function qa(){return Ot.lFrame.bindingIndex++}function zc(s,o){const u=Ot.lFrame;u.bindingIndex=u.bindingRootIndex=s,Xo(o)}function Xo(s){Ot.lFrame.currentDirectiveIndex=s}function Ka(){return Ot.lFrame.currentQueryIndex}function kl(s){Ot.lFrame.currentQueryIndex=s}function Za(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Wc(s,o,u){if(u&ot.SkipSelf){let h=o,p=s;for(;!(h=h.parent,null!==h||u&ot.Host||(h=Za(p),null===h||(p=p[15],10&h.type))););if(null===h)return!1;o=h,s=p}const c=Ot.lFrame=Sh();return c.currentTNode=o,c.lView=s,!0}function Jo(s){const o=Sh(),u=s[1];Ot.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function Sh(){const s=Ot.lFrame,o=null===s?null:s.child;return null===o?Ya(s):o}function Ya(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Ah(){const s=Ot.lFrame;return Ot.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const qc=Ah;function ks(){const s=Ah();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function On(){return Ot.lFrame.selectedIndex}function gs(s){Ot.lFrame.selectedIndex=s}function Ln(){const s=Ot.lFrame;return Ko(s.tView,s.selectedIndex)}function Ll(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const p=s.data[u].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:b,ngAfterViewInit:T,ngAfterViewChecked:M,ngOnDestroy:N}=p;v&&(s.contentHooks||(s.contentHooks=[])).push(-u,v),b&&((s.contentHooks||(s.contentHooks=[])).push(u,b),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,b)),T&&(s.viewHooks||(s.viewHooks=[])).push(-u,T),M&&((s.viewHooks||(s.viewHooks=[])).push(u,M),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,M)),null!=N&&(s.destroyHooks||(s.destroyHooks=[])).push(u,N)}}function ea(s,o,u){na(s,o,3,u)}function ta(s,o,u,c){(3&s[2])===u&&na(s,o,u,c)}function Qc(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function na(s,o,u,c){const p=c??-1,v=o.length-1;let b=0;for(let T=void 0!==c?65535&s[18]:0;T<v;T++)if("number"==typeof o[T+1]){if(b=o[T],null!=c&&b>=c)break}else o[T]<0&&(s[18]+=65536),(b<p||-1==p)&&(Xc(s,u,o,T),s[18]=(4294901760&s[18])+T+2),T++}function Xc(s,o,u,c){const h=u[c]<0,p=u[c+1],b=s[h?-u[c]:u[c]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{p.call(b)}finally{}}}else try{p.call(b)}finally{}}class pi{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function ms(s,o,u){let c=0;for(;c<u.length;){const h=u[c];if("number"==typeof h){if(0!==h)break;c++;const p=u[c++],v=u[c++],b=u[c++];s.setAttribute(o,v,b,p)}else{const p=h,v=u[++c];Ul(p)?s.setProperty(o,p,v):s.setAttribute(o,p,v),c++}}return c}function Xa(s){return 3===s||4===s||6===s}function Ul(s){return 64===s.charCodeAt(0)}function Ja(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const h=o[c];"number"==typeof h?u=h:0===u||ed(s,u,h,null,-1===u||2===u?o[++c]:null)}}return s}function ed(s,o,u,c,h){let p=0,v=s.length;if(-1===o)v=-1;else for(;p<s.length;){const b=s[p++];if("number"==typeof b){if(b===o){v=-1;break}if(b>o){v=p-1;break}}}for(;p<s.length;){const b=s[p];if("number"==typeof b)break;if(b===u){if(null===c)return void(null!==h&&(s[p+1]=h));if(c===s[p+1])return void(s[p+2]=h)}p++,null!==c&&p++,null!==h&&p++}-1!==v&&(s.splice(v,0,o),p=v+1),s.splice(p++,0,u),null!==c&&s.splice(p++,0,c),null!==h&&s.splice(p++,0,h)}function Rh(s){return-1!==s}function or(s){return 32767&s}function Ps(s,o){let u=function kh(s){return s>>16}(s),c=o;for(;u>0;)c=c[15],u--;return c}let Bl=!0;function eu(s){const o=Bl;return Bl=s,o}let td=0;const ri={};function _s(s,o){const u=Vu(s,o);if(-1!==u)return u;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,Vl(c.data,s),Vl(o,null),Vl(c.blueprint,null));const h=tu(s,o),p=s.injectorIndex;if(Rh(h)){const v=or(h),b=Ps(h,o),T=b[1].data;for(let M=0;M<8;M++)o[p+M]=b[v+M]|T[v+M]}return o[p+8]=h,p}function Vl(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Vu(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function tu(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,h=o;for(;null!==h;){if(c=la(h),null===c)return-1;if(u++,h=h[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function go(s,o,u){!function nd(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(z)&&(c=u[z]),null==c&&(c=u[z]=td++);const h=255&c;o.data[s+(h>>5)]|=1<<h}(s,o,u)}function ia(s,o,u){if(u&ot.Optional)return s;Ne()}function mo(s,o,u,c){if(u&ot.Optional&&void 0===c&&(c=null),0==(u&(ot.Self|ot.Host))){const h=s[9],p=vn(void 0);try{return h?h.get(o,c,u&ot.Optional):yr(o,c,u&ot.Optional)}finally{vn(p)}}return ia(c,0,u)}function sa(s,o,u,c=ot.Default,h){if(null!==s){if(1024&o[2]){const v=function Oh(s,o,u,c,h){let p=s,v=o;for(;null!==p&&null!==v&&1024&v[2]&&!(256&v[2]);){const b=rd(p,v,u,c|ot.Self,ri);if(b!==ri)return b;let T=p.parent;if(!T){const M=v[21];if(M){const N=M.get(u,ri,c);if(N!==ri)return N}T=la(v),v=v[15]}p=T}return h}(s,o,u,c,ri);if(v!==ri)return v}const p=rd(s,o,u,c,ri);if(p!==ri)return p}return mo(o,u,c,h)}function rd(s,o,u,c,h){const p=function Ph(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(z)?s[z]:void 0;return"number"==typeof o?o>=0?255&o:jl:o}(u);if("function"==typeof p){if(!Wc(o,s,c))return c&ot.Host?ia(h,0,c):mo(o,u,c,h);try{const v=p(c);if(null!=v||c&ot.Optional)return v;Ne()}finally{qc()}}else if("number"==typeof p){let v=null,b=Vu(s,o),T=-1,M=c&ot.Host?o[16][6]:null;for((-1===b||c&ot.SkipSelf)&&(T=-1===b?tu(s,o):o[b+8],-1!==T&&$u(c,!1)?(v=o[1],b=or(T),o=Ps(T,o)):b=-1);-1!==b;){const N=o[1];if(oa(p,b,N.data)){const B=ju(b,o,u,v,c,M);if(B!==ri)return B}T=o[b+8],-1!==T&&$u(c,o[1].data[b+8]===M)&&oa(p,b,o)?(v=N,b=or(T),o=Ps(T,o)):b=-1}}return h}function ju(s,o,u,c,h,p){const v=o[1],b=v.data[s+8],N=ru(b,v,u,null==c?Tl(b)&&Bl:c!=v&&0!=(3&b.type),h&ot.Host&&p===b);return null!==N?Wi(o,v,N,b):ri}function ru(s,o,u,c,h){const p=s.providerIndexes,v=o.data,b=1048575&p,T=s.directiveStart,N=p>>20,X=h?b+N:s.directiveEnd;for(let oe=c?b:b+N;oe<X;oe++){const Me=v[oe];if(oe<T&&u===Me||oe>=T&&Me.type===u)return oe}if(h){const oe=v[T];if(oe&&ti(oe)&&oe.type===u)return T}return null}function Wi(s,o,u,c){let h=s[u];const p=o.data;if(function Fl(s){return s instanceof pi}(h)){const v=h;v.resolving&&function it(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Se(-200,`Circular dependency in DI detected for ${s}${u}`)}(function ve(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Ce(s)}(p[u]));const b=eu(v.canSeeViewProviders);v.resolving=!0;const T=v.injectImpl?vn(v.injectImpl):null;Wc(s,c,ot.Default);try{h=s[u]=v.factory(void 0,p,s,c),o.firstCreatePass&&u>=c.directiveStart&&function Yc(s,o,u){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:p}=o.type.prototype;if(c){const v=Vc(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,v),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,v)}h&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,h),p&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,p),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,p))}(u,p[u],o)}finally{null!==T&&vn(T),eu(b),v.resolving=!1,qc()}}return h}function oa(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function $u(s,o){return!(s&ot.Self||s&ot.Host&&o)}class aa{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return sa(this._tNode,this._lView,o,c,u)}}function jl(){return new aa(ir(),Pe())}function la(s){const o=s[1],u=o.type;return 2===u?o.declTNode:1===u?s[6]:null}function Hu(s){return function nu(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let h=0;for(;h<c;){const p=u[h];if(Xa(p))break;if(0===p)h+=2;else if("number"==typeof p)for(h++;h<c&&"string"==typeof u[h];)h++;else{if(p===o)return u[h+1];h+=2}}}return null}(ir(),s)}const ca="__parameters__";function ha(s,o,u){return An(()=>{const c=function $l(s){return function(...u){if(s){const c=s(...u);for(const h in c)this[h]=c[h]}}}(o);function h(...p){if(this instanceof h)return c.apply(this,p),this;const v=new h(...p);return b.annotation=v,b;function b(T,M,N){const B=T.hasOwnProperty(ca)?T[ca]:Object.defineProperty(T,ca,{value:[]})[ca];for(;B.length<=N;)B.push(null);return(B[N]=B[N]||[]).push(v),T}}return u&&(h.prototype=Object.create(u.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class xn{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=nn({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ar(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let c=s[u];Array.isArray(c)?(o===s&&(o=s.slice(0,u)),Ar(c,o)):o!==s&&o.push(c)}return o}function Os(s,o){s.forEach(u=>Array.isArray(u)?Os(u,o):o(u))}function Ls(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function bo(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function vs(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}function ii(s,o,u){let c=zr(s,o);return c>=0?s[1|c]=u:(c=~c,function Wp(s,o,u,c){let h=s.length;if(h==o)s.push(u,c);else if(1===h)s.push(c,s[0]),s[0]=u;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=u,s[o+1]=c}}(s,c,o,u)),c}function zu(s,o){const u=zr(s,o);if(u>=0)return s[1|u]}function zr(s,o){return function Lr(s,o,u){let c=0,h=s.length>>u;for(;h!==c;){const p=c+(h-c>>1),v=s[p<<u];if(o===v)return p<<u;v>o?h=p:c=p+1}return~(h<<u)}(s,o,1)}const fa={},zl="__NG_DI_FLAG__",pa="ngTempTokenPath",ad=/\n/gm,ud="__source";let qu;function Eo(s){const o=qu;return qu=s,o}function qp(s,o=ot.Default){if(void 0===qu)throw new Se(-203,!1);return null===qu?yr(s,void 0,o):qu.get(s,o&ot.Optional?null:void 0,o)}function ar(s,o=ot.Default){return(function Gn(){return _r}()||qp)(ne(s),o)}function C(s,o=ot.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),ar(s,o)}function S(s){const o=[];for(let u=0;u<s.length;u++){const c=ne(s[u]);if(Array.isArray(c)){if(0===c.length)throw new Se(900,!1);let h,p=ot.Default;for(let v=0;v<c.length;v++){const b=c[v],T=j(b);"number"==typeof T?-1===T?h=b.token:p|=T:h=b}o.push(ar(h,p))}else o.push(ar(c))}return o}function k(s,o){return s[zl]=o,s.prototype[zl]=o,s}function j(s){return s[zl]}const Xe=k(ha("Optional"),8),kt=k(ha("SkipSelf"),4);let Kp;function _b(s){Kp=s}class Q_{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function du(s){return s instanceof Q_?s.changingThisBreaksApplicationSecurity:s}const F=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Fr=(()=>((Fr=Fr||{})[Fr.NONE=0]="NONE",Fr[Fr.HTML=1]="HTML",Fr[Fr.STYLE=2]="STYLE",Fr[Fr.SCRIPT=3]="SCRIPT",Fr[Fr.URL=4]="URL",Fr[Fr.RESOURCE_URL=5]="RESOURCE_URL",Fr))();function Sb(s){const o=function Xn(){const s=Pe();return s&&s[12]}();return o?o.sanitize(Fr.URL,s)||"":function Kl(s,o){const u=function J_(s){return s instanceof Q_&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}(s,"URL")?du(s):function ae(s){return(s=String(s)).match(F)?s:"unsafe:"+s}(Ce(s))}const Zi=new xn("ENVIRONMENT_INITIALIZER"),iy=new xn("INJECTOR",-1),Zl=new xn("INJECTOR_DEF_TYPES");class rg{get(o,u=fa){if(u===fa){const c=new Error(`NullInjectorError: No provider for ${_e(o)}!`);throw c.name="NullInjectorError",c}return u}}function pS(...s){return{\u0275providers:hd(0,s)}}function hd(s,...o){const u=[],c=new Set;let h;return Os(o,p=>{const v=p;ig(v,u,[],c)&&(h||(h=[]),h.push(v))}),void 0!==h&&sy(h,u),u}function sy(s,o){for(let u=0;u<s.length;u++){const{providers:h}=s[u];Os(h,p=>{o.push(p)})}}function ig(s,o,u,c){if(!(s=ne(s)))return!1;let h=null,p=ji(s);const v=!p&&G(s);if(p||v){if(v&&!v.standalone)return!1;h=s}else{const T=s.ngModule;if(p=ji(T),!p)return!1;h=T}const b=c.has(h);if(v){if(b)return!1;if(c.add(h),v.dependencies){const T="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const M of T)ig(M,o,u,c)}}else{if(!p)return!1;{if(null!=p.imports&&!b){let M;c.add(h);try{Os(p.imports,N=>{ig(N,o,u,c)&&(M||(M=[]),M.push(N))})}finally{}void 0!==M&&sy(M,o)}if(!b){const M=Dr(h)||(()=>new h);o.push({provide:h,useFactory:M,deps:Rt},{provide:Zl,useValue:h,multi:!0},{provide:Zi,useValue:()=>ar(h),multi:!0})}const T=p.providers;null==T||b||Os(T,N=>{o.push(N)})}}return h!==s&&void 0!==s.providers}const fO=we({provide:String,useValue:we});function oy(s){return null!==s&&"object"==typeof s&&fO in s}function Io(s){return"function"==typeof s}const ws=new xn("Set Injector scope."),sg={},_S={};let uy;function og(){return void 0===uy&&(uy=new rg),uy}class Yl{}class Ab extends Yl{constructor(o,u,c,h){super(),this.parent=u,this.source=c,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ql(o,v=>this.processProvider(v)),this.records.set(iy,fd(void 0,this)),h.has("environment")&&this.records.set(Yl,fd(void 0,this));const p=this.records.get(ws);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(Zl.multi,Rt,ot.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const u=Eo(this),c=vn(void 0);try{return o()}finally{Eo(u),vn(c)}}get(o,u=fa,c=ot.Default){this.assertNotDestroyed();const h=Eo(this),p=vn(void 0);try{if(!(c&ot.SkipSelf)){let b=this.records.get(o);if(void 0===b){const T=function bS(s){return"function"==typeof s||"object"==typeof s&&s instanceof xn}(o)&&Ir(o);b=T&&this.injectableDefInScope(T)?fd(At(o),sg):null,this.records.set(o,b)}if(null!=b)return this.hydrate(o,b)}return(c&ot.Self?og():this.parent).get(o,u=c&ot.Optional&&u===fa?null:u)}catch(v){if("NullInjectorError"===v.name){if((v[pa]=v[pa]||[]).unshift(_e(o)),h)throw v;return function re(s,o,u,c){const h=s[pa];throw o[ud]&&h.unshift(o[ud]),s.message=function ge(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let h=_e(o);if(Array.isArray(o))h=o.map(_e).join(" -> ");else if("object"==typeof o){let p=[];for(let v in o)if(o.hasOwnProperty(v)){let b=o[v];p.push(v+":"+("string"==typeof b?JSON.stringify(b):_e(b)))}h=`{${p.join(", ")}}`}return`${u}${c?"("+c+")":""}[${h}]: ${s.replace(ad,"\n  ")}`}("\n"+s.message,h,u,c),s.ngTokenPath=h,s[pa]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{vn(p),Eo(h)}}resolveInjectorInitializers(){const o=Eo(this),u=vn(void 0);try{const c=this.get(Zi.multi,Rt,ot.Self);for(const h of c)h()}finally{Eo(o),vn(u)}}toString(){const o=[],u=this.records;for(const c of u.keys())o.push(_e(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Se(205,!1)}processProvider(o){let u=Io(o=ne(o))?o:ne(o&&o.provide);const c=function vS(s){return oy(s)?fd(void 0,s.useValue):fd(function Mb(s,o,u){let c;if(Io(s)){const h=ne(s);return Dr(h)||At(h)}if(oy(s))c=()=>ne(s.useValue);else if(function mS(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...S(s.deps||[]));else if(function ay(s){return!(!s||!s.useExisting)}(s))c=()=>ar(ne(s.useExisting));else{const h=ne(s&&(s.useClass||s.provide));if(!function wS(s){return!!s.deps}(s))return Dr(h)||At(h);c=()=>new h(...S(s.deps))}return c}(s),sg)}(o);if(Io(o)||!0!==o.multi)this.records.get(u);else{let h=this.records.get(u);h||(h=fd(void 0,sg,!0),h.factory=()=>S(h.multi),this.records.set(u,h)),u=o,h.multi.push(o)}this.records.set(u,c)}hydrate(o,u){return u.value===sg&&(u.value=_S,u.value=u.factory()),"object"==typeof u.value&&u.value&&function ly(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=ne(o.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function At(s){const o=Ir(s),u=null!==o?o.factory:Dr(s);if(null!==u)return u;if(s instanceof xn)throw new Se(204,!1);if(s instanceof Function)return function yS(s){const o=s.length;if(o>0)throw vs(o,"?"),new Se(204,!1);const u=function Nn(s){const o=s&&(s[Xr]||s[Si]);if(o){const u=function as(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new Se(204,!1)}function fd(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function xb(s){return!!s.\u0275providers}function Ql(s,o){for(const u of s)Array.isArray(u)?Ql(u,o):xb(u)?Ql(u.\u0275providers,o):o(u)}class Gh{}class kb{resolveComponentFactory(o){throw function Xl(s){const o=Error(`No component factory found for ${_e(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let hu=(()=>{class s{}return s.NULL=new kb,s})();function gO(){return ec(ir(),Pe())}function ec(s,o){return new ya(Sr(s,o))}let ya=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=gO,s})();function IS(s){return s instanceof ya?s.nativeElement:s}class Nb{}let TS=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function Pb(){const s=Pe(),u=cn(ir().index,s);return(rr(u)?u:s)[11]}(),s})(),_O=(()=>{class s{}return s.\u0275prov=nn({token:s,providedIn:"root",factory:()=>null}),s})();class cy{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const CS=new cy("14.2.0"),Ob={};function fy(s){return s.ngOriginalError}class pd{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o);this._console.error("ERROR",o),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&fy(o);for(;u&&fy(u);)u=fy(u);return u||null}}const jb=new Map;let AO=0;const gy="__ngContext__";function Ri(s,o){rr(o)?(s[gy]=o[20],function xO(s){jb.set(s[20],s)}(o)):s[gy]=o}function zh(s){const o=s[gy];return"number"==typeof o?function py(s){return jb.get(s)||null}(o):o||null}function Hb(s){const o=zh(s);return o?rr(o)?o:o.lView:null}function fu(s){return s instanceof Function?s():s}var pu=(()=>((pu=pu||{})[pu.Important=1]="Important",pu[pu.DashCase=2]="DashCase",pu))();function Kb(s,o){return undefined(s,o)}function lg(s){const o=s[3];return li(o)?o[3]:o}function Qu(s){return OS(s[13])}function Zb(s){return OS(s[4])}function OS(s){for(;null!==s&&!li(s);)s=s[4];return s}function md(s,o,u,c,h){if(null!=c){let p,v=!1;li(c)?p=c:rr(c)&&(v=!0,c=c[0]);const b=Fn(c);0===s&&null!==u?null==h?yd(o,u,b):_d(o,u,b,h||null,!0):1===s&&null!==u?_d(o,u,b,h||null,!0):2===s?function zS(s,o,u){const c=dg(s,o);c&&function $S(s,o,u,c){s.removeChild(o,u,c)}(s,c,o,u)}(o,b,v):3===s&&o.destroyNode(b),null!=p&&function ZO(s,o,u,c,h){const p=u[7];p!==Fn(u)&&md(o,s,c,p,h);for(let b=10;b<u.length;b++){const T=u[b];fg(T[1],T,s,o,c,p)}}(o,s,p,u,h)}}function Qb(s,o,u){return s.createElement(o,u)}function FS(s,o){const u=s[9],c=u.indexOf(o),h=o[3];512&o[2]&&(o[2]&=-513,zn(h,-1)),u.splice(c,1)}function Xb(s,o){if(s.length<=10)return;const u=10+o,c=s[u];if(c){const h=c[17];null!==h&&h!==s&&FS(h,c),o>0&&(s[u-1][4]=c[4]);const p=bo(s,10+o);!function jO(s,o){fg(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const v=p[19];null!==v&&v.detachView(p[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function US(s,o){if(!(128&o[2])){const u=o[11];u.destroyNode&&fg(s,o,u,3,null,null),function HO(s){let o=s[13];if(!o)return Jb(s[1],s);for(;o;){let u=null;if(rr(o))u=o[13];else{const c=o[10];c&&(u=c)}if(!u){for(;o&&!o[4]&&o!==s;)rr(o)&&Jb(o[1],o),o=o[3];null===o&&(o=s),rr(o)&&Jb(o[1],o),u=o&&o[4]}o=u}}(o)}}function Jb(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function qO(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const h=o[u[c]];if(!(h instanceof pi)){const p=u[c+1];if(Array.isArray(p))for(let v=0;v<p.length;v+=2){const b=h[p[v]],T=p[v+1];try{T.call(b)}finally{}}else try{p.call(h)}finally{}}}}(s,o),function WO(s,o){const u=s.cleanup,c=o[7];let h=-1;if(null!==u)for(let p=0;p<u.length-1;p+=2)if("string"==typeof u[p]){const v=u[p+1],b="function"==typeof v?v(o):Fn(o[v]),T=c[h=u[p+2]],M=u[p+3];"boolean"==typeof M?b.removeEventListener(u[p],T,M):M>=0?c[h=M]():c[h=-M].unsubscribe(),p+=2}else{const v=c[h=u[p+1]];u[p].call(v)}if(null!==c){for(let p=h+1;p<c.length;p++)(0,c[p])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const u=o[17];if(null!==u&&li(o[3])){u!==o[3]&&FS(u,o);const c=o[19];null!==c&&c.detachView(s)}!function $b(s){jb.delete(s[20])}(o)}}function BS(s,o,u){return function VS(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[0];if(2&c.flags){const h=s.data[c.directiveStart].encapsulation;if(h===_t.None||h===_t.Emulated)return null}return Sr(c,u)}(s,o.parent,u)}function _d(s,o,u,c,h){s.insertBefore(o,u,c,h)}function yd(s,o,u){s.appendChild(o,u)}function jS(s,o,u,c,h){null!==c?_d(s,o,u,c,h):yd(s,o,u)}function dg(s,o){return s.parentNode(o)}function by(s,o,u){return eE(s,o,u)}let eE=function Ey(s,o,u){return 40&s.type?Sr(s,u):null};function Wh(s,o,u,c){const h=BS(s,c,o),p=o[11],b=by(c.parent||o[6],c,o);if(null!=h)if(Array.isArray(u))for(let T=0;T<u.length;T++)jS(p,h,u[T],b,!1);else jS(p,h,u,b,!1)}function hg(s,o){if(null!==o){const u=o.type;if(3&u)return Sr(o,s);if(4&u)return nE(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return hg(s,c);{const h=s[o.index];return li(h)?nE(-1,h):Fn(h)}}if(32&u)return Kb(o,s)()||Fn(s[o.index]);{const c=GS(s,o);return null!==c?Array.isArray(c)?c[0]:hg(lg(s[16]),c):hg(s,o.next)}}return null}function GS(s,o){return null!==o?s[16][6].projection[o.projection]:null}function nE(s,o){const u=10+s+1;if(u<o.length){const c=o[u],h=c[1].firstChild;if(null!==h)return hg(c,h)}return o[7]}function rE(s,o,u,c,h,p,v){for(;null!=u;){const b=c[u.index],T=u.type;if(v&&0===o&&(b&&Ri(Fn(b),c),u.flags|=4),64!=(64&u.flags))if(8&T)rE(s,o,u.child,c,h,p,!1),md(o,s,h,b,p);else if(32&T){const M=Kb(u,c);let N;for(;N=M();)md(o,s,h,N,p);md(o,s,h,b,p)}else 16&T?WS(s,o,c,u,h,p):md(o,s,h,b,p);u=v?u.projectionNext:u.next}}function fg(s,o,u,c,h,p){rE(u,c,s.firstChild,o,h,p,!1)}function WS(s,o,u,c,h,p){const v=u[16],T=v[6].projection[c.projection];if(Array.isArray(T))for(let M=0;M<T.length;M++)md(o,s,h,T[M],p);else rE(s,o,T,v[3],h,p,!0)}function qS(s,o,u){s.setAttribute(o,"style",u)}function iE(s,o,u){""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u)}function KS(s,o,u){let c=s.length;for(;;){const h=s.indexOf(o,u);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const p=o.length;if(h+p===c||s.charCodeAt(h+p)<=32)return h}u=h+1}}const ZS="ng-template";function QO(s,o,u){let c=0;for(;c<s.length;){let h=s[c++];if(u&&"class"===h){if(h=s[c],-1!==KS(h.toLowerCase(),o,0))return!0}else if(1===h){for(;c<s.length&&"string"==typeof(h=s[c++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function sE(s){return 4===s.type&&s.value!==ZS}function YS(s,o,u){return o===(4!==s.type||u?s.value:ZS)}function QS(s,o,u){let c=4;const h=s.attrs||[],p=function tA(s){for(let o=0;o<s.length;o++)if(Xa(s[o]))return o;return s.length}(h);let v=!1;for(let b=0;b<o.length;b++){const T=o[b];if("number"!=typeof T){if(!v)if(4&c){if(c=2|1&c,""!==T&&!YS(s,T,u)||""===T&&1===o.length){if(To(c))return!1;v=!0}}else{const M=8&c?T:o[++b];if(8&c&&null!==s.attrs){if(!QO(s.attrs,M,u)){if(To(c))return!1;v=!0}continue}const B=XS(8&c?"class":T,h,sE(s),u);if(-1===B){if(To(c))return!1;v=!0;continue}if(""!==M){let X;X=B>p?"":h[B+1].toLowerCase();const oe=8&c?X:null;if(oe&&-1!==KS(oe,M,0)||2&c&&M!==X){if(To(c))return!1;v=!0}}}}else{if(!v&&!To(c)&&!To(T))return!1;if(v&&To(T))continue;v=!1,c=T|1&c}}return To(c)||v}function To(s){return 0==(1&s)}function XS(s,o,u,c){if(null===o)return-1;let h=0;if(c||!u){let p=!1;for(;h<o.length;){const v=o[h];if(v===s)return h;if(3===v||6===v)p=!0;else{if(1===v||2===v){let b=o[++h];for(;"string"==typeof b;)b=o[++h];continue}if(4===v)break;if(0===v){h+=4;continue}}h+=p?1:2}return-1}return function nA(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function JS(s,o,u=!1){for(let c=0;c<o.length;c++)if(QS(s,o[c],u))return!0;return!1}function XO(s,o){e:for(let u=0;u<o.length;u++){const c=o[u];if(s.length===c.length){for(let h=0;h<s.length;h++)if(s[h]!==c[h])continue e;return!0}}return!1}function oE(s,o){return s?":not("+o.trim()+")":o}function rA(s){let o=s[0],u=1,c=2,h="",p=!1;for(;u<s.length;){let v=s[u];if("string"==typeof v)if(2&c){const b=s[++u];h+="["+v+(b.length>0?'="'+b+'"':"")+"]"}else 8&c?h+="."+v:4&c&&(h+=" "+v);else""!==h&&!To(v)&&(o+=oE(p,h),h=""),c=v,p=p||!To(c);u++}return""!==h&&(o+=oE(p,h)),o}const zt={};function aE(s){Ty(Qt(),Pe(),On()+s,!1)}function Ty(s,o,u,c){if(!c)if(3==(3&o[2])){const p=s.preOrderCheckHooks;null!==p&&ea(o,p,u)}else{const p=s.preOrderHooks;null!==p&&ta(o,p,0,u)}gs(u)}function aA(s,o=null,u=null,c){const h=uA(s,o,u,c);return h.resolveInjectorInitializers(),h}function uA(s,o=null,u=null,c,h=new Set){const p=[u||Rt,pS(s)];return c=c||("object"==typeof s?void 0:_e(s)),new Ab(p,o||og(),c||null,h)}let vd=(()=>{class s{static create(u,c){if(Array.isArray(u))return aA({name:""},c,u,"");{const h=u.name??"";return aA({name:h},u.parent,u.providers,h)}}}return s.THROW_IF_NOT_FOUND=fa,s.NULL=new rg,s.\u0275prov=nn({token:s,providedIn:"any",factory:()=>ar(iy)}),s.__NG_ELEMENT_ID__=-1,s})();function bd(s,o=ot.Default){const u=Pe();return null===u?ar(s,o):sa(ir(),u,ne(s),o)}function vE(){throw new Error("invalid")}function mg(s,o){return s<<17|o<<2}function Co(s){return s>>17&32767}function My(s){return 2|s}function mu(s){return(131068&s)>>2}function xy(s,o){return-131069&s|o<<2}function IE(s){return 1|s}function Oy(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const h=u[c],p=u[c+1];if(-1!==p){const v=s.data[p];kl(h),v.contentQueries(2,o[p],p)}}}function Qh(s,o,u,c,h,p,v,b,T,M,N){const B=o.blueprint.slice();return B[0]=h,B[2]=76|c,(null!==N||s&&1024&s[2])&&(B[2]|=1024),Ba(B),B[3]=B[15]=s,B[8]=u,B[10]=v||s&&s[10],B[11]=b||s&&s[11],B[12]=T||s&&s[12]||null,B[9]=M||s&&s[9]||null,B[6]=p,B[20]=function MO(){return AO++}(),B[21]=N,B[16]=2==o.type?s[16]:B,B}function ki(s,o,u,c,h){let p=s.data[o];if(null===p)p=function yu(s,o,u,c,h){const p=Yo(),v=Lu(),T=s.data[o]=function bg(s,o,u,c,h,p){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?p:p&&p.parent,u,o,c,h);return null===s.firstChild&&(s.firstChild=T),null!==p&&(v?null==p.child&&null!==T.parent&&(p.child=T):null===p.next&&(p.next=T)),T}(s,o,u,c,h),function Gc(){return Ot.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=u,p.value=c,p.attrs=h;const v=function Ou(){const s=Ot.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===v?-1:v.injectorIndex}return Gr(p,!0),p}function va(s,o,u,c){if(0===u)return-1;const h=o.length;for(let p=0;p<u;p++)o.push(c),s.blueprint.push(c),s.data.push(null);return h}function wg(s,o,u){Jo(o);try{const c=s.viewQuery;null!==c&&sf(1,c,u);const h=s.template;null!==h&&Xh(s,o,h,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Oy(s,o),s.staticViewQueries&&sf(2,s.viewQuery,u);const p=s.components;null!==p&&function NE(s,o){for(let u=0;u<o.length;u++)zy(s,o[u])}(o,p)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,ks()}}function nc(s,o,u,c){const h=o[2];if(128!=(128&h)){Jo(o);try{Ba(o),function Wa(s){return Ot.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&Xh(s,o,u,2,c);const v=3==(3&h);if(v){const M=s.preOrderCheckHooks;null!==M&&ea(o,M,null)}else{const M=s.preOrderHooks;null!==M&&ta(o,M,0,null),Qc(o,0)}if(function PA(s){for(let o=Qu(s);null!==o;o=Zb(o)){if(!o[2])continue;const u=o[9];for(let c=0;c<u.length;c++){const h=u[c],p=h[3];0==(512&h[2])&&zn(p,1),h[2]|=512}}}(o),function NA(s){for(let o=Qu(s);null!==o;o=Zb(o))for(let u=10;u<o.length;u++){const c=o[u],h=c[1];Rs(c)&&nc(h,c,h.template,c[8])}}(o),null!==s.contentQueries&&Oy(s,o),v){const M=s.contentCheckHooks;null!==M&&ea(o,M)}else{const M=s.contentHooks;null!==M&&ta(o,M,1),Qc(o,1)}!function CA(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const h=u[c];if(h<0)gs(~h);else{const p=h,v=u[++c],b=u[++c];zc(v,p),b(2,o[p])}}}finally{gs(-1)}}(s,o);const b=s.components;null!==b&&function el(s,o){for(let u=0;u<o.length;u++)OA(s,o[u])}(o,b);const T=s.viewQuery;if(null!==T&&sf(2,T,c),v){const M=s.viewCheckHooks;null!==M&&ea(o,M)}else{const M=s.viewHooks;null!==M&&ta(o,M,2),Qc(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,zn(o[3],-1))}finally{ks()}}}function PE(s,o,u,c){const h=o[10],v=Pu(o);try{!v&&h.begin&&h.begin(),v&&wg(s,o,c),nc(s,o,u,c)}finally{!v&&h.end&&h.end()}}function Xh(s,o,u,c,h){const p=On(),v=2&c;try{gs(-1),v&&o.length>22&&Ty(s,o,22,!1),u(c,h)}finally{gs(p)}}function OE(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Fy(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Fy(s,o,u,c,h,p,v,b,T,M){const N=22+c,B=N+h,X=function DA(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:zt);return u}(N,B),oe="function"==typeof M?M():M;return X[1]={type:s,blueprint:X,template:u,queries:null,viewQuery:b,declTNode:o,data:X.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:B,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:T,consts:oe,incompleteFirstPass:!1}}function tf(s,o,u,c){const h=zE(o);null===u?h.push(c):(h.push(u),s.firstCreatePass&&WE(s).push(c,h.length-1))}function FE(s,o,u){for(let c in s)if(s.hasOwnProperty(c)){const h=s[c];(u=null===u?{}:u).hasOwnProperty(c)?u[c].push(o,h):u[c]=[o,h]}return u}function UE(s,o){const c=o.directiveEnd,h=s.data,p=o.attrs,v=[];let b=null,T=null;for(let M=o.directiveStart;M<c;M++){const N=h[M],B=N.inputs,X=null===p||sE(o)?null:$y(B,p);v.push(X),b=FE(B,M,b),T=FE(N.outputs,M,T)}null!==b&&(b.hasOwnProperty("class")&&(o.flags|=16),b.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=b,o.outputs=T}function AA(s,o){const u=cn(o,s);16&u[2]||(u[2]|=32)}function nf(s,o,u,c,h,p){const v=p.hostBindings;if(v){let b=s.hostBindingOpCodes;null===b&&(b=s.hostBindingOpCodes=[]);const T=~o.index;(function Ig(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(b)!=T&&b.push(T),b.push(c,h,v)}}function jE(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Vy(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function RA(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;ti(o)&&(u[""]=s)}}function $E(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function HE(s,o,u,c,h){s.data[c]=h;const p=h.factory||(h.factory=Dr(h.type)),v=new pi(p,ti(h),bd);s.blueprint[c]=v,u[c]=v,nf(s,o,0,c,va(s,u,h.hostVars,zt),h)}function kA(s,o,u){const c=Sr(o,s),h=OE(u),p=s[10],v=rc(s,Qh(s,h,null,u.onPush?32:16,c,o,p,p.createRenderer(c,u),null,null,null));s[o.index]=v}function wa(s,o,u,c,h,p){const v=Sr(s,o);!function vu(s,o,u,c,h,p,v){if(null==p)s.removeAttribute(o,h,u);else{const b=null==v?Ce(p):v(p,c||"",h);s.setAttribute(o,h,b,u)}}(o[11],v,p,s.value,u,c,h)}function jy(s,o,u,c,h,p){const v=p[o];if(null!==v){const b=c.setInput;for(let T=0;T<v.length;){const M=v[T++],N=v[T++],B=v[T++];null!==b?c.setInput(u,B,M,N):u[N]=B}}}function $y(s,o){let u=null,c=0;for(;c<o.length;){const h=o[c];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===u&&(u=[]),u.push(h,s[h],o[c+1])),c+=2}else c+=2;else c+=4}return u}function OA(s,o){const u=cn(o,s);if(Rs(u)){const c=u[1];48&u[2]?nc(c,u,c.template,u[8]):u[5]>0&&Gy(u)}}function Gy(s){for(let c=Qu(s);null!==c;c=Zb(c))for(let h=10;h<c.length;h++){const p=c[h];if(Rs(p))if(512&p[2]){const v=p[1];nc(v,p,v.template,p[8])}else p[5]>0&&Gy(p)}const u=s[1].components;if(null!==u)for(let c=0;c<u.length;c++){const h=cn(u[c],s);Rs(h)&&h[5]>0&&Gy(h)}}function zy(s,o){const u=cn(o,s),c=u[1];(function LA(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),wg(c,u,u[8])}function rc(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function rf(s){for(;s;){s[2]|=32;const o=lg(s);if(Cl(s)&&!o)return s;s=o}return null}function sf(s,o,u){kl(0),o(s,u)}function zE(s){return s[7]||(s[7]=[])}function WE(s){return s.cleanup||(s.cleanup=[])}function Cg(s,o){const u=s[9],c=u?u.get(pd,null):null;c&&c.handleError(o)}function Dg(s,o,u,c,h){for(let p=0;p<u.length;){const v=u[p++],b=u[p++],T=o[v],M=s.data[v];null!==M.setInput?M.setInput(T,h,c,b):T[b]=h}}function Sg(s,o,u){let c=u?s.styles:null,h=u?s.classes:null,p=0;if(null!==o)for(let v=0;v<o.length;v++){const b=o[v];"number"==typeof b?p=b:1==p?h=Ie(h,b):2==p&&(c=Ie(c,b+": "+o[++v]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=h:s.classesWithoutHost=h}function Ag(s,o,u,c,h=!1){for(;null!==u;){const p=o[u.index];if(null!==p&&c.push(Fn(p)),li(p))for(let b=10;b<p.length;b++){const T=p[b],M=T[1].firstChild;null!==M&&Ag(T[1],T,M,c)}const v=u.type;if(8&v)Ag(s,o,u.child,c);else if(32&v){const b=Kb(u,o);let T;for(;T=b();)c.push(T)}else if(16&v){const b=GS(o,u);if(Array.isArray(b))c.push(...b);else{const T=lg(o[16]);Ag(T[1],T,b,c,!0)}}u=h?u.projectionNext:u.next}return c}class af{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return Ag(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(li(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&(Xb(o,c),bo(u,c))}this._attachedToViewContainer=!1}US(this._lView[1],this._lView)}onDestroy(o){tf(this._lView[1],this._lView,null,o)}markForCheck(){rf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function Wy(s,o,u){const c=o[10];c.begin&&c.begin();try{nc(s,o,s.template,u)}catch(h){throw Cg(o,h),h}finally{c.end&&c.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Se(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function LS(s,o){fg(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Se(902,!1);this._appRef=o}}class FA extends af{constructor(o){super(o),this._view=o}detectChanges(){!function qy(s){!function Tg(s){for(let o=0;o<s.components.length;o++){const u=s.components[o],c=Hb(u);if(null!==c){const h=c[1];PE(h,c,h.template,u)}}}(s[8])}(this._view)}checkNoChanges(){}get context(){return null}}class Zy extends hu{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=G(o);return new uf(u,this.ngModule)}}function qE(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class UA{constructor(o,u){this.injector=o,this.parentInjector=u}get(o,u,c){const h=this.injector.get(o,Ob,c);return h!==Ob||u===Ob?h:this.parentInjector.get(o,u,c)}}class uf extends Gh{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function iA(s){return s.map(rA).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return qE(this.componentDef.inputs)}get outputs(){return qE(this.componentDef.outputs)}create(o,u,c,h){let p=(h=h||this.ngModule)instanceof Yl?h:h?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const v=p?new UA(o,p):o,b=v.get(Nb,null);if(null===b)throw new Se(407,!1);const T=v.get(_O,null),M=b.createRenderer(null,this.componentDef),N=this.componentDef.selectors[0][0]||"div",B=c?function LE(s,o,u){return s.selectRootElement(o,u===_t.ShadowDom)}(M,c,this.componentDef.encapsulation):Qb(b.createRenderer(null,this.componentDef),N,function KE(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(N)),X=this.componentDef.onPush?288:272,oe={components:[]},Me=Fy(0,null,null,1,0,null,null,null,null,null),He=Qh(null,Me,oe,X,null,null,b,M,T,v,null);let nt,dt;Jo(He);try{const Mt=function BA(s,o,u,c,h,p){const v=u[1];u[22]=s;const T=ki(v,22,2,"#host",null),M=T.mergedAttrs=o.hostAttrs;null!==M&&(Sg(T,M,!0),null!==s&&(ms(h,s,M),null!==T.classes&&iE(h,s,T.classes),null!==T.styles&&qS(h,s,T.styles)));const N=c.createRenderer(s,o),B=Qh(u,OE(o),null,o.onPush?32:16,u[22],T,c,N,p||null,null,null);return v.firstCreatePass&&(go(_s(T,u),v,o.type),Vy(v,T),$E(T,u.length,1)),rc(u,B),u[22]=B}(B,this.componentDef,He,b,M);if(B)if(c)ms(M,B,["ng-version",CS.full]);else{const{attrs:Be,classes:at}=function sA(s){const o=[],u=[];let c=1,h=2;for(;c<s.length;){let p=s[c];if("string"==typeof p)2===h?""!==p&&o.push(p,s[++c]):8===h&&u.push(p);else{if(!To(h))break;h=p}c++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);Be&&ms(M,B,Be),at&&at.length>0&&iE(M,B,at.join(" "))}if(dt=Ko(Me,22),void 0!==u){const Be=dt.projection=[];for(let at=0;at<this.ngContentSelectors.length;at++){const rn=u[at];Be.push(null!=rn?Array.from(rn):null)}}nt=function VA(s,o,u,c,h){const p=u[1],v=function MA(s,o,u){const c=ir();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),HE(s,c,o,va(s,o,1,null),u),UE(s,c));const h=Wi(o,s,c.directiveStart,c);Ri(h,o);const p=Sr(c,o);return p&&Ri(p,o),h}(p,u,o);if(c.components.push(v),s[8]=v,null!==h)for(const T of h)T(v,o);if(o.contentQueries){const T=ir();o.contentQueries(1,v,T.directiveStart)}const b=ir();return!p.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(gs(b.index),nf(u[1],b,0,b.directiveStart,b.directiveEnd,o),jE(o,v)),v}(Mt,this.componentDef,He,oe,[YE]),wg(Me,He,null)}finally{ks()}return new Yy(this.componentType,nt,ec(dt,He),He,dt)}}class Yy extends class ES{}{constructor(o,u,c,h,p){super(),this.location=c,this._rootLView=h,this._tNode=p,this.instance=u,this.hostView=this.changeDetectorRef=new FA(h),this.componentType=o}setInput(o,u){const c=this._tNode.inputs;let h;if(null!==c&&(h=c[o])){const p=this._rootLView;Dg(p[1],p,h,o,u),AA(p,this._tNode.index)}}get injector(){return new aa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function YE(){const s=ir();Ll(Pe()[1],s)}function Yi(s){let o=function QE(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const c=[s];for(;o;){let h;if(ti(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Se(903,!1);h=o.\u0275dir}if(h){if(u){c.push(h);const v=s;v.inputs=ic(s.inputs),v.declaredInputs=ic(s.declaredInputs),v.outputs=ic(s.outputs);const b=h.hostBindings;b&&HA(s,b);const T=h.viewQuery,M=h.contentQueries;if(T&&Xy(s,T),M&&$A(s,M),pe(s.inputs,h.inputs),pe(s.declaredInputs,h.declaredInputs),pe(s.outputs,h.outputs),ti(h)&&h.data.animation){const N=s.data;N.animation=(N.animation||[]).concat(h.data.animation)}}const p=h.features;if(p)for(let v=0;v<p.length;v++){const b=p[v];b&&b.ngInherit&&b(s),b===Yi&&(u=!1)}}o=Object.getPrototypeOf(o)}!function Qy(s){let o=0,u=null;for(let c=s.length-1;c>=0;c--){const h=s[c];h.hostVars=o+=h.hostVars,h.hostAttrs=Ja(h.hostAttrs,u=Ja(u,h.hostAttrs))}}(c)}function ic(s){return s===Cr?{}:s===Rt?[]:s}function Xy(s,o){const u=s.viewQuery;s.viewQuery=u?(c,h)=>{o(c,h),u(c,h)}:o}function $A(s,o){const u=s.contentQueries;s.contentQueries=u?(c,h,p)=>{o(c,h,p),u(c,h,p)}:o}function HA(s,o){const u=s.hostBindings;s.hostBindings=u?(c,h)=>{o(c,h),u(c,h)}:o}let sc=null;function oc(){if(!sc){const s=Lt.Symbol;if(s&&s.iterator)sc=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const c=o[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(sc=c)}}}return sc}function Cd(s){return!!nl(s)&&(Array.isArray(s)||!(s instanceof Map)&&oc()in s)}function nl(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function gi(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function ev(s,o,u,c){const h=Pe();return gi(h,qa(),o)&&(Qt(),wa(Ln(),h,s,o,u,c)),ev}function uI(s,o,u){const c=Pe();return gi(c,qa(),o)&&function Hs(s,o,u,c,h,p,v,b){const T=Sr(o,u);let N,M=o.inputs;!b&&null!=M&&(N=M[c])?(Dg(s,u,N,c,h),Tl(o)&&AA(u,o.index)):3&o.type&&(c=function SA(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),h=null!=v?v(h,o.value||"",c):h,p.setProperty(T,c,h))}(Qt(),Ln(),c,s,o,c[11],u,!1),uI}function lI(s,o,u,c,h){const v=h?"class":"style";Dg(s,u,o.inputs[v],v,c)}function kd(s,o,u,c){const h=Pe(),p=Qt(),v=22+s,b=h[11],T=h[v]=Qb(b,o,function Ol(){return Ot.lFrame.currentNamespace}()),M=p.firstCreatePass?function Ur(s,o,u,c,h,p,v){const b=o.consts,M=ki(o,s,2,h,fi(b,p));return function Uy(s,o,u,c){let h=!1;if(po()){const p=function By(s,o,u){const c=s.directiveRegistry;let h=null;if(c)for(let p=0;p<c.length;p++){const v=c[p];JS(u,v.selectors,!1)&&(h||(h=[]),go(_s(u,o),s,v.type),ti(v)?(Vy(s,u),h.unshift(v)):h.push(v))}return h}(s,o,u),v=null===c?null:{"":-1};if(null!==p){h=!0,$E(u,s.data.length,p.length);for(let N=0;N<p.length;N++){const B=p[N];B.providersResolver&&B.providersResolver(B)}let b=!1,T=!1,M=va(s,o,p.length,null);for(let N=0;N<p.length;N++){const B=p[N];u.mergedAttrs=Ja(u.mergedAttrs,B.hostAttrs),HE(s,u,o,M,B),RA(M,B,v),null!==B.contentQueries&&(u.flags|=8),(null!==B.hostBindings||null!==B.hostAttrs||0!==B.hostVars)&&(u.flags|=128);const X=B.type.prototype;!b&&(X.ngOnChanges||X.ngOnInit||X.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),b=!0),!T&&(X.ngOnChanges||X.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),T=!0),M++}UE(s,u)}v&&function xA(s,o,u){if(o){const c=s.localNames=[];for(let h=0;h<o.length;h+=2){const p=u[o[h+1]];if(null==p)throw new Se(-301,!1);c.push(o[h],p)}}}(u,c,v)}return u.mergedAttrs=Ja(u.mergedAttrs,u.attrs),h}(o,u,M,fi(b,v)),null!==M.attrs&&Sg(M,M.attrs,!1),null!==M.mergedAttrs&&Sg(M,M.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,M),M}(v,p,h,0,o,u,c):p.data[v];Gr(M,!0);const N=M.mergedAttrs;null!==N&&ms(b,T,N);const B=M.classes;null!==B&&iE(b,T,B);const X=M.styles;return null!==X&&qS(b,T,X),64!=(64&M.flags)&&Wh(p,h,T,M),0===function ja(){return Ot.lFrame.elementDepthCount}()&&Ri(T,h),function Hc(){Ot.lFrame.elementDepthCount++}(),La(M)&&(function Ly(s,o,u){!po()||(function BE(s,o,u,c){const h=u.directiveStart,p=u.directiveEnd;s.firstCreatePass||_s(u,o),Ri(c,o);const v=u.initialInputs;for(let b=h;b<p;b++){const T=s.data[b],M=ti(T);M&&kA(o,u,T);const N=Wi(o,s,b,u);Ri(N,o),null!==v&&jy(0,b-h,N,T,0,v),M&&(cn(u.index,o)[8]=N)}}(s,o,u,Sr(u,o)),128==(128&u.flags)&&function VE(s,o,u){const c=u.directiveStart,h=u.directiveEnd,p=u.index,v=function Dh(){return Ot.lFrame.currentDirectiveIndex}();try{gs(p);for(let b=c;b<h;b++){const T=s.data[b],M=o[b];Xo(b),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&jE(T,M)}}finally{gs(-1),Xo(v)}}(s,o,u))}(p,h,M),function Jh(s,o,u){if(jo(o)){const h=o.directiveEnd;for(let p=o.directiveStart;p<h;p++){const v=s.data[p];v.contentQueries&&v.contentQueries(1,u[p],p)}}}(p,M,h)),null!==c&&function ef(s,o,u=Sr){const c=o.localNames;if(null!==c){let h=o.index+1;for(let p=0;p<c.length;p+=2){const v=c[p+1],b=-1===v?u(o,s):s[v];s[h++]=b}}}(h,M),kd}function cc(){let s=ir();Lu()?Qo():(s=s.parent,Gr(s,!1));const o=s;!function $a(){Ot.lFrame.elementDepthCount--}();const u=Qt();return u.firstCreatePass&&(Ll(u,s),jo(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Uu(s){return 0!=(16&s.flags)}(o)&&lI(u,o,Pe(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Bu(s){return 0!=(32&s.flags)}(o)&&lI(u,o,Pe(),o.stylesWithoutHost,!1),cc}function lr(s,o,u,c){return kd(s,o,u,c),cc(),lr}function Nd(s){return!!s&&"function"==typeof s.then}function lf(s){return!!s&&"function"==typeof s.subscribe}const ov=lf;function av(s,o,u,c){const h=Pe(),p=Qt(),v=ir();return function lv(s,o,u,c,h,p,v,b){const T=La(c),N=s.firstCreatePass&&WE(s),B=o[8],X=zE(o);let oe=!0;if(3&c.type||b){const nt=Sr(c,o),dt=b?b(nt):nt,Mt=X.length,Be=b?rn=>b(Fn(rn[c.index])):c.index;let at=null;if(!b&&T&&(at=function uv(s,o,u,c){const h=s.cleanup;if(null!=h)for(let p=0;p<h.length-1;p+=2){const v=h[p];if(v===u&&h[p+1]===c){const b=o[7],T=h[p+2];return b.length>T?b[T]:null}"string"==typeof v&&(p+=2)}return null}(s,o,h,c.index)),null!==at)(at.__ngLastListenerFn__||at).__ngNextListenerFn__=p,at.__ngLastListenerFn__=p,oe=!1;else{p=mn(c,o,B,p,!1);const rn=u.listen(dt,h,p);X.push(p,rn),N&&N.push(h,Be,Mt,Mt+1)}}else p=mn(c,o,B,p,!1);const Me=c.outputs;let He;if(oe&&null!==Me&&(He=Me[h])){const nt=He.length;if(nt)for(let dt=0;dt<nt;dt+=2){const Kn=o[He[dt]][He[dt+1]].subscribe(p),Tc=X.length;X.push(p,Kn),N&&N.push(h,c.index,Tc,-(Tc+1))}}}(p,h,h[11],v,s,o,0,c),av}function xg(s,o,u,c){try{return!1!==u(c)}catch(h){return Cg(s,h),!1}}function mn(s,o,u,c,h){return function p(v){if(v===Function)return c;rf(2&s.flags?cn(s.index,o):o);let T=xg(o,0,c,v),M=p.__ngNextListenerFn__;for(;M;)T=xg(o,0,M,v)&&T,M=M.__ngNextListenerFn__;return h&&!1===T&&(v.preventDefault(),v.returnValue=!1),T}}function Rg(s,o){let u=null;const c=function eA(s){const o=s.attrs;if(null!=o){const u=o.indexOf(5);if(0==(1&u))return o[u+1]}return null}(s);for(let h=0;h<o.length;h++){const p=o[h];if("*"!==p){if(null===c?JS(s,p,!0):XO(c,p))return h}else u=h}return u}function dI(s){const o=Pe()[16][6];if(!o.projection){const c=o.projection=vs(s?s.length:1,null),h=c.slice();let p=o.child;for(;null!==p;){const v=s?Rg(p,s):0;null!==v&&(h[v]?h[v].projectionNext=p:c[v]=p,h[v]=p),p=p.next}}}function QA(s,o=0,u){const c=Pe(),h=Qt(),p=ki(h,22+s,16,null,u||null);null===p.projection&&(p.projection=o),Qo(),64!=(64&p.flags)&&function KO(s,o,u){WS(o[11],0,o,u,BS(s,u,o),by(u.parent||o[6],u,o))}(h,c,p)}function iM(s,o,u,c,h){const p=s[u+1],v=null===o;let b=c?Co(p):mu(p),T=!1;for(;0!==b&&(!1===T||v);){const N=s[b+1];De(s[b],o)&&(T=!0,s[b+1]=c?IE(N):My(N)),b=c?Co(N):mu(N)}T&&(s[u+1]=c?My(p):IE(p))}function De(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&zr(s,o)>=0}function hv(s,o){return function qs(s,o,u,c){const h=Pe(),p=Qt(),v=function ps(s){const o=Ot.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}(2);p.firstUpdatePass&&function Ng(s,o,u,c){const h=s.data;if(null===h[u+1]){const p=h[On()],v=function df(s,o){return o>=s.expandoStartIndex}(s,u);(function wI(s,o){return 0!=(s.flags&(o?16:32))})(p,c)&&null===o&&!v&&(o=!1),o=function fv(s,o,u,c){const h=function Rl(s){const o=Ot.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=c?o.residualClasses:o.residualStyles;if(null===h)0===(c?o.classBindings:o.styleBindings)&&(u=hf(u=pv(null,s,o,u,c),o.attrs,c),p=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==h)if(u=pv(h,s,o,u,c),null===p){let T=function lM(s,o,u){const c=u?o.classBindings:o.styleBindings;if(0!==mu(c))return s[Co(c)]}(s,o,c);void 0!==T&&Array.isArray(T)&&(T=pv(null,s,o,T[1],c),T=hf(T,o.attrs,c),function cM(s,o,u,c){s[Co(u?o.classBindings:o.styleBindings)]=c}(s,o,c,T))}else p=function dM(s,o,u){let c;const h=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<h;p++)c=hf(c,s[p].hostAttrs,u);return hf(c,o.attrs,u)}(s,o,c)}return void 0!==p&&(c?o.residualClasses=p:o.residualStyles=p),u}(h,p,o,c),function b1(s,o,u,c,h,p){let v=p?o.classBindings:o.styleBindings,b=Co(v),T=mu(v);s[c]=u;let N,M=!1;if(Array.isArray(u)){const B=u;N=B[1],(null===N||zr(B,N)>0)&&(M=!0)}else N=u;if(h)if(0!==T){const X=Co(s[b+1]);s[c+1]=mg(X,b),0!==X&&(s[X+1]=xy(s[X+1],c)),s[b+1]=function vA(s,o){return 131071&s|o<<17}(s[b+1],c)}else s[c+1]=mg(b,0),0!==b&&(s[b+1]=xy(s[b+1],c)),b=c;else s[c+1]=mg(T,0),0===b?b=c:s[T+1]=xy(s[T+1],c),T=c;M&&(s[c+1]=My(s[c+1])),iM(s,N,c,!0),iM(s,N,c,!1),function E1(s,o,u,c,h){const p=h?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&zr(p,o)>=0&&(u[c+1]=IE(u[c+1]))}(o,N,s,c,p),v=mg(b,T),p?o.classBindings=v:o.styleBindings=v}(h,p,o,u,v,c)}}(p,s,v,c),o!==zt&&gi(h,v,o)&&function mv(s,o,u,c,h,p,v,b){if(!(3&o.type))return;const T=s.data,M=T[b+1];Og(function EE(s){return 1==(1&s)}(M)?vI(T,o,u,h,mu(M),v):void 0)||(Og(p)||function bE(s){return 2==(2&s)}(M)&&(p=vI(T,null,u,h,b,v)),function YO(s,o,u,c,h){if(o)h?s.addClass(u,c):s.removeClass(u,c);else{let p=-1===c.indexOf("-")?void 0:pu.DashCase;null==h?s.removeStyle(u,c,p):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),p|=pu.Important),s.setStyle(u,c,h,p))}}(c,v,function Ai(s,o){return Fn(o[s])}(On(),u),h,p))}(p,p.data[On()],h,h[11],s,h[v+1]=function hM(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=_e(du(s)))),s}(o,u),c,v)}(s,o,null,!0),hv}function pv(s,o,u,c,h){let p=null;const v=u.directiveEnd;let b=u.directiveStylingLast;for(-1===b?b=u.directiveStart:b++;b<v&&(p=o[b],c=hf(c,p.hostAttrs,h),p!==s);)b++;return null!==s&&(u.directiveStylingLast=b),c}function hf(s,o,u){const c=u?1:2;let h=-1;if(null!==o)for(let p=0;p<o.length;p++){const v=o[p];"number"==typeof v?h=v:h===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),ii(s,v,!!u||o[++p]))}return void 0===s?null:s}function vI(s,o,u,c,h,p){const v=null===o;let b;for(;h>0;){const T=s[h],M=Array.isArray(T),N=M?T[1]:T,B=null===N;let X=u[h+1];X===zt&&(X=B?Rt:void 0);let oe=B?zu(X,c):N===c?X:void 0;if(M&&!Og(oe)&&(oe=zu(T,c)),Og(oe)&&(b=oe,v))return b;const Me=s[h+1];h=v?Co(Me):mu(Me)}if(null!==o){let T=p?o.residualClasses:o.residualStyles;null!=T&&(b=zu(T,c))}return b}function Og(s){return void 0!==s}function _v(s,o=""){const u=Pe(),c=Qt(),h=s+22,p=c.firstCreatePass?ki(c,h,1,o,null):c.data[h],v=u[h]=function cg(s,o){return s.createText(o)}(u[11],o);Wh(c,u,v,p),Gr(p,!1)}const dc=void 0;var PI=["en",[["a","p"],["AM","PM"],dc],[["AM","PM"],dc,dc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],dc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],dc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",dc,"{1} 'at' {0}",dc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function bM(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let hc={};function Gg(s){const o=function Dv(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=OI(o);if(u)return u;const c=o.split("-")[0];if(u=OI(c),u)return u;if("en"===c)return PI;throw new Se(701,!1)}function TM(s){return Gg(s)[Nt.PluralCase]}function OI(s){return s in hc||(hc[s]=Lt.ng&&Lt.ng.common&&Lt.ng.common.locales&&Lt.ng.common.locales[s]),hc[s]}var Nt=(()=>((Nt=Nt||{})[Nt.LocaleId=0]="LocaleId",Nt[Nt.DayPeriodsFormat=1]="DayPeriodsFormat",Nt[Nt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Nt[Nt.DaysFormat=3]="DaysFormat",Nt[Nt.DaysStandalone=4]="DaysStandalone",Nt[Nt.MonthsFormat=5]="MonthsFormat",Nt[Nt.MonthsStandalone=6]="MonthsStandalone",Nt[Nt.Eras=7]="Eras",Nt[Nt.FirstDayOfWeek=8]="FirstDayOfWeek",Nt[Nt.WeekendRange=9]="WeekendRange",Nt[Nt.DateFormat=10]="DateFormat",Nt[Nt.TimeFormat=11]="TimeFormat",Nt[Nt.DateTimeFormat=12]="DateTimeFormat",Nt[Nt.NumberSymbols=13]="NumberSymbols",Nt[Nt.NumberFormats=14]="NumberFormats",Nt[Nt.CurrencyCode=15]="CurrencyCode",Nt[Nt.CurrencySymbol=16]="CurrencySymbol",Nt[Nt.CurrencyName=17]="CurrencyName",Nt[Nt.Currencies=18]="Currencies",Nt[Nt.Directionality=19]="Directionality",Nt[Nt.PluralCase=20]="PluralCase",Nt[Nt.ExtraData=21]="ExtraData",Nt))();const fc="en-US";let zg=fc;class xr{}class wf{}function ex(s,o){return new nT(s,o??null)}class nT extends xr{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Zy(this);const c=bt(o);this._bootstrapComponents=fu(c.bootstrap),this._r3Injector=uA(o,u,[{provide:xr,useValue:this},{provide:hu,useValue:this.componentFactoryResolver}],_e(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class $v extends wf{constructor(o){super(),this.moduleType=o}create(o){return new nT(this.moduleType,o)}}class rT extends xr{constructor(o,u,c){super(),this.componentFactoryResolver=new Zy(this),this.instance=null;const h=new Ab([...o,{provide:xr,useValue:this},{provide:hu,useValue:this.componentFactoryResolver}],u||og(),c,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function Hv(s,o,u=null){return new rT(s,o,u).injector}let Gv=(()=>{class s{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const c=hd(0,u.type),h=c.length>0?Hv([c],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,h)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=nn({token:s,providedIn:"environment",factory:()=>new s(ar(Yl))}),s})();function zv(s){s.getStandaloneInjector=o=>o.get(Gv).getOrCreateStandaloneInjector(s)}function Zv(s){return o=>{setTimeout(s,void 0,o)}}const Da=class gx extends m.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){let h=o,p=u||(()=>null),v=c;if(o&&"object"==typeof o){const T=o;h=T.next?.bind(T),p=T.error?.bind(T),v=T.complete?.bind(T)}this.__isAsync&&(p=Zv(p),h&&(h=Zv(h)),v&&(v=Zv(v)));const b=super.subscribe({next:h,error:p,complete:v});return o instanceof $.w0&&o.add(b),b}};function pT(){return this._results[oc()]()}class Ef{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=oc(),c=Ef.prototype;c[u]||(c[u]=pT)}get changes(){return this._changes||(this._changes=new Da)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const h=Ar(o);(this._changesDetected=!function wo(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let h=s[c],p=o[c];if(u&&(h=u(h),p=u(p)),p!==h)return!1}return!0}(c._results,h,u))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Bd=(()=>{class s{}return s.__NG_ELEMENT_ID__=yx,s})();const mx=Bd,_x=class extends mx{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o,u){const c=this._declarationTContainer.tViews,h=Qh(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,u||null);h[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(h[19]=v.createEmbeddedView(c)),wg(c,h,o),new af(h)}};function yx(){return rm(ir(),Pe())}function rm(s,o){return 4&s.type?new _x(o,s,ec(s,o)):null}let If=(()=>{class s{}return s.__NG_ELEMENT_ID__=vx,s})();function vx(){return mT(ir(),Pe())}const wx=If,Yv=class extends wx{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return ec(this._hostTNode,this._hostLView)}get injector(){return new aa(this._hostTNode,this._hostLView)}get parentInjector(){const o=tu(this._hostTNode,this._hostLView);if(Rh(o)){const u=Ps(o,this._hostLView),c=or(o);return new aa(u[1].data[c+8],u)}return new aa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=gT(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,c){let h,p;"number"==typeof c?h=c:null!=c&&(h=c.index,p=c.injector);const v=o.createEmbeddedView(u||{},p);return this.insert(v,h),v}createComponent(o,u,c,h,p){const v=o&&!function ys(s){return"function"==typeof s}(o);let b;if(v)b=u;else{const B=u||{};b=B.index,c=B.injector,h=B.projectableNodes,p=B.environmentInjector||B.ngModuleRef}const T=v?o:new uf(G(o)),M=c||this.parentInjector;if(!p&&null==T.ngModule){const X=(v?M:this.parentInjector).get(Yl,null);X&&(p=X)}const N=T.create(M,h,void 0,p);return this.insert(N.hostView,b),N}insert(o,u){const c=o._lView,h=c[1];if(function Ml(s){return li(s[3])}(c)){const N=this.indexOf(o);if(-1!==N)this.detach(N);else{const B=c[3],X=new Yv(B,B[6],B[3]);X.detach(X.indexOf(o))}}const p=this._adjustIndex(u),v=this._lContainer;!function GO(s,o,u,c){const h=10+c,p=u.length;c>0&&(u[h-1][4]=o),c<p-10?(o[4]=u[h],Ls(u,10+c,o)):(u.push(o),o[4]=null),o[3]=u;const v=o[17];null!==v&&u!==v&&function zO(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(v,o);const b=o[19];null!==b&&b.insertView(s),o[2]|=64}(h,c,v,p);const b=nE(p,v),T=c[11],M=dg(T,v[7]);return null!==M&&function $O(s,o,u,c,h,p){c[0]=h,c[6]=o,fg(s,c,u,1,h,p)}(h,v[6],T,c,M,b),o.attachToViewContainerRef(),Ls(im(v),p,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=gT(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=Xb(this._lContainer,u);c&&(bo(im(this._lContainer),u),US(c[1],c))}detach(o){const u=this._adjustIndex(o,-1),c=Xb(this._lContainer,u);return c&&null!=bo(im(this._lContainer),u)?new af(c):null}_adjustIndex(o,u=0){return o??this.length+u}};function gT(s){return s[8]}function im(s){return s[8]||(s[8]=[])}function mT(s,o){let u;const c=o[s.index];if(li(c))u=c;else{let h;if(8&s.type)h=Fn(c);else{const p=o[11];h=p.createComment("");const v=Sr(s,o);_d(p,dg(p,v),h,function wy(s,o){return s.nextSibling(o)}(p,v),!1)}o[s.index]=u=function GE(s,o,u,c){return new Array(s,!0,!1,o,null,0,c,u,null,null)}(c,o,h,s),rc(o,u)}return new Yv(u,s,o)}class sm{constructor(o){this.queryList=o,this.matches=null}clone(){return new sm(this.queryList)}setDirty(){this.queryList.setDirty()}}class yT{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,h=[];for(let p=0;p<c;p++){const v=u.getByIndex(p);h.push(this.queries[v.indexInDeclarationView].clone())}return new yT(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==Tf(o,u).matches&&this.queries[u].setDirty()}}class Ex{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class vT{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const h=null!==u?u.length:0,p=this.getByIndex(c).embeddedTView(o,h);p&&(p.indexInDeclarationView=c,null!==u?u.push(p):u=[p])}return null!==u?new vT(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Xv{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new Xv(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const p=c[h];this.matchTNodeWithReadOption(o,u,Ix(u,p)),this.matchTNodeWithReadOption(o,u,ru(u,o,p,!1,!1))}else c===Bd?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,ru(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===ya||h===If||h===Bd&&4&u.type)this.addMatch(u.index,-2);else{const p=ru(u,o,h,!1,!1);null!==p&&this.addMatch(u.index,p)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function Ix(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function Cx(s,o,u,c){return-1===u?function Tx(s,o){return 11&s.type?ec(s,o):4&s.type?rm(s,o):null}(o,s):-2===u?function Dx(s,o,u){return u===ya?ec(o,s):u===Bd?rm(o,s):u===If?mT(o,s):void 0}(s,o,c):Wi(s,s[1],u,o)}function wT(s,o,u,c){const h=o[19].queries[c];if(null===h.matches){const p=s.data,v=u.matches,b=[];for(let T=0;T<v.length;T+=2){const M=v[T];b.push(M<0?null:Cx(o,p[M],v[T+1],u.metadata.read))}h.matches=b}return h.matches}function Jv(s,o,u,c){const h=s.queries.getByIndex(u),p=h.matches;if(null!==p){const v=wT(s,o,h,u);for(let b=0;b<p.length;b+=2){const T=p[b];if(T>0)c.push(v[b/2]);else{const M=p[b+1],N=o[-T];for(let B=10;B<N.length;B++){const X=N[B];X[17]===X[3]&&Jv(X[1],X,M,c)}if(null!==N[9]){const B=N[9];for(let X=0;X<B.length;X++){const oe=B[X];Jv(oe[1],oe,M,c)}}}}}return c}function ew(s){const o=Pe(),u=Qt(),c=Ka();kl(c+1);const h=Tf(u,c);if(s.dirty&&Pu(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const p=h.crossesNgTemplate?Jv(u,o,c,[]):wT(u,o,h,c);s.reset(p,IS),s.notifyOnChanges()}return!0}return!1}function bT(s,o,u){const c=Qt();c.firstCreatePass&&(IT(c,new Ex(s,o,u),-1),2==(2&o)&&(c.staticViewQueries=!0)),Ax(c,Pe(),o)}function Sx(s,o,u,c){const h=Qt();if(h.firstCreatePass){const p=ir();IT(h,new Ex(o,u,c),p.index),function Mx(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(h,s),2==(2&u)&&(h.staticContentQueries=!0)}Ax(h,Pe(),u)}function ET(){return function P1(s,o){return s[19].queries[o].queryList}(Pe(),Ka())}function Ax(s,o,u){const c=new Ef(4==(4&u));tf(s,o,c,c.destroy),null===o[19]&&(o[19]=new yT),o[19].queries.push(new sm(c))}function IT(s,o,u){null===s.queries&&(s.queries=new vT),s.queries.track(new Xv(o,u))}function Tf(s,o){return s.queries.getByIndex(o)}function pm(...s){}const wc=new xn("Application Initializer");let Af=(()=>{class s{constructor(u){this.appInits=u,this.resolve=pm,this.reject=pm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const p=this.appInits[h]();if(Nd(p))u.push(p);else if(ov(p)){const v=new Promise((b,T)=>{p.subscribe({complete:b,error:T})});u.push(v)}}Promise.all(u).then(()=>{c()}).catch(h=>{this.reject(h)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(ar(wc,8))},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const gm=new xn("AppId",{providedIn:"root",factory:function aw(){return`${mm()}${mm()}${mm()}`}});function mm(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Mf=new xn("Platform Initializer"),uw=new xn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),_m=new xn("appBootstrapListener"),Hx=new xn("AnimationModuleType");let Gx=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const xf=new xn("LocaleId",{providedIn:"root",factory:()=>C(xf,ot.Optional|ot.SkipSelf)||function lw(){return typeof $localize<"u"&&$localize.locale||fc}()}),zx=new xn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Wx{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let Rf=(()=>{class s{compileModuleSync(u){return new $v(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),p=fu(bt(u).declarations).reduce((v,b)=>{const T=G(b);return T&&v.push(new uf(T)),v},[]);return new Wx(c,p)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const cw=(()=>Promise.resolve(0))();function bm(s){typeof Zone>"u"?cw.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Ys{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Da(!1),this.onMicrotaskEmpty=new Da(!1),this.onStable=new Da(!1),this.onError=new Da(!1),typeof Zone>"u")throw new Se(908,!1);Zone.assertZonePatched();const h=this;if(h._nesting=0,h._outer=h._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const p=Zone.AsyncStackTaggingZoneSpec;h._inner=h._inner.fork(new p("Angular"))}Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&u,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function $T(){let s=Lt.requestAnimationFrame,o=Lt.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function GT(s){const o=()=>{!function dw(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Lt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,hw(s),s.isCheckStableRunning=!0,Em(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),hw(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,h,p,v,b)=>{try{return Im(s),u.invokeTask(h,p,v,b)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),Tm(s)}},onInvoke:(u,c,h,p,v,b,T)=>{try{return Im(s),u.invoke(h,p,v,b,T)}finally{s.shouldCoalesceRunChangeDetection&&o(),Tm(s)}},onHasTask:(u,c,h,p)=>{u.hasTask(h,p),c===h&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,hw(s),Em(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(u,c,h,p)=>(u.handleError(h,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ys.isInAngularZone())throw new Se(909,!1)}static assertNotInAngularZone(){if(Ys.isInAngularZone())throw new Se(909,!1)}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,h){const p=this._inner,v=p.scheduleEventTask("NgZoneEvent: "+h,o,HT,pm,pm);try{return p.runTask(v,u,c)}finally{p.cancelTask(v)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const HT={};function Em(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function hw(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function Im(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Tm(s){s._nesting--,Em(s)}class fw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Da,this.onMicrotaskEmpty=new Da,this.onStable=new Da,this.onError=new Da}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,h){return o.apply(u,c)}}const Vr=new xn(""),Zr=new xn("");let pw,Cm=(()=>{class s{constructor(u,c,h){this._ngZone=u,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,pw||(function Kx(s){pw=s}(h),h.addToWindow(c)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ys.assertNotInAngularZone(),bm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())bm(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,h){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==p),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:p,updateCb:h})}whenStable(u,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,c,h){return[]}}return s.\u0275fac=function(u){return new(u||s)(ar(Ys),ar(Dm),ar(Zr))},s.\u0275prov=nn({token:s,factory:s.\u0275fac}),s})(),Dm=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return pw?.findTestabilityInTree(this,u,c)??null}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),Eu=null;const zT=new xn("AllowMultipleToken"),gw=new xn("PlatformDestroyListeners");class WT{constructor(o,u){this.name=o,this.token=u}}function yw(s,o,u=[]){const c=`Platform: ${o}`,h=new xn(c);return(p=[])=>{let v=Mm();if(!v||v.injector.get(zT,!1)){const b=[...u,...p,{provide:h,useValue:!0}];s?s(b):function Zx(s){if(Eu&&!Eu.get(zT,!1))throw new Se(400,!1);Eu=s;const o=s.get(vw);(function Am(s){const o=s.get(Mf,null);o&&o.forEach(u=>u())})(s)}(function Vd(s=[],o){return vd.create({name:o,providers:[{provide:ws,useValue:"platform"},{provide:gw,useValue:new Set([()=>Eu=null])},...s]})}(b,c))}return function Yx(s){const o=Mm();if(!o)throw new Se(401,!1);return o}()}}function Mm(){return Eu?.get(vw)??null}let vw=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const h=function KT(s,o){let u;return u="noop"===s?new fw:("zone.js"===s?void 0:s)||new Ys(o),u}(c?.ngZone,function Nf(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(c)),p=[{provide:Ys,useValue:h}];return h.run(()=>{const v=vd.create({providers:p,parent:this.injector,name:u.moduleType.name}),b=u.create(v),T=b.injector.get(pd,null);if(!T)throw new Se(402,!1);return h.runOutsideAngular(()=>{const M=h.onError.subscribe({next:N=>{T.handleError(N)}});b.onDestroy(()=>{Rm(this._modules,b),M.unsubscribe()})}),function ZT(s,o,u){try{const c=u();return Nd(c)?c.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(T,h,()=>{const M=b.injector.get(Af);return M.runInitializers(),M.donePromise.then(()=>(function SM(s){qt(s,"Expected localeId to be defined"),"string"==typeof s&&(zg=s.toLowerCase().replace(/_/g,"-"))}(b.injector.get(xf,fc)||fc),this._moduleDoBootstrap(b),b))})})}bootstrapModule(u,c=[]){const h=bc({},c);return function mw(s,o,u){const c=new $v(u);return Promise.resolve(c)}(0,0,u).then(p=>this.bootstrapModuleFactory(p,h))}_moduleDoBootstrap(u){const c=u.injector.get(xm);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!u.instance.ngDoBootstrap)throw new Se(403,!1);u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Se(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const u=this._injector.get(gw,null);u&&(u.forEach(c=>c()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(ar(vd))},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function bc(s,o){return Array.isArray(o)?o.reduce(bc,s):{...s,...o}}let xm=(()=>{class s{constructor(u,c,h){this._zone=u,this._injector=c,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new P.y(b=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{b.next(this._stable),b.complete()})}),v=new P.y(b=>{let T;this._zone.runOutsideAngular(()=>{T=this._zone.onStable.subscribe(()=>{Ys.assertNotInAngularZone(),bm(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,b.next(!0))})})});const M=this._zone.onUnstable.subscribe(()=>{Ys.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{b.next(!1)}))});return()=>{T.unsubscribe(),M.unsubscribe()}});this.isStable=(0,le.T)(p,v.pipe((0,he.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,c){const h=u instanceof Gh;if(!this._injector.get(Af).done)throw!h&&Ye(u),new Se(405,false);let v;v=h?u:this._injector.get(hu).resolveComponentFactory(u),this.componentTypes.push(v.componentType);const b=function _w(s){return s.isBoundToModule}(v)?void 0:this._injector.get(xr),M=v.create(vd.NULL,[],c||v.selector,b),N=M.location.nativeElement,B=M.injector.get(Vr,null);return B?.registerApplication(N),M.onDestroy(()=>{this.detachView(M.hostView),Rm(this.components,M),B?.unregisterApplication(N)}),this._loadComponent(M),M}tick(){if(this._runningTick)throw new Se(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;Rm(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(_m,[]).concat(this._bootstrapListeners).forEach(h=>h(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>Rm(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new Se(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(u){return new(u||s)(ar(Ys),ar(Yl),ar(pd))},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Rm(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}let Pf=!0,ww=!1;function Of(){return ww=!0,Pf}function QT(){if(ww)throw new Error("Cannot enable prod mode after platform setup.");Pf=!1}let km=(()=>{class s{}return s.__NG_ELEMENT_ID__=XT,s})();function XT(s){return function bw(s,o,u){if(Tl(s)&&!u){const c=cn(s.index,o);return new af(c,c)}return 47&s.type?new af(o[16],o):null}(ir(),Pe(),16==(16&s))}class Fm{constructor(){}supports(o){return Cd(o)}create(o){return new Cw(o)}}const nR=(s,o)=>o;class Cw{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||nR}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,h=0,p=null;for(;u||c;){const v=!c||u&&u.currentIndex<Sw(c,h,p)?u:c,b=Sw(v,h,p),T=v.currentIndex;if(v===c)h--,c=c._nextRemoved;else if(u=u._next,null==v.previousIndex)h++;else{p||(p=[]);const M=b-h,N=T-h;if(M!=N){for(let X=0;X<M;X++){const oe=X<p.length?p[X]:p[X]=0,Me=oe+X;N<=Me&&Me<M&&(p[X]=oe+1)}p[v.previousIndex]=N-M}}b!==T&&o(v,b,T)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!Cd(o))throw new Se(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,p,v,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let b=0;b<this.length;b++)p=o[b],v=this._trackByFn(b,p),null!==u&&Object.is(u.trackById,v)?(c&&(u=this._verifyReinsertion(u,p,v,b)),Object.is(u.item,p)||this._addIdentityChange(u,p)):(u=this._mismatch(u,p,v,b),c=!0),u=u._next}else h=0,function Gs(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[oc()]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,b=>{v=this._trackByFn(h,b),null!==u&&Object.is(u.trackById,v)?(c&&(u=this._verifyReinsertion(u,b,v,h)),Object.is(u.item,b)||this._addIdentityChange(u,b)):(u=this._mismatch(u,b,v,h),c=!0),u=u._next,h++}),this.length=h;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,h){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,p,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,p,h)):o=this._addAfter(new Hd(u,c),p,h),o}_verifyReinsertion(o,u,c,h){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?o=this._reinsertAfter(p,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,p=o._nextRemoved;return null===h?this._removalsHead=p:h._nextRemoved=p,null===p?this._removalsTail=h:p._prevRemoved=h,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const h=null===u?this._itHead:u._next;return o._next=h,o._prev=u,null===h?this._itTail=o:h._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new ll),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ll),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class Hd{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Dw{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class ll{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new Dw,this.map.set(u,c)),c.add(o)}get(o,u){const h=this.map.get(o);return h?h.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Sw(s,o,u){const c=s.previousIndex;if(null===c)return c;let h=0;return u&&c<u.length&&(h=u[c]),c+o+h}class iC{constructor(){}supports(o){return o instanceof Map||nl(o)}create(){return new Ic}}class Ic{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||nl(o)))throw new Se(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,h)=>{if(u&&u.key===h)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const p=this._getOrCreateRecordForKey(h,c);u=this._insertBeforeOrAppend(u,p)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,u);const p=h._prev,v=h._next;return p&&(p._next=v),v&&(v._prev=p),h._next=null,h._prev=null,h}const c=new Tu(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class Tu{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Bf(){return new Gd([new Fm])}let Gd=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const h=c.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||Bf()),deps:[[s,new kt,new Xe]]}}find(u){const c=this.factories.find(h=>h.supports(u));if(null!=c)return c;throw new Se(901,!1)}}return s.\u0275prov=nn({token:s,providedIn:"root",factory:Bf}),s})();function Mw(){return new Vn([new iC])}let Vn=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const h=c.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||Mw()),deps:[[s,new kt,new Xe]]}}find(u){const c=this.factories.find(h=>h.supports(u));if(c)return c;throw new Se(901,!1)}}return s.\u0275prov=nn({token:s,providedIn:"root",factory:Mw}),s})();const Vf=yw(null,"core",[]);let iR=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(ar(xm))},s.\u0275mod=It({type:s}),s.\u0275inj=Ht({}),s})();function sC(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(gt,ke,U)=>{U.d(ke,{Z:()=>Se});var m=U(2090),$=U(4859),P=U(9681),le=U(1877);class he{constructor(Ce,ve){this._delegate=Ce,this.firebase=ve,(0,P._addComponent)(Ce,new $.wA("app-compat",()=>this,"PUBLIC")),this.container=Ce.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ce){this._delegate.automaticDataCollectionEnabled=Ce}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ce=>{this._delegate.checkDestroyed(),Ce()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(Ce,ve=P._DEFAULT_ENTRY_NAME){var it;this._delegate.checkDestroyed();const st=this._delegate.container.getProvider(Ce);return!st.isInitialized()&&"EXPLICIT"===(null===(it=st.getComponent())||void 0===it?void 0:it.instantiationMode)&&st.initialize(),st.getImmediate({identifier:ve})}_removeServiceInstance(Ce,ve=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ce).clearInstance(ve)}_addComponent(Ce){(0,P._addComponent)(this._delegate,Ce)}_addOrOverwriteComponent(Ce){(0,P._addOrOverwriteComponent)(this._delegate,Ce)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const pe=new m.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),q=function Ie(){const ct=function _e(ct){const Ce={},ve={__esModule:!0,initializeApp:function Fe(ue,fe={}){const Ee=P.initializeApp(ue,fe);if((0,m.r3)(Ce,Ee.name))return Ce[Ee.name];const te=new ct(Ee,ve);return Ce[Ee.name]=te,te},app:st,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function Ae(ue){const fe=ue.name,Ee=fe.replace("-compat","");if(P._registerComponent(ue)&&"PUBLIC"===ue.type){const te=(ie=st())=>{if("function"!=typeof ie[Ee])throw pe.create("invalid-app-argument",{appName:fe});return ie[Ee]()};void 0!==ue.serviceProps&&(0,m.ZB)(te,ue.serviceProps),ve[Ee]=te,ct.prototype[Ee]=function(...ie){return this._getService.bind(this,fe).apply(this,ue.multipleInstances?ie:[])}}return"PUBLIC"===ue.type?ve[Ee]:null},removeApp:function it(ue){delete Ce[ue]},useAsService:function Ze(ue,fe){return"serverAuth"===fe?null:fe},modularAPIs:P}};function st(ue){if(!(0,m.r3)(Ce,ue=ue||P._DEFAULT_ENTRY_NAME))throw pe.create("no-app",{appName:ue});return Ce[ue]}return ve.default=ve,Object.defineProperty(ve,"apps",{get:function Ne(){return Object.keys(Ce).map(ue=>Ce[ue])}}),st.App=ct,ve}(he);return ct.INTERNAL=Object.assign(Object.assign({},ct.INTERNAL),{createFirebaseNamespace:Ie,extendNamespace:function Ce(ve){(0,m.ZB)(ct,ve)},createSubscribe:m.ne,ErrorFactory:m.LL,deepExtend:m.ZB}),ct}(),K=new le.Yd("@firebase/app-compat");if((0,m.jU)()&&void 0!==self.firebase){K.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ct=self.firebase.SDK_VERSION;ct&&ct.indexOf("LITE")>=0&&K.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Se=q;!function Le(ct){(0,P.registerVersion)("@firebase/app-compat","0.1.33",ct)}()},9681:(gt,ke,U)=>{U.r(ke),U.d(ke,{FirebaseError:()=>le.ZR,SDK_VERSION:()=>ji,_DEFAULT_ENTRY_NAME:()=>qt,_addComponent:()=>ln,_addOrOverwriteComponent:()=>nn,_apps:()=>Tn,_clearComponents:()=>ro,_components:()=>$n,_getProvider:()=>Ht,_registerComponent:()=>Kt,_removeServiceInstance:()=>Ir,deleteApp:()=>$i,getApp:()=>Hn,getApps:()=>Si,initializeApp:()=>Xr,onLog:()=>Gn,registerVersion:()=>_r,setLogLevel:()=>vn});var m=U(5861),$=U(4859),P=U(1877),le=U(2090),he=U(8766);class we{constructor(Y){this.container=Y}getPlatformInfoString(){return this.container.getProviders().map(Q=>{if(function pe(H){return"VERSION"===H.getComponent()?.type}(Q)){const xe=Q.getImmediate();return`${xe.library}/${xe.version}`}return null}).filter(Q=>Q).join(" ")}}const _e="@firebase/app",q=new P.Yd("@firebase/app"),qt="[DEFAULT]",Qe={[_e]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Tn=new Map,$n=new Map;function ln(H,Y){try{H.container.addComponent(Y)}catch(Q){q.debug(`Component ${Y.name} failed to register with FirebaseApp ${H.name}`,Q)}}function nn(H,Y){H.container.addOrOverwriteComponent(Y)}function Kt(H){const Y=H.name;if($n.has(Y))return q.debug(`There were multiple attempts to register component ${Y}.`),!1;$n.set(Y,H);for(const Q of Tn.values())ln(Q,H);return!0}function Ht(H,Y){const Q=H.container.getProvider("heartbeat").getImmediate({optional:!0});return Q&&Q.triggerHeartbeat(),H.container.getProvider(Y)}function Ir(H,Y,Q=qt){Ht(H,Y).clearInstance(Q)}function ro(){$n.clear()}const Nn=new le.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class as{constructor(Y,Q,xe){this._isDeleted=!1,this._options=Object.assign({},Y),this._config=Object.assign({},Q),this._name=Q.name,this._automaticDataCollectionEnabled=Q.automaticDataCollectionEnabled,this._container=xe,this.container.addComponent(new $.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Y){this.checkDestroyed(),this._automaticDataCollectionEnabled=Y}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Y){this._isDeleted=Y}checkDestroyed(){if(this.isDeleted)throw Nn.create("app-deleted",{appName:this._name})}}const ji="9.9.4";function Xr(H,Y={}){"object"!=typeof Y&&(Y={name:Y});const Q=Object.assign({name:qt,automaticDataCollectionEnabled:!1},Y),xe=Q.name;if("string"!=typeof xe||!xe)throw Nn.create("bad-app-name",{appName:String(xe)});const qe=Tn.get(xe);if(qe){if((0,le.vZ)(H,qe.options)&&(0,le.vZ)(Q,qe.config))return qe;throw Nn.create("duplicate-app",{appName:xe})}const It=new $.H0(xe);for(const fn of $n.values())It.addComponent(fn);const pn=new as(H,Q,It);return Tn.set(xe,pn),pn}function Hn(H=qt){const Y=Tn.get(H);if(!Y)throw Nn.create("no-app",{appName:H});return Y}function Si(){return Array.from(Tn.values())}function $i(H){return ot.apply(this,arguments)}function ot(){return(ot=(0,m.Z)(function*(H){const Y=H.name;Tn.has(Y)&&(Tn.delete(Y),yield Promise.all(H.container.getProviders().map(Q=>Q.delete())),H.isDeleted=!0)})).apply(this,arguments)}function _r(H,Y,Q){var xe;let qe=null!==(xe=Qe[H])&&void 0!==xe?xe:H;Q&&(qe+=`-${Q}`);const It=qe.match(/\s|\//),pn=Y.match(/\s|\//);if(It||pn){const fn=[`Unable to register library "${qe}" with version "${Y}":`];return It&&fn.push(`library name "${qe}" contains illegal characters (whitespace or "/")`),It&&pn&&fn.push("and"),pn&&fn.push(`version name "${Y}" contains illegal characters (whitespace or "/")`),void q.warn(fn.join(" "))}Kt(new $.wA(`${qe}-version`,()=>({library:qe,version:Y}),"VERSION"))}function Gn(H,Y){if(null!==H&&"function"!=typeof H)throw Nn.create("invalid-log-argument");(0,P.Am)(H,Y)}function vn(H){(0,P.Ub)(H)}const An="firebase-heartbeat-store";let Mn=null;function Cn(){return Mn||(Mn=(0,he.X3)("firebase-heartbeat-database",1,{upgrade:(H,Y)=>{0===Y&&H.createObjectStore(An)}}).catch(H=>{throw Nn.create("idb-open",{originalErrorMessage:H.message})})),Mn}function _t(){return(_t=(0,m.Z)(function*(H){var Y;try{return(yield Cn()).transaction(An).objectStore(An).get(vr(H))}catch(Q){if(Q instanceof le.ZR)q.warn(Q.message);else{const xe=Nn.create("idb-get",{originalErrorMessage:null===(Y=Q)||void 0===Y?void 0:Y.message});q.warn(xe.message)}}})).apply(this,arguments)}function Lt(H,Y){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,m.Z)(function*(H,Y){var Q;try{const qe=(yield Cn()).transaction(An,"readwrite");return yield qe.objectStore(An).put(Y,vr(H)),qe.done}catch(xe){if(xe instanceof le.ZR)q.warn(xe.message);else{const qe=Nn.create("idb-set",{originalErrorMessage:null===(Q=xe)||void 0===Q?void 0:Q.message});q.warn(qe.message)}}})).apply(this,arguments)}function vr(H){return`${H.name}!${H.options.appId}`}class Pr{constructor(Y){this.container=Y,this._heartbeatsCache=null;const Q=this.container.getProvider("app").getImmediate();this._storage=new Yt(Q),this._heartbeatsCachePromise=this._storage.read().then(xe=>(this._heartbeatsCache=xe,xe))}triggerHeartbeat(){var Y=this;return(0,m.Z)(function*(){const xe=Y.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),qe=Ut();if(null===Y._heartbeatsCache&&(Y._heartbeatsCache=yield Y._heartbeatsCachePromise),Y._heartbeatsCache.lastSentHeartbeatDate!==qe&&!Y._heartbeatsCache.heartbeats.some(It=>It.date===qe))return Y._heartbeatsCache.heartbeats.push({date:qe,agent:xe}),Y._heartbeatsCache.heartbeats=Y._heartbeatsCache.heartbeats.filter(It=>{const pn=new Date(It.date).valueOf();return Date.now()-pn<=2592e6}),Y._storage.overwrite(Y._heartbeatsCache)})()}getHeartbeatsHeader(){var Y=this;return(0,m.Z)(function*(){if(null===Y._heartbeatsCache&&(yield Y._heartbeatsCachePromise),null===Y._heartbeatsCache||0===Y._heartbeatsCache.heartbeats.length)return"";const Q=Ut(),{heartbeatsToSend:xe,unsentEntries:qe}=function Jr(H,Y=1024){const Q=[];let xe=H.slice();for(const qe of H){const It=Q.find(pn=>pn.agent===qe.agent);if(It){if(It.dates.push(qe.date),J(Q)>Y){It.dates.pop();break}}else if(Q.push({agent:qe.agent,dates:[qe.date]}),J(Q)>Y){Q.pop();break}xe=xe.slice(1)}return{heartbeatsToSend:Q,unsentEntries:xe}}(Y._heartbeatsCache.heartbeats),It=(0,le.L)(JSON.stringify({version:2,heartbeats:xe}));return Y._heartbeatsCache.lastSentHeartbeatDate=Q,qe.length>0?(Y._heartbeatsCache.heartbeats=qe,yield Y._storage.overwrite(Y._heartbeatsCache)):(Y._heartbeatsCache.heartbeats=[],Y._storage.overwrite(Y._heartbeatsCache)),It})()}}function Ut(){return(new Date).toISOString().substring(0,10)}class Yt{constructor(Y){this.app=Y,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,m.Z)(function*(){return!!(0,le.hl)()&&(0,le.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Y=this;return(0,m.Z)(function*(){return(yield Y._canUseIndexedDBPromise)&&(yield function mt(H){return _t.apply(this,arguments)}(Y.app))||{heartbeats:[]}})()}overwrite(Y){var Q=this;return(0,m.Z)(function*(){var xe;if(yield Q._canUseIndexedDBPromise){const It=yield Q.read();return Lt(Q.app,{lastSentHeartbeatDate:null!==(xe=Y.lastSentHeartbeatDate)&&void 0!==xe?xe:It.lastSentHeartbeatDate,heartbeats:Y.heartbeats})}})()}add(Y){var Q=this;return(0,m.Z)(function*(){var xe;if(yield Q._canUseIndexedDBPromise){const It=yield Q.read();return Lt(Q.app,{lastSentHeartbeatDate:null!==(xe=Y.lastSentHeartbeatDate)&&void 0!==xe?xe:It.lastSentHeartbeatDate,heartbeats:[...It.heartbeats,...Y.heartbeats]})}})()}}function J(H){return(0,le.L)(JSON.stringify({version:2,heartbeats:H})).length}!function z(H){Kt(new $.wA("platform-logger",Y=>new we(Y),"PRIVATE")),Kt(new $.wA("heartbeat",Y=>new Pr(Y),"PRIVATE")),_r(_e,"0.7.32",H),_r(_e,"0.7.32","esm2017"),_r("fire-js","")}("")},4859:(gt,ke,U)=>{U.d(ke,{H0:()=>_e,wA:()=>P,zt:()=>he});var m=U(5861),$=U(2090);class P{constructor(q,K,ne){this.name=q,this.instanceFactory=K,this.type=ne,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(q){return this.instantiationMode=q,this}setMultipleInstances(q){return this.multipleInstances=q,this}setServiceProps(q){return this.serviceProps=q,this}setInstanceCreatedCallback(q){return this.onInstanceCreated=q,this}}const le="[DEFAULT]";class he{constructor(q,K){this.name=q,this.container=K,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(q){const K=this.normalizeInstanceIdentifier(q);if(!this.instancesDeferred.has(K)){const ne=new $.BH;if(this.instancesDeferred.set(K,ne),this.isInitialized(K)||this.shouldAutoInitialize())try{const We=this.getOrInitializeService({instanceIdentifier:K});We&&ne.resolve(We)}catch{}}return this.instancesDeferred.get(K).promise}getImmediate(q){var K;const ne=this.normalizeInstanceIdentifier(q?.identifier),We=null!==(K=q?.optional)&&void 0!==K&&K;if(!this.isInitialized(ne)&&!this.shouldAutoInitialize()){if(We)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ne})}catch(Le){if(We)return null;throw Le}}getComponent(){return this.component}setComponent(q){if(q.name!==this.name)throw Error(`Mismatching Component ${q.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=q,this.shouldAutoInitialize()){if(function pe(Ie){return"EAGER"===Ie.instantiationMode}(q))try{this.getOrInitializeService({instanceIdentifier:le})}catch{}for(const[K,ne]of this.instancesDeferred.entries()){const We=this.normalizeInstanceIdentifier(K);try{const Le=this.getOrInitializeService({instanceIdentifier:We});ne.resolve(Le)}catch{}}}}clearInstance(q=le){this.instancesDeferred.delete(q),this.instancesOptions.delete(q),this.instances.delete(q)}delete(){var q=this;return(0,m.Z)(function*(){const K=Array.from(q.instances.values());yield Promise.all([...K.filter(ne=>"INTERNAL"in ne).map(ne=>ne.INTERNAL.delete()),...K.filter(ne=>"_delete"in ne).map(ne=>ne._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(q=le){return this.instances.has(q)}getOptions(q=le){return this.instancesOptions.get(q)||{}}initialize(q={}){const{options:K={}}=q,ne=this.normalizeInstanceIdentifier(q.instanceIdentifier);if(this.isInitialized(ne))throw Error(`${this.name}(${ne}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const We=this.getOrInitializeService({instanceIdentifier:ne,options:K});for(const[Le,Se]of this.instancesDeferred.entries())ne===this.normalizeInstanceIdentifier(Le)&&Se.resolve(We);return We}onInit(q,K){var ne;const We=this.normalizeInstanceIdentifier(K),Le=null!==(ne=this.onInitCallbacks.get(We))&&void 0!==ne?ne:new Set;Le.add(q),this.onInitCallbacks.set(We,Le);const Se=this.instances.get(We);return Se&&q(Se,We),()=>{Le.delete(q)}}invokeOnInitCallbacks(q,K){const ne=this.onInitCallbacks.get(K);if(ne)for(const We of ne)try{We(q,K)}catch{}}getOrInitializeService({instanceIdentifier:q,options:K={}}){let ne=this.instances.get(q);if(!ne&&this.component&&(ne=this.component.instanceFactory(this.container,{instanceIdentifier:(Ie=q,Ie===le?void 0:Ie),options:K}),this.instances.set(q,ne),this.instancesOptions.set(q,K),this.invokeOnInitCallbacks(ne,q),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,q,ne)}catch{}var Ie;return ne||null}normalizeInstanceIdentifier(q=le){return this.component?this.component.multipleInstances?q:le:q}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class _e{constructor(q){this.name=q,this.providers=new Map}addComponent(q){const K=this.getProvider(q.name);if(K.isComponentSet())throw new Error(`Component ${q.name} has already been registered with ${this.name}`);K.setComponent(q)}addOrOverwriteComponent(q){this.getProvider(q.name).isComponentSet()&&this.providers.delete(q.name),this.addComponent(q)}getProvider(q){if(this.providers.has(q))return this.providers.get(q);const K=new he(q,this);return this.providers.set(q,K),K}getProviders(){return Array.from(this.providers.values())}}},1877:(gt,ke,U)=>{U.d(ke,{Am:()=>Ie,Ub:()=>_e,Yd:()=>pe,in:()=>$});const m=[];var $=(()=>{return(q=$||($={}))[q.DEBUG=0]="DEBUG",q[q.VERBOSE=1]="VERBOSE",q[q.INFO=2]="INFO",q[q.WARN=3]="WARN",q[q.ERROR=4]="ERROR",q[q.SILENT=5]="SILENT",$;var q})();const P={debug:$.DEBUG,verbose:$.VERBOSE,info:$.INFO,warn:$.WARN,error:$.ERROR,silent:$.SILENT},le=$.INFO,he={[$.DEBUG]:"log",[$.VERBOSE]:"log",[$.INFO]:"info",[$.WARN]:"warn",[$.ERROR]:"error"},we=(q,K,...ne)=>{if(K<q.logLevel)return;const We=(new Date).toISOString(),Le=he[K];if(!Le)throw new Error(`Attempted to log a message with an invalid logType (value: ${K})`);console[Le](`[${We}]  ${q.name}:`,...ne)};class pe{constructor(K){this.name=K,this._logLevel=le,this._logHandler=we,this._userLogHandler=null,m.push(this)}get logLevel(){return this._logLevel}set logLevel(K){if(!(K in $))throw new TypeError(`Invalid value "${K}" assigned to \`logLevel\``);this._logLevel=K}setLogLevel(K){this._logLevel="string"==typeof K?P[K]:K}get logHandler(){return this._logHandler}set logHandler(K){if("function"!=typeof K)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=K}get userLogHandler(){return this._userLogHandler}set userLogHandler(K){this._userLogHandler=K}debug(...K){this._userLogHandler&&this._userLogHandler(this,$.DEBUG,...K),this._logHandler(this,$.DEBUG,...K)}log(...K){this._userLogHandler&&this._userLogHandler(this,$.VERBOSE,...K),this._logHandler(this,$.VERBOSE,...K)}info(...K){this._userLogHandler&&this._userLogHandler(this,$.INFO,...K),this._logHandler(this,$.INFO,...K)}warn(...K){this._userLogHandler&&this._userLogHandler(this,$.WARN,...K),this._logHandler(this,$.WARN,...K)}error(...K){this._userLogHandler&&this._userLogHandler(this,$.ERROR,...K),this._logHandler(this,$.ERROR,...K)}}function _e(q){m.forEach(K=>{K.setLogLevel(q)})}function Ie(q,K){for(const ne of m){let We=null;K&&K.level&&(We=P[K.level]),ne.userLogHandler=null===q?null:(Le,Se,...ct)=>{const Ce=ct.map(ve=>{if(null==ve)return null;if("string"==typeof ve)return ve;if("number"==typeof ve||"boolean"==typeof ve)return ve.toString();if(ve instanceof Error)return ve.message;try{return JSON.stringify(ve)}catch{return null}}).filter(ve=>ve).join(" ");Se>=(We??Le.logLevel)&&q({level:$[Se].toLowerCase(),message:Ce,args:ct,type:Le.name})}}}},8766:(gt,ke,U)=>{U.d(ke,{Lj:()=>Fe,X3:()=>st});var m=U(5861);let P,le;const pe=new WeakMap,_e=new WeakMap,Ie=new WeakMap,q=new WeakMap,K=new WeakMap;let Le={get(fe,Ee,te){if(fe instanceof IDBTransaction){if("done"===Ee)return _e.get(fe);if("objectStoreNames"===Ee)return fe.objectStoreNames||Ie.get(fe);if("store"===Ee)return te.objectStoreNames[1]?void 0:te.objectStore(te.objectStoreNames[0])}return ve(fe[Ee])},set:(fe,Ee,te)=>(fe[Ee]=te,!0),has:(fe,Ee)=>fe instanceof IDBTransaction&&("done"===Ee||"store"===Ee)||Ee in fe};function Ce(fe){return"function"==typeof fe?function ct(fe){return fe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function we(){return le||(le=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(fe)?function(...Ee){return fe.apply(it(this),Ee),ve(pe.get(this))}:function(...Ee){return ve(fe.apply(it(this),Ee))}:function(Ee,...te){const ie=fe.call(it(this),Ee,...te);return Ie.set(ie,Ee.sort?Ee.sort():[Ee]),ve(ie)}}(fe):(fe instanceof IDBTransaction&&function We(fe){if(_e.has(fe))return;const Ee=new Promise((te,ie)=>{const ye=()=>{fe.removeEventListener("complete",de),fe.removeEventListener("error",je),fe.removeEventListener("abort",je)},de=()=>{te(),ye()},je=()=>{ie(fe.error||new DOMException("AbortError","AbortError")),ye()};fe.addEventListener("complete",de),fe.addEventListener("error",je),fe.addEventListener("abort",je)});_e.set(fe,Ee)}(fe),((fe,Ee)=>Ee.some(te=>fe instanceof te))(fe,function he(){return P||(P=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(fe,Le):fe)}function ve(fe){if(fe instanceof IDBRequest)return function ne(fe){const Ee=new Promise((te,ie)=>{const ye=()=>{fe.removeEventListener("success",de),fe.removeEventListener("error",je)},de=()=>{te(ve(fe.result)),ye()},je=()=>{ie(fe.error),ye()};fe.addEventListener("success",de),fe.addEventListener("error",je)});return Ee.then(te=>{te instanceof IDBCursor&&pe.set(te,fe)}).catch(()=>{}),K.set(Ee,fe),Ee}(fe);if(q.has(fe))return q.get(fe);const Ee=Ce(fe);return Ee!==fe&&(q.set(fe,Ee),K.set(Ee,fe)),Ee}const it=fe=>K.get(fe);function st(fe,Ee,{blocked:te,upgrade:ie,blocking:ye,terminated:de}={}){const je=indexedDB.open(fe,Ee),$e=ve(je);return ie&&je.addEventListener("upgradeneeded",wt=>{ie(ve(je.result),wt.oldVersion,wt.newVersion,ve(je.transaction))}),te&&je.addEventListener("blocked",()=>te()),$e.then(wt=>{de&&wt.addEventListener("close",()=>de()),ye&&wt.addEventListener("versionchange",()=>ye())}).catch(()=>{}),$e}function Fe(fe,{blocked:Ee}={}){const te=indexedDB.deleteDatabase(fe);return Ee&&te.addEventListener("blocked",()=>Ee()),ve(te).then(()=>{})}const Ne=["get","getKey","getAll","getAllKeys","count"],Ae=["put","add","delete","clear"],Ze=new Map;function ue(fe,Ee){if(!(fe instanceof IDBDatabase)||Ee in fe||"string"!=typeof Ee)return;if(Ze.get(Ee))return Ze.get(Ee);const te=Ee.replace(/FromIndex$/,""),ie=Ee!==te,ye=Ae.includes(te);if(!(te in(ie?IDBIndex:IDBObjectStore).prototype)||!ye&&!Ne.includes(te))return;const de=function(){var je=(0,m.Z)(function*($e,...wt){const tn=this.transaction($e,ye?"readwrite":"readonly");let qt=tn.store;return ie&&(qt=qt.index(wt.shift())),(yield Promise.all([qt[te](...wt),ye&&tn.done]))[0]});return function(wt){return je.apply(this,arguments)}}();return Ze.set(Ee,de),de}!function Se(fe){Le=fe(Le)}(fe=>({...fe,get:(Ee,te,ie)=>ue(Ee,te)||fe.get(Ee,te,ie),has:(Ee,te)=>!!ue(Ee,te)||fe.has(Ee,te)}))},5861:(gt,ke,U)=>{function m(P,le,he,we,pe,_e,Ie){try{var q=P[_e](Ie),K=q.value}catch(ne){return void he(ne)}q.done?le(K):Promise.resolve(K).then(we,pe)}function $(P){return function(){var le=this,he=arguments;return new Promise(function(we,pe){var _e=P.apply(le,he);function Ie(K){m(_e,we,pe,Ie,q,"next",K)}function q(K){m(_e,we,pe,Ie,q,"throw",K)}Ie(void 0)})}}U.d(ke,{Z:()=>$})}},gt=>{gt(gt.s=9816)}]);